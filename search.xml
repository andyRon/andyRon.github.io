<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[1]]></title>
    <url>%2F2017%2F1.html</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[iOSä¸ŽJS(ä¸€)ï¼šä½¿ç”¨URLæ‹¦æˆªçš„æ–¹å¼è¿›è¡ŒJSä¸ŽOCäº’ç›¸è°ƒç”¨]]></title>
    <url>%2F2017%2Fios-js-1.html</url>
    <content type="text"><![CDATA[å…³äºŽWKWebViewä¸ŽUIWebViewä¹‹é—´çš„åŒºåˆ«ï¼Œæœ¬æ–‡å°±ä¸åœ¨è¯´æ˜Žï¼Œæœ¬æ–‡åªä½¿ç”¨WKWebViewã€‚æ•ˆæžœå›¾å¦‚ä¸‹ï¼š htmlä»£ç ï¼š12345678910111213141516171819202122232425262728293031323334353637&lt;html&gt; &lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf8&quot;&gt; &lt;script language=&quot;javascript&quot;&gt; function loadURL(url) &#123; window.location.href = url &#125; function locationClick() &#123; loadURL(&quot;scheme://getLocation&quot;); &#125; function shake() &#123; loadURL(&quot;scheme://shake&quot;); &#125; function setLocation(location) &#123; alert(location) document.getElementById(&quot;returnValue&quot;).value = location; &#125; &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;è¿™æ˜¯æŒ‰é’®è°ƒç”¨&lt;/h1&gt; &lt;input type=&quot;button&quot; value=&quot;èŽ·å–å®šä½&quot; onclick=&quot;locationClick()&quot; /&gt;&lt;br&gt;&lt;br&gt; &lt;input type=&quot;button&quot; value=&quot;éœ‡åŠ¨ä¸€ä¸‹&quot; onclick=&quot;shake()&quot; /&gt;&lt;br&gt;&lt;br&gt; &lt;h1&gt;è¿™æ˜¯æ–‡ä»¶ä¸Šä¼ &lt;/h1&gt; &lt;input type=&quot;file&quot; /&gt;&lt;br&gt;&lt;br&gt; &lt;h1&gt;è¿™æ˜¯å›žè°ƒç»“æžœå±•ç¤ºåŒº&lt;/h1&gt; &lt;textarea id =&quot;returnValue&quot; type=&quot;value&quot; rows=&quot;5&quot; cols=&quot;50&quot;&gt;&lt;/textarea&gt; &lt;/body&gt;&lt;/html&gt; ä»¥èŽ·å–å®šä½è¿™ä¸ªæŒ‰é’®ä¸ºä¾‹è¯´æ˜ŽOCå’ŒJSäº’ç›¸è°ƒç”¨ä»£ç æ‰§è¡Œæµç¨‹ï¼š åˆå§‹åŒ–WKWebViewåŠ è½½æœ¬åœ°htmlæ–‡ä»¶ã€‚ ç‚¹å‡»webä¸­çš„æŒ‰é’®ï¼Œwebå‘èµ·URLè¯·æ±‚ã€‚ URLè¯·æ±‚è¢«WKNavigationDelegateä¸­çš„ä»£ç†æ–¹æ³•æ‹¦æˆªã€‚æ ¹æ®è‡ªå®šä¹‰çš„URLè¯†åˆ«ä½¿ç”¨ä¸åŒçš„å¤„ç†æ–¹å¼ã€‚å¦‚ï¼šåœ¨- (void)getLocationæ–¹æ³•ä¸­è°ƒç”¨JSçš„setLocationå‡½æ•°ã€‚ JSçš„setLocationå‡½æ•°æ‰§è¡ŒJSçš„alert()å‡½æ•°ï¼Œè¢«WKUIDelegateä¸­çš„ä»£ç†æ–¹æ³•æ•èŽ·ï¼Œè°ƒç”¨iOSåŽŸç”Ÿçš„å¼¹æ¡†ã€‚ è¯¦ç»†ä»£ç è¯´æ˜Ž åˆå§‹åŒ–WKWebViewåŠ è½½æœ¬åœ°htmlæ–‡ä»¶ 123456789101112131415161718192021- (void)initWKWebView&#123; // 1 WKWebViewConfiguration *configuration = [[WKWebViewConfiguration alloc] init]; configuration.userContentController = [WKUserContentController new]; WKPreferences *preferences = [WKPreferences new]; preferences.javaScriptCanOpenWindowsAutomatically = YES; preferences.minimumFontSize = 40.0; configuration.preferences = preferences; self.webView = [[WKWebView alloc] initWithFrame:self.view.frame configuration:configuration]; // 2 NSString *urlStr = [[NSBundle mainBundle] pathForResource:@&quot;index.html&quot; ofType:nil]; NSURL *fileURL = [NSURL fileURLWithPath:urlStr]; [self.webView loadFileURL:fileURL allowingReadAccessToURL:fileURL]; self.webView.navigationDelegate = self; self.webView.UIDelegate = self; [self.view addSubview:self.webView];&#125; 1 WKWebViewçš„ä¸€äº›å‚æ•°é…ç½® 2 åŠ è½½æœ¬html URLè¯·æ±‚è¢«WKNavigationDelegateä¸­çš„ä»£ç†æ–¹æ³•æ‹¦æˆªã€‚ä¹Ÿå°±æ˜¯JSè°ƒç”¨äº†OC 1234567891011121314#pragma mark - WKNavigationDelegate- (void)webView:(WKWebView *)webView decidePolicyForNavigationAction:(WKNavigationAction *)navigationAction decisionHandler:(void (^)(WKNavigationActionPolicy))decisionHandler&#123; NSURL *URL = navigationAction.request.URL; NSString *scheme = [URL scheme]; if ([scheme isEqualToString:@&quot;scheme&quot;]) &#123; [self handleCustomAction:URL]; decisionHandler(WKNavigationActionPolicyCancel); return; &#125; decisionHandler(WKNavigationActionPolicyAllow);&#125; OC è°ƒç”¨ JS 12345678- (void)getLocation&#123; // å°†ç»“æžœè¿”å›žç»™js NSString *jsStr = [NSString stringWithFormat:@&quot;setLocation(&apos;%@&apos;)&quot;,@&quot;ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒº&quot;]; [self.webView evaluateJavaScript:jsStr completionHandler:^(id _Nullable result, NSError * _Nullable error) &#123; NSLog(@&quot;%@----%@&quot;,result, error); &#125;];&#125; JSä»£ç è¢«å½“æˆå­—ç¬¦ä¸²è°ƒç”¨ completionHandleræ˜¯JSä»£ç è¢«è°ƒç”¨åŽå›žè°ƒ JSä¸­alertå¼¹çª—è¢«WKUIDelegateä¸­çš„ä»£ç†æ–¹æ³•æ•èŽ·ï¼Œè°ƒç”¨iOSåŽŸç”Ÿçš„å¼¹æ¡†ã€‚ 1234567891011#pragma mark - WKUIDelegate- (void)webView:(WKWebView *)webView runJavaScriptAlertPanelWithMessage:(NSString *)message initiatedByFrame:(WKFrameInfo *)frame completionHandler:(void (^)(void))completionHandler&#123; UIAlertController *alert = [UIAlertController alertControllerWithTitle:@&quot;æé†’&quot; message:message preferredStyle:UIAlertControllerStyleAlert]; [alert addAction:[UIAlertAction actionWithTitle:@&quot;çŸ¥é“äº†&quot; style:UIAlertActionStyleCancel handler:^(UIAlertAction * _Nonnull action) &#123; completionHandler(); &#125;]]; [self presentViewController:alert animated:YES completion:nil];&#125; æœ€åŽï¼Œhtmlä¸­çš„æ–‡ä»¶inputå¯ä»¥ç›´æŽ¥è°ƒç”¨iOSçš„å›¾ç‰‡åº“ï¼Œç›¸æœºå’Œæ–‡ä»¶ã€‚ ä»£ç ï¼š 90-iOSJS/OCJS1 å‚è€ƒï¼š iOSä¸‹JSä¸ŽOCäº’ç›¸è°ƒç”¨ï¼ˆäºŒï¼‰â€“WKWebView æ‹¦æˆªURL iOSä¸‹JSä¸ŽåŽŸç”ŸOCäº’ç›¸è°ƒç”¨(æ€»ç»“)]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOSä¸ŽJS(äºŒ)ï¼šMessageHandler(OC&Swift)]]></title>
    <url>%2F2017%2Fios-js-2.html</url>
    <content type="text"><![CDATA[iOSä¸ŽJSçš„ç›¸äº’è°ƒç”¨é™¤äº†URLæ‹¦æˆªï¼ˆiOSä¸ŽJS(ä¸€)ï¼šä½¿ç”¨URLæ‹¦æˆªçš„æ–¹å¼è¿›è¡ŒJSä¸ŽOCäº’ç›¸è°ƒç”¨ï¼‰å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨WKWebViewçš„ä¸­çš„MessageHandleræ¥å®žçŽ°ã€‚ MessageHandleræ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä»¥ä»£ç æ¥è¯´æ˜Žï¼Œæ¯”è¾ƒå¥½ç†è§£ã€‚åœ¨OCä¸­åˆå§‹åŒ–WKWebViewæ˜¯ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç :[self.webView.configuration.userContentController addScriptMessageHandler:self name:@&quot;Location&quot;];é‚£ä¹ˆåœ¨JSä¸­å°±å¯ä»¥ä½¿ç”¨ï¼šwindow.webkit.messageHandlers.Location.postMessage(null);JSä¸­çš„Locationå°±å¯¹åº”OCä¸­çš„nameï¼ŒpostMessageåŽçš„å‚æ•°å°±æ˜¯JSä¼ ç»™OCçš„å‚æ•°ï¼Œç±»åž‹å¯ä»¥æ˜¯ NSNumber, NSString, NSDate, NSArray, NSDictionary, and NSNullã€‚JSå›žè°ƒOCæ—¶ï¼Œå°±å›žè°ƒWKScriptMessageHandlerçš„- (void)userContentController:([WKUserContentController](apple-reference-documentation://hcracoR5p2) *)userContentController didReceiveScriptMessage:([WKScriptMessage](apple-reference-documentation://hcD3KQdcJY) *)message;æ–¹æ³•ï¼Œè¿™è¾¹çš„messageæ˜¯WKScriptMessageï¼Œ message.nameå°±æ˜¯â€œLocationâ€ï¼Œmessage.bodyå°±æ˜¯postMessageåŽçš„å‚æ•°ã€‚ ä¸‹é¢çœ‹å®Œæ•´çš„ðŸŒ°ï¼š htmlçš„ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&lt;html&gt; &lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf8&quot;&gt; &lt;script language=&quot;javascript&quot;&gt; var ctuapp_share_img=&quot;www.baidu.com&quot;; function locationClick() &#123; window.webkit.messageHandlers.Location.postMessage(null); &#125; function shake() &#123; window.webkit.messageHandlers.Shake.postMessage(null); &#125; function payClick()&#123; window.webkit.messageHandlers.Pay.postMessage(&#123;order_no:&apos;201511120981234&apos;,channel:&apos;wx&apos;,amount:1,subject:&apos;ç²‰è‰²å¤–å¥—&apos;&#125;); &#125; function setLocation(location) &#123; alert(location) document.getElementById(&quot;returnValue&quot;).value = location; &#125; function payResult(str) &#123; alert(str); document.getElementById(&quot;returnValue&quot;).value = str; &#125; &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;è¿™æ˜¯æŒ‰é’®è°ƒç”¨&lt;/h1&gt; &lt;input type=&quot;button&quot; value=&quot;èŽ·å–å®šä½&quot; onclick=&quot;locationClick()&quot; /&gt;&lt;br&gt;&lt;br&gt; &lt;input type=&quot;button&quot; value=&quot;éœ‡åŠ¨ä¸€ä¸‹&quot; onclick=&quot;shake()&quot; /&gt;&lt;br&gt;&lt;br&gt; &lt;input type=&quot;button&quot; value=&quot;æ”¯ä»˜&quot; onclick=&quot;payClick()&quot; /&gt;&lt;br&gt;&lt;br&gt; &lt;h1&gt;è¿™æ˜¯æ–‡ä»¶ä¸Šä¼ &lt;/h1&gt; &lt;input type=&quot;file&quot; /&gt;&lt;br&gt;&lt;br&gt; &lt;h1&gt;è¿™æ˜¯å›žè°ƒç»“æžœå±•ç¤ºåŒº&lt;/h1&gt; &lt;textarea id =&quot;returnValue&quot; type=&quot;value&quot; rows=&quot;5&quot; cols=&quot;50&quot;&gt;&lt;/textarea&gt; &lt;/body&gt;&lt;/html&gt; åˆå§‹åŒ–WKWebView12345678910111213141516171819- (void)initWKWebView&#123; WKWebViewConfiguration *configuration = [[WKWebViewConfiguration alloc] init]; WKPreferences *preferences = [WKPreferences new]; preferences.javaScriptCanOpenWindowsAutomatically = YES; preferences.minimumFontSize = 40.0; configuration.preferences = preferences; self.webView = [[WKWebView alloc] initWithFrame:self.view.frame configuration:configuration]; NSString *urlStr = [[NSBundle mainBundle] pathForResource:@&quot;index.html&quot; ofType:nil]; NSURL *fileURL = [NSURL fileURLWithPath:urlStr]; [self.webView loadFileURL:fileURL allowingReadAccessToURL:fileURL]; self.webView.UIDelegate = self; [self.view addSubview:self.webView];&#125; æ·»åŠ  MessageHandlerä¸ºäº†é˜²æ­¢å¾ªçŽ¯å¼•ç”¨ï¼Œç»“æŸæ—¶é‡Šæ”¾ã€‚123456789101112131415161718- (void)viewWillAppear:(BOOL)animated&#123; [super viewWillAppear:animated]; // addScriptMessageHandler å¾ˆå®¹æ˜“å¯¼è‡´å¾ªçŽ¯å¼•ç”¨ // æŽ§åˆ¶å™¨ å¼ºå¼•ç”¨äº†WKWebView,WKWebView copy(å¼ºå¼•ç”¨äº†ï¼‰configurationï¼Œ configuration copy ï¼ˆå¼ºå¼•ç”¨äº†ï¼‰userContentController [self.webView.configuration.userContentController addScriptMessageHandler:self name:@&quot;Location&quot;]; [self.webView.configuration.userContentController addScriptMessageHandler:self name:@&quot;Shake&quot;]; [self.webView.configuration.userContentController addScriptMessageHandler:self name:@&quot;Pay&quot;];&#125;- (void)viewWillDisappear:(BOOL)animated&#123; [super viewWillDisappear:animated]; [self.webView.configuration.userContentController removeScriptMessageHandlerForName:@&quot;Location&quot;]; [self.webView.configuration.userContentController removeScriptMessageHandlerForName:@&quot;Shake&quot;]; [self.webView.configuration.userContentController removeScriptMessageHandlerForName:@&quot;Pay&quot;];&#125; å®žçŽ°WKUIDelegateå’ŒWKScriptMessageHandleråè®®æ–¹æ³•12345678910111213141516171819202122232425#pragma mark - WKUIDelegate- (void)webView:(WKWebView *)webView runJavaScriptAlertPanelWithMessage:(NSString *)message initiatedByFrame:(WKFrameInfo *)frame completionHandler:(void (^)(void))completionHandler&#123; UIAlertController *alert = [UIAlertController alertControllerWithTitle:@&quot;æé†’&quot; message:message preferredStyle:UIAlertControllerStyleAlert]; [alert addAction:[UIAlertAction actionWithTitle:@&quot;çŸ¥é“äº†&quot; style:UIAlertActionStyleCancel handler:^(UIAlertAction * _Nonnull action) &#123; completionHandler(); &#125;]]; [self presentViewController:alert animated:YES completion:nil];&#125;#pragma mark - WKScriptMessageHandler- (void)userContentController:(WKUserContentController *)userContentController didReceiveScriptMessage:(WKScriptMessage *)message&#123; // message.body -- Allowed types are NSNumber, NSString, NSDate, NSArray,NSDictionary, and NSNull. NSLog(@&quot;body:%@&quot;,message.body); if ([message.name isEqualToString:@&quot;Location&quot;]) &#123; [self getLocation]; &#125; else if ([message.name isEqualToString:@&quot;Shake&quot;]) &#123; [self shakeAction]; &#125; else if ([message.name isEqualToString:@&quot;Pay&quot;]) &#123; [self payWithParams:message.body]; &#125;&#125; æ•ˆæžœï¼š Swiftçš„å’ŒOCç±»åž‹ï¼Œä»£ç æˆ‘ä¹Ÿä¸€èµ·å†™äº† ä»£ç ï¼š 90-iOSJS ä¸­çš„ OCJSMessageHandler å’Œ SwiftJSMessageHandler å‚è€ƒï¼šiOSä¸‹JSä¸ŽOCäº’ç›¸è°ƒç”¨ï¼ˆä¸‰ï¼‰â€“MessageHandler]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOSåŠ¨ç”»(ä¸‰)ï¼šæ ¸å¿ƒåŠ¨ç”»ä¸­ç¼©æ”¾å’Œæ—‹è½¬(Swift)]]></title>
    <url>%2F2017%2Fios-animation-3.html</url>
    <content type="text"><![CDATA[åŽŸç†å’Œä¸Šä¸€ç¯‡æ˜¯ç›¸åŒçš„ï¼Œä¸åŒä¹‹å¤„æ˜¯keyPathå±žæ€§ï¼Œç¼©æ”¾æ—¶æ˜¯keyPathæ˜¯ transform.scaleï¼Œæ—‹è½¬æ—¶keyPathæ˜¯transform.rotationã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113class ScaleRotationViewController: UIViewController &#123; // ç”¨äºŽç¼©æ”¾çš„layer lazy var redLayer: CALayer = &#123; return self.createLayer(position: CGPoint(x: 125, y: 150), backgroundColor: UIColor.red) &#125;() lazy var greenLayer: CALayer = &#123; return self.createLayer(position: CGPoint(x: 125, y: 250), backgroundColor: UIColor.green) &#125;() lazy var cyanLayer: CALayer = &#123; return self.createLayer(position: CGPoint(x: 125, y: 350), backgroundColor: UIColor.cyan) &#125;() lazy var blueLayer: CALayer = &#123; return self.createLayer(position: CGPoint(x: 125, y: 450), backgroundColor: UIColor.blue) &#125;() // ç”¨äºŽæ—‹è½¬çš„Layer lazy var redRotationLayer: CALayer = &#123; return self.createLayer(position: CGPoint(x: 300, y: 150), backgroundColor: UIColor.red) &#125;() lazy var greenRotationLayer: CALayer = &#123; return self.createLayer(position: CGPoint(x: 300, y: 250), backgroundColor: UIColor.green) &#125;() lazy var cyanRotationLayer: CALayer = &#123; return self.createLayer(position: CGPoint(x: 300, y: 350), backgroundColor: UIColor.cyan) &#125;() override func viewDidLoad() &#123; super.viewDidLoad() // æ·»åŠ ç¼©æ”¾çš„åŠ¨ç”» redLayer.add(createAnimation(keyPath: &quot;transform.scale.x&quot;, toValue: 0.5), forKey: nil) greenLayer.add(createAnimation(keyPath: &quot;transform.scale.y&quot;, toValue: 0.5), forKey: nil) cyanLayer.add(createAnimation(keyPath: &quot;transform.scale.z&quot;, toValue: 0.5), forKey: nil) blueLayer.add(createAnimation(keyPath: &quot;transform.scale&quot;, toValue: 0.5), forKey: nil) // æ·»åŠ æ—‹è½¬çš„åŠ¨ç”» redRotationLayer.add(createAnimation(keyPath: &quot;transform.rotation.x&quot;, toValue: CGFloat(Double.pi / 4)), forKey: nil) greenRotationLayer.add(createAnimation(keyPath: &quot;transform.rotation.y&quot;, toValue: CGFloat(Double.pi / 4)), forKey: nil) cyanRotationLayer.add(createAnimation(keyPath: &quot;transform.rotation.z&quot;, toValue: CGFloat(Double.pi / 4)), forKey: nil) self.creatLabel(title: &quot;ç¼©æ”¾&quot;, frame: CGRect(x: 100, y: 80, width: 50, height: 20)) self.creatLabel(title: &quot;æ—‹è½¬&quot;, frame: CGRect(x: 250, y: 80, width: 50, height: 20)) self.creatLabel(title: &quot;Xè½´&quot;, frame: CGRect(x: 20, y: 125, width: 50, height: 20)) self.creatLabel(title: &quot;Yè½´&quot;, frame: CGRect(x: 20, y: 225, width: 50, height: 20)) self.creatLabel(title: &quot;Zè½´&quot;, frame: CGRect(x: 20, y: 325, width: 50, height: 20)) self.creatLabel(title: &quot;XYZè½´&quot;, frame: CGRect(x: 20, y: 425, width: 50, height: 20)) &#125; // åˆ›å»ºcalayer func createLayer (position: CGPoint, backgroundColor: UIColor) -&gt; CALayer &#123; //åˆ›å»ºcalayer let layer = CALayer() //è®¾ç½®ä½ç½®å’Œå¤§å° layer.position = position layer.bounds = CGRect(x: 0, y: 0, width: 100, height: 100) //è®¾ç½®èƒŒæ™¯é¢œè‰² layer.backgroundColor = backgroundColor.cgColor //æŠŠlayeræ·»åŠ åˆ°UIViewçš„layerä¸Š self.view.layer.addSublayer(layer) return layer &#125; // åˆ›å»ºåŸºç¡€Animation func createAnimation (keyPath: String, toValue: CGFloat) -&gt; CABasicAnimation &#123; //åˆ›å»ºåŠ¨ç”»å¯¹è±¡ let scaleAni = CABasicAnimation() //è®¾ç½®åŠ¨ç”»å±žæ€§ scaleAni.keyPath = keyPath //è®¾ç½®åŠ¨ç”»çš„èµ·å§‹ä½ç½®ã€‚ä¹Ÿå°±æ˜¯åŠ¨ç”»ä»Žå“ªé‡Œåˆ°å“ªé‡Œã€‚ä¸æŒ‡å®šèµ·ç‚¹ï¼Œé»˜è®¤å°±ä»Žpositoinå¼€å§‹ scaleAni.toValue = toValue //åŠ¨ç”»æŒç»­æ—¶é—´ scaleAni.duration = 2; //åŠ¨ç”»é‡å¤æ¬¡æ•° scaleAni.repeatCount = Float(CGFloat.greatestFiniteMagnitude) return scaleAni; &#125; //åˆ›å»ºLabel fileprivate func creatLabel (title: String, frame: CGRect) -&gt; ()&#123; let label = UILabel() label.text = title label.frame = frame label.textColor = UIColor.darkGray label.font = UIFont.systemFont(ofSize: 12) self.view.addSubview(label) &#125;&#125; ä»£ç ï¼š 89-Animation/CABasic Animation å‚è€ƒï¼šç¬¬äº”ç¯‡ï¼šCABasic Animationã€‚iOSåŠ¨ç”»ç³»åˆ—ä¹‹äº”ï¼šåŸºç¡€åŠ¨ç”»ä¹‹ç¼©æ”¾ç¯‡&amp;æ—‹è½¬ç¯‡]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOSåŠ¨ç”»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSåŠ¨ç”»(äºŒ)ï¼šæ ¸å¿ƒåŠ¨ç”»ä¸­çš„åŸºç¡€ç§»åŠ¨(Swift)]]></title>
    <url>%2F2017%2Fios-animation-2.html</url>
    <content type="text"><![CDATA[ç®€å•çš„ç§»åŠ¨ æ–°å»ºä¸€ä¸ªCALayerã€‚ 12345678910lazy var redLayer: CALayer = &#123; return self.createLayer()&#125;()func createLayer() -&gt; CALayer &#123; let redLayer = CALayer() redLayer.position = CGPoint(x: 200, y: 200) redLayer.bounds = CGRect(x: 0, y: 0, width: 100, height: 100) redLayer.backgroundColor = UIColor.red.cgColor return redLayer&#125; æŠŠæ–°å»ºçš„CALayeræ·»åŠ çš„viewçš„layerä¸­ã€‚ 1view.layer.addSublayer(redLayer) éµå®ˆåè®®CAAnimationDelegate class BasicPostionViewController: UIViewController, CAAnimationDelegate { åˆ›å»ºåŠ¨ç”»CABasicAnimation,å¹¶æ·»åŠ çš„CALayerä¸­ã€‚ 12345678910111213141516171819func createCABasicAnimation() -&gt; CABasicAnimation &#123; let basicAni = CABasicAnimation() // è®¾ç½®åŠ¨ç”»å±žæ€§ basicAni.keyPath = &quot;position&quot; basicAni.fromValue = NSValue.init(cgPoint: CGPoint(x: 0, y: 0)) basicAni.toValue = NSValue.init(cgPoint: CGPoint(x: 300, y: 300)) basicAni.duration = 2 basicAni.fillMode = kCAFillModeForwards basicAni.isRemovedOnCompletion = false basicAni.delegate = self return basicAni&#125; 12let basicAni = createCABasicAnimation()self.redLayer.add(basicAni, forKey: &quot;basicPosition&quot;) forKey æ˜¯åŠ¨ç”»å¯¹è±¡çš„åå­—ï¼Œåªæ˜¯ç”¨æ¥æ ‡è¯†ï¼Œæ²¡æœ‰ç‰¹æ®Šæ„ä¹‰ã€‚ ç¨å¾®å¤æ‚çš„ç§»åŠ¨ åŽŸç†å’Œä¸Šé¢ç›¸åŒï¼Œéƒ½æ˜¯å…ˆåˆ›å»ºCALayerï¼Œç„¶åŽæ·»åŠ CABasicAnimationã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465class BasicPostion2ViewController: UIViewController, CAAnimationDelegate&#123; lazy var redLayer: CALayer = &#123; return self.createLayer(postion: CGPoint(x: 0, y: 150), backgroundColor: UIColor.red) &#125;() lazy var greenLayer: CALayer = &#123; return self.createLayer(postion: CGPoint(x: 0, y: 250), backgroundColor: UIColor.green) &#125;() lazy var cyanLayer: CALayer = &#123; return self.createLayer(postion: CGPoint(x: 0, y: 350), backgroundColor: UIColor.cyan) &#125;() lazy var blueLayer: CALayer = &#123; return self.createLayer(postion: CGPoint(x: 0, y: 450), backgroundColor: UIColor.blue) &#125;() override func viewDidLoad() &#123; super.viewDidLoad() redLayer.add(createBasicAnimation(fromValue: CGPoint(x: 0, y: 150), toValue: CGPoint(x: 300, y: 150), timingFunction: kCAMediaTimingFunctionLinear), forKey: &quot;basicAnimation&quot;) view.layer.addSublayer(redLayer) greenLayer.add(createBasicAnimation(fromValue: CGPoint(x: 0, y: 250), toValue: CGPoint(x: 300, y: 250), timingFunction: kCAMediaTimingFunctionEaseIn), forKey: &quot;basicAnimation&quot;) view.layer.addSublayer(greenLayer) cyanLayer.add(createBasicAnimation(fromValue: CGPoint(x: 0, y: 350), toValue: CGPoint(x: 300, y: 350), timingFunction: kCAMediaTimingFunctionEaseOut), forKey: &quot;basicAnimation&quot;) view.layer.addSublayer(cyanLayer) blueLayer.add(createBasicAnimation(fromValue: CGPoint(x: 0, y: 450), toValue: CGPoint(x: 300, y: 450), timingFunction: kCAMediaTimingFunctionEaseInEaseOut), forKey: &quot;basicAnimation&quot;) view.layer.addSublayer(blueLayer) &#125; func createLayer(postion: CGPoint, backgroundColor: UIColor) -&gt; CALayer &#123; let layer = CALayer() layer.position = postion layer.bounds = CGRect(x: 0, y: 0, width: 100, height: 100) layer.backgroundColor = backgroundColor.cgColor return layer &#125; func createBasicAnimation (fromValue: CGPoint, toValue: CGPoint, timingFunction: String) -&gt; CABasicAnimation &#123; let basicAni = CABasicAnimation() basicAni.keyPath = &quot;position&quot; basicAni.fromValue = fromValue basicAni.toValue = toValue basicAni.duration = 2 // basicAni.fillMode = kCAFillModeForwards // basicAni.isRemovedOnCompletion = false // 1 basicAni.timingFunction = CAMediaTimingFunction(name: timingFunction) basicAni.delegate = self return basicAni &#125;&#125; 1 timingFunctionä»£è¡¨ç§»åŠ¨æ¨¡å¼ï¼š kCAMediaTimingFunctionLinearï¼ˆçº¿æ€§ï¼‰ï¼šåŒ€é€Ÿï¼Œç»™ä½ ä¸€ä¸ªç›¸å¯¹é™æ€çš„æ„Ÿè§‰ kCAMediaTimingFunctionEaseInï¼ˆæ¸è¿›ï¼‰ï¼šåŠ¨ç”»ç¼“æ…¢è¿›å…¥ï¼Œç„¶åŽåŠ é€Ÿç¦»å¼€ kCAMediaTimingFunctionEaseOutï¼ˆæ¸å‡ºï¼‰ï¼šåŠ¨ç”»å…¨é€Ÿè¿›å…¥ï¼Œç„¶åŽå‡é€Ÿçš„åˆ°è¾¾ç›®çš„åœ° kCAMediaTimingFunctionEaseInEaseOutï¼ˆæ¸è¿›æ¸å‡ºï¼‰ï¼šåŠ¨ç”»ç¼“æ…¢çš„è¿›å…¥ï¼Œä¸­é—´åŠ é€Ÿï¼Œç„¶åŽå‡é€Ÿçš„åˆ°è¾¾ç›®çš„åœ°ã€‚ ä»£ç ï¼š 89-Animation/CABasic Animation å‚è€ƒï¼š ç¬¬ä¸‰ç¯‡ï¼šiOSåŠ¨ç”»ç³»åˆ—ä¹‹ä¸‰ï¼šCore Animationã€‚ä»‹ç»äº†Core Animationçš„å¸¸ç”¨å±žæ€§å’Œæ–¹æ³•ã€‚ ç¬¬å››ç¯‡ï¼šCABasic Animationã€‚iOSåŠ¨ç”»ç³»åˆ—ä¹‹å››ï¼šåŸºç¡€åŠ¨ç”»ä¹‹å¹³ç§»ç¯‡]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOSåŠ¨ç”»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSåŠ¨ç”»(ä¸€)ï¼šæ—¶é’ŸåŠ¨ç”»(Swift)]]></title>
    <url>%2F2017%2Fios-animation-1-clock.html</url>
    <content type="text"><![CDATA[ä¸€ã€ç›´æŽ¥åšåŠ¨ç”» æ–°å»ºé¡¹ç›®clock åŠ è½½è¡¨ç›˜å›¾ç‰‡ã€‚åœ¨viewDidLoadä¸­æ·»åŠ ï¼š 123456let dialLayer = CALayer()dialLayer.bounds = CGRect(x: 0, y: 0, width: 150, height: 150)dialLayer.position = self.view.centerdialLayer.contents = UIImage(named: &quot;clock&quot;)?.cgImageview.layer.addSublayer(dialLayer) æ‡’åŠ è½½ç§’é’ˆã€åˆ†é’ˆã€æ—¶é’ˆè§†å›¾ã€‚æ‡’åŠ è½½æœºåˆ¶æ˜¯Swiftä¸­ä¸€ç§å­˜å‚¨å±žæ€§ï¼šå»¶è¿Ÿå­˜å‚¨å±žæ€§ï¼Œå…·ä½“å¯æ“¦çœ‹ ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-10ï¼šProperties 1234567891011121314151617181920212223242526272829303132// ç§’é’ˆlazy var secondHandView: UIView = &#123; let secondHandView = UIView() secondHandView.backgroundColor = UIColor.red secondHandView.bounds = CGRect(x: 0, y: 0, width: 1, height: 60) secondHandView.layer.anchorPoint = CGPoint(x: 0.5, y: 1) return secondHandView&#125;()// åˆ†é’ˆlazy var minuteHandView: UIView = &#123; let minuteHandView = UIView() minuteHandView.backgroundColor = UIColor.darkGray minuteHandView.bounds = CGRect(x: 0, y: 0, width: 3, height: 60) minuteHandView.layer.anchorPoint = CGPoint(x: 0.5, y: 1) return minuteHandView&#125;()// æ—¶é’ˆlazy var hourHandView: UIView = &#123; let hourHandView = UIView() hourHandView.backgroundColor = UIColor.darkGray hourHandView.bounds = CGRect(x: 0, y: 0, width: 3, height: 45) hourHandView.layer.anchorPoint = CGPoint(x: 0.5, y: 1) return hourHandView&#125;() æŠŠç§’é’ˆã€åˆ†é’ˆã€æ—¶é’ˆæ·»åŠ åˆ°viewä¸­ã€‚åœ¨viewDidLoadä¸­æ·»åŠ ï¼š 123456secondHandView.center = view.centerself.view.addSubview(secondHandView)minuteHandView.center = view.centerself.view.addSubview(minuteHandView)hourHandView.center = view.centerself.view.addSubview(hourHandView) åˆ›å»ºCADisplayLinkï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°ä¸»çº¿ç¨‹ä¸­ã€‚åœ¨viewDidLoadä¸­æ·»åŠ ï¼š 12let link = CADisplayLink(target: self, selector: #selector(ViewController.clockRunning))link.add(to: RunLoop.main, forMode: .defaultRunLoopMode) æ·»åŠ æ–¹æ³•clockRunning: 123456789101112131415161718func clockRunning() &#123; let tZone = TimeZone.current var calendar = Calendar.current let currentDate = Date() calendar.timeZone = tZone let currentTime = calendar.dateComponents([Calendar.Component.hour, Calendar.Component.minute, Calendar.Component.second], from: currentDate) // æ ¹æ®å½“å‰ç§’ã€åˆ†ã€æ—¶æ•°åˆ†åˆ«è®¡ç®—ç§’é’ˆã€åˆ†é’ˆã€æ—¶é’ˆåè½¬å¼§åº¦ let secondAngle = CGFloat ( Double(currentTime.second!) * (Double.pi * 2.0 / 60) ) secondHandView.transform = CGAffineTransform(rotationAngle: secondAngle) let minuteAngle = CGFloat ( Double(currentTime.minute!) * (Double.pi * 2.0 / 60) ) minuteHandView.transform = CGAffineTransform(rotationAngle: minuteAngle) let hourAngle = CGFloat ( Double(currentTime.hour!) * (Double.pi * 2.0 / 12) ) hourHandView.transform = CGAffineTransform(rotationAngle: hourAngle)&#125; çŽ°åœ¨å°±å®Œæˆäº†æ–‡ç« å¼€å¤´çš„æ•ˆæžœã€‚ äºŒã€ä»£ç è¯´æ˜Ž å…³äºŽanchorPointï¼ˆé”šç‚¹ï¼‰å¦‚æžœæ³¨é‡ŠæŽ‰åˆ†é’ˆå’Œæ—¶é’ˆè§†å›¾ï¼Œå¹¶ä¸”å…³æŽ‰åŠ¨ç”»æ•ˆæžœå’Œé”šç‚¹è®¾ç½®ï¼š123456789// secondHandView.layer.anchorPoint = CGPoint(x: 0.5, y: 1)// minuteHandView.center = view.center// self.view.addSubview(minuteHandView)// hourHandView.center = view.center// self.view.addSubview(hourHandView) // åˆ›å»ºCADisplayLinkï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°ä¸»çº¿ç¨‹ä¸­// let link = CADisplayLink(target: self, selector: #selector(ViewController.clockRunning))// link.add(to: RunLoop.main, forMode: .defaultRunLoopMode) åŠ ä¸ŠsecondHandView.layer.anchorPoint = CGPoint(x: 0.5, y: 1)åŽï¼š anchorPointçš„å®˜æ–¹æè¿°ï¼š Defines the anchor point of the layerâ€™s bounds rectangle. Animatable.You specify the value for this property using the unit coordinate space. The default value of this property is (0.5, 0.5), which represents the center of the layerâ€™s bounds rectangle. All geometric manipulations to the view occur about the specified point. For example, applying a rotation transform to a layer with the default anchor point causes the layer to rotate around its center. Changing the anchor point to a different location would cause the layer to rotate around that new point. anchorPointçš„å€¼åœ¨ (0,0) å’Œ (1,1)ä¹‹é—´ã€‚é»˜è®¤æ˜¯ (0.5, 0.5),ä»£è¡¨é”šç‚¹åœ¨ä¸­å¿ƒä½ç½®ã€‚ (0,0) å’Œ (1,1)åˆ†åˆ«ä»£è¡¨å·¦ä¸Šè§’å’Œå³ä¸Šè§’ã€‚ å…³äºŽCALayerçš„å±žæ€§positionå’ŒanchorPoint positionç±»ä¼¼UIView çš„center positionå†³å®šäº†layeråœ¨çˆ¶è§†å›¾ä¸Šçš„ä½ç½® anchorPointå†³å®šäº†positionåœ¨è‡ªèº«çš„ä½ç½®ã€‚All geometric manipulations to the view occur about the specified point. CADisplayLink ä¸Ž NSTimer CADisplayLinkç²¾ç¡®åº¦é«˜ NSTimerå ç”¨ç³»ç»Ÿèµ„æºè¾ƒå¤š ä»£ç å’Œå›¾ç‰‡ä½ç½®ï¼š 89-Animation/clock å‚è€ƒï¼š iOSåŠ¨ç”»ç³»åˆ—ä¹‹ä¸€ï¼šé€šè¿‡å®žæˆ˜å­¦ä¹ CALayerå’Œé€è§†çš„åŽŸç†ã€‚åšä¸€ä¸ªå¸¦æ—¶åˆ†ç§’æŒ‡é’ˆçš„æ—¶é’ŸåŠ¨ç”»(ä¸Š) iOSåŠ¨ç”»ç³»åˆ—ä¹‹äºŒï¼šé€šè¿‡å®žæˆ˜å­¦ä¹ CALayerå’Œé€è§†çš„åŽŸç†ã€‚åšä¸€ä¸ªå¸¦æ—¶åˆ†ç§’æŒ‡é’ˆçš„æ—¶é’ŸåŠ¨ç”»ã€‚åŒ…å«äº†OCå’ŒSwiftä¸¤ç§æºä»£ç (ä¸‹)]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOSåŠ¨ç”»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆè¯†Core MLï¼šå»ºç«‹ä¸€ä¸ªç®€å•çš„å›¾ç‰‡å†…å®¹è¯†åˆ«åº”ç”¨]]></title>
    <url>%2F2017%2Fintroducing-coreml.html</url>
    <content type="text"><![CDATA[Xcode 9 beta &amp; iOS11 beta &amp; Swift4 Core MLæ˜¯ä¸€ä¸ªèƒ½é›†æˆæœºå™¨å­¦ä¹ æ¨¡åž‹åˆ°appä¸­çš„æ¡†æž¶ã€‚ ä¸€ã€æ–°å»ºåˆå§‹é¡¹ç›® æ–°å»ºé¡¹ç›®CoreMLDemoï¼Œä»¥single-view application templateæ¨¡æ¿ å»ºç«‹å¦‚ä¸‹å¦‚ä¸‹UI äºŒã€å®žçŽ°ç…§ç›¸å’ŒèŽ·å–å›¾ç‰‡åº“åŠŸèƒ½ éµå®ˆä¸¤ä¸ªåè®®ï¼šclass ViewController: UIViewController, UINavigationControllerDelegate, UIImagePickerControllerDelegate { æ·»åŠ ä¸¤ä¸ªæŽ¥å£ï¼Œå¹¶å…³è”ã€‚ 12@IBOutlet var imageView: UIImageView!@IBOutlet var classifier: UILabel! å®žçŽ°ä¸¤ä¸ªAction 1234567891011121314151617181920@IBAction func camera(_ sender: Any) &#123; if !UIImagePickerController.isSourceTypeAvailable(.camera) &#123; return &#125; let cameraPicker = UIImagePickerController() cameraPicker.delegate = self cameraPicker.sourceType = .camera cameraPicker.allowsEditing = false present(cameraPicker, animated: true, completion: nil)&#125;@IBAction func openLibrary(_ sender: Any) &#123; let picker = UIImagePickerController() picker.allowsEditing = false picker.delegate = self picker.sourceType = .photoLibrary present(picker, animated: true)&#125; å®žçŽ°åè®®UIImagePickerControllerDelegateä¸­çš„æ–¹æ³•ï¼š 123func imagePickerControllerDidCancel(_ picker: UIImagePickerController) &#123; dismiss(animated: true, completion: nil)&#125; åœ¨Info.plistä¸­æ·»åŠ ðŸ“·ä½¿ç”¨è¯·æ±‚ï¼ŒPrivacy â€“ Camera Usage Description and Privacy ä¸‰ã€é›†æˆCore ML Data Model åˆ°Appleæœºå™¨å­¦ä¹ å®˜ç½‘ Machine Learningä¸‹è½½Core ML modelsï¼Œç›®å‰æœ‰6ä¸ªModelï¼Œè¯†åˆ«å›¾ç‰‡çš„ä½¿ç”¨Inception v3ã€‚ä¸‹è½½å¾—åˆ°ä¸€ä¸ªmlmodelç»“å°¾çš„æ–‡ä»¶ï¼Œç›´æŽ¥æ‹–åˆ°é¡¹ç›®ä¸­ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”modelåçš„swiftçš„ç±»æ–‡ä»¶ï¼Œå¯ä»¥ç›´æŽ¥åœ¨ä»£ç ä¸­ä½¿ç”¨ã€‚ åœ¨ViewController.swiftä¸­å¼•å…¥Core ML:import CoreML åˆå§‹Inceptionv3: 12345var model: Inceptionv3!override func viewWillAppear(_ animated: Bool) &#123; model = Inceptionv3()&#125; å®žçŽ°UIImagePickerControllerDelegateåè®®çš„imagePickerController(_:didFinishPickingMediaWithInfo)æ–¹æ³•ï¼š 12345678910111213141516171819202122232425262728293031323334func imagePickerController(_ picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : Any]) &#123; picker.dismiss(animated: true) classifier.text = &quot;Analyzing Image...&quot; guard let image = info[&quot;UIImagePickerControllerOriginalImage&quot;] as? UIImage else &#123; return &#125; UIGraphicsBeginImageContextWithOptions(CGSize(width: 299, height: 299), true, 2.0) image.draw(in: CGRect(x: 0, y: 0, width: 299, height: 299)) let newImage = UIGraphicsGetImageFromCurrentImageContext()! UIGraphicsEndImageContext() let attrs = [kCVPixelBufferCGImageCompatibilityKey: kCFBooleanTrue, kCVPixelBufferCGBitmapContextCompatibilityKey: kCFBooleanTrue] as CFDictionary var pixelBuffer : CVPixelBuffer? let status = CVPixelBufferCreate(kCFAllocatorDefault, Int(newImage.size.width), Int(newImage.size.height), kCVPixelFormatType_32ARGB, attrs, &amp;pixelBuffer) guard (status == kCVReturnSuccess) else &#123; return &#125; CVPixelBufferLockBaseAddress(pixelBuffer!, CVPixelBufferLockFlags(rawValue: 0)) let pixelData = CVPixelBufferGetBaseAddress(pixelBuffer!) let rgbColorSpace = CGColorSpaceCreateDeviceRGB() let context = CGContext(data: pixelData, width: Int(newImage.size.width), height: Int(newImage.size.height), bitsPerComponent: 8, bytesPerRow: CVPixelBufferGetBytesPerRow(pixelBuffer!), space: rgbColorSpace, bitmapInfo: CGImageAlphaInfo.noneSkipFirst.rawValue) //3 context?.translateBy(x: 0, y: newImage.size.height) context?.scaleBy(x: 1.0, y: -1.0) UIGraphicsPushContext(context!) newImage.draw(in: CGRect(x: 0, y: 0, width: newImage.size.width, height: newImage.size.height)) UIGraphicsPopContext() CVPixelBufferUnlockBaseAddress(pixelBuffer!, CVPixelBufferLockFlags(rawValue: 0)) imageView.image = newImage ä½¿ç”¨Core MLåœ¨ä¸Šé¢imagePickerController(_:didFinishPickingMediaWithInfo)æ–¹æ³•æœ€åŽæ·»åŠ ï¼š 1234guard let prediction = try? model.prediction(image: pixelBuffer!) else &#123; return&#125;classifier.text = &quot;I think this is a \(prediction.classLabel).&quot; çŽ°åœ¨å°±å¯è¿è¡Œè¯†åˆ«å›¾ç‰‡å†…å®¹äº†ï¼Œæˆ‘å·²å‡ ä¸ªç®€å•çš„åšäº†å®žéªŒï¼Œæ•ˆæžœè¿˜å¯ä»¥ï¼š èƒ½è¯†åˆ«ðŸ¶çš„ç§ç±»ï¼Œå“ˆå·´ç‹—pug ðŸŒåº”è¯¥ç›¸å¯¹è€Œè¨€ç®€å•ï¼š æœ‹å‹å®¶çš„çŒ«ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“çŒ«çš„ç§ç±»ï¼Œè¯†åˆ«ä¸ºæ³¢æ–¯çŒ«(Persian cat): è¿™ä¸ªæˆ‘å°±ä¸çŸ¥é“æ˜¯æ€Žä¹ˆè¯†åˆ«ä¸ºæµ“å’–å•¡(espresso)çš„äº†ðŸ¤” å½“ç„¶è¯†åˆ«ç›¸å·®æ¯”è¾ƒå¥‡æ€ªçš„ã€‚å°ç±³æ‰‹çŽ¯è¯†åˆ«æˆå¬è¯Šå™¨ï¼ˆstethoscopeï¼‰ðŸ˜¢ kindleè¯†åˆ«ä¸å‡ºðŸ˜¢ðŸ˜¢ðŸ˜¢ å››ã€Core MLå­¦ä¹ èµ„æºå®˜æ–¹æ–‡æ¡£ official Core ML documentation WWDC 2017ï¼š Introducing Core ML Core ML in Depth ä»£ç  CoreMLDemo ï¼ˆç”±äºŽInceptionv3.mlmodelæ¯”è¾ƒå¤§ï¼Œæˆ‘å°±æ²¡æœ‰ä¸Šä¼ åˆ°githubä¸Šï¼Œç›´æŽ¥åˆ° Machine Learningç„¶åŽæ‹–åˆ°é¡¹ç›®ä¸­å³å¯ï¼‰ å‚è€ƒï¼šIntroduction to Core ML: Building a Simple Image Recognition App]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>Core ML</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨githubå’Œhexoåˆ›å»ºå…è´¹çš„é™æ€ä¸ªäººåšå®¢ç½‘ç«™]]></title>
    <url>%2F2017%2Fgithub-hexo.html</url>
    <content type="text"><![CDATA[ä¹‹å‰åˆšå­¦ç¼–ç¨‹ï¼ŒæŽ¥è§¦PHPæ—¶ï¼Œå‡ºäºŽå­¦ä¹ çš„ç›®çš„ï¼Œå…´è‡´å‹ƒå‹ƒåœ°ä¹°äº†åŸŸåã€ä¸»æœºã€å­¦äº†Wordpressï¼Œæ‰¾äº†ä¸»é¢˜ï¼ŒæŠ˜è…¾äº†å¥½ä¹…å»ºäº†ä¸ªç½‘ç«™ï¼Œä¹Ÿå†™äº†ä¸€äº›æ–‡ç« ï¼Œç„¶åŽå°±æ²¡æœ‰ç„¶åŽäº†ï¼Œè¿™æ˜¯ä»Žå…¥é—¨åˆ°æ”¾å¼ƒç³»åˆ—çš„å…¸åž‹æ¡ˆä¾‹ã€‚å‰æ®µæ—¶é—´æ”¶åˆ°ä¸»æœºè¦åˆ°æœŸçš„é€šçŸ¥ï¼Œæ­£å¥½æˆ‘ä¹ŸæŽ¥è§¦åˆ°äº†ç®€ä¹¦ï¼Œæ”¯æŒmarkdownï¼Œæ„Ÿè§‰è›®å¥½ï¼Œå¹³å¸¸ä¹Ÿä¹ æƒ¯ä½¿ç”¨markdownæ ¼å¼è®°å½•ç¬”è®°ã€‚å°±è§‰å¾—ä¸å†ç»­è´¹ä¸»æœºäº†ï¼Œå°±ä¸»è¦ä½¿ç”¨ç®€ä¹¦ï¼Œä¸ªäººåšå®¢å°±ä½¿ç”¨githubå’Œhexoè¿™ç§æ”¯æŒmarkdownç”Ÿæˆé™æ€ç½‘é¡µå½¢å¼å°±è¡Œäº†ã€‚ å·²ç»æœ‰å¾ˆå¤šå°ä¼™ä¼´è¿™æ ·æ­å»ºè‡ªå·±çš„ä¸ªäººåšå®¢ï¼Œå¹¶å†™äº†ç›¸å…³æ–‡ç« ï¼Œè¿™è¾¹æˆ‘å°±åšä¸€ä¸ªæ­å»ºè¿‡ç¨‹ä¸­çš„ç®€å•è®°å½•ã€‚å¼€å§‹ä¹‹å‰éœ€è¦å®‰è£…gitå’Œnodejsï¼Œæœ‰githubè´¦å·ï¼Œç¨‹åºå‘˜å°ä¼™ä¼´ä¸€èˆ¬éƒ½ä¼šæœ‰äº†ï¼Œæˆ‘å°±ä¸å•°å—¦äº†ã€‚ å…³äºŽGitHub PagesGitHub PagesåŽŸæœ¬æ˜¯ä¸ºæ‰˜ç®¡åœ¨githubä¸Šçš„é¡¹ç›®æä¾›ä»‹ç»é¡µé¢çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œéžå¸¸é€‚åˆæ‰˜ç®¡ä¸€äº›åŠŸèƒ½ç®€å•æˆ–è€…æ˜¯é™æ€é¡µé¢çš„ç½‘ç«™ã€‚è€ƒè™‘åˆ°è®¿é—®é€Ÿåº¦ï¼Œå¯ä»¥è€ƒè™‘å›½å†…çš„codingã€‚ æŒ‰ç…§GitHub Pagesæ­¥éª¤å»ºç«‹è‡ªå·±çš„GitHub Pagesåº“ã€‚ hexohexoæ–‡æ¡£å¾ˆè¯¦ç»†ï¼Œä¹Ÿæœ‰ä¸­æ–‡ï¼Œå¾ˆæ–¹ä¾¿ã€‚ å®‰è£… hexonpm install hexo-cli -g å»ºç«™ 123$ hexo init &lt;folder&gt;$ cd &lt;folder&gt;$ npm install æ–°ç”Ÿæˆçš„ç›®å½•ç»“æž„ä¸ºï¼š 123456789101112131415161718 . â”œâ”€â”€ _config.yml â”œâ”€â”€ node_modules â”œâ”€â”€ package.json â”œâ”€â”€ scaffolds â”œâ”€â”€ source â””â”€â”€ themes ``` + `_config.yml` æ˜¯ç½‘ç«™çš„[ç«™ç‚¹é…ç½®æ–‡ä»¶](https://hexo.io/zh-cn/docs/configuration.html) + `node_modules` æ˜¯nodejsåº“æ–‡ä»¶ç›®å½•ï¼Œå°±æ˜¯`npm install`å‘½ä»¤å®‰è£…çš„æ–‡ä»¶ä½ç½® + `package.json`æ˜¯ç¨‹åºä¿¡æ¯ + `scaffolds` æ–°å»ºæ–‡ç« çš„æ¨¡æ¿ + `source` å­˜æ”¾ç”¨æˆ·èµ„æºçš„åœ°æ–¹ï¼Œ404ã€faviconã€CNAME ç­‰å µåœ¨æ­¤å¤„ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸»è¦å·¥ä½œçš„åœ°æ–¹ã€‚å…¶ä¸­ï¼Œ`_posts`æ–‡ä»¶æ˜¯å†™æ–‡ç« åœ°æ–¹ï¼Œé™¤` _posts`æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œå¼€å¤´å‘½åä¸º _ (ä¸‹åˆ’çº¿)çš„æ–‡ä»¶ / æ–‡ä»¶å¤¹å’Œéšè—çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚Markdown å’Œ HTML æ–‡ä»¶ä¼šè¢«è§£æžå¹¶æ”¾åˆ° public æ–‡ä»¶å¤¹ï¼ˆä¹‹åŽç”Ÿæˆï¼‰ï¼Œè€Œå…¶ä»–æ–‡ä»¶ä¼šè¢«æ‹·è´è¿‡åŽ»ã€‚ + `themes` æ˜¯ä¸»é¢˜å­˜å‚¨åœ°æ–¹ã€‚- é…ç½®ç½‘ç«™ä¿¡æ¯`_config.yml` æ–‡ä»¶æä¾›äº†å¾ˆå¤šé…ç½®ï¼Œè¯¦ç»†å¯çœ‹å®˜ç½‘[é…ç½®ä¿¡æ¯](https://hexo.io/zh-cn/docs/configuration.html)ã€‚å…ˆé…ç½®ä¸¤æ–¹é¢çš„ï¼Œä¹‹åŽéœ€è¦å†é…ç½®ã€‚ + ç½‘ç«™åŸºæœ¬ä¿¡æ¯ Sitetitle: æ¬£æ¬£å‘æˆŽsubtitle: AndyRonâ€™s Blogdescription: Just for fun.author: AndyRonlanguage: zh-Hanstimezone: Asia/Shanghai 1+ éƒ¨ç½²ï¼Œæ³¨æ„å­—æ®µï¼Œ`repo`å°±æ˜¯ä¸ªäººGitHub Pagesçš„åœ°å€åº“ã€‚ DeploymentDocs: https://hexo.io/docs/deployment.htmldeploy:type: gitrepo: https://github.com/andyRon/andyRon.github.io.gitbranch: master 1234567891011121314151617181920212223242526272829303132333435- æ–°å»ºæ–‡ç«  `hexo new [layout] &lt;title&gt;` ï¼š ä¹Ÿå°±æ˜¯åœ¨`source/_posts/`ä¸‹æŒ‰ç…§æ¨¡æ¿æ–°å»ºäº†ä¸€ä¸ªmarkdownæ–‡ä»¶ï¼Œlayoutå°±æ˜¯æŒ‡`scaffolds`æ–‡ä»¶å¤¹ä¸­çš„æ¨¡æ¿ï¼Œä¹Ÿå¯ä»¥ç›´æŽ¥åœ¨`_posts`ä¸­æ–°å»ºmarkdownæ–‡ä»¶ã€‚- åœ¨æœ¬åœ°æœåŠ¡å™¨æµ‹è¯•`hexo server` ï¼šåœ¨æµè§ˆå™¨æ‰“å¼€http://localhost:4000/ ï¼Œå°±å¯ä»¥æŸ¥çœ‹- ç”Ÿæˆé™æ€æ–‡ä»¶`hexo generate`ï¼ˆ`hexo g`ï¼‰ ï¼šè¿™ä¸ªå‘½ä»¤ä¼šæ–°å»ºä¸€ä¸ª`public`æ–‡ä»¶å¤¹ï¼Œåœ¨å…¶ä¸­ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œè¿™ä¸ªç›®å½•ç›¸å½“äºŽç½‘ç«™çš„æ ¹ç›®å½•ã€‚- å‘å¸ƒåˆ°github`hexo deploy`ï¼ˆ`hexo d`ï¼‰ï¼šæŠŠ`public`æ–‡ä»¶å¤¹å†…çš„å†…å®¹ä¸Šä¼ åˆ°githubä¸Šã€‚çŽ°åœ¨è®¿é—®https://yourname.github.io (æˆ‘çš„æ˜¯https://andyron.github.io )å°±èƒ½è®¿é—®åˆšå»ºç«‹çš„ç½‘ç«™äº†ã€‚å¦‚æžœå‡ºçŽ°[**ERROR Deployer not found**](https://github.com/hexojs/hexo/issues/1040)çš„é—®é¢˜ï¼Œå¯é€šè¿‡`npm install hexo-deployer-git --save`è§£å†³ã€‚- å…¶ä»–hexoå‘½ä»¤`hexo clean` ï¼šåˆ é™¤publicæ–‡ä»¶å¤¹å†…å®¹ï¼Œå’Œæ¸…ç†ä¸€äº›ç¼“å­˜ã€‚è°ƒè¯•ç½‘ç«™å¯ä»¥ä½¿ç”¨ã€‚### åŸŸåç»‘å®šï¼ˆå¦‚æœ‰å¿…è¦ï¼‰- åœ¨`source/`ä¸‹æ·»åŠ æ–‡ä»¶`CNAME`ï¼Œå†…å®¹åªä¸ºå¦‚`andyron.com`ï¼ˆæ²¡æœ‰httpå’Œwwwï¼‰- éƒ¨ç½²åˆ°githubä¸Šï¼š`hexo generate`ï¼Œ`hexo deploy`- åŸŸåè§£æžã€‚ä¸åŒçš„åŸŸåæœåŠ¡å•†å¤§åŒå°å¼‚ï¼Œæˆ‘çš„æ˜¯é˜¿é‡Œäº‘ï¼Œä¸ºäº†é˜²æ­¢è§£æžå‡ºé—®é¢˜ï¼Œæˆ‘æŠŠå…¶ä»–é»˜è®¤ä¸€äº›é‚®ä»¶è§£æžç­‰éƒ½åˆ äº†ï¼Œå°±æ·»åŠ ä¸¤ä¸ªï¼š![](http://upload-images.jianshu.io/upload_images/1678135-248c8a30a3115f53.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)å¯èƒ½éœ€è¦ç­‰ä¸€çŸ­æ—¶é—´ï¼ˆ10åˆ†é’Ÿä»¥ä¸Šï¼‰ï¼Œå°±å¯ä»¥ç”¨ http://andyron.com è®¿é—®äº†ã€‚### hexoä¸»é¢˜hexoæœ‰å¾ˆå¤šä¸»é¢˜ï¼Œå¾ˆå¤šç½‘å‹ä¸ºhexoè´¡çŒ®äº†å¾ˆå¤šä¸»é¢˜ï¼Œå¯åˆ°[ä¸»é¢˜](https://hexo.io/themes/)ä¸Šå¯»æ‰¾ã€‚æˆ‘é€‰æ‹©çš„æ˜¯[next](https://github.com/iissnan/hexo-theme-next)ä¸»é¢˜ï¼Œè¿™ä¸ªä½¿ç”¨ä¸»é¢˜ç”¨çš„äººæ¯”è¾ƒå¤šï¼Œ[æ–‡æ¡£](http://theme-next.iissnan.com/getting-started.html)å¾ˆå…¨ï¼Œä¹Ÿæ¯”è¾ƒç®€æ´ã€‚ä¸»é¢˜çš„ä½¿ç”¨éžå¸¸ç®€å•ï¼š - å°†ä¸»é¢˜æ–‡ä»¶æ‹·è´è‡³ç«™ç‚¹ç›®å½•çš„`themes` ç›®å½•ä¸‹ - ä¿®æ”¹**ç«™ç‚¹é…ç½®æ–‡ä»¶**ï¼š `theme: ä¸»é¢˜å`ä¸»é¢˜çš„ä¸€äº›è®¾ç½®ï¼š- è®¾ç½®RSS + å®‰è£… [hexo-generator-feed](https://github.com/hexojs/hexo-generator-feed)æ’ä»¶ï¼Œåœ¨`hexo init`åˆå§‹åŒ–çš„ç›®å½•ä¸‹æ‰§è¡Œ`npm install hexo-generator-feed --save` + åœ¨**ç«™ç‚¹é…ç½®æ–‡ä»¶**æ·»åŠ ï¼š feed:type: atompath: atom.xmllimit: 20hub:content: 123456 + `hexo generate`- è®¾ç½®æœç´¢æœ‰å¾ˆå¤šæœç´¢æ–¹å¼ï¼Œè¿™åªæ˜¯ä¸€ç§ç®€å•æ–¹å¼ + å®‰è£…`hexo-generator-searchdb`ï¼Œåœ¨`hexo`çš„æ ¹ç›®å½•ä¸‹ï¼š`$ npm install hexo-generator-searchdb --save` + åœ¨**ç«™ç‚¹é…ç½®æ–‡ä»¶**æ·»åŠ ï¼š search: path: search.xml field: post format: html limit: 10000 12+ åœ¨**ä¸»é¢˜é…ç½®æ–‡ä»¶**ï¼ˆ`themes/next/_config.yml`ï¼‰ä¿®æ”¹ï¼š local_search: enable: true ``` æ·»åŠ æ ‡ç­¾é¡µé¢ $hexo new page tagsï¼šç»“æžœç”Ÿæˆæ–°æ–‡ä»¶å¤¹source/tags/ï¼Œå¹¶åœ¨å…¶ä¸­æœ‰ä¸€ä¸ªindex.mdã€‚ åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶çš„menuä¸­æ‰“å¼€æ ‡ç­¾ æ·»åŠ åˆ†ç±»é¡µé¢ $hexo new page categoriesï¼šç»“æžœç”Ÿæˆæ–°æ–‡ä»¶å¤¹source/categoriesï¼Œå¹¶åœ¨å…¶ä¸­æœ‰ä¸€ä¸ªindex.mdã€‚ åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶çš„menuä¸­æ‰“å¼€åˆ†ç±»ã€‚ æ·»åŠ å…³äºŽæˆ‘é¡µé¢ $hexo new page aboutï¼šç»“æžœç”Ÿæˆæ–°æ–‡ä»¶å¤¹source/aboutï¼Œå¹¶åœ¨å…¶ä¸­æœ‰ä¸€ä¸ªindex.mdï¼Œåœ¨index.mdä¸­ç›´æŽ¥ç¼–å†™å…³äºŽæˆ‘çš„å†…å®¹ã€‚ åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶çš„menuä¸­æ‰“å¼€åˆ†ç±»ã€‚ æ·»åŠ ç™¾åº¦åˆ†æž æ³¨å†Œ ç™¾åº¦ç»Ÿè®¡ï¼Œå¹¶æ·»åŠ è‡ªå·±çš„ç½‘ç«™ å¤åˆ¶ hm.js? åŽé¢é‚£ä¸²ç»Ÿè®¡è„šæœ¬ id åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å­—æ®µbaidu_analytics`ï¼ŒèŒä½ä¸Šé¢çš„è„šæœ¬id å‚è€ƒhttp://blog.csdn.net/zuoziji416/article/details/53204478]]></content>
      <tags>
        <tag>github</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS ä¼ æ„Ÿå™¨(ä¸€)ï¼šæ€»çš„ä»‹ç»å’Œè·ç¦»ä¼ æ„Ÿå™¨]]></title>
    <url>%2F2017%2Fios-sensor-1.html</url>
    <content type="text"><![CDATA[å…³äºŽä¼ æ„Ÿå™¨ï¼ˆSensorï¼‰ï¼ŒAppleå®˜æ–¹å¥½åƒå¹¶æ²¡æœ‰ä¸“é—¨åˆ—å‡ºæ¥ä»‹ç»è¿‡ï¼Œæˆ‘åªèƒ½ä»Žå‰è¾ˆçš„æ–‡ç« å¯»æ‰¾ï¼Œå¾ˆå¤šæ–‡ç« ä¸­éƒ½ç»™iOSä¼ æ„Ÿå™¨è¿›è¡Œè¿‡å¾ˆè¯¦ç»†çš„åˆ†ç±»ä»‹ç»ï¼Œä½†æœ‰çš„ä¼ æ„Ÿå™¨åªæ˜¯æœ‰è¿‡ä»‹ç»ï¼Œæ²¡æœ‰ä»‹ç»ä½¿ç”¨æ–¹æ³•æˆ–APIï¼Œå½“ç„¶ä¹Ÿæœ‰å¯èƒ½æ˜¯æˆ‘æ²¡æœç´¢åˆ°ï¼Œæ¯”å¦‚æ¹¿åº¦ä¼ æ„Ÿå™¨å¾ˆå¤šæ–‡ç« éƒ½æåˆ°ï¼Œä½†è¯¦ç»†ä½¿ç”¨æ–¹å¼å°±æœªæ›¾çœ‹åˆ°è¿‡ï¼Œè¿˜æœ‰è¿™è¾¹çš„æ¹¿åº¦ä¼ æ„Ÿå™¨æ˜¯æŒ‡iPhoneå†…éƒ¨çš„ï¼Ÿè¿˜æ˜¯æŒ‡iPhoneæ‰€åœ¨å¤–éƒ¨çŽ¯å¢ƒçš„ï¼Ÿ iPhoneçš„ä¼ æ„Ÿå™¨æ˜¯ç»è¿‡é•¿æ—¶é—´ä¸åœçš„å˜åŒ–å’Œæ”¹è¿›çš„ï¼Œå› ä¸ºä¼ æ„Ÿå™¨ä¸€å¬åå­—å°±çŸ¥é“è¿™ç§å˜åŒ–å’Œæ”¹è¿›åä¹‹å…«ä¹æ˜¯è¦ä¸Žç¡¬ä»¶æœ‰å…³ç³»çš„ã€‚çŸ¥ä¹Žä¸­æœ‰ä¸€éæ–‡ç« ä»‹ç»çš„å¾ˆè¯¦ç»†ï¼ŒiPhoneè¿™åå¹´åœ¨ä¼ æ„Ÿå™¨ä¸Šçš„æ¼”è¿›- çŸ¥ä¹Žä¸“æ ã€‚ iOSä¸­ä¼ æ„Ÿå™¨åˆ†ç±»æˆ‘å§‘ä¸”æŒ‰ç…§æˆ‘æŸ¥çœ‹çš„èµ„æ–™å¯¹iOSä¼ æ„Ÿå™¨è¿›è¡Œä¸€ä¸ªä¸ç²¾ç¡®åˆ†ç±»ã€‚ ä¼ æ„Ÿå™¨ç±»åž‹ è¯´æ˜Ž åŠ é€Ÿè®¡ Core Motionï¼Œæ„Ÿåº”è®¾å¤‡çš„è¿åŠ¨ï¼ˆæ‘‡ä¸€æ‘‡ã€è®¡æ­¥å™¨ï¼‰ é™€èžºä»ª Core Motionï¼Œæ„Ÿåº”è®¾å¤‡çš„æŒæ¡æ–¹å¼ï¼ˆèµ›è½¦ç±»æ¸¸æˆï¼‰ æ­¥æ•°è®¡ Core Motion æ°”åŽ‹è®¡ Core Motion ç£åŠ›è®¡ Core Motion è·ç¦»ä¼ æ„Ÿå™¨ æ„Ÿåº”æ˜¯å¦æœ‰å…¶ä»–ç‰©ä½“é è¿‘è®¾å¤‡å±å¹•ï¼ˆæ‰“ç”µè¯è‡ªåŠ¨å±ï¼‰ çŽ¯å¢ƒå…‰çº¿ä¼ æ„Ÿå™¨ æ„Ÿåº”å‘¨è¾¹çŽ¯å¢ƒå…‰çº¿çš„å¼ºå¼±ï¼ˆè‡ªåŠ¨è°ƒèŠ‚å±å¹•äº®åº¦ï¼‰ å†…éƒ¨æ¸©åº¦ä¼ æ„Ÿå™¨ æ„Ÿåº”è®¾å¤‡å†…éƒ¨çš„æ¸©åº¦ï¼ˆæé†’ç”¨æˆ·é™æ¸©ï¼Œé˜²æ­¢æŸä¼¤è®¾å¤‡ï¼‰ æ¹¿åº¦ä¼ æ„Ÿå™¨ æ„Ÿåº”è®¾å¤‡æ˜¯å¦è¿›æ°´ï¼ˆæ–¹ä¾¿ç»´ä¿®äººå‘˜ï¼‰ è·ç¦»ä¼ æ„Ÿå™¨å’Œå…‰çº¿ä¼ æ„Ÿå™¨çŸ¥ä¹ŽçŸ¥å‹ Hi-iD çš„ç­”æ¡ˆä»‹ç»è¿‡è¿™ä¸¤ä¸ªä¼ æ„Ÿå™¨çš„å…³ç³»ï¼Œæœ¬äººç®€å•æ€»ç»“å¦‚ä¸‹ï¼š iPhone 5/5s/6ä¹‹åŽå…‰çº¿/è·ç¦»æ„Ÿåº”å™¨å°±æ˜¯iPhoneé¡¶éƒ¨ä¸­å¿ƒä¸€ä¸ªå­” å…‰çº¿ä¼ æ„Ÿå™¨å’Œè·ç¦»ä¼ æ„Ÿå™¨æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„ä¼ æ„Ÿå™¨ï¼Œä½†ä¸¤è€…éƒ½æ˜¯å¯¹å…‰ä½œå‡ºååº”ã€‚ è·ç¦»ä¼ æ„Ÿå™¨æ˜¯åŸºäºŽçº¢å¤–å…‰ï¼Œè·ç¦»ä¼ æ„Ÿå™¨è‡ªèº«å‘å°„å‡ºçš„çº¢å¤–å…‰ï¼Œç»å¤–ç•Œåå°„åŽæŠ˜å›žçš„çº¢å¤–å…‰è¢«è·ç¦»ä¼ æ„Ÿå™¨è¿›è¡Œè¯†åˆ«åˆ¤æ–­ï¼Œæ‰€ä»¥è·ç¦»ä¼ æ„Ÿå™¨ä¼šæœ‰ä¸¤ä¸ªå•å…ƒï¼ˆåå°„å’ŒæŽ¥æ”¶ï¼‰ è·ç¦»ä¼ æ„Ÿå™¨çš„ä½¿ç”¨è·ç¦»ä¼ æ„Ÿå™¨çš„ä½¿ç”¨çš„ä½¿ç”¨ç›¸å¯¹ç®€å•ï¼š1234567891011121314override func viewDidLoad() &#123; super.viewDidLoad() UIDevice.current.isProximityMonitoringEnabled = true NotificationCenter.default.addObserver(self, selector: #selector(ViewController.sensorStateChange(notification:)), name: Notification.Name.UIDeviceProximityStateDidChange, object: nil) &#125; @objc func sensorStateChange(notification: NotificationCenter) &#123; if UIDevice.current.proximityState == true &#123; print(&quot;æŽ¥è¿‘&quot;) &#125; else &#123; print(&quot;è¿œç¦»&quot;) &#125; &#125; çŽ°åœ¨å¯¹iPhoneé¡¶éƒ¨ä¸­å¿ƒä¸€ä¸ªå­”è¿›è¡Œé®æŒ¡ï¼Œå°±èƒ½æ„Ÿå—çš„è·ç¦»ä¼ æ„Ÿå™¨ã€‚ Core MotionCore Motionæ˜¯å…³äºŽaccelerometers(åŠ é€Ÿè®¡), gyroscopes(é™€èžºä»ª), pedometers(æ­¥æ•°è®¡), magnetometers( ç£åŠ›è®¡), and barometers(æ°”åŽ‹è®¡)ç­‰5ä¸ªä¼ æ„Ÿå™¨ä½¿ç”¨çš„æ¡†æž¶ï¼Œ æš‚æ—¶å°±æŒ‰ç…§å­—é¢æ„æ€ç¿»è¯‘æˆæ ¸å¿ƒè¿åŠ¨æ¡†æž¶ã€‚å®˜æ–¹æ–‡æ¡£çš„ä»‹ç»ï¼š Core Motion reports motion- and environment-related data from the onboard hardware of iOS devices, including from the accelerometers(åŠ é€Ÿè®¡), gyroscopes(é™€èžºä»ª), pedometers(æ­¥æ•°è®¡), magnetometers( ç£åŠ›è®¡), and barometers(æ°”åŽ‹è®¡). You use this framework to access hardware-generated data so that you can use it in your app. For example, a game might use accelerometer and gyroscope data to control onscreen game behavior. ä¹‹åŽçš„æ–‡ç« å°±å­¦ä¹ Core Motionçš„ä½¿ç”¨ã€‚ðŸ˜‹ å‚è€ƒï¼š1 https://www.zhihu.com/question/25526443/answer/310408872 iPhoneè¿™åå¹´åœ¨ä¼ æ„Ÿå™¨ä¸Šçš„æ¼”è¿›- çŸ¥ä¹Žä¸“æ 3 iOSå¼€å‘ä¹‹ä¼ æ„Ÿå™¨4 æ‰’ä¸€æ‰’iPhone6çš„æ‰‹æœºä¼ æ„Ÿå™¨5 éžå…¸åž‹æŠ€æœ¯å®… çš„ä¼ æ„Ÿå™¨ç³»åˆ—æ–‡ç«  iOSä¼ æ„Ÿå™¨ï¼šå®žçŽ°ä¸€ä¸ªéšå±å¹•æ—‹è½¬çš„å›¾ç‰‡]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>ä¼ æ„Ÿå™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 13ï¼šæ‰‹åŠ¿å¤„ç†]]></title>
    <url>%2F2017%2Fios-tutorial-13.html</url>
    <content type="text"><![CDATA[iOSæ‰‹åŠ¿å¤„ç†ç”±UIGestureRecognizeræŽ§åˆ¶ï¼Œä¸åŒæ‰‹åŠ¿æœ‰è¿™ä¸ªç±»çš„ä¸åŒå­ç±»å¤„ç†ï¼Œä¸åŒæ‰‹åŠ¿å¤„ç†æœ‰ä¸åŒçš„ç›¸å…³å±žæ€§ã€‚ å­ç±» æè¿° UITapGestureRecognizer ç‚¹å‡»æ‰‹åŠ¿ UIPanGestureRecognizer è·Ÿç€æ‰‹ç§»åŠ¨æ‰‹åŠ¿ UIPinchGestureRecognizer ç¼©æ”¾æ‰‹åŠ¿ UIRotationGestureRecognizer æ—‹è½¬æ‰‹åŠ¿ UISwipeGestureRecognizer è½»æ‰«æ‰‹åŠ¿ UILongPressGestureRecognizer é•¿æŒ‰æ‰‹åŠ¿ UIScreenEdgePanGestureRecognizer å±å¹•è¾¹ç¼˜æ»‘åŠ¨æ‰‹åŠ¿ æ‰‹åŠ¿å¤„ç†çš„æ­¥éª¤ä¸€èˆ¬ï¼š åˆå§‹åŒ–æ‰‹åŠ¿ï¼Œå¹¶æ·»åŠ åˆ°éœ€è¦æ‰‹åŠ¿çš„Viewä¸­ æ·»åŠ æ‰‹åŠ¿å›žè°ƒæ–¹æ³• UITapGestureRecognizerå±žæ€§numberOfTapsRequiredè¡¨ç¤ºç‚¹å‡»æ¬¡æ•°ï¼Œå±žæ€§numberOfTouchesRequiredè¡¨ç¤ºç‚¹å‡»æ‰‹æŒ‡æ•°ã€‚12345678910111213141516171819202122var isChange = false...let tap = UITapGestureRecognizer(target: self, action: #selector(ViewController.tap(tap:)))tap.numberOfTapsRequired = 2...imageView.addGestureRecognizer(tap)...@objc func tap(tap: UITapGestureRecognizer) &#123; let center = imageView.center if isChange &#123; imageView.frame.size.width /= 2 imageView.frame.size.height /= 2 imageView.center = center isChange = false &#125; else &#123; imageView.frame.size.width *= 2 imageView.frame.size.height *= 2 imageView.center = center isChange = true &#125;&#125; UIPanGestureRecognizer1let pan = UIPanGestureRecognizer(target: self, action: #selector(ViewController.pan(pan:))) 12345678910@objc func pan(pan: UIPanGestureRecognizer) &#123; if pan.state == .began || pan.state == .changed &#123; // ç§»åŠ¨åŽçš„å˜åŒ–ï¼ˆå˜åŒ–å€¼ç±»ä¼¼å‘é‡ï¼‰ let translation = pan.translation(in: imageView.superview) print(translation) imageView.center = CGPoint(x: imageView.center.x + translation.x, y: imageView.center.y + translation.y) // viewç§»åŠ¨åŽï¼ŒæŠŠä¸Šä¸€æ­¥çš„ç§»åŠ¨å€¼å˜ä¸º0ï¼Œå¦åˆ™ç§»åŠ¨å€¼ä¸ºé€’å¢ž pan.setTranslation(CGPoint.zero, in: imageView.superview) &#125;&#125; UIRotationGestureRecognizerlet rotation = UIRotationGestureRecognizer(target: self, action: #selector(ViewController.rotation(rotation:))) 12345@objc func rotation(rotation: UIRotationGestureRecognizer) &#123; if rotation.state == .began || rotation.state == .changed &#123; imageView.transform = CGAffineTransform(rotationAngle: rotation.rotation) &#125;&#125; UISwipeGestureRecognizerlet swipe = UISwipeGestureRecognizer(target: self, action: #selector(ViewController.swipe(swipe:))) swipe.direction = .up swipe.numberOfTouchesRequired = 3 123@objc func swipe(swipe: UISwipeGestureRecognizer) &#123; print(&quot;æ‰«çš„æ–¹å‘ï¼š\(swipe.direction),æ‰«çš„æ‰‹æŒ‡æ•°ï¼š\(swipe.numberOfTouchesRequired)&quot;)&#125; UILongPressGestureRecognizernumberOfTouchesRequired é•¿æŒ‰çš„æŒ‡å¤´æ•°minimumPressDuratio é•¿æŒ‰æœ€å°æ—¶é—´ï¼ˆç§’ï¼‰ let long = UILongPressGestureRecognizer(target: self, action: #selector(ViewController.long(long:))) long.numberOfTouchesRequired = 2 long.minimumPressDuration = 1 123@objc func long(long: UILongPressGestureRecognizer) &#123; print(&quot;é•¿æŒ‰æ‰‹åŠ¿ï¼Œé•¿æŒ‰å­—å¤´æ•°ä¸º\(long.numberOfTouchesRequired)&quot;)&#125; UIScreenEdgePanGestureRecognizerlet screenEdge = UIScreenEdgePanGestureRecognizer(target: self, action: #selector(ViewController.screenEdage(screenEdage:))) screenEdge.edges = .left 123@objc func screenEdage(screenEdage: UIScreenEdgePanGestureRecognizer) &#123; print(&quot;å±å¹•è¾¹ç¼˜æ»‘åŠ¨æ‰‹åŠ¿ï¼š\(screenEdage.edges)&quot;)&#125; è¯¦ç»†ä»£ç ï¼š GestureDemo]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>æ‰‹åŠ¿</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 12ï¼šè§†é¢‘èƒŒæ™¯]]></title>
    <url>%2F2017%2Fios-tutorial-12.html</url>
    <content type="text"><![CDATA[æ–°å»ºé¡¹ç›® BackgroundVideoDemo æ–°å»ºBackgroundVideo.swiftæ–‡ä»¶ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990import Foundationimport AVKitimport AVFoundationenum BackgroundVideoErrors: Error &#123; case invalidVideo&#125;class BackgroundVideo &#123; var isMuted = true private var player : AVPlayer? private var videoURL: URL? private var viewController: UIViewController? private var hasBeenUsed: Bool = false init (on viewController: UIViewController, withVideoURL URL: String) &#123; self.viewController = viewController // parse the video string to split it into name and extension let videoNameAndExtension:[String]? = URL.characters.split&#123;$0 == &quot;.&quot;&#125;.map(String.init) if videoNameAndExtension!.count == 2 &#123; if let videoName = videoNameAndExtension?[0] , let videoExtension = videoNameAndExtension?[1] &#123; if let url = Bundle.main.url(forResource: videoName, withExtension: videoExtension) &#123; self.videoURL = url // initialize our player with our fetched video url self.player = AVPlayer(url: self.videoURL!) &#125; else &#123; print(BackgroundVideoErrors.invalidVideo) &#125; &#125; &#125; else &#123; print(&quot;Wrong video name format&quot;) &#125; &#125; deinit&#123; if self.hasBeenUsed &#123; NotificationCenter.default.removeObserver(self, name: .AVPlayerItemDidPlayToEndTime, object: nil) NotificationCenter.default.removeObserver(self, name: .UIApplicationWillEnterForeground, object: nil) &#125; &#125; public func setUpBackground()&#123; self.player?.actionAtItemEnd = .none self.player?.isMuted = isMuted //add the video to your view .. let loginView: UIView = self.viewController!.view//get our view controllers view let playerLayer = AVPlayerLayer(player: self.player) playerLayer.videoGravity = AVLayerVideoGravityResizeAspectFill // preserve aspect ratio and resize to fill screen playerLayer.zPosition = -1 // set it&apos;s possition behined anything in our view playerLayer.frame = loginView.frame // set our player frame to our view&apos;s frame loginView.layer.addSublayer(playerLayer) // prevent video from disturbing audio services from other apps do &#123; try AVAudioSession.sharedInstance().setCategory(AVAudioSessionCategoryAmbient) &#125; catch &#123; print(&quot;failed setting AVAudioSession Category to AVAudioSessionCategoryAmbient&quot;) &#125; self.player?.play() // start the video /// å‘é€šçŸ¥ä¸­å¿ƒå‘é€è§†é¢‘ç»“æŸåŽå†æ¬¡ä»Žå¤´æ’­æ”¾ NotificationCenter.default.addObserver(self, selector: #selector(self.loopVideo), name: .AVPlayerItemDidPlayToEndTime, object: nil) // è§†é¢‘è¿›å…¥ForegroundåŽä»Žå¤´æ’­æ”¾ NotificationCenter.default.addObserver(self, selector: #selector(self.loopVideo), name: .UIApplicationWillEnterForeground, object: nil) self.hasBeenUsed = true &#125; // å¾ªçŽ¯æ’­æ”¾è§†é¢‘ @objc private func loopVideo() &#123; self.player?.seek(to: kCMTimeZero) self.player?.play() &#125; &#125; åœ¨æ‰€éœ€è¦çš„è§†å›¾æŽ§åˆ¶å™¨ä¸­å®šä¹‰å˜é‡var backgroundPlayer : BackgroundVideo?ï¼Œç„¶åŽå†åœ¨viewDidLoadä¸­å®šä¹‰ï¼š 12345678910 override func viewDidLoad() &#123; super.viewDidLoad() let backgroundPlayer = BackgroundVideo(on: self, withVideoURL: &quot;test.mp4&quot;) //æ˜¯å¦æ‰“å¼€é™éŸ³// backgroundPlayer?.isMuted = false backgroundPlayer.setUpBackground() &#125; è¯¦ç»†ä»£ç ï¼š BackgroundVideoDemo å‚è€ƒï¼šBackgroundVideoiOS]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 10ï¼šUIScrollViewæ»šåŠ¨è§†å›¾]]></title>
    <url>%2F2017%2Fios-tutorial-10-uiscrolview.html</url>
    <content type="text"><![CDATA[çŸ¥è¯†ç‚¹: UIScrollView å½“è§†å›¾è¶…è¿‡å±å¹•å¤§å°æ—¶ï¼Œå¯é€šè¿‡æŠŠè§†å›¾æ”¾åœ¨UIScrollViewä¸­è®©è§†å›¾å¯ä»¥ä¸Šä¸‹æ»šåŠ¨çš„åŠŸèƒ½ã€‚ä»¥ä¸€å¼ å¤§å›¾ç‰‡ä¸ºä¾‹ã€‚ æ–°å»ºé¡¹ç›® ScrollViewTutorial ä»£ç ï¼š12345678910111213141516171819202122class ViewController: UIViewController &#123; var imageView: UIImageView! var scrollView: UIScrollView! override func viewDidLoad() &#123; super.viewDidLoad() imageView = UIImageView(image: UIImage(named: &quot;strandvagen.jpg&quot;)) scrollView = UIScrollView(frame: view.bounds) scrollView.backgroundColor = UIColor.black scrollView.contentSize = imageView.bounds.size scrollView.addSubview(imageView) view.addSubview(scrollView) &#125; &#125; è¯¦ç»†ä»£ç ï¼šScrollViewTutorial å‚è€ƒï¼šScroll View Tutorial in iOS8 with Swift]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 11ï¼šç…§ç‰‡æ¨ªå±æ»‘åŠ¨]]></title>
    <url>%2F2017%2Fios-tutorial-11.html</url>
    <content type="text"><![CDATA[çŸ¥è¯†ç‚¹ï¼š UICollectionView UIVisualEffectView UICollectionViewDataSource æ–°å»ºé¡¹ç›®Carousel Effect åœ¨IBæž„å»ºUIã€‚Collection View é‡Œçš„ Scroll Direction è®¾ç½®æˆæ°´å¹³æ»šåŠ¨ã€‚UIVisualEffectViewæ˜¯ç”¨æ¥æ·»åŠ æ¨¡ç³Šæ•ˆæžœçš„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç±»ä¼¼å¦‚ä¸‹çš„ä»£ç æž„å»ºï¼š 1234let blurEffect = UIBlurEffect(style: .dark)let blurEffectView = UIVisualEffectView(effect: blurEffect)blurEffectView.frame = view.boundsbackgroundImageView.addSubview(blurEffectView) åˆ›å»ºæ•°æ®ç±»Interest åˆ›å»ºUICollectionViewCell å®žçŽ°UICollectionViewDataSourceçš„æ–¹æ³•ï¼ˆæœ‰ç‚¹ç±»ä¼¼UITableViewDataSourceï¼‰ã€‚12345678910111213141516171819202122232425262728293031323334353637class ViewController: UIViewController, UICollectionViewDataSource &#123; @IBOutlet weak var backgroundImageView: UIImageView! @IBOutlet weak var collectionView: UICollectionView! var interests = Interest.createInterests() override func viewDidLoad() &#123; super.viewDidLoad() collectionView.dataSource = self collectionView.dataSource = self &#125; override var preferredStatusBarStyle : UIStatusBarStyle &#123; return UIStatusBarStyle.lightContent &#125; func numberOfSections(in collectionView: UICollectionView) -&gt; Int &#123; return 1 &#125; func collectionView(_ collectionView: UICollectionView, numberOfItemsInSection section: Int) -&gt; Int &#123; return interests.count &#125; func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -&gt; UICollectionViewCell &#123; let CellIdentifier = &quot;InterestCell&quot; let cell = collectionView.dequeueReusableCell(withReuseIdentifier: CellIdentifier, for: indexPath) as! InterestCollectionViewCell cell.interest = self.interests[indexPath.item] return cell &#125;&#125; è¯¦ç»†ä»£ç ï¼š Carousel Effect å‚è€ƒï¼š30DaysofSwift]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 9ï¼šæœ¬åœ°è§†é¢‘æ’­æ”¾]]></title>
    <url>%2F2017%2Fios-tutorial-9.html</url>
    <content type="text"><![CDATA[æ–°å»ºé¡¹ç›®PlayLocalVideo åœ¨IBä¸­ä½¿View ControllerEmbed In &gt; Navigation Controller,å¹¶åœ¨View Controller**ä¸­æ·»åŠ UITableViewå’ŒUITableViewCellã€‚ åœ¨ä¸Šé¢çš„UITableViewCellçš„ä¸­æ·»åŠ ä¸€ä¸ªUIImageViewä½œä¸ºè§†é¢‘çš„é¢„è§ˆå›¾ã€ä¸€ä¸ªUIButtonä½œä¸ºå¼€å§‹æ’­æ”¾ã€ä¸¤ä¸ªUILabelåˆ†åˆ«ç”¨äºŽæ˜¾ç¤ºè§†é¢‘çš„åç§°å’Œæ¥æºã€‚å¹¶ä¿®æ”¹ä¸€å®šæ ·å¼å’Œæ·»åŠ ä¸€å®šçº¦æŸ æ·»åŠ å‡ å¼ å›¾ç‰‡å’Œä¸€ä¸ªè§†é¢‘ æ·»åŠ ä¸€ä¸ªcellçš„ç±»ï¼Œå¹¶æ·»åŠ ä¸‰ä¸ªæŽ¥å£ã€‚ 12345class VideoCell: UITableViewCell &#123; @IBOutlet var previewImageView: UIImageView! @IBOutlet var nameLabel: UILabel! @IBOutlet var sourceLabel: UILabel! æ·»åŠ ä¸€ä¸ªvideoæžšä¸¾ï¼Œç”¨æ¥å­˜å‚¨è§†é¢‘ä¿¡æ¯ã€‚ 12345struct video &#123; let image: String let title: String let source: String&#125; ä½¿ViewControllerç¬¦åˆtable viewä»£ç†å’Œæ•°æ®çš„åè®®ï¼Œå¹¶å®žçŽ°æ‰€éœ€æ–¹æ³•ï¼š 12345678910111213141516171819202122232425func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -&gt; CGFloat &#123; return 220 &#125; func numberOfSectionsInTableView(tableView: UITableView) -&gt; Int &#123; return 2 &#125; func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123; return data.count &#125; func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cell = tableView.dequeueReusableCell(withIdentifier: &quot;Cell&quot;, for: indexPath) as! VideoCell let video = data[indexPath.row] cell.previewImageView.image = UIImage(named: video.image) cell.nameLabel.text = video.title cell.sourceLabel.text = video.source return cell &#125; å¼•å…¥æ’­æ”¾è§†é¢‘æ‰€éœ€æ¡†æž¶ï¼Œå¹¶å®šä¹‰ç›¸å…³å˜é‡ã€‚ 1234567import AVFoundationimport AVKit... var playViewController : AVPlayerViewController? var playerView : AVPlayer? å®žçŽ°è§†é¢‘æ’­æ”¾æŒ‰é’®æ–¹æ³•ã€‚ 12345678910111213@IBAction func playVideo(_ sender: UIButton) &#123; let path = Bundle.main.path(forResource: &quot;KL&quot;, ofType: &quot;mp4&quot;) playerView = AVPlayer(url: URL(fileURLWithPath: path!)) playViewController = AVPlayerViewController() playViewController?.player = playerView present(playViewController!, animated: true, completion: &#123; self.playViewController?.player?.play() &#125;) &#125; è¯¦ç»†ä»£ç ï¼š PlayLocalVideo å‚è€ƒï¼š 30DaysofSwift]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Alamofireï¼šSwiftçš„HTTP ç½‘ç»œåº“]]></title>
    <url>%2F2017%2Falamofire-introduce.html</url>
    <content type="text"><![CDATA[å®‰è£… CocoaPodså’ŒCarthageéƒ½å¾ˆæ–¹ä¾¿å®‰è£…å®‰è£…å®Œï¼Œå¦‚æžœå‡ºçŽ°åŠ è½½ä¸åˆ°Alamofireï¼Œå¯ä»¥æŸ¥çœ‹Cannot load underlying module for â€˜Alamofireâ€™ #441ï¼Œé—®é¢˜åº”è¯¥å¯ä»¥è§£å†³ã€‚ æ‰‹åŠ¨å®‰è£… ä¸‹è½½Alamofire å°†Alamofire.xcodeprojæ‹–è¿›åˆ°é¡¹ç›®ä¸­ åœ¨â€œEmbedded Binariesä¸­æ·»åŠ  command + B ç¼–è¯‘åŽå°±å¯ä»¥ä½¿ç”¨ å…³äºŽ https://httpbin.org/ ç½‘ç«™ https://httpbin.org/ ç½‘ç«™å¯ç”¨æ¥åšhttpçš„å„ç§è¯·æ±‚æµ‹è¯•ä½¿ç”¨ï¼Œä¸è¿‡é—æ†¾çš„æ˜¯æ²¡æœ‰POSTç­‰æäº¤ç±»åž‹è¯·æ±‚çš„æµ‹è¯• åŸºæœ¬ä½¿ç”¨ä¸€ä¸ªç®€å•çš„è¯·æ±‚ï¼š 123import AlamofireAlamofire.request(&quot;https://httpbin.org/get&quot;) httpä¸­æœ‰è¯·æ±‚(Request) å’Œ å“åº”(Response)ä¸¤ä¸ªé‡è¦æ¦‚å¿µã€‚å¤§éƒ¨åˆ†httpæ¡†æž¶ï¼Œéƒ½ä¼šä½¿ç”¨requestå’Œresponseä½œä¸ºæ–¹æ³•åã€‚çœ‹çœ‹Alamofireçš„requestæ–¹æ³•çš„è¯¦ç»†å‚æ•°ï¼š 12345678public func request( _ url: URLConvertible, method: HTTPMethod = .get, parameters: Parameters? = nil, encoding: ParameterEncoding = URLEncoding.default, headers: HTTPHeaders? = nil) -&gt; DataRequest&#123; æœ‰url,method,parameters,encoding,headersäº”ä¸ªå‚æ•°ï¼Œä¸Žhttpæ˜¯ç›¸äº’å¯¹åº”çš„ã€‚å…¶ä¸­åªæœ‰urlæ˜¯å¿…é¡»çš„ï¼Œå…¶å®ƒéƒ½æœ‰é»˜è®¤å€¼ã€‚ è¯·æ±‚åŽçš„å“åº”å¤„ç†å‘httpå‘é€è¯·æ±‚åŽï¼Œå°±éœ€å¯¹å“åº”ç»“æžœè¿›è¡Œå¤„ç†ã€‚ Alamofireé‡‡ç”¨é“¾å¼è°ƒç”¨çš„æ–¹å¼å¤„ç†å“åº”ï¼Œè¿™ç§é“¾å¼è°ƒç”¨çš„æ–¹å¼æœ€åˆåº”è¯¥æ˜¯èµ·æºjQueryã€‚å“åº”å¤„ç†çš„ä¸€èˆ¬å½¢å¼å¦‚ä¸‹ï¼Œresponseå°±æ˜¯å“åº”ç»“æžœã€‚ 123Alamofire.request(&quot;https://httpbin.org/get&quot;).responseJSON &#123; response in&#125; Alamofire æä¾›äº†äº”ç§ä¸åŒçš„å“åº”å¤„ç†ï¼š 123456789101112131415161718192021222324252627282930// Response Handler - Unserialized Responsefunc response( queue: DispatchQueue?, completionHandler: @escaping (DefaultDataResponse) -&gt; Void) -&gt; Self// Response Data Handler - Serialized into Datafunc responseData( queue: DispatchQueue?, completionHandler: @escaping (DataResponse&lt;Data&gt;) -&gt; Void) -&gt; Self// Response String Handler - Serialized into Stringfunc responseString( queue: DispatchQueue?, encoding: String.Encoding?, completionHandler: @escaping (DataResponse&lt;String&gt;) -&gt; Void) -&gt; Self// Response JSON Handler - Serialized into Anyfunc responseJSON( queue: DispatchQueue?, completionHandler: @escaping (DataResponse&lt;Any&gt;) -&gt; Void) -&gt; Self// Response PropertyList (plist) Handler - Serialized into Anyfunc responsePropertyList( queue: DispatchQueue?, completionHandler: @escaping (DataResponse&lt;Any&gt;) -&gt; Void)) -&gt; Self äº”ç§æ–¹æ³•çš„å‚æ•°ä¸åŒï¼Œä½†æœ€åŽä¸€å‚æ•°éƒ½æ˜¯ä¸€ä¸ªå›žè°ƒçš„é—­åŒ…ï¼Œéƒ½å¯ä»¥å†™æˆå°¾éšé—­åŒ…å½¢å¼ã€‚é™¤äº†responseæ–¹æ³•çš„å›žè°ƒå‚æ•°æ˜¯DefaultDataResponseï¼Œå…¶å®ƒéƒ½æ˜¯DataResponse: 1234567891011121314151617181920212223public struct DataResponse&lt;Value&gt; &#123; /// The URL request sent to the server. public let request: URLRequest? /// The server&apos;s response to the URL request. public let response: HTTPURLResponse? /// The data returned by the server. public let data: Data? /// The result of response serialization. public let result: Result&lt;Value&gt; /// The timeline of the complete lifecycle of the request. public let timeline: Timeline /// Returns the associated value of the result if it is a success, `nil` otherwise. public var value: Value? &#123; return result.value &#125; /// Returns the associated error value if the result if it is a failure, `nil` otherwise. public var error: Error? &#123; return result.error &#125; var _metrics: AnyObject? DataResponseä¸ŽDefaultDataResponseæœ€å¤§çš„ä¸åŒå°±æ˜¯å¤šäº†ä¸¤ä¸ªå±žæ€§resultå’Œvalueï¼Œvalueå€¼å°±æ˜¯æ ¼å¼åŒ–çš„ä¸åŒç±»åž‹ã€‚ å“åº”å¤„ç†çš„ä¸€äº›ä¾‹å­ response 123456789Alamofire.request(&quot;https://httpbin.org/get&quot;).response &#123; response in print(&quot;Request: \(response.request)&quot;) print(&quot;Response: \(response.response)&quot;) print(&quot;Error: \(response.error)&quot;) if let data = response.data, let utf8Text = String(data: data, encoding: .utf8) &#123; print(&quot;Data: \(utf8Text)&quot;) &#125;&#125; responseæ–¹æ³•çš„å“åº”ç»“æžœresponseæ˜¯DefaultDataResponseï¼Œæ²¡æœ‰è¿›è¡Œè¿‡æ ¼å¼åŒ–å¤„ç†ã€‚ responseData 12345678910 Alamofire.request(&quot;https://httpbin.org/get&quot;).responseData &#123; response in debugPrint(&quot;All Response Info: \(response)&quot;) if let data = response.result.value, let utf8Text = String(data: data, encoding: .utf8) &#123; print(&quot;Data: \(utf8Text)&quot;) &#125; &#125; ``` `responseData`æ–¹æ³•å¯¹å“åº”ç»“æžœè¿›è¡Œäº†å¤„ç†ï¼Œ`response.result.value`å°±æ˜¯æˆ‘ä»¬å±žæ€§çš„`Data`ç±»åž‹ã€‚+ é“¾å¼è°ƒç”¨ Alamofire.request(&quot;https://httpbin.org/get&quot;) .responseString { response in print(&quot;Response String: \(response.result.value)&quot;) } .responseJSON { response in print(&quot;Response JSON: \(response.result.value)&quot;) } 1234### å“åº”éªŒè¯httpå“åº”ç»“æžœä¸­çš„ä¸åŒçŠ¶æ€ç (`100..&lt;600`)è¡¨ç¤ºä¸åŒç»“æžœã€‚- æ‰‹åŠ¨éªŒè¯ Alamofire.request(â€œhttps://httpbin.org/getâ€œ).validate(statusCode: 200..&lt;300).validate(contentType: [â€œapplication/jsonâ€]).responseData { response in switch response.result { case .success: print(&quot;Validation Successful&quot;) case .failure(let error): print(error) } } 12- è‡ªåŠ¨éªŒè¯çŠ¶æ€ç åœ¨`200..&lt;300`çš„ä¸ºæ­£ç¡®ï¼Œå…¶å®ƒä¸ºé”™è¯¯ã€‚ Alamofire.request(â€œhttps://httpbin.org/get&quot;).validate().responseJSON { response inswitch response.result {case .success: print(&quot;Validation Successful&quot;) case .failure(let error): print(error) }} 123### HTTPä¸åŒè¯·æ±‚æ–¹å¼`request`æ–¹æ³•çš„`method`å‚æ•°è¡¨ç¤ºä¸åŒçš„æ–¹æ³•ã€‚ Alamofire.request(â€œhttps://httpbin.org/getâ€œ) // method defaults to .get Alamofire.request(â€œhttps://httpbin.org/postâ€œ, method: .post)Alamofire.request(â€œhttps://httpbin.org/putâ€œ, method: .put)Alamofire.request(â€œhttps://httpbin.org/deleteâ€œ, method: .delete)12345### è¯·æ±‚å‚æ•°ç¼–ç `GET`çš„å‚æ•°æŒ‰ç…§å›ºå®šæ ¼å¼å†™åˆ°URLä¸­ï¼Œå…¶ä»–ç±»åž‹åˆ™æŒ‰ç…§ä¸åŒæ ¼å¼å†™åˆ°è¯·æ±‚bodyä¸­ã€‚- GETå‚æ•°ç¼–ç  let parameters: Parameters = [&quot;foo&quot;: &quot;bar&quot;] // All three of these calls are equivalent Alamofire.request(&quot;https://httpbin.org/get&quot;, parameters: parameters) // encoding defaults to `URLEncoding.default` Alamofire.request(&quot;https://httpbin.org/get&quot;, parameters: parameters, encoding: URLEncoding.default) Alamofire.request(&quot;https://httpbin.org/get&quot;, parameters: parameters, encoding: URLEncoding(destination: .methodDependent)) // https://httpbin.org/get?foo=bar 1- POSTå‚æ•°ç¼–ç  let parameters: Parameters = [ &quot;foo&quot;: &quot;bar&quot;, &quot;baz&quot;: [&quot;a&quot;, 1], &quot;qux&quot;: [ &quot;x&quot;: 1, &quot;y&quot;: 2, &quot;z&quot;: 3 ] ] // All three of these calls are equivalent Alamofire.request(&quot;https://httpbin.org/post&quot;, method: .post, parameters: parameters) Alamofire.request(&quot;https://httpbin.org/post&quot;, method: .post, parameters: parameters, encoding: URLEncoding.default) Alamofire.request(&quot;https://httpbin.org/post&quot;, method: .post, parameters: parameters, encoding: URLEncoding.httpBody) // HTTP body: foo=bar&amp;baz[]=a&amp;baz[]=1&amp;qux[x]=1&amp;qux[y]=2&amp;qux[z]=3 12- JSONç¼–ç  let parameters: Parameters = [ &quot;foo&quot;: [1,2,3], &quot;bar&quot;: [ &quot;baz&quot;: &quot;qux&quot; ] ] // Both calls are equivalent Alamofire.request(&quot;https://httpbin.org/post&quot;, method: .post, parameters: parameters, encoding: JSONEncoding.default) Alamofire.request(&quot;https://httpbin.org/post&quot;, method: .post, parameters: parameters, encoding: JSONEncoding(options: [])) // HTTP body: {&quot;foo&quot;: [1, 2, 3], &quot;bar&quot;: {&quot;baz&quot;: &quot;qux&quot;}} 12### æ·»åŠ è¯·æ±‚HTTPå¤´éƒ¨ let headers: HTTPHeaders = [ â€œAuthorizationâ€: â€œBasic QWxhZGRpbjpvcGVuIHNlc2FtZQ==â€, â€œAcceptâ€: â€œapplication/jsonâ€] Alamofire.request(â€œhttps://httpbin.org/headersâ€œ, headers: headers).responseJSON { response in debugPrint(response)} 12### HTTPè®¤è¯ let user = &quot;user&quot; let password = &quot;password&quot; Alamofire.request(&quot;https://httpbin.org/basic-auth/\(user)/\(password)&quot;) .authenticate(user: user, password: password) .responseJSON { response in debugPrint(response) } 12### ä¸‹è½½æ–‡ä»¶ Alamofire.download(&quot;https://httpbin.org/image/png&quot;).responseData { response in if let data = response.result.value { let image = UIImage(data: data) } } 1å¦å¤–å¯ä»¥ä¸‹æ–‡ä»¶ä¿å­˜åœ¨æœ¬åœ°ï¼š let destination: DownloadRequest.DownloadFileDestination = { _, _ in let documentsURL = FileManager.default.urls(for: .documentDirectory, in: .userDomainMask)[0] let fileURL = documentsURL.appendingPathComponent(&quot;pig.png&quot;) return (fileURL, [.removePreviousFile, .createIntermediateDirectories]) } Alamofire.download(&quot;https://httpbin.org/image/png&quot;, to: destination).response { response in print(response) if response.error == nil, let imagePath = response.destinationURL?.path { let image = UIImage(contentsOfFile: imagePath) self.imageView.image = image self.tableView.reloadData() } } 123### ä¸Šä¼ - ä¸Šä¼  `Data` let imageData = UIImagePNGRepresentation(image!)! Alamofire.upload(imageData, to: &quot;https://httpbin.org/post&quot;).responseJSON { response in debugPrint(response) } 1- ä¸Šä¼ æ–‡ä»¶ let fileURL = Bundle.main.url(forResource: &quot;video&quot;, withExtension: &quot;mov&quot;) Alamofire.upload(fileURL!, to: &quot;https://httpbin.org/post&quot;).responseJSON { response in debugPrint(response) } 1- ä¸Šä¼ Multipart Form Dataï¼ˆè¡¨å•æäº¤ï¼‰ Alamofire.upload( multipartFormData: { multipartFormData in multipartFormData.append(unicornImageURL, withName: &quot;unicorn&quot;) multipartFormData.append(rainbowImageURL, withName: &quot;rainbow&quot;) }, to: &quot;https://httpbin.org/post&quot;, encodingCompletion: { encodingResult in switch encodingResult { case .success(let upload, _, _): upload.responseJSON { response in debugPrint(response) } case .failure(let encodingError): print(encodingError) } } ) 12### è¯·æ±‚ä¸­èŠ±è´¹çš„å„ç§æ—¶é—´ Alamofire.request(â€œhttps://httpbin.org/get&quot;).responseJSON { response in print(response.timeline)}1ç»“æžœï¼š Timeline: { â€œLatencyâ€: 1.527 secs, â€œRequest Durationâ€: 1.528 secs, â€œSerialization Durationâ€: 0.001 secs, â€œTotal Durationâ€: 1.529 secs }```]]></content>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 1 å‰è¨€å’Œç›®å½•]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-1.html</url>
    <content type="text"><![CDATA[è¿™æ˜¯æˆ‘å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„è®°å½•ï¼Œç« èŠ‚å’ŒåŽŸä¹¦ä¸åŒã€‚ å¼€å‘çŽ¯å¢ƒæ˜¯Xcode 8ï¼ŒSwift 3ï¼ŒiOS 10ã€‚ æˆ‘çš„ä»£ç åœ¨githubä¸Šï¼ŒandyRon/Beginning-iOS-Programming-with-Swift ç›®å½• å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 1 å‰è¨€å’Œç›®å½• å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 2 Hello Worldï¼ç¬¬ä¸€ä¸ªSwift APP å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 3 ä»‹ç»Auto Layout å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 4 ç”¨Stack Viewè®¾è®¡UI å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 5 åŽŸåž‹çš„ä»‹ç» å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 6 åˆ›å»ºç®€å•çš„Table Based App å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 7 å®šåˆ¶Table Views å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 8 Table Viewå’ŒUIAlertControllerçš„äº¤äº’ å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 9 Table Rowçš„åˆ é™¤, UITableViewRowActionå’ŒUIActivityViewControllerçš„ä½¿ç”¨ å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 10 Navigation Controllerçš„ä»‹ç»å’ŒSegue å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 11 é¢å‘å¯¹è±¡ç¼–ç¨‹ä»‹ç» å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 12 ä¸°å¯ŒDetail Viewå’Œå®šåˆ¶åŒ–Navigation Bar å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 13 Self Sizing Cells and Dynamic Type å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 14 åŸºç¡€åŠ¨ç”»ï¼Œæ¨¡ç³Šæ•ˆæžœå’ŒUnwind Segue å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 15 ä½¿ç”¨åœ°å›¾ å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 16 ä»‹ç»é™æ€Table Viewsï¼ŒUIImagePickerControllerå’ŒNSLayoutConstraint å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 17 ä½¿ç”¨Core Data å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 18 Search Bar å’Œ UISearchController å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 19 ä½¿ç”¨UIPageViewControlleræž„å»ºä»‹ç»é¡µé¢ å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 20 ä½¿ç”¨Tab Bar Controller å’Œ æ‹†åˆ†Storyboard å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 21 ä½¿ç”¨WKWebViewå’ŒSFSafariViewController å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 22 ä½¿ç”¨CloudKit [å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 24 ä½¿ç”¨TestFlightè¿›è¡ŒBetaæµ‹è¯•]http://andyron.com/2017/beginning-ios-swift-24.html) å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 25 ä½¿ç”¨3D Touch å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 26 ä½¿ç”¨æœ¬åœ°ç”¨æˆ·é€šçŸ¥]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 8ï¼šä½¿ç”¨IBInspectable å’Œ IBDesignableå®šåˆ¶UI]]></title>
    <url>%2F2017%2Fios-tutorial-8-ibinspectable-ibdesignable.html</url>
    <content type="text"><![CDATA[ä¾‹å­ä»£ç ï¼šhttps://github.com/andyRon/LearniOSByProject/tree/master/77 ç†è§£IBInspectable å’Œ IBDesignableç®€å•åœ°è¯´ï¼ŒIBInspectable å°±æ˜¯å…è®¸å¼€å‘è€…åœ¨IBçš„å±žæ€§æ£€æŸ¥å™¨ä¸­æ·»åŠ é¢å¤–çš„é€‰é¡¹ã€‚IBDesignable èƒ½å¤Ÿè®© IBInspectable æ·»åŠ çš„é¢å¤–é€‰é¡¹äº§ç”Ÿçš„å˜åŒ–åœ¨IBä¸­å®žæ—¶æ˜¾ç¤ºã€‚ä»¥Buttonçš„åœ†è§’ä¸ºä¾‹è¯´æ˜Žã€‚ æ­£å¸¸æƒ…å†µä¸‹ï¼ŒButtonçš„åœ†è§’éœ€è¦ä»£ç ï¼š12button.layer.cornerRadius = 10.0button.layer.masksToBounds = true æˆ–è€…ç›´æŽ¥åœ¨IBçš„Identityæ£€æŸ¥å™¨çš„ user defined runtime attributesä¸­æ·»åŠ ï¼š æ³¨æ„åˆ°ï¼Œè¿™ç§ä¿®æ”¹ä¸æ˜¯å®žæ—¶ï¼Œåœ¨IBä¸­Buttonè¿˜æ˜¯ç›´è§’ï¼Œåªæœ‰è¿è¡ŒåŽæ‰æ˜¯åœ†è§’ã€‚ ä»¥IBInspectableçš„æ–¹å¼ã€‚å®šä¹‰ä¸ªç»§æ‰¿è‡³UIButtonçš„ç±»ã€‚12345678class RoundedCornerButton: UIButton &#123; @IBInspectable var cornerRadius: CGFloat = 0.0 &#123; didSet &#123; layer.cornerRadius = cornerRadius layer.masksToBounds = cornerRadius &gt; 0 &#125; &#125;&#125; ç„¶åŽæŠŠbuttonçš„classå±žæ€§ä¿®æ”¹æˆRoundedCornerButton: å‘çŽ°è¿™ä¸ªbuttonçš„å±žæ€§æ£€æŸ¥å™¨ä¸­å¤šäº†Corner Radiusã€‚ æ³¨æ„ï¼š cornerRadiuså±žæ€§å˜æˆäº†Corner Radiusï¼ŒRoundedCornerButtonç±»å˜æˆäº† Rounded Corner Buttonï¼Œè¿™æ˜¯Xcodeè‡ªåŠ¨è½¬å˜çš„ï¼Œå¼€å‘è€…åªéœ€è¦ä¾ç…§swiftçš„å‘½åè§„èŒƒå°±å¯ä»¥äº†ï¼ˆç±»åæ˜¯å¤§å†™å¼€å¤´çš„é©¼å³°å‘½åè§„åˆ™ï¼Œå±žæ€§åæ˜¯å°å†™å¼€å¤´çš„é©¼å³°å‘½åè§„åˆ™ï¼‰ cornerRadiusçš„ç±»åž‹æ˜¯CGFloatï¼Œåœ¨å±žæ€§æ£€æŸ¥å™¨ä¸­å°±å¯¹åº”æ•°å­—çš„é€‰æ‹©ã€‚å½“ç„¶ä¸æ˜¯æ‰€æœ‰ç±»åž‹éƒ½å¯ä»¥æ·»åŠ å±žæ€§æ£€æŸ¥å™¨ä¸­çš„ï¼ŒIBInspectableæ”¯æŒå¦‚ä¸‹ç±»åž‹ï¼š12345678910IntCGFloat Double String Bool CGPoint CGSize CGRect UIColor UIImage å¦‚æžœåœ¨ç±»RoundedCornerButtonå‰æ·»åŠ @IBDesignableï¼Œé‚£åœ¨å±žæ€§æ£€æŸ¥å™¨ä¸­è‡ªå®šä¹‰çš„å±žæ€§å˜åŒ–å°±å¯ä»¥åœ¨IBä¸­å®žæ—¶æ˜¾ç¤ºäº†ã€‚12345678@IBDesignable class RoundedCornerButton: UIButton &#123; @IBInspectable var cornerRadius: CGFloat = 0.0 &#123; didSet &#123; layer.cornerRadius = cornerRadius layer.masksToBounds = cornerRadius &gt; 0 &#125; &#125;&#125; åˆ›å»ºFancy Buttonåˆ›å»ºFancy Buttonæ¥æ›´åŠ æ·±å…¥çš„äº†è§£IBInspectable å’Œ IBDesignable åˆ›å»ºæ–°é¡¹ç›®FancyButton ä¸‹è½½å›¾æ ‡ï¼Œä¹Ÿå¯ä»¥éšæ„å›¾æ ‡ï¼Œæ‹–è¿›asset catalog æ–°å»ºç±»FancyButtonï¼Œç»§æ‰¿è‡³UIButton åœ†è§’ï¼Œè¾¹å®½ï¼Œè¾¹çš„é¢œè‰²ã€‚ æ›´æ–°FancyButtonï¼š12345678910111213141516171819@IBDesignableclass FancyButton: UIButton &#123; @IBInspectable var cornerRadius: CGFloat = 0.0 &#123; didSet &#123; layer.cornerRadius = cornerRadius layer.masksToBounds = cornerRadius &gt; 0 &#125; &#125; @IBInspectable var borderWidth: CGFloat = 0.0 &#123; didSet &#123; layer.borderWidth = borderWidth &#125; &#125; @IBInspectable var borderColor: UIColor = .black &#123; didSet &#123; layer.borderColor = borderColor.cgColor &#125; &#125;&#125; Titleåœ¨FancyButtonç»§ç»­æ·»åŠ å±žæ€§ï¼š1234567891011121314151617181920@IBInspectable var titleLeftPadding: CGFloat = 0.0 &#123; didSet &#123; titleEdgeInsets.left = titleLeftPadding &#125;&#125;@IBInspectable var titleRightPadding: CGFloat = 0.0 &#123; didSet &#123; titleEdgeInsets.right = titleRightPadding &#125;&#125;@IBInspectable var titleTopPadding: CGFloat = 0.0 &#123; didSet &#123; titleEdgeInsets.top = titleTopPadding &#125;&#125;@IBInspectable var titleBottomPadding: CGFloat = 0.0 &#123; didSet &#123; titleEdgeInsets.bottom = titleBottomPadding &#125;&#125; é€šè¿‡åœ†è§’å¯åˆ›å»ºåœ†å½¢button Image Paddingæ·»åŠ å›¾ç‰‡è¾¹è·çš„å±žæ€§ï¼š123456789101112131415161718192021@IBInspectable var imageLeftPadding: CGFloat = 0.0 &#123; didSet &#123; imageEdgeInsets.left = imageLeftPadding &#125;&#125;@IBInspectable var imageRightPadding: CGFloat = 0.0 &#123; didSet &#123; imageEdgeInsets.right = imageRightPadding &#125;&#125;@IBInspectable var imageTopPadding: CGFloat = 0.0 &#123; didSet &#123; imageEdgeInsets.top = imageTopPadding &#125;&#125;@IBInspectable var imageBottomPadding: CGFloat = 0.0 &#123; didSet &#123; imageEdgeInsets.bottom = imageBottomPadding &#125;&#125; å›¾ç‰‡é å³å¯¹é½æ ¹æ®ä¸‹å›¾å…³ç³»ï¼Œåº”æœ‰imageEdgeInsets.left = self.bounds.width - imageView.bounds.width - imageRightPaddingã€‚ åœ¨FancyButtonä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 123456789@IBInspectable var enableImageRightAligned: Bool = falseoverride func layoutSubviews() &#123; super.layoutSubviews() if enableImageRightAligned, let imageView = imageView &#123; imageEdgeInsets.left = self.bounds.width - imageView.bounds.width - imageRightPadding &#125;&#125; + `enableImageRightAligned`å±žæ€§åˆæ¥è‡ªåŠ¨è®¡ç®— `imageEdgeInsets.left` é¢œè‰²æ¸å˜æ·»åŠ ä¸‰ä¸ª@IBInspectableå±žæ€§ï¼Œå¹¶æ›´æ–°layoutSubviews:1234567891011121314151617181920@IBInspectable var enableGradientBackground: Bool = false@IBInspectable var gradientColor1: UIColor = UIColor.black@IBInspectable var gradientColor2: UIColor = UIColor.whiteoverride func layoutSubviews() &#123; super.layoutSubviews() if enableImageRightAligned, let imageView = imageView &#123; imageEdgeInsets.left = self.bounds.width - imageView.bounds.width - imageRightPadding &#125; if enableGradientBackground &#123; let gradientLayer = CAGradientLayer() gradientLayer.frame = self.bounds gradientLayer.colors = [gradientColor1.cgColor, gradientColor2.cgColor] gradientLayer.startPoint = CGPoint(x: 0.0, y: 0.5) gradientLayer.endPoint = CGPoint(x: 1.0, y: 0.5) self.layer.insertSublayer(gradientLayer, at: 0) &#125;&#125; æ¸å˜è‰²éœ€è¦è¿è¡ŒåŽæ‰èƒ½çœ‹åˆ° å‚è€ƒï¼šappcodeç½‘ç«™çš„ä¹¦ã€ŠIntermediate iOS Programming with Swiftã€‹ çš„Chapter 36]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[DownGitï¼šæ€Žä¹ˆä¸‹è½½githubä¸­æŸä¸ªæ–‡ä»¶å¤¹ï¼Ÿ]]></title>
    <url>%2F2017%2Fdowngit.html</url>
    <content type="text"><![CDATA[æ€Žä¹ˆä¸‹è½½githubä¸­æŸä¸ªæ–‡ä»¶å¤¹ï¼Ÿ githubåªæä¾›äº†æ•´ä¸ªé¡¹ç›®ä¸‹è½½ã€‚ä¸‹è½½ä¸€ä¸ªé¡¹ç›®ä¸­çš„æŸä¸ªæ–‡ä»¶å¤¹çš„å†…å®¹ï¼Œè¿™ç§éœ€æ±‚åœ¨ä½¿ç”¨githubæ—¶ï¼Œè¿˜æ˜¯ç»å¸¸ä½¿ç”¨çš„ã€‚ æ¯”å¦‚ï¼šåœ¨ä¸€äº›å¤§çš„é¡¹ç›®ä¸‹ï¼Œåªæƒ³çœ‹æŸä¸ªæ–‡ä»¶çš„å†…å®¹æ—¶ã€‚åˆæ¯”å¦‚ï¼Œåƒæˆ‘è¿™ç§andyRon/LearniOSByProjectï¼Œå°±æ˜¯æˆ‘ä¸€äº›å­¦ä¹ iOSçš„å°é¡¹ç›®æˆ–è€…Demoçš„é›†åˆï¼Œå¦‚æžœåªæƒ³æŸ¥çœ‹æŸä¸ªå°é¡¹ç›®ï¼Œè€Œä¸ä¸‹è½½æ•´ä¸ªé¡¹ç›®æ—¶ã€‚ æ–¹æ³•å¾ˆç®€å•ï¼Œæ—©å°±æœ‰å‰è¾ˆæƒ³åˆ°äº†ï¼ŒDownGitè¿™ä¸ªç½‘ç«™å°±æä¾›è¿™ä¸ªåŠŸèƒ½ï¼Œåªè¦æŠŠç›®å½•é“¾æŽ¥ï¼ˆæ¯”å¦‚ï¼šhttps://github.com/andyRon/LearniOSByProject/tree/master/76ï¼‰æ‹·è´ï¼Œç„¶åŽç‚¹å‡»downloadå°±å¯ä»¥ä¸‹è½½ç›®å½•çš„åŽ‹ç¼©æ–‡ä»¶ã€‚]]></content>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSæœ¬åœ°åŒ–(swift)]]></title>
    <url>%2F2017%2Fios-localize.html</url>
    <content type="text"><![CDATA[ç¤ºä¾‹ä»£ç åœ¨githubä¸ŠlocalizationsDemo 1 é¡¹ç›®ä¸­éœ€è¦é…ç½®çš„è¯­è¨€è¿™å°±æ˜¯é¡¹ç›®ä¸­å…¶ä»–ä¸åŒå½¢å¼æœ¬åœ°åŒ–å¯ä»¥æ·»åŠ çš„è¯­ç§è®¾ç½®ã€‚ å¦‚ä¸‹å›¾ä¸ºé¡¹ç›®æ·»åŠ ä¸åŒè¯­ç§ å¼¹æ¡†ä¸­æ˜¾ç¤ºè¦ä¸ºä¸¤ä¸ªStoryboardæ–‡ä»¶æ·»åŠ è¯­ç§ä¿¡æ¯ æ·»åŠ å®Œå¤šè¯­ç§åŽï¼Œç›¸å…³éœ€è¦æœ¬åœ°åŒ–çš„æ–‡ä»¶ä¼šäº§ç”Ÿä¸€ç»„æ–‡ä»¶ å®žé™…åœ¨ç›®å½•ç»“æž„ä¸­æ˜¯æ ¹æ®ä¸åŒè¯­è¨€ç”Ÿæˆä¸åŒçš„*.lprojç›®å½•ï¼Œå†åœ¨*.lprojç›®å½•ä¸­ç”Ÿæˆäº†ä¸åŒçš„.stringsæ–‡ä»¶ã€‚ 2 åº”ç”¨åç§°æœ¬åœ°åŒ–Appçš„åç§°åœ¨ä¸åŒè¯­ç§ä¸‹æ˜¾ç¤ºä¸åŒã€‚ æ–°å»ºä¸€ä¸ª.stringsæ–‡ä»¶ï¼Œåä¸ºInfoPlist.stringsã€‚ é€‰ä¸­InfoPlist.stringsï¼Œåœ¨å³ä¾§çš„æ–‡ä»¶æ£€æŸ¥å™¨ä¸­ç‚¹å‡»Localizeï¼Œåœ¨å¼¹æ¡†ä¸­å¯ä»¥é€‰æ‹©è¯­ç§ï¼Œå¯¹åº”é¡¹ç›®ä¸­éœ€è¦é…ç½®çš„è¯­è¨€ä¸­é…ç½®çš„è¯­ç§ã€‚ å¯é€‰ä¸­éœ€è¦æœ¬åœ°åŒ–çš„åº”ç”¨åç§°çš„è¯­ç§ï¼š åœ¨InfoPlist.stringsçš„ä¸åŒè¯­ç§æ–‡ä»¶ä¸­æ·»åŠ å­—æ®µCFBundleDisplayNameï¼Œè¡¨ç¤ºåº”ç”¨çš„åç§°ã€‚CFBundleDisplayName = &quot;ç®€ä½“ä¸­æ–‡åç§°&quot;; åœ¨æ¨¡æ‹Ÿå™¨ä¸­ï¼Œå¯é€šè¿‡Edit Scheme...ç¼–è¾‘è¯­ç§ï¼š 3 ä»£ç ä¸­çš„å­—ç¬¦ä¸²çš„æœ¬åœ°åŒ–ç±»ä¼¼åº”ç”¨åç§°æœ¬åœ°åŒ–ï¼Œä»£ç ä¸­çš„å­—ç¬¦ä¸²çš„æœ¬åœ°ä¹Ÿæ˜¯åˆ©ç”¨.stringsæ–‡ä»¶å­˜å‚¨ç¿»è¯‘ä¿¡æ¯ã€‚ç„¶åŽå†åœ¨ä»£ç ä¸­åˆ©ç”¨NSLocalizedStringï¼ˆç¿»è¯‘ä¿¡æ¯é»˜è®¤åœ¨Localizable.stringsæ–‡ä»¶ï¼‰æˆ–NSLocalizedString(_:tableName:bundle:value:comment:)ï¼ˆç¿»è¯‘ä¿¡æ¯åœ¨tableNameå¯¹åº”çš„.stringsæ–‡ä»¶ï¼‰æ–‡ä»¶æ ‡æ³¨ã€‚ NSLocalizedString(_:tableName:bundle:value:comment:)è¿™ç§æ–¹å¼å¯æ ¹æ®éœ€è¦æŠŠç¿»è¯‘ä¿¡æ¯ä¿å­˜åœ¨è‡ªå®šä¹‰çš„æ–‡ä»¶ä¸­ï¼Œåœ¨å¤šäººå¼€å‘æ—¶å¯ä»¥å¾ˆå¥½çš„é˜²æ­¢å†²çªã€‚ æ–°å»ºä¸€ä¸ªåä¸ºLocalizable.stringsçš„.stringsæ–‡ä»¶ã€‚ ç±»ä¼¼InfoPlist.stringsæ–‡ä»¶çš„é…ç½®æ–¹å¼ï¼Œé…ç½®ä¸åŒè¯­ç§ã€‚ åœ¨ä»£ç ä¸­éœ€è¦æœ¬åœ°åŒ–çš„å­—ç¬¦ä¸²ä¿®æ”¹ä¸ºç±»ä¼¼NSLocalizedString(&quot;labelName&quot;, comment: &quot;Label&quot;)æˆ–NSLocalizedString(&quot;labelName&quot;, tableName: &quot;andy&quot;, bundle: Bundle.main, value: &quot;&quot;, comment: &quot;Label&quot;) 4 å›¾ç‰‡çš„æœ¬åœ°åŒ–è¿™è¾¹æ‰€è¯´çš„å›¾ç‰‡çš„æœ¬åœ°åŒ–å°±æ˜¯æŒ‡ï¼ŒåŒä¸€ä¸ªåç§°å›¾ç‰‡ï¼Œåœ¨ä¸åŒè¯­ç§ä¸‹æ˜¾ç¤ºä¸åŒå›¾ç‰‡ã€‚ éšæ„æ·»åŠ ä¸€å¼ å›¾ç‰‡åˆ°é¡¹ç›®ï¼Œæ¯”å¦‚Swift_Logo.png é€‰ä¸­ä¸Šé¢çš„å›¾ç‰‡ï¼Œåœ¨å³ä¾§çš„æ–‡ä»¶æ£€æŸ¥å™¨ä¸­ç‚¹å‡»Localizeï¼Œç±»ä¼¼ä¹‹å‰çš„åšæ³•ï¼Œæ·»åŠ æ‰€éœ€çš„ä¸åŒè¯­ç§ã€‚ åœ¨Finderä¸­çš„ä¸åŒè¯­ç§çš„*.lprojç›®å½•ä¸­æ·»åŠ ï¼Œç›¸åŒåå­—ä½†ä¸åŒçš„å›¾ç‰‡ åœ¨ä»£ç ä¸­æ·»åŠ ç±»ä¼¼çš„ä»£ç ï¼š self.imageView.image = UIImage(named: NSLocalizedString(&quot;Swift_Logo&quot;, comment: &quot;&quot;)) æœ€åŽçš„è‹±æ–‡ä¸­çš„çŠ¶æ€ç»“æžœä¸ºï¼š 5 ä¼˜åŒ–æœ¬åœ°åŒ–ä»£ç ä¹¦å†™æ–¹å¼æœ¬åœ°åŒ–æ—¶ï¼ŒNSLocalizedString(&quot;labelName&quot;, comment: &quot;Label&quot;)æˆ–NSLocalizedString(&quot;labelName&quot;, tableName: &quot;andy&quot;, bundle: Bundle.main, value: &quot;&quot;, comment: &quot;Label&quot;)è¿™ä¸¤ç§æ–¹æ³•ä»£ç å†™æ³•æœ‰ç‚¹ç¹çï¼Œå‚è€ƒstackoverflowä¸­ä¸€ä¸ªé—®é¢˜Whatâ€™s NSLocalizedString equivalent in Swift?Askçš„ä¸€ä¸ªç­”æ¡ˆï¼Œæ‰©å±•ä¸€ä¸‹Stringï¼š12345678910111213extension String &#123; var localized: String &#123; return NSLocalizedString(self, tableName: nil, bundle: Bundle.main, value: &quot;&quot;, comment: &quot;&quot;) &#125; func localized(withComment:String) -&gt; String &#123; return NSLocalizedString(self, tableName: nil, bundle: Bundle.main, value: &quot;&quot;, comment: withComment) &#125; func localized(tableName: String) -&gt; String&#123; return NSLocalizedString(self, tableName: tableName, bundle: Bundle.main, value: &quot;&quot;, comment: &quot;&quot;) &#125;&#125; ç„¶åŽï¼ŒåŽŸæœ¬ä¸‹é¢çš„å†™æ³•ï¼š123self.label.text = NSLocalizedString(&quot;labelName&quot;, comment: &quot;Label&quot;)self.label2.text = NSLocalizedString(&quot;labelName&quot;, tableName: &quot;andy&quot;, bundle: Bundle.main, value: &quot;&quot;, comment: &quot;Label&quot;)self.imageView.image = UIImage(named: NSLocalizedString(&quot;Swift_Logo&quot;, comment: &quot;&quot;)) å°±å¯ä»¥å†™æˆï¼š123self.label.text = &quot;labelName&quot;.localizedself.label2.text = &quot;labelName&quot;.localized(tableName: &quot;andy&quot;)self.imageView.image = UIImage(named: &quot;Swift_Logo&quot;.localized) å‚è€ƒï¼šã€iOSã€‘æµ…è°ˆå¤šè¯­è¨€æœ¬åœ°åŒ–(å›½é™…åŒ–)3åˆ†é’Ÿå®žçŽ°iOSè¯­è¨€æœ¬åœ°åŒ–/å›½é™…åŒ–ï¼ˆå›¾æ–‡è¯¦è§£ï¼‰Whatâ€™s NSLocalizedString equivalent in Swift?Ask]]></content>
  </entry>
  <entry>
    <title><![CDATA[Carthageçš„ä½¿ç”¨]]></title>
    <url>%2F2017%2Fcarthage-introduce.html</url>
    <content type="text"><![CDATA[Carthageä¸ŽCocoaPodsçš„ç®€å•æ¯”è¾ƒ CocoaPods çš„ä¼˜åŠ¿ï¼š ä½¿ç”¨æ–¹ä¾¿ï¼Œé™¤ç¼–å†™ Podfile ä»¥å¤–å…¶ä»–å‡ ä¹Žéƒ½æ˜¯è‡ªåŠ¨å®Œæˆï¼› è½¯ä»¶åŒ…æ•°é‡å¤šï¼Œä¸»æµæ”¯æŒï¼› CocoaPods çš„ç¼ºç‚¹ï¼š æ¯æ¬¡æ›´æ–°çŽ¯å¢ƒéƒ½éœ€è¦è¿žæŽ¥åˆ°ä¸­å¿ƒä»“åº“ï¼Œæ¯”è¾ƒè€—æ—¶ï¼› å¼€å‘è€…ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯å¦‚æžœåˆ›å»ºå…¼å®¹ CocoaPods çš„åº“ï¼Œå°±ä¼šç›¸å¯¹ç¹çä¸€äº›ï¼ˆå°½ç®¡æœ‰äº†å‘½ä»¤è¡Œï¼‰ï¼› æ¯æ¬¡å¹²å‡€ç¼–è¯‘éƒ½ä¼šæŠŠæ‰€æœ‰ç¬¬ä¸‰æ–¹åº“éƒ½é‡æ–°ç¼–è¯‘ä¸€æ¬¡ï¼ˆçœ‹ä¼¼å¾ˆæ­£ç¡®ï¼Œç›´åˆ°æˆ‘é‡è§ Carthageâ€¦ï¼‰ Carthage çš„ä¼˜åŠ¿ ç¬¬ä¸‰æ–¹åº“ä¸æ˜¯æ¯ä¸€æ¬¡éƒ½é‡æ–°ç¼–è¯‘ï¼ŒèŠ‚çœæ—¶é—´ï¼› åŽ»ä¸­å¿ƒåŒ–ï¼Œæ²¡æœ‰ä¸­å¿ƒæœåŠ¡å™¨ï¼Œè¿™æ„å‘³ç€æ¯æ¬¡é…ç½®å’Œæ›´æ–°çŽ¯å¢ƒï¼Œåªä¼šåŽ»æ›´æ–°å…·ä½“çš„åº“ï¼Œè€Œä¸ä¼šæœ‰ä¸€ä¸ªå‘ä¸­å¿ƒæœåŠ¡å™¨èŽ·å–æœ€æ–°åº“çš„ç´¢å¼•è¿™ä¹ˆä¸ªè¿‡ç¨‹ï¼ŒèŠ‚çœæ—¶é—´ï¼› ä¸Ž CocoaPods æ— ç¼é›†æˆï¼› ç»“æž„æ ‡å‡†çš„é¡¹ç›®å¤©ç„¶å°±æ˜¯ Carthage åº“ï¼› å®‰è£…Carthagebrew install carthage ä½¿ç”¨Carthage è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚å»ºç«‹æ–°é¡¹ç›® carthageDemo åˆ›å»ºç©ºæ–‡ä»¶Cartfileï¼Œå‘½ä»¤ï¼štouch Cartfile ç¼–è¾‘Cartfileæ–‡ä»¶(xcodeï¼Œæˆ–å…¶å®ƒæ–‡æœ¬ç¼–è¾‘å™¨)ï¼Œä»¥SVProgressHUDä¸ºä¾‹ï¼ŒCartfileæ–‡ä»¶å†…å®¹å¤§è‡´å¦‚ä¸‹ï¼š 1github &quot;SVProgressHUD/SVProgressHUD&quot; ~&gt; 1.0 Cartfileæ–‡ä»¶æ ¼å¼è¯´æ˜Ž: ä¾èµ–æºæœ‰ä¸¤ç§ï¼Œgithubå’Œgitï¼Œå°±æ˜¯å‘Šè¯‰ Carthageåˆ°å“ªé‡Œä¸‹è½½ç¬¬ä¸‰æ–¹åº“ï¼Œä¾‹å­å¦‚ä¸‹ï¼š1234567891011121314151617181920212223# Require version 2.3.1 or latergithub &quot;ReactiveCocoa/ReactiveCocoa&quot; &gt;= 2.3.1# Require version 1.xgithub &quot;Mantle/Mantle&quot; ~&gt; 1.0 # (1.0 or later, but less than 2.0)# Require exactly version 0.4.1github &quot;jspahrsummers/libextobjc&quot; == 0.4.1# Use the latest versiongithub &quot;jspahrsummers/xcconfigs&quot;# Use the branchgithub &quot;jspahrsummers/xcconfigs&quot; &quot;branch&quot;# Use a project from GitHub Enterprisegithub &quot;https://enterprise.local/ghe/desktop/git-error-translations&quot;# Use a project from any arbitrary server, on the &quot;development&quot; branchgit &quot;https://enterprise.local/desktop/git-error-translations2.git&quot; &quot;development&quot;# Use a local projectgit &quot;file:///directory/to/project&quot; &quot;branch&quot; ä»Žä¸Šé¢çš„ä¾‹å­ä¸­æœ‰å¾ˆè¯¦ç»†çš„ç‰ˆæœ¬å·ä¾‹å­ï¼š == 1.0 ä½¿ç”¨1.0ç‰ˆæœ¬ &gt;= 1.0 ä½¿ç”¨1.0æˆ–æ›´é«˜çš„ç‰ˆæœ¬ ~&gt; 1.0 ä½¿ç”¨é«˜äºŽ1.0ä½†ä½ŽäºŽ2.0çš„æœ€æ–°ç‰ˆæœ¬ æ²¡æœ‰çš„æ˜¯ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ branchåç§°/tagåç§°/commitåç§° ä½¿ç”¨ç‰¹å®šåˆ†æ”¯/æ ‡ç­¾/æäº¤ç‰ˆæœ¬ è¿è¡ŒCarthage carthage update [--platform iOS]--platform iOSæ˜¯é’ˆå¯¹iOSçš„ï¼Œå¯é€‰é¡¹ã€‚åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ä¼šç”Ÿæˆä¸€ä¸ªCartfile.resolvedæ–‡ä»¶å’ŒCarthageæ–‡ä»¶å¤¹ï¼ŒCarthageæ–‡ä»¶å¤¹ä¸­çš„Buildç›®å½•ä¸‹æœ‰ç¼–è¯‘å¥½çš„frameworkæ–‡ä»¶ï¼ŒCheckoutsç›®å½•ç¬¬ä¸‰åº“çš„æºæ–‡ä»¶ã€‚ æŠŠåº“æ·»åŠ åˆ°é¡¹ç›®ä¸­ æŠŠç¼–è¯‘å¥½çš„frameworkæ–‡ä»¶æ‹–åŠ¨åˆ°Linked Frameworks and Librariesæˆ–è€…ç‚¹å‡»+é€‰æ‹©ã€‚ åœ¨Build Phasesä¸­æ·»åŠ ä¸€ä¸ªRun Scriptã€‚å‘½ä»¤ä¸º /usr/local/bin/carthage copy-frameworksã€‚Input Filesä¸‹çš„æ¡ç›®ä¸º$(SRCROOT)/Carthage/Build/iOS/SVProgressHUD.frameworkã€‚å…·ä½“æ“ä½œå¦‚ä¸‹å›¾ï¼š ç¼–è¯‘å°±å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“äº† å…¶ä»– æ–°åŠ åº“æ—¶åœ¨Cartfileæ–‡ä»¶ä¸­æ·»åŠ åŽï¼Œç„¶åŽæ“ä½œç±»ä¼¼ä¸Šé¢çš„ æ›´æ–°æŒ‡å®šåº“ï¼šcarthage update SVProgressHUD --platform iOS å‚è€ƒï¼šCarthageçš„å®‰è£…å’Œä½¿ç”¨ã€è¯‘ã€‘Carthageçš„ä½¿ç”¨Carthage åˆæŽ¢ï¼šå››å¤§ä¼˜åŠ¿ä¸Žå››å¤§åŠ£åŠ¿Carthageå®˜æ–¹åœ°å€]]></content>
  </entry>
  <entry>
    <title><![CDATA[OCåŸºç¡€å­¦ä¹ 7ï¼šå†…å­˜ç®¡ç†]]></title>
    <url>%2F2017%2Foc-basic-7.html</url>
    <content type="text"><![CDATA[1 å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ è¯žç”Ÿï¼ˆé€šè¿‡allocæˆ–newæ–¹æ³•å®žçŽ°ï¼‰ -&gt; ç”Ÿå­˜ï¼ˆæŽ¥æ”¶æ¶ˆæ¯å¹¶æ‰§è¡Œæ“ä½œï¼‰ -&gt; äº¤å‹ï¼ˆé€šè¿‡å¤åˆä»¥åŠå‘æ–¹æ³•ä¼ é€’å‚æ•°ï¼‰ -&gt; æ­»åŽ»ï¼ˆè¢«é‡Šæ”¾æŽ‰ï¼‰ å¼•ç”¨è®¡æ•°(reference counting) / ä¿ç•™è®¡æ•°(retain counting) alloc, new, copy: åˆ›å»ºå¯¹è±¡ï¼Œä¿ç•™è®¡æ•°è¢«è®¾ç½®ä¸º1 retain: ä¿ç•™è®¡æ•°åŠ 1ã€‚å¦‚[[car retain] setTire: tire atIndex:2];è¡¨ç¤ºè¦æ±‚carå¯¹è±¡å°†å…¶ä¿ç•™è®¡æ•°çš„å€¼åŠ 1å¹¶æ‰§è¡ŒsetTireæ“ä½œã€‚ release: ä¿ç•™è®¡æ•°å‡1 dealloc: ä¿ç•™è®¡æ•°å½’0æ—¶è‡ªåŠ¨è°ƒç”¨ retainCount: èŽ·å¾—å¯¹è±¡ä¿ç•™è®¡æ•°å½“å‰å€¼1234567891011121314151617181920212223242526272829303132333435363738394041424344#import &lt;Foundation/Foundation.h&gt;@interface RetainTracker : NSObject@end@implementation RetainTracker- (id) init&#123; if (self = [super init]) &#123; NSLog(@&quot;init: Retain count of %lu .&quot;, [self retainCount]); &#125; return self;&#125; // init- (void)dealloc&#123; NSLog(@&quot;dealloc called. Bye Bye.&quot;); [super dealloc];&#125; // dealloc@end // RetainTrackerint main(int argc, const char * argv[]) &#123; RetainTracker *a = [RetainTracker new]; [a retain]; NSLog(@&quot;%lu&quot;, [a retainCount]); [a retain]; NSLog(@&quot;%lu&quot;, [a retainCount]); [a release]; NSLog(@&quot;%lu&quot;, [a retainCount]); [a release]; NSLog(@&quot;%lu&quot;, [a retainCount]); [a release]; NSLog(@&quot;%lu&quot;, [a retainCount]); // ä¸ºä»€ä¹ˆæ­¤å¤„æ˜¯ 1 ä¸æ˜¯ 0å—ï¼Ÿ return 0;&#125; å¯¹è±¡æ‰€æœ‰æƒ(object ownership)å¦‚æžœä¸€ä¸ªå¯¹è±¡å†…æœ‰æŒ‡å‘å…¶ä»–å¯¹è±¡çš„å®žä¾‹å˜é‡ï¼Œåˆ™ç§° è¯¥å¯¹è±¡æ‹¥æœ‰è¿™äº›å¯¹è±¡ã€‚ è®¿é—®æ–¹æ³•ä¸­çš„ä¿ç•™å’Œé‡Šæ”¾æ‰€æœ‰å¯¹è±¡æ”¾å…¥æ± ä¸­ @autoreleasepool/NSAutoreleasePoolï¼š è‡ªåŠ¨é‡Šæ”¾æ±  NSObjectæä¾›autoreleaseæ–¹æ³•ï¼š- (id) autorelease; 2 Cocoaçš„å†…å­˜ç®¡ç†è§„åˆ™ 3 å¼‚å¸¸ä¸Žå¼‚å¸¸æœ‰å…³çš„å…³é”®å­— @try @catch @finally @throw æ•æ‰ä¸åŒç±»åž‹çš„å¼‚å¸¸123456@try &#123;&#125; @catch (MyCustomException *custom) &#123;&#125; @catch (NSException *exception) &#123;&#125; @catch (id value) &#123;&#125; @finally &#123;&#125; æŠ›å‡ºå¼‚å¸¸æŠ›å‡ºå¼‚å¸¸çš„ä¸¤ç§æ–¹å¼ï¼š @throwå¼‚å¸¸å å‘æŸä¸ªNSExceptionå¯¹è±¡å‘é€raiseæ¶ˆæ¯1234NSException *theException = [NSException exceptionWithName: ...];@throw theException;[theException raise]; åŒºåˆ«ï¼šraiseåªå¯¹NSExceptionå¯¹è±¡æœ‰æ•ˆï¼Œ@throwå¼‚å¸¸åå¯ç”¨åœ¨å…¶ä»–å¯¹è±¡ä¸Šã€‚ å¼‚å¸¸ä¹Ÿéœ€è¦å†…å­˜ç®¡ç†å¼‚å¸¸å’Œè‡ªåŠ¨é‡Šæ”¾æ± ]]></content>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 26 ä½¿ç”¨æœ¬åœ°ç”¨æˆ·é€šçŸ¥]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-26.html</url>
    <content type="text"><![CDATA[iOS 10 ä¹‹å‰ç”¨æˆ·é€šçŸ¥ç›¸å¯¹è€Œè¨€æ˜¯ç®€å•çš„ï¼ŒiOS 10è®©ç”¨æˆ·é€šçŸ¥æ›´åŠ ä¸°å¯Œäº†ï¼Œå¯ä»¥æœ‰é™æ€å›¾ç‰‡ï¼ŒåŠ¨æ€gifï¼Œè§†é¢‘ï¼ŒéŸ³é¢‘ç­‰ã€‚ ç”¨æˆ·é€šçŸ¥å¯ä»¥å‡ºçŽ°åœ¨é€šçŸ¥ä¸­å¿ƒï¼Œä¸»å±ï¼Œé”å±æ—¶ï¼Œå½“ç”¨æˆ·é”™è¿‡äº†ç”¨æˆ·é€šçŸ¥æ—¶ï¼Œå¯ä»¥åœ¨é€šçŸ¥ä¸­å¿ƒæŸ¥çœ‹ã€‚ ç”¨æˆ·é€šçŸ¥åˆ†ä¸ºä¸¤ç±»ï¼š æœ¬åœ°é€šçŸ¥ã€‚ æ˜¯é€šè¿‡åº”ç”¨æœ¬èº«å’Œç”¨æˆ·è®¾å¤‡æœ¬èº«è§¦å‘çš„ã€‚æ¯”å¦‚ï¼šåŸºäºŽç”¨æˆ·ä½ç½®çš„appï¼Œåœ¨ç”¨æˆ·è¿›å…¥æŸä¸ªç‰¹æ®ŠåŒºåŸŸå‘é€é€šçŸ¥ï¼›to-do listçš„appåœ¨æŸäº›ç‰¹å®šæ—¶é—´å‘é€é€šçŸ¥ã€‚ è¿œç¨‹é€šçŸ¥ã€‚ æ˜¯è¿œç¨‹æœåŠ¡å™¨ç«¯é¦–å…ˆå‘è‹¹æžœæŽ¨é€æœåŠ¡å™¨ï¼ˆApple Push Notification Service ï¼ŒAPNSï¼‰å‘é€ï¼Œç„¶åŽå†ç»è¿‡APNSæŽ¨é€é€šçŸ¥åˆ°ç”¨æˆ·è®¾å¤‡ã€‚ è¿™ä¸€ç¯‡åªè®¨è®ºæœ¬åœ°é€šçŸ¥ã€‚ ä¸‰ç§ä¸åŒè§¦å‘çš„æœ¬åœ°é€šçŸ¥ï¼š ç‰¹å®šæ•°é‡çš„æ—¶é—´ã€‚ æ¯”å¦‚æ˜¯10åˆ†é’ŸåŽã€‚ ç‰¹å®šæ—¥æœŸå’Œæ—¶é—´ç‚¹ã€‚ ç‰¹å®šä½ç½®ã€‚ è¯¢é—®ç”¨æˆ·æŽˆæƒå‘ç”¨æˆ·å‘é€é€šçŸ¥æ˜¯è¦å¾—åˆ°ç”¨æˆ·å…è®¸çš„ã€‚ åœ¨AppDelegate.swiftä¸­æ·»åŠ  import UserNotifications åœ¨application(_:didFinishLaunchingWithOptions:)æ–¹æ³•ä¸­æ·»åŠ æŽˆæƒ12345678UNUserNotificationCenter.current().requestAuthorization(options: [.alert, .sound, .badge], completionHandler: &#123; (granted, error) in if granted &#123; print(&quot;User notifications are allowed.&quot;) &#125; else &#123; print(&quot;User notifications are not allowed.&quot;) &#125;&#125;) åˆ›å»ºé€šçŸ¥é€šçŸ¥çš„ä¸€èˆ¬ç»“æž„ï¼š é€šçŸ¥ç”¨UNMutableNotificationContentç±»æ¥è¡¨ç¤ºã€‚ åœ¨RestaurantTableViewControllerä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³• 12345678910111213141516171819202122func prepareNotification() &#123; // Make sure the restaurant array is not empty if restaurants.count &lt;= 0 &#123; return &#125; // 1 let randomNum = Int(arc4random_uniform(UInt32(restaurants.count))) let suggestedRestaurant = restaurants[randomNum] // 2 let content = UNMutableNotificationContent() content.title = &quot;Restaurant Recommendation&quot; content.subtitle = &quot;Try new food today&quot; content.body = &quot;I recommend you to check out \(suggestedRestaurant.name!).The restaurant is one of your favorites. It is located at \(suggestedRestaurant.location!). Would you like to give it a try?&quot; content.sound = UNNotificationSound.default() // 3 let trigger = UNTimeIntervalNotificationTrigger(timeInterval: 10, repeats: false) let request = UNNotificationRequest(identifier: &quot;foodpin.restaurantSuggestion&quot;, content: content, trigger: trigger) // Schedule the notification UNUserNotificationCenter.current().add(request, withCompletionHandler: nil) &#125; 1 èŽ·å¾—ä¸€ä¸ªéšæœºçš„restaurant 2 é€šè¿‡UNMutableNotificationContentèŽ·å¾—ä¸€ä¸ªé€šçŸ¥ï¼Œé…ç½®å‚æ•°ï¼Œsoundè¡¨ç¤ºéœ€è¦é€šçŸ¥å£°éŸ³ã€‚ 3 UNTimeIntervalNotificationTriggeræ˜¯ä¸€ä¸ªæ—¶é—´è§¦å‘ï¼Œä¸ºäº†å¥½æµ‹è¯•ï¼Œè¡¨ç¤º10såŽé€šçŸ¥ä¸€æ¬¡ã€‚ åœ¨viewDidLoadä¸­å®žçŽ°ä¸Šé¢å‡½æ•°ã€‚prepareNotification() çŽ°åœ¨è¿è¡Œï¼Œæ³¨æ„åœ¨åº”ç”¨å†…æ˜¯ä¸èƒ½æŽ¥å—æœ¬åº”ç”¨é€šçŸ¥ï¼Œæ‰€ä»¥è¿è¡ŒåŽç«‹å³è¿›å…¥ä¸»å±æˆ–é”å±ã€‚é€šçŸ¥æœ¬èº«æœ‰é«˜åº¦é™åˆ¶ï¼Œå†…å®¹è¿‡é•¿ä¼šä¸æ˜¾ç¤ºï¼Œåªè¦å‘ä¸‹æ»‘åŠ¨å°±å¯ä»¥æ˜¾ç¤ºå®Œæ•´ã€‚ å‘é€šçŸ¥ä¸­æ·»åŠ å›¾ç‰‡å›¾ç‰‡ç­‰å¯Œæ–‡æœ¬å†…å®¹é€šè¿‡UNMutableNotificationContentçš„attachmentså±žæ€§æ·»åŠ ï¼Œattachmentså±žæ€§æ˜¯UNNotificationAttachmentçš„æ•°ç»„ã€‚UNNotificationAttachmentå¯ä»¥æ˜¯å›¾ç‰‡ã€éŸ³é¢‘ã€éŸ³æ•ˆã€è§†é¢‘æ–‡ä»¶ã€‚ åœ¨prepareNotificationä¸­çš„è§¦å‘ä¹‹å‰æ·»åŠ ä»£ç ï¼š 123456789101112// 1let tempDirURL = URL(fileURLWithPath: NSTemporaryDirectory(), isDirectory: true)let tempFileURL = tempDirURL.appendingPathComponent(&quot;suggested-restaurant.jpg&quot;)if let image = UIImage(data: suggestedRestaurant.image! as Data) &#123; // 2 try? UIImageJPEGRepresentation(image, 1.0)?.write(to: tempFileURL) if let restaurantImage = try? UNNotificationAttachment(identifier: &quot;restaurantImage&quot;, url: tempFileURL, options: nil) &#123; content.attachments = [restaurantImage] &#125;&#125; 1 ç”±äºŽä½¿ç”¨Core Dataï¼Œå›¾ç‰‡ä»¥NSDataå½¢å¼å­˜å‚¨äº†ï¼Œæ‰€ä»¥ä½¿ç”¨NSTemporaryDirectoryæ¥ç”Ÿæˆä¸´æ—¶ç›®å½•å­˜å‚¨ä¸´æ—¶å›¾ç‰‡æ–‡ä»¶ 2 UIImageJPEGRepresentationç”¨æ¥ç”Ÿæˆjpgå›¾ç‰‡æ–‡ä»¶ è¿è¡ŒæŸ¥çœ‹ï¼ŒåŒæ ·å‘ä¸‹æ»‘åŠ¨å¯æŸ¥çœ‹å®Œæ•´ã€‚ å’Œé€šçŸ¥çš„äº¤äº’ä¹‹å‰åªè¦ç‚¹å‡»é€šçŸ¥è¿›å…¥åº”ç”¨çš„äº¤äº’ï¼Œè¿™æ˜¯é»˜è®¤çš„äº¤äº’ã€‚ åœ¨prepareNotificationä¸­çš„è§¦å‘ä¹‹å‰æ·»åŠ ä»£ç ï¼š 123456789101112 // 1let categoryIdentifer = &quot;foodpin.restaurantaction&quot;// 3let makeReservationAction = UNNotificationAction(identifier: &quot;foodpin.makeReservation&quot;, title: &quot;Reserve a table&quot;, options: [.foreground])let cancelAction = UNNotificationAction(identifier: &quot;foodpin.cancel&quot;, title: &quot;Later&quot;, options: [])// 4let category = UNNotificationCategory(identifier: categoryIdentifer, actions:[makeReservationAction, cancelAction], intentIdentifiers: [], options: [])// 5UNUserNotificationCenter.current().setNotificationCategories([category])// 2 content.categoryIdentifier = categoryIdentifer 1,2 categoryIdentifieræ˜¯è®©é€šçŸ¥å’Œcategoryå…³è”èµ·æ¥ 3 UNNotificationActionæœ‰ç‚¹ç±»ä¼¼UIAlertActionï¼Œoptions: [.foreground]è¡¨ç¤ºè®©åº”ç”¨åˆ°å‰å°ï¼Œå°±æ˜¯å¯åŠ¨åº”ç”¨ 4 UNNotificationCategoryæœ‰ç‚¹ç±»ä¼¼UIAlertController 5 æŠŠUNNotificationCategoryæ³¨å†Œåˆ°ç”¨æˆ·ä¸­å¿ƒ å¤„ç†Actionsä¸Šé¢çš„options: [.foreground]åªæ˜¯å¯åŠ¨äº†åº”ç”¨ï¼Œæ²¡æœ‰å®žçŽ°å…·ä½“æ“ä½œã€‚UNUserNotificationCenterDelegateä¸­çš„userNotificationCenter(_:didReceive:withCompletionHandler:)æ–¹æ³•åœ¨UNNotificationActionè¢«é€‰æ‹©æ—¶è°ƒç”¨ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•å†…éƒ¨å¯å®žçŽ°å…·ä½“æ“ä½œã€‚ è®©AppDelegateç¬¦åˆåè®®UNUserNotificationCenterDelegate å®žçŽ°userNotificationCenter(_:didReceive:withCompletionHandler:) 123456789101112131415161718func userNotificationCenter(_ center: UNUserNotificationCenter, didReceive response: UNNotificationResponse, withCompletionHandler completionHandler: @escaping () -&gt; Void) &#123; // 1 if response.actionIdentifier == &quot;foodpin.makeReservation&quot; &#123; print(&quot;Make reservation...&quot;) // 2 if let phone = response.notification.request.content.userInfo[&quot;phone&quot;] &#123; let telURL = &quot;tel://\(phone)&quot; if let url = URL(string: telURL) &#123; if UIApplication.shared.canOpenURL(url) &#123; print(&quot;calling \(telURL)&quot;) // 3 UIApplication.shared.open(url) &#125; &#125; &#125; &#125; completionHandler()&#125; 1 å¯¹åº”ä¹‹å‰åˆ›å»ºUNNotificationActionæ—¶çš„identifierã€‚ 2 response.notification.request.contentå¯¹åº”ä¹‹å‰åˆ›å»ºé€šçŸ¥prepareNotificationå‡½æ•°ä¸­çš„UNMutableNotificationContentï¼ŒuserInfoå±žæ€§å¯ç”¨æ¥å­˜å‚¨é€šçŸ¥æƒ³ä¼ é€’çš„æ•°æ®ã€‚æ¯”å¦‚åœ¨prepareNotificationå‡½æ•°ä¸­æ·»åŠ content.userInfo = [&quot;phone&quot;: suggestedRestaurant.phone!]ï¼Œè¿™è¾¹å°±å¯èŽ·å¾—ã€‚ 3 æ‹¨æ‰“ç”µè¯ã€‚ åœ¨content.userInfo = [&quot;phone&quot;: suggestedRestaurant.phone!]ä¸­æ·»åŠ UNUserNotificationCenter.current().delegate = selfã€‚ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 25 ä½¿ç”¨3D Touch]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-25.html</url>
    <content type="text"><![CDATA[æŽ¥ç€ä¸Šä¸€ç¯‡ å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 24 ä½¿ç”¨TestFlightè¿›è¡ŒBetaæµ‹è¯• ï¼Œè¿™ä¸€ç¯‡å­¦ä¹ ä½¿ç”¨3D Touchã€‚ è‡ªä»ŽiPhone 6så’ŒiPhone 6s Pluså¼€å§‹ï¼ŒAppleä»‹ç»äº†ä¸€ç§æ–°çš„äº¤äº’æ–¹å¼å°±æ˜¯3D Touchã€‚è¿™æ–°çš„ç‰¹æ€§éœ€è¦ç¡¬ä»¶çš„æ”¯æŒï¼Œæ˜¯iPhoneå±å¹•ä¸ä»…èƒ½æ„Ÿåº”åˆ°è§¦æ‘¸ï¼Œè¿˜èƒ½æ„Ÿåº”åˆ°åŽ‹åŠ›ã€‚ çŽ°åœ¨3D Touchä¸»è¦æœ‰ä¸‰ç±»äº¤äº’æ–¹å¼ï¼š Quick Action ï¼šç‚¹å‡»åº”ç”¨å›¾æ ‡åŽçš„å¿«æ·æ“ä½œã€‚ðŸ‘‡æ˜¯ä¾‹å­ï¼š Peek(preview) å’Œ Pop(commit)ä¸€èˆ¬æ˜¯ä¸€èµ·çš„ ï¼šä¸»è¦åº”ç”¨äºŽappä¸­å¿«é€ŸæŸ¥çœ‹è¯¦ç»†å†…å®¹ã€‚è‡ªå¸¦çš„Photos appæ˜¯å¾ˆå¥½çš„ä¾‹å­ï¼š å¾®ä¿¡å…¬ä¼—å·ä¹Ÿæ˜¯ä¸é”™çš„ä¾‹å­ï¼š Home Screen Quick Action Quick Actionåˆ†ä¸¤ç§ï¼š é™æ€çš„ï¼šåœ¨Info.plistä¸­ç¼–å†™ï¼Œå›ºå®šä¸å˜çš„ã€‚ åŠ¨æ€çš„ï¼šåœ¨ä»£ç ä¸­åˆ›å»ºå’Œæ›´æ–°ã€‚ä»¥è‡ªå¸¦çš„News appä¸ºä¾‹ï¼š ä¸åŒçš„é¢‘é“æ˜¯éšç€æ—¶é—´è€Œå˜åŒ–çš„ã€‚ é™æ€çš„Quick Action é™æ€çš„Quick Actionåªéœ€è¦åœ¨Info.plistä¸­é…ç½®UIApplicationShortcutItemsæ•°ç»„å°±å¯ä»¥äº†ï¼Œæ•°ç»„çš„æ¯ä¸€é¡¹ï¼ˆå­—å…¸ï¼‰å°±æ˜¯ä¸€ä¸ªActionï¼Œæ¯ä¸€ä¸ªActionæœ‰6ä¸ªç±»åž‹çš„å­—æ®µé…ç½®ï¼š UIApplicationShortcutItemType(å¿…é¡») UIApplicationShortcutItemTitle(å¿…é¡») UIApplicationShortcutItemSubtitle(å¯é€‰) UIApplicationShortcutItemIconType(å¯é€‰) UIApplicationShortcutItemIconFile(å¯é€‰) UIApplicationShortcutItemUserInfo(å¯é€‰)å¦‚æžœæ˜¯ä¸‹é¢é…ç½®ï¼š ç»“æžœå°±æ˜¯ï¼š åŠ¨æ€çš„Quick ActionåŠ¨æ€çš„çš„Quick Actioné…ç½®åªè¦åœ¨AppDelegate.swiftçš„application(:didFinishLaunchingWithOptions)ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç å³å¯ï¼š 12let shortcutItem = UIApplicationShortcutItem(type: &quot;com.andyron.NewRestaurant&quot;, localizedTitle: &quot;New Restaurant&quot;, localizedSubtitle: nil, icon: UIApplicationShortcutIcon(type: .add), userInfo: nil)UIApplication.shared.shortcutItems = [shortcutItem] ä½¿ç”¨åŠ¨æ€çš„Quick Actioné…ç½®æˆ‘çš„FoodPinåº”ç”¨ç”±äºŽæˆ‘ä¹‹å‰ä½¿ç”¨UIPageViewControlleråˆ›å»ºäº†å¼€å§‹ç»“æŸé¡µé¢ï¼Œå¦‚æžœåœ¨åœ¨AppDelegate.swiftçš„application(:didFinishLaunchingWithOptions)ä¸­æ·»åŠ åŠ¨æ€çš„Quick Actionå°±ä¼šå‡ºçŽ°ç›´æŽ¥è·³è¿‡ä»‹ç»é¡µé¢çš„æƒ…å†µï¼Œæ‰€ä»¥è¦åœ¨çœ‹å®Œç»“æŸä¹Ÿä¹‹åŽå†æ·»åŠ Quick Actionã€‚ ä¸‹è½½å›¾æ ‡ï¼Œæ‹–è¿›Assets.xcassets åœ¨WalkthroughContentViewControllerçš„nextButtonTappedæ–¹æ³•çš„case 2: é‡Œæ·»åŠ 3ä¸ªActionï¼š 123456789101112// 1if traitCollection.forceTouchCapability == UIForceTouchCapability.available &#123; let bundleIdentifier = Bundle.main.bundleIdentifier // 2 let shortcutItem1 = UIApplicationShortcutItem(type: &quot;\(bundleIdentifier).OpenFavorites&quot;, localizedTitle: &quot;Show Favorites&quot;, localizedSubtitle: nil, icon: UIApplicationShortcutIcon(templateImageName: &quot;favortie-shortcut&quot;), userInfo: nil) let shortcutItem2 = UIApplicationShortcutItem(type: &quot;\(bundleIdentifier).OpenDiscover&quot;, localizedTitle: &quot;Discover restaurants&quot;, localizedSubtitle: nil, icon: UIApplicationShortcutIcon(templateImageName: &quot;discover-shortcut&quot;), userInfo: nil) let shortcutItem3 = UIApplicationShortcutItem(type: &quot;\(bundleIdentifier).NewRestaurant&quot;, localizedTitle: &quot;New Restaurant&quot;, localizedSubtitle: nil, icon: UIApplicationShortcutIcon(type: .add), userInfo: nil) // 3 UIApplication.shared.shortcutItems = [shortcutItem1, shortcutItem2, shortcutItem3]&#125; 1 åˆ¤æ–­è®¾å¤‡æ˜¯å¦æ”¯æŒ3D Touch 2 UIApplicationShortcutIconå¯ä»¥ä½¿ç”¨ç³»ç»Ÿçš„å›¾æ ‡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¤–éƒ¨å›¾æ ‡ 3 shortcutItemsæ•°ç»„é¡ºåºå¯¹åº”ä»Žé è¿‘å›¾æ ‡å¼€å§‹å‘ä¸Šæˆ–å‘ä¸‹æ˜¾ç¤º å®žçŽ°Quick Actionçš„å…·ä½“è·³è½¬åŠ¨ä½œUIApplicationDelegateåè®®ä¸­çš„application(_:performActionFor:completionHandler:)æ–¹æ³•ä¼šåœ¨Quick Actionè¢«ç‚¹å‡»åŽè°ƒç”¨ã€‚ åœ¨AppDelegate.swiftæ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªQuickActionæžšä¸¾ã€‚åˆ—ä¸¾å‡ºquick actionç›¸å…³åŠ¨ä½œã€‚ 123456789101112enum QuickAction: String &#123; case OpenFavorites = &quot;OpenFavorites&quot; case OpenDiscover = &quot;OpenDiscover&quot; case NewRestaurant = &quot;NewRestaurant&quot; init?(fullIdentifier: String) &#123; guard let shortcutIdentifier = fullIdentifier.components(separatedBy: &quot;.&quot;).last else &#123; return nil &#125; self.init(rawValue: shortcutIdentifier) &#125;&#125; åœ¨AppDelegateä¸­å®žçŽ°application(_:performActionFor:completionHandler:)æ–¹æ³•ï¼š 12345678910111213141516171819202122232425262728func application(_ application: UIApplication, performActionFor shortcutItem: UIApplicationShortcutItem, completionHandler: @escaping (Bool) -&gt; Void) &#123; completionHandler(handleQuickAction(shortcutItem: shortcutItem))&#125;private func handleQuickAction(shortcutItem: UIApplicationShortcutItem) -&gt; Bool &#123; let shortcutType = shortcutItem.type guard let shortcutIdentifier = QuickAction(fullIdentifier: shortcutType) else &#123; return false &#125; guard let tabBarController = window?.rootViewController as? UITabBarController else &#123; return false &#125; switch shortcutIdentifier &#123; case .OpenFavorites: tabBarController.selectedIndex = 0 case .OpenDiscover: tabBarController.selectedIndex = 1 case .NewRestaurant: if let navController = tabBarController.viewControllers?[0] &#123; let restaurantTableViewController = navController.childViewControllers[0] restaurantTableViewController.performSegue(withIdentifier: &quot;addRestaurant&quot;, sender: restaurantTableViewController) &#125; else &#123; return false &#125; &#125; return false&#125; Peek å’Œ Pop åœ¨RestaurantTableViewControllerçš„viewDidLoadæ–¹æ³•ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ã€‚ä½¿ç”¨UIViewControllerä¸­çš„registerForPreviewingæ–¹æ³•æ³¨å†Œä½¿ç”¨peekå’Œpopã€‚ 1234// å¦‚æžœ3D Touchå¯ä»¥ç”¨ï¼Œå°±æ³¨å†Œæœ¬æŽ§åˆ¶å™¨å¯ä»¥peekå’Œpopif traitCollection.forceTouchCapability == .available &#123; registerForPreviewing(with: self as! UIViewControllerPreviewingDelegate, sourceView: view)&#125; è®©RestaurantTableViewControllerç¬¦åˆUIViewControllerPreviewingDelegateåè®®ï¼š class RestaurantTableViewController: UITableViewController, NSFetchedResultsControllerDelegate, UISearchResultsUpdating, UIViewControllerPreviewingDelegate { å®žçŽ°UIViewControllerPreviewingDelegateåè®®çš„æ–¹æ³•ï¼š 1234567891011121314151617181920212223242526272829// å½“æŒ‰åŽ‹æ—¶è°ƒç”¨ï¼ˆpeekï¼‰func previewingContext(_ previewingContext: UIViewControllerPreviewing, viewControllerForLocation location: CGPoint) -&gt; UIViewController? &#123; // 1 guard let indexPath = tableView.indexPathForRow(at: location) else &#123; return nil &#125; // 2 guard let cell = tableView.cellForRow(at: indexPath) else &#123; return nil &#125; // 3 guard let restaurantDetailViewController = storyboard?.instantiateViewController(withIdentifier: &quot;RestaurantDetailViewController&quot;) as? RestaurantDetailViewController else &#123; return nil &#125; let selectedRestaurant = restaurants[indexPath.row] restaurantDetailViewController.restaurant = selectedRestaurant // 4 restaurantDetailViewController.preferredContentSize = CGSize(width: 0.0, height: 450.0) previewingContext.sourceRect = cell.frame return restaurantDetailViewController&#125;// popæ—¶è°ƒç”¨func previewingContext(_ previewingContext: UIViewControllerPreviewing, commit viewControllerToCommit: UIViewController) &#123; show(viewControllerToCommit, sender: self)&#125; 1 é€šè¿‡æŒ‰åŽ‹çš„ä½ç½®èŽ·å¾—indexPath 2 é€šè¿‡indexPathèŽ·å¾—cell 3 é€šè¿‡æŽ§åˆ¶å™¨çš„Storyboard IDèŽ·å¾—æŽ§åˆ¶å™¨ï¼Œä¹‹å‰å¦‚æžœæ²¡æœ‰å¡«å†™Storyboard IDï¼ŒçŽ°åœ¨ä¹Ÿå¯å¡«å†™åˆé€‚Storyboard IDã€‚ 4 ç»™peekçš„é¢„è§ˆé¡µé¢ä¸€ä¸ªé«˜åº¦é™åˆ¶ï¼Œéžå¿…é¡»ã€‚ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 24 ä½¿ç”¨TestFlightè¿›è¡ŒBetaæµ‹è¯•]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-24.html</url>
    <content type="text"><![CDATA[Betaæµ‹è¯•æ˜¯åœ¨äº§å“å‘å¸ƒä¹‹å‰æ‰€è¿›è¡Œçš„è½¯ä»¶æµ‹è¯•æ´»åŠ¨ï¼Œå®ƒæ˜¯æŠ€æœ¯æµ‹è¯•çš„æœ€åŽä¸€ä¸ªé˜¶æ®µï¼Œé€šè¿‡äº†éªŒæ”¶æµ‹è¯•ï¼Œäº§å“å°±ä¼šè¿›å…¥å‘å¸ƒé˜¶æ®µã€‚ åœ¨iOS 8 æ—¶ï¼ŒAppleå‘å¸ƒTestFlightç”¨äºŽBetaæµ‹è¯•ã€‚ä¹‹å‰TestFlightä¸€ç›´æ˜¯ç‹¬ç«‹ç”¨æˆ·mobile appæµ‹è¯•çš„mobileå¹³å°ï¼Œåœ¨2014å¹´2æœˆï¼ŒAppleæ”¶è´­çš„TestFlightæ¯å…¬å¸Burstlyã€‚çŽ°åœ¨TestFlightå·²ç»é›†æˆåˆ°iTunes Connectä¸­ï¼Œå…è®¸å¼€å‘åªé€šè¿‡é‚®ä»¶åœ°å€é‚€è¯·Betaæµ‹è¯•ç”¨æˆ·ã€‚ åœ¨iTunes Connectä¸­åˆ›å»ºä¸€ä¸ªApp Record iTunes Connect æ˜¯ä¸ºiOSå¼€å‘è€…æä¾›åœ¨App Storeç®¡ç†é”€å”®ä»–ä»¬appsçš„Webåº”ç”¨å·¥å…·ã€‚ åœ¨ä¸Šä¼ appä¹‹å‰ï¼Œå¿…é¡»è¦åœ¨ iTunes Connectä¸­æœ‰App Recordã€‚ éœ€è¦æä¾›ä¸‹åˆ—ä¿¡æ¯ï¼š Platform App name Primary language Bundle ID SKU åˆ›å»ºæˆæžœåŽä¼šè·³åˆ°ä¸‹ä¸€ä¸ªé¡µé¢ Appä¿¡æ¯è¿™ä¸€æ­¥ä¸»è¦é€‰æ‹©ä¸€ä¸‹Appåˆ†ç±»çš„ç±»åˆ«ã€‚ ä»·æ ¼ä¸Žé”€å”®èŒƒå›´ å‡†å¤‡æäº¤è¿™ä¸€æ­¥ä¸»è¦æ·»åŠ æˆªå›¾ã€appæè¿°ã€appå›¾æ ‡ã€è”ç³»ä¿¡æ¯ç­‰ä¿¡æ¯ é¢„è§ˆå›¾å’Œæˆªå›¾æé«˜è‡³å°‘ä¸€å¼ 5.5 è‹±å¯¸çš„æˆªå›¾(1242x2208 pixels) ï¼ŒiTunes Connectä¼šè‡ªåŠ¨ç”Ÿæˆå…¶ä»–å±å¹•å°ºå¯¸çš„å›¾ç‰‡ã€‚è¯¦ç»†å¯å‚è€ƒiTunes Connect Developer Guide æˆ– iTunes Connect å¼€å‘äººå‘˜å¸®åŠ©ï¼ˆä¸­æ–‡ï¼‰ appæè¿°å¡«å†™ä¸€äº›ç›¸å…³æè¿°ï¼Œå…³é”®è¯ï¼ˆä»¥é€—å·åˆ†éš”ï¼‰ï¼ŒURLç­‰ App ç»¼åˆä¿¡æ¯ è¿™è¾¹çš„App Store å›¾æ ‡è¦æ±‚æ˜¯1024x1024 pixelsï¼Œä¸èƒ½åŒ…å«éšè—å…ƒç´ ã€‚ App å®¡æ ¸ä¿¡æ¯ ç‰ˆæœ¬å‘å¸ƒ æ›´æ–°Build stringå›žåˆ°Xcodeï¼Œç¡®è®¤ç‰ˆæœ¬æ•°å­—ä¸ŽiTunes Connectä¸­ä¸€è‡´ã€‚ å‡†å¤‡App Iconå’Œå¯åŠ¨é¡µå›¾ç‰‡ åˆ©ç”¨ç±»ä¼¼å›¾æ ‡å·¥åœºè¿™ç§ç§»åŠ¨åº”ç”¨å›¾æ ‡ç”Ÿæˆå·¥å…·ï¼Œå¯ç”Ÿæˆä¸€äº›å¤§å°çš„å›¾æ ‡ã€‚ å¯ä»¥åœ¨Finderä¸­ç›´æŽ¥å¤åˆ¶AppIcon.appiconsetç›®å½•æ›¿ä»£å³å¯ã€‚ åœ¨é»˜äººçš„å¯åŠ¨å¼€å§‹é¡µé¢LaunchScreen.storyboardä¸­ï¼Œæ·»åŠ ä¸€ä¸ªå›¾ç‰‡ã€‚ æ‰“åŒ…å’ŒéªŒè¯Appåœ¨ä¸Šä¼ appåˆ°iTunes Connectä¹‹å‰ï¼Œå¦‚è¦åˆ›å»ºappåŒ…ï¼Œè¿™åœ¨Xcode 8ä¹‹åŽå·²ç»éžå¸¸å®¹æ˜“äº†ã€‚ åœ¨ä¸»èœå•ä¸­é€‰æ‹©Product &gt; Scheme &gt; Edit Schemeï¼šç¡®è®¤Build Configurationæ˜¯Releaseï¼š åœ¨ä¸»èœå•ä¸­é€‰æ‹©Product &gt; Archiveï¼Œå¯èƒ½éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ã€‚ æ‰“åŒ…æˆåŠŸåŽï¼Œåœ¨ä¸»èœå•ä¸­æ‰“å¼€Window &gt; Organizerï¼Œå‡ºçŽ°å¦‚ä¸‹ç•Œé¢ï¼š é€‰æ‹©Validateâ€¦ï¼Œç„¶åŽé€‰æ‹©è‡ªå·±çš„å¼€å‘è€…è´¦å·ï¼š ç‚¹å‡»Validateï¼Œä¹‹åŽå¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´ï¼š ä¸Šä¼ åº”ç”¨åˆ°iTunes Connect ä¸Šé¢çš„éªŒè¯æˆåŠŸåŽï¼Œç‚¹å‡»Upload to App Storeâ€¦ï¼Œç„¶åŽåœ¨ç‚¹å‡»Uploadï¼Œè¿™ä¸ªè¿‡ç¨‹å¯èƒ½ä¹Ÿéœ€è¦æ¯”è¾ƒé•¿çš„æ—¶é—´ã€‚ ç®¡ç†å†…éƒ¨æµ‹è¯•ç”¨æˆ· å†…éƒ¨ç”¨æˆ·ä¹Ÿå°±æ˜¯ iTunes Connect ç”¨æˆ·ï¼Œæœ€å¤šå¯æ·»åŠ 25ä¸ªã€‚å¯åœ¨ç”¨æˆ·å’ŒèŒèƒ½ä¸­æ·»åŠ ã€‚ æ·»åŠ iTunes Connect ç”¨æˆ· æ·»åŠ å†…éƒ¨æµ‹è¯•ç”¨æˆ·åŽï¼Œå†…éƒ¨æµ‹è¯•ç”¨æˆ·ä¼šæ”¶åˆ°é‚®ä»¶ï¼Œå†…é¢æœ‰éªŒè¯ç ã€‚ ä¸‹è½½ TestFlight åº”ç”¨ç„¶åŽåœ¨ Redeemä¸­è¾“å…¥éªŒè¯ç ï¼Œå³å¯ä¸‹è½½å®‰è£…åº”ç”¨æµ‹è¯•ã€‚ ç®¡ç†å¤–éƒ¨æµ‹è¯•ç”¨æˆ·ï¼ˆBetaæµ‹è¯•ç”¨æˆ·ï¼‰ä»¥å‰æ˜¯æœ€å¤§é™åˆ¶2000ï¼ŒçŽ°åœ¨å¯ä»¥é‚€è¯·10000åå¤–éƒ¨æµ‹è¯•äººå‘˜ã€‚å¤–éƒ¨æµ‹è¯•ç”¨æˆ·ä¸éœ€è¦äº‹å…ˆæ·»åŠ ã€‚ å¡«å†™å®Œæ•´æµ‹è¯•ä¿¡æ¯ æ–°å»ºç¾¤ç»„ï¼Œæ¯”å¦‚å°±å«å¤–éƒ¨æµ‹è¯•å‘˜ï¼š ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 22 ä½¿ç”¨CloudKit]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-22.html</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡ å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 21 ä½¿ç”¨WKWebViewå’ŒSFSafariViewController å­¦ä¹ æ‰“å¼€ç½‘é¡µï¼Œè¿™ä¸€ç¯‡å­¦ä¹ ä½¿ç”¨CloudKitã€‚ iCloudæœ€åˆä¹”å¸ƒæ–¯åœ¨WWDC2011æ˜¯å‘å¸ƒçš„ï¼Œåªä¸ºäº†ç»™Appsã€æ¸¸æˆèƒ½å¤Ÿåœ¨äº‘ç«¯æ•°æ®ä¿å­˜ï¼Œè®©Macå’ŒiOSä¹‹é—´æ•°æ®è‡ªåŠ¨åŒæ­¥æ‰€ç”¨ã€‚æœ€è¿‘å‡ å¹´æ‰æ¸æ¸æˆé•¿ä¸ºäº‘æœåŠ¡ã€‚å¦‚æžœæƒ³åˆ›å»ºç¤¾äº¤ç±»åž‹çš„ï¼Œå¯ä»¥åˆ†äº«ç”¨æˆ·ä¹‹é—´æ•°æ®çš„appï¼Œå°±å¯è€ƒè™‘ä½¿ç”¨iCloudï¼Œè¿™æ ·å°±ä¸éœ€è¦è‡ªå·±å†åŽ»æž„å»ºä¸€ä¸ªåŽç«¯APIsäº†ã€‚è™½ç„¶å¯èƒ½ç”±äºŽå›½å†…çš„ç½‘ç»œçŽ¯å¢ƒï¼ŒiCloudå®žé™…åº”ç”¨æ•ˆæžœå¹¶ä¸å¥½ï¼Œä¸è¿‡è¿˜æ˜¯æœ‰å¿…è¦å­¦ä¸€ä¸‹çš„ðŸ™‚ã€‚ å¦‚æžœå¼€å‘äº†Webåº”ç”¨ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥è®¿é—®iOSåº”ç”¨çš„iCloudä¸­æ•°æ®ã€‚Appleåˆ†åˆ«æä¾›äº†CloudKit JSå’ŒCloudKitåº“ã€‚ CloudKité»˜è®¤ç»™æˆ‘ä»¬çš„appæä¾›ä¸€äº›å…è´¹çš„ç©ºé—´ï¼š å½“appçš„ç”¨æˆ·çš„æ´»è·ƒæ•°æé«˜ï¼Œå…è´¹ç©ºé—´ä¹Ÿä¼šéšä¹‹æé«˜ï¼Œè¯¦ç»†å¯æŸ¥çœ‹å®˜ç½‘ä»‹ç»ã€‚ ç†è§£CloudKitæ¡†æž¶CloudKitæ¡†æž¶ä¸ä»…æä¾›äº†å­˜å‚¨åŠŸèƒ½ï¼Œè¿˜æä¾›äº†å¼€å‘è€…ä¸ŽiCloudä¹‹é—´çš„å„ç§äº¤äº’ã€‚Containerså’Œdatabaseæ˜¯CloudKitæ¡†æž¶çš„åŸºç¡€å…ƒç´ ã€‚ é»˜è®¤ï¼Œä¸€ä¸ªappå°±æ˜¯ä¸€ä¸ªcontainerï¼Œä»£ç ä¸­å°±æ˜¯CKContainerï¼Œä¸€ä¸ªcontainerä¸­åŒ…æ‹¬ä¸‰ä¸ªdatabase(CKDatabase)ï¼š ä¸€ä¸ªpublic databaseï¼š appä¸­æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½æŸ¥çœ‹ ä¸€ä¸ªshared databaseï¼šappä¸­ä¸€ç»„ç”¨æˆ·èƒ½æŸ¥çœ‹ï¼ˆiOS 10ï¼‰ ä¸€ä¸ªprivate databaseï¼šappä¸­å•ä¸ªç”¨æˆ·æŸ¥çœ‹ ä¸ºåº”ç”¨æ·»åŠ CloudKit é¦–å…ˆéœ€è¦å¼€å‘è€…è´¦å·ã€‚ ç„¶åŽåœ¨Capabilitiesä¸­æ‰“å¼€iCloudã€‚ åœ¨CloudKit Dashboardä¸­ç®¡ç† Record ç‚¹å‡»ä¸Šå›¾ä¸­çš„CloudKit Dashboardï¼Œæˆ–è€…ç›´æŽ¥è®¿é—®https://icloud.developer.apple.com/dashboard/ã€‚æœ€æ–°çš„CloudKit Dashboardçš„é¡µé¢æœ‰äº†ä¸€äº›å˜åŒ–ã€‚é¦–å…ˆè¿›åŽ»çš„æ˜¯åº”ç”¨åˆ—è¡¨ï¼ˆä¹Ÿå°±æ˜¯containeråˆ—è¡¨ï¼‰ï¼Œç‚¹å‡»ä¸€ä¸ªå°±è¿›å…¥å¦‚ä¸‹é¡µé¢ï¼š ç‚¹å‡»Developmentçš„dataï¼Œç±»ä¼¼ä¸‹é¢ é€‰æ‹©Record Typesï¼ˆæœ‰ç‚¹åƒå…³ç³»æ•°æ®ä¸­çš„è¡¨ï¼‰ï¼Œåˆ›å»ºæ–°çš„ç±»åž‹Restaurantï¼Œå¹¶æ·»åŠ å‡ ä¸ªFieldçš„ã€‚ é€‰æ‹©Recordsï¼ˆç±»åž‹è¡¨ä¸­çš„æ•°æ®ï¼‰ï¼Œæ·»åŠ å‡ æ¡æ•°æ®ï¼Œæ³¨æ„é€‰æ‹©public databaseã€‚ ä½¿ç”¨ Convenience APIèŽ·å–public DatabaseCloudKitæä¾›ä¸¤ç§APIsè®©å¼€å‘ä¸ŽiCloudäº¤äº’ï¼šthe convenience API å’Œ the operational APIã€‚ Convenience APIçš„é€šå¸¸è°ƒç”¨æ–¹å¼ï¼š 12345678let cloudContainer = CKContainer.default()let publicDatabase = cloudContainer.publicCloudDatabaselet predicate = NSPredicate(value: true)let query = CKQuery(recordType: &quot;Restaurant&quot;, predicate: predicate)publicDatabase.perform(query, inZoneWith: nil, completionHandler: &#123; (results, error) -&gt; Void in// Process the records&#125;) CKContainer.default()èŽ·å–åº”ç”¨çš„Containerã€‚ publicCloudDatabaseè¡¨ç¤ºé»˜è®¤çš„public databaseã€‚ NSPredicateå’ŒCKQueryæ˜¯æœç´¢æ¡ä»¶ æ–°å»ºDiscoverTableViewControllerï¼Œç»§æ‰¿è‡³UITableViewControllerï¼Œå…³è”discover.storyboardä¸­çš„table viewçš„æŽ§åˆ¶å™¨ï¼› å¹¶ä¿®æ”¹å…¶prototype cellçš„identifierä¸ºCellã€‚ åœ¨DiscoverTableViewController.swiftä¸­åŠ å…¥import CloudKitï¼Œå¹¶å®šä¹‰ä¸€ä¸ªCKRecordçš„æ•°ç»„å˜é‡ï¼š var restaurants:[CKRecord] = [] æ·»åŠ èŽ·å–Recordsçš„å‡½æ•°ï¼š 12345678910111213141516171819202122232425func fetchRecordsFromCloud() &#123; let cloudContainer = CKContainer.default() let publicDatabase = cloudContainer.publicCloudDatabase let predicate = NSPredicate(value: true) let query = CKQuery(recordType: &quot;Restaurant&quot;, predicate: predicate) publicDatabase.perform(query, inZoneWith: nil, completionHandler: &#123; (results, error) -&gt; Void in if error != nil &#123; print(error) return &#125; if let results = results &#123; print(&quot;Completed the download of Restaurant data&quot;) self.restaurants = results OperationQueue.main.addOperation &#123; self.spinner.stopAnimating() self.tableView.reloadData() &#125; &#125; &#125;)&#125; åœ¨performä¸­ï¼Œå½“ç¡®å®šèŽ·å–åˆ°äº†æ•°æ®åŽï¼Œèµ‹å€¼ç»™restaurantsï¼Œå¹¶åˆ·æ–°tableã€‚ åœ¨viewDidLoadä¸­æ·»åŠ ï¼š fetchRecordsFromCloud()ã€‚ æ·»åŠ table viewç›¸å…³ä»£ç†æ–¹æ³•ï¼š 12345678910111213141516171819202122override func numberOfSections(in tableView: UITableView) -&gt; Int &#123; return 1&#125;override func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123; return restaurants.count&#125;override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cell = tableView.dequeueReusableCell(withIdentifier: &quot;Cell&quot;, for:indexPath) // Configure the cell... let restaurant = restaurants[indexPath.row] cell.textLabel?.text = restaurant.object(forKey: &quot;name&quot;) as? String if let image = restaurant.object(forKey: &quot;image&quot;) &#123; let imageAsset = image as! CKAsset if let imageData = try? Data.init(contentsOf: imageAsset.fileURL) &#123; cell.imageView?.image = UIImage(data: imageData) &#125; &#125; return cell&#125; object(forKey:)æ˜¯CKRecordä¸­èŽ·å–Record Fieldå€¼çš„æ–¹æ³•ã€‚ å›¾ç‰‡å¯¹è±¡è½¬æ¢ä¸ºCKAssetã€‚ ä¸ºä»€ä¹ˆæ…¢ï¼Ÿæµ‹è¯•ä»¥ä¸Šä»£ç ï¼Œå‘çŽ°fetchRecordsFromCloudå‡½æ•°ä¸­çš„æ‰“å°ä¿¡æ¯â€Completed the download of Restaurant dataâ€å·²ç»æ˜¾ç¤ºåœ¨æŽ§åˆ¶å°äº†ï¼Œä½†æ˜¯è¿˜éœ€è¦è¿‡ä¸€æ®µæ—¶é—´Appä¸­æ‰èƒ½æ˜¾ç¤ºï¼Œä¹Ÿå°±æ˜¯è¯´å‘iCloudä¸­èŽ·å–å®Œæ•°æ®åŽæ‰å¼€å§‹å‡†å¤‡table viewåŠ è½½ã€‚ è¿™è¾¹å°±éœ€è¦ä½¿ç”¨åˆ°å¤šçº¿ç¨‹çš„æ¦‚å¿µã€‚åœ¨iOSä¸­ï¼ŒUIæ›´æ–°ï¼ˆåƒtableé‡æ–°åŠ è½½ï¼‰å¿…é¡»åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œã€‚è¿™æ ·èŽ·å–iCloudæ•°æ®çš„çº¿ç¨‹åœ¨è¿›è¡Œæ—¶ï¼ŒUIæ›´æ–°ä¹Ÿåœ¨åŒæ­¥è¿›è¡Œã€‚ 123OperationQueue.main.addOperation &#123; self.tableView.reloadData()&#125; ä½¿ç”¨operational APIèŽ·å–public Database Convenience APIåªé€‚åˆç®€å•å’Œå°‘é‡çš„æŸ¥è¯¢ã€‚ æ›´æ–°fetchRecordsFromCloudæ–¹æ³•ï¼š 123456789101112131415161718192021222324252627func fetchRecordsFromCloud() &#123; let cloudContainer = CKContainer.default() let publicDatabase = cloudContainer.publicCloudDatabase let predicate = NSPredicate(value: true) let query = CKQuery(recordType: &quot;Restaurant&quot;, predicate: predicate) // Create the query operation with the query let queryOperation = CKQueryOperation(query: query) queryOperation.desiredKeys = [&quot;name&quot;, &quot;image&quot;] queryOperation.queuePriority = .veryHigh queryOperation.resultsLimit = 50 queryOperation.recordFetchedBlock = &#123; (record) -&gt; Void in self.restaurants.append(record) &#125; queryOperation.queryCompletionBlock = &#123; (cursor, error) -&gt; Void in if let error = error &#123; print(&quot;Failed to get data from iCloud - \(error.localizedDescription)&quot;) return &#125; print(&quot;Successfully retrieve the data from iCloud&quot;) OperationQueue.main.addOperation &#123; self.tableView.reloadData() &#125; &#125; // Execute the query publicDatabase.add(queryOperation)&#125; é€šè¿‡CKQueryOperationä»£æ›¿performæ–¹æ³•,å®ƒæä¾›äº†è®¸å¤šæŸ¥è¯¢é€‰é¡¹ã€‚ desiredKeysä»£è¡¨éœ€è¦æŸ¥è¯¢çš„å­—æ®µã€‚ resultsLimitä»£è¡¨ä¾æ¬¡æŸ¥è¯¢æœ€å¤§Recordæ•°ç›® åŠ è½½æŒ‡ç¤ºï¼ˆèŠèŠ±è½¬ï¼‰ å¯ä»¥åœ¨viewDidLoadä¸­æ·»åŠ ç±»åž‹å¦‚ä¸‹ä»£ç ï¼š 123456let spinner:UIActivityIndicatorView = UIActivityIndicatorView()spinner.activityIndicatorViewStyle = .grayspinner.center = view.centerspinner.hidesWhenStopped = trueview.addSubview(spinner)spinner.startAnimating() ä¹Ÿå¯ä»¥é€šè¿‡åœ¨discover.storyboardä¸­æ·»åŠ ï¼š æ·»åŠ å®Œå‘çŽ° activity indicator viewåœ¨æŽ§åˆ¶å™¨ä¸Šé¢ï¼Œè¿™åœ¨Xcodeä¸­å«The Extra Views åœ¨DiscoverTableViewControllerä¸­æ·»åŠ æŽ¥å£ï¼Œå¹¶å…³è”ã€‚ @IBOutlet var spinner: UIActivityIndicatorView! åœ¨viewDidLoadä¸­æ·»åŠ ä»£ç ï¼š 1234spinner.hidesWhenStopped = truespinner.center = view.centertableView.addSubview(spinner)spinner.startAnimating() æ•°æ®åŠ è½½å®Œè¦éšè—åŠ è½½æç¤ºï¼š1234OperationQueue.main.addOperation &#123; self.spinner.stopAnimating() self.tableView.reloadData() &#125; æ‡’åŠ è½½å›¾ç‰‡æ‡’åŠ è½½å›¾ç‰‡å°±æ˜¯å…ˆåŠ è½½ä¸€ä¸ªæœ¬åœ°é»˜è®¤å›¾ç‰‡ï¼Œæš‚æ—¶ä¸åŠ è½½è¿œç¨‹å›¾ç‰‡ï¼Œå½“å›¾ç‰‡å‡†å¤‡å¥½åœ¨åŽ»æ›´æ–°å›¾ç‰‡è§†å›¾ã€‚ ä¿®æ”¹è¯·æ±‚å­—æ®µdesireKeysï¼Œè®©å¼€å§‹æ—¶ä¸åŠ å›¾ç‰‡: queryOperation.desiredKeys = [&quot;name&quot;] æ›´æ–° tableView(_:cellForRowAt:)ï¼š 1234567891011121314151617181920212223242526272829303132333435override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cell = tableView.dequeueReusableCell(withIdentifier: &quot;Cell&quot;, for: indexPath) let restaurant = restaurants[indexPath.row] cell.textLabel?.text = restaurant.object(forKey: &quot;name&quot;) as? String // Set the default image cell.imageView?.image = UIImage(named: &quot;photoalbum&quot;) // Fetch Image from Cloud in background let publicDatabase = CKContainer.default().publicCloudDatabase let fetchRecordsImageOperation = CKFetchRecordsOperation(recordIDs:[restaurant.recordID]) fetchRecordsImageOperation.desiredKeys = [&quot;image&quot;] fetchRecordsImageOperation.queuePriority = .veryHigh fetchRecordsImageOperation.perRecordCompletionBlock = &#123; (record, recordID, error) -&gt; Void in if let error = error &#123; print(&quot;Failed to get restaurant image: \(error.localizedDescription)&quot;) return &#125; if let restaurantRecord = record &#123; OperationQueue.main.addOperation() &#123; if let image = restaurantRecord.object(forKey: &quot;image&quot;) &#123; let imageAsset = image as! CKAsset print(imageAsset.fileURL) if let imageData = try? Data.init(contentsOf: imageAsset.fileURL) &#123; cell.imageView?.image = UIImage(data: imageData) &#125; &#125; &#125; &#125; &#125; publicDatabase.add(fetchRecordsImageOperation) return cell&#125; CKFetchRecordsOperationé€šè¿‡recordIDèŽ·å¾—ç‰¹å®šçš„Recordã€‚ CKFetchRecordsOperationä¸€äº›æ–¹æ³•ç±»ä¼¼CKQueryOperationã€‚ æ‡’åŠ è½½åŽå‘çŽ°ï¼Œå›¾ç‰‡åœ¨å…¶å®ƒè§†å›¾æ˜¾ç¤ºåŽæ…¢æ…¢å…ˆåŽåŠ è½½æ˜¾ç¤ºã€‚ ä¸‹æ‹‰åˆ·æ–°UIRefreshControlæä¾›äº†æ ‡å‡†çš„ä¸‹æ‹‰åˆ·æ–°ç‰¹æ€§ã€‚ åœ¨DiscoverTableViewControllerçš„viewDidLoadä¸­æ·»åŠ ï¼š12345// Pull To Refresh ControlrefreshControl = UIRefreshControl()refreshControl?.backgroundColor = UIColor.whiterefreshControl?.tintColor = UIColor.grayrefreshControl?.addTarget(self, action: #selector(fetchRecordsFromCloud), for: UIControlEvents.valueChanged) æ¯ä¸€æ¬¡ä¸‹æ‹‰æ˜¯æ˜¾ç¤ºèŠèŠ±è½¬ï¼Œå¹¶ä¸”è°ƒç”¨fetchRecordsFromCloudæ–¹æ³•ã€‚ åœ¨fetchRecordsFromCloudæ–¹æ³•çš„queryCompletionBlockæ·»åŠ æ•°æ®åŠ è½½å®ŒæˆåŽåŽ»é™¤èŠèŠ±è½¬ä»£ç ï¼š 12345if let refreshControl = self.refreshControl &#123; if refreshControl.isRefreshing &#123; refreshControl.endRefreshing() &#125;&#125; åˆ·æ–°ä¼šå‡ºçŽ°é‡å¤æ•°æ®ï¼Œè¦åœ¨fetchRecordsFromCloudæ–¹æ³•å¼€å§‹æ—¶ï¼Œæ¸…ç†æ•°æ®ï¼š 12restaurants.removeAll()tableView.reloadData() ä½¿ç”¨CloudKitä¿å­˜æ•°æ®åˆ°iCloudCKDatabaseçš„save(_:completionHandler:)çš„æ–¹æ³•å¯ç”¨æ¥ä¿å­˜æ•°æ®åˆ°iCloudã€‚å®žçŽ°ç”¨æˆ·æ–°åŠ æ•°æ®æ—¶ï¼Œæ—¢ä¿å­˜åœ¨æœ¬åœ°çš„Core Dataï¼Œæœ‰ä¿å­˜åœ¨iCloudä¸­ã€‚ åœ¨AddRestaurantControllerä¸­æ·»åŠ ï¼šimport CloudKitã€‚ åœ¨AddRestaurantControlleræ·»åŠ æ–¹æ³•ï¼š 12345678910111213141516171819202122232425262728// ä¿å­˜åˆ°Core Dataçš„åŒæ—¶ä¹Ÿä¿å­˜çš„iCloudä¸­func saveRecordToCloud(restaurant:RestaurantMO!) -&gt; Void &#123; // Prepare the record to save let record = CKRecord(recordType: &quot;Restaurant&quot;) record.setValue(restaurant.name, forKey: &quot;name&quot;) record.setValue(restaurant.type, forKey: &quot;type&quot;) record.setValue(restaurant.location, forKey: &quot;location&quot;) record.setValue(restaurant.phone, forKey: &quot;phone&quot;) let imageData = restaurant.image as! Data // Resize the image let originalImage = UIImage(data: imageData)! let scalingFactor = (originalImage.size.width &gt; 1024) ? 1024 / originalImage.size.width : 1.0 let scaledImage = UIImage(data: imageData, scale: scalingFactor)! // Write the image to local file for temporary use let imageFilePath = NSTemporaryDirectory() + restaurant.name! let imageFileURL = URL(fileURLWithPath: imageFilePath) try? UIImageJPEGRepresentation(scaledImage, 0.8)?.write(to: imageFileURL) // Create image asset for upload let imageAsset = CKAsset(fileURL: imageFileURL) record.setValue(imageAsset, forKey: &quot;image&quot;) // Get the Public iCloud Database let publicDatabase = CKContainer.default().publicCloudDatabase // Save the record to iCloud publicDatabase.save(record, completionHandler: &#123; (record, error) -&gt; Void in try? FileManager.default.removeItem(at: imageFileURL) &#125;)&#125; åœ¨saveæ–¹æ³•çš„dismiss(animated:completion:)çš„å‰é¢æ·»åŠ ï¼š saveRecordToCloud(restaurant: restaurant) æŽ’åºCKQueryæœ‰å±žæ€§sortDescriptorså¯ç”¨æ¥æŽ’åºã€‚åœ¨DiscoverTableViewControllerçš„fetchRecordsFromCloudæ–¹æ³•ï¼Œqueryå®šä¹‰åŽæ·»åŠ ï¼š query.sortDescriptors = [NSSortDescriptor(key: &quot;creationDate&quot;, ascending: false)] creationDateæ˜¯é»˜è®¤çš„åˆ›å»ºæ—¶é—´å­—æ®µã€‚ Exerciseï¼šä¿®æ”¹Discoveræ ·å¼ æ–°å»ºä¸€ä¸ªDiscoverTableViewCellï¼Œç»§æ‰¿è‡³UITableViewCellï¼Œå¹¶å…³è”Discoverçš„cellã€‚ ä¿®æ”¹cellåˆé€‚çš„æ ·å¼ï¼Œæ¯”å¦‚ä¸‹é¢ åœ¨DiscoverTableViewCellä¸­æ–°å»ºå››ä¸ªæŽ¥å£ï¼Œå¹¶å…³è”ã€‚ 1234@IBOutlet var nameLabel: UILabel!@IBOutlet var locationLabel: UILabel!@IBOutlet var typeLabel: UILabel!@IBOutlet var thumbnailImageView: UIImageView! æ›´æ–°tableView(_:cellForRowAt:)å’ŒfetchRecordsFromCloudç›¸å…³ä»£ç  ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 21 ä½¿ç”¨WKWebViewå’ŒSFSafariViewController]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-21.html</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 20 ä½¿ç”¨Tab Bar Controller å’Œ æ‹†åˆ†Storyboardå­¦ä¹ äº†å·¥å…·æ å’ŒStoryboardçš„æ‹†åˆ†ï¼Œè¿™ä¸€ç¯‡å­¦ä¹ æ€Žä¹ˆåœ¨appä¸­æ˜¾ç¤ºç½‘é¡µå†…å®¹ã€‚ç”±äºŽåŽŸä¹¦ä¸­ä½¿ç”¨äº†çš„ç½‘ç«™åœ¨å›½å†…ä¸å¥½è®¿é—®ï¼Œæˆ‘å°±ç”¨äº†æˆ‘çš„ç®€ä¹¦ã€åšå®¢ã€Githubä»£æ›¿ðŸ™‚ã€‚ è®¾è®¡about view ä¸‹è½½å›¾ç‰‡æ‹–è¿›Assets.xcassetã€‚ æ‰“å¼€about.storyboardï¼Œæ‹–è¿›ä¸€ä¸ªImage Viewåˆ°table view headerï¼Œheightä¸º190ï¼Œimageä¸ºabout-logoï¼Œcontent modeä¸ºAspect fitã€‚é€‰æ‹©table view cellï¼Œidentifierä¸ºCellï¼Œstyleä¸ºBasicã€‚ æ–°å»ºAboutTableViewControllerç»§æ‰¿è‡³UITableViewControllerï¼Œå…³è”aboutä¸­çš„table view controllerã€‚ åœ¨AboutTableViewControllerï¼Œæ·»åŠ ï¼š123var sectionTitles = [&quot;Leave Feedback&quot;, &quot;Follow Us&quot;]var sectionContent = [[&quot;Rate us on App Store&quot;, &quot;Tell us your feedback&quot;], [&quot;Jianshu&quot;, &quot;Blog&quot;, &quot;Github&quot;]]var links = [&quot;http://www.jianshu.com/u/efce1a2a95ab&quot;, &quot;http://andyron.com&quot;, &quot;https://github.com/andyRon&quot;] table viewçš„ç›¸å…³ä»£ç†åè®®æ–¹æ³•å®žçŽ°ï¼Œè¿™æ¬¡ä½¿ç”¨ä¿©ä¸ªsectionï¼ŒtableView(_:titleForHeaderInSection:)æ˜¯èŽ·å–sectionçš„titleæ–¹æ³•ã€‚1234567891011121314151617181920override func numberOfSections(in tableView: UITableView) -&gt; Int &#123; return sectionTitles.count&#125;override func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123; // #warning Incomplete implementation, return the number of rows return sectionContent[section].count&#125;override func tableView(_ tableView: UITableView, titleForHeaderInSection section: Int) -&gt; String? &#123; return sectionTitles[section]&#125;override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cell = tableView.dequeueReusableCell(withIdentifier: &quot;Cell&quot;, for: indexPath) cell.textLabel?.text = sectionContent[indexPath.section][indexPath.row] return cell&#125; ç§»é™¤Tableviewä¸‹é¢åˆ†å‰²çº¿ï¼Œåœ¨viewDidLoadä¸­æ·»åŠ ï¼š tableView.tableFooterView = UIView(frame: CGRect.zero) ç”¨Mobile Safariæ‰“å¼€Webå¯ç›´æŽ¥ç»™å‡ºç½‘å€ï¼Œé€šè¿‡Mobile Safariæ‰“å¼€ç½‘ç«™ï¼ŒUIApplication.shared.open(_:options:completionHandler:)ã€‚ 123456789101112131415override func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) &#123; switch indexPath.section &#123; case 0: if indexPath.row == 0 &#123; if let url = URL(string: &quot;http://www.apple.com/itunes/charts/paid-apps/&quot;) &#123; UIApplication.shared.open(url, options: [:], completionHandler: nil) &#125; &#125; default: break &#125; // å–æ¶ˆè¢«é€‰ä¸­çŠ¶æ€ tableView.deselectRow(at: indexPath, animated: false)&#125; ä½¿ç”¨WKWebViewè½½å…¥Webä½¿ç”¨ä½¿ç”¨WKWebViewè½½å…¥Webçš„ä¾‹å­1234if let url = URL(string: &quot;http://andyron.com&quot;) &#123; let request = URLRequest(url: url) webView.load(request)&#125; ç›´æŽ¥è½½å…¥æœ¬åœ°htmlæ–‡ä»¶çš„ä¾‹å­ï¼š123let url = URL(fileURLWithPath: &quot;about.html&quot;)let request = URLRequest(url: url)webView.load(request) åœ¨about.storyboardä¸­æ‹–è¿›ä¸€ä¸ªæ–°çš„View Controllerï¼Œç”¨æ¥å±•ç¤ºWebå†…å®¹ã€‚ä½¿ç”¨ctrl-dragå»ºç«‹Showç±»åž‹çš„segueï¼Œidentifierä¸º showWebViewã€‚ æ–°å»ºWebViewControllerç»§æ‰¿è‡³UIViewControllerï¼Œå…³è”ä¸Šé¢çš„ç”¨æ¥æ˜¾ç¤ºWebå†…å®¹çš„View Controllerã€‚ åœ¨WebViewController.swiftä¸­æ·»åŠ import WebKitï¼Œå˜é‡var webView: WKWebView!ã€‚ æ›´æ–° viewDidLoadï¼š 123456789override func viewDidLoad() &#123; super.viewDidLoad() if let url = URL(string: &quot;http://andyron.com&quot;) &#123; let request = URLRequest(url: url) webView.load(request) &#125;&#125; æ·»åŠ loadViewï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåœ¨viewDidLoadä¹‹å‰è°ƒç”¨åˆ›å»ºWKWebViewã€‚ 1234override func loadView() &#123; webView = WKWebView() view = webView&#125; æ›´æ–°AboutTableViewControllerä¸­çš„tableView(_didSelectRowAtIndexPath:)ï¼š 123456789101112131415161718override func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) &#123; switch indexPath.section &#123; case 0: if indexPath.row == 0 &#123; if let url = URL(string: &quot;http://www.apple.com/itunes/charts/paid-apps/&quot;) &#123; UIApplication.shared.open(url, options: [:], completionHandler: nil) &#125; &#125; else if indexPath.row == 1 &#123; performSegue(withIdentifier: &quot;showWebView&quot;, sender: self) &#125; default: break &#125; // å–æ¶ˆè¢«é€‰ä¸­çŠ¶æ€ tableView.deselectRow(at: indexPath, animated: false)&#125; ç”±äºŽè‡ªä»ŽiOS 9ä¹‹åŽï¼Œå‡ºäºŽå®‰å…¨è€ƒè™‘ï¼Œé»˜è®¤åªèƒ½è®¿é—®HTTPSçš„ç½‘ç«™ï¼Œå¦‚æžœéœ€è¦è®¿é—®HTTPçš„ç½‘ç«™ï¼Œå°±éœ€è¦åœ¨plistæ–‡ä»¶ä¸­æ·»åŠ è®¸å¯ï¼š ä½¿ç”¨SFSafariViewControllerè½½å…¥Webåœ¨AboutTableViewController.swiftä¸­åŠ å…¥import SafariServicesï¼Œç„¶åŽæ›´æ–°tableView(_didSelectRowAtIndexPath:)ï¼Œåªç”¨é€šè¿‡urlåˆ›å»ºä¸€ä¸ªSFSafariViewControllerå¯¹è±¡ï¼Œç„¶åŽä½¿ç”¨presentæ–¹æ³•å±•ç¤ºå°±å¯ä»¥äº†ã€‚1234567891011121314151617181920212223override func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) &#123; switch indexPath.section &#123; case 0: if indexPath.row == 0 &#123; if let url = URL(string: &quot;http://www.apple.com/itunes/charts/paid-apps/&quot;) &#123; UIApplication.shared.open(url, options: [:], completionHandler: nil) &#125; &#125; else if indexPath.row == 1 &#123; performSegue(withIdentifier: &quot;showWebView&quot;, sender: self) &#125; case 1: if let url = URL(string: links[indexPath.row]) &#123; let safariController = SFSafariViewController(url: url) present(safariController, animated: true, completion: nil) &#125; default: break &#125; // å–æ¶ˆè¢«é€‰ä¸­çŠ¶æ€ tableView.deselectRow(at: indexPath, animated: false)&#125; ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 20 ä½¿ç”¨Tab Bar Controller å’Œ æ‹†åˆ†Storyboard]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-20.html</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡ å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 19 ä½¿ç”¨UIPageViewControlleræž„å»ºä»‹ç»é¡µé¢æž„å»ºäº†å¼€å§‹ä»‹ç»é¡µé¢ï¼Œè¿™ä¸€ç¯‡å­¦ä¹ ä½¿ç”¨Tab Bar Controllerå’Œæ‹†åˆ†Storyboardã€‚ åˆ›å»º Tab Bar Controller é€‰æ‹©å¼€å§‹çš„Navigation Controllerï¼ŒEditor &gt; Embed in &gt; Tab Bar Controllerï¼Œç„¶åŽè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªæ–°çš„Tab Bar Controller ä½œä¸ºåˆå§‹çš„æŽ§åˆ¶å™¨ï¼Œä¹‹å‰Navigation Controllerå˜æˆTab Bar Controllerçš„ä¸€éƒ¨åˆ†äº†ã€‚ åœ¨Navigation Controllerä¸­é€‰æ‹© tab itemï¼Œä¿®æ”¹System Itemä¸ºFavoritesã€‚ éšè— Tab Barå·¥å…·æ åœ¨å…¶ä»–é¡µé¢éšè—ï¼Œé€‰æ‹©Detail Viewï¼Œå‹¾é€‰Hide Bottom Bar on Pushå°±å¯ä»¥ã€‚ ä¹Ÿå¯ä»¥ç”¨ä»£ç å½¢å¼ï¼Œåœ¨RestaurantTableViewControllerä¸­çš„prepare(for:)ä¸­æ·»åŠ ï¼š destinationController.hidesBottomBarWhenPushed = true æ·»åŠ æ–°çš„Tabs æ·»åŠ ä¸€ä¸ªæ–°çš„Navigation Controllerï¼Œ é€‰ä¸­tab itemï¼Œä¿®æ”¹System Itemä¸ºRecentsï¼›table viewçš„navigation itemçš„titleä¸ºDiscover æŠŠæ–°åŠ çš„Navigation ControlleråŠ å…¥åˆ° Tab Bar Controllerã€‚ç”¨ctrl+dragä»ŽTab Bar Controlleråˆ°æ–°çš„Navigation Controllerï¼Œé€‰æ‹©Relationship Segue - View Controllersã€‚ æ”¹å˜æ–°çš„Navigation Controllerçš„tab barçš„titleä¸ºRecentï¼Œä¿®æ”¹system itemä¸ºRecents åŒæ ·çš„æ–¹å¼æ·»åŠ ä¸€ä¸ªæ–°çš„Navigation Controllerï¼Œ é€‰ä¸­tab itemï¼Œä¿®æ”¹System Itemä¸ºMoreï¼›table viewçš„navigation itemçš„titleä¸ºAboutã€‚ä¹Ÿç”¨ctrl+dragä¸ŽTab Bar Controllerå»ºç«‹å…³ç³»ã€‚ æœ€ç»ˆåˆ›å»ºæœ‰ä¸‰ä¸ªTab Bar Itemçš„Tab Barã€‚ å®šåˆ¶Tab Barçš„æ ·å¼ä¿®æ”¹Tab Barçš„æ ·å¼åœ¨application(_:didFinishLaunchingWithOptions:)ä¸­è¿›è¡Œï¼Œç±»ä¼¼ä¸‹é¢çš„ä»£ç ï¼Œè¯¦ç»†çš„APIå¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š123UITabBar.appearance().tintColor = UIColor(red: 235.0/255.0, green: 75.0/255.0,blue: 27.0/255.0, alpha: 1.0)UITabBar.appearance().barTintColor = UIColor.black æ”¹å˜ Tab Bar Itemçš„å›¾ç‰‡ ä»Žå›¾ç‰‡ä¸‹è½½å›¾ç‰‡åˆ°Assets.xcassetã€‚ åœ¨SBä¸­ä¿®æ”¹ä¸‰ä¸ªTab Bar Itemçš„System Iteméƒ½ä¸ºCustomï¼Œä¿®æ”¹Titleå’ŒImageä¸ºæƒ³è¦çš„å€¼ï¼Œç±»ä¼¼ä¸‹å›¾ åœ¨application(_:didFinishLaunchingWithOptions:)ä¸­ä¿®æ”¹æ ·å¼ï¼š12UITabBar.appearance().tintColor = UIColor(red: 235.0/255.0, green: 75.0/255.0, blue: 27.0/255.0, alpha: 1.0)UITabBar.appearance().barTintColor = UIColor(red: 236/255.0, green: 240.0/255.0, blue: 241.0/255.0, alpha: 1.0) æ”¹å˜é€‰æ‹©æŒ‡ç¤ºå›¾ç‰‡ï¼ˆSelection Indicator Imageï¼‰Selection Indicator Imageå°±æ˜¯æŒ‡tab bar itemè¢«é€‰ä¸­åŽä¸Žå…¶å®ƒtab bar itemä¸åŒçš„æ ·å¼,åœ¨ä»£ç ä¸­å’ŒSBä¸­éƒ½å¯ä»¥ä¿®æ”¹ã€‚ UITabBar.appearance().selectionIndicatorImage = UIImage(named: &quot;tabitem-selected&quot;) æœ€ç»ˆæ•ˆæžœï¼š æ‹†åˆ†Storyboardå½“é¡¹ç›®å˜å¤§æ—¶ï¼Œä¸€ä¸ªStoryboardå°±ä¼šå¾ˆå¤§ï¼Œå¦‚æžœæ˜¯é¡¹ç›®ä¸­æœ‰å¾ˆå¤šäººåˆä½œçš„è¯ï¼Œä¸€ä¸ªStoryboardä¹Ÿå¾ˆéš¾ç®¡ç†ã€‚ä»ŽXcode7ä¹‹åŽï¼Œæ–°åŠŸèƒ½storyboard referencesè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ åœ¨Main.storyboardä¸­é€‰æ‹©ï¼Œaboutç›¸å…³çš„ä¸¤ä¸ªview controllerï¼Œç„¶åŽEditor &gt; Refactor to Storyboardâ€¦ï¼Œæ–°å»ºåä¸ºabout.storyboardçš„storyboardæ–‡ä»¶ï¼Œå°±æŠŠè¿™ä¸ªä¸¤ä¸ªç‹¬ç«‹å‡ºåŽ»äº†ã€‚ æŠŠaboutç›¸å…³çš„view controlleræ‹†åˆ†å‡ºåŽ»åŽï¼Œåœ¨Main.storyboardé‡Œæœ‰ä¸€ä¸ªå…³è”å›¾æ ‡ï¼ŒåŒå‡»å°±å¯ä»¥è·³è½¬åˆ°about.storyboardä¸­ã€‚ åŒæ ·çš„æ–¹æ³•ï¼Œç‹¬ç«‹å‡ºdiscoverç›¸å…³view controllerï¼Œç”Ÿæˆdiscover.storyboardæ–‡ä»¶ã€‚ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS-tutorial-7ï¼šè§£æžXML(swift)]]></title>
    <url>%2F2017%2Fios-tutorial-7-xml.html</url>
    <content type="text"><![CDATA[ä½¿ç”¨XMLParserè§£æžXMLæ–‡ä»¶ï¼Œç„¶åŽç”¨tableå±•ç¤ºæ•°æ®ã€‚ ä»¥Single View Applicationæ¨¡æ¿æ–°å»ºé¡¹ç›®XMLParserTutorialã€‚ åˆ é™¤SBä¸­çš„View Controllerï¼Œæ‹–è¿›ä¸€ä¸ªNavigation Controllerã€‚é€‰æ‹©æ–°çš„View Controllerä¸º â€œIs Initial View Controllerâ€ã€‚è®¾ç½®Navigation Barçš„titleä¸ºBooksã€‚ æ–°å»ºä¸€ä¸ªç»§æ‰¿è‡³UITableViewControllerï¼Œåä¸ºTableViewControllerçš„æŽ§åˆ¶å™¨æ–‡ä»¶ï¼Œå¹¶ä¸ŽSBçš„æŽ§åˆ¶å™¨å…³è”ã€‚ æ–°å»ºä¸€ä¸ªxmlæ–‡ä»¶Books.xmlï¼Œç”¨äºŽä¹‹åŽè§£æžï¼Œæ–‡ä»¶å†…å®¹ä¸º: 1234567891011121314151617181920212223&lt;?xml version=&quot;1.0&quot;?&gt;&lt;catalog&gt; &lt;book id=&quot;1&quot;&gt; &lt;title&gt;To Kill a Mockingbird&lt;/title&gt; &lt;author&gt;Harper Lee&lt;/author&gt; &lt;/book&gt; &lt;book id=&quot;2&quot;&gt; &lt;title&gt;1984&lt;/title&gt; &lt;author&gt;George Orwell&lt;/author&gt; &lt;/book&gt; &lt;book id=&quot;3&quot;&gt; &lt;title&gt;The Lord of the Rings&lt;/title&gt; &lt;author&gt;J.R.R Tolkien&lt;/author&gt; &lt;/book&gt; &lt;book id=&quot;4&quot;&gt; &lt;title&gt;The Catcher in the Rye&lt;/title&gt; &lt;author&gt;J.D. Salinger&lt;/author&gt; &lt;/book&gt; &lt;book id=&quot;5&quot;&gt; &lt;title&gt;The Great Gatsby&lt;/title&gt; &lt;author&gt;F. Scott Fitzgerald&lt;/author&gt; &lt;/book&gt;&lt;/catalog&gt; æ–°å»ºä¸€ä¸ªæ–‡ä»¶ Book.swiftï¼š 123456import Foundationclass Book &#123; var bookTitle: String = &quot;&quot; var bookAuthor: String = &quot;&quot;&#125; åœ¨TableViewControllerä¸­æ·»åŠ å‡ ä¸ªå˜é‡ï¼š 1234var books: [Book] = []var eName: String = &quot;&quot;var bookTitle = &quot;&quot;var bookAuthor = &quot;&quot; åœ¨viewDidLoadæ–¹æ³•ä¸­ï¼Œæ·»åŠ è¯»å–XMlæ–‡ä»¶ä»£ç ï¼š 123456789override func viewDidLoad() &#123; super.viewDidLoad() if let path = Bundle.main.url(forResource: &quot;Books&quot;, withExtension: &quot;xml&quot;) &#123; if let parser = XMLParser(contentsOf: path) &#123; parser.delegate = self parser.parse() &#125; &#125; æ·»åŠ Table Viewçš„æ•°æ®æºä»£ç†æ–¹æ³•ï¼š 1234567891011121314151617override func numberOfSections(in tableView: UITableView) -&gt; Int &#123; return 1&#125;override func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123; return books.count&#125;override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cell = tableView.dequeueReusableCell(withIdentifier: &quot;Cell&quot;, for: indexPath) let book = books[indexPath.row] cell.textLabel?.text = book.bookTitle cell.detailTextLabel?.text = book.bookAuthor return cell&#125; è®©TableViewControlleré‡‡çº³XMLParserDelegateåè®®ï¼š class TableViewController: UITableViewController, XMLParserDelegate å®žçŽ°XMLParserDelegateä¸­çš„ä¸‰ä¸ªæ–¹æ³•ï¼š 12345678910111213141516171819202122232425262728293031323334// è§£æžXMlå…ƒç´ å¼€å§‹æ—¶func parser(_ parser: XMLParser, didStartElement elementName: String, namespaceURI: String?, qualifiedName qName: String?, attributes attributeDict: [String : String] = [:]) &#123; print(&quot;å¼€å§‹ \(elementName)&quot;) eName = elementName if elementName == &quot;book&quot; &#123; bookTitle = &quot;&quot; bookAuthor = &quot;&quot; &#125;&#125;// æ­£åœ¨è§£æžXMlå…ƒç´ func parser(_ parser: XMLParser, foundCharacters string: String) &#123; print(&quot;ing \(eName)&quot;) let data = string.trimmingCharacters(in: NSCharacterSet.whitespacesAndNewlines) if (!data.isEmpty) &#123; if eName == &quot;title&quot; &#123; bookTitle += data &#125; else if eName == &quot;author&quot; &#123; bookAuthor += data &#125; &#125;&#125;// ç»“æŸè§£æžXMlå…ƒç´ func parser(_ parser: XMLParser, didEndElement elementName: String, namespaceURI: String?, qualifiedName qName: String?) &#123; print(&quot;ç»“æŸ \(elementName)&quot;) if elementName == &quot;book&quot; &#123; let book = Book() book.bookTitle = bookTitle book.bookAuthor = bookAuthor books.append(book) &#125;&#125; ä¸‰ä¸ªæ–¹æ³•åˆ†åˆ«åœ¨XMlå…ƒç´ å¼€å§‹è§£æžã€æ­£åœ¨è§£æžã€ç»“æŸè§£æžæ—¶è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´æœ‰å¾ˆå¤šå…ƒç´ æ—¶å°±ä¸åœåœ¨è°ƒç”¨è¿™ä¸‰ä¸ªæ–¹æ³•ã€‚ ä»£ç XMLParserTutorial å‚è€ƒï¼šParsing XML Tutorial]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 19 ä½¿ç”¨UIPageViewControlleræž„å»ºä»‹ç»é¡µé¢]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-19.html</url>
    <content type="text"><![CDATA[ç»§ç»­ä¸Šä¸€ç¯‡ å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 18 Search Bar å’Œ UISearchController ï¼Œè¿™ä¸€ç¯‡ä½¿ç”¨UIPageViewControlleræž„å»ºä»‹ç»é¡µé¢ï¼Œä¸Žä½¿ç”¨LaunchScreen.storyboardçš„å¯åŠ¨é¡µä¸åŒã€‚ å‘Storyboardä¸­æ·»åŠ UIPageViewController åœ¨Storyboardæ‹–è¿›ä¸€ä¸ªUIPageViewControllerã€‚ä¿®æ”¹ç›¸å…³å±žæ€§ã€‚ ä¿®æ”¹UIPageViewControllerçš„ storyboard ID ä¸º WalkthroughControllerã€‚ ç±»ä¼¼UINavigationControllerï¼ŒUIPageViewControllerä¹Ÿæ˜¯ä¸€ç§å®¹å™¨ç±»åž‹çš„æŽ§åˆ¶å™¨ã€‚è¿™ç§å®¹å™¨ç±»åž‹çš„æŽ§åˆ¶å™¨æ˜¯ç”¨æ¥ç®¡ç†å…¶å®ƒå¤šä¸ªæŽ§åˆ¶å™¨çš„ã€‚ å¦‚æžœå®¹å™¨å†…çš„æŽ§åˆ¶å™¨é¡µé¢å…ƒç´ ç±»ä¼¼ï¼ˆä¸Šå›¾å°±æ˜¯è¿™ç§æƒ…å†µï¼‰ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªæŽ§åˆ¶å™¨é‡å¤åˆ©ç”¨ã€‚ è®¾è®¡ä»‹ç»é¡µ ä¸‹è½½ä»‹ç»é¡µæ‰€éœ€çš„å›¾ç‰‡ï¼Œæ‹–åˆ°Assets.xcassetã€‚ æ‹–åŠ¨ä¸€ä¸ªæ–°çš„View Controlleråˆ°SBä¸­ï¼ˆä½œä¸ºé‡å¤ä½¿ç”¨çš„æŽ§åˆ¶å™¨ï¼‰ï¼Œåšä¸€äº›UIè®¾è®¡ï¼š è®¾ç½®èƒŒæ™¯ä¸ºçº¢è‰² æ·»åŠ ä¸€ä¸ªLabelåä¸ºPersonalizeï¼Œé€‰æ‹©åˆé€‚çš„å­—ä½“å’Œå¤§å°ï¼Œå±…ä¸­ã€‚ æ·»åŠ ä¸€ä¸ªImage Viewï¼Œ300*232ï¼Œå±…ä¸­ã€‚ æ·»åŠ å¦ä¸€ä¸ªLabelåä¸ºPin your favorite restaurants and create your own food guideï¼Œ282*64ï¼Œè¡Œæ•°ä¸º0ï¼Œå±…ä¸­ï¼Œé€‰æ‹©åˆé€‚çš„å­—ä½“å’Œå¤§å°ã€‚ æ·»åŠ ä¸€äº›çº¦æŸ è®¾ç½®æ–°çš„View Controllerçš„ storyboard ID ä¸º WalkthroughContentViewControllerã€‚æœ€åŽå¤§æ¦‚å¦‚ä¸‹ï¼š åˆ›å»ºWalkthroughContentViewController åˆ›å»ºWalkthroughContentViewControllerç±»æ–‡ä»¶ï¼Œç»§æ‰¿è‡³UIViewControllerï¼Œå¹¶å…³è”ä¸Šé¢æ·»åŠ çš„æ–°View Controllerã€‚ æ·»åŠ ä¸‰ä¸ªæŽ¥å£ï¼Œå…³è”ä¸¤ä¸ªLabelå’Œä¸€ä¸ªimage viewï¼›æ·»åŠ å››ä¸ªå˜é‡ï¼Œå…¶ä¸­indexæ˜¯æŒ‡å¤šä¸ªä»‹ç»é¡µçš„ç´¢å¼•ã€‚ 12345678@IBOutlet var headingLabel: UILabel!@IBOutlet var contentLabel: UILabel!@IBOutlet var contentImageView: UIImageView!var index = 0var heading = &quot;&quot;var imageFile = &quot;&quot;var content = &quot;&quot; ä¿®æ”¹viewDidLoadä¸ºï¼š 1234567override func viewDidLoad() &#123; super.viewDidLoad() headingLabel.text = heading contentLabel.text = content contentImageView.image = UIImage(named: imageFile)&#125; å®žçŽ° UIPageViewController æ–°å»ºç±»WalkthroughPageViewControllerï¼Œç»§æ‰¿è‡³UIPageViewControllerã€‚ è®©WalkthroughPageViewControlleç¬¦åˆUIPageViewControllerDataSourceåè®®ã€‚ class WalkthroughPageViewController: UIPageViewController, UIPageViewControllerDataSource æ–°å»ºå‡ ä¸ªå˜é‡ï¼Œç”¨äºŽæ˜¾ç¤ºä»‹ç»é¡µä¸­çš„å†…å®¹ã€‚ 123var pageHeadings = [&quot;Personalize&quot;, &quot;Locate&quot;, &quot;Discover&quot;]var pageImages = [&quot;foodpin-intro-1&quot;, &quot;foodpin-intro-2&quot;, &quot;foodpin-intro-3&quot;]var pageContent = [&quot;Pin your favorite restaurants and create your own foodguide&quot;, &quot;Search and locate your favourite restaurant on Maps&quot;, &quot;Find restaurants pinned by your friends and other foodies around the world&quot;] å®žçŽ°UIPageViewControllerDataSourceåè®®çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«åœ¨ä»‹ç»é¡µç¿»åˆ°ä¸‹ä¸€ä¸ªå’Œç¿»åˆ°ä¸Šä¸€ä¸ªæ—¶è°ƒç”¨ã€‚contentViewControllerå‡½æ•°çš„ä½œç”¨æ˜¯æ ¹æ®ä»‹ç»é¡µçš„ç´¢å¼•èŽ·å–ä¸åŒçš„æ•°æ®ã€‚instantiateViewControlleræ–¹æ³•æ ¹æ®storyboardçš„ä¸­storyboard IDç”Ÿæˆè§†å›¾æŽ§åˆ¶å™¨ã€‚ 1234567891011121314151617181920212223242526272829303132func pageViewController(_ pageViewController: UIPageViewController, viewControllerBefore viewController: UIViewController) -&gt; UIViewController? &#123; var index = (viewController as! WalkthroughContentViewController).index index -= 1 return contentViewController(at: index)&#125;func pageViewController(_ pageViewController: UIPageViewController, viewControllerAfter viewController: UIViewController) -&gt; UIViewController? &#123; var index = (viewController as! WalkthroughContentViewController).index index += 1 return contentViewController(at: index)&#125;func contentViewController(at index: Int) -&gt; WalkthroughContentViewController? &#123; if index &lt; 0 || index &gt;= pageHeadings.count &#123; return nil &#125; if let pageContentViewController = storyboard?.instantiateViewController(withIdentifier: &quot;WalkthroughContentViewController&quot;) as? WalkthroughContentViewController &#123; pageContentViewController.imageFile = pageImages[index] pageContentViewController.heading = pageHeadings[index] pageContentViewController.content = pageContent[index] pageContentViewController.index = index return pageContentViewController &#125; return nil&#125; ä¿®æ”¹viewDidLoadï¼š 12345678override func viewDidLoad() &#123; super.viewDidLoad() dataSource = self if let startingViewController = contentViewController(at: 0) &#123; setViewControllers([startingViewController], direction: .forward, animated: true, completion: nil) &#125;&#125; setViewControllersæ–¹æ³•æ˜¯è®¾ç½®UIPageViewControllerç®¡ç†çš„è§†å›¾æŽ§åˆ¶å™¨ã€‚ è®©ä»‹ç»é¡µåœ¨é¦–é¡µæ˜¾ç¤ºåŽè·³å‡ºã€‚ åœ¨RestaurantTableViewControlleä¸­æ·»åŠ ï¼š123456override func viewDidAppear(_ animated: Bool) &#123; super.viewDidAppear(animated) if let pageViewController = storyboard?.instantiateViewController(withIdentifier: &quot;WalkthroughController&quot;) as? WalkthroughPageViewController &#123; present(pageViewController, animated: true, completion: nil) &#125;&#125; æ·»åŠ é»˜è®¤é¡µé¢æŒ‡ç¤ºé¡µé¢æŒ‡ç¤ºå°±æ˜¯ä¸€èˆ¬åœ¨é¡µé¢ä¸‹ç”¨äºŽåˆ†è¾¨å½“å‰æ˜¯ç¬¬ä¸€ä¸ªé¡µé¢çš„å‡ ä¸ªå°ç‚¹ã€‚å®žçŽ°UIPageViewControllerDataSourceåè®®çš„ä¸¤ä¸ªæ–¹æ³•ï¼špresentationCount(for:)è¡¨ç¤ºæ€»å…±æœ‰å‡ ä¸ªå°ç‚¹ï¼ˆé¡µé¢ï¼‰ã€‚presentationIndex(for:)è¡¨ç¤ºå½“å‰é¡µé¢çš„ç´¢å¼•ã€‚12345678910func presentationCount(for pageViewController: UIPageViewController) -&gt; Int &#123; return pageHeadings.count&#125;func presentationIndex(for pageViewController: UIPageViewController) -&gt; Int &#123; if let pageContentViewController = storyboard?.instantiateViewController(withIdentifier: &quot;WalkthroughContentViewController&quot;) as? WalkthroughContentViewController &#123; return pageContentViewController.index &#125; return 0&#125; ä¿®æ”¹é¡µé¢æŒ‡ç¤ºçš„æ ·å¼ä¸ç”¨é»˜è®¤çš„é¡µé¢æŒ‡ç¤ºï¼Œå°±è¦æŠŠä¸Šé¢ä¸¤ä¸ªæ–¹æ³•åˆ é™¤ï¼Œç„¶åŽä½¿ç”¨UIPageControlã€‚ åˆ é™¤ä¸Šé¢å®žçŽ°çš„ä¸¤ä¸ªæ–¹æ³•ã€‚ä»Žå¯¹è±¡åº“ä¸­æ‹–ä¸€ä¸ªPage Controlåˆ°walkthrough content view controlleråº•éƒ¨ï¼Œåœ¨å±žæ€§æ£€æŸ¥å™¨ä¸­ä¿®æ”¹é€‚å½“å±žæ€§ï¼Œå¹¶æ·»åŠ çº¦æŸã€‚ åœ¨WalkthroughContentViewControllerä¸­æ·»åŠ æŽ¥å£@IBOutlet var pageControl: UIPageControl!å¹¶ä¸ŽPage Controlå…³è”ã€‚åœ¨viewDidLoadä¸­æ·»åŠ pageControl.currentPage = index æ·»åŠ NEXT/DONEæŒ‰é’® åœ¨walkthrough content view controllerå³ä¸‹è§’æ·»åŠ ä¸€ä¸ªæŒ‰é’®åä¸ºNEXTã€‚ åœ¨WalkthroughContentViewControllerä¸­æ·»åŠ æŽ¥å£ï¼Œå¹¶æŒ‰é’®å…³è”ã€‚ @IBOutlet var forwardButton: UIButton! åœ¨viewDidLoadä¸­æ·»åŠ æ ¹æ®ç´¢å¼•åˆ¤æ–­æŒ‰é’®åçš„ä»£ç ï¼š 12345switch index &#123;case 0...1: forwardButton.setTitle(&quot;NEXT&quot;, for: .normal)case 2: forwardButton.setTitle(&quot;DONE&quot;, for: .normal)default: break&#125; æ·»åŠ ç‚¹å‡»æŒ‰é’®çš„actionï¼Œå¹¶ä¸ŽæŒ‰é’®å…³è” 12345678910@IBAction func nextButtonTapped(sender: UIButton) &#123; switch index &#123; case 0...1: let pageViewController = parent as! WalkthroughPageViewController pageViewController.forward(index: index) case 2: dismiss(animated: true, completion: nil) default: break &#125;&#125; åœ¨WalkthroughPageViewControllerä¸­æ·»åŠ æ–¹æ³•ï¼š 12345func forward(index: Int) &#123; if let nextViewController = contentViewController(at: index + 1) &#123; setViewControllers([nextViewController], direction: .forward, animated: true, completion: nil) &#125;&#125; å®Œæˆç±»ä¼¼ä¸‹é¢ï¼š ä½†å› ä¸ºä¹‹å‰æ˜¯åˆ©ç”¨RestaurantTableViewControllerçš„viewDidAppearæ–¹æ³•æ˜¾ç¤ºä»‹ç»é¡µçš„ï¼Œè€ŒviewDidAppearæ–¹æ³•æ˜¯é¡µé¢æ˜¾ç¤ºåŽå°±è°ƒç”¨ä¸€ä¸‹ï¼Œè¿™æ ·å°±å‡ºçŽ°ä¸åœè¿›å…¥ä»‹ç»é¡µã€‚å®žé™…ä¸Šåªéœ€è¦ç¬¬ä¸€æ¬¡æ‰“å¼€appçš„æ—¶æ˜¾ç¤ºä»‹ç»é¡µå°±å¯ä»¥äº†ã€‚ UserDefaultsçš„ä½¿ç”¨UserDefaultsæ˜¯ç”¨æ¥ç®¡ç†åº”ç”¨å’Œç”¨æˆ·ç›¸å…³çš„è®¾ç½®çš„ã€‚ä¹Ÿå°±æ˜¯å¯ä»¥ç”¨UserDefaultså­˜å‚¨ä¸€äº›ç”¨æˆ·ç›¸å…³çš„å°‘é‡æ•°æ®ï¼Œæ¯”å¦‚ä¸Šé¢çš„æ˜¯å¦çœ‹è¿‡ä»‹ç»é¡µï¼Œä¹Ÿå°±æ˜¯æ˜¯å¦ç‚¹å‡»è¿‡DONEæŒ‰é’®äº†ã€‚UserDefaultsä¹Ÿæ˜¯é€šè¿‡å•ä¾‹æ¨¡å¼è¿›è¡Œæ“ä½œçš„ï¼Œé€šè¿‡ç±»å±žæ€§standardèŽ·å–å•ä¾‹ã€‚ nextButtonTappedä¸­ç‚¹å‡»DONEæŒ‰é’®æ—¶è®¾ç½®ä¸€ä¸ªå€¼æ ‡å¿—ï¼š 1234567891011@IBAction func nextButtonTapped(sender: UIButton) &#123; switch index &#123; case 0...1: let pageViewController = parent as! WalkthroughPageViewController pageViewController.forward(index: index) case 2: UserDefaults.standard.set(true, forKey: &quot;hasViewedWalkthrough&quot;) dismiss(animated: true, completion: nil) default: break &#125;&#125; å†åˆ°RestaurantTableViewControllerçš„viewDidAppearåˆ¤æ–­å¯¹åº”keyå€¼ã€‚ 123456789override func viewDidAppear(_ animated: Bool) &#123; super.viewDidAppear(animated) if UserDefaults.standard.bool(forKey: &quot;hasViewedWalkthrough&quot;) &#123; return &#125; if let pageViewController = storyboard?.instantiateViewController(withIdentifier: &quot;WalkthroughController&quot;) as? WalkthroughPageViewController &#123; present(pageViewController, animated: true, completion: nil) &#125;&#125; å®Œæˆä»‹ç»é¡µã€‚å­¦ä¹ äº†UIPageViewControllerå’ŒUserDefaultsã€‚ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 18 Search Bar å’Œ UISearchController]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-18.html</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡ å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 17 ä½¿ç”¨Core Data æ˜¯ä½¿ç”¨Core Dataå­˜å‚¨æ•°æ®ï¼Œè¿™ä¸€ç¯‡æ˜¯æ·»åŠ æœç´¢åŠŸèƒ½ã€‚ ä½¿ç”¨ UISearchControllerUISearchControlleræ˜¯ä¸€ä¸ªç®€æ´çš„åˆ›å»ºæœç´¢æ¡å’Œç®¡ç†æœç´¢ç»“æžœçš„APIã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸ºä»¥tableä¸ºåŸºç¡€çš„appæ·»åŠ æœç´¢æ¡åªéœ€è¦ä¸‹é¢ä¸‰è¡Œä»£ç å°±å¯ä»¥äº†ï¼ŒsearchResultsControllerä¸ºnilæ—¶æœç´¢ç»“æžœæ˜¾ç¤ºå°±åœ¨å½“å‰æœç´¢çš„é¡µé¢ä»¥å½“å‰çš„æ ·å¼æ˜¾ç¤ºã€‚123searchController = UISearchController(searchResultsController: nil)searchController.searchResultsUpdater = selftableView.tableHeaderView = searchController.searchBar ä¸ºæˆ‘çš„FoodPinåº”ç”¨æ·»åŠ æœç´¢æ¡: åœ¨RestaurantTableViewControllerä¸­æ·»åŠ ä¸€ä¸ªå˜é‡ï¼š var searchController: UISearchController! åœ¨viewDidLoadä¸­åˆå§‹åŒ–ï¼š searchController = UISearchController(searchResultsController: nil) tableView.tableHeaderView = searchController.searchBar è¿™æ ·å°±æ·»åŠ äº†æœç´¢æ¡ï¼Œä½†è¿˜æ¯å¤©æ·»åŠ æœç´¢é€»è¾‘ï¼Œæœç´¢æ²¡æ•ˆã€‚ ç­›é€‰å†…å®¹ åœ¨RestaurantTableViewControllerä¸­ç»§ç»­æ·»åŠ ä¸€ä¸ªå˜é‡ï¼Œç”¨æˆ·å­˜å‚¨ç­›é€‰ç»“æžœï¼š var searchResults: [RestaurantMO] = [] æ·»åŠ ç­›é€‰æ–¹æ³•ï¼š 1234567891011func filterContent(for searchText: String) &#123; searchResults = restaurants.filter(&#123; (restaurant) -&gt; Bool in if let name = restaurant.name &#123; let isMatch = name.localizedCaseInsensitiveContains(searchText) return isMatch &#125; return false &#125;)&#125; filteræ˜¯æ•°ç»„çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒéåŽ†æ•°ç»„çš„æ¯ä¸€é¡¹è¿›è¡Œé—­åŒ…ä¸­çš„æ“ä½œï¼Œæ ¹æ®ç»“æžœåˆ¤æ–­æ˜¯å¦åˆ é™¤å¯¹åº”é¡¹ï¼Œæœ€åŽå¾—åˆ°ä¸€ä¸ªç­›é€‰çš„æ•°ç»„ã€‚localizedCaseInsensitiveContainsæ–¹æ³•ç”¨æ¥åˆ¤æ–­nameä¸­æ˜¯å¦åŒ…å«searchTextï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰ æ›´æ–°æœç´¢ç»“æžœ è®©RestaurantTableViewController â€œç¬¦åˆâ€ UISearchResultsUpdatingåè®®ï¼š class RestaurantTableViewController: UITableViewController, NSFetchedResultsControllerDelegate, UISearchResultsUpdating å®žçŽ°UISearchResultsUpdatingåè®®ï¼šä¸­çš„updateSearchResults(for:)æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨æœç´¢æ¡è¢«é€‰åˆ™å’Œè¾“å…¥æœç´¢å­—æ—¶è°ƒç”¨ï¼š 123456func updateSearchResults(for searchController: UISearchController) &#123; if let searchText = searchController.searchBar.text &#123; filterContent(for: searchText) tableView.reloadData() &#125;&#125; æ›´æ–°tableView(_:numberOfRowsInSection:)ã€‚UISearchControlleræœ‰ä¸€ä¸ªisActiveå±žæ€§ç”¨æ¥åˆ¤æ–­æœç´¢æŽ§åˆ¶å™¨å½“å‰æ´»è·ƒçŠ¶æ€ã€‚ 1234567override func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123; if searchController.isActive &#123; return searchResults.count &#125; else &#123; return restaurants.count &#125;&#125; æ›´æ–°tableView(_:cellForRowAt:)ã€‚æ ¹æ®UISearchControllerçš„çŠ¶æ€åˆ¤æ–­æ˜¯ä»Žrestaurantsä¸­èŽ·å–æ•°æ®è¿˜æ˜¯searchResultsã€‚ 1234567891011121314151617override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cellIdentifier = &quot;Cell&quot; let cell = tableView.dequeueReusableCell(withIdentifier: cellIdentifier, for: indexPath) as! RestaurantTableViewCell let restaurant = (searchController.isActive) ? searchResults[indexPath.row] : restaurants[indexPath.row] cell.nameLabel.text = restaurant.name cell.thumbnailImageView.image = UIImage(data: restaurant.image! as Data) cell.thumbnailImageView.layer.cornerRadius = 30.0 cell.thumbnailImageView.clipsToBounds = true cell.locationLabel.text = restaurant.location cell.typeLabel.text = restaurant.type cell.accessoryType = restaurant.isVisited ? .checkmark: .none return cell&#125; å®žçŽ°ä¸€ä¸ªæ–°çš„æ–¹æ³•ï¼Œè®©tableåœ¨æœç´¢çŠ¶æ€ä¸‹ä¸å¯ä»¥æ»‘åŠ¨ç¼–è¾‘ã€‚ 1234567override func tableView(_ tableView: UITableView, canEditRowAt indexPath: IndexPath) -&gt; Bool &#123; if searchController.isActive &#123; return false &#125; else &#123; return true &#125;&#125; æ›´æ–°prepare(for:)ï¼Œè®©segueåœ¨ä¼ è¾“æ•°æ®åˆ°detail viewæ—¶çš„æ•°æ®ä¹Ÿç›¸å¯¹åº”ã€‚ destinationController.restaurant = searchController.isActive ? searchResults[indexPath.row] : restaurants[indexPath.row åœ¨viewDidLoadä¸­æ·»åŠ ä¸¤è¡Œä»£ç ï¼š 12searchController.searchResultsUpdater = selfsearchController.dimsBackgroundDuringPresentation = false çŽ°åœ¨å°±å®Œæˆäº†æœç´¢åŠŸèƒ½ã€‚ å®šåˆ¶æœç´¢æ¡çš„æ ·å¼UISearchBaræä¾›ä¸€äº›å±žæ€§ç”¨æ¥å®šåˆ¶ã€‚åœ¨viewDidLoadä¸­æ·»åŠ ï¼š1234searchController.searchBar.placeholder = &quot;Search restaurants...&quot;searchController.searchBar.tintColor = UIColor.whitesearchController.searchBar.barTintColor = UIColor(red: 218.0/255.0, green:100.0/255.0, blue: 70.0/255.0, alpha: 1.0) Exerciseï¼šæ·»åŠ åœ°å€æœç´¢åªéœ€è¦æ›´æ”¹æœç´¢å‡½æ•°filterContentï¼š12345678910111213searchResults = restaurants.filter(&#123; (restaurant) -&gt; Bool in if let name = restaurant.name, let location = restaurant.location &#123; let isMatchName = name.localizedCaseInsensitiveContains(searchText) let isMatchLocation = location.localizedCaseInsensitiveContains(searchText) if isMatchName || isMatchLocation &#123; return true &#125; &#125; return false &#125;) ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 17 ä½¿ç”¨Core Data]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-17.html</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡ å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 16 ä»‹ç»é™æ€Table Viewsï¼ŒUIImagePickerControllerå’ŒNSLayoutConstraint ä¸­æ·»åŠ æ–°å»ºrestauranté¡µé¢ï¼Œä½†æœ€åŽæ•°æ®å¹¶æ²¡æœ‰ä¿å­˜ä¸‹æ¥ï¼Œè¿™ä¸€ç¯‡ä½¿ç”¨Core Dataæ–¹å¼æ¥æŒä¹…åŒ–ä¿å­˜æ•°æ®ã€‚ æ•°æ®æŒä¹…åŒ–ä¸€èˆ¬æ˜¯æŒ‡æ•°æ®åº“ä¿å­˜ã€‚åœ¨Webå¼€å‘ä¸­ï¼Œå¸¸ç”¨Oracleæˆ–MySQLç­‰å…³ç³»æ•°æ®åº“æ¥ä¿å­˜æ•°æ®ï¼Œé€šè¿‡SQLè¯­å¥æŸ¥è¯¢ã€‚åœ¨iOSä¸­å¯¹åº”çš„æ•°æ®åº“æ˜¯SQLiteã€‚Core Dataä¸æ˜¯æ•°æ®åº“ï¼Œå®ƒæ˜¯è®©å¼€å‘è€…é€šè¿‡é¢å‘å¯¹è±¡æ–¹å¼ä¸Žæ•°æ®åº“è¿›è¡Œäº¤äº’çš„åº“ã€‚ ä½¿ç”¨Core Dataçš„ä¾‹å­æ–°å»ºä¸€ä¸ªä½¿ç”¨Core Dataçš„é¡¹ç›®ï¼Œåœ¨AppDelegateç±»ä¸­ä¼šæ¯”å¹³å¸¸å¤šäº†ä¸€ä¸ªå˜é‡å’Œä¸€æ–¹æ³•ï¼Œå¦å¤–è¿˜å¤šäº†ä¸€ä¸ªæ–‡ä»¶CoreDataDemo.xcdatamodeldã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142lazy var persistentContainer: NSPersistentContainer = &#123; /* The persistent container for the application. This implementation creates and returns a container, having loaded the store for the application to it. This property is optional since there are legitimate error conditions that could cause the creation of the store to fail. */ let container = NSPersistentContainer(name: &quot;CoreDataDemo&quot;) container.loadPersistentStores(completionHandler: &#123; (storeDescription, error) in if let error = error as NSError? &#123; // Replace this implementation with code to handle the error appropriately. // fatalError() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. /* Typical reasons for an error here include: * The parent directory does not exist, cannot be created, or disallows writing. * The persistent store is not accessible, due to permissions or data protection when the device is locked. * The device is out of space. * The store could not be migrated to the current model version. Check the error message to determine what the actual problem was. */ fatalError(&quot;Unresolved error \(error), \(error.userInfo)&quot;) &#125; &#125;) return container&#125;()// MARK: - Core Data Saving supportfunc saveContext () &#123; let context = persistentContainer.viewContext if context.hasChanges &#123; do &#123; try context.save() &#125; catch &#123; // Replace this implementation with code to handle the error appropriately. // fatalError() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. let nserror = error as NSError fatalError(&quot;Unresolved error \(nserror), \(nserror.userInfo)&quot;) &#125; &#125;&#125; å˜é‡persistentContaineræ˜¯NSPersistentContainerçš„å®žä¾‹ï¼Œlet container = NSPersistentContainer(name: &quot;CoreDataDemo&quot;)å¯¹åº”CoreDataDemo.xcdatamodeldæ–‡ä»¶ï¼Œå¦‚æžœæ˜¯è‡ªå·±æ·»åŠ æ—¶åå­—éœ€è¦å¯¹åº”ã€‚ å½“æ•°æ®å˜åŒ–(insert/update/delete)æ—¶ ï¼Œè°ƒç”¨saveContextæ–¹æ³•ä¿å­˜æ•°æ®ã€‚ å‘é¡¹ç›®ä¸­æ·»åŠ Data Model å³å‡»FoodPinæ–‡ä»¶å¤¹ï¼Œé€‰æ‹©æ–°å»ºData Modelæ–‡ä»¶ï¼Œæ–‡ä»¶åä¸ºFoodPinã€‚ é€‰ä¸­æ–°ç”Ÿæˆçš„FoodPin.xcdatamodeldï¼Œæ·»åŠ ä¸€ä¸ªRestaurant Entityï¼Œç„¶åŽå†åœ¨æ­¤Entityä¸‹æ·»åŠ ä¸€äº›å±žæ€§ã€‚ é€‰ä¸­ç‰¹å®šå±žæ€§åŽå¯åœ¨å³ä¾§æ£€æŸ¥å™¨ä¸­è®¾ç½®ç›¸å…³ç‰¹æ€§ï¼Œæ¯”å¦‚æ˜¯å¦å¼ºåˆ¶éœ€è¦ã€‚ åˆ›å»ºManaged ObjectsCore Dataæ¡†æž¶ä¸­çš„ Managed Objectsä¸ŽEntityä¹‹é—´çš„å…³ç³»ï¼Œæœ‰ç‚¹åƒä»£ç ä¸­ æŽ¥å£å˜é‡ å’Œ UI objectsä¹‹é—´çš„å…³ç³»ã€‚xcodeå¯è‡ªåŠ¨ç”ŸæˆManaged Objectsã€‚ é€‰ä¸­Restaurant Entityï¼Œåœ¨æ£€æŸ¥å™¨ä¸­ä¿®æ”¹classçš„nameä¸ºRestaurantMOï¼ŒCodegen ä¸º Class Definitionã€‚ command-R æˆ– comman-Bä¸€ä¸‹ï¼Œè¡¨é¢ä¸Šæ²¡æœ‰ä»€ä¹ˆå˜åŒ–ï¼Œåœ¨project navigatorä¸­æ²¡æœ‰å¤šå‡ºæ–‡ä»¶ã€‚å®žé™…ä¸Šå·²ç»ç”ŸæˆRestaurantMOç±»ï¼Œä»£ç å·²ç»å¯ä»¥ä½¿ç”¨äº†ï¼Œå¦‚æžœä½¿ç”¨command+ç‚¹å‡» RestaurantMOï¼Œå°±å¯ä»¥çœ‹åˆ°RestaurantMOçš„ä»£ç ï¼š ä¿®æ”¹ç›¸å…³å—å½±å“çš„ä»£ç  RestaurantTableViewController.swifté‡æ–°å®šä¹‰restaurants: var restaurants:[RestaurantMO] = []ç”±äºŽCoreDataä¸­å­˜å‚¨å›¾ç‰‡æ˜¯äºŒè¿›åˆ¶ï¼Œå¼•ç”¨æ—¶ä¸èƒ½ç”¨æ–‡ä»¶å: 12cell.thumbnailImageView.image = UIImage(data: restaurants[indexPath.row].imageas! Data) 12 if let imageToShare = UIImage(data: self.restaurants[indexPath.row].image as!Data) &#123; ç”±äºŽRestaurantMOçš„å±žæ€§å€¼æ˜¯å¯é€‰å€¼ï¼Œä½¿ç”¨æ—¶éœ€è¦è§£åŒ…ï¼š 1let defaultText = &quot;Just checking in at &quot; + self.restaurants[indexPath.row].name! RestaurantDetailViewController.swift 1var restaurant:RestaurantMO! 1restaurantImageView.image = UIImage(data: restaurant.image as! Data) 12 geoCoder.geocodeAddressString(restaurant.location!, completionHandler: &#123;placemarks, error in MapViewController.swift 1var restaurant:RestaurantMO! 1leftIconView.image = UIImage(data: restaurant.image as! Data) ReviewViewController.swift 1var restaurant:RestaurantMO! 1restaurantImageView.image = UIImage(data: restaurant.image as! Data) çŽ°åœ¨èƒ½æˆåŠŸè¿è¡Œï¼Œå‘çŽ°æ˜¯æ²¡æœ‰æ•°æ®çš„ã€‚ ä¿å­˜æ–°æ•°æ®åˆ°æ•°æ®åº“ åœ¨AddTableViewController.swiftä¸­å¼•å…¥Core Dataï¼šimport CoreDataã€‚æ·»åŠ å˜é‡var restaurant:RestaurantMO!ã€‚ åœ¨AppDelegateä¸­åŠ å…¥ä¸Šé¢ä¾‹å­ä¸€ä¸ªå˜é‡å’Œä¸€æ–¹æ³•ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344// MARK: - Core Data stack lazy var persistentContainer: NSPersistentContainer = &#123; /* The persistent container for the application. This implementation creates and returns a container, having loaded the store for the application to it. This property is optional since there are legitimate error conditions that could cause the creation of the store to fail. */ let container = NSPersistentContainer(name: &quot;FoodPin&quot;) container.loadPersistentStores(completionHandler: &#123; (storeDescription, error) in if let error = error as NSError? &#123; // Replace this implementation with code to handle the error appropriately. // fatalError() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. /* Typical reasons for an error here include: * The parent directory does not exist, cannot be created, or disallows writing. * The persistent store is not accessible, due to permissions or data protection when the device is locked. * The device is out of space. * The store could not be migrated to the current model version. Check the error message to determine what the actual problem was. */ fatalError(&quot;Unresolved error \(error), \(error.userInfo)&quot;) &#125; &#125;) return container &#125;() // MARK: - Core Data Saving support func saveContext () &#123; let context = persistentContainer.viewContext if context.hasChanges &#123; do &#123; try context.save() &#125; catch &#123; // Replace this implementation with code to handle the error appropriately. // fatalError() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. let nserror = error as NSError fatalError(&quot;Unresolved error \(nserror), \(nserror.userInfo)&quot;) &#125; &#125; &#125; åœ¨AddTableViewControllerçš„saveæ–¹æ³•çš„dismissä¹‹å‰æ’å…¥ï¼š 123456789101112131415161718// 1if let appDelegate = (UIApplication.shared.delegate as? AppDelegate) &#123; restaurant = RestaurantMO(context: appDelegate.persistentContainer.viewContext) restaurant.name = nameTextField.text restaurant.type = typeTextField.text restaurant.location = locationTextField.text restaurant.isVisited = isVisited if let restaurantImage = photoImageView.image &#123; // 2 if let imageData = UIImagePNGRepresentation(restaurantImage) &#123; restaurant.image = NSData(data: imageData) &#125; &#125; print(&quot;Saving data to context ...&quot;) appDelegate.saveContext()&#125; UIApplication.sharedè¿™ç§å½¢å¼æ˜¯iOS SDKä¸­æ¯”è¾ƒå¸¸ç”¨å•ä¾‹æ¨¡å¼ï¼Œå°±æ˜¯é€šè¿‡ä¸€ä¸ªç±»å±žæ€§sharedèŽ·å–æ•´ä¸ªappè¿è¡Œè¿‡ç¨‹åªéœ€è¦ä¸€ä¸ªå®žä¾‹çš„æ–¹æ³•ã€‚UIApplication.shared.delegate as? AppDelegateå°±èŽ·å–äº†AppDelegateå¯¹è±¡ã€‚ èŽ·å–å›¾ç‰‡çš„äºŒè¿›åˆ¶æ•°æ®å¯¹è±¡ã€‚ è¿è¡Œï¼Œæ·»åŠ æ–°çš„restaurantåŽå¹¶æ²¡æœ‰åœ¨Food Pinä¸­æ˜¾ç¤ºï¼Œå®žé™…å·²ç»æ·»åŠ åˆ°æ•°æ®åº“ä¸­ï¼Œåœ¨RestaurantTableViewControlleré‡Œæ²¡æœ‰å‘æ•°æ®åº“èŽ·å–ã€‚ é€šè¿‡CoreDataèŽ·å–æ•°æ® åœ¨RestaurantTableViewController.swiftä¸­æ·»åŠ import CoreDataã€‚å®žçŽ°åè®®NSFetchedResultsControllerDelegateï¼Œè¿™ä¸ªåè®®ä¸­æœ‰æ–¹æ³•ï¼Œä»»ä½•æ—¶å€™å½“èŽ·å–æ¥çš„æ•°æ®æœ‰å˜åŒ–æ—¶ç«‹å³é€šçŸ¥ä»£ç†ã€‚class RestaurantTableViewController: UITableViewController, NSFetchedResultsControllerDelegate å®šä¹‰ä¸€ä¸ªå˜é‡var fetchResultController: NSFetchedResultsController&lt;RestaurantMO&gt;! åœ¨viewDidLoadä¸­æ·»åŠ  123456789101112131415161718192021// 1 let fetchRequest: NSFetchRequest&lt;RestaurantMO&gt; = RestaurantMO.fetchRequest()// 2let sortDescriptor = NSSortDescriptor(key: &quot;name&quot;, ascending: true)fetchRequest.sortDescriptors = [sortDescriptor]if let appDelegate = (UIApplication.shared.delegate as? AppDelegate) &#123; let context = appDelegate.persistentContainer.viewContext fetchResultController = NSFetchedResultsController(fetchRequest: fetchRequest, managedObjectContext: context, sectionNameKeyPath: nil, cacheName: nil) fetchResultController.delegate = self&#125;do &#123; // 3 try fetchResultController.performFetch() if let fetchedObjects = fetchResultController.fetchedObjects &#123; // 4 restaurants = fetchedObjects &#125;&#125; catch &#123; print(error)&#125; 1 ä»ŽRestaurantMOå¯¹è±¡èŽ·å¾—æ•°æ®è¯·æ±‚å¯¹è±¡NSFetchRequestã€‚ 2 é€šè¿‡NSSortDescriptoræ¥è®¾ç½®èŽ·å–ç»“æžœçš„æŽ’åºæ–¹å¼ã€‚ 3 performFetchæ–¹æ³•æ‰§è¡Œä»Žæ•°æ®åº“ä¸­èŽ·å–æ•°æ®è¯·æ±‚ã€‚ 4 æŠŠè¯·æ±‚ç»“æžœå¤åˆ¶ç»™å˜é‡restaurantsã€‚ æ•°æ®åº“ä¸­æ•°æ®å˜åŒ–ï¼Œå°†è°ƒç”¨æ¥è‡ªNSFetchedResultsControllerDelegateä¸‰ä¸ªæ–¹æ³•ï¼Œè°ƒç”¨ä¸‰ä¸ªæ–¹æ³•çš„æ—¶é—´å¯ä»¥ç®€å•çš„ç†è§£åˆ†åˆ«ä¸ºæ•°æ®å°†è¦æ”¹å˜ã€æ•°æ®æ­£åœ¨æ”¹å˜ã€æ•°æ®æ”¹å˜åŽï¼šcontrollerWillChangeContent(_:)controller(_:didChange:at:for:newIndexPath:)controllerDidChangeContent(_:) æ–¹æ³•çš„å®žçŽ°ï¼Œä¹Ÿåˆ†åˆ«å¯¹table viewæœ‰ä¸åŒå¤„ç†ï¼š 123456789101112131415161718192021222324252627282930func controllerWillChangeContent(_ controller: NSFetchedResultsController&lt;NSFetchRequestResult&gt;) &#123; tableView.beginUpdates()&#125;func controller(_ controller: NSFetchedResultsController&lt;NSFetchRequestResult&gt;, didChange anObject: Any, at indexPath: IndexPath?, for type: NSFetchedResultsChangeType, newIndexPath: IndexPath?) &#123; switch type &#123; case .insert: if let newIndexPath = newIndexPath &#123; tableView.insertRows(at: [newIndexPath], with: .fade) &#125; case .delete: if let indexPath = indexPath &#123; tableView.deleteRows(at: [indexPath], with: .fade) &#125; case .update: if let indexPath = indexPath &#123; tableView.reloadRows(at: [indexPath], with: .fade) &#125; default: tableView.reloadData() &#125; if let fetchedObjects = controller.fetchedObjects &#123; restaurants = fetchedObjects as! [RestaurantMO] &#125;&#125;func controllerDidChangeContent(_ controller: NSFetchedResultsController&lt;NSFetchRequestResult&gt;) &#123; tableView.endUpdates()&#125; çŽ°åœ¨è¿è¡Œç¨‹åºï¼Œæ·»åŠ æ–°çš„Restaurantå°±èƒ½åŒæ­¥æ˜¾ç¤ºäº†ã€‚ é€šè¿‡CoreDataåˆ é™¤æ•°æ®æ›´æ–°RestaurantTableViewControllerçš„tableView(_:editActionsForRowAt:_)æ–¹æ³•ä¸­çš„ deleteActionã€‚1234567891011let deleteAction = UITableViewRowAction(style: .default, title: &quot;Delete&quot;, handler: &#123; (action, indexPath) -&gt; Void in if let appDelegate = (UIApplication.shared.delegate as? AppDelegate) &#123; let context = appDelegate.persistentContainer.viewContext let restaurantToDelete = self.fetchResultController.object(at: indexPath) context.delete(restaurantToDelete) appDelegate.saveContext() &#125; &#125;) çŽ°åœ¨åˆ é™¤ä¸€é¡¹åŽï¼Œé‡æ–°å¯åŠ¨åŽï¼Œæ•°æ®æ¶ˆå¤±ã€‚ æ›´æ–°æ•°æ®æ›´æ–°RestaurantDetailViewControllerçš„ä¸­çš„ActionratingButtonTapped: ï¼š12345678910111213141516171819202122@IBAction func ratingButtonTapped(segue: UIStoryboardSegue) &#123; if let rating = segue.identifier &#123; restaurant.isVisited = true switch rating &#123; case &quot;great&quot;: restaurant.rating = &quot;Absolutely love it! Must try.&quot; case &quot;good&quot;: restaurant.rating = &quot;Pretty good.&quot; case &quot;dislike&quot;: restaurant.rating = &quot;I don&apos;t like it.&quot; default: break &#125; &#125; if let appDelegate = (UIApplication.shared.delegate as? AppDelegate) &#123; appDelegate.saveContext() &#125; tableView.reloadData()&#125; çŽ°åœ¨è¯„ä»·ä¸€é¡¹åŽï¼Œé‡æ–°å¯åŠ¨åŽè¯„ä»·å°±ä¼šä¿ç•™ã€‚ Exerciseï¼šæ·»åŠ æ–°å­—æ®µä¹‹å‰æ–°å»ºRestauranté¡µé¢æ²¡æœ‰Phoneå­—æ®µï¼ŒçŽ°åœ¨æ·»åŠ  åœ¨SBçš„New Restaurantæ·»åŠ æ–°Cellï¼Œåœ¨AddRestaurantControllerä¸­æ·»åŠ ç›¸å…³æŽ¥å£å¹¶å…³è”ã€‚ æ›´æ–°AddRestaurantControllerä¸­çš„save:Actionç›¸å…³ä»£ç ã€‚ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 15 ä½¿ç”¨åœ°å›¾]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-15.html</url>
    <content type="text"><![CDATA[ç»§ç»­ä¸Šä¸€ç›˜å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 14 åŸºç¡€åŠ¨ç”»ï¼Œæ¨¡ç³Šæ•ˆæžœå’ŒUnwind Segueï¼Œè¿™ä¸€ç¯‡ä½¿ç”¨åœ°å›¾ã€‚æ·»åŠ MapKitæ¡†æž¶ï¼š æ·»åŠ Mapåˆ°åº”ç”¨ä¸­æ•ˆæžœå›¾å¦‚ä¸‹ï¼š åœ¨Detail viewçš„table viewåº•éƒ¨æ·»åŠ ä¸€ä¸ªMap Viewã€‚é«˜åº¦è®¾ç½®ä¸º135ï¼Œå–æ¶ˆä¸€äº›å±žæ€§zooming, scrolling, rotatingç­‰ï¼Œä½¿åœ°å›¾æ²¡æœ‰äº¤äº’åŠŸèƒ½ã€‚ åˆ é™¤ä¹‹å‰åŽ»æŽ‰table viewåº•éƒ¨çš„ä»£ç ï¼Œè®©åº•éƒ¨æ˜¾ç¤ºã€‚tableView.tableFooterView = UIView(frame: CGRect.zero) æ·»åŠ æ–°çš„è§†å›¾æŽ§åˆ¶å™¨ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ Map Viewï¼Œè°ƒæ•´å¤§å°ä¸ºå…¨å±ã€‚ control-dragä»Ždetailè§†å›¾æŽ§åˆ¶å™¨åˆ°æ–°çš„åœ°å›¾è§†å›¾æŽ§åˆ¶å™¨ï¼Œé€‰æ‹©showã€‚å› ä¸ºtable viewçš„å¤´éƒ¨å’Œåº•éƒ¨æ˜¯ä¸èƒ½é€‰æ‹©çš„ï¼Œæ‰€æœ‰ä¸èƒ½ä»Žtable viewçš„åº•éƒ¨control-dragåˆ°åœ°å›¾è§†å›¾æŽ§åˆ¶å™¨ã€‚ ä¸ºäº†èƒ½æ£€æµ‹çš„table viewåº•éƒ¨mapçš„æ˜¯å¦è¢«æŽ¥è§¦ï¼Œéœ€è¦ä¸ºåœ°å›¾æ·»åŠ UITapGestureRecognizer ã€‚åœ¨RestaurantDetailViewController.swiftä¸­å¼•å…¥ import MapKit;å®šä¹‰åœ°å›¾æŽ¥å£@IBOutlet var mapView: MKMapView!ï¼Œå¹¶å…³è”;åœ¨viewDidLoadä¸­æ·»åŠ ï¼š12let tapGestureRecognizer = UITapGestureRecognizer(target: self, action: #selector(showMap))mapView.addGestureRecognizer(tapGestureRecognizer) å¦å¤–æ·»åŠ æ–¹æ³•ï¼š123func showMap() &#123; performSegue(withIdentifier: &quot;showMap&quot;, sender: self)&#125; ç”¨Geocoderè½¬æ¢åœ°å€åˆ°ç»çº¬åº¦ç±»ä¼¼ä¸‹é¢ï¼š1234567let geoCoder = CLGeocoder()geoCoder.geocodeAddressString(&quot;ä¸Šæµ·ä¸œæ–¹æ˜Žç &quot;, completionHandler: &#123; placemarks, error in for p in placemarks! &#123; print(p.location?.coordinate) &#125;&#125;) placemarksæ˜¯CLPlacemarkçš„æ•°ç»„ã€‚ åœ°å›¾æ ‡æ³¨ï¼ˆannotationï¼‰ä»‹ç»é€šè¿‡åœ°å€æ–‡æœ¬èŽ·å¾—ç»çº¬åº¦åŽå°±å¯åœ¨åœ°å›¾ä¸Šæ ‡æ³¨æŒ‡ç¤ºï¼Œç±»ä¼¼ä¸‹é¢çš„æ ·å­ï¼š åœ°å›¾æ ‡æ³¨çš„ä»£ç ä¸€èˆ¬å¦‚ä¸‹ï¼Œå…ˆé€šè¿‡åœ°å€æ–‡æœ¬ç”Ÿæˆçš„ç»çº¬åº¦ï¼Œè§„å®šMKPointAnnotationçš„ç»çº¬åº¦ï¼Œç„¶åŽæŠŠMKPointAnnotationæ·»åŠ åˆ°åœ°å›¾è§†å›¾ä¸­å³å¯ã€‚12345let annotation = MKPointAnnotation()if let location = placemark.location &#123; annotation.coordinate = location.coordinate mapView.addAnnotation(annotation)&#125; ä¸ºæ²¡æœ‰äº¤äº’çš„åœ°å›¾æ·»åŠ æ ‡æ³¨åœ¨RestaurantDetailViewController.swiftçš„viewDidLoadä¸­æ·»åŠ ï¼š123456789101112131415161718192021222324252627let geoCoder = CLGeocoder()geoCoder.geocodeAddressString(restaurant.location, completionHandler: &#123; placemarks, error in if error != nil &#123; print(error) return &#125; if let placemarks = placemarks &#123; let placemark = placemarks[0] let annotation = MKPointAnnotation() if let location = placemark.location &#123; annotation.coordinate = location.coordinate self.mapView.addAnnotation(annotation) // è§„å®šåœ°å›¾æ˜¾ç¤ºåŠå¾„ 250ç±³ let region = MKCoordinateRegionMakeWithDistance(annotation.coordinate, 250, 250) self.mapView.setRegion(region, animated: false) &#125; &#125;&#125;)``` ### ä¸ºå…¨å±çš„åœ°å›¾æ·»åŠ æ ‡æ³¨- æ–°å»ºä¸€ä¸ªè§†å›¾æŽ§åˆ¶å™¨`MapViewController`ï¼Œå…³è”å…¨å±åœ°å›¾æŽ§åˆ¶å™¨ï¼Œå¼•å…¥åœ°å›¾æ¡†æž¶ `import MapKit`ã€‚- ç¬¬ä¸€ä¸ªåœ°å›¾æŽ¥å£å’Œ`restaurant`å˜é‡ @IBOutlet var mapView: MKMapView!var restaurant:Restaurant!1- æ›´æ–°`viewDidLoad`ï¼š override func viewDidLoad() { super.viewDidLoad() let geoCoder = CLGeocoder() geoCoder.geocodeAddressString(restaurant.location, completionHandler: { placemarks, error in if error != nil { print(error) return } if let placemarks = placemarks { // Get the first placemark let placemark = placemarks[0] // 1 let annotation = MKPointAnnotation() annotation.title = self.restaurant.name annotation.subtitle = self.restaurant.type if let location = placemark.location { annotation.coordinate = location.coordinate // 2 self.mapView.showAnnotations([annotation], animated: true) self.mapView.selectAnnotation(annotation, animated: true) } } }) } 123456 + 1 è®¾ç½®`MKPointAnnotation`ä¸€äº›å±žæ€§ + 2 åœ¨åœ°å›¾å±•ç¤ºæ ‡æ³¨ã€‚åœ°å›¾ä¸Šè¯¾å±•ç¤ºå¾ˆå¤šæ ‡æ³¨ã€‚`selectAnnotation:`æ–¹æ³•æ˜¯æ ‡æ³¨æ˜¾ç¤ºè¢«é€‰ä¸­çš„æ ·å¼ã€‚### åœ¨æ ‡æ³¨ä¸­æ·»åŠ å›¾ç‰‡- è®©`MapViewController`å®žçŽ°`MKMapViewDelegate`åè®®ï¼Œå¹¶åœ¨`viewDidLoad`ä¸­è®¾ç½®`mapView.delegate = self`- æ·»åŠ `mapView(_:viewFor:)`æ–¹æ³•ï¼Œå½“åœ°å›¾æ¯æ¬¡éœ€è¦annotationæ—¶è°ƒç”¨ï¼š func mapView(_ mapView: MKMapView, viewFor annotation: MKAnnotation) -&gt; MKAnnotationView? { let identifier = &quot;MyPin&quot; // 1 if annotation.isKind(of: MKUserLocation.self) { return nil } // 2 var annotationView: MKPinAnnotationView? = mapView.dequeueReusableAnnotationView(withIdentifier: identifier) as? MKPinAnnotationView if annotationView == nil { annotationView = MKPinAnnotationView(annotation: annotation, reuseIdentifier: identifier) annotationView?.canShowCallout = true } // 3 let leftIconView = UIImageView(frame: CGRect(x: 0, y: 0, width: 53, height: 53)) leftIconView.image = UIImage(named: restaurant.image) annotationView?.leftCalloutAccessoryView = leftIconView // 4 annotationView?.pinTintColor = UIColor.orange return annotationView } ``` 1 åˆ¤æ–­æ˜¯å¦ç”¨æˆ·å½“å‰ä½ç½®ã€‚ç”¨æˆ·å½“å‰ä½ç½®ç®—æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ ‡æ³¨ï¼Œæ˜¯å½“å‰ä½ç½®ï¼Œå°±ä¸éœ€è¦å¦å¤–æ·»åŠ æ ‡æ³¨äº†ã€‚ 2 åˆ›å»ºMKPinAnnotationViewã€‚æœ‰ç‚¹ç±»ä¼¼åˆ›å»ºtable view cellã€‚ 3 åœ¨MKPinAnnotationViewä¸Šæ·»åŠ å›¾ç‰‡ã€‚ 4 æ”¹å˜æ ‡æ³¨é’ˆçš„é¢œè‰²ã€‚ åœ°å›¾å®šåˆ¶mapView.showsCompass = true mapView.showsScale = true mapView.showsTraffic = true showsCompassè¡¨ç¤ºåœ¨å³ä¸Šè§’æ˜¾ç¤ºç½—ç›˜ã€‚showsScale è¡¨ç¤ºåœ¨å·¦ä¸Šè§’æ˜¾ç¤ºç¼©æ”¾æ¯”ä¾‹å°ºã€‚ showsTrafficè¡¨ç¤ºæ˜¾ç¤ºäº¤é€šä¿¡æ¯ã€‚ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 16 ä»‹ç»é™æ€Table Viewsï¼ŒUIImagePickerControllerå’ŒNSLayoutConstraint]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-16.html</url>
    <content type="text"><![CDATA[ç»§ç»­ä¸Šä¸€ç¯‡å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 15 ä½¿ç”¨åœ°å›¾ï¼Œè¿™ä¸€ç¯‡é€šè¿‡æ·»åŠ ä¸€ä¸ªæ–°å»ºRestauranté¡µé¢æ¥ä»‹ç»é™æ€Table Viewsï¼ŒUIImagePickerControllerï¼ŒNSLayoutConstraintã€‚é™æ€Table Viewså°±æ˜¯å›ºå®šcellæ•°ç›®çš„Table Viewsï¼›UIImagePickerControllerç”¨æ¥ä»Žè®¾å¤‡å›¾ç‰‡åº“ä¸­èŽ·å–å›¾ç‰‡ï¼›NSLayoutConstraintå°±æ˜¯çº¦æŸç±»ï¼Œç”¨æ¥ç”¨ä»£ç å½¢å¼æ·»åŠ çº¦æŸã€‚ æ·»åŠ æ–°çš„Table View Controller æ‹–åŠ¨ä¸€ä¸ªTable View Controlleråˆ°SBä¸­ã€‚ ä¿®æ”¹æˆTable Viewçš„contentä¸ºstatic cellsã€‚ é€‰ä¸­Table View Sectionï¼Œä¿®æ”¹Rowsæˆ5ã€‚ ä¸‹è½½ [å›¾ç‰‡] (http://www.appcoda.com/resources/swift3/photoicons.zip)ï¼Œæ‹–è¿›`Assets` ä¿®æ”¹ç¬¬ä¸€ä¸ªCellé«˜åº¦ä¸º250ã€‚æ·»åŠ Image Viewï¼Œ imageä¸ºphotoalbumï¼Œå¤§å°64*64ï¼Œæ°´å¹³å’Œåž‚ç›´å±…ä¸­ã€‚ ç¬¬äºŒä¸ªcellé«˜åº¦ä¸º72ã€‚æ·»åŠ ä¸€ä¸ªLabelæ–‡æœ¬NAMEã€‚æ·»åŠ ä¸€ä¸ªText Field,placeholderä¸ºRestaurant Nameï¼Œborder styleä¸º noneï¼Œå®½åº¦ä¸º339ã€‚æ·»åŠ é€‚å½“çº¦æŸã€‚ ç¬¬ä¸‰ä¸ªå’Œç¬¬å››ä¸ªCellä¸Žç¬¬äºŒä¸ªç±»ä¼¼ï¼ŒLabelæ–‡æœ¬åˆ†åˆ«ä¸ºTYPE LOCATIONï¼ŒText Fieldçš„ placeholder åˆ†åˆ«ä¸ºRestaurant Typeï¼ŒRestaurant Locationã€‚ ç¬¬äº”ä¸ª é«˜åº¦ä¸º72ã€‚ æ·»åŠ ä¸€ä¸ªLabelæ–‡æœ¬Have You Been Here ã€‚æ·»åŠ ä¸¤ä¸ªButtonï¼Œtitleåˆ†åˆ«ä¸ºYESã€NOï¼Œå­—ä½“é¢œè‰²éƒ½ä¸ºwhiteï¼ŒèƒŒæ™¯é¢œè‰²åˆ†åˆ«ä¸ºredï¼Œgrayã€‚ æ·»åŠ segue åœ¨Food Pin Controllerçš„Navigation barçš„å³è¾¹æ·»åŠ ä¸€ä¸ªbar button itemï¼ŒSystem Itemä¸ºAddã€‚ æŠŠä¸Šé¢æ–°å»ºæ˜¯æˆ‘table view controllerå†…åµŒåœ¨ä¸€ä¸ªNavigation controllerä¸­ï¼Œé€‰ä¸­table view controllerï¼Œåœ¨èœå•æ ä¸­é€‰æ‹©Editor &gt; Embed in &gt; Navigation Controllerï¼Œè®¾ç½®å…¶navigation barçš„titleä¸ºNew Restaurantã€‚ å…³è”AddæŒ‰é’®å’ŒNew Restaurant Controllerçš„Navigation controllerï¼Œsegueç±»åž‹present modallyï¼Œidentifierä¸ºaddRestaurantã€‚ åœ¨New Restaurant Controllerçš„Navigation barçš„å·¦è¾¹æ·»åŠ ä¸€ä¸ªbar button itemï¼ŒSystem Itemä¸º Cancelï¼Œtintä¸ºwhiteã€‚ åœ¨RestaurantTableViewControllerä¸­æ·»åŠ unwind segueçš„actionã€‚ç”¨control-dragå…³è”ã€‚ 12@IBAction func unwindToHomeScreen(segue:UIStoryboardSegue) &#123;&#125; ä½¿ç”¨UIImagePickerControllerè°ƒç”¨ç›¸å†Œ æ–°å»ºAddRestaurantControllerï¼Œç»§æ‰¿è‡³UITableViewControllerã€‚å…³è”New Restaurant Controllerã€‚ åˆ é™¤é™¤äº†viewDidLoadæ–¹æ³•çš„å…¶ä»–æ–¹æ³•ï¼Œé™æ€ç±»åž‹ä¸éœ€è¦äº†ã€‚ æ·»åŠ tableView(_:didSelectRowAt:)ï¼š1234567891011override func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) &#123; if indexPath.row == 0 &#123; if UIImagePickerController.isSourceTypeAvailable(.photoLibrary) &#123; let imagePicker = UIImagePickerController() imagePicker.allowsEditing = false imagePicker.sourceType = .photoLibrary present(imagePicker, animated: true, completion: nil) &#125; &#125;&#125; é€‰æ‹©ç¬¬ä¸€ä¸ªcellï¼Œä¹Ÿå°±æ˜¯å›¾ç‰‡ï¼Œé€šè¿‡isSourceTypeAvailableæ–¹æ³•åˆ¤æ–­æ˜¯å¦æœ‰å›¾åº“å¯ç”¨ã€‚ åœ¨Info.plistä¸­æ·»åŠ ä½¿ç”¨å›¾åº“çš„è¯·æ±‚æè¿°ï¼Œ Privacy - Photo Library Usage Description -&gt; You need to grant the app access to your photo library so you can pick your favorite restaurant photo. ã€‚ å®žçŽ°UIImagePickerControllerDelegateåè®® æ·»åŠ UIImagePickerControllerDelegate å’ŒUINavigationControllerDelegate class AddRestaurantController: UITableViewController, UIImagePickerControllerDelegate, UINavigationControllerDelegate { æ·»åŠ æŽ¥å£@IBOutlet var photoImageView: UIImageView!ï¼Œå¹¶å…³è”ã€‚ æ·»åŠ å‡½æ•°imagePickerController(_:didFinishPickingMediaWithInfo:)ï¼Œå½“ç”¨æˆ·ä»Žå›¾åº“ä¸­é€‰æ‹©å›¾ç‰‡æ—¶è°ƒç”¨ã€‚ 12345678910func imagePickerController(_ picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : Any]) &#123; if let selectedImage = info[UIImagePickerControllerOriginalImage] as? UIImage &#123; photoImageView.image = selectedImage photoImageView.contentMode = .scaleAspectFill photoImageView.clipsToBounds = true &#125; dismiss(animated: TUREAD, completion: nil)&#125; åœ¨tableView(_:didSelectRowAt:)ä¸­çš„imagePickerå®šä¹‰åŽæ·»åŠ ï¼š imagePicker.delegate = self ç”¨ä»£ç çš„æ–¹å¼å®šä¹‰çº¦æŸä¹‹å‰éƒ½æ˜¯é€šè¿‡storyboardè®¾ç½®çº¦æŸï¼Œå…¶å®žä¹Ÿå¯ä»¥é€šè¿‡ä»£ç çš„å½¢å¼è®¾ç½®ã€‚ ä¹‹å‰çš„åœ°å›¾çš„çº¦æŸä¾‹å­ï¼Œstoryboard ä¸­çš„Map View.leading = leadingç­‰ä»·äºŽï¼š let leadingConstraint = NSLayoutConstraint(item: mapView, attribute: NSLayoutAttribute.leading, relatedBy: .equal, toItem: mapView.superview, attribute: .leading, multiplier: 1, constant: 0) leadingConstraint.isActive = true åœ¨æ·»åŠ imagePickerController(_:didFinishPickingMediaWithInfo:)çš„dismiss(animated: true, completion: nil)ä¹‹å‰æ·»åŠ 4ä¸ªçº¦æŸä»£ç ã€‚ 123456789let leadingConstraint = NSLayoutConstraint(item: photoImageView, attribute: .leading, relatedBy: .equal, toItem: photoImageView.superview, attribute: .leading, multiplier: 1, constant: 0) leadingConstraint.isActive = true let trailingConstrain = NSLayoutConstraint(item: photoImageView, attribute: .trailing, relatedBy: .equal, toItem: photoImageView.superview, attribute: .trailing, multiplier: 1, constant: 0) trailingConstrain.isActive = true let topConstraint = NSLayoutConstraint(item: photoImageView, attribute: .top, relatedBy: .equal, toItem: photoImageView.superview, attribute: .top, multiplier: 1, constant: 0) let buttomConstraint = NSLayoutConstraint(item: photoImageView, attribute: .bottom, relatedBy: .equal, toItem: photoImageView.superview, attribute: .bottom, multiplier: 1, constant: 0) æ·»åŠ çº¦æŸå‰åŽå¯¹æ¯”ï¼š Exerciseï¼šéªŒè¯æ·»åŠ æ•°æ® åœ¨New Restaurant Controllerçš„Navigation controllerçš„æœ‰å³ä¸Šè§’æ·»åŠ SaveæŒ‰é’®ã€‚ åœ¨AddRestaurantControllerä¸­æ·»åŠ äº”ä¸ªæŽ¥å£å’Œä¸€ä¸ªå˜é‡ï¼Œå¹¶å…³è”ã€‚ 123456@IBOutlet var nameTextField:UITextField!@IBOutlet var typeTextField:UITextField!@IBOutlet var locationTextField:UITextField!@IBOutlet var yesButton:UIButton!@IBOutlet var noButton:UIButton! var isVisited: Bool = true æ·»åŠ ä¸€ä¸ªActionï¼Œå…³è”saveæŒ‰é’®ã€‚ 1234567891011121314@IBAction func save(_ sender: Any) &#123; if (nameTextField.text?.isEmpty)! || (typeTextField.text?.isEmpty)! || (locationTextField.text?.isEmpty)! &#123; let alertController = UIAlertController(title: &quot;Oops&quot;, message: &quot;We can&apos;t proceed because one of the fields is blank....&quot;, preferredStyle: .alert) let alertAction = UIAlertAction(title: &quot;OK&quot;, style: .default, handler: nil) alertController.addAction(alertAction) present(alertController, animated: true, completion: nil) &#125; else &#123; print(nameTextField.text, typeTextField.text, locationTextField.text, isVisited) dismiss(animated: true, completion: nil)// performSegue(withIdentifier: &quot;unwindToHomeScreen&quot;, sender: self) &#125;&#125; åŽ»é™¤ Add Restaurant view controllerå›žåˆ°ä¸»ç•Œé¢æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€æ˜¯dismiss(animated: true, completion: nil)ï¼Œè€Œæ˜¯åˆ©ç”¨unwind segueã€‚ æ·»åŠ ä¸€ä¸ªAction toggleBeenHereButton:ï¼Œç”¨äºŽyesButtonå’ŒnoButtonçš„æ“ä½œã€‚1234567891011@IBAction func toggleBeenHereButton(sender: UIButton) &#123; if sender == yesButton &#123; isVisited = true yesButton.backgroundColor = UIColor.red noButton.backgroundColor = UIColor.gray &#125; else &#123; isVisited = false yesButton.backgroundColor = UIColor.gray noButton.backgroundColor = UIColor.red &#125;&#125; ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 14 åŸºç¡€åŠ¨ç”»ï¼Œæ¨¡ç³Šæ•ˆæžœå’ŒUnwind Segue]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-14.html</url>
    <content type="text"><![CDATA[åŠ¨ç”»æ˜¯é€šè¿‡ä¸€ç³»åˆ—é™æ€å›¾ç‰‡ï¼ˆå¸§ï¼‰å¿«é€Ÿæ˜¾ç¤ºæ¥æ¨¡æ‹ŸåŠ¨ä½œå’Œå½¢çŠ¶çš„å˜åŒ–è¿‡ç¨‹ã€‚ åœ¨iOSä¸­ï¼Œåˆ›å»ºåŸºç¡€åŠ¨ç”»å¾ˆç®€å•ï¼Œåªéœ€è¦åˆ©ç”¨UIViewçš„ç±»åž‹æ–¹æ³•ï¼šanimate(withDuration:animations:)ã€‚è¿™ä¸ªæ–¹æ³•çš„åŽŸç†å°±æ˜¯ï¼Œè®¾ç½®å¥½å¼€å§‹çŠ¶ä½“å’Œç»“æŸçŠ¶æ€ï¼Œç„¶åŽ UIView animation åˆ›å»ºä¸­é—´çš„è¿‡ç¨‹æ•ˆæžœã€‚ç»§ç»­ä¸Šä¸€ç¯‡å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 13 Self Sizing Cells and Dynamic Typeã€‚ æ·»åŠ è¯„çº§Button ä¸‹è½½å›¾ç‰‡åŒ…ï¼Œæ·»åŠ åˆ°xcassetsé‡Œã€‚ åœ¨detail viewå³ä¸Šè§’æ·»åŠ ä¸€ä¸ªButtonï¼Œè®¾ç½®å…¶å†…å®¹ä¸ºç©ºï¼Œimageä¸ºæ›´æ·»åŠ çš„å›¾ç‰‡checkï¼ˆä¸€ä¸ªå¯¹å‹¾å›¾æ ‡ï¼‰ï¼Œtypeä¸ºsystemï¼Œtintä¸ºwhiteã€‚ ä¸ºButtonæ·»åŠ å››ä¸ªçº¦æŸï¼Œå³ã€ä¸Šä¸¤ä¸ªspacingçº¦æŸï¼Œå®½åº¦å’Œé«˜åº¦çº¦æŸã€‚ åˆ›å»ºRestaurant Reviewè§†å›¾æŽ§åˆ¶å™¨ åœ¨storyboardä¸­æ–°å»ºä¸€ä¸ªView Controllerã€‚ åœ¨æ–°å»ºè§†å›¾æŽ§åˆ¶å™¨ä¸­æ·»åŠ Image Viewï¼Œå¹¶æ”¹å˜å…¶å¤§å°ä¸ºæ•´ä¸ªviewï¼Œå…ˆè®¾ç½®imageå±žæ€§ä¸ºä¸€ä¸ªéšæœºå›¾ç‰‡ï¼Œæ¯”å¦‚cafeloislã€‚ å¹¶è®¾ç½®ä¸€äº›çº¦æŸã€‚ æŒ‰ç…§ä¸‹å›¾è®¾ç½®ä¹‹åŽæ˜¯UIï¼š åœ¨Reviewçš„å›¾ç‰‡ä¸Šæ·»åŠ ä¸€ä¸ªUIViewï¼Œxã€yã€å®½åº¦ã€é«˜åº¦åˆ†åˆ«æ˜¯53ã€40ã€269ã€420ã€‚ æ·»åŠ Image Viewï¼Œå®½åº¦å’Œé«˜åº¦åˆ†åˆ«ä¸º269ï¼Œ200ï¼Œéšæœºè®¾ç½®image æ·»åŠ ä¸€ä¸ªå†…å®¹ä¸ºYou&#39;ve dined here. What do you think?çš„Labelã€‚å­—ä½“é£Žæ ¼ä¸ºLightï¼Œå¤§å°ä¸º27ï¼Œå±…ä¸­é€€å™¨ï¼Œè¡Œæ•°ä¸º2ã€‚ æ·»åŠ ä¸‰ä¸ªæŒ‰é’®å†…å®¹åˆ†åˆ«ä¸ºAbsolutely love it!ï¼ŒGoodï¼ŒI don&#39;t like itã€‚èƒŒæ™¯ä¸ºçº¢è‰²ï¼Œtintä¸ºwhiteï¼Œå­—ä½“æ˜¯Lightå’Œ16ã€‚ è®¾ç½®ä¸‰ä¸ªæŒ‰é’®ä¸ºä¸€ä¸ªstack viewï¼Œæ”¹å˜distributionä¸ºFill Equallyï¼Œspaingä¸º5ã€‚ ä¸ºä¸Šé¢æ·»åŠ çš„UIViewæ·»åŠ å››ä¸ªçº¦æŸã€‚ä¸Šå·¦å³çš„spacingçº¦æŸåˆ†åˆ«ä¸º20ï¼Œ37ï¼Œ37ã€‚é«˜åº¦çº¦æŸä¸º420ã€‚ ä¸ºlabelæ·»åŠ å·¦å³ä¸‹ä¸‰ä¸ªspacingçº¦æŸï¼Œå€¼éƒ½æ˜¯15ã€‚ ä¸ºstack viewå¤©æœºå·¦å³ä¸‹ä¸‰ä¸ªspacingçº¦æŸï¼Œåˆ†åˆ«ä¸º8ï¼Œ8ï¼Œ10ã€‚ åˆ›å»ºPresent modallyç±»åž‹çš„Segueåœ¨å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 10 Navigation Controllerçš„ä»‹ç»å’ŒSegueä¸­ä»‹ç»è¿‡Segueç±»åž‹ã€‚Present modallyæ˜¯æ–°é¡µé¢å°†ä»¥åŠ¨ç”»å½¢å¼ä»Žåº•éƒ¨å‡ºçŽ°åˆ°è¦†ç›–æ•´ä¸ªæ‰‹æœºå±å¹•ã€‚ contrl-dragä»Žå¯¹å‹¾buttonåˆ°Reviewè§†å›¾æŽ§åˆ¶ï¼Œé€‰æ‹©Present modallyã€‚å¹¶è®¾ç½®æ–°ç”Ÿæˆsegueçš„identifierä¸ºshowReviewã€‚ å®šä¹‰å¦‚ä½•é€€å‡ºReview View Controlleråœ¨Navigation Controllerä¸­è‡ªå¸¦äº†è¿”å›žæŒ‰é’®ï¼Œè¿™è¾¹éœ€è¦è‡ªå·±è®¾ç½®unwind segueã€‚ åœ¨Review View Controllerä¸­çš„UIViewçš„å³ä¸Šè§’æ·»åŠ ä¸€ä¸ªå…³é—­æŒ‰é’®ï¼Œç±»ä¼¼äºŽå¯¹å‹¾æŒ‰é’®ï¼Œæ·»åŠ å³ä¸Šå’Œå®½åº¦é«˜åº¦çº¦æŸã€‚ ä¸ºäº†å®žçŽ°unwind segueï¼Œéœ€è¦åšä¸¤ä»¶äº‹ï¼šé¦–å…ˆï¼Œåœ¨è¿”å›žçš„çš„è§†å›¾æŽ§åˆ¶å™¨ï¼ˆRestaurantDetailViewControllerï¼‰ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œå®šä¹‰è¿™ä¸ªæ–¹æ³•æ˜¯ä¸ºäº†å‘Šè¯‰xcodeè¿™ä¸ªsegueæ˜¯å¯ä»¥è¿”å›žçš„ã€‚12@IBAction func close(segue:UIStoryboardSegue) &#123;&#125; å…¶æ¬¡åœ¨IBä¸­å…³è”è¿”å›žã€‚control+dragå…³é—­æŒ‰é’®åˆ°Exitï¼Œé€‰æ‹©closeWithSegue:ã€‚ ä¸ºèƒŒæ™¯å›¾ç‰‡æ·»åŠ æ¨¡ç³Šæ•ˆæžœUIVisualEffectView æ–°å»ºReviewViewControllerç»§æ‰¿è‡³UIViewControllerï¼Œå…³è”ä¸Šé¢æ–°å»ºè§†å›¾æŽ§åˆ¶å™¨ã€‚ åœ¨ReviewViewControllerä¸­æ·»åŠ èƒŒæ™¯å›¾ç‰‡ç»“æž„ï¼Œå¹¶å…³è”å›¾ç‰‡ã€‚@IBOutlet var backgroundImageView: UIImageView! åœ¨ReviewViewControllerçš„viewDidLoadä¸­æ·»åŠ ï¼š1234let blurEffect = UIBlurEffect(style: .dark)let blurEffectView = UIVisualEffectView(effect: blurEffect)blurEffectView.frame = view.boundsbackgroundImageView.addSubview(blurEffectView) æ¨¡ç³Šæ•ˆæžœæœ‰ç‚¹åƒåœ¨è¦æ·»åŠ çš„è§†å›¾ä¸Šé¢æ·»åŠ ä¸€ä¸ªè§†å›¾(UIVisualEffectView)ï¼Œè¿™å›¾æœ‰æ¨¡ç³Šæ•ˆæžœ(UIBlurEffect)ï¼Œæ¨¡ç³Šæ ·å¼é€šè¿‡UIBlurEffectStyleæŽ§åˆ¶ï¼Œæœ‰ä¸‰ç§extraLight, light, darkã€‚ å®žçŽ° UIView Animation ä¸ºå‡†å¤‡å®žçŽ°åŠ¨ç”»æ•ˆæžœçš„UIViewæ·»åŠ æŽ¥å£ï¼Œå¹¶å…³è”ã€‚@IBOutlet var containerView: UIView! å®šä¹‰åˆå§‹çŠ¶æ€ï¼šåœ¨ReviewViewControllerçš„viewDidLoadä¸­æ·»åŠ :containerView.transform = CGAffineTransform.init(scaleX: 0, y: 0) å®šä¹‰ä»‹ç»çŠ¶æ€ï¼šåœ¨ReviewViewControllerçš„viewDidAppearä¸­æ·»åŠ ï¼š12345override func viewDidAppear(_ animated: Bool) &#123; UIView.animate(withDuration: 0.3, animations: &#123; self.containerView.transform = CGAffineTransform.identity &#125;)&#125; CGAffineTransform.identityè¡¨ç¤ºåŽŸæœ¬è®¾ç½®çš„å¤§å°å’Œä½ç½®çŠ¶æ€ã€‚ Spring åŠ¨ç”»åªè¦ä¿®æ”¹ä¸€ä¸‹ç»“æŸçŠ¶æ€å°±å¯ä»¥äº†ï¼š123UIView.animate(withDuration: 0.4, delay: 0.0, usingSpringWithDamping: 0.3, initialSpringVelocity: 0.2, options: .curveEaseInOut, animations: &#123; self.containerView.transform = CGAffineTransform.identity&#125;, completion: nil) ä»Žä¸Šå‘ä¸‹çš„åŠ¨ç”»åªè¦ä¿®æ”¹ä¸€ä¸‹åˆå§‹çŠ¶æ€ï¼ŒæŠŠåˆå§‹ä½ç½®è®¾ç½®åœ¨ä¸Šé¢å³å¯ï¼š1containerView.transform = CGAffineTransform.init(translationX: 0, y: -1000) ç»„åˆä¸¤ç§å˜åŒ–æŠŠcontainerView.transform = CGAffineTransform.init(translationX: 0, y: -1000)ä¿®æ”¹æˆï¼š1234let scaleTransform = CGAffineTransform.init(scaleX: 0, y: 0)let translateTransform = CGAffineTransform.init(translationX: 0, y: -1000)let combineTransform = scaleTransform.concatenating(translateTransform)containerView.transform = combineTransform Unwind Segues å’Œæ•°æ®ä¼ è¾“åœ¨Review Viewä¸­ç‚¹å‡»ä¸‰ä¸ªä¸åŒè¯„ä»·æŒ‰é’®ä¹Ÿé€šè¿‡Unwind Seguesè¿”å›žå¹¶ä¼ è¾“æ•°æ®ã€‚ åœ¨RestaurantDetailViewControlleråœ¨æ·»åŠ å¦å¤–ä¸€ä¸ªunwind actionæ–¹æ³•ã€‚ 12@IBAction func ratingButtonTapped(segue: UIStoryboardSegue) &#123;&#125; åˆ†åˆ«å¯¹ä¸‰ä¸ªæŒ‰é’®control+dragåˆ°Exitï¼Œé€‰æ‹©ratingButtonTappedWithSegue:ï¼Œå¹¶åˆ†åˆ«æŠŠä¸‰ä¸ªunwind segueçš„identifieræ”¹æˆ great good dislikeã€‚ åœ¨Restaurantä¸­æ·»åŠ ratingå±žæ€§ï¼š var rating = &quot;&quot; æ›´æ–° ratingButtonTapped(segue:)ï¼š 1234567891011121314151617@IBAction func ratingButtonTapped(segue: UIStoryboardSegue) &#123; if let rating = segue.identifier &#123; restaurant.isVisited = true switch rating &#123; case &quot;greate&quot;: restaurant.rating = &quot;Absolutely love it! Must try.&quot; case &quot;good&quot;: restaurant.rating = &quot;Pretty good.&quot; case &quot;dislike&quot;: restaurant.rating = &quot;I don&apos;t like it.&quot; default: break &#125; &#125; tableView.reloadData()&#125; æ›´æ–°RestaurantDetailViewControllerçš„tableView(_:cellForRowAt:)ä¸­å½“fieldLabelä¸ºâ€œBeen hereâ€çš„valueLabelçš„å€¼ï¼š cell.valueLabel.text = (restaurant.isVisited) ? &quot;Yes, I&apos;ve been herebefore. \(restaurant.rating)&quot; : &quot;No&quot; ä¿®æ”¹ReviewViewControllerä¸­çš„å›¾ç‰‡ä¸ºç›¸åº”çš„å›¾ç‰‡ åœ¨ReviewViewControllerä¸­æ·»åŠ ä¸€ä¸ªå±žæ€§ï¼švar restaurant: Restaurant! åœ¨RestaurantDetailViewControllerä¸­æ·»åŠ prepare(for:sender:)æ–¹æ³•ï¼Œä½œä¸ºRestaurantDetailViewControlleråˆ°ReviewViewControllerçš„segueæ—¶è°ƒç”¨ï¼Œç”¨äºŽä¼ è¾“æ•°æ®ã€‚ 123456override func prepare(for segue: UIStoryboardSegue, sender: Any?) &#123; if segue.identifier == &quot;showReview&quot; &#123; let destinationController = segue.destination as! ReviewViewController destinationController.restaurant = self.restaurant &#125;&#125; åœ¨ReviewViewController ä¸­æ·»åŠ å›¾ç‰‡æŽ¥å£ã€‚@IBOutlet var topImageView: UIImageView! åœ¨ReviewViewControllerçš„viewDidLoadä¸­æ˜¾ç¤ºå›¾ç‰‡ï¼š123let image = UIImage(named: self.restaurant.image)backgroundImageView.image = imagetopImageView.image = image ä¸ºcloseButtonæ·»åŠ åŠ¨ç”»æ•ˆæžœ æ·»åŠ æŽ¥å£@IBOutlet var closeButton: UIButton! åœ¨viewDieLoadä¸­æ·»åŠ ï¼šcloseButton.transform = CGAffineTransform.init(scaleX: 1000, y: 0) åœ¨ viewDidAppear:æ·»åŠ ï¼š12345UIView.animate(withDuration: 0.5, delay: 0.5, usingSpringWithDamping: 0.7, initialSpringVelocity: 0.3, options: .curveEaseInOut, animations: &#123; self.closeButton.transform = CGAffineTransform.identity &#125;, completion: nil) ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[OCåŸºç¡€å­¦ä¹ 6ï¼šFondation-Kitä»‹ç»]]></title>
    <url>%2F2017%2Foc-basic-6.html</url>
    <content type="text"><![CDATA[12macOS -&gt; Cocoa -&gt; Foundation, AppKitiOS -&gt; Cocoa Touch -&gt; Foundation, UIKit(UIView, UIController) Foundationæ¡†æž¶çš„åŸºç¡€æ˜¯CoreFoundationï¼ˆCè¯­è¨€ï¼‰ï¼Œå¦‚æžœå‡½æ•°æˆ–å˜é‡æ˜¯ä»¥CFå¼€å¤´ï¼Œå°±æ˜¯CoreFoundationæ¡†æž¶ä¸­çš„ã€‚ Foundationä¸­ä¸€äº›æœ‰ç”¨çš„æ•°æ®ç±»åž‹èŒƒå›´ï¼š NSRange1234typedef struct _NSRange &#123; NSUInteger location; NSUInteger length;&#125; NSRange; è¡¨ç¤ºç›¸å…³äº‹åŠ¡çš„èŒƒå›´ã€‚æœ‰ä¸‰ç§æ–¹å¼åˆå§‹åŒ–ï¼š ç›´æŽ¥ç»™å­—æ®µèµ‹å€¼ï¼š 123NSRange range;range.location = 12;range.length = 5; åº”ç”¨Cè¯­è¨€çš„èšåˆç»“æž„èµ‹å€¼ï¼šNSRange range = {17, 4} å‡½æ•°NSMakeRange()ï¼šNSRange range3 = NSMakeRange(12, 5);è¿™ä¸ªæ–¹æ³•çš„å¥½å¤„æ˜¯å¯ä»¥åœ¨ä»»ä½•èƒ½å¤Ÿä½¿ç”¨å‡½æ•°çš„åœ°æ–¹ç›´æŽ¥ä½¿ç”¨ï¼š[anObject flarbulateWithRange: NSMakeRange(13, 15)]; å‡ ä½•æ•°æ®ç±»åž‹CGå‰ç¼€ï¼Œè¡¨ç¤ºCore Graphicsæ¡†æž¶ï¼ˆCè¯­è¨€ï¼‰ï¼Œç”¨æ¥è¿›è¡Œ2Dæ¸²æŸ“ã€‚ CGPointè¡¨ç¤ºåæ ‡ 12345struct CGPoint&#123; float x; float y;&#125; CGSizeè¡¨ç¤ºå¤§å°ï¼Œç”¨æ¥å­˜å‚¨é•¿åº¦å’Œå®½åº¦ 12345struct CGSize&#123; float width; float height;&#125; CGRect è¡¨ç¤ºçŸ©å½¢ï¼Œç”±åæ ‡å’Œå¤§å°å¤åˆè€Œæˆ 12345struct CGRect&#123; CGPoint origin; CGSize size;&#125; å¯¹åº”åˆ›å»ºå‡½æ•°ï¼š CGPointMake(), CGSizeMake(), CGRectMake() é›†åˆæ•°æ®ç±»åž‹æ˜¯Cè¯­è¨€ç»“æž„ä½“è€Œä¸æ˜¯ç±»ï¼Œæ˜¯è€ƒè™‘æ€§èƒ½çš„åŽŸå› ã€‚ å­—ç¬¦ä¸²å­—ç¬¦ä¸²ç±»ï¼š NSStringã€‚ é€šè¿‡æ ¼å¼å­—ç¬¦ä¸²å’Œå‚æ•°åˆ›å»ºNSStringï¼š 12NSString *height;height = [NSString stringWithFormat:@&quot;%d, %d&quot;, 4, 3]; ç±»æ–¹æ³•ï¼š ä»¥+ä¸ºèµ·å§‹ç¬¦çš„ã€‚ å­—ç¬¦é•¿åº¦ï¼Œå®žä¾‹æ–¹æ³•lengthï¼š - (NSUInteger) length; å­—ç¬¦ä¸²æ¯”è¾ƒ (BOOL)isEqualToString:(NSString *)aString;ï¼Œè¡¨ç¤ºå­—ç¬¦ä¸²å†…å®¹æ˜¯å¦ç›¸åŒï¼Œè¿”å›žBooLï¼›==åˆ¤æ–­å­—ç¬¦ä¸²çš„æŒ‡é’ˆæ˜¯å¦ç›¸åŒï¼Œä¹Ÿå°±æ˜¯æ˜¯å¦æ˜¯åŒä¸€ä¸ªäº‹åŠ¡ã€‚ 12345678910NSString *thing1 = @&quot;hello 5&quot;;NSString *thing2 = [NSString stringWithFormat:@&quot;hello %d&quot;, 5]; if ([thing1 isEqualToString:thing2]) &#123; NSLog(@&quot;ä¸¤ä¸ªå­—ç¬¦ä¸²å†…å®¹ç›¸åŒ&quot;);&#125;if (thing1 == thing2) &#123; NSLog(@&quot;ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯åŒä¸€ä¸ªå¯¹è±¡&quot;);&#125; - (NSComparisonResult)compare:(NSNumber *)decimalNumber;ï¼Œé€ä¸ªæ¯”è¾ƒå­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦ï¼Œåˆ¤æ–­å¤§å°ã€‚è¿”å›žä¸€ä¸ªæžšä¸¾ç±»åž‹NSComparisonResultï¼Œä¸‰ä¸ªæžšä¸¾å€¼åˆ†åˆ«è¡¨ç¤ºå·¦å°äºŽå³ï¼Œå·¦ç­‰äºŽå³ï¼Œå·¦å¤§äºŽå³ã€‚ - (NSComparisonResult)compare:(NSString *)string options:(NSStringCompareOptions)mask;ï¼Œæ ¹æ®optionsçš„ä¸åŒå€¼æœ‰ä¸åŒçš„åŠŸèƒ½ã€‚ å­—ç¬¦ä¸²å†…æ˜¯å¦è¿˜åŒ…å«åˆ«çš„å­—ç¬¦ä¸²æ£€æµ‹å­—ç¬¦ä¸²æ˜¯å¦ä»¥å¦ä¸€ä¸ªå­—ç¬¦å¼€å¤´æˆ–ç»“å°¾ï¼š 12- (BOOL)hasPrefix:(NSString *)str;- (BOOL)hasSuffix:(NSString *)str; ä¸€ä¸ªå­—ç¬¦ä¸²åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²å†…çš„è¿”å›žï¼š- (NSRange)rangeOfString:(NSString *)searchString; å¯å˜æ€§NSStringæ˜¯ä¸å¯å˜çš„ã€‚ä¹Ÿå°±æ˜¯ä¸€æ—¦è¢«åˆ›å»ºï¼Œå°±ä¸èƒ½ä»¥åˆ é™¤å­—ç¬¦æˆ–æ·»åŠ å­—ç¬¦çš„æ–¹å¼æ”¹å˜å®ƒã€‚NSMutableStringæ˜¯NSStringçš„å­ç±»ï¼Œå¯ä»¥æ”¹å˜ã€‚ å¯é€šè¿‡ç±»æ–¹æ³•stringWithCapacity:æ¥åˆ›å»ºï¼Œè¡¨ç¤ºåˆ†é…ä¸€å—å†…å­˜ç”¨äºŽå­˜å‚¨å­—ç¬¦ä¸²ï¼Œ+ (NSMutableString *)stringWithCapacity:(NSUInteger)capacity;ã€‚NSMutableString *string = [NSMutableString stringWithCapacity:1]; appendString:å’ŒappendFormat: æ·»åŠ å­—ç¬¦ä¸²ï¼š 123NSMutableString *string = [NSMutableString stringWithCapacity:50];[string appendString:@&quot;Hello there &quot;];[string appendFormat:@&quot;human %d!&quot;, 39]; // Hello there human 39! deleteCharactersInRange: åˆ é™¤å­—ç¬¦ä¸²ï¼Œç»å¸¸å’ŒrangeOfString:ä¸€èµ·ä½¿ç”¨ã€‚ 12345NSMutableString *friends = [NSMutableString stringWithCapacity:50]; [friends appendString:@&quot;James BethLynn Jack Evan&quot;]; NSRange jackRange = [friends rangeOfString:@&quot;Jack&quot;]; jackRange.length++; [friends deleteCharactersInRange:jackRange]; // James BethLynn Evan é›†åˆ NSArrayä¸¤ä¸ªé™åˆ¶ï¼šåªèƒ½å­˜å‚¨OCå¯¹è±¡ï¼›ä¸èƒ½å­˜å‚¨nilã€‚ åˆ›å»ºç±»æ–¹æ³•arrayWithObjects:(nilè¡¨ç¤ºç»“æŸ)ï¼šNSArray *array = [NSArray arrayWithObjects:@&quot;one&quot;, @&quot;two&quot;, @&quot;three&quot;, nil];ç›´æŽ¥å­—é¢é‡ï¼šNSArray *array2 = @[@&quot;one&quot;, @&quot;two&quot;, @&quot;three&quot;]; æ•°ç»„å¯¹è±¡ä¸ªæ•°ï¼š [array count]; æŒ‰ç´¢å¼•èŽ·å–å¯¹è±¡ï¼š 12[array objectAtIndex:1];array[1]; å­—ç¬¦ä¸²åˆ‡åˆ†æˆæ•°ç»„ï¼Œæ•°ç»„åˆå¹¶æˆå­—ç¬¦ä¸²ã€‚ 123NSMutableString *string2 = @&quot;oop:ack:bork:greeble:ponies&quot;; NSArray *chunks = [string2 componentsSeparatedByString:@&quot;:&quot;]; string2 = [chunks componentsJoinedByString:@&quot;:-)&quot;]; // oop:-)ack:-)bork:-)greeble:-)ponies NSMutableArrayNSArrayåŒ…å«çš„å¯¹è±¡ä¸ªæ•°æ˜¯ä¸èƒ½å˜åŒ–çš„ï¼ˆåŒ…å«çš„å¯¹è±¡æ˜¯å¯ä»¥å˜åŒ–çš„ï¼‰ã€‚NSMutableArrayæ˜¯å¯ä»¥å˜åŒ–æ•°ç›®ã€‚ åˆ›å»º: + (instancetype)arrayWithCapacity:(NSUInteger)numItems; æœ«å°¾æ·»åŠ  - (void) addObject: (id) anObject; åˆ é™¤ç‰¹å®šç´¢å¼•çš„å¯¹è±¡ - (void)removeObjectAtIndex:(NSIndexSet *)index; æžšä¸¾ï¼šå¯¹æ•°ç»„è¿›è¡ŒéåŽ†ã€‚NSEnumerator 1234NSEnumerator *emumerator = [array objectEnumerator];while (id thingie = [emumerator nextObject]) &#123; &#125; å¿«é€Ÿæžšä¸¾ 123for (NSString *string in array) &#123; NSLog()&#125; NSDictionaryåŒæ ·ä¹Ÿæœ‰å¯¹åº”çš„NSMutableDictionaryã€‚ 123456789101112131415161718 // åˆ›å»º NSDictionary Tire *t1 = [Tire new]; Tire *t2 = [Tire new]; Tire *t3 = [Tire new]; Tire *t4 = [Tire new]; NSDictionary *tires = [NSDictionary dictionaryWithObjectsAndKeys:t1, @&quot;front-left&quot;, t2, @&quot;front-right&quot;, t3, @&quot;back-left&quot;, t4, @&quot;back-right&quot;, nil];// NSDictionary *tires = @&#123;@&quot;front-left&quot;: t1, @&quot;front-right&quot;: t2, @&quot;back-left&quot;: t3,@&quot;back-right&quot;: t4,&#125;; // è®¿é—®ç‰¹å®škeyçš„å¯¹è±¡ Tire *tire = [tires objectForKey:@&quot;back-right&quot;];// Tire *tire = tires[@&quot;back-right&quot;]; // åˆ›å»ºNSMutableDictionary NSMutableDictionary *tires_m = [NSMutableDictionary dictionaryWithCapacity:10];// NSMutableDictionary *tires_m = [NSMutableDictionary dictionary]; // ä¸ºNSMutableDictionaryæ·»åŠ å…ƒç´  [tires_m setObject:t1 forKey:@&quot;front-left&quot;]; // ä»ŽNSMutableDictionaryä¸­åˆ é™¤å…ƒç´  [tires_m removeObjectForKey:@&quot;front-left&quot;]; å…¶ä»–æ•°æ®ç±»åž‹NSArrayå’ŒNSDictionaryåªèƒ½å­˜å‚¨å¯¹è±¡ï¼Œä¸èƒ½ç›´æŽ¥å­˜å‚¨ä»»ä½•åŸºæœ¬ç±»åž‹çš„æ•°æ®ï¼Œå¦‚intã€floatã€å’Œstructã€‚ NSNumber NSValue NSNull]]></content>
      <categories>
        <category>Objective-C</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 13 Self Sizing Cells and Dynamic Type]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-13.html</url>
    <content type="text"><![CDATA[æŽ¥ç€ä¸Šä¸€éå¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 12 ä¸°å¯ŒDetail Viewå’Œå®šåˆ¶åŒ–Navigation Barçš„ä»£ç ç¨ä½œä¿®æ”¹ï¼Œä¸ºRestaurantå¤šåŠ ä¸€ä¸ªphoneå±žæ€§,ä¿®æ”¹è¿‡locationçš„é•¿åº¦ã€‚ ä¿®æ”¹RestaurantTableViewControllerä¸­çš„restaurantså˜é‡ï¼ˆæ·»åŠ å­—æ®µphoneï¼Œlocationå­—æ®µå†…å®¹å¢žå¤šï¼‰ï¼š 1234567891011121314151617181920212223var restaurants:[Restaurant] = [ Restaurant(name: &quot;Cafe Deadend&quot;, type: &quot;Coffee &amp; Tea Shop&quot;,location: &quot;G/F, 72 Po Hing Fong, Sheung Wan, Hong Kong&quot;, phone: &quot;232-923423&quot;,image: &quot;cafedeadend.jpg&quot;, isVisited: false), Restaurant(name: &quot;Homei&quot;, type: &quot;Cafe&quot;, location: &quot;Shop B, G/F, 22-24A Tai Ping San Street SOHO, Sheung Wan, Hong Kong&quot;, phone: &quot;348-233423&quot;, image:&quot;homei.jpg&quot;, isVisited: false), Restaurant(name: &quot;Teakha&quot;, type: &quot;Tea House&quot;, location: &quot;Shop B, 18 Tai Ping Shan Road SOHO, Sheung Wan, Hong Kong&quot;, phone: &quot;354-243523&quot;, image: &quot;teakha.jpg&quot;, isVisited: false), Restaurant(name: &quot;Cafe loisl&quot;, type: &quot;Austrian / Causual Drink&quot;, location: &quot;Shop B, 20 Tai Ping Shan Road SOHO, Sheung Wan, Hong Kong&quot;, phone: &quot;453-333423&quot;, image: &quot;cafeloisl.jpg&quot;, isVisited: false), Restaurant(name: &quot;Petite Oyster&quot;, type: &quot;French&quot;, location: &quot;24 Tai Ping Shan Road SOHO, Sheung Wan, Hong Kong&quot;, phone: &quot;983-284334&quot;, image: &quot;petiteoyster.jpg&quot;, isVisited: false), Restaurant(name: &quot;For Kee Restaurant&quot;, type: &quot;Bakery&quot;, location: &quot;Shop J-K., 200 Hollywood Road, SOHO, Sheung Wan, Hong Kong&quot;, phone: &quot;232-434222&quot;, image: &quot;forkeerestaurant.jpg&quot;, isVisited: false), Restaurant(name: &quot;Po&apos;s Atelier&quot;, type: &quot;Bakery&quot;, location: &quot;G/F, 62 Po Hing Fong, Sheung Wan, Hong Kong&quot;, phone: &quot;234-834322&quot;, image: &quot;posatelier.jpg&quot;, isVisited: false), Restaurant(name: &quot;Bourke Street Backery&quot;, type: &quot;Chocolate&quot;, location: &quot;633 Bourke St Sydney New South Wales 2010 Surry Hills&quot;, phone: &quot;982-434343&quot;, image:&quot;bourkestreetbakery.jpg&quot;, isVisited: false), Restaurant(name: &quot;Haigh&apos;s Chocolate&quot;, type: &quot;Cafe&quot;, location: &quot;412-414 George St Sydney New South Wales&quot;, phone: &quot;734-232323&quot;, image: &quot;haighschocolate.jpg&quot;, isVisited: false), Restaurant(name: &quot;Palomino Espresso&quot;, type: &quot;American / Seafood&quot;, location: &quot;Shop 1 61 York St Sydney New South Wales&quot;, phone: &quot;872-734343&quot;, image: &quot;palominoespresso.jpg&quot;, isVisited: false), Restaurant(name: &quot;Upstate&quot;, type: &quot;American&quot;, location: &quot;95 1st Ave New York, NY 10003&quot;, phone: &quot;343-233221&quot;, image: &quot;upstate.jpg&quot;, isVisited: false), Restaurant(name: &quot;Traif&quot;, type: &quot;American&quot;, location: &quot;229 S 4th St Brooklyn, NY 11211&quot;, phone: &quot;985-723623&quot;, image: &quot;traif.jpg&quot;, isVisited: false), Restaurant(name: &quot;Graham Avenue Meats&quot;, type: &quot;Breakfast &amp; Brunch&quot;, location: &quot;445 Graham Ave Brooklyn, NY 11211&quot;, phone: &quot;455-232345&quot;, image: &quot;grahamavenuemeats.jpg&quot;, isVisited: false), Restaurant(name: &quot;Waffle &amp; Wolf&quot;, type: &quot;Coffee &amp; Tea&quot;, location: &quot;413 Graham Ave Brooklyn, NY 11211&quot;, phone: &quot;434-232322&quot;, image: &quot;wafflewolf.jpg&quot;, isVisited: false), Restaurant(name: &quot;Five Leaves&quot;, type: &quot;Coffee &amp; Tea&quot;, location: &quot;18 Bedford Ave Brooklyn, NY 11222&quot;, phone: &quot;343-234553&quot;, image: &quot;fiveleaves.jpg&quot;, isVisited: false), Restaurant(name: &quot;Cafe Lore&quot;, type: &quot;Latin American&quot;, location: &quot;Sunset Park 4601 4th Ave Brooklyn, NY 11220&quot;, phone: &quot;342-455433&quot;, image: &quot;cafelore.jpg&quot;, isVisited: false), Restaurant(name: &quot;Confessional&quot;, type: &quot;Spanish&quot;, location: &quot;308 E 6th St New York, NY 10003&quot;, phone: &quot;643-332323&quot;, image: &quot;confessional.jpg&quot;, isVisited: false), Restaurant(name: &quot;Barrafina&quot;, type: &quot;Spanish&quot;, location: &quot;54 Frith Street London W1D 4SL United Kingdom&quot;, phone: &quot;542-343434&quot;, image: &quot;barrafina.jpg&quot;, isVisited: false), Restaurant(name: &quot;Donostia&quot;, type: &quot;Spanish&quot;, location: &quot;10 Seymour Place London W1H 7ND United Kingdom&quot;, phone: &quot;722-232323&quot;, image: &quot;donostia.jpg&quot;, isVisited: false), Restaurant(name: &quot;Royal Oak&quot;, type: &quot;British&quot;, location: &quot;2 Regency Street London SW1P 4BZ United Kingdom&quot;, phone: &quot;343-988834&quot;, image: &quot;royaloak.jpg&quot;, isVisited: false), Restaurant(name: &quot;CASK Pub and Kitchen&quot;, type: &quot;Thai&quot;, location: &quot;22 Charlwood Street London SW1V 2DY Pimlico&quot;, phone: &quot;432-344050&quot;, image: &quot;caskpubkitchen.jpg&quot;, isVisited: false)] ä¸ºRestaurantæ·»åŠ å±žæ€§phoneã€‚ ä¿®æ”¹RestaurantDetailViewControllerä¸­ä¸¤ä¸ªtable viewæ–¹æ³•ï¼š123456789101112131415161718192021222324252627282930313233func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123; return 5&#125;func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cell = tableView.dequeueReusableCell(withIdentifier: &quot;Cell&quot;, for: indexPath) as! RestaurantDetailTableViewCell // Configure the cell... switch indexPath.row &#123; case 0: cell.fieldLabel.text = &quot;Name&quot; cell.valueLabel.text = restaurant.name case 1: cell.fieldLabel.text = &quot;Type&quot; cell.valueLabel.text = restaurant.type case 2: cell.fieldLabel.text = &quot;Location&quot; cell.valueLabel.text = restaurant.location case 3: cell.fieldLabel.text = &quot;Phone&quot; cell.valueLabel.text = restaurant.phone case 4: cell.fieldLabel.text = &quot;Been here&quot; cell.valueLabel.text = (restaurant.isVisited) ? &quot;Yes, I&apos;ve been herebefore&quot; : &quot;No&quot; default: cell.fieldLabel.text = &quot;&quot; cell.valueLabel.text = &quot;&quot; &#125; cell.backgroundColor = UIColor.clear return cell&#125; ä½¿Cellè‡ªé€‚åº” åœ¨RestaurantDetailViewControllerä¸­çš„viewDidLoadä¸­æ·»åŠ ï¼š 12tableView.estimatedRowHeight = 36.0 tableView.rowHeight = UITableViewAutomaticDimension estimatedRowHeightæ˜¯cellçš„é¢„è®¡é«˜åº¦ï¼Œè¿™è¾¹å°±è®¾ç½®æˆåŽŸæœ¬prototype cellçš„é«˜åº¦ã€‚ UITableViewAutomaticDimensionè¡¨ç¤ºè¶…è¿‡é¢„è®¡é«˜åº¦åŽè‡ªåŠ¨é€‚åº”é«˜åº¦ã€‚ ä¿®æ”¹Value labelçš„numberOfLineså±žæ€§ä¸º0ï¼Œå°±æ˜¯ä¸é™åˆ¶è¡Œæ•°ã€‚ æ·»åŠ spacingçº¦æŸå½“value labelè¶…è¿‡ä¸¤è¡Œï¼Œæ–‡æœ¬æ˜¾ç¤ºå‡ºé—®é¢˜ï¼š è¿™æ˜¯å› ä¸ºè™½ç„¶value labelçš„é«˜åº¦è‡ªé€‚åº”äº†åˆé€‚çš„é«˜åº¦ï¼Œä½†æ˜¯stack viewçš„é«˜åº¦æ²¡æœ‰çº¦æŸï¼Œä¸èƒ½è®¡ç®—çš„å‡ºæ¥ï¼Œå› æ­¤è¦ç»™stack viewæ·»åŠ ä¸¤ä¸ªä¸Šä¸‹çš„ç›¸ç­‰spcingçº¦æŸã€‚ è¿™æ ·ä¸ç®¡value labelæ˜¯å¤šå°‘è¡Œï¼Œé«˜åº¦éƒ½ä¼šè‡ªé€‚åº”äº†ã€‚ Dynamic TypeDynamic Typeå½“åœ¨æ‰‹æœºè®¾ç½® &gt;é€šç”¨ &gt; è¾…åŠ©åŠŸèƒ½ &gt; æ›´å¤§å­—ä½“è®¾ç½®å­—ä½“å¤§å°æ—¶ï¼Œappä¸­çš„åº”ç”¨ä¹Ÿç›¸åº”çš„å˜åŒ–ã€‚åªè¦æŠŠå­—ä½“è®¾ç½®æˆtext style - Headlineå°±ä¼šæœ‰Dynamic TypeåŠŸèƒ½ã€‚ç›®å‰åªæœ‰name labelçš„å­—ä½“è®¾ç½®æˆäº†text style - Headlineï¼Œå…¶ä»–è®¾ç½®æˆå›ºå®šå¤§å°çš„å­—ä½“ï¼Œä¸ä¼šéšç€åœ¨æ‰‹æœºè®¾ç½® &gt;é€šç”¨ &gt; è¾…åŠ©åŠŸèƒ½ &gt; æ›´å¤§å­—ä½“è®¾ç½®å­—ä½“å¤§å°æ—¶è€Œå˜åŒ–ã€‚ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[OCåŸºç¡€å­¦ä¹ 2ï¼šé¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºç¡€çŸ¥è¯†]]></title>
    <url>%2F2017%2Foc-basic-2.html</url>
    <content type="text"><![CDATA[é—´æŽ¥(indirection) â€œåªè¦å†å¤šæ·»åŠ ä¸€å±‚é—´æŽ¥ï¼Œè®¡ç®—æœºç§‘å­¦ä¸­å°±æ²¡æœ‰è§£å†³ä¸äº†çš„é—®é¢˜ã€‚â€ ä¾‹å­ ç”µè¯è–„ è®©ä»–äººä»£æ›¿ä½ è‡ªå·±åŽ»å®Œæˆå·¥ä½œ ç¼–å†™ä¸€æ®µä»£ç æ¥æŸ¥è¯¢å…¶ä»–ä»£ç ï¼Œå¹¶é€šè¿‡å®ƒç»§ç»­è®¿é—®å¦ä¸€å±‚ä»£ç ã€‚ æŽ¨è¯¿ å˜é‡ä¸Žé—´æŽ¥ ä½¿ç”¨æ–‡ä»¶åçš„é—´æŽ¥ åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ä½¿ç”¨é—´æŽ¥ ä½¿ç”¨é—´æŽ¥æ¥è°ƒç”¨ä»£ç ï¼Œä¸æ˜¯ç›´æŽ¥è°ƒç”¨æŸä¸ªå‡½æ•°ï¼Œè€Œæ˜¯é—´æŽ¥è°ƒç”¨ã€‚ è¿‡ç¨‹å¼ç¼–ç¨‹(Procedual Programming) 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798#import &lt;Foundation/Foundation.h&gt;typedef enum &#123; kCircle, kRectangle, kEgg,&#125; ShapeType;typedef enum &#123; kRedColor, kGreenColor, kBlueColor&#125; ShapeColor;//ä¸åŒå›¾å½¢å…ƒç´ typedef struct &#123; int x, y, width, height;&#125; ShapeRect;//å›¾å½¢ç»“æž„typedef struct &#123; ShapeType type; ShapeColor fillColor; ShapeRect bounds;&#125; Shape;//é¢œè‰²å‡½æ•°NSString *colorName(ShapeColor fillColor)&#123; switch (fillColor) &#123; case kRedColor: return @&quot;red&quot;; break; case kGreenColor: return @&quot;green&quot;; break; case kBlueColor: return @&quot;blue&quot;; break; &#125; return @&quot;no clue&quot;;&#125;//ç»˜åˆ¶å›¾å½¢void drawCircle(ShapeRect bounds, ShapeColor fillColor)&#123; NSLog(@&quot;drawing a Circle at (%d %d %d %d) in %@&quot;, bounds.x, bounds.y, bounds.width, bounds.height, colorName(fillColor));&#125;void drawRectangle(ShapeRect bounds, ShapeColor fillColor)&#123; NSLog(@&quot;drawing a Rectangle at (%d %d %d %d) in %@&quot;, bounds.x, bounds.y, bounds.width, bounds.height, colorName(fillColor));&#125;void drawEgg(ShapeRect bounds, ShapeColor fillColor)&#123; NSLog(@&quot;drawing a Egg at (%d %d %d %d) in %@&quot;, bounds.x, bounds.y, bounds.width, bounds.height, colorName(fillColor));&#125;void drawShapes(Shape shapes[], int count)&#123; for (int i=0; i&lt;count; i++) &#123; switch (shapes[i].type) &#123; case kCircle: drawCircle(shapes[i].bounds, shapes[i].fillColor); break; case kRectangle: drawRectangle(shapes[i].bounds, shapes[i].fillColor); break; case kEgg: drawEgg(shapes[i].bounds, shapes[i].fillColor); break; default: break; &#125; &#125;&#125;int main(int argc, const char * argv[]) &#123; Shape shapes[3]; ShapeRect rect0 = &#123;0, 0, 10, 30&#125;; shapes[0].type = kCircle; shapes[0].fillColor = kRedColor; shapes[0].bounds = rect0; ShapeRect rect1 = &#123;30, 40, 50, 60&#125;; shapes[1].type = kRectangle; shapes[1].fillColor = kGreenColor; shapes[1].bounds = rect1; ShapeRect rect2 = &#123;15, 18, 37, 29&#125;; shapes[2].type = kEgg; shapes[2].fillColor = kBlueColor; shapes[2].bounds = rect2; drawShapes(shapes, 3); return 0;&#125; ä¿®æ”¹è¿‡åŽ»æ­£å¸¸å·¥ä½œçš„ä»£ç å¾ˆå¯èƒ½ä¼šå¼•å…¥æ–°çš„é”™è¯¯ã€‚å»ºç«‹åœ¨å‡½æ•°ä¹‹ä¸Šï¼Œæ•°æ®ä¸ºå‡½æ•°æœåŠ¡ã€‚ä»£ç ä¾‹å­ 3.2.1 Shapes-Procedural é¢å‘å¯¹è±¡ç¼–ç¨‹ ä»¥æ•°æ®ä¸ºä¸­å¿ƒï¼Œå‡½æ•°ä¸ºæ•°æ®æœåŠ¡ ä»£ç ä¾‹å­ 3.2.2 Shapes-Object idæ˜¯ä¸€ç§æ³›åž‹ï¼Œå¯ä»¥ç”¨æ¥å¼•ç”¨ä»»ä½•ç±»åž‹çš„å¯¹è±¡(idå®žé™…ä¸Šæ˜¯ä¸€ä¸ªæŒ‡å‘ç»“æž„ä½“çš„æŒ‡é’ˆ)ã€‚ æ–¹æ‹¬å·åœ¨OCä¸­å…¶ä»–æ„ä¹‰ï¼šç”¨äºŽé€šçŸ¥æŸä¸ªå¯¹è±¡è¯¥åŽ»åšä»€ä¹ˆã€‚[shape draw];è¡¨ç¤ºé€šçŸ¥shapeå¯¹è±¡æ‰§è¡Œdrawæ“ä½œ å‘é€æ¶ˆæ¯ï¼ˆè°ƒç”¨æ–¹æ³•ï¼‰ï¼šé€šçŸ¥å¯¹è±¡æ‰§è¡ŒæŸç§æ“ä½œã€‚ ç±»æ˜¯ä¸€ç§èƒ½å¤Ÿå®žä¾‹åŒ–æˆå¯¹è±¡çš„ç»“æž„ä½“ã€‚ å¦‚æžœåœ¨è¿è¡Œæ—¶æ”¹å˜æŸä¸ªç±»ï¼Œåˆ™è¯¥ç±»çš„æ‰€æœ‰å¯¹è±¡è‡ªåŠ¨ç»§æ‰¿è¿™äº›å˜åŒ–ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184#import &lt;Foundation/Foundation.h&gt;typedef enum &#123; kRedColor, kGreenColor, kBlueColor&#125; ShapeColor;//ä¸åŒå›¾å½¢å…ƒç´ typedef struct &#123; int x, y, width, height;&#125; ShapeRect;//é¢œè‰²å‡½æ•°NSString *colorName(ShapeColor fillColor)&#123; switch (fillColor) &#123; case kRedColor: return @&quot;red&quot;; break; case kGreenColor: return @&quot;green&quot;; break; case kBlueColor: return @&quot;blue&quot;; break; &#125; return @&quot;no clue&quot;;&#125;@interface Circle : NSObject&#123; @private ShapeColor fillColor; ShapeRect bounds;&#125;- (void) setFillColor: (ShapeColor) fillColor;- (void) setBounds: (ShapeRect) bounds;- (void) draw;@end //Circle@implementation Circle- (void) setFillColor:(ShapeColor) c&#123; fillColor = c;&#125;- (void) setBounds:(ShapeRect) b&#123; bounds = b;&#125;- (void) draw&#123; NSLog(@&quot;drawing a Circle at (%d %d %d %d) in %@&quot;, bounds.x, bounds.y, bounds.width, bounds.height, colorName(fillColor));&#125;@end@interface Rectangle : NSObject&#123;@private ShapeColor fillColor; ShapeRect bounds;&#125;- (void) setFillColor: (ShapeColor) fillColor;- (void) setBounds: (ShapeRect) bounds;- (void) draw;@end //Rectangle@implementation Rectangle- (void) setFillColor:(ShapeColor) c&#123; fillColor = c;&#125;- (void) setBounds:(ShapeRect) b&#123; bounds = b;&#125;- (void) draw&#123; NSLog(@&quot;drawing a Rectangle at (%d %d %d %d) in %@&quot;, bounds.x, bounds.y, bounds.width, bounds.height, colorName(fillColor));&#125;@end@interface Egg : NSObject&#123;@private ShapeColor fillColor; ShapeRect bounds;&#125;- (void) setFillColor: (ShapeColor) fillColor;- (void) setBounds: (ShapeRect) bounds;- (void) draw;@end //Egg@implementation Egg- (void) setFillColor:(ShapeColor) c&#123; fillColor = c;&#125;- (void) setBounds:(ShapeRect) b&#123; bounds = b;&#125;- (void) draw&#123; NSLog(@&quot;drawing a Egg at (%d %d %d %d) in %@&quot;, bounds.x, bounds.y, bounds.width, bounds.height, colorName(fillColor));&#125;@end// è¡¥å……ä¸€ä¸ªä¸‰è§’å½¢@interface Triangle : NSObject&#123;@private ShapeColor fillColor; ShapeRect bounds;&#125;- (void) setFillColor: (ShapeColor) fillColor;- (void) setBounds: (ShapeRect) bounds;- (void) draw;@end //Triangle@implementation Triangle- (void) setFillColor:(ShapeColor) c&#123; fillColor = c;&#125;- (void) setBounds:(ShapeRect) b&#123; bounds = b;&#125;- (void) draw&#123; NSLog(@&quot;drawing a Triangle at (%d %d %d %d) in %@&quot;, bounds.x, bounds.y, bounds.width, bounds.height, colorName(fillColor));&#125;@endvoid drawShapes(id shapes[], int count)&#123; for (int i=0; i&lt;count; i++) &#123; id shape = shapes[i]; [shape draw]; &#125;&#125;int main(int argc, const char * argv[]) &#123; id shapes[4]; ShapeRect rect0 = &#123;0, 0, 10, 30&#125;; shapes[0] = [Circle new]; [shapes[0] setBounds:rect0]; [shapes[0] setFillColor:kRedColor]; ShapeRect rect1 = &#123;30, 40, 50, 60&#125;; shapes[1] = [Rectangle new]; [shapes[1] setBounds:rect1]; [shapes[1] setFillColor:kGreenColor]; ShapeRect rect2 = &#123;15, 18, 37, 29&#125;; shapes[2] = [Egg new]; [shapes[2] setBounds:rect2]; [shapes[2] setFillColor:kBlueColor]; ShapeRect rect3 = &#123;3, 4, 5, 0&#125;; shapes[3] = [Triangle new]; [shapes[3] setBounds:rect3]; [shapes[3] setFillColor:kBlueColor]; drawShapes(shapes, 4); return 0;&#125; æœ‰å…³æœ¯è¯­ class object instance message method method dispatcher interface implementation OCä¸­çš„OOP12345678910111213141516171819202122232425262728293031@interface Circle : NSObject&#123; @private ShapeColor fillColor; ShapeRect bounds;&#125;- (void) setFillColor: (ShapeColor) fillColor;- (void) setBounds: (ShapeRect) bounds;- (void) draw;@end //Circle@implementation Circle- (void) setFillColor:(ShapeColor) c&#123; fillColor = c;&#125;- (void) setBounds:(ShapeRect) b&#123; bounds = b;&#125;- (void) draw&#123; NSLog(@&quot;drawing a Circle at (%d %d %d %d) in %@&quot;, bounds.x, bounds.y, bounds.width, bounds.height, colorName(fillColor));&#125;@end``` 1. `@interface` OCç¼–è¯‘å™¨éœ€è¦ä¸€äº›æœ‰å…³ç±»çš„ä¿¡æ¯ + `@` å¯ä»¥çœ‹æˆæ˜¯å¯¹Cè¯­è¨€çš„æ‰©å±• + **instance variable**(å®žä¾‹å˜é‡) ï¼š `@interface`ä¸‹çš„èŠ±æ‹¬å·çš„å†…å®¹ï¼š { @private ShapeColor fillColor; ShapeRect bounds;} 1+ **method declaration**(æ–¹æ³•å£°æ˜Ž)ã€‚æœ‰ç‚¹åƒCè¯­è¨€ä¸­çš„å‡½æ•°åŽŸåž‹ã€‚`-`è¡¨ç¤ºå¯¹è±¡æ–¹æ³•ï¼Œ`+`è¡¨ç¤ºç±»æ–¹æ³•ã€‚`(void)`è¡¨ç¤ºè¿”å›žç±»åž‹ã€‚ - (void) setFillColor: (ShapeColor) fillColor; - (void) setBounds: (ShapeRect) bounds; - (void) draw; ``` + **infix notation**(ä¸­ç¼€ç¬¦) ï¼š *æ–¹æ³•çš„åç§°åŠå…¶å‚æ•°éƒ½æ˜¯åˆåœ¨ä¸€èµ·çš„* `[circle setFillColor: kRedColor]` è¡¨ç¤ºè°ƒç”¨å¸¦ä¸€ä¸ªå‚æ•°çš„æ–¹æ³• + å¦‚æžœæ–¹æ³•ä½¿ç”¨å‚æ•°ï¼Œåˆ™éœ€è¦å†’å·ï¼Œå¦åˆ™ä¸éœ€è¦å†’å· + æå€¡@endè¯­è¨€åŽæ·»åŠ æ³¨é‡Šæ¥æ³¨æ˜Žç±»çš„åç§° @implementation @implementationä¸­å¯ä»¥å®šä¹‰åœ¨@interfaceä¸­å£°æ˜Žè¿‡å’Œæ²¡æœ‰å£°æ˜Žè¿‡çš„æ–¹æ³• OCä¸­ä¸å­˜åœ¨çœŸæ­£çš„ç§æœ‰æ–¹æ³• å®žä¾‹åŒ–å¯¹è±¡ instantiationï¼ˆå®žä¾‹åŒ–ï¼‰ [Circle new] å‘é€newæ¶ˆæ¯ è½¯ä»¶å®žä½“åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œè€Œå¯¹ä¿®æ”¹å…³é—­ã€‚ â€”- å¼€æ”¾/å…³é—­åŽŸåˆ™(Bertrand Meyer)]]></content>
      <categories>
        <category>Objective-C</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[OCåŸºç¡€å­¦ä¹ 5ï¼šæºæ–‡ä»¶ç»„ç»‡]]></title>
    <url>%2F2017%2Foc-basic-5.html</url>
    <content type="text"><![CDATA[å°†ç¨‹åºæ‹†åˆ†ä¸ºå¤šä¸ªå°æ–‡ä»¶æœ‰åŠ©äºŽæ›´å¿«åœ°æ‰¾åˆ°é‡è¦çš„ä»£ç ï¼Œè€Œä¸”å…¶ä»–äººåœ¨æŸ¥çœ‹é¡¹ç›®æ—¶ä¹Ÿèƒ½æœ‰ä¸ªå¤§è‡´çš„äº†è§£ã€‚ æ‹†åˆ†æŽ¥å£å’Œå®žçŽ°æ ¹æ®@interfaceå’Œ@implementationï¼ŒOCçš„ä»£ç é€šå¸¸æ”¾åœ¨ä¸¤ç§æ–‡ä»¶é‡Œï¼š æŽ¥å£éƒ¨åˆ†(.h)ï¼šç±»çš„@interfaceæŒ‡ä»¤ã€å…¬å…±structå®šä¹‰ã€enumå¸¸é‡ã€#defineså’Œexternå…¨å±€å˜é‡ç­‰ã€‚ å®žçŽ°éƒ¨åˆ†(.m): ç±»çš„@implementationæŒ‡ä»¤ã€å…¨å±€å˜é‡çš„å®šä¹‰ã€ç§æœ‰structç­‰ã€‚ å¦å¤–ï¼Œå¤æ‚çš„é¡¹ç›®å¯ä»¥æ‹¥æœ‰å¤šä¸ªç›®æ ‡ï¼Œå®ƒä»¬æºæ–‡ä»¶çš„é…ç½®å„ä¸ç›¸åŒï¼Œæž„å»ºè§„åˆ™ä¹Ÿä¸åŒã€‚ç¾¤ç»„å…³ç³»ä»…ä»…æ˜¯æœ‰Xcodeè´Ÿè´£ç®¡ç†çš„ä¸€é¡¹å¥‡å¦™çš„åŠŸèƒ½ã€‚ æ‹†åˆ†Carç¨‹åº #import å¸¦å°–å·çš„æ˜¯å¯¼å…¥ç³»ç»Ÿå¤´æ–‡ä»¶(åªè¯»)ï¼Œå¦‚#import &lt;Foundation/Foundation.h&gt;ï¼›åŒå¼•å·æ˜¯é¡¹ç›®æœ¬åœ°çš„ä»£ç æ–‡ä»¶ï¼Œå¦‚#import &quot;Engine.h&quot;ã€‚ æ‹†åˆ†ä¸Šä¸€ç¯‡ä¸­çš„Carç¨‹åºé¦–å…ˆæ‹†åˆ†ç»§æ‰¿è‡ªNSObjectçš„ç±»ï¼šTireå’ŒEngineã€‚ 1234567// Tire.h#import &lt;Foundation/Foundation.h&gt;@interface Tire : NSObject@end 1234567891011// Tire.m#import &quot;Tire.h&quot;@implementation Tire//#pragma mark -- (NSString *)description &#123; return (@&quot;I am a Tire.&quot;);&#125; //description@end 1234567// Engine.h#import &lt;Foundation/Foundation.h&gt;@interface Engine : NSObject@end 12345678// Engine.m#import &quot;Engine.h&quot;@implementation Engine- (NSString *)description &#123; return (@&quot;I am a Engine.&quot;);&#125; //description@end ä½¿ç”¨è·¨æ–‡ä»¶ä¾èµ–å…³ç³» @class æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼šâ€œè¿™æ˜¯ä¸€ä¸ªç±»ï¼Œåªä¼šé€šè¿‡æŒ‡é’ˆæ¥å¼•ç”¨å®ƒï¼Œä¸éœ€è¦å…³æ³¨æ­¤ç±»çš„æ›´å¤šä¿¡æ¯â€ã€‚å¯å‡å°‘å¿…é¡»å¯¼å…¥çš„å¤´æ–‡ä»¶çš„æ•°é‡ï¼Œä»Žè€Œç¼©çŸ­ç¼–è¯‘æ—¶é—´ã€‚æ‹†åˆ†Carç±»ï¼š 1234567891011121314// Car.h#import &lt;Foundation/Foundation.h&gt;@class Engine;@class Tire;@interface Car : NSObject- (Engine *) engine;- (void) setEngine: (Engine *) newEngine;- (Tire *) tireAtIndex: (int) index;- (void) setTire: (Tire *) tire atIndex: (int) index;- (void)print;@end //Car 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657// Car.m#import &quot;Car.h&quot;#import &quot;Tire.h&quot;#import &quot;Engine.h&quot;@implementation Car&#123; Engine *engine; Tire *tires[4];&#125;- (Engine *) engine&#123; return (engine);&#125; //engine- (void) setEngine:(Engine *)newEngine&#123; engine = newEngine;&#125; //setEngine- (void) setTire:(Tire *)tire atIndex:(int)index&#123; if (index&lt;0 || index&gt;3) &#123; NSLog(@&quot;bad index (%d) in setTire:atIndex&quot;, index); exit(1); &#125; tires[index] = tire;&#125; // setTire- (Tire *) tireAtIndex:(int)index&#123; if (index&lt;0 || index&gt;3) &#123; NSLog(@&quot;bad index (%d) in setTire:atIndex&quot;, index); exit(1); &#125; return tires[index];&#125; // tireAtIndex- (id)init&#123; if (self = [super init]) &#123; //? engine = [Engine new]; tires[0] = [Tire new]; tires[1] = [Tire new]; tires[2] = [Tire new]; tires[3] = [Tire new]; &#125; return (self);&#125;- (void)print&#123; NSLog(@&quot;%@&quot;, engine); NSLog(@&quot;%@&quot;, tires[0]); NSLog(@&quot;%@&quot;, tires[1]); NSLog(@&quot;%@&quot;, tires[2]); NSLog(@&quot;%@&quot;, tires[3]);&#125;@end //Car ç¼–è¯‘å™¨éœ€è¦å…ˆçŸ¥é“æ‰€æœ‰å…³äºŽè¶…ç±»çš„ä¿¡æ¯æ‰èƒ½æˆåŠŸåœ°ä¸ºå…¶å­ç±»ç¼–è¯‘@interfaceéƒ¨åˆ†ã€‚æ‹†åˆ†Slant6å’ŒAllWeatherRadialï¼š 1234567// Slant6.h#import &quot;Engine.h&quot;@interface Slant6 : Engine@end 123456789// Slant6.m#import &quot;Slant6.h&quot;@implementation Slant6- (NSString *)description &#123; return (@&quot;I am a slant-6.VROOM!&quot;);&#125;@end 1234567// AllWeatherRadial.h#import &quot;Tire.h&quot;@interface AllWeatherRadial : Tire@end 12345678910// AllWeatherRadial.m#import &quot;AllWeatherRadial.h&quot;@implementation AllWeatherRadial-(NSString *)description&#123; return (@&quot;I am a tire for rain or shine.&quot;);&#125;@end æœ€åŽæ˜¯main.mæ–‡ä»¶ï¼š123456789101112131415161718192021222324// main.m#import &lt;Foundation/Foundation.h&gt;#import &quot;Car.h&quot;#import &quot;Tire.h&quot;#import &quot;Engine.h&quot;#import &quot;Slant6.h&quot;#import &quot;AllWeatherRadial.h&quot;int main(int argc, const char * argv[]) &#123; Car *car = [Car new]; Engine *engine = [Slant6 new]; [car setEngine:engine]; for (int i=0; i&lt;4; i++) &#123; Tire *tire = [AllWeatherRadial new]; [car setTire:tire atIndex:i]; &#125; [car print]; return 0;&#125;]]></content>
      <categories>
        <category>Objective-C</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[OCåŸºç¡€å­¦ä¹ 3ï¼šç»§æ‰¿(inheritance)]]></title>
    <url>%2F2017%2Foc-basic-3-inheritance.html</url>
    <content type="text"><![CDATA[ä¸ºä½•ä½¿ç”¨ç»§æ‰¿ UML(Unified Modeling Language, ç»Ÿä¸€å»ºæ¨¡è¯­è¨€) æ˜¯ä¸€ç§ç”¨å›¾è¡¨æ¥è¡¨ç¤ºç±»ã€ç±»çš„å†…å®¹ä»¥åŠå®ƒä»¬ä¹‹é—´å…³ç³»ã€‚ å°†é‡å¤çš„ä»£ç åˆå¹¶åˆ°ä¸€å¤„ã€‚ ç»§æ‰¿çš„è¯­æ³•æ ¼å¼ åªèƒ½ç»§æ‰¿ä¸€ä¸ª åªæœ‰ä»£ç ç²¾ç®€ï¼Œbugæ‰æ— å¤„è—èº« æ²¡æœ‰å£°æ˜Žå®žä¾‹å˜é‡æ—¶å¯ä»¥çœç•¥èŠ±æ‹¬å· ç›¸å…³æœ¯è¯­ refactoring (é‡æž„) superclass parent class subclass child class override ç»§æ‰¿çš„å·¥ä½œæœºåˆ¶OOPä¸€ä¸ªå¼ºå¤§ä¹‹å¤„ï¼šå¯ä»¥å¯¹ä¸€ä¸ªç¨‹åºåšä¸€äº›é‡å¤§æ”¹å˜ï¼Œç¨‹åºä»ç„¶å¯ä»¥æ­£å¸¸è¿è¡Œã€‚ æ–¹æ³•è°ƒåº¦ï¼šå½“ä»£ç å‘é€ä¿¡æ¯æ—¶ï¼Œå°†åœ¨å½“å‰çš„ç±»ä¸­æœç´¢ç›¸åº”æ–¹æ³•ï¼Œå¦‚æžœæ— æ³•åœ¨æŽ¥æ”¶æ¶ˆæ¯çš„å¯¹è±¡çš„ç±»æ–‡ä»¶ä¸­æ‰¾åˆ°ç›¸åº”çš„æ–‡ä»¶ï¼Œå°±ä¼šåœ¨è¯¥å¯¹è±¡çš„è¶…ç±»ä¸­è¿›è¡ŒæŸ¥æ‰¾ã€‚ å®žä¾‹å˜é‡ åœ¨åˆ›å»ºä¸€ä¸ªæ–°ç±»æ—¶ï¼Œå…¶å¯¹è±¡é¦–å…ˆä¼šä»Žå®ƒçš„è¶…ç±»ç»§æ‰¿å®žä¾‹å˜é‡ï¼Œç„¶åŽæ ¹æ®è‡ªèº«æƒ…å†µæ·»åŠ è‡ªå·±çš„å®žä¾‹å˜é‡ã€‚ polymorphism(å¤šæ€æ€§) selfï¼šæŒ‡å‘æŽ¥æ”¶æ¶ˆæ¯çš„å¯¹è±¡çš„æŒ‡é’ˆ é‡å†™æ–¹æ³• super è°ƒç”¨ç»§æ‰¿çš„æ–¹æ³•å¯ä»¥ç¡®ä¿èŽ·å¾—æ–¹æ³•å®žçŽ°çš„æ‰€æœ‰ç‰¹æ€§]]></content>
      <categories>
        <category>Objective-C</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[OCåŸºç¡€å­¦ä¹ 4ï¼šå¤åˆï¼ˆcompositionï¼‰]]></title>
    <url>%2F2017%2Foc-basic-4-composition.html</url>
    <content type="text"><![CDATA[å¤åˆ: å¯¹è±¡é—´çš„ç»„åˆï¼ˆç±»ä¸­ä¸­åŒ…æ‹¬ç±»ï¼‰compositionåœ¨éŸ³ä¹ä¸­ç¿»è¯‘ä¸ºä½œæ›²ï¼šå°†å¤šä¸ªç»„ä»¶ç»„åˆåœ¨ä¸€èµ·ï¼Œé…åˆä½¿ç”¨ï¼Œä»Žè€Œå¾—åˆ°å®Œæ•´çš„ä½œå“ã€‚åœ¨OCä¸­ï¼Œå¤åˆæ˜¯é€šè¿‡åŒ…å«ä½œä¸ºå®žä¾‹å˜é‡çš„å¯¹è±¡æŒ‡é’ˆå®žçŽ°çš„ã€‚1234567@interface Car : NSObject&#123; Engine *engine; Tire *tires[4];&#125;* (void)print;@end //Car è‡ªå®šä¹‰NSLog()NSLog()ä½¿ç”¨%@æ ¼å¼è¯´æ˜Žç¬¦è¡¨ç¤ºè¾“å‡ºå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯NSLog()ä¼šç»™è¿™ä¸ªå¯¹è±¡å‘é€äº†descriptionæ¶ˆæ¯ï¼Œç„¶åŽå¯¹è±¡çš„descriptionæ–¹æ³•ç”Ÿæˆä¸€ä¸ªNSStringå¹¶å°†å…¶è¿”å›žã€‚**åœ¨ç±»ä¸­æä¾›descriptionæ–¹æ³•å°±å¯ä»¥è‡ªå®šä¹‰NSLog()å¦‚ä½•è¾“å‡ºå¯¹è±¡ã€‚123456789101112131415@interface Tire : NSObject@end //Tire è½®èƒŽ@implementation Tire- (NSString *)description &#123; return (@&quot;I am a tire.&quot;);&#125;@endint main(int argc, const char * argv[]) &#123; Tire *tire = [Tire new]; NSLog(@&quot;%@&quot;, tire); // è¾“å‡º &quot;I am a tire.&quot; return 0;&#125; å­˜å–æ–¹æ³• å­˜å–(accessor) æ–¹æ³•æ˜¯ç”¨æ¥è¯»å–æˆ–æ”¹å˜æŸä¸ªå¯¹è±¡å±žæ€§çš„æ–¹æ³•ã€‚åˆ†ä¸º getteræ–¹æ³• å’Œ setteræ–¹æ³•ã€‚ åº”è¯¥å°½é‡ä½¿ç”¨å¯¹è±¡æä¾›çš„å­˜å–æ–¹æ³•ï¼Œä¸è¦ç›´æŽ¥æ”¹å˜å¯¹è±¡é‡Œé¢çš„å€¼ã€‚å­˜å–æ–¹æ³•æ€»æ˜¯æˆå¯¹å‡ºçŽ°çš„ã€‚å‘½åæ–¹å¼ï¼šsetteræ–¹æ³•åœ¨è¦æ›´æ”¹å±žæ€§çš„åŠ ä¸Šå‰ç¼€setï¼›getteræ–¹æ³•ç›´æŽ¥æ˜¯å±žæ€§åç§°ã€‚ 1234567891011@interface Car : NSObject&#123; Engine *engine; Tire *tires[4];&#125;- (Engine *) engine;- (void) setEngine: (Engine *) newEngine;- (Tire *) tireAtIndex: (int) index;- (void) setTire: (Tire *) tire atIndex: (int) index;- (void)print;@end //Car åœ¨OCä¸­æ‰€æœ‰å¯¹è±¡é—´çš„äº¤äº’éƒ½æ˜¯é€šè¿‡æŒ‡é’ˆå®žçŽ°çš„ã€‚ å¤åˆè¿˜æ˜¯ç»§æ‰¿ç»§æ‰¿çš„å…³ç³»ï¼šâ€œIs aâ€ï¼ˆæ˜¯ä¸€ä¸ªï¼‰ã€‚å¦‚ä¸‰è§’å½¢æ˜¯ä¸€ä¸ªå½¢çŠ¶ï¼ŒSlant6æ˜¯ä¸€ä¸ªå‘åŠ¨æœºâ€¦â€¦å¤åˆçš„å…³ç³»ï¼šâ€œhas aâ€ï¼ˆæœ‰ä¸€ä¸ªï¼‰ã€‚å¦‚å½¢çŠ¶æœ‰ä¸ªå¡«å……é¢œè‰²ï¼Œæ±½è½¦æœ‰ä¸ªå‘åŠ¨æœºå’Œå››ä¸ªè½®èƒŽâ€¦â€¦ è¯¦ç»†ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114#import &lt;Foundation/Foundation.h&gt;@interface Tire : NSObject@end //Tire è½®èƒŽ@implementation Tire- (NSString *)description &#123; return (@&quot;I am a tire.&quot;);&#125;@end@interface Engine : NSObject@end //Engine@implementation Engine- (NSString *)description &#123; return (@&quot;I am a Engine.&quot;);&#125; //description@end@interface Slant6 : Engine@end //slant-6åž‹å·çš„å‘åŠ¨æœº@implementation Slant6- (NSString *)description &#123; return (@&quot;I am a slant-6åž‹å·çš„å‘åŠ¨æœº.VROOM!&quot;);&#125;@end@interface AllWeatherRadial : Tire@end // æ–°åž‹è½®èƒŽ@implementation AllWeatherRadial-(NSString *)description&#123; return (@&quot;I am a tire for rain or shine.&quot;);&#125;@end@interface Car : NSObject&#123; Engine *engine; Tire *tires[4];&#125;- (Engine *) engine;- (void) setEngine: (Engine *) newEngine;- (Tire *) tireAtIndex: (int) index;- (void) setTire: (Tire *) tire atIndex: (int) index;- (void)print;@end //Car@implementation Car- (Engine *) engine&#123; return (engine);&#125; //engine- (void) setEngine:(Engine *)newEngine&#123; engine = newEngine;&#125; //setEngine- (void) setTire:(Tire *)tire atIndex:(int)index&#123; if (index&lt;0 || index&gt;3) &#123; NSLog(@&quot;bad index (%d) in setTire:atIndex&quot;, index); exit(1); &#125; tires[index] = tire;&#125; // setTire- (Tire *) tireAtIndex:(int)index&#123; if (index&lt;0 || index&gt;3) &#123; NSLog(@&quot;bad index (%d) in setTire:atIndex&quot;, index); exit(1); &#125; return tires[index];&#125; // tireAtIndex- (id)init&#123; if (self = [super init]) &#123; //? engine = [Engine new]; tires[0] = [Tire new]; tires[1] = [Tire new]; tires[2] = [Tire new]; tires[3] = [Tire new]; &#125; return (self);&#125;- (void)print&#123; NSLog(@&quot;%@&quot;, engine); NSLog(@&quot;%@&quot;, tires[0]); NSLog(@&quot;%@&quot;, tires[1]); NSLog(@&quot;%@&quot;, tires[2]); NSLog(@&quot;%@&quot;, tires[3]);&#125;@endint main(int argc, const char * argv[]) &#123; Car *car = [Car new]; Engine *engine = [Slant6 new]; [car setEngine:engine]; for (int i=0; i&lt;4; i++) &#123; Tire *tire = [AllWeatherRadial new]; [car setTire:tire atIndex:i]; &#125; [car print]; return 0;&#125;]]></content>
      <categories>
        <category>Objective-C</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[OCåŸºç¡€å­¦ä¹ 1ï¼šå¯¹Cçš„æ‰©å±•]]></title>
    <url>%2F2017%2Foc-basic-1-c.html</url>
    <content type="text"><![CDATA[åˆ†æžæœ€ç®€å•çš„Hello Objective-Cç¨‹åº1234567#import &lt;Foundation/Foundation.h&gt;int main(int argc, const char * argv[]) &#123; NSLog(@&quot;Hello, World!&quot;); return 0;&#125; // main OCæœ¬è´¨ä¸Šå°±æ˜¯Cè¯­è¨€ï¼Œå®ƒç”¨æ¥å£°æ˜Žmain()å’Œè¿”å›žæ•°å€¼çš„è¯­æ³•å’ŒCè¯­è¨€æ˜¯ä¸€æ ·çš„ã€‚ æ‰©å±•å.mä»£è¡¨message ä¸ŽCç±»ä¼¼ï¼ŒOCä½¿ç”¨å¤´æ–‡ä»¶æ¥åŒ…å«ç»“æž„ä½“ã€ç¬¦å·å¸¸é‡å’Œå‡½æ•°åŽŸåž‹ç­‰å…ƒç´ çš„å£°æ˜Žã€‚ #importç±»ä¼¼äºŽCçš„#includeï¼Œä½†#importå¯ä¿è¯å¤´æ–‡ä»¶åªè¢«åŒ…å«ä¸€æ¬¡ã€‚ #import &lt;Foundation/Foundation.h&gt;è¯­å¥å‘Šè¯‰ç¼–è¯‘å™¨æŸ¥æ‰¾Foundationæ¡†æž¶ä¸­çš„Foundation.hå¤´æ–‡ä»¶ã€‚ int argc, const char * argv[]ä¸­ argcæ˜¯æŒ‡å‘½ä»¤è¡Œå‚æ•°ä¸ªæ•°ï¼Œargv[0]æ˜¯æŒ‡å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ï¼Œargv[1]æ˜¯æŒ‡å‘½ä»¤è¡Œç¬¬ä¸€ä¸ªå‚æ•°ï¼Œargv[2]æ˜¯æŒ‡å‘½ä»¤è¡Œç¬¬äºŒä¸ªå‚æ•°ï¼Œä»¥æ­¤ç±»æŽ¨ã€‚ æ¡†æž¶ ï¼šä¸€ç§æŠŠå¤´æ–‡ä»¶ã€åº“ã€å›¾ç‰‡ã€å£°éŸ³ç­‰å†…å®¹èšé›†åœ¨ä¸€ä¸ªç‹¬ç«‹å•å…ƒä¸­çš„é›†åˆä½“ã€‚ å¦‚Cocoa,Carbon,QuickTime,OpenGL CocoaåŒ…æ‹¬Foundationå’ŒApplication Kit(AppKit) æ¯ä¸€ä¸ªæ¡†æž¶éƒ½æœ‰ä¸€ä¸ªä¸»å¤´æ–‡ä»¶ï¼Œå®ƒåŒ…å«äº†æ¡†æž¶å†…æ‰€æœ‰çš„å¤´æ–‡ä»¶ã€‚ Foundationçš„å¤´æ–‡ä»¶ 1MB 14000è¡Œ 100å¤šæ–‡ä»¶ ã€‚é€šè¿‡#import &lt;Foundation/Foundation.h&gt; å°±èŽ·å¾—äº†æ•´ä¸ªé›†åˆ Xcodeä½¿ç”¨é¢„ç¼–è¯‘å¤´æ–‡ä»¶ï¼ˆä¸€ç§ç»è¿‡åŽ‹ç¼©çš„ï¼Œæ‘˜è¦å½¢å¼çš„å¤´æ–‡ä»¶ï¼‰æ¥åŠ å¿«è¯»å–é€Ÿåº¦ã€‚ NSLog()å’Œ@â€å­—ç¬¦ä¸²â€ NSå‰ç¼€æ˜¯NextSTEPï¼ˆå¾ˆæ—©ä¹‹å‰è‹¹æžœå…¬å¸æ”¶è´­çš„å…¬å¸ï¼‰ NSLog()ç±»ä¼¼äºŽCçš„printf() @ç¬¦å·æ˜¯Objective-Cåœ¨æ ‡å‡†Cè¯­è¨€åŸºç¡€ä¸Šæ·»åŠ çš„ç‰¹æ€§ï¼Œæ„å‘³ç€å¼•å·å†…çš„å­—ç¬¦ä¸²åº”ä½œä¸ºCocoaçš„NSStringå…ƒç´ æ¥å¤„ç† @ç¬¦å·å¯ä»¥çœ‹æˆä¹‹åŽæ˜¯å¯¹Cè¯­è¨€çš„æ‰©å±• å¸ƒå°”ç±»åž‹OCä¸­çš„å¸ƒå°”å€¼YESæ˜¯1ï¼Œ NOæ˜¯0ï¼Œæ˜¯ä¸ŽCè¯­è¨€ä¸­ä¸åŒçš„ã€‚]]></content>
      <categories>
        <category>Objective-C</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 12 ä¸°å¯ŒDetail Viewå’Œå®šåˆ¶åŒ–Navigation Bar]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-12.html</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 11 é¢å‘å¯¹è±¡ç¼–ç¨‹ä»‹ç»å¯¹ä»£ç åšäº†ä¸€ç‚¹ä¿®æ”¹ï¼Œè¿™ä¸€ç¯‡æ¥ä¸°å¯Œä¸€ä¸‹è¯¦æƒ…é¡µå’Œå®šåˆ¶åŒ–Navigation Barã€‚ é‡æ–°è®¾è®¡è¯¦ç»†é¡µé¢ é€‰ä¸­Main.storyboardï¼Œåˆ é™¤Image Viewå’Œä¸‰ä¸ªLabelã€‚ æ·»åŠ Table Viewï¼Œä¿®æ”¹å…¶å¤§å°ä¸ºæ•´ä¸ªViewï¼Œå¹¶ä¸”æ·»åŠ ä¸€äº›çº¦æŸã€‚è®¾ç½®prototype cellsä¸º1ï¼›table view cellçš„identifierä¸ºCellï¼Œrow heightä¸º36ã€‚ åœ¨table viewçš„å¤´éƒ¨æ·»åŠ ä¸€ä¸ªimage viewï¼Œç»™å˜å…¶é«˜åº¦ä¸º300ï¼Œå®½åº¦ä¸ºViewçš„å®½åº¦ã€‚ è¿žæŽ¥image viewå’ŒRestaurantDetailViewControllerä¸­çš„restaurantImageViewæŽ¥å£ã€‚ ä¿®æ”¹Image Viewçš„content modeä¸º Aspect Fitï¼Œå¹¶å‹¾é€‰Clip to Bounds å®šåˆ¶ Prototype Cell å¢žåŠ ä¸¤ä¸ªlabelï¼Œåˆ†åˆ«å‘½åä¸ºFieldï¼ŒValue ï¼Œå­—ä½“ä¿®æ”¹æˆè‡ªå·±æƒ³è¦çš„ã€‚æŠŠå®ƒä»¬ç»„æˆä¸€ä¸ªStack Viewã€‚ ä¸ºStack Viewæ·»åŠ ä¸€äº›çº¦æŸã€‚åœ¨cellä¸­åž‚ç›´å±…ä¸­ï¼›Trailing Space å’Œ Leading Spaceéƒ½ä¸ºé›¶ã€‚ ç”¨Ctrl-dragä»ŽFieldLabelåˆ°ValueLabelï¼Œé€‰æ‹©Equal Widthsï¼Œç”Ÿæˆä¸€ä¸ªFieldLabelä¸ŽValueLabelå®½åº¦ç›¸åŒçš„çº¦æŸã€‚ä¿®æ”¹Multiplierå€¼ä¸º0.5ï¼Œå°±æ˜¯FieldLabelçš„å®½åº¦æ˜¯ValueLabelçš„ä¸€åŠã€‚ æ–°å»ºRestaurantDetailTableViewCellç±»æ–‡ä»¶ï¼Œç»§æ‰¿è‡³UITableViewCellã€‚æ·»åŠ ä¸¤ä¸ªæŽ¥å£ï¼Œå¹¶å…³è”ä¸Šé¢çš„ä¸¤ä¸ªLabelã€‚12@IBOutlet var fieldLabel:UILabel!@IBOutlet var valueLabel:UILabel! æ›´æ–° RestaurantDetailViewController å®žçŽ°UITableViewDataSourceå’ŒUITableViewDelegate: class RestaurantDetailViewController: UIViewController, UITableViewDataSource, UITableViewDelegate { å®žçŽ°UITableViewDataSourceçš„ç›¸å…³æ–¹æ³•ï¼š 123456789101112131415161718192021222324252627282930func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123; return 4&#125;func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cell = tableView.dequeueReusableCell(withIdentifier: &quot;Cell&quot;, for: indexPath) as! RestaurantDetailTableViewCell // Configure the cell... switch indexPath.row &#123; case 0: cell.fieldLabel.text = &quot;Name&quot; cell.valueLabel.text = restaurant.name case 1: cell.fieldLabel.text = &quot;Type&quot; cell.valueLabel.text = restaurant.type case 2: cell.fieldLabel.text = &quot;Location&quot; cell.valueLabel.text = restaurant.location case 3: cell.fieldLabel.text = &quot;Been here&quot; cell.valueLabel.text = (restaurant.isVisited) ? &quot;Yes, I&apos;ve been herebefore&quot; : &quot;No&quot; default: cell.fieldLabel.text = &quot;&quot; cell.valueLabel.text = &quot;&quot; &#125; cell.backgroundColor = UIColor.clear return cell&#125; æŠŠtable viewçš„delegateå’ŒdataSourceæŽ¥å£è®¾ç½®æˆRestaurant Detail View Controller ã€‚ å®šåˆ¶table view çš„æ ·å¼ åœ¨RestaurantDetailViewControllerä¸­æ·»åŠ ä¸€ä¸ªæŽ¥å£å˜é‡ï¼Œå¹¶å…³è”storyboardä¸­çš„table viewã€‚@IBOutlet var tableView:UITableView! è®¾ç½®table viewçš„èƒŒæ™¯é¢œè‰²ï¼Œåœ¨viewDidLoadä¸­æ·»åŠ :tableView.backgroundColor = UIColor(red: 240.0/255.0, green: 240.0/255.0, blue: 240.0/255.0, alpha: 0.2)æ–°åŠ çš„é¢œè‰²æ˜¯äº®ç°è‰²ï¼ˆå’Œç™½è‰²ç›¸è¿‘ï¼Œå¯ä»¥è®¾ç½®æˆå…¶ä»–æ·±é¢œè‰²åšå¯¹æ¯”ï¼‰ï¼Œè¿è¡ŒåŽä¸æ˜¯æ•´ä¸ªtable viewéƒ½å˜è‰²ã€‚è¿™æ˜¯å› ä¸ºï¼Œæ¯ä¸€ä¸ªcelléƒ½æ˜¯é‡æ–°æ·»åŠ çš„ï¼Œcellçš„èƒŒæ™¯é¢œè‰²è¿˜æ˜¯é»˜è®¤çš„ç™½è‰²ï¼Œè¦†ç›–äº†table viewçš„èƒŒæ™¯é¢œè‰²ï¼Œè¦åœ¨tableView(_:cellForRowAt:)çš„returnä¹‹å‰æ·»åŠ ï¼šcell.backgroundColor = UIColor.clear ç§»é™¤table viewä¸­ç©ºcellçš„åˆ†å‰²çº¿ï¼Œåœ¨viewDidLoadä¸­æ·»åŠ : tableView.tableFooterView = UIView(frame: CGRect.zero) æ”¹å˜åˆ†å‰²çº¿çš„é¢œè‰²ï¼Œ åœ¨viewDidLoadä¸­æ·»åŠ :tableView.separatorColor = UIColor(red: 240.0/255.0, green: 240.0/255.0, blue: 240.0/255.0, alpha: 0.8) å®šåˆ¶Navigation Barçš„æ ·å¼é€šè¿‡UINavigationBar.appearance()ä¿®æ”¹Navigation Barçš„æ ·å¼ã€‚ Navigation Barçš„æ ·å¼ä¿®æ”¹æ˜¯æ•´ä½“ä¿®æ”¹çš„ï¼Œæ‰€ä»¥ä¿®æ”¹Navigation Barçš„æ ·å¼ä»£ç è¦å†™åœ¨application(_:didFinishLaunchingWithOptions:)æ–¹æ³•ä¸­ã€‚ ä¿®æ”¹navigation barçš„èƒŒæ™¯é¢œè‰²ï¼šUINavigationBar.appearance().barTintColor = UIColor(red: 216.0/255.0, green: 74.0/255.0, blue: 32.0/255.0, alpha: 1.0) ä¿®æ”¹titleæ ·å¼ï¼š123if let barFont = UIFont(name: &quot;Avenir-Light&quot;, size: 24.0) &#123; UINavigationBar.appearance().titleTextAttributes = [NSForegroundColorAttributeName:UIColor.white, NSFontAttributeName:barFont]&#125; Avenir-Lightæ˜¯å­—ä½“åç§°ï¼Œè¯¦ç»†çš„iOSå­—ä½“å¯æŸ¥ http://iosfonts.com ã€‚ tintColoræŽ§åˆ¶Navigation itemså’Œbar button itemsçš„é¢œè‰²UINavigationBar.appearance().tintColor = UIColor.white ç›®å‰ï¼ŒNavigation barçš„è¿”å›žæŒ‰é’®æ˜¯ä¸€ä¸ª&lt;å’ŒFood Pinï¼Œæƒ³åˆ é™¤Food Pinï¼Œéœ€è¦ä¿®æ”¹RestaurantTableViewControllerçš„backBarButtonItemå±žæ€§ã€‚ åœ¨ RestaurantTableViewControllerçš„viewDidLoadä¸­æ·»åŠ ï¼š navigationItem.backBarButtonItem = UIBarButtonItem(title: &quot;&quot;, style: .plain, target: nil, action: nil) ä¸º detail view çš„ Navigation bar æ·»åŠ titleï¼Œåœ¨ RestaurantDetailViewControllerçš„viewDidLoadä¸­æ·»åŠ ï¼štitle = restaurant.name éšè—Navigation Bar è‡ªä»ŽiOS 8åŽï¼ŒNavigation Barå¯ä»¥åœ¨ä¸åŒæƒ…å†µä¸‹éšè—ï¼Œåœ¨storyboardä¸­é€‰æ‹©Navigation Controllerä¿®æ”¹ã€‚ï¼ˆOn Swipeæ˜¯å‘ä¸Šæ»‘ï¼‰ ä½†è¿™ç§è®¾ç½®æ•´ä¸ªappçš„Navigation Baréƒ½ä¼šéšè—ã€‚å¦‚æžœåªæƒ³åœ¨restaurant table view controllerä¸­éšè—ï¼Œåœ¨detail viewä¸­ä¸éšè—ï¼Œå°±éœ€è¦åœ¨ä¸¤ä¸ªæŽ§åˆ¶å™¨çš„viewDidLoadåˆ†åˆ«è®¾ç½®ï¼šnavigationController?.hidesBarsOnSwipe = true å’Œ navigationController?.hidesBarsOnSwipe = false ã€‚ è¿è¡Œåå¤æµ‹è¯•åŽå‘çŽ°ä¸¤ä¸ªé—®é¢˜ï¼š å½“ä»Ždetail viewè¿”å›žåŽï¼Œrestaurant table view controllerçš„ Navigation Barä¸èƒ½éšè—ã€‚ å½“restaurant table view controllerçš„ Navigation Baréšè—åŽè¿›å…¥detail viewåŽï¼Œ Navigation Baræ¶ˆå¤±ä¸èƒ½å†æ˜¾ç¤ºã€‚ é¦–å…ˆæ˜Žç¡®ä¸¤ä¸ªæŽ§åˆ¶å™¨ä¸­çš„navigationControllerå±žæ€§æŒ‡çš„æ˜¯åŒä¸€ä¸ªNavigation Controller ï¼ŒviewDidLoadæ–¹æ³•æ˜¯viewç¬¬ä¸€æ¬¡åŠ è½½æ—¶è°ƒç”¨ï¼Œä¹‹åŽå°±ä¸å†è°ƒç”¨äº†ã€‚ ä¹Ÿå°±æ˜¯è¯´å½“ä»Ždetail viewè¿”å›žï¼ŒhidesBarsOnSwipeå·²ç»è¢«è®¾ç½®ä¸ºfalseï¼Œè€Œåˆ°restaurant table view controllerçš„viewDidLoadä¸å†è°ƒç”¨ï¼Œæ‰€ä»¥Navigation Barä¸èƒ½å†éšè—ã€‚ è§£å†³åŠžæ³•æ˜¯ä½¿ç”¨viewWillAppearï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨è§†å›¾æ¯ä¸€æ¬¡æ˜¾ç¤ºæ—¶è°ƒç”¨ã€‚åœ¨RestaurantTableViewControllerä¸­æ·»åŠ ï¼š1234override func viewWillAppear(_ animated: Bool) &#123; super.viewWillAppear(animated) navigationController?.hidesBarsOnSwipe = true&#125; åœ¨RestaurantDetailViewControllerä¸­æ·»åŠ ï¼š12345override func viewWillAppear(_ animated: Bool) &#123; super.viewWillAppear(animated) navigationController?.hidesBarsOnSwipe = false navigationController?.setNavigationBarHidden(false, animated: true)&#125; ä¿®æ”¹Status Baræ ·å¼appä¸­Status Barçš„é»˜è®¤æ ·å¼æ˜¯é»‘è‰²ã€‚ åœ¨Info.plistä¸­æ·»åŠ ä¸€ä¸ªkeyä¸ºView controller-based status bar appearanceï¼Œå€¼ä¸ºNOã€‚ç„¶åŽapplication(_:didFinishLaunchingWithOptions:)ä¸­æ·»åŠ ï¼šUIApplication.shared.statusBarStyle = .lightContentã€‚ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 6ï¼šä½¿ç”¨Quick Lookæ¡†æž¶é¢„è§ˆæ–‡ä»¶(Swift)]]></title>
    <url>%2F2017%2Fios-tutorial-6-quicklook.html</url>
    <content type="text"><![CDATA[iOS SDKä¸­æœ‰å¾ˆå¤šä¸å¸¸è§ï¼Œå´éžå¸¸å¥½ç”¨çš„åº“ï¼ŒQuick Lookæ¡†æž¶å°±æ˜¯ä¸€ä¸ªéžå¸¸å¥½çš„ä¾‹å­ã€‚Quick Lookæ¡†æž¶æä¾›äº†é¢„è§ˆå¾ˆå¤šä¸åŒç±»åž‹æ–‡ä»¶çš„åŠŸèƒ½ï¼Œè€Œä¸éœ€è¦æ‰“å¼€ä¸åŒçš„APPæŸ¥çœ‹ï¼Œæœ‰ç‚¹åƒMacä¸­çš„ç©ºæ ¼é”®åŠŸèƒ½ã€‚ Quick Lookæ¡†æž¶å¯ä»¥é¢„è§ˆçš„æ–‡ä»¶ç±»åž‹ï¼š iWork documents (Pages, Numbers and Keynote) Microsoft Office documents (as long as theyâ€™ve been created with Office 97 or any other newer version) PDF files Images Text files Rich-Text Format documents Comma-Separated Value files (csv) å¼€å§‹é¡¹ç›®åˆ°å¼€å§‹é¡¹ç›®å¤„ä¸‹è½½å¼€å§‹é¡¹ç›®ï¼Œè¿™æ˜¯åŽŸæ–‡æä¾›äº†ä¸€ä¸ªå¼€å§‹é¡¹ç›®ï¼Œä»£ç æ˜¯è€ç‰ˆæœ¬çš„ï¼Œéœ€è¦è½¬æ¢ä¸€ä¸‹ã€‚è¿™ä¸ªå¼€å§‹é¡¹ç›®ä¸­åŒ…æ‹¬äº†å…­ç§ä¸åŒçš„ç±»åž‹çš„æ–‡ä»¶ï¼Œä¸€ä¸ªnavigation controllerï¼Œä¸€ä¸ªtable view controllerï¼ˆFileListViewControllerï¼‰ï¼Œå¦å¤–è¿˜åšäº†ä¸€äº›åˆå§‹åŒ–å·¥ä½œã€‚ä¹‹åŽä»£ç å°±åœ¨FileListViewControllerä¸­å®Œæˆã€‚ æ–‡ä»¶å’Œæ–‡ä»¶çš„URLS åœ¨FileListViewControllerä¸­å®šä¹‰ä¸€ä¸ªæ–‡ä»¶åå­—çš„æ•°ç»„å˜é‡ï¼šlet fileNames = [&quot;AppCoda-PDF.pdf&quot;, &quot;AppCoda-Pages.pages&quot;, &quot;AppCoda-Word.docx&quot;, &quot;AppCoda-Keynote.key&quot;, &quot;AppCoda-Text.txt&quot;, &quot;AppCoda-Image.jpeg&quot;] ç»§ç»­å®šä¹‰ä¸€ä¸ªæ•°ç»„å˜é‡ï¼Œç”¨æˆ·å­˜å‚¨ä¸åŒçš„æ–‡ä»¶çš„URLï¼švar fileURLs = [NSURL]() åˆ›å»ºä¸€ä¸ªæ–¹æ³•prepareFileURLs()ï¼Œç”¨äºŽä¸ºfileURLsæ·»åŠ å€¼ï¼š 123456789101112func prepareFileURLs() &#123; for file in fileNames &#123; // 1 let fileParts = file.components(separatedBy: &quot;.&quot;) if let fileURL = Bundle.main.url(forResource: fileParts[0], withExtension: fileParts[1]) &#123; // 2 if FileManager.default.fileExists(atPath: fileURL.path) &#123; fileURLs.append(fileURL as NSURL) &#125; &#125; &#125;&#125; 1 components(separatedBy:)æ–¹æ³•ç”¨äºŽæŠŠStringæŒ‰ç…§ç»™å®šçš„åˆ†éš”ç¬¦ï¼Œåˆ†è§£æˆ[String]ã€‚ 2 åˆ¤æ–­æ–‡ä»¶åœ°å€æ˜¯å¦çœŸå®žå­˜åœ¨ã€‚ åœ¨ viewDidLoad()ä¸­å®žçŽ°ä¸Šé¢çš„å‡½æ•°ï¼š 12345override func viewDidLoad() &#123; ... prepareFileURLs()&#125; å±•ç¤ºæ–‡ä»¶ç”¨table viewå±•ç¤ºä¸åŒçš„æ–‡ä»¶ï¼š æ ¹æ®æ–‡ä»¶çš„URLï¼ŒèŽ·å¾—æ–‡ä»¶åå’Œæ–‡ä»¶åŽç¼€ï¼ˆæ–‡ä»¶ç±»åž‹ï¼‰ï¼Œæ·»åŠ å‡½æ•°extractAndBreakFilenameInComponents(:)ã€‚ 12345678910func extractAndBreakFilenameInComponents(fileURL: NSURL) -&gt; (fileName: String, fileExtension: String) &#123; let fileURLParts = fileURL.path!.components(separatedBy: &quot;/&quot;) let fileName = fileURLParts.last let filenameParts = fileName?.components(separatedBy: &quot;.&quot;) return (filenameParts![0], filenameParts![1])&#125; ä¿®æ”¹ tableView(tableView:cellForRowAtIndexPath)ï¼š 123456789func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -&gt; UITableViewCell &#123; let cell = tableView.dequeueReusableCellWithIdentifier(&quot;idCellFile&quot;, forIndexPath: indexPath) let currentFileParts = extractAndBreakFilenameInComponents(fileURLs[indexPath.row]) cell.textLabel?.text = currentFileParts.fileName return cell&#125; æ ¹æ®ä¸åŒçš„åŽç¼€åï¼Œå®šä¹‰ä¸åŒçš„æ–‡ä»¶ç±»åž‹åç§°ï¼Œæ·»åŠ å‡½æ•°getFileTypeFromFileExtension(:)ï¼š 12345678910111213141516171819202122232425func getFileTypeFromFileExtension(fileExtension: String) -&gt; String &#123; var fileType = &quot;&quot; switch fileExtension &#123; case &quot;docx&quot;: fileType = &quot;Microsoft Word document&quot; case &quot;pages&quot;: fileType = &quot;Pages document&quot; case &quot;jpeg&quot;: fileType = &quot;Image document&quot; case &quot;key&quot;: fileType = &quot;Keynote document&quot; case &quot;pdf&quot;: fileType = &quot;PDF document&quot; default: fileType = &quot;Text document&quot; &#125; return fileType&#125; å›žåˆ°tableView(tableView:cellForRowAtIndexPath)ï¼Œæ·»åŠ ä¸€æ®µcellé…ç½®ï¼š cell.detailTextLabel?.text = getFileTypeFromFileExtension(fileExtension: currentFileParts.fileExtension) ä¿®æ”¹æ¯ä¸ªsectionä¸­rowçš„æ•°ç›®ä¸ºæ–‡ä»¶æ•°ç›®ï¼š 123func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123; return fileNames.count&#125; QLPreviewControllerDataSource å¼•å…¥æ¡†æž¶Quick Look import QuickLook å®šä¹‰QLPreviewController let quickLookController = QLPreviewController() è®©FileListViewControllerå®žçŽ°QLPreviewControllerDataSourceåè®® å®žçŽ°QLPreviewControllerDataSourceåè®®çš„å¿…é¡»è¦å®žçŽ°çš„æ–¹æ³•ã€‚ç¬¬ä¸€æ–¹æ³•è¡¨ç¤ºæœ‰å¤šå°‘ä¸ªæ–‡ä»¶éœ€è¦é¢„è§ˆï¼š 123func numberOfPreviewItems(in controller: QLPreviewController) -&gt; Int &#123; return fileURLs.count&#125; ç¬¬äºŒä¸ªæ–¹æ³•ï¼š123func previewController(_ controller: QLPreviewController, previewItemAt index: Int) -&gt; QLPreviewItem &#123; return fileURLs[index]&#125; åœ¨viewDidLoad()ä¸­æ·»åŠ ï¼šquickLookController.dataSource = self é¢„è§ˆæ–‡ä»¶åœ¨table viewä¸­é€‰ä¸­æ–‡ä»¶ï¼Œå°±è¦è·³è½¬çš„é¢„è§ˆé¡µé¢ã€‚å®žçŽ°æ–¹æ³•tableView(_:didSelectRowAt:)ï¼š123456func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) &#123; if QLPreviewController.canPreview(fileURLs[indexPath.row]) &#123; quickLookController.currentPreviewItemIndex = indexPath.row navigationController?.pushViewController(quickLookController, animated: true) &#125; &#125; navigationController?.pushViewController(quickLookController, animated: true)å¯ç”¨presentViewController(quickLookController, animated: true, completion: nil)ä»£æ›¿ã€‚ è¿è¡Œå¯é¢„è§ˆæ–‡ä»¶ï¼š è§‚å¯Ÿä¸Šå›¾ï¼Œå¯å‘çŽ° Quick Look Preview Controllerè‡ªå¸¦äº†toolbarï¼Œå·¦è¾¹ä¸€ä¸ªæ˜¯åˆ†äº«æŒ‰é’®(é€šè¿‡UIActivityViewControllerå®žçŽ°çš„)ï¼Œå³è¾¹ä¸€ä¸ªæ˜¯ç±»ä¼¼ç›®å½•åŠŸèƒ½ï¼Œå½“æœ‰å¾ˆå¤šé¢„è§ˆæ–‡ä»¶æ—¶ï¼Œæ¥è·³è½¬åˆ°ä¸åŒé¢„è§ˆæ–‡ä»¶ã€‚ ä»£ç QuickLookDemo å‚è€ƒ Using Quick Look Framework for Previewing Documents]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 10 Navigation Controllerçš„ä»‹ç»å’ŒSegue]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-10.html</url>
    <content type="text"><![CDATA[æŽ¥ç€ä¸Šä¸€ç¯‡å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 9 Table Rowçš„åˆ é™¤, UITableViewRowActionå’ŒUIActivityViewControllerçš„ä½¿ç”¨çš„ä»£ç ï¼Œç»§ç»­å­¦ä¹ Navigation Controllerå’ŒSegueã€‚ åˆ›é€ Navigation Controller é€‰ä¸­Restaurant Table View Controllerç„¶åŽç‚¹å‡»èœå•æ ä¸­çš„Editor &gt; Embed in &gt; Navigation Controllerï¼›ç”Ÿæˆäº†æ–°çš„ä¸€Sceneï¼ˆNavigation Controller Sceneï¼‰ã€‚ é€‰ä¸­ä¹‹å‰Sceneä¸­çš„Navigation barï¼Œä¿®æ”¹å…¶titleä¸ºFood Pinã€‚ æ·»åŠ  Detail View Controllerä¹‹å‰æ·»åŠ å¯¼èˆªæ ï¼ŒçŽ°åœ¨æ·»åŠ å¦ä¸€ä¸ªview controllerï¼Œç”¨æ¥æ˜¾restaurantçš„è¯¦ç»†å†…å®¹ã€‚ æ‹–åŠ¨ä¸€ä¸ªæ–°çš„View Controllerã€‚ æ‹–åŠ¨ä¸€ä¸ªimage Viewï¼Œè°ƒæ•´åˆé€‚å¤§å°ï¼Œå¹¶æ·»åŠ ç›¸å…³çº¦æŸã€‚Content Modeå±žæ€§ä¿®æ”¹ä¸º Aspect Fillã€‚ ç”¨segueè¿žæŽ¥prototype cellå’Œdetail sceneã€‚ Ctrl-dragä»Žprototype cellåˆ°detail sceneã€‚å¦‚æžœä¸æ–¹ä¾¿é€‰æ‹©prototype cellï¼Œå¯ä»¥åœ¨document outlineä¸­æ‹–åŠ¨ã€‚é€‰æ‹©Showè¿žæŽ¥é£Žæ ¼ã€‚ iOS 10ä¸­æœ‰å‡ ç§sugueç±»åž‹ï¼š Showï¼šæ–°çš„view controllerå°†è¢«æ·»åŠ view controlleræ ˆçš„é¡¶éƒ¨ã€‚è·³è½¬çš„é¡µé¢æœ‰Navigation barï¼Œå¹¶ä¸”æœ‰è¿”å›žåŽŸæ¥é¡µé¢çš„è¿”å›žæŒ‰é’®ã€‚è¿™æ˜¯éžå¸¸å¸¸ç”¨çš„çš„ç±»åž‹ã€‚ Show detailï¼šåœ¨view controlleræ ˆä¸­ï¼Œæ–°çš„view controllerå°†è¢«æ›¿ä»£åŽŸæ¥çš„view controllerã€‚è·³è½¬çš„é¡µé¢æ²¡æœ‰Navigation barï¼Œä¹Ÿæ²¡æœ‰è¿”å›žåŽŸæ¥é¡µé¢çš„è¿”å›žæŒ‰é’®ã€‚ Present modallyï¼šæ–°é¡µé¢å°†ä»¥åŠ¨ç”»å½¢å¼ä»Žåº•éƒ¨å‡ºçŽ°åˆ°è¦†ç›–æ•´ä¸ªæ‰‹æœºå±å¹•ã€‚è¿™ç§å½¢å¼æœ€å¸¸è§çš„åˆ—å­æ˜¯iOSè‡ªå¸¦çš„æ—¥åŽ†åº”ç”¨ï¼š Present as popoverï¼šä»¥å¸¦æœ‰ç®­å¤´é”šç‚¹çš„å¼¹æ¡†æ˜¾ç¤ºã€‚é€šå¸¸ä½¿ç”¨çš„iPadåº”ç”¨ä¸­ ä¸å†éœ€è¦action sheetï¼ŒåŽ»é™¤tableView(_:didSelectRowAt:)æ–¹æ³• åˆ›å»ºæ–°ç±»æ–‡ä»¶RestaurantDetailViewControllerï¼Œç»§æ‰¿è‡³UIViewControllerã€‚æ˜¯æ–°å»ºsceneä¸ŽRestaurantDetailViewControllerçš„è”ç³»ã€‚ åœ¨RestaurantDetailViewControllerä¸­åŠ å…¥ä¸€ä¸ªoutletå’Œä¸€ä¸ªå˜é‡ï¼Œoutletå…³è”Image Viewï¼ŒrestaurantImageç”¨ä¸ŽæŽ¥å—table viewä¼ æ¥çš„å›¾åƒåç§°æ•°æ®ã€‚ 12345678@IBOutlet var restaurantImageView:UIImageView!var restaurantImage = &quot;&quot;override func viewDidLoad() &#123; super.viewDidLoad() restaurantImageView.image = UIImage(named: restaurantImage)&#125; é€šè¿‡seguesä¼ é€’æ•°æ®segueç®¡ç†view controllerä¹‹é—´çš„è¿‡æ¸¡ã€‚å½“segueè§¦å‘æ—¶ï¼Œstoryboardä¼šé€šçŸ¥æºview controllerï¼ˆå¦‚RestaurantTableViewControllerï¼‰è°ƒç”¨æ–¹æ³•prepare(for:sender:)ï¼Œå¯ä»¥é€šè¿‡æ­¤æ–¹æ³•ä¼ é€’æ•°æ®ã€‚ å½“storyboardä¸­ç»“æž„å¤æ‚æ—¶ï¼Œsegueå¯èƒ½ä¼šæœ‰å¾ˆå¤šï¼ŒåŒä¸€ä¸ªview controllerå¯èƒ½ä¸Žå„çº§view controllerä¹‹é—´æœ‰segueï¼Œè¿™ç§æƒ…å†µæœ€å¥½ç»™segueä¸€ä¸ªå”¯ä¸€identifierã€‚è®¾ç½®segueçš„identifierä¸º showRestaurantDetailã€‚ åœ¨RestaurantTableViewControllerä¸­æ·»åŠ prepareForSegue: 12345678override func prepare(for segue: UIStoryboardSegue, sender: Any?) &#123; if segue.identifier == &quot;showRestaurantDetail&quot; &#123; if let indexPath = tableView.indexPathForSelectedRow &#123; let destinationController = segue.destination as! RestaurantDetailViewController destinationController.restaurantImage = restaurantImages[indexPath.row] &#125; &#125;&#125; ä¸ºè¯¦æƒ…é¡µé¢æ·»åŠ ä¸‰ä¸ªæ ‡ç­¾ æ·»åŠ ä¸‰ä¸ªæ ‡ç­¾ï¼ŒTextåˆ†åˆ«ä¸ºNameï¼ŒLocationï¼ŒTypeï¼ˆæ³¨æ„ï¼šè™½ç„¶Textä¼šè¢«æ›¿ä»£ï¼Œä½†ä¸è¦å¼€å§‹ç•™ç©ºï¼Œå› ä¸ºç•™ç©ºä¼šä½¿ä¹‹åŽç”Ÿæˆstack viewæ—¶ï¼Œå¤§å°ä¸ç¡®å®šï¼‰ï¼›ä¸‰ä¸ªlabelç”Ÿæˆä¸€ä¸ªstack viewï¼Œè°ƒæ•´å­—ä½“å’Œå¤§å°ï¼Œæ·»åŠ é€‚å½“çš„çº¦æŸã€‚ æ·»åŠ ä¸‰ä¸ªoutletï¼Œå’Œä¸‰ä¸ªä¸Žä¹‹å¯¹åº”çš„å˜é‡ã€‚ 12345678910111213141516@IBOutlet var nameLabel: UILabel!@IBOutlet var locationLabel: UILabel!@IBOutlet var typeLabel: UILabel!var nameText = &quot;&quot;var locationText = &quot;&quot;var typeText = &quot;&quot;override func viewDidLoad() &#123; super.viewDidLoad() restaurantImageView.image = UIImage(named: restaurantImage) nameLabel.text = nameText locationLabel.text = locationText typeLabel.text = typeText&#125; ä¿®æ”¹RestaurantTableViewControllerä¸­çš„prepareForSegueæ–¹æ³•ï¼š 1234567891011override func prepare(for segue: UIStoryboardSegue, sender: Any?) &#123; if segue.identifier == &quot;showRestaurantDetail&quot; &#123; if let indexPath = tableView.indexPathForSelectedRow &#123; let destinationController = segue.destination as! RestaurantDetailViewController destinationController.restaurantImage = restaurantImages[indexPath.row] destinationController.nameText = restaurantNames[indexPath.row] destinationController.locationText = restaurantLocations[indexPath.row] destinationController.typeText = restaurantTypes[indexPath.row] &#125; &#125;&#125; ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 11 é¢å‘å¯¹è±¡ç¼–ç¨‹ä»‹ç»]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-11.html</url>
    <content type="text"><![CDATA[å…³äºŽé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆObject Oriented Programming ï¼ŒOOPï¼‰çš„çŸ¥è¯†å°±ä¸å¤šä»‹ç»äº†ï¼Œè¿™ä¸æ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€ä¸­çš„æ¦‚å¿µï¼Œè€Œæ˜¯ç¼–ç¨‹æ–¹æ³•ã€‚OOPæœ€å¥½çš„ä¸€åœ°æ–¹æ˜¯ï¼Œå®ƒè®©å¤æ‚çš„è½¯ä»¶åˆ†è§£æˆä¸€ä¸ªä¸ªå°çš„éƒ¨åˆ†ï¼Œæ–¹ä¾¿ç¨‹åºå‘˜å¼€æ”¾å’Œç®¡ç†ã€‚è¿™ä¸€ç¯‡æ–‡ç« å°±æŠŠä¸Šä¸€ç¯‡æ–‡ç« å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 10 Navigation Controllerçš„ä»‹ç»å’ŒSegueçš„ä»£ç æ•´ç†æˆOOPå½¢å¼ã€‚ é‡æ–°ä¿®æ”¹FoodPiné¡¹ç›® ä¹‹å‰åœ¨RestaurantTableViewControllerç±»ä¸­ï¼Œå®šä¹‰äº†restaurantNames,restaurantImages, restaurantLocations,restaurantTypeså››ä¸ªæ•°ç»„å˜é‡ï¼Œåˆ†åˆ«è¡¨ç¤ºrestaurantçš„åå­—ï¼Œå›¾ç‰‡åç§°ï¼Œä½ç½®ï¼Œç±»åž‹ã€‚æ¯ä¸ªrestaurantçš„ä¿¡æ¯åˆ†æ•£åœ¨å››ä¸ªæ•°ç»„ä¸­ï¼Œè€Œä¸”æ•°ç»„çš„å†…å®¹é¡ºåºè¦å¯¹åº”ï¼ŒçŽ°åœ¨æŠŠå››ä¸ªä¿¡æ¯ç»„æˆåœ¨ä¸€ä¸ªç±»ä¸­Restaurantã€‚ æ·»åŠ ç±»æ–‡ä»¶Restaurant.swift 123456789101112131415161718import Foundationclass Restaurant &#123; var name = &quot;&quot; var type = &quot;&quot; var location = &quot;&quot; var image = &quot;&quot; var isVisited = false // 1 init(name: String, type: String, location: String, image: String, isVisited: Bool) &#123; self.name = name self.type = type self.location = location self.image = image self.isVisited = isVisited &#125;&#125; 1 è‡ªå®šä¹‰çš„åˆå§‹åŒ–æ–¹æ³•ã€‚åœ¨Swiftä¸­ï¼Œç±»çš„æ‰€æœ‰å˜é‡éƒ½éœ€è¦è¢«åˆå§‹åŒ–ï¼Œæˆ–è€…å£°æ˜Žä¸ºå¯é€‰å€¼ã€‚ ç”¨Restaurantå¯¹è±¡æ•°ç»„ä»£æ›¿RestaurantTableViewControllerä¸­çš„å‡ ä¸ªæ•°ç»„å˜é‡ã€‚ var restaurants:[Restaurant] = [ Restaurant(name: &quot;Cafe Deadend&quot;, type: &quot;Coffee &amp; Tea Shop&quot;, location: &quot;HongKong&quot;, image: &quot;cafedeadend.jpg&quot;, isVisited: false), Restaurant(name: &quot;Homei&quot;, type: &quot;Cafe&quot;, location: &quot;Hong Kong&quot;, image:&quot;homei.jpg&quot;, isVisited: false), Restaurant(name: &quot;Teakha&quot;, type: &quot;Tea House&quot;, location: &quot;Hong Kong&quot;, image:&quot;teakha.jpg&quot;, isVisited: false), Restaurant(name: &quot;Cafe loisl&quot;, type: &quot;Austrian / Causual Drink&quot;, location: &quot;Hong Kong&quot;, image: &quot;cafeloisl.jpg&quot;, isVisited: false), Restaurant(name: &quot;Petite Oyster&quot;, type: &quot;French&quot;, location: &quot;Hong Kong&quot;, image: &quot;petiteoyster.jpg&quot;, isVisited: false), Restaurant(name: &quot;For Kee Restaurant&quot;, type: &quot;Bakery&quot;, location: &quot;HongKong&quot;, image: &quot;forkeerestaurant.jpg&quot;, isVisited: false), Restaurant(name: &quot;Po&apos;s Atelier&quot;, type: &quot;Bakery&quot;, location: &quot;Hong Kong&quot;, image: &quot;posatelier.jpg&quot;, isVisited: false), Restaurant(name: &quot;Bourke Street Backery&quot;, type: &quot;Chocolate&quot;, location: &quot;Sydney&quot;, image: &quot;bourkestreetbakery.jpg&quot;, isVisited: false), Restaurant(name: &quot;Haigh&apos;s Chocolate&quot;, type: &quot;Cafe&quot;, location: &quot;Sydney&quot;, image: &quot;haighschocolate.jpg&quot;, isVisited: false), Restaurant(name: &quot;Palomino Espresso&quot;, type: &quot;American / Seafood&quot;, location: &quot;Sydney&quot;, image: &quot;palominoespresso.jpg&quot;, isVisited: false), Restaurant(name: &quot;Upstate&quot;, type: &quot;American&quot;, location: &quot;New York&quot;, image: &quot;upstate.jpg&quot;, isVisited: false), Restaurant(name: &quot;Traif&quot;, type: &quot;American&quot;, location: &quot;New York&quot;, image: &quot;traif.jpg&quot;, isVisited: false), Restaurant(name: &quot;Graham Avenue Meats&quot;, type: &quot;Breakfast &amp; Brunch&quot;, location: &quot;New York&quot;, image: &quot;grahamavenuemeats.jpg&quot;, isVisited: false), Restaurant(name: &quot;Waffle &amp; Wolf&quot;, type: &quot;Coffee &amp; Tea&quot;, location: &quot;NewYork&quot;, image: &quot;wafflewolf.jpg&quot;, isVisited: false), Restaurant(name: &quot;Five Leaves&quot;, type: &quot;Coffee &amp; Tea&quot;, location: &quot;New York&quot;,image: &quot;fiveleaves.jpg&quot;, isVisited: false), Restaurant(name: &quot;Cafe Lore&quot;, type: &quot;Latin American&quot;, location: &quot;New York&quot;, image: &quot;cafelore.jpg&quot;, isVisited: false), Restaurant(name: &quot;Confessional&quot;, type: &quot;Spanish&quot;, location: &quot;New York&quot;, image: &quot;confessional.jpg&quot;, isVisited: false), Restaurant(name: &quot;Barrafina&quot;, type: &quot;Spanish&quot;, location: &quot;London&quot;, image: &quot;barrafina.jpg&quot;, isVisited: false), Restaurant(name: &quot;Donostia&quot;, type: &quot;Spanish&quot;, location: &quot;London&quot;, image: &quot;donostia.jpg&quot;, isVisited: false), Restaurant(name: &quot;Royal Oak&quot;, type: &quot;British&quot;, location: &quot;London&quot;, image: &quot;royaloak.jpg&quot;, isVisited: false), Restaurant(name: &quot;CASK Pub and Kitchen&quot;, type: &quot;Thai&quot;, location: &quot;London&quot;, image: &quot;caskpubkitchen.jpg&quot;, isVisited: false) ] æ›´æ–° tableView(_:numberOfRowsInSection:) : 1234override func tableView(_ tableView: UITableView, numberOfRowsInSectionsection: Int) -&gt; Int &#123; return restaurants.count&#125; æ›´æ–° tableView(_:cellForRowAtIndexPath:) ï¼š 12345678910111213141516override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cellIdentifier = &quot;Cell&quot; let cell = tableView.dequeueReusableCell(withIdentifier: cellIdentifier, for: indexPath) as! RestaurantTableViewCell // Configure the cell... cell.nameLabel.text = restaurants[indexPath.row].name cell.thumbnailImageView.image = UIImage(named: restaurants[indexPath.row].image) cell.thumbnailImageView.layer.cornerRadius = 30.0 cell.thumbnailImageView.clipsToBounds = true cell.locationLabel.text = restaurants[indexPath.row].location cell.typeLabel.text = restaurants[indexPath.row].type cell.accessoryType = restaurants[indexPath.row].isVisited ? .checkmark : .none return cell&#125; æ›´æ–°tableView(_:commit:forRowAt:) : 123456override func tableView(_ tableView: UITableView, commit editingStyle: UITableViewCellEditingStyle, forRowAt indexPath: IndexPath) &#123; if editingStyle == .delete &#123; restaurants.remove(at: indexPath.row) &#125; tableView.deleteRows(at: [indexPath], with: .fade)&#125; æ›´æ–° tableView(_:editActionsForRowAt:) ï¼š override func tableView(_ tableView: UITableView, editActionsForRowAt indexPath: IndexPath) -&gt; [UITableViewRowAction]? { let shareAction = UITableViewRowAction(style: .default, title: &quot;Share&quot;, handler: { (action, indexPath) -&gt; Void in let defaultText = &quot;Just checking in at &quot; + self.restaurants[indexPath.row].name if let imageToShare = UIImage(named: self.restaurants[indexPath.row].image) { let activityController = UIActivityViewController(activityItems: [defaultText, imageToShare], applicationActivities: nil) self.present(activityController, animated: true, completion: nil) } }) let deleteAction = UITableViewRowAction(style: .default, title: &quot;Delete&quot;, handler: { (action, indexPath) -&gt; Void in self.restaurants.remove(at: indexPath.row) tableView.deleteRows(at: [indexPath], with: .fade) }) shareAction.backgroundColor = UIColor(red: 48.0/255.0, green: 173.0/255.0, blue: 99.0/255.0, alpha: 1.0) deleteAction.backgroundColor = UIColor(red: 202.0/255.0, green: 202.0/255.0, blue: 203.0/255.0, alpha: 1.0) return [deleteAction,shareAction] } RestaurantDetailViewControllerä¸­çš„å››ä¸ªå˜é‡ï¼š 1234var nameText = &quot;&quot;var locationText = &quot;&quot;var typeText = &quot;&quot;var restaurantImage = &quot;&quot; æ›´æ–°ä¸ºï¼švar restaurant: Restaurant! ä¸Žä¹‹å¯¹åº”çš„viewDidLoad()ä¹Ÿä¿®æ”¹ä¸ºï¼š override func viewDidLoad() { super.viewDidLoad() restaurantImageView.image = UIImage(named: restaurant.image) nameLabel.text = restaurant.name locationLabel.text = restaurant.location typeLabel.text = restaurant.type } æœ€åŽprepare(for:sender:)æ–¹æ³•ä¹Ÿåšå¯¹åº”ä¿®æ”¹ï¼š 12345678override func prepare(for segue: UIStoryboardSegue, sender: Any?) &#123; if segue.identifier == &quot;showRestaurantDetail&quot; &#123; if let indexPath = tableView.indexPathForSelectedRow &#123; let destinationController = segue.destination as! RestaurantDetailViewController destinationController.restaurant = restaurants[indexPath.row] &#125; &#125;&#125; è¿è¡Œæ²¡æœ‰é—®é¢˜ã€‚ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 4ï¼šCALayerä»‹ç»(swift)]]></title>
    <url>%2F2017%2Fios-tutorial-4-calayer.html</url>
    <content type="text"><![CDATA[Layersæ˜¯Core Animation Frameworkçš„ä¸€éƒ¨åˆ†ã€‚Core Animation Frameworkåœ¨iOSæž¶æž„çš„ä½ç½®ï¼š è®¿é—®CALayerå‡¡æ˜¯ç»§æ‰¿è‡³UIViewçš„éƒ½å°†æœ‰ä¸€ä¸ªå±žæ€§layeræ¥è¡¨ç¤ºCALayerã€‚myView.layer åˆå§‹åŒ–é¡¹ç›® æ–°å»ºCALayerDemoï¼Œsingle View Applicationæ¨¡æ¿ æ–°å»ºä¸€ä¸ªUIViewå’Œä¸€ä¸ªUILabel åœ†è§’CALayerçš„cornerRadiuså±žæ€§å¤§å°è¡¨ç¤ºUIViewåœ†è§’å¤„åœ†çš„åŠå¾„å¤§å°ã€‚ç±»ä¼¼äºŽbox.layer.cornerRadius = 20ï¼Œå°±å½¢æˆäº†åœ†è§’ï¼Œæ•°å­—è¶Šå¤§åœ†è§’æ•ˆæžœè¶Šå¤§ï¼Œå½“cornerRadiusç­‰äºŽboxåŠå¾„æ—¶ï¼Œboxå°±ä¼šå˜æˆä¸€ä¸ªå›­ã€‚ é˜´å½±æ•ˆæžœ1234box.layer.shadowOffset = CGSize(width: 5, height: 5)box.layer.shadowOpacity = 0.7box.layer.shadowRadius = 10box.layer.shadowColor = UIColor.blue.cgColor shadowOffsetè¡¨ç¤ºé˜´å½±åç§»å¤§å°ï¼Œä¹Ÿå°±æ˜¯é˜´å½±å‘boxçš„ä¸‹æ”¾åç§»5å’Œå‘å³æ–¹åç§»5è·ç¦»ã€‚ shadowOpacityæ˜¯é˜´å½±é€æ˜Žåº¦ shadowRadiusæ˜¯é˜´å½±æ¶‰åŠçš„åŠå¾„ï¼Œå¹¶ä¸”è¿™ä¸ªåŠå¾„è¶Šå¤§ï¼Œé˜´å½±çš„é¢œè‰²æ·±æµ…å°±ä¼šè¶Šæ¥è¶Šå°ã€‚shadowRadiusä¸ŽshadowOffsetæ˜¯å…±åŒä½œç”¨çš„ è®¾ç½®è¾¹çš„å®½åº¦å’Œé¢œè‰²12box.layer.borderColor = UIColor.black.cgColorbox.layer.borderWidth = 3 å±•ç¤ºå›¾ç‰‡123box.layer.contents = UIImage(named: &quot;tree.jpg&quot;)?.cgImagebox.layer.contentsGravity = kCAGravityResizebox.layer.masksToBounds = true CALayerçš„contentså±žæ€§æ˜¯open var contents: Any?ï¼Œå¯ä»¥è®¾ç½®ä¸ºå›¾ç‰‡ contentsGravityè®¾ç½®æˆkCAGravityResizeï¼Œè¡¨ç¤ºcontentsçš„å†…å®¹ä¼šè°ƒæ•´å¤§å°ä»¥é€‚åº”layerã€‚å¦‚æžœè®¾ç½®æˆå…¶ä»–å€¼å¯èƒ½å‡ºçŽ°å¤§å°ä¸é€‚çš„å½¢è±¡ï¼Œæ¯”å¦‚kCAGravityBottomRightï¼Œå°†æ˜¯ï¼š masksToBoundsä¸ºtrueè¡¨ç¤ºæŒ‰ç…§layerçš„è¾¹æ¡†èŒƒå›´æ˜¾ç¤ºå†…å®¹ï¼›å¦‚æžœæ˜¯falseï¼Œå°†ä¼šæ˜¯å¦‚ä¸‹ç»“æžœ èƒŒæ™¯é¢œè‰²å’Œé€æ˜Žåº¦12box.layer.backgroundColor = UIColor.green.cgColorbox.layer.opacity = 0.5 ä»£ç CALayerDemo å‚è€ƒ A Beginnerâ€™s Guide to CALayer]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 5ï¼šå…³äºŽåœ°ç†å®šä½å’Œç‰¹å®šåŒºåŸŸ(Swift)]]></title>
    <url>%2F2017%2Fios-tutorial-5.html</url>
    <content type="text"><![CDATA[ç”¨æˆ·å¸¦ç€iPhoneè¿›å…¥æŸä¸ªåŒºåŸŸï¼Œå¹¶åœ¨æŸäº›åŒºåŸŸå¾…å¤šä¹…åœ¨å¼€å‘è‚¯èƒ½ä¼šæœ‰å¾ˆå¤§ç”¨å¤„ã€‚ åˆå§‹åŒ–é¡¹ç›® åˆ›å»ºæ–°çš„é¡¹ç›®GeoTargetingï¼Œä½¿ç”¨Single View Applictionæ¨¡æ¿ æ·»åŠ ä¸€ä¸ªMap Viewï¼Œå¤§å°ä¸ºæ•´ä¸ªé¡µé¢ æ·»åŠ ç›¸å…³outlet å®žçŽ°ä¸¤ä¸ªåè®® 123class ViewController: UIViewController, MKMapViewDelegate, CLLocationManagerDelegate &#123; @IBOutlet weak var mapView: MKMapView! è®¾ç½®CLLocationManagerå’ŒMKMapViewã€‚ 1234567891011121314151617// 1let locationManager = CLLocationManager()override func viewDidLoad() &#123; super.viewDidLoad() // 2 locationManager.delegate = self locationManager.distanceFilter = kCLLocationAccuracyNearestTenMeters locationManager.desiredAccuracy = kCLLocationAccuracyBest // 3 mapView.delegate = self mapView.showsUserLocation = true mapView.userTrackingMode = .follow setupData() &#125; 1 åˆ›å»ºä¸€ä¸ªCLLocationManagerçš„å®žä¾‹ï¼Œç”¨äºŽæ£€æµ‹ç”¨æˆ·çš„ä½ç½®å˜åŒ– 2 è®¾ç½®locationManagerä¸€äº›å‚æ•°ï¼Œç¡®å®šç²¾ç¡®æ€§ åœ¨viewDidAppearä¸­æ ¸æŸ¥ç”¨æˆ·æŽˆæƒçŠ¶æ€1234567891011121314151617override func viewDidAppear(_ animated: Bool) &#123; super.viewDidAppear(animated) let authorizationStatus = CLLocationManager.authorizationStatus() // 1 if authorizationStatus == .notDetermined &#123; locationManager.requestAlwaysAuthorization() &#125; // 2 else if authorizationStatus == .denied &#123; showAlert(&quot;Location services &quot;) &#125; // 3 else if authorizationStatus == .authorizedAlways &#123; locationManager.startUpdatingLocation() &#125;&#125; 1 å¦‚æžœç”¨æˆ·æŽˆæƒçŠ¶æ€æ˜¯ä¸ç¡®å®šï¼Œå°±æ£€æŸ¥æ˜¯å¦æ˜¯ä¸€ç›´çš„çŠ¶æ€ã€‚ 2 å¦‚æžœç”¨æˆ·æŽˆæƒçŠ¶æ€æ˜¯æ‹’ç»ï¼Œå°±ç”¨å¼¹æ¡†æ˜¾ç¤ºä¿¡æ¯ç»™ç”¨æˆ·çœ‹ã€‚showAlert(title:)æ˜¯å¼¹æ¡†å‡½æ•°ï¼š 1234567891011func showAlert(_ title: String) &#123; print(title) let alertController = UIAlertController(title: title, message: nil, preferredStyle: .alert) let action = UIAlertAction(title: &quot;Cancel&quot;, style: .cancel, handler: nil) alertController.addAction(action) present(alertController, animated: true, completion: nil) &#125; 3 å¦‚æžœç”¨æˆ·æŽˆæƒçŠ¶æ€æ˜¯ä¸€ç›´ï¼Œå°±å¼€å§‹æ›´æ–°åœ°ç†ä½ç½®ã€‚ å¦å¤–ï¼Œè¿˜éœ€è¦åœ¨.plistæ–‡ä»¶ä¸­æ·»åŠ keyä¸ºNSLocationAlwaysUsageDescriptionçš„æç¤ºä¿¡æ¯ éœ€è¦ä¸€ç›´èƒ½èŽ·å–ä½ çš„ä½ç½® æ‰å¯ä»¥ã€‚åœ¨è°ƒç”¨requestAlwaysAuthorization()æ—¶è¿™ä¸ªkeyæ˜¯å¿…é¡»çš„ã€‚å…è®¸èŽ·å–å½“å‰ä½ç½®ã€‚ æ·»åŠ å‡½æ•°setupData()1234567891011121314151617181920212223242526272829303132333435func setupData() &#123; // 1 if CLLocationManager.isMonitoringAvailable(for: CLCircularRegion.self) &#123; // 2 let title = &quot;å…¨å­£é…’åº—&quot; let coordinate = CLLocationCoordinate2DMake(31.1849700000,121.6303200000) let regionRadius = 300.0 // 3 let region = CLCircularRegion(center: CLLocationCoordinate2D(latitude: coordinate.latitude, longitude: coordinate.longitude), radius: regionRadius, identifier: title) locationManager.startMonitoring(for: region) // 4 let restaurantAnnotation = MKPointAnnotation() restaurantAnnotation.coordinate = coordinate restaurantAnnotation.title = title mapView.addAnnotation(restaurantAnnotation) // 5 let circle = MKCircle(center: coordinate, radius: regionRadius) mapView.add(circle) &#125; else &#123; print(&quot;ä¸èƒ½è¿½è¸ªåŒºåŸŸ&quot;) &#125;&#125;// 6func mapView(_ mapView: MKMapView, rendererFor overlay: MKOverlay) -&gt; MKOverlayRenderer &#123; let circleRenderer = MKCircleRenderer(overlay: overlay) circleRenderer.strokeColor = UIColor.red circleRenderer.lineWidth = 1.0 return circleRenderer&#125; 1 åˆ¤æ–­æ˜¯å¦ç›‘æŽ§åŒºåŸŸåŠŸèƒ½æ˜¯å¦å¯ç”¨ã€‚å½“ç”¨æˆ·æ‹’ç»çŠ¶æ€ï¼Œæˆ–ç”¨æˆ·ä¸è®©appèƒŒæ™¯ä¸‹åˆ·æ–°ï¼Œæˆ–é£žè¡Œæ¨¡å¼æ—¶è¿™ä¸ªåŠŸèƒ½ä¸å¯ç”¨ 2 éšæ„æž„å»ºä¸€ä¸ªä½ç½®ï¼ˆå¦‚å…¨å­£é…’åº—ï¼‰ï¼Œç»çº¬åº¦å¯é€šè¿‡ç»çº¬åº¦æŸ¥è¯¢æŸ¥è¯¢ï¼Œå¹¶è®¾ç½®åŒºåŸŸåŠå¾„regionRadiusï¼Œå•ä½æ˜¯ç±³ã€‚ 3 åˆå§‹åŒ–CLCircularRegionã€‚ 4 æ·»åŠ ä¸€ä¸ªæ³¨è§£ï¼Œç±»ä¼¼å¤§å¤´é’ˆå½¢çŠ¶ã€‚ 5 æ·»åŠ åŒºåŸŸåœ†åœˆæ ‡å¿—ã€‚ 6 è¿™æ˜¯MKMapViewDelegateçš„æ–¹æ³•ï¼Œç”¨æˆ·ç”»åœ† CLRegionCLRegionå°±æ˜¯ä¸Šé¢æ ‡å®šçš„åœ†å½¢åŒºåŸŸã€‚ä¸‹é¢æ·»åŠ ä¸¤ä¸ªCLLocationManagerDelegateçš„å›žè°ƒæ–¹æ³•ï¼Œåˆ†åˆ«åœ¨æ˜¯è®¾å¤‡çš„å®šä½ä½ç½®è¿›å’Œå‡ºæ ‡å®šçš„åŒºåŸŸæ—¶è°ƒç”¨ã€‚12345678// MARK:- CLLocationManagerDelegatefunc locationManager(_ manager: CLLocationManager, didEnterRegion region: CLRegion) &#123; showAlert(&quot;enter \(region.identifier)&quot;)&#125;func locationManager(_ manager: CLLocationManager, didExitRegion region: CLRegion) &#123; showAlert(&quot;exit \(region.identifier)&quot;)&#125; Xcodeä¸­çš„ä½ç½®è°ƒè¯•ä¸Šé¢è®¾å¤‡çš„ä½ç½®ï¼Œä¸å¯èƒ½æ‹¿ç€æ‰‹æœºåˆ°å¤„è·‘ï¼ŒXcodeæé«˜äº†æ–¹ä¾¿çš„è°ƒå¼æ–¹å¼ã€‚å¯ä»¥å»ºç«‹ä½ç½®æ–‡ä»¶.GPX: xcodeä¹Ÿæä¾›ä¸–ç•Œä¸Šä¸€äº›å¸¸ç”¨çš„ä½ç½®æ–‡ä»¶ï¼šç‚¹å‡»ä¸Šå›¾è°ƒè¯•æ æœ€åŽçš„ä½ç½®æ ‡å¿—å°±å¯ä»¥è°ƒå¼äº†ã€‚ å¤æ‚é€»è¾‘ä¸‹çš„ä½ç½®å¤„ç†å¦‚æžœä½ç½®ä¸åœå˜åŒ–ï¼Œåœ¨ç›‘æŽ§åŒºåŸŸåœç•™æ—¶é—´æ¯”è¾ƒçŸ­ï¼Œæˆ–è€…ç›‘æŽ§åŒºåŸŸæ¯”è¾ƒå¤šæ˜¯ï¼Œå¤„ç†ä½ç½®é—®é¢˜å°±æ¯”è¾ƒå¤æ‚äº†ã€‚æ›´æ–°éƒ¨åˆ†ä»£ç ï¼š123456789101112131415161718// 1var monitoredRegions: Dictionary&lt;String, NSDate&gt; = [:] func locationManager(_ manager: CLLocationManager, didEnterRegion region: CLRegion) &#123; showAlert(&quot;enter \(region.identifier)&quot;) // 2 monitoredRegions[region.identifier] = NSDate()&#125;func locationManager(_ manager: CLLocationManager, didExitRegion region: CLRegion) &#123; showAlert(&quot;exit \(region.identifier)&quot;) // 3 monitoredRegions.removeValue(forKey: region.identifier)&#125;// 4func locationManager(_ manager: CLLocationManager, didUpdateLocations locations: [CLLocation]) &#123; updateRegions()&#125; 1 å®šä¹‰ä»¥å­—å…¸ç”¨äºŽå­˜å‚¨ç”¨æˆ·è¿›å…¥ç›‘æŽ§åŒºçš„æ—¶é—´ã€‚ 2 è®°å½•è¿›å…¥æ—¶é—´ã€‚ 3 åˆ é™¤è¿›å…¥æ—¶é—´ã€‚ 4 ç”¨æˆ·ä½ç½®å˜åŒ–åŽè°ƒç”¨ åŠ å…¥å‡½æ•°updateRegions()ä»£ç ï¼š1234567891011121314151617181920func updateRegions() &#123; // 1 let regionMaxVisiting = 10.0 var regionsToDelete: [String] = [] // 2 for regionIdentifier in monitoredRegions.keys &#123; // 3 if NSDate().timeIntervalSince(monitoredRegions[regionIdentifier]! as Date) &gt; regionMaxVisiting &#123; showAlert(&quot;è°¢è°¢è®¿é—®&quot;) regionsToDelete.append(regionIdentifier) &#125; &#125; // 4 for regionIdentifier in regionsToDelete &#123; monitoredRegions.removeValue(forKey: regionIdentifier) &#125;&#125; 1 åŠ çš„ç”¨æˆ·åˆ°æŸä¸ªåŒºåŸŸ10sï¼Œå°±ç¡®å®šç”¨æˆ·å·²ç»åˆ°è®¿é—®è¿‡è¿™ä¸ªåŒºåŸŸã€‚regionsToDeleteç”¨æ¥å­˜å‚¨å³å°†åˆ é™¤çš„åŒºåŸŸçš„identifierï¼Œä¹Ÿå°±ç”¨æˆ·å¾…è¿‡è¶…è¿‡10sçš„åŒºåŸŸã€‚ 2 éåŽ†æ‰€æœ‰ç›‘æŽ§åŒºåŸŸ 3 timeIntervalSinceç”¨æ¥è®¡ç®—æŸä¸ªæ—¶é—´åˆ°å½“å‰æ—¶é—´çš„å·®å€¼ï¼Œå•ä½ä¸ºç§’ã€‚ 4 åˆ é™¤ç”¨æˆ·å¾…è¿‡è¶…è¿‡regionMaxVisitingçš„åŒºåŸŸã€‚ ä»£ç GeoTargeting å‚è€ƒ Building a Geo Targeting iOS App in Swift]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 3ï¼šSpeech Frameworkçš„ç®€å•ä½¿ç”¨]]></title>
    <url>%2F2017%2Fios-tutorial-3-speechframework.html</url>
    <content type="text"><![CDATA[åœ¨WWDC 2016æ—¶ï¼ŒAppleä»‹ç»äº†Speech frameworkï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å£°éŸ³è¯†åˆ«æ¡†æž¶ã€‚å®žé™…ä¸Šè¿™æ˜¯åˆ©ç”¨Siriè¿›è¡Œå£°éŸ³è¯†åˆ«ã€‚ åˆå§‹åŒ–é¡¹ç›® æ–°å»ºSpeechToTextDemoï¼Œæ¨¡æ¿æ˜¯Single View Applicationã€‚ æ·»åŠ ç®€å•çš„UI åˆ†åˆ«å®šä¹‰UITextViewå’ŒUIButtonçš„ä¸¤ä¸ªoutletï¼Œä¸ºtextViewå’ŒmicrophoneButtonã€‚ å†ä¸ºUIButtonæ·»åŠ ä¸€ä¸ªactionï¼š123@IBAction func microphoneTapped(_ sender: AnyObject) &#123;&#125; ä½¿ç”¨Speech Framework import Speech å®žçŽ°SFSpeechRecognizerDelegateåè®® ç”¨æˆ·æŽˆæƒèŽ·å–å£°éŸ³æ•°æ®æ˜¯è¦èŽ·å¾—ç”¨æˆ·çš„æŽˆæƒçš„ã€‚ åœ¨ViewControllerç±»ä¸­å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œä½œä¸ºè¯­éŸ³è¯†åˆ«å™¨ã€‚å‚æ•°identifieræ˜¯è¯†åˆ«çš„è¯­ç§ï¼Œå¯å‚è€ƒè¿™ä¸ªåˆ—è¡¨ï¼Œä¸­æ–‡æ˜¯â€œ zh_Hans_CNâ€ã€‚private let speechRecognizer = SFSpeechRecognizer(locale: Locale.init(identifier: &quot;zh_Hans_CN&quot;)) åœ¨viewDidLoad()ä¸­ï¼š 1234567891011121314151617181920212223242526272829override func viewDidLoad() &#123; super.viewDidLoad() // 1 microphoneButton.isEnabled = false speechRecognizer?.delegate = self // 2 SFSpeechRecognizer.requestAuthorization&#123; (authStatus) in var isButtionEnabled = false switch authStatus &#123; case .authorized: isButtionEnabled = true case .denied: isButtionEnabled = false print(&quot;ç”¨æˆ·æ‹’ç»æŽ¥å—è¯­éŸ³è¯†åˆ«&quot;) case .notDetermined: isButtionEnabled = false print(&quot;è¯­éŸ³è¯†åˆ«åŠŸèƒ½æ²¡æœ‰ç»è¿‡è®¤å¯&quot;) case .restricted: isButtionEnabled = false print(&quot;å½“å‰è®¾å¤‡ä¸èƒ½è¯­éŸ³è¯†åˆ«&quot;) &#125; self.microphoneButton.isEnabled = isButtionEnabled &#125; startRecording()&#125; 1 é»˜è®¤æŒ‰é’®è®¾æˆä¸å¯ç”¨ 2 æŽˆæƒç»“æžœå›žè°ƒ Appleéœ€è¦æ¯ä¸ªappå¦‚è¦ç”¨æˆ·æŽˆæƒæ—¶ï¼Œéƒ½åº”è¯¥å®šåˆ¶ä¸€ä¸ªåé¦ˆä¿¡æ¯ï¼ˆinfo.plistï¼‰ã€‚åœ¨info.plistä¸­æ·»åŠ ä¸¤ä¸ªkeyï¼Œåˆ†åˆ«æ˜¯éº¦å…‹é£Žå’Œè¯­éŸ³è¯†åˆ«çš„æŽˆæƒï¼ŒPrivacy - Microphone Usage Descriptionå’ŒPrivacy - Speech Recognition Usage Descriptionã€‚ å¤„ç†è¯­éŸ³è¯†åˆ« åœ¨ViewControllerç±»ä¸­æ·»åŠ ä¸‰ä¸ªå˜é‡ 123private var recognitionRequest: SFSpeechAudioBufferRecognitionRequest? //è¯†åˆ«è¯·æ±‚private var recognitionTask: SFSpeechRecognitionTask? // æä¾›è¯†åˆ«è¯·æ±‚çš„ç»“æžœprivate let audioEngine = AVAudioEngine() // SFSpeechAudioBufferRecognitionRequestå¯¹è±¡å¤„ç†è¯­éŸ³è¯†åˆ«çš„è¯·æ±‚ï¼Œä»£è¡¨è¯­éŸ³è¿›å…¥è¯­éŸ³è¯†åˆ«å™¨ã€‚ SFSpeechRecognitionTask è¯†åˆ«ä»»åŠ¡ï¼Œç”¨äºŽæ“ä½œè¯†åˆ«å™¨çš„åœæ­¢å’Œå¼€å§‹ AVAudioEngine è¯­éŸ³å¼•æ“Žï¼Œæä¾›è¯­éŸ³è¾“å‡º åˆ›å»ºæ–°å‡½æ•°startRecording()ï¼Œè¿™ä¸ªå‡½æ•°åœ¨ç‚¹å‡»buttonåŽè°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯microphoneTapped(:)ä¸­æœ€åŽè°ƒç”¨ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162func startRecording() &#123; // 1 if recognitionTask != nil &#123; recognitionTask?.cancel() recognitionTask = nil &#125; // 2 let audioSession = AVAudioSession.sharedInstance() do &#123; try audioSession.setCategory(AVAudioSessionCategoryRecord) try audioSession.setMode(AVAudioSessionModeMeasurement) try audioSession.setActive(true, with: .notifyOthersOnDeactivation) &#125; catch &#123; print(&quot;audioSessionçš„å±žæ€§è®¾ç½®å¤±è´¥&quot;) &#125; // 3 recognitionRequest = SFSpeechAudioBufferRecognitionRequest() // 4 guard let inputNode = audioEngine.inputNode else &#123; fatalError(&quot;Audio engine has no input node&quot;) &#125; // 5 guard let recognitionRequest = recognitionRequest else &#123; fatalError(&quot;Unable to create an SFSpeechAudioBufferRecognitionRequest object&quot;) &#125; // 6 recognitionRequest.shouldReportPartialResults = true // 7 recognitionTask = speechRecognizer?.recognitionTask(with: recognitionRequest, resultHandler: &#123; (result, error) in var isFinal = false if result != nil &#123; self.textView.text = result?.bestTranscription.formattedString isFinal = (result?.isFinal)! &#125; if error != nil || isFinal &#123; self.audioEngine.stop() inputNode.removeTap(onBus: 0) self.recognitionRequest = nil self.recognitionTask = nil self.microphoneButton.isEnabled = true &#125; &#125;) let recordingFormat = inputNode.outputFormat(forBus: 0) inputNode.installTap(onBus: 0, bufferSize: 1024, format: recordingFormat) &#123; (buffer, when) in self.recognitionRequest?.append(buffer) &#125; audioEngine.prepare() do &#123; try audioEngine.start() &#125; catch &#123; print(&quot;audioEngine couldn&apos;t start beacause of an error.&quot;) &#125; textView.text = &quot;Say something, I&apos;m listening!&quot;&#125; 1 å¼€å§‹å½•éŸ³æ—¶çš„åˆå§‹åŒ– 2 AVAudioSessionæä¾›è¯­éŸ³å½•éŸ³ï¼Œè®¾ç½®ä¸€äº›å‚æ•° 3 åˆå§‹åŒ–SFSpeechAudioBufferRecognitionRequest 4 æ ¸æŸ¥audioEngineæ˜¯å¦å¯ç”¨ 5 æ ¸æŸ¥recognitionRequest 7 æ£€æµ‹çš„éŸ³é¢‘åŽçš„å›žè°ƒæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯å¼€å§‹å½•éŸ³åŽï¼Œæœ‰éŸ³é¢‘è¿›å…¥åŽéƒ½è°ƒç”¨ è¯­éŸ³è¯†åˆ«çš„å¼€å…³ å®žçŽ°ä»£ç†æ–¹æ³•speechRecognizer(_:availabilityDidChange:)ã€‚è¿™ä¸ªæ–¹æ³•åœ¨è¯­éŸ³è¯†åˆ«å™¨å¯ç”¨æ€§å‘ç”Ÿå˜åŒ–æ—¶è¢«è°ƒç”¨ã€‚ 1234567func speechRecognizer(_ speechRecognizer: SFSpeechRecognizer, availabilityDidChange available: Bool) &#123; if available &#123; microphoneButton.isEnabled = true &#125; else &#123; microphoneButton.isEnabled = false &#125;&#125; ç‚¹å‡»buttonæ—¶çš„æ“ä½œï¼š 1234567891011@IBAction func microphoneTapped(_ sender: AnyObject) &#123; if audioEngine.isRunning &#123; audioEngine.stop() recognitionRequest?.endAudio() microphoneButton.isEnabled = false microphoneButton.setTitle(&quot;Start Recording&quot;, for: .normal) &#125; else &#123; startRecording() microphoneButton.setTitle(&quot;Stop Recording&quot;, for: .normal) &#125; &#125; æ€»ç»“è¯­éŸ³è¯†åˆ«åœ¨iPhoneçš„è‡ªå¸¦é”®ç›˜ä¸­æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œä¸­æ–‡è¯†åˆ«çŽ‡å¾ˆé«˜ï¼Œå¦‚æžœä¸é«˜å…´æˆ–ä¸æ–¹ä¾¿æ‰“å­—ï¼Œå¾ˆæ–¹ä¾¿ä½¿ç”¨ã€‚ ä»£ç SpeechToTextDemo å‚è€ƒï¼š Building a Speech-to-Text App Using Speech Framework in iOS 10]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[swiftçš„æ–‡æ¡£æ³¨é‡Š]]></title>
    <url>%2F2017%2Fswift-document.html</url>
    <content type="text"><![CDATA[åœ¨Xcodeä¸­Quick Help ä¸ºå¼€å‘è€…æä¾›æ–¹ä¾¿å¿«æ·çš„ç®€æ´æ–‡æ¡£æŸ¥çœ‹æ–¹å¼ã€‚option+ç‚¹å‡»æŸ¥çœ‹å¼¹æ¡†ï¼Œoption+command+2åœ¨æ£€æŸ¥å™¨ä¸­æŸ¥çœ‹ã€‚swiftçš„ä¸­æœ‰ä¸¤ç§æ³¨é‡Šæ–¹å¼ï¼Œè®©Xcodeåœ¨Quick Helpä¸­æ˜¾ç¤ºã€‚è¿™ç§æ³¨é‡Šå¯ä»¥è®¤ä¸ºæ˜¯å°†æ–‡æ¡£ä»¥æŸç§è§„èŒƒçš„æ ¼å¼åµŒå…¥åœ¨å®žé™…ä»£ç çš„ä¸Šæ–¹ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡æŸäº›å·¥å…·è‡ªåŠ¨ç”Ÿæˆæ¼‚äº®çš„æ–‡æ¡£æ–‡ä»¶ã€‚è¿™ç§å†…åµŒå¼çš„æ–‡æ¡£åœ¨çŽ°ä»£ç¼–ç¨‹ä¸­æ˜¯å¾ˆæ™®éçš„ã€‚åœ¨swiftä¸­ï¼Œè¿™ä¸¤ç§æ³¨é‡Šæ–¹å¼æ˜¯ï¼š /** */ /// è¿™äº›æ³¨é‡Šä¸­è¿˜å¯ä»¥æœ‰å…¶ä»–ä¸€äº›è§„èŒƒ å¯ä»¥æ”¯æŒmarkdown å…³é”®è¯ ä¸‰ä¸ªå…³é”®è¯ï¼šparameterï¼Œ returnsï¼Œ throwsã€‚è¿™ä¸‰ä¸ªå…³é”®è¯ä¼šåœ¨æœ€å·¦è¾¹æ˜¾ç¤ºã€‚ è¿˜æœ‰ä¸€äº›å…³é”®è¯ä¼šè¢«æå–åˆ°descriptionä¸­ä½œä¸ºä¸€äº›ç‰¹æ®Šå­—æ®µæ˜¾ç¤ºï¼Œå…¶ä»–éƒ½ä¼šåœ¨descriptionæ­£å¸¸æ˜¾ç¤ºï¼šauthor, authors, copyright, dateï¼›since, versionï¼›attention, important, note, remark, warningï¼›bug, TODO, experimentï¼› complexityï¼› precondition, postcondition, requires, invariant see* å‚è€ƒhttp://swifter.tips/documentation/http://ericasadun.com/2015/06/14/swift-header-documentation-in-xcode-7/]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 2ï¼šç”¨Core Imageè¿›è¡Œé¢éƒ¨è¯†åˆ«(Swift)]]></title>
    <url>%2F2017%2Fios-tutorial-2-facerecognition.html</url>
    <content type="text"><![CDATA[é¢éƒ¨è¯†åˆ«APIä¸ä»…å¯ä»¥æ˜¯è¯†åˆ«é¢éƒ¨ï¼Œä¹Ÿå¯è¯†åˆ«é¢éƒ¨çš„ç‰¹æ®Šç»†èŠ‚ï¼Œä¾‹å¦‚å¾®ç¬‘ç”šè‡³çœ¨çœ¼ç›ã€‚ å»ºç«‹åˆå§‹é¡¹ç›®åŽŸæ–‡å»ºå¥½äº†åˆå§‹é¡¹ç›®ï¼Œæˆ‘è‡ªå·±æ–°å»ºäº†åˆå§‹é¡¹ç›® æ–°å»ºé¡¹ç›®Detector åˆ é™¤IBä¸­åŽŸæœ¬View Controller Sceneã€‚ æ‹–åŠ¨UITabBarControlleråˆ°IBä¸­ï¼Œå¾—åˆ°ä¸‰ä¸ªSceneã€‚é€‰æ‹©UITabBarControllerçš„Is Initial View Controllerï¼Œä½¿å…¶ä½œä¸ºåˆå§‹æŽ§åˆ¶å™¨ã€‚ ä¿®æ”¹Item 1çš„titleå’Œå…¶Bar Iteméƒ½ä¸ºPhotoï¼Œä¿®æ”¹å…¶Classä¸ºViewControllerã€‚ å‘Assetsä¸­æ·»åŠ å‡ å¼ äººç‰©å›¾ç‰‡ æƒ³Photo Sceneä¸­æ·»åŠ ä¸€ä¸ªImage Viewï¼ŒContent Modeæ”¹ä¸ºAspect Fitï¼Œé€‰æ‹©ä¸€ä¸ªå›¾ç‰‡ã€‚åœ¨ViewControlleræ·»åŠ å›¾ç‰‡å¯¹åº”@IBOutletï¼š@IBOutlet var personPic: UIImageView! é€‰ä¸­Item 2ï¼Œç‚¹å‡»èœå•æ EDitor &gt; Embed In &gt; Navigation Controllerï¼Œæ–°ç”Ÿæˆä¸€ä¸ªä¸Žä¹‹å…³è”çš„Sceneã€‚ æ–°å»ºCameraViewControllerç±»ï¼Œç»§æ‰¿è‡³UIViewControllerã€‚ä¿®æ”¹ä¸Šé¢ç”Ÿæˆçš„Sceneçš„Classå±žæ€§ä¸ºCameraViewControllerã€‚ æ‹–åŠ¨ä¸€ä¸ªUIBarButtonItemåˆ°Camera View Controller Sceneçš„UINavigationItemçš„å³è¾¹ï¼Œå¹¶é€‰æ‹©System Itemä¸ºCamera åœ¨CameraViewControllerä¸­å»ºç«‹outletå’ŒAction è¯†åˆ«ç…§ç‰‡çš„é¢éƒ¨ åœ¨ ViewController.swiftä¸­å¼•å…¥CoreImage:import CoreImage åœ¨ ViewController.swiftä¸­æ·»åŠ å‡½æ•°detect(): 12345678910111213141516171819202122232425262728293031func detect() &#123; // 1 guard let personciImage = CIImage(image: personPic.image!) else &#123; return &#125; // 2 let accuracy = [CIDetectorAccuracy: CIDetectorAccuracyHigh] let faceDetector = CIDetector(ofType: CIDetectorTypeFace, context: nil, options: accuracy) let faces = faceDetector?.features(in: personciImage) // 3 for face in faces as! [CIFaceFeature] &#123; print(&quot;Found bounds are \(face.bounds)&quot;) let faceBox = UIView(frame: face.bounds) faceBox.layer.borderWidth = 3 faceBox.layer.borderColor = UIColor.red.cgColor faceBox.backgroundColor = UIColor.clear personPic.addSubview(faceBox) // 4 if face.hasLeftEyePosition &#123; print(&quot;Left eye bounds are \(face.leftEyePosition)&quot;) &#125; if face.hasRightEyePosition &#123; print(&quot;Right eye bounds are \(face.rightEyePosition)&quot;) &#125; &#125;&#125; 1 æ ¹æ®UIImageèŽ·å–CoreImageä¸­å›¾ç‰‡å¯¹è±¡ã€‚guardä¸ŽifåŠŸèƒ½ç±»ä¼¼ï¼ŒåŒºåˆ«å¯æŸ¥çœ‹ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-5ï¼šControl Flowçš„6 guard ä¸Ž ifã€‚ 2 åˆå§‹åŒ–æ£€æµ‹å™¨CIDetectorï¼Œ accurayæ˜¯æ£€æŸ¥å™¨é…ç½®é€‰é¡¹ï¼Œè¡¨ç¤ºç²¾ç¡®åº¦ï¼›å› ä¸ºCIDetectorå¯ä»¥è¿›è¡Œå‡ ç§ç±»åž‹çš„æ£€æµ‹ï¼Œæ‰€ä»¥CIDetectorTypeFaceç”¨æ¥è¡¨ç¤ºé¢éƒ¨æ£€æµ‹ï¼›featuresæ–¹æ³•è¿”å›žå…·ä½“çš„æ£€æµ‹ç»“æžœ 3 ç»™æ¯ä¸ªæ£€æµ‹åˆ°çš„è„¸æ·»åŠ çº¢è‰²æ¡† 4 æ£€æµ‹æ˜¯å¦æœ‰å·¦çœ¼ä½ç½® åœ¨viewDidLoadä¸­æ·»åŠ  detect()ï¼Œè¿è¡Œç»“æžœç±»ä¼¼ï¼š æ‰“å°ç»“æžœï¼Œæ˜¾ç¤ºæ£€æµ‹åˆ°çš„é¢éƒ¨ä½ç½®æ˜¯ä¸å¯¹çš„ï¼šFound bounds are (177.0, 416.0, 380.0, 380.0)è¿™æ˜¯å› ä¸ºUIKitçš„åæ ‡ç³»ç»Ÿä¸ŽCore Imageçš„åæ ‡ç³»ç»Ÿæ˜¯ä¸åŒçš„ï¼š æŠŠCore Imageçš„åæ ‡ç³»ç»Ÿè½¬æ¢ä¸ºUIKitçš„åæ ‡ç³»ç»Ÿï¼Œä¿®æ”¹detect()ä¸ºï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748func detect() &#123; guard let personciImage = CIImage(image: personPic.image!) else &#123; return &#125; let accuracy = [CIDetectorAccuracy: CIDetectorAccuracyHigh] let faceDetector = CIDetector(ofType: CIDetectorTypeFace, context: nil, options: accuracy) let faces = faceDetector?.features(in: personciImage) // let ciImageSize = personciImage.extent.size var transform = CGAffineTransform(scaleX: 1, y: -1) transform = transform.translatedBy(x: 0, y: -ciImageSize.height) for face in faces as! [CIFaceFeature] &#123; print(&quot;Found bounds are \(face.bounds)&quot;) // Apply the transform to convert the coordinates var faceViewBounds = face.bounds.applying(transform) // Calculate the actual position and size of the rectangle in the image view let viewSize = personPic.bounds.size let scale = min(viewSize.width / ciImageSize.width, viewSize.height / ciImageSize.height) let offsetX = (viewSize.width - ciImageSize.width * scale) / 2 let offsetY = (viewSize.height - ciImageSize.height * scale) / 2 faceViewBounds = faceViewBounds.applying(CGAffineTransform(scaleX: scale, y: scale)) faceViewBounds.origin.x += offsetX faceViewBounds.origin.y += offsetY let faceBox = UIView(frame: faceViewBounds) faceBox.layer.borderWidth = 3 faceBox.layer.borderColor = UIColor.red.cgColor faceBox.backgroundColor = UIColor.clear personPic.addSubview(faceBox) if face.hasLeftEyePosition &#123; print(&quot;Left eye bounds are \(face.leftEyePosition)&quot;) &#125; if face.hasRightEyePosition &#123; print(&quot;Right eye bounds are \(face.rightEyePosition)&quot;) &#125; &#125;&#125; è¿è¡Œå¯çœ‹åˆ°æ­£ç¡®è¯†åˆ«ä½ç½®ï¼š ç›¸æœºæ‹ç…§åŽçš„è„¸éƒ¨è¯†åˆ«ä¹‹å‰æ˜¯é¡¹ç›®ä¸­ç…§ç‰‡è¯†åˆ«ï¼ŒçŽ°åœ¨æ˜¯æ‹å®Œç…§å†è¯†åˆ«ï¼ŒåŽŸç†æ˜¯ç›¸åŒçš„ï¼Œå°±æ˜¯å¤šä¸€ä¸ªæ‹å®Œç…§ï¼Œå–ç…§ç‰‡çš„è¿‡ç¨‹ã€‚ æ›´æ–°CameraViewControllerç±»çš„ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738// 1class CameraViewController: UIViewController, UIImagePickerControllerDelegate, UINavigationControllerDelegate &#123; @IBOutlet var imageView: UIImageView! // 2 let imagePicker = UIImagePickerController() override func viewDidLoad() &#123; super.viewDidLoad() imagePicker.delegate = self &#125; @IBAction func takePhoto(_ sender: AnyObject) &#123; // 3 if !UIImagePickerController.isSourceTypeAvailable(.camera) &#123; return &#125; imagePicker.allowsEditing = false imagePicker.sourceType = .camera present(imagePicker, animated: true, completion: nil) &#125; // 4 //MARK: -UIImagePickerControllerDelegate func imagePickerController(_ picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : Any]) &#123; if let pickedImage = info[UIImagePickerControllerOriginalImage] as? UIImage &#123; imageView.contentMode = .scaleAspectFit imageView.image = pickedImage &#125; dismiss(animated: true, completion: nil) self.detect() &#125; // 5 func imagePickerControllerDidCancel(_ picker: UIImagePickerController) &#123; dismiss(animated: true, completion: nil) &#125;&#125; 1 å®žçŽ°UIImagePickerControllerDelegateåè®®ï¼Œç”¨äºŽæ‹ç…§ç›¸å…³ä»£ç†ã€‚ 2 åˆå§‹åŒ–UIImagePickerControllerã€‚UIImagePickerControlleræ˜¯ç…§ç›¸æˆ–æ‘„å½±ç•Œé¢å’ŒåŠŸèƒ½ç®¡ç†çš„ç±»ã€‚ 3 åˆ¤æ–­è®¾å¤‡ç…§ç›¸æœºæ˜¯å¦å¯ç”¨ã€‚ 4 å®žçŽ°ä¸€ä¸ªUIImagePickerControllerDelegateä¸­çš„ä»£ç†æ–¹æ³•ï¼Œå½“æ‹æ‘„å®Œå¤‡ç¡®å®žä½¿ç”¨ç…§ç‰‡æ—¶è°ƒç”¨ã€‚ 5 ä¹Ÿæ˜¯UIImagePickerControllerDelegateä¸­çš„ä»£ç†æ–¹æ³•ï¼Œå–æ¶ˆæ‹æ‘„æ—¶è°ƒç”¨ã€‚ æ·»åŠ detect()ä»£ç ï¼Œä¸ŽViewControllerä¸­ä¸åŒçš„æ˜¯ï¼Œä¸ç”¨çº¢è‰²æ¡†æ¡†å¤„è¯†åˆ«å‡ºçš„é¢éƒ¨ï¼Œè€Œæ˜¯è¯†åˆ«å‡ºé¢éƒ¨çš„ç»†èŠ‚ï¼Œå¹¶ç”¨UIAlertControllerå¼¹å‡ºæ˜¾ç¤ºã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041func detect() &#123; let imageOptions = NSDictionary(object: NSNumber(value: 5) as NSNumber, forKey: CIDetectorImageOrientation as NSString) let personciImage = CIImage(cgImage: imageView.image!.cgImage!) let accuracy = [CIDetectorAccuracy: CIDetectorAccuracyHigh] let faceDetector = CIDetector(ofType: CIDetectorTypeFace, context: nil, options: accuracy) let faces = faceDetector?.features(in: personciImage, options: imageOptions as? [String : AnyObject]) if let face = faces?.first as? CIFaceFeature &#123; print(&quot;found bounds are \(face.bounds)&quot;) var message = &quot;æœ‰ä¸ªè„¸&quot; if face.hasSmile &#123; print(&quot;è„¸æ˜¯ç¬‘çš„&quot;) message += &quot;,è„¸æ˜¯ç¬‘çš„&quot; &#125; if face.hasMouthPosition &#123; print(&quot;æœ‰å˜´å”‡&quot;) message += &quot;,æœ‰å˜´å”‡&quot; &#125; if face.hasLeftEyePosition &#123; print(&quot;å·¦çœ¼é•œçš„ä½ç½®æ˜¯ \(face.leftEyePosition)&quot;) message += &quot;,å·¦çœ¼é•œçš„ä½ç½®æ˜¯ \(face.leftEyePosition)&quot; &#125; if face.hasRightEyePosition &#123; print(&quot;å³çœ¼é•œçš„ä½ç½®æ˜¯ \(face.rightEyePosition)&quot;) message += &quot;,å³çœ¼é•œçš„ä½ç½®æ˜¯ \(face.rightEyePosition)&quot; &#125; let alert = UIAlertController(title: &quot;å˜¿å˜¿&quot;, message: message, preferredStyle: .alert) alert.addAction(UIAlertAction(title: &quot;OK&quot;, style: .default, handler: nil)) self.present(alert, animated: true, completion: nil) &#125; else &#123; let alert = UIAlertController(title: &quot;æ²¡è„¸äº†&quot;, message: &quot;æ²¡æœ‰æ£€æµ‹åˆ°è„¸&quot;, preferredStyle: .alert) alert.addAction(UIAlertAction(title: &quot;OK&quot;, style: .default, handler: nil)) self.present(alert, animated: true, completion: nil) &#125; &#125; è¿è¡Œå°±å¯ä»¥è¯†åˆ«ç…§ç‰‡çš„é¢éƒ¨å…·ä½“ç»†èŠ‚CIFaceFeatureè¿˜æä¾›äº†å…¶ä»–å¾ˆå¤šé¢éƒ¨ç»†èŠ‚ï¼š1234567891011121314151617181920212223242526272829open var hasLeftEyePosition: Bool &#123; get &#125;open var leftEyePosition: CGPoint &#123; get &#125;open var hasRightEyePosition: Bool &#123; get &#125;open var rightEyePosition: CGPoint &#123; get &#125;open var hasMouthPosition: Bool &#123; get &#125;open var mouthPosition: CGPoint &#123; get &#125;open var hasTrackingID: Bool &#123; get &#125;open var trackingID: Int32 &#123; get &#125;open var hasTrackingFrameCount: Bool &#123; get &#125;open var trackingFrameCount: Int32 &#123; get &#125;open var hasFaceAngle: Bool &#123; get &#125;open var faceAngle: Float &#123; get &#125;open var hasSmile: Bool &#123; get &#125;open var leftEyeClosed: Bool &#123; get &#125;open var rightEyeClosed: Bool &#123; get &#125; ä»£ç Detector å‚è€ƒï¼šFace Detection in iOS Using Core Image]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 9 Table Rowçš„åˆ é™¤, UITableViewRowActionå’ŒUIActivityViewControllerçš„ä½¿ç”¨]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-9.html</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 8 Table Viewå’ŒUIAlertControllerçš„äº¤äº’æ˜¯Table Rowé€‰æ‹©çš„æ“ä½œï¼Œè¿™ä¸€ç¯‡ç»§ç»­ä¸Šä¸€ç¯‡çš„ä»£ç å®žçŽ°åˆ é™¤æ“ä½œã€‚ æ»‘åŠ¨åˆ é™¤ å®žçŽ°UITableViewDataSourceä¸­ç›¸åº”æ–¹æ³•ï¼š123override func tableView(_ tableView: UITableView, commit editingStyle: UITableViewCellEditingStyle, forRowAt indexPath: IndexPath) &#123; &#125; æ­¤æ—¶æ»‘åŠ¨æœ‰åˆ é™¤æŒ‰é’®ï¼š åˆ é™¤æ•°æ®123456789override func tableView(_ tableView: UITableView, commit editingStyle: UITableViewCellEditingStyle, forRowAt indexPath: IndexPath) &#123; if editingStyle == .delete &#123; restaurantNames.remove(at: indexPath.row) restaurantLocations.remove(at: indexPath.row) restaurantTypes.remove(at: indexPath.row) restaurantIsVisited.remove(at: indexPath.row) restaurantImages.remove(at: indexPath.row) &#125;&#125; UITableViewCellEditingStyleæœ‰ä¸¤ç§insertå’Œdeleteã€‚è¿è¡ŒåŽå‘çŽ°åˆ é™¤åŠ¨ä½œåŽï¼Œç›¸åº”çš„table view rowè¢«æ²¡æœ‰æ¶ˆå¤±ï¼Œå› ä¸ºä¸Šé¢çš„åˆ é™¤åªæ˜¯åˆ é™¤äº†ç›¸åº”æ•°ç»„ä¸­çš„æ•°æ®ï¼Œå¹¶æ²¡æœ‰åœ¨è§†å›¾ä¸Šæ˜¾ç¤ºï¼Œå¦‚è¦é‡æ–°åŠ è½½æ‰ä¼šåˆ é™¤ã€‚ é‡æ–°åŠ è½½UITableViewåœ¨tableView(_:commit:forRowAt:)åŽæ·»åŠ ï¼štableView.reloadData()å¦å¤–ï¼Œæ›´å¥½çš„åˆ·æ–°table viewçš„æ–¹æ³•æ˜¯ä½¿ç”¨UITableViewçš„deleteRows(at:with:)æ–¹æ³•ï¼Œè¿˜æœ‰åŠ¨ç”»æ•ˆæžœï¼štableView.deleteRows(at: [indexPath], with: .fade) ç”¨UITableViewRowActionä¸ºæ»‘åŠ¨äº§ç”Ÿæ›´å¤šåŠ¨ä½œ1234567891011121314151617181920212223override func tableView(_ tableView: UITableView, editActionsForRowAt indexPath: IndexPath) -&gt; [UITableViewRowAction]? &#123; // 1 let shareAction = UITableViewRowAction(style: .default, title: &quot;Share&quot;, handler: &#123; (action, indexPath) -&gt; Void in // 3 let defaultText = &quot;Just checking in at &quot; + self.restaurantNames[indexPath.row] let activityController = UIActivityViewController(activityItems: [defaultText], applicationActivities: nil) self.present(activityController, animated: true, completion: nil) &#125;) // 1 let deleteAction = UITableViewRowAction(style: .default, title: &quot;Delete&quot;, handler: &#123; (action, indexPath) -&gt; Void in self.restaurantNames.remove(at: indexPath.row) self.restaurantLocations.remove(at: indexPath.row) self.restaurantTypes.remove(at: indexPath.row) self.restaurantIsVisited.remove(at: indexPath.row) self.restaurantImages.remove(at: indexPath.row) &#125;) // 2 return [deleteAction, shareAction] &#125; 1 UITableViewRowActionçš„ç”¨æ³•å’ŒUIAlertActionç±»ä¼¼ã€‚styleç›¸åŒï¼Œå…·ä½“åŠŸèƒ½æ˜¯åœ¨å›žè°ƒé—­åŒ…ä¸­å®žçŽ°çš„ã€‚ UIActivityViewControllerç»§æ‰¿æ˜¯UIViewControllerï¼Œæä¾›ä¸€äº›æœåŠ¡ï¼Œä¾‹å¦‚æ‹·è´åˆ°å‰ªè´´æ¿ï¼Œåˆ†äº«å†…å®¹åˆ°ç¤¾äº¤åª’ä½“ï¼Œé€šè¿‡Messageså‘é€é¡¹ç›®ç­‰ã€‚ ä¸€æ—¦å®žçŽ°äº†tableView(_:editActionsForRowAt:)æ–¹æ³•ï¼ŒtableView(_:commit:forRowAt:)æ–¹æ³•äº§ç”ŸdeleteæŒ‰é’®å°†ä¸å†äº§ç”Ÿï¼Œæ‰€ä»¥è¦åœ¨tableView(_:commit:forRowAt:)ä¸­æ·»åŠ deleteæŒ‰é’®ã€‚ 2 è¿”å›žçš„UITableViewRowActionçš„æ•°ç»„ï¼Œactionçš„æ˜¾ç¤ºé¡ºåºæ˜¯ï¼ŒæŒ‰ç…§æ•°ç»„çš„é¡ºåºåœ¨å±å¹•ä»Žæœ‰åˆ°å·¦æ˜¾ç¤ºã€‚ 3 defaultTextæ˜¯åˆ†äº«çš„å†…å®¹ï¼Œä¸ä»…å¯ä»¥æ˜¯æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥æ·»åŠ å›¾ç‰‡å¯¹è±¡UIImageã€‚æ­¤å¤„ä»£ç ä¿®æ”¹ä¸€ä¸‹ï¼š12345let defaultText = &quot;Just checking in at &quot; + self.restaurantNames[indexPath.row]if let imageToShare = UIImage(named: self.restaurantImages[indexPath.row]) &#123; let activityController = UIActivityViewController(activityItems: [defaultText, imageToShare], applicationActivities: nil) self.present(activityController, animated: true, completion: nil)&#125; å®šåˆ¶UITableViewRowActionå¯ä»¥ä¿®æ”¹èƒŒæ™¯é¢œè‰²ï¼š1234shareAction.backgroundColor = UIColor(red: 48.0/255.0, green: 173.0/255.0, blue: 99.0/255.0, alpha: 1.0) deleteAction.backgroundColor = UIColor(red: 202.0/255.0, green: 202.0/255.0, blue: 203.0/255.0, alpha: 1.0) ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 8 Table Viewå’ŒUIAlertControllerçš„äº¤äº’]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-8.html</url>
    <content type="text"><![CDATA[ç»§ç»­ä¸Šä¸€éƒ¨åˆ†å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 7 å®šåˆ¶Table Viewsé¡¹ç›®FoodPinçš„ä»£ç ï¼Œæ·»åŠ ä¸¤ä¸ªåŠŸèƒ½ï¼š ç‚¹å‡»cellæ—¶ï¼Œäº§ç”Ÿå¼¹æ¡†ï¼Œå¼¹æ¡†ä¸­æœ‰ä¸¤ä¸ªåŠŸèƒ½é€‰é¡¹ Call å’Œ Check-in å½“ç‚¹å‡»Check-iné€‰é¡¹æ—¶ï¼Œä¸ºcellåŠ ä¸Šå¯¹å· ç†è§£UITableViewDelegateåè®®ä»£ç†æ¨¡å¼åœ¨iOSç¼–ç¨‹ä¸­éžå¸¸å¸¸è§çš„ã€‚æ¯ä¸ªä»£ç†è´Ÿè´£ç‰¹å®šçš„è§’è‰²æˆ–ä»»åŠ¡ï¼Œç»´æŒç³»ç»Ÿçš„ç®€å•å’Œå¹²å‡€ã€‚å½“ä¸€ä¸ªå¯¹è±¡éœ€è¦å®Œæˆç‰¹å®šä»»åŠ¡æ—¶ï¼Œå¯ä»¥ä¾é å¦ä¸€ä¸ªå¯¹è±¡å®Œæˆã€‚è¿™åœ¨è½¯ä»¶è®¾è®¡æ¨¡å¼ä¸­é€šå¸¸å«åšâ€œseparation of concernsâ€ã€‚UITableViewControllerå°±åº”ç”¨äº†ä»£ç†æ¨¡å¼ã€‚ä¸¤ä¸ªåè®®å®Œæˆä¸åŒçš„ä»»åŠ¡ã€‚UITableViewDataSourceåè®®è´Ÿè´£æä¾›å’Œç®¡ç†tableçš„æ•°æ®ã€‚UITableViewDelegateåè®®è´Ÿè´£è®¾ç½®tableçš„section headings å’Œ footersï¼Œä»¥åŠæ“ä½œcell selectionså’Œcell recordingã€‚ é˜…è¯»æ–‡æ¡£ æ€Žä¹ˆçŸ¥é“UITableViewDelegateä¸­æœ‰é‚£äº›æ–¹æ³•å‘¢ï¼Ÿ é˜…è¯»Appleçš„å®˜æ–¹iOSå¼€å‘æ–‡æ¡£(https://developer.apple.com/library/ios/))ã€‚ä½œä¸ºiOSå¼€å‘è€…ï¼Œéœ€è¦ç»å¸¸é˜…è¯»API æ–‡æ¡£ã€‚ç›®å‰æ²¡æœ‰å•ä¸ªçš„ä¹¦ç±å¯è¦†ç›–æ‰€æœ‰iOS SDKã€‚ Xcodeä¸­æä¾›æ–¹ä¾¿çš„æŸ¥çœ‹æ–‡æ¡£çš„æ–¹æ³•ï¼Œåœ¨ç›¸å…³ä»£ç å¤„option+ç‚¹å‡»ï¼Œå‡ºçŽ°å¼¹æ¡†å±•ç¤ºæ–‡æ¡£ç®€ä»‹ï¼Œå†åœ¨å¼¹æ¡†ä¸Šç‚¹å‡»ç›¸å…³ä»£ç å°±ç›´æŽ¥è¿›å…¥è¯¦ç»†æ–‡æ¡£å¤„ã€‚æ–‡æ¡£å¯¹ä¸åŒæ–¹æ³•è¿›è¡Œäº†åˆ†ç±»ï¼Œæ¯”å¦‚UITableViewDelegateçš„æ–‡æ¡£å°±æœ‰ä¸Šé¢æåˆ°çš„Managing Selectionsï¼š12func tableView(UITableView, willSelectRowAt: IndexPath)func tableView(UITableView, didSelectRowAt: IndexPath) å®žçŽ°åè®®ä¸­ç®¡ç†åˆ—é€‰é¡¹æ–¹æ³• åœ¨RestaurantTableViewControllerç±»ä¸­å®žçŽ°tableView(_:didSelectRowAt:)æ–¹æ³•ï¼š 123456789101112override func tableView(_ tableView: UITableView, didSelectRowAt indexPath:IndexPath) &#123; // 1 let optionMenu = UIAlertController(title: nil, message: &quot;What do you wantto do?&quot;, preferredStyle: .actionSheet) // 2 let cancelAction = UIAlertAction(title: &quot;Cancel&quot;, style: .cancel, handler:nil) optionMenu.addAction(cancelAction) // 3 present(optionMenu, animated: true, completion: nil)&#125; 1 åˆ›å»ºäº†UIAlertControllerã€‚UIAlertControlleræ˜¯ä»ŽiOS8è¢«å¼•å…¥ï¼Œç”¨æ¥æ›¿ä»£ä»¥å‰çš„UIAlertViewå’ŒUIActionSheetï¼Œå‘ç”¨æˆ·å¼¹å‡ºè­¦ç¤ºä¿¡æ¯ï¼›preferredStyleå‚æ•°æœ‰ä¸¤ä¸ªå€¼ï¼š.actionSheet å’Œ .alertï¼Œè¡¨ç¤ºæ›¿ä»£çš„ä¸¤ç§æ ·å¼ã€‚ 2 åˆ›å»ºä¸€ä¸ªcancelæ ·å¼çš„UIAlertActionã€‚UIAlertControllerçš„è­¦ç¤ºå¼¹å‡ºæ¡†ä¸€èˆ¬æ˜¯ç”±æœ€ä¸Šé¢çš„title+messageï¼ˆéƒ½ä¸æ˜¯éžå¿…é¡»çš„ï¼‰å’Œä¸€äº›Actionç»„æˆï¼Œcancel actionåœ¨æœ€ä¸‹é¢ã€‚ 3 presentæ˜¯UIViewControllerä¸­çš„æ–¹æ³•ï¼Œç”¨äºŽå±•ç¤ºã€‚ æ·»åŠ Actionsåˆ°ALert Controllerä¸­ Call action1234567891011let callActionHandler = &#123; (action:UIAlertAction!) -&gt; Void in let alertMessage = UIAlertController(title: &quot;Service Unavailable&quot;, message:&quot;Sorry, the call feature is not available yet. Please retry later.&quot;,preferredStyle: .alert) alertMessage.addAction(UIAlertAction(title: &quot;OK&quot;, style: .default, handler:nil)) self.present(alertMessage, animated: true, completion: nil)&#125;let callAction = UIAlertAction(title: &quot;Call &quot; + &quot;123-000-\(indexPath.row)&quot;,style: .default, handler: callActionHandler)optionMenu.addAction(callAction) callActionHandleræ˜¯swifté—­åŒ…ç»“æž„çš„ä¸€ç§å†™æ³•ï¼Œå…³äºŽé—­åŒ…å¯æŸ¥çœ‹ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-7ï¼šClosureã€‚è¿™ä¸ªä»£ç å—åœ¨Call actionè¢«ç‚¹å‡»æ˜¯æ‰§è¡Œã€‚ Check-in action12345678// Check-in actionlet checkInAction = UIAlertAction(title: &quot;Check in&quot;, style: .default, handler:&#123; (action:UIAlertAction!) -&gt; Void in let cell = tableView.cellForRow(at: indexPath) cell?.accessoryType = .checkmark&#125;)optionMenu.addAction(checkInAction) å½“ç”¨æˆ·ç‚¹å‡»â€œCheck inâ€actionæ—¶ï¼Œä¸ºé€‰ä¸­çš„cellå¢žåŠ ä¸€ä¸ªå¯¹å·ï¼Œè¡¨æ˜Žæ˜¯ç”¨æˆ·å–œæ¬¢çš„ã€‚accessoryTypeåŒ…æ‹¬disclosureIndicator, detailDisclosureButton, checkmark å’Œ detailButtonã€‚å½“cellè¢«é€‰ä¸­åŽï¼Œè¿™ä¸ªcellä¼šä¸€ç›´ç°è‰²é«˜äº®ã€‚åŽ»æŽ‰ï¼štableView.deselectRow(at: indexPath, animated: false) è§£å†³BugçŽ°åœ¨åº”ç”¨è¿è¡ŒåŽï¼Œcheck-inæŸä¸€cellæ—¶ï¼Œå¯èƒ½ä¼šå‡ºçŽ°å…¶ä»–cellåŒæ—¶ä¹Ÿè¢«check-inã€‚è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºcellé‡å¤ä½¿ç”¨å¯¼è‡´çš„ã€‚å½“ä¸€ä¸ªå±å¹•æ»šåŠ¨æ—¶ï¼Œæ–°è¿›çš„cellå°±ä¼šåˆ©ç”¨æ»šå‡ºçš„å¾—cellï¼Œä»¥æé«˜æ•ˆçŽ‡ã€‚è§£å†³æ–¹æ³•ï¼šä¸ºæ¯ä¸ªcellåˆ›é€ ä¸€ä¸ªæ˜¯å¦è¢«check-inçš„æ ‡å¿—ã€‚ åœ¨RestaurantTableViewControllerä¸­åˆ›å»ºä¸€ä¸ªBooleanç±»åž‹çš„æ•°ç»„ï¼švar restaurantIsVisited = Array(repeating: false, count: 21) check-inåŽå°±æŠŠå¯¹åº”çš„æ ‡å¿—ä¿®æ”¹ä¸ºtrueï¼š 1234567let checkInAction = UIAlertAction(title: &quot;Check in&quot;, style: .default, handler:&#123; (action:UIAlertAction!) -&gt; Void in let cell = tableView.cellForRow(at: indexPath) cell?.accessoryType = .checkmark self.restaurantIsVisited[indexPath.row] = true&#125; åœ¨æ¯ä¸€æ¬¡ç”Ÿæˆcellæ˜¯ä¹Ÿè¦æ£€æŸ¥æ˜¯å¦check-inï¼Œåœ¨tableView(_:cellForRowAt:)æ”¾çš„return cellä¹‹å‰åŠ å…¥ï¼šcell.accessoryType = restaurantIsVisited[indexPath.row] ? .checkmark : .none ç»ƒä¹ å½“é€‰ä¸­ä¹Ÿè¢«check-inçš„cellæ—¶ï¼Œcheck-in Actionçš„æ–‡æœ¬å˜æˆUndo Check inï¼Œç‚¹å‡»åŽå–æ¶ˆå…¶å¯¹å·ã€‚ä¿®ä¸€ä¸‹check-inä»£ç ï¼š123456789101112131415161718let cell = tableView.cellForRow(at: indexPath)if cell?.accessoryType == .checkmark &#123; let checkInAction = UIAlertAction(title: &quot;Undo Check in&quot;, style: .default, handler: &#123; (action:UIAlertAction!) -&gt; Void in cell?.accessoryType = .none self.restaurantIsVisited[indexPath.row] = false &#125;) optionMenu.addAction(checkInAction)&#125; else &#123; let checkInAction = UIAlertAction(title: &quot;Check in&quot;, style: .default, handler: &#123; (action:UIAlertAction!) -&gt; Void in cell?.accessoryType = .checkmark self.restaurantIsVisited[indexPath.row] = true &#125;) optionMenu.addAction(checkInAction)&#125; ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 7 å®šåˆ¶Table Views]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-7.html</url>
    <content type="text"><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 6 åˆ›å»ºç®€å•çš„Table Based Appæ˜¯basicé£Žæ ¼çš„Tableï¼Œè¿™ä¸€éƒ¨åˆ†å°†ï¼š ä½¿ç”¨UITableViewController ä»£æ›¿ UITableView å±•ç¤ºtable view cellä¸­ä¸åŒçš„å›¾ç‰‡æ˜¾ç¤ºæ–¹å¼ è®¾è®¡å®šåˆ¶çš„table view cellæ¥æ›¿ä»£basicçš„table view cell ä½¿ç”¨UITableViewControlleræ–°å»ºä¸€ä¸ªTable View App æ–°å»ºé¡¹ç›®FoodPinï¼Œæ¨¡æ¿ä¸ºâ€Single View applicationâ€ åˆ é™¤Main.storyboardä¸­çš„ view controllerï¼Œåˆ é™¤ViewController.swift æ‹–åŠ¨ä¸€ä¸ªTable View Controlleråˆ°IBä¸­ï¼Œé€‰ä¸­å…¶Is Initial View Controller æ–°å»ºç±»RestaurantTableViewControllerï¼Œç»§æ‰¿è‡³UITableViewControllerã€‚å°†Table View Controllerçš„Classå±žæ€§è®¾ç½®ä¸ºRestaurantTableViewControllerã€‚ åœ¨simpletable-image1.zipå’Œsimpletable-image2.zipå¤„ä¸‹è½½å›¾ç‰‡ï¼Œæ‹–åˆ°asset catalog åœ¨ç±»RestaurantTableViewControllerä¸­æ·»åŠ ä»¥å˜é‡ 1var restaurantNames = [&quot;Cafe Deadend&quot;, &quot;Homei&quot;, &quot;Teakha&quot;, &quot;Cafe Loisl&quot;, &quot;PetiteOyster&quot;, &quot;For Kee Restaurant&quot;, &quot;Po&apos;s Atelier&quot;, &quot;Bourke Street Bakery&quot;, &quot;Haigh&apos;sChocolate&quot;, &quot;Palomino Espresso&quot;, &quot;Upstate&quot;, &quot;Traif&quot;, &quot;Graham Avenue Meats&quot;,&quot;Waffle &amp; Wolf&quot;, &quot;Five Leaves&quot;, &quot;Cafe Lore&quot;, &quot;Confessional&quot;, &quot;Barrafina&quot;,&quot;Donostia&quot;, &quot;Royal Oak&quot;, &quot;CASK Pub and Kitchen&quot;] åœ¨ç±»RestaurantTableViewControllerä¸­æ·»åŠ ä»£ç ï¼š 123456789override func tableView(_ tableView: UITableView, cellForRowAt indexPath:IndexPath) -&gt; UITableViewCell &#123; let cellIdentifier = &quot;Cell&quot; let cell = tableView.dequeueReusableCell(withIdentifier: cellIdentifier,for: indexPath) // Configure the cell... cell.textLabel?.text = restaurantNames[indexPath.row] cell.imageView?.image = UIImage(named: &quot;restaurant.jpg&quot;)return cell &#125; æ’å…¥ä»£ç  123456789101112131415161718 override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cellIdentifier = &quot;Cell&quot; let cell = tableView.dequeueReusableCell(withIdentifier: cellIdentifier, for: indexPath) // Configure the cell... cell.textLabel?.text = restaurantNames[indexPath.row] cell.imageView?.image = UIImage(named: &quot;restaurant.jpg&quot;) return cell &#125; override func numberOfSections(in tableView: UITableView) -&gt; Int &#123; return 1 &#125; override func tableView(_ tableView: UITableView, numberOfRowsInSectionsection: Int) -&gt; Int &#123; return restaurantNames.count &#125; åœ¨ç±»RestaurantTableViewControllerä¸­åŠ å…¥å›¾ç‰‡åç§°å˜é‡ï¼š 123456var restaurantImages = [&quot;cafedeadend.jpg&quot;, &quot;homei.jpg&quot;, &quot;teakha.jpg&quot;,&quot;cafeloisl.jpg&quot;, &quot;petiteoyster.jpg&quot;, &quot;forkeerestaurant.jpg&quot;, &quot;posatelier.jpg&quot;,&quot;bourkestreetbakery.jpg&quot;, &quot;haighschocolate.jpg&quot;, &quot;palominoespresso.jpg&quot;,&quot;upstate.jpg&quot;, &quot;traif.jpg&quot;, &quot;grahamavenuemeats.jpg&quot;, &quot;wafflewolf.jpg&quot;,&quot;fiveleaves.jpg&quot;, &quot;cafelore.jpg&quot;, &quot;confessional.jpg&quot;, &quot;barrafina.jpg&quot;,&quot;donostia.jpg&quot;, &quot;royaloak.jpg&quot;, &quot;caskpubkitchen.jpg&quot;] å¹¶ä¿®æ”¹å¯¹åº”ä»£ç ï¼šcell.imageView?.image = UIImage(named: restaurantImages[indexPath.row]) å®šåˆ¶Table View Cells ä¿®æ”¹Table View Cellçš„Sytleå˜ä¸ºCustomï¼ŒIdentifierä¸ºCell ä¿®æ”¹Table View çš„Row Heightä¸º80 ç¡®è®¤Table View Cell çš„Customè¢«é€‰æ‹©å’ŒRow Heightä¸º80 æ‹–åŠ¨image viewåˆ°Cellä¸­ æ‹–åŠ¨ä¸‰ä¸ªlabelåˆ°Cellä¸­ï¼Œæ–‡æœ¬åˆ†åˆ«æ˜¯Nameï¼ŒLocationï¼ŒTypeã€‚Name çš„fontä¸ºHeadlineï¼›Locationçš„font styleä¸ºLightï¼Œfont sizeä¸º14ï¼Œfont colorä¸ºDark Grayï¼›Type**font styleä¸ºLightï¼Œfont size**ä¸º13ã€‚ æŠŠä¸‰ä¸ªlabelè®¾ç½®æˆä¸€ä¸ªvertical stack viewï¼Œå…¶spacingä¸º1 æŠŠvertical stack viewå’ŒImage Viewè®¾ç½®æˆä¸€ä¸ªhorizontal stack viewï¼Œå…¶spacingä¸º10 ä¸ºvertical stack viewè®¾ç½®ä¸Šä¸‹å·¦å³è¾¹è·çº¦æŸï¼›ä¸ºå›¾ç‰‡è®¾ç½®å®½å’Œé«˜çš„çº¦æŸ å¤„ç†çº¦æŸé—®é¢˜ ä¸ºCustom Cellåˆ›å»ºç±» åˆ›å»ºç»§æ‰¿è‡³UITableViewCellçš„ç±»RestaurantTableViewCell åœ¨RestaurantTableViewCellä¸­å»ºç«‹å››ä¸ªoutletï¼Œåˆ†åˆ«å¯¹åº”å›¾ç‰‡å’Œä¸‰ä¸ªlabel 1234@IBOutlet var nameLabel: UILabel!@IBOutlet var locationLabel: UILabel!@IBOutlet var typeLabel: UILabel!@IBOutlet var thumbnailImageView: UIImageView! å»ºç«‹ä»£ç ä¸­æŽ¥å£ä¸Žstoryboardä¹‹é—´çš„è”ç³» ä¿®æ”¹Table View Controllerä»£ç  ç”±äºŽå·²ç»ä¸ºCustom Cellåˆ›å»ºäº†ç±»RestaurantTableViewCellï¼Œæ‰€ä»¥Table View Controllerä¸­ç”ŸæˆCellçš„å¾…ä¿®æ”¹ä¸ºï¼š 12let cell = tableView.dequeueReusableCell(withIdentifier: cellIdentifier, for: indexPath) as! RestaurantTableViewCell ç”±äºŽCellçš„é£Žæ ¼ä¸æ˜¯sytleäº†ï¼Œè€Œæ˜¯å®šåˆ¶çš„ï¼Œæ‰€ä»¥æ–‡æœ¬å’Œå›¾ç‰‡ä»£ç è¦åšå‡ºä¿®æ”¹ï¼š 12cell.nameLabel.text = restaurantNames[indexPath.row]cell.thumbnailImageView.image = UIImage(named: restaurantImages[indexPath.row]) å›¾ç‰‡åœ†è§’ å¯é€šè¿‡UIViewçš„layerå±žæ€§ï¼ˆCALayerï¼‰ä¿®æ”¹å›¾ç‰‡åœ†è„šï¼ŒcornerRadiusè¡¨ç¤ºåœ†è§’çš„åŠå¾„ï¼Œç”±äºŽå›¾ç‰‡çš„å°ºå¯¸æ˜¯60*60ï¼Œæ‰€ä»¥åœ†è§’çš„åŠå¾„è®¾ç½®ä¸º30åŽï¼Œå›¾ç‰‡çœ‹ä¸ŠåŽ»æ˜¯ä¸ªåœ†ã€‚12cell.thumbnailImageView.layer.cornerRadius = 30.0cell.thumbnailImageView.clipsToBounds = true ç»ƒä¹  æ·»åŠ â€œTypeâ€å’Œâ€œLocationâ€ã€‚æ·»åŠ å¦‚ä¸‹ä¸¤ä¸ªæ•°ç»„å˜é‡ï¼š1234var restaurantLocations = [&quot;Hong Kong&quot;, &quot;Hong Kong&quot;, &quot;Hong Kong&quot;, &quot;Hong Kong&quot;, &quot;Hong Kong&quot;, &quot;Hong Kong&quot;, &quot;Hong Kong&quot;, &quot;Sydney&quot;, &quot;Sydney&quot;, &quot;Sydney&quot;, &quot;NewYork&quot;, &quot;New York&quot;, &quot;New York&quot;, &quot;New York&quot;, &quot;New York&quot;, &quot;New York&quot;, &quot;New York&quot;, &quot;London&quot;, &quot;London&quot;, &quot;London&quot;, &quot;London&quot;] var restaurantTypes = [&quot;Coffee &amp; Tea Shop&quot;, &quot;Cafe&quot;, &quot;Tea House&quot;, &quot;Austrian Causual Drink&quot;, &quot;French&quot;, &quot;Bakery&quot;, &quot;Bakery&quot;, &quot;Chocolate&quot;, &quot;Cafe&quot;, &quot;American Seafood&quot;, &quot;American&quot;, &quot;American&quot;, &quot;Breakfast &amp; Brunch&quot;, &quot;Coffee &amp; Tea&quot;, &quot;Coffee &amp; Tea&quot;, &quot;Latin American&quot;, &quot;Spanish&quot;, &quot;Spanish&quot;, &quot;Spanish&quot;, &quot;British&quot;, &quot;Thai&quot;] ç„¶åŽå†åœ¨Cellæ—¶èµ‹å€¼å³å¯ï¼š12cell.locationLabel.text = restaurantLocations[indexPath.row] cell.typeLabel.text = restaurantTypes[indexPath.row] é‡æ–°è®¾è®¡ç•Œé¢ï¼š ä¿®æ”¹Table Viewå’ŒTable View Cellçš„Row Heightéƒ½ä¸º300ã€‚ é‡æ–°è®¾è®¡å›¾ç‰‡ä¸Žlabelçš„ä¹‹é—´çš„å±‚æ¬¡ç»“æž„ï¼Œå¹¶ä¿®æ”¹å›¾ç‰‡çš„å¤§å°å’Œå…¶ä»–ä¸€äº›çº¦æŸã€‚ åˆ é™¤å›¾ç‰‡åœ†è§’ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Xcodeä¸­Sceneé‡Œçš„åç§°]]></title>
    <url>%2F2017%2Fxcode-scene-name.html</url>
    <content type="text"><![CDATA[é»˜è®¤çš„Sceneåç§° Xcodeä¸­æ–°å»ºä¸€ä¸ªæŽ§åˆ¶å™¨å¯¹è±¡åŽä¼šäº§ç”Ÿä¸€ä¸ªSceneï¼Œè€ŒSceneçš„åç§°å°±ä¸Žå…¶å…³è”çš„æŽ§åˆ¶å™¨åç§°ç›¸å…³ï¼Œæ¯”å¦‚é»˜è®¤çš„View Controllerçš„å¯¹è±¡çš„Sceneçš„åç§°å°±æ˜¯View Controller Sceneã€‚ å¦‚æžœæŠŠæŽ§åˆ¶å™¨æ”¹æˆSFSafariViewControllerï¼Œé‚£ä¹ˆSceneçš„åå­—å°±ä¼šå˜æˆSafari View Sceneã€‚ å¦‚æžœæŠŠæŽ§åˆ¶å™¨æ”¹æˆè‡ªå»ºçš„ï¼ŒSceneåå­—ä¹Ÿä¼šéšç€å˜åŒ–ï¼Œæ¯”å¦‚ASAndyViewControllerå¯¹åº”çš„Sceneåå­—æ˜¯ Andy View Scene æ€»çš„æ¥è¯´ï¼Œappleåœ¨ç¨‹åºä¸­ä»£ç å‘½åè§„èŒƒï¼Œä¸€èˆ¬æ˜¯å‰é¢è¿žç»­å¤§å†™çš„æ˜¯æ¡†æž¶åç§°ï¼Œç„¶åŽåŽé¢ä½¿ç”¨é©¼å³°å‘½åæ³•ã€‚è¦æ˜¾ç¤ºæ—¶å°±æŠŠæ¡†æž¶å‰ç¼€åŽ»æŽ‰ï¼Œç„¶åŽæ ¹æ®é©¼å³°å‘½åè§„åˆ™åˆ†éš”æ˜¾ç¤ºã€‚ è‡ªå®šä¹‰Sceneçš„åç§°Sceneçš„åç§°ä¹Ÿæ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ï¼Œåœ¨å…¶å±žæ€§æ£€æŸ¥å™¨ä¸­ï¼Œä¿®æ”¹titleå³å¯ï¼Œå½“ç„¶è¿™ç§ä¿®æ”¹åªæ˜¯åœç•™åœ¨IBä¸­ï¼Œä¸ºäº†å¼€å‘æ—¶ä¾¿äºŽæŸ¥çœ‹ï¼Œä¸å½±å“ä»£ç ä¸­çš„åç§°ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 1ï¼š è¯†åˆ«äºŒç»´ç ï¼ˆswift3ï¼‰]]></title>
    <url>%2F2017%2Fios-tutorial-1-arcode.html</url>
    <content type="text"><![CDATA[è¿™æ˜¯ä¸€ç¯‡ä½¿ç”¨AVFoundationæ¡†æž¶è¯†åˆ«äºŒç»´ç çš„æ–‡ç« ï¼ŒåŽŸæ–‡æä¾›äº†åˆå§‹åŒ–é¡¹ç›®QRCodeReaderStarterï¼Œæˆ‘é‡æ–°å»ºç«‹é¡¹ç›®ï¼Œå›¾ç‰‡æ˜¯ä»ŽåŽŸæ–‡æä¾›çš„åˆå§‹åŒ–é¡¹ç›®ä¸­copyçš„ã€‚ åˆå§‹åŒ–é¡¹ç›® æ–°å»ºä¸€ä¸ªåä¸ºQRCodeReaderçš„å•é¡µé¡¹ç›® åˆ é™¤ViewController.swiftæ–‡ä»¶ï¼Œåœ¨é¡¹ç›®ç›®å½•å¤„å³å‡»æ–°å»ºæ–‡ä»¶ï¼Œæ–°å»ºä¸€ä¸ªQRCodeViewControllerç±»ç»§æ‰¿è‡ªUIViewControllerã€‚ ç‚¹å‡»Main.storyboardï¼Œé€‰ä¸­View Controllerï¼Œä¿®æ”¹å…¶å±žæ€§Classä¸ºQRCodeViewControllerï¼Œä½¿ä¸¤è€…å…³è”ã€‚ å‘Main.storyboardä¸­æ‹–åŠ¨ä¸€ä¸ªView Controllerå¯¹è±¡ï¼Œä»¥1çš„æ–¹æ³•æ–°å»ºä¸€ä¸ªç»§æ‰¿è‡ªUIViewControllerçš„ç±»QRScannerControllerï¼Œç„¶åŽä¸ŽMain.storyboardä¸­æ–°å»ºçš„View Controllerå…³è”ã€‚ ä¸‹è½½å›¾ç‰‡ã€‚ä»ŽåŽŸæ–‡çš„åˆå§‹åŒ–é¡¹ç›®QRCodeReaderStarterå¤åˆ¶ã€‚ ä¿®æ”¹Code View Controller Sceneçš„viewèƒŒæ™¯é¢œè‰²åšä¿®æ”¹ï¼›æ·»åŠ ä¸€ä¸ªlabelï¼Œåç§°æ”¹ä¸ºQuick Scanï¼Œå­—ä½“ï¼Œå’Œå­—ä½“å¤§å°ä¹Ÿåšä¿®æ”¹ï¼›æ·»åŠ buttonï¼Œåˆ é™¤æ–‡æœ¬ï¼Œå¤§å°ä¸º150150ï¼ŒTypeä¸ºSystemï¼Œimageä¸ºfocus*ï¼ŒTintä¸ºé»„è‰²ï¼›æ·»åŠ ä¸€äº›çº¦æŸã€‚ Scanner Controller Sceneï¼š åœ¨é¡¶éƒ¨æ·»åŠ ä¸€ä¸ªViewï¼Œåœ¨è¿™ä¸ªViewä¸­æ·»åŠ ä»¥labelå’Œbuttonï¼Œbuttonçš„imageä¸ºcrossï¼›åœ¨é¡¶éƒ¨æ·»åŠ ä¸€ä¸ªlabelï¼›æ·»åŠ ä¸€äº›çº¦æŸã€‚ æž„å»º segue ç”¨control-dragä»ŽCode View Controller Sceneä¸­çš„buttonåˆ°Scanner Controller Sceneï¼Œé€‰æ‹©Present Modally åœ¨QRCodeViewControllerä¸­æ·»åŠ ä»£ç ï¼š 1234@IBAction func unwindToHomeScreen(segue: UIStoryboardSegue) &#123; //åŽ»é™¤æ¨¡æ€è§†å›¾ dismiss(animated: true, completion: nil) &#125; åœ¨Scanner Controller Scene ä¸­ï¼Œç”¨control-dragä»Žbuttonåˆ°Exitï¼Œé€‰æ‹©unwindToHomeScreenWithSegue: 6å’Œ7ä¸­æ ·å¼å’Œçº¦æŸï¼Œåˆé€‚å³å¯ã€‚ åŠ è½½ AVFoundation æ¡†æž¶ åœ¨QRScannerController.swiftæ–‡ä»¶ä¸­å¼•å…¥AVFoundation Frameworkï¼šimport AVFoundation QRScannerControllerå®žçŽ°AVCaptureMetadataOutputObjectsDelegateåè®®ï¼šclass QRScannerController: UIViewController, AVCaptureMetadataOutputObjectsDelegate {è¡¨ç¤ºå½“æ•èŽ·çš„å…ƒæ•°æ®äº§ç”Ÿæ—¶ï¼Œéœ€è¦ä¸€äº›å›žè°ƒæ–¹æ³•ã€‚ QRScannerControllerä¸­æ·»åŠ ä¸‰ä¸ªå˜é‡ï¼š123var captureSession: AVCaptureSession?var videoPreviewLayer: AVCaptureVideoPreviewLayer?var qrCodeFrameView: UIView? å®žçŽ°è§†é¢‘æ•èŽ· åœ¨QRScannerControllerçš„viewDidLoadä¸­æ·»åŠ ä»£ç ï¼š 123456789101112131415161718192021222324252627// 1let captureDevice = AVCaptureDevice.defaultDevice(withMediaType: AVMediaTypeVideo)do &#123; // 2 let input = try AVCaptureDeviceInput(device: captureDevice) // 3 captureSession = AVCaptureSession() // 4 captureSession?.addInput(input) // 5 let captureMetadataOutput = AVCaptureMetadataOutput() captureSession?.addOutput(captureMetadataOutput) // 6 captureMetadataOutput.setMetadataObjectsDelegate(self, queue: DispatchQueue.main) captureMetadataOutput.metadataObjectTypes = [AVMetadataObjectTypeQRCode] videoPreviewLayer = AVCaptureVideoPreviewLayer(session: captureSession) videoPreviewLayer?.videoGravity = AVLayerVideoGravityResizeAspectFill videoPreviewLayer?.frame = view.layer.bounds view.layer.addSublayer(videoPreviewLayer!) captureSession?.startRunning()&#125; catch &#123; print(error) return&#125; 1 åˆå§‹åŒ–AVCaptureDeviceï¼Œå®ƒè¡¨ç¤ºç‰©ç†æ•èŽ·è®¾å¤‡ï¼›AVMediaTypeVideoæ˜¯Media typesï¼Œè¡¨ç¤ºè§†é¢‘ç±»åž‹ï¼Œè¿˜æœ‰AVMediaTypeAudioï¼ŒAVMediaTypeTextç­‰å…¶ä»–ç±»åž‹ 2 æ ¹æ®AVCaptureDeviceåˆå§‹åŒ–æ•èŽ·è®¾å¤‡çš„è¾“å…¥æ•°æ®å¯¹è±¡AVCaptureDeviceInputã€‚è¿™è¾¹çš„tryæ˜¯swiftä¸­é”™è¯¯å¤„ç†çš„æ ‡è¯†ï¼Œå¯¹åº”public init(device: AVCaptureDevice!) throwsã€‚ 3 AVCaptureSession ç”¨äºŽåè°ƒè¾“å…¥ä¸Žè¾“å‡ºä¹‹é—´çš„æ•°æ®æµã€‚ 4 ä¸ºAVCaptureSession æ·»åŠ è¾“å…¥æ•°æ® 5 å®šä¹‰è¾“å‡ºæ•°æ®å¯¹è±¡AVCaptureMetaDataOutputï¼Œå¹¶æŠŠå®ƒæ·»åŠ ç»™AVCaptureSession 6 è®¾ç½®selfä¸ºè¾“å‡ºæ•°æ®å¯¹è±¡çš„ä»£ç†ï¼Œè¿™å°±å¯¹åº”äº†QRScannerControllerç±»å®žçŽ°AVCaptureMetadataOutputObjectsDelegateåè®®ã€‚metadataObjectTypesæ˜¯è¯†åˆ«çš„å…ƒæ•°æ®ç±»åž‹ï¼ŒAVMetadataObjectTypeQRCodeè¡¨ç¤ºäºŒç»´ç ç±»åž‹ã€‚ åœ¨Info.plistä¸­æ·»åŠ keyä¸ºNSCameraUsageDescriptionæˆ–â€Privacy â€“ Camera Usage Descriptionâ€ï¼Œå€¼ä¸º ä¸ºäº†æ‰«æäºŒç»´ç ï¼Œéœ€è¦ä½¿ç”¨ä½ çš„ç›¸æœºã€‚ è¿è¡Œåº”ç”¨æ—¶ï¼Œç‚¹å‡»scan buttonåŽï¼Œä½¿ç”¨äº†ç›¸æœºï¼Œä½†messageLabelå’Œtapbaræ²¡æœ‰äº†ï¼Œå› ä¸ºè¢«AVCaptureVideoPreviewLayerè¦†ç›–äº†ï¼ŒåŠ å…¥ä¸¤è¡Œä»£ç å°±å¯ä»¥æ˜¾ç¤ºäº†ï¼š12view.bringSubview(toFront: messageLabel)view.bringSubview(toFront: topbar) å®žçŽ°äºŒç»´ç è¯»å–å½“æ£€æµ‹åˆ°äºŒç»´ç æ—¶ï¼Œç”¨ç»¿è‰²æ¡†é«˜äº®ï¼›ç„¶åŽäºŒç»´ç è¢«è§£ç æˆæ–‡æœ¬ä¿¡æ¯å±•ç¤ºåœ¨messagelabelä¸­ã€‚ åˆå§‹åŒ–ç»¿è‰²æ¡†ã€‚ç»§ç»­åœ¨ä¸Šè¿°ä»£ç åŽæ·»åŠ :12345678qrCodeFrameView = UIView() if let qrCodeFrameView = qrCodeFrameView &#123; qrCodeFrameView.layer.borderColor = UIColor.green.cgColor qrCodeFrameView.layer.borderWidth = 2 view.addSubview(qrCodeFrameView) view.bringSubview(toFront: qrCodeFrameView)&#125; ç”±äºŽqrCodeFrameViewæ²¡æœ‰è®¾ç½®å¤§å°ï¼Œé»˜è®¤æ˜¯0ï¼Œæ‰€ä»¥ä¸ä¼šæ˜¾ç¤ºï¼Œå½“ä¹‹åŽå‘çŽ°äºŒç»´ç æ—¶å†è®©å®ƒæ˜¾ç¤ºã€‚ è§£ç äºŒç»´ç å½“AVCaptureMetadataOutputè¯†åˆ«å‡ºäºŒç»´ç æ—¶ï¼ŒAVCaptureMetadataOutputObjectsDelegateä¸­çš„ä»£ç†æ–¹æ³•å°†è¢«è°ƒç”¨ï¼šoptional public func captureOutput(_ captureOutput: AVCaptureOutput!, didOutputMetadataObjects metadataObjects: [Any]!, from connection: AVCaptureConnection!) å›žè°ƒæ–¹æ³•å®šä¹‰ï¼š func captureOutput(_ captureOutput: AVCaptureOutput!, didOutputMetadataObjects metadataObjects: [Any]!, from connection: AVCaptureConnection!) { if metadataObjects == nil || metadataObjects.count == 0 { qrCodeFrameView?.frame = CGRect.zero messageLabel.text = &quot;æ²¡æœ‰äºŒç»´ç /æ¡å½¢ç &quot; return } let metadataObj = metadataObjects[0] as! AVMetadataMachineReadableCodeObject if metadataObj.type == AVMetadataObjectTypeQRCode { // 1 let barCodeObject = videoPreviewLayer?.transformedMetadataObject(for: metadataObj) qrCodeFrameView?.frame = barCodeObject!.bounds if metadataObj.stringValue != nil { // 2 messageLabel.text = metadataObj.stringValue } } } ç¬¬äºŒä¸ªå‚æ•°metadataObjectsæ˜¯ä¸ªæ•°ç»„ï¼Œå°±æ˜¯æ‰€æœ‰è¢«è¯†åˆ«å‡ºæ¥çš„å…ƒæ•°æ®å¯¹è±¡ã€‚å¦‚æžœè¿™ä¸ªå‚æ•°ä¸ºnilæˆ–æ•°ç»„ä¸ºç©ºæ•°ç»„ï¼Œå°±è¡¨ç¤ºæ²¡æœ‰è¯†åˆ«å‡ºå¯¹è±¡ã€‚ 1 é€šè¿‡transformedMetadataObjectæ–¹æ³•èŽ·å¾—AVMetadataObjectå¯¹è±¡ï¼Œæ›´åŠ è¿™ä¸ªå¯¹è±¡å¯ä»¥èŽ·å¾—äºŒç»´ç çš„ä½ç½®ï¼Œç„¶åŽæ˜¾ç¤ºç»¿æ¡†ã€‚ 2 æŠŠäºŒç»´ç ä¿¡æ¯æ˜¾ç¤ºåœ¨messagelabelä¸Šã€‚ è¯†åˆ«æ¡å½¢ç é™¤äº†è¯†åˆ«äºŒç»´ç ä»¥å¤–ï¼Œè¿˜å¯ä»¥è¯†åˆ«æ¡å½¢ç ã€‚åªè¦åœ¨captureMetadataOutput.metadataObjectTypes = [AVMetadataObjectTypeQRCode]æ·»åŠ æ›´å¤šçš„å…ƒæ•°æ®ç±»åž‹ã€‚ï¼Œç„¶åŽå›žè°ƒæ–¹æ³•ä¸­ä¿®æ”¹æ£€æµ‹ç±»åž‹å°±å¯ä»¥ã€‚ 123456789101112131415161718192021222324let supportedCodeTypes = [AVMetadataObjectTypeUPCECode, AVMetadataObjectTypeCode39Code, AVMetadataObjectTypeCode39Mod43Code, AVMetadataObjectTypeCode93Code, AVMetadataObjectTypeCode128Code, AVMetadataObjectTypeEAN8Code, AVMetadataObjectTypeEAN13Code, AVMetadataObjectTypeAztecCode, AVMetadataObjectTypePDF417Code, AVMetadataObjectTypeQRCode ]captureMetadataOutput.metadataObjectTypes = supportedCodeTypes// ....if supportedCodeTypes.contains(metadataObj.type) &#123; let barCodeObject = videoPreviewLayer?.transformedMetadataObject(for: metadataObj) qrCodeFrameView?.frame = barCodeObject!.bounds if metadataObj.stringValue != nil &#123; messageLabel.text = metadataObj.stringValue &#125;&#125; ä»£ç QRCodeReader]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOSåº”ç”¨ç¨‹åºçš„çŠ¶æ€]]></title>
    <url>%2F2017%2Fios-application-status.html</url>
    <content type="text"><![CDATA[iOSåº”ç”¨ç¨‹åºä¸€å…±æœ‰äº”ç§çŠ¶æ€ï¼š Not Running ç¨‹åºè¿˜æ²¡è¿è¡Œ Inactive ç¨‹åºè¿è¡Œåœ¨foregroundä½†æ²¡æœ‰æŽ¥æ”¶äº‹ä»¶ Active ç¨‹åºè¿è¡Œåœ¨foregroundæŽ¥æ”¶äº‹ä»¶ Background ç¨‹åºè¿è¡Œåœ¨backgroundæ­£åœ¨æ‰§è¡Œä»£ç  Suspended ç¨‹åºè¿è¡Œåœ¨backgroundæ²¡æœ‰æ‰§è¡Œä»£ç  iOSåº”ç”¨ç¨‹åºçŠ¶æ€å˜åŒ–ä¼šå›žè°ƒAPPDelegateä¸­çš„æ–¹æ³•ï¼Œä½†ä¸æ˜¯æ¯ä¸€ç§çŠ¶æ€å˜åŒ–éƒ½ä¼šæœ‰å¯¹åº”çš„æ–¹æ³•(ä¸Šå›¾çš„çº¢æ¡†çš„ä¸¤ä¸ªå˜åŒ–å°±æ²¡æœ‰å¯¹åº”çš„æ–¹æ³•) application:didFinishLaunchingWithOptions: Not Running -&gt; Inactive applicationDidBecomeActive: Inactive -&gt; Active applicationWillResignActive: Active -&gt; Inactive applicationDidEnterBackground: Background -&gt; Suspended applicationWillEnterForeground: Background -&gt; Inactive applicationWillTerminate: Suspended -&gt; Not Running å¸¸è§çš„åº”ç”¨çŠ¶æ€å˜åŒ–åœºæ™¯ ç¨‹åºç¬¬ä¸€æ¬¡å¯åŠ¨ï¼ˆæˆ–è€…è¢«æ€æŽ‰ä»¥åŽå¯åŠ¨ï¼‰ï¼š Not Running -&gt; Inactive -&gt; Active ç‚¹å‡»Homeé”®ï¼ˆæ²¡æœ‰åœ¨Inof.plistä¸­è®¾ç½®Application does not run in backgroundï¼‰ï¼š Active -&gt; Inactive -&gt; Background -&gt; Suspended ç‚¹å‡»Homeé”®ï¼ˆåœ¨Inof.plistä¸­è®¾ç½®Application does not run in backgroundä¸ºYESï¼Œåº”ç”¨ä¸èƒ½è¿è¡Œåœ¨åŽå°ï¼Œè¿›å…¥åŽå°åŽä¼šç«‹å³è¿›å…¥Not Runningï¼‰ï¼š Active -&gt; Inactive -&gt; Background -&gt; Suspended -&gt; Not Running æŒ‚èµ·é‡æ–°è¿è¡Œ Suspended -&gt; Background -&gt; Inactive -&gt; Active å†…å­˜æ¸…é™¤ï¼ˆæ€æŽ‰åº”ç”¨æˆ–åˆ é™¤åº”ç”¨ï¼‰ Suspended -&gt; Not Running åº”ç”¨ä¹‹é—´çš„åˆ‡æ¢ Active -&gt; Inactive Inactive -&gt; Active ç‚¹å‡»Homeé”®ï¼ˆåœ¨Inof.plistä¸­è®¾ç½®Application does not run in backgroundä¸ºYESï¼Œåº”ç”¨ä¸èƒ½è¿è¡Œåœ¨åŽå°ï¼Œè¿›å…¥åŽå°åŽä¼šç«‹å³è¿›å…¥Not Runningï¼‰ï¼š Active -&gt; Inactive -&gt; Background -&gt; Suspended -&gt; Not Running å¯é€šè¿‡åœ¨APPDelegateçš„å›žè°ƒæ–¹æ³•ä¸­æ‰“å°æ•°æ®ï¼Œæ¥æŸ¥çœ‹åº”ç”¨çŠ¶æ€å˜åŒ– 123456789101112131415161718192021222324252627282930func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -&gt; Bool &#123; print(&quot;`application:didFinishLaunchingWithOptions:` Not Running -&gt; Inactive&quot;) return true&#125;func applicationWillResignActive(_ application: UIApplication) &#123; print(&quot;`applicationWillResignActive:` Active -&gt; Inactive&quot;)&#125;func applicationDidEnterBackground(_ application: UIApplication) &#123; print(&quot;`applicationDidEnterBackground:` Background -&gt; Suspended&quot;)&#125;func applicationWillEnterForeground(_ application: UIApplication) &#123; print(&quot;`applicationWillEnterForeground:` Background -&gt; Inactive&quot;)&#125;func applicationDidBecomeActive(_ application: UIApplication) &#123; print(&quot;`applicationDidBecomeActive:` Inactive -&gt; Active&quot;)&#125;func applicationWillTerminate(_ application: UIApplication) &#123; print(&quot;`applicationWillTerminate:` Suspended -&gt; Not Running&quot;)&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 6 åˆ›å»ºç®€å•çš„Table Based App]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-6.html</url>
    <content type="text"><![CDATA[table viewåº”è¯¥æ˜¯iOSåº”ç”¨ä¸­æœ€å¸¸ç”¨çš„UI elementã€‚æœ€å¥½çš„ä¾‹å­å°±æ˜¯iPhoneè‡ªå¸¦çš„ä¸€äº›åº”ç”¨ï¼Œå¦‚ç”µè¯ï¼Œé‚®ä»¶ï¼Œè®¾ç½®ç­‰ã€‚TEDï¼ŒGoogle+ï¼ŒAirbnbï¼Œå¾®ä¿¡ç­‰ç­‰éƒ½æ˜¯å¾ˆå¥½ä¾‹å­ã€‚ åˆ›å»ºä¸€ä¸ªé¡¹ç›® é¡¹ç›®åç§°ä¸ºSimpleTableï¼Œæ¨¡æ¿ä¸ºâ€Single View applicationâ€ è®¾è®¡UI é€‰ä¸­Main.storyboardï¼Œä»ŽObject libraryä¸­æ‹–åŠ¨Table Viewè¿›å…¥è§†å›¾ æ”¹å˜Table Viewçš„å¤§å°è‡³æ•´ä¸ªviewï¼Œä¿®æ”¹å±žæ€§Prototype Cellsä¸º1 é€‰ä¸­Table View Cellï¼Œä¿®æ”¹Styleä¸ºBasicï¼ŒIdentifierä¸ºCellã€‚table view cellçš„æ ‡å‡†ç±»åž‹æœ‰ basicã€right detailã€left detail å’Œ subtitleï¼Œå½“ç„¶è¿˜æœ‰å®šåˆ¶ç±»åž‹customã€‚ é€‰ä¸­Table Viewï¼Œè®¾ç½®å››ä¸ªspacingçº¦æŸï¼Œä¸Šä¸‹å·¦å³çš„è·ç¦»éƒ½è®¾ç½®ä¸º0 ä¸ºUITableViewæ·»åŠ ä¸¤ä¸ªåè®® Object libraryä¸­çš„æ¯ä¸€UI componentéƒ½æ˜¯å¯¹åº”ä¸€ä¸ªclassï¼Œå¦‚ Table Viewå°±æ˜¯å¯¹åº”UITableViewã€‚å¯ä»¥é€šè¿‡ç‚¹å‡»å¹¶æ‚¬åœåœ¨UI componentä¸ŠæŸ¥çœ‹å¯¹åº”çš„classå’Œä»‹ç»ã€‚ åœ¨ViewController.swiftæ–‡ä»¶çš„UIViewControlleråŽï¼Œæ·»åŠ ä»£ç , UITableViewDataSource, UITableViewDelegateï¼Œè¡¨ç¤ºViewControllerç±»å®žçŽ°äº†UITableViewDataSourceï¼ŒUITableViewDelegateä¸¤ä¸ªåè®®ã€‚å‡ºçŽ°çº¢è‰²æ„Ÿå¹å·ï¼Œè¿™æ˜¯xcodeçš„é—®é¢˜æç¤ºï¼Œç‚¹å‡»å‚çœ‹é—®é¢˜æè¿°ï¼š Type â€˜ViewControllerâ€™ does not conform to protocolâ€˜UITableViewDataSourceâ€™ é—®é¢˜æè¿°ä¸ºViewControllerä¸ç¬¦åˆåè®®UITableViewDataSourceã€‚é€šè¿‡command+ç‚¹å‡» ï¼ˆæœ€æ–°çš„xcode9å˜æˆäº†command+option+ç‚¹å‡»ï¼‰åˆ°UITableViewDataSourceä¸­çœ‹çœ‹ä½ ï¼š1234567891011121314151617181920212223242526272829303132public protocol UITableViewDataSource : NSObjectProtocol &#123; @available(iOS 2.0, *) public func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int // Row display. Implementers should *always* try to reuse cells by setting each cell&apos;s reuseIdentifier and querying for available reusable cells with dequeueReusableCellWithIdentifier: // Cell gets various attributes set automatically based on table (separators) and data source (accessory views, editing controls) @available(iOS 2.0, *) public func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell @available(iOS 2.0, *) optional public func numberOfSections(in tableView: UITableView) -&gt; Int // Default is 1 if not implemented @available(iOS 2.0, *) optional public func tableView(_ tableView: UITableView, titleForHeaderInSection section: Int) -&gt; String? // fixed font style. use custom view (UILabel) if you want something different @available(iOS 2.0, *) optional public func tableView(_ tableView: UITableView, titleForFooterInSection section: Int) -&gt; String? // Editing // Individual rows can opt out of having the -editing property set for them. If not implemented, all rows are assumed to be editable. @available(iOS 2.0, *) optional public func tableView(_ tableView: UITableView, canEditRowAt indexPath: IndexPath) -&gt; Bool ... UITableViewDataSourceåè®®ä¸­å®šä¹‰äº†å¾ˆå¤šæ–¹æ³•ï¼Œé™¤äº†å‰ä¸¤ä¸ªæ–¹æ³•æ²¡æœ‰optionalå…¶å®ƒéƒ½æœ‰ï¼Œæœ‰çš„è¡¨ç¤ºè¿™ä¸ªæ–¹æ³•ä¸ä¸€å®šè¦å®žçŽ°ï¼Œæ²¡æœ‰çš„å°±ä¸€å®šè¦å®žçŽ°ï¼ŒæŠŠè¿™ä¸ªä¸¤ä¸ªæ–¹æ³•å®žçŽ°äº†ï¼Œé—®é¢˜æç¤ºå°±ä¼šæ¶ˆå¤±ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•ä»Žåå­—å’Œè¿”å›žå€¼ç±»åž‹ä¹Ÿå¤§æ¦‚èƒ½çŸ¥é“åšäº†ä»€ä¹ˆï¼š public func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int ä¸€ä¸ªsectionæœ‰å‡ è¡Œï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªsectionæœ‰å‡ ä¸ªUITableViewCellï¼Œ sectionå°±æ˜¯ä¸€ç»„UITableViewCellçš„æ„æ€ï¼ŒTable Viewå¯ä»¥å®šä¹‰å¤šä¸ªsectionï¼Œé»˜è®¤æ˜¯ä¸€ä¸ªã€‚ public func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell è¿”å›žæ¯ä¸€è¡Œçš„ UITableViewCell åœ¨ViewController.swiftä¸­å®šä¹‰ä¸€ä¸ªå˜é‡restaurantNamesï¼Œç±»åž‹æ˜¯æ•°ç»„ï¼Œè¡¨ç¤ºä¸€ç³»åˆ—é¤é¦†çš„åå­—ã€‚ 1var restaurantNames = [&quot;Cafe Deadend&quot;, &quot;Homei&quot;, &quot;Teakha&quot;, &quot;Cafe Loisl&quot;, &quot;PetiteOyster&quot;, &quot;For Kee Restaurant&quot;, &quot;Po&apos;s Atelier&quot;, &quot;Bourke Street Bakery&quot;, &quot;Haigh&apos;sChocolate&quot;, &quot;Palomino Espresso&quot;, &quot;Upstate&quot;, &quot;Traif&quot;, &quot;Graham Avenue Meats AndDeli&quot;, &quot;Waffle &amp; Wolf&quot;, &quot;Five Leaves&quot;, &quot;Cafe Lore&quot;, &quot;Confessional&quot;,&quot;Barrafina&quot;, &quot;Donostia&quot;, &quot;Royal Oak&quot;, &quot;CASK Pub and Kitchen&quot;] å®šä¹‰UITableViewDataSourceçš„ä¸¤ä¸ªæ–¹æ³•ï¼š 12345678910111213141516func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123; // 1 return restaurantNames.count &#125; func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; // 2 let cellIdentifier = &quot;Cell&quot; let cell = tableView.dequeueReusableCell(withIdentifier: cellIdentifier, for: indexPath) // 3 cell.textLabel?.text = restaurantNames[indexPath.row] return cell &#125; 1 é¤é¦†çš„æ•°ç›®å°±æ˜¯sectionçš„è¡Œæ•° 2 â€œCellâ€ä¸Žä¹‹å‰å®šä¹‰çš„UITableViewCellçš„Identifierå±žæ€§æ˜¯å¯¹åº”çš„ã€‚dequeueReusableCellæ–¹æ³•æ˜¯äº§ç”Ÿä¸€ä¸ªUITableViewCellã€‚ 3 UITableViewCellä¸­æœ‰å¯ç®—å±žæ€§textLabelï¼Œå…¶å®žå°±æ˜¯ä¸€ä¸ªUILabelï¼Œç”±äºŽæ˜¯å¯é€‰å±žæ€§ï¼Œè°ƒç”¨æ—¶ä¹Ÿç”¨å¯é€‰é“¾å¼è°ƒç”¨cell.textLabel?.text è¿žæŽ¥ DataSource å’Œ Delegateè¿è¡Œappï¼Œæ²¡æœ‰æ•°æ®æ˜¾ç¤ºã€‚å°½ç®¡ä¸Šé¢å·²ç»åœ¨ä»£ç ä¸­è®©ViewControllerç»§æ‰¿äº†UITableViewDataSource, UITableViewDelegateï¼Œä½†storyboardå¹¶ä¸çŸ¥é“ã€‚ åœ¨document outlineä¸­é€‰æ‹©Table Viewï¼Œä½¿ç”¨control-dragåˆ°View Controllerï¼Œåœ¨å¼¹å‡ºæ¡†ä¸­é€‰æ‹©dataSourceã€‚åŒæ ·çš„æ–¹æ³•é€‰æ‹©delegate ç¡®è®¤è¿žæŽ¥æ˜¯å¦æˆåŠŸã€‚é€‰ä¸­Table Viewï¼Œåœ¨connetionæ£€æŸ¥å™¨ä¸­æŸ¥çœ‹ï¼›æˆ–è€…ç›´æŽ¥åœ¨document outlineä¸­å³å‡»Table View è¿è¡Œapp æ·»åŠ å›¾ç‰‡åˆ°Table View ä»Žsimpletable-image1.zipä¸‹è½½å›¾ç‰‡ï¼Œè§£åŽ‹åŽä¸€èµ·æ‹–åˆ°asset catalog åœ¨ViewController.swiftçš„tableView(_:cellForRowAtIndexPath:)æ–¹æ³•çš„return cellå‰æ·»åŠ ä»£ç cell.imageView?.image = UIImage(named: &quot;restaurant&quot;)ã€‚ä½¿æ¯ä¸ªUITableViewCellçš„imageéƒ½æ˜¯ä¸€æ ·çš„ã€‚ éšè—çŠ¶æ€æ é¡¶éƒ¨çŠ¶æ€æ¥å’Œtable view æ•°æ®é‡å äº†ï¼Œåªè¦åœ¨ViewControlleråŠ ä¸€æ®µä»£ç å°±å¯ä»¥ï¼š123override var prefersStatusBarHidden: Bool &#123; return true&#125; prefersStatusBarHiddenæ˜¯çˆ¶ç±»UIViewControllerä¸­çš„å±žæ€§ï¼Œæ‰€ä»¥è¦åŠ  overrideï¼Œè¡¨ç¤ºé‡å†™äº†ã€‚ ä¸åŒçš„Cellå¯¹åº”ä¸åŒçš„å›¾ç‰‡ ä»Žsimpletable-image2.zipä¸‹è½½å›¾ç‰‡ï¼Œè§£åŽ‹åŽä¸€èµ·æ‹–åˆ°asset catalog ä¿®æ”¹ViewController.swiftçš„tableView(_:cellForRowAtIndexPath:)ä¸ºï¼š 12345678910111213141516171819func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cellIdentifier = &quot;Cell&quot; let cell = tableView.dequeueReusableCell(withIdentifier: cellIdentifier, for: indexPath) // Configure the cell... let restaurantName = restaurantNames[indexPath.row] cell.textLabel?.text = restaurantName // 1 let imageName = restaurantName.lowercased().replacingOccurrences(of: &quot; &quot;, with: &quot;&quot;) if let image = UIImage(named: imageName) &#123; cell.imageView?.image = image &#125; else &#123; cell.imageView?.image = UIImage(named: &quot;restaurant&quot;) &#125; return cell &#125; 1 æŠŠèœé¦†åå­—å­—ç¬¦ä¸²å…ˆä¿®æ”¹æˆå°å†™ï¼Œç„¶åŽåŽ»ç©ºæ ¼ æœ€ç»ˆç»“æžœ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 4 ç”¨Stack Viewè®¾è®¡UI]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-4.html</url>
    <content type="text"><![CDATA[å‰ä¸€ç¯‡å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 3 ä»‹ç»Auto Layoutä¸­æåˆ°Auto Layoutå·¥å…·æ æœ‰ä¸ªstackæŒ‰é’®ï¼Œè¿™æ˜¯Stack ViewåŠŸèƒ½ã€‚ä¸ºäº†è§£å†³å¤æ‚UIæ—¶å¸ƒå±€çº¦æŸå®šä¹‰å›°éš¾ï¼ŒAppleä»ŽiOS 9å¼€å§‹å¼•å…¥Stack Viewã€‚è¿™ç¯‡æ–‡ç« å°†å­¦ä¹ åˆ°ï¼š ç”¨Stack Viewå¸ƒå±€UIã€‚ ç”¨image viewså±•ç¤ºå›¾ç‰‡ã€‚ ç”¨å†…å»ºçš„asset catalogç®¡ç†å›¾ç‰‡ã€‚ ç”¨Size Classesé€‚é…Stack View Stack Viewæ˜¯ä»€ä¹ˆStack Viewä¸ºåœ¨çºµå‘æˆ–æ¨ªå‘å¸ƒç½®ä¸€ä¸ªè§†å›¾çš„é›†åˆï¼Œæä¾›äº†ä¸€ä¸ªæµçº¿åž‹ç•Œé¢ã€‚å¯ä»¥ç”¨stack viewå°†å¾ˆå¤šUIå¯¹è±¡åˆæˆä¸€ä¸ªã€‚è§†å›¾åµŒå…¥ä¸€ä¸ªstack viewé‡Œä»¥åŽ,å°±ä¸å†éœ€è¦å®šä¹‰è‡ªåŠ¨å¸ƒå±€çº¦æŸ. Stack Viewç®¡ç†å®ƒå­è§†å›¾çš„å¸ƒå±€,ç„¶åŽè‡ªåŠ¨æä¾›å¸ƒå±€çº¦æŸã€‚è¿™æ„å‘³ç€å­è§†å›¾å·²ç»å‡†å¤‡å¥½åŽ»é€‚åº”ä¸åŒçš„å±å¹•å°ºå¯¸ã€‚æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥åµŒå…¥ä¸€ä¸ªstack viewåˆ°å¦ä¸€ä¸ªstack viewæ¥æž„å»ºæ›´å¤æ‚çš„ç”¨æˆ·ç•Œé¢ã€‚ä½†æ˜¯ï¼Œè¿™å¹¶ä¸æ„å‘³ç€ä¸éœ€è¦å¤„ç†è‡ªåŠ¨å¸ƒå±€ã€‚ä»ç„¶éœ€è¦å®šä¹‰stack viewçš„å¸ƒå±€ã€‚è¿™æ ·ä¸ä»…èƒ½å¤ŸèŠ‚çº¦åœ¨åˆ›ä½œæ¯ä¸ªUIå…ƒç´ çš„çº¦æŸçš„æ—¶é—´ï¼Œä¹Ÿå¯ä»¥è½»æ¾çš„ä»Žå¸ƒå±€é‡Œæ¥æ·»åŠ /ç§»é™¤è§†å›¾ã€‚ Xcodeæä¾›ä¸¤ç§æ–¹æ³•ä½¿ç”¨Stack Viewï¼š ç›´æŽ¥ä»ŽObject libraryä¸­æ‹–å‡ºstack viewï¼ˆçºµå‘æˆ–æ¨ªå‘ï¼‰ï¼Œç„¶åŽæŠŠå…¶ä»–è§†å›¾æ‹–åŠ¨stack view é€‰ä¸­ä¸€äº›è§†å›¾ï¼Œç„¶åŽç‚¹å‡»Interface Builder editorå³ä¸‹è§’ä¸€ç»„æŒ‰é’®ä¸­çš„stackæŒ‰é’® ä¸€ä¸ªå°ç¨‹åº æ–°å»ºé¡¹ç›® StackViewDemo å‘Xcodeä¸­æ·»åŠ å›¾ç‰‡ ä»Žå›¾ç‰‡ä¸‹è½½æ‰€éœ€å›¾ç‰‡ï¼ŒåŠ åŽ‹åŽæœ‰3ç»„9å¼ å›¾ç‰‡ï¼Œæ¯ç»„æœ‰3å¼ ä¸åŒç±»åž‹çš„å›¾ç‰‡ï¼Œé’ˆå¯¹ä¸åŒç±»åž‹çš„è®¾å¤‡ï¼š user1.png ï¼ˆ non-Retinaçš„ä¸€äº›è€è®¾å¤‡ï¼‰ user1@2x.png ï¼ˆiPhone 4/4s/5/5s/6ï¼‰ user1@3x.png ï¼ˆiPhone 6 Plusç­‰é«˜åˆ†è¾¨çš„ï¼‰ æ‹–åŠ¨å›¾ç‰‡ç«Ÿç„¶xcodeçš„asset catalogä¸­ï¼Œxcodeä¼šè‡ªåŠ¨ç»„ç»‡è¿™äº›æœ‰è§„å¾‹çš„å›¾ç‰‡ï¼Œä½¿ç”¨æ—¶ç›´æŽ¥ç”¨user1,ä¸éœ€è¦é åŽé¢çš„@2æˆ–@3ã€‚ ç”¨Stack Viewå¸ƒå±€titleçš„label é€‰æ‹©Main.storyboardï¼Œä»ŽObject libraryä¸­æ‹–å‡ºVertical Stack Viewåˆ°storyboardä¸­ æ‹–å‡ºä¸€ä¸ªlabelåˆ°stack viewä¸­ã€‚ä¸€æ—¦labelè¿›å…¥stack viewä¸­ï¼Œå®ƒå°±è‡ªåŠ¨è°ƒæ•´å¤§å°ä»¥é€‚åº”label ä¿®æ”¹labelçš„titleä¸ºâ€œInstant Developerâ€ï¼Œå­—ä½“å¤§å°ä¸º40 pointsï¼Œfont styleä¸ºmediumï¼Œå­—ä½“é¢œè‰²ä¸ºçº¢è‰² å¦å¤–æ‹–å‡ºä¸€ä¸ªlabelåˆ°stack viewä¸­ï¼Œä¿®æ”¹labelçš„titleä¸ºâ€œGet help from experts in 15 minutesâ€ é€‰æ‹©stack viewï¼Œåœ¨å±žæ€§æ£€æŸ¥å™¨ä¸­ä¿®æ”¹Alignmentå‚æ•°ä¸ºcenterï¼Œè¿™æ ·ä½¿stack viewä¸­çš„labelæ°´å¹³å±…ä¸­å¯¹é½ã€‚ å¤šä¸ªè§†å›¾åœ¨ä¸€èµ·ä¸æ–¹ä¾¿é€‰æ‹©æ—¶ï¼Œå¯ä»¥ç”¨ shift + å³å‡»ï¼šstack viewçš„å‡ ä¸ªå±žæ€§ï¼š axis stack viewä¸­å¯¹è±¡æ˜¯æ°´å¹³æ”¾ç½®è¿˜æ˜¯åž‚ç›´æ”¾ç½®ï¼Œä¹Ÿå°±æ˜¯Vertical Stack Viewå’ŒHorizontal Stack Viewä¹‹é—´çš„åˆ‡æ¢ alignment stack viewä¸­å¯¹è±¡çš„å¯¹é½æ–¹å¼ distribution ç”¨StackæŒ‰é’®å¸ƒå±€å¤šä¸ªå›¾ç‰‡ æ‹–åŠ¨ä¸€ä¸ªimage viewå¯¹è±¡ï¼Œå¹¶ä¿®æ”¹å…¶imageå±žæ€§ä¸ºuser1 åŒæ ·çš„æ–¹æ³•å†æ·»åŠ ä¸¤ä¸ªimage viewå¯¹è±¡ï¼Œimageå±žæ€§åˆ†åˆ«ä¸ºuser2ï¼Œuser3ã€‚ç²—ç•¥è°ƒæ•´å›¾ç‰‡çš„å¸¦ä¸‹ï¼Œæ”¾åœ¨ä¸€ä¸ªæ°´å¹³ï¼Œå¤§æ¦‚å¦‚ä¸‹ï¼š é€‰ä¸­ä¸‰ä¸ªimage viewï¼Œå‡»Interface Builder editorå³ä¸‹è§’ä¸€ç»„æŒ‰é’®ä¸­çš„stackæŒ‰é’®ï¼Œåˆ™ç”Ÿæˆä¸€ä¸ªæ–°çš„horizontal stack viewã€‚ ä¿®æ”¹æ–°ç”Ÿæˆçš„horizontal stack viewçš„å±žæ€§ï¼Œspacingä¸º 10ï¼Œè¡¨ç¤ºå›¾ç‰‡ä¹‹é—´çš„é—´è·ï¼ŒDistributionä¸ºFill Equally åŒæ—¶é€‰ä¸­ä¸¤ä¸ªstack viewï¼Œç‚¹å‡»stack æŒ‰é’®ï¼Œå†ç”Ÿæˆä¸€ä¸ªæ–°çš„å¤§vertical stack view ä¸ºstack viewæ·»åŠ å¸ƒå±€çº¦æŸ é€‰ä¸­å¤§çš„stack viewï¼Œæ·»åŠ space constraintsï¼Œä¸Šï¼Œå·¦å³ï¼Œåˆ†åˆ«ä¸º70ï¼Œ0ï¼Œ0æ·»åŠ çº¦æŸåŽï¼Œå¦‚æžœå‡ºçŽ°å¸ƒå±€é—®é¢˜ï¼Œå¯é€šè¿‡issue indicatorè§£å†³ï¼Œå¯å‚è€ƒä¸Šä¸€ç¯‡æ–‡ç« ã€‚ çœ‹é¢„è§ˆassistant editorï¼ŒæŸ¥çœ‹å…¶å®ƒè®¾å¤‡ä¼šå‘çŽ°ä¸¤ä¸ªé—®é¢˜ï¼š Instant Developer labelæ–‡æœ¬åœ¨å°å±å¹•è®¾å¤‡è¢«æˆªæ–­ å›¾ç‰‡çš„å®½é«˜æ¯”æ”¹å˜äº† é€‰æ‹©Instant Developer labelï¼Œä¿®æ”¹Autoshrinkå±žæ€§ä¸ºMinimum Font Sizeï¼Œå€¼ä¸º20ï¼Œè¿™æ ·å°±è®¾ç½®äº†labelçš„å­—ä½“å¯ä»¥å˜åŒ–ï¼Œæœ€å°å€¼ä¸º20 ï¼Œå°å±å¹•å°±ä¸ä¼šè¢«æˆªæ–­äº†ã€‚ æ¨ªå‘control-dragå›¾ç‰‡çš„stack viewï¼Œé€‰æ‹©Aspect Ratioï¼Œä½¿å›¾ç‰‡çš„å®½é«˜æ¯”ä¸å˜åŒ–ã€‚ åœ¨å›¾ç‰‡stack viewä¸‹æ·»åŠ ä¸€ä¸ªlabel æ‹–åŠ¨ä¸€ä¸ªlabelåˆ°å›¾ç‰‡ä¸‹ï¼Œçœ‹åˆ°ä¸€ä¸ªè“è‰²çº¿åŽæ¾å¼€ æ”¹å˜labelçš„æ–‡æœ¬ï¼šNeed help with your coding problems? Weâ€™ll find you the right developer who can help you in 15 minutes. labelçš„å±žæ€§linesæ”¹ä¸º0ï¼Œè¡¨ç¤ºä¸é™åˆ¶è¡Œæ•° é€‰æ‹©å¤§stack viewï¼Œä¿®æ”¹é—´è·sapcingä¸º10ï¼Œä¿®æ”¹Alignmentä¸ºå±…ä¸­ ç”¨stack viewå¸ƒå±€Buttons æ·»åŠ ä¸¤ä¸ªButtonï¼šâ€Sign inâ€ å’Œ â€œSign up with Facebookâ€ ä¿®æ”¹ç™½å­—ä½“ï¼Œçº¢èƒŒæ™¯ï¼Œå®½åº¦ä¸º200 é€‰æ‹©ä¸¤ä¸ªButtonç”Ÿæˆvertical stack viewï¼Œspacingä¸º10 ä¸ºvertical stack viewæ·»åŠ ä¸¤ä¸ªçº¦æŸï¼Œæ°´å¹³å±…ä¸­å’Œåº•è¾¹è·20 å½“æŠŠä¸¤ä¸ªbuttonèšåˆæˆstack viewæ—¶ï¼Œbuttonçš„å¤§å°ä¼šè‡ªåŠ¨è°ƒèŠ‚åˆ°é€‚å®œå¤§å°ï¼Œä¹Ÿå°±æ˜¯â€Sign up with Facebookâ€çš„å®½åº¦å˜ä¸º155 ã€‚éœ€è¦å†æ·»åŠ ä¸€ä¸ªå®½åº¦çº¦æŸï¼Œä¿®æ”¹Constantå€¼ä¸º200 ã€‚ ç”¨Size Classesæ¥è°ƒèŠ‚Stack view landscape orientation vs portrait orientationç›´è¯‘å°±æ˜¯é£Žæ™¯ç”»æ–¹å‘å’Œè‚–åƒç”»æ–¹å‘ï¼Œå…¶å®žå°±æ˜¯æŒ‡æ¨ªå±å’Œç«–å± ä¸Šé¢è®¾è®¡çš„UIçœ‹ä¸ŠåŽ»ä»¥ä¸é”™äº†ï¼Œä½†ä¸€ç›´æ²¡æœ‰è€ƒè™‘çš„æ¨ªå±çš„æƒ…å†µã€‚å› ä¸ºæ¨ªå±ä¸Šä¸‹é«˜åº¦å˜å°ï¼ŒåŽŸæœ¬åœ¨ç«–å±ä¸‹é€‚å®œçš„stack viewä¸Šè¾¹è·ï¼Œå°±æœ‰ç‚¹å¤§äº†ï¼Œéœ€è¦å°ä¸€ç‚¹ã€‚è¿™ä¹Ÿå¯¼è‡´äº†ï¼Œä»ŽiOS 8å¼€å§‹å¼•å…¥äº†ä¸€ä¸ªæ–°çš„UIè®¾è®¡æ¦‚å¿µAdaptive Layoutï¼ˆè‡ªé€‚åº”å¸ƒå±€ï¼‰ï¼Œä¸ºæ­¤ï¼ŒAppleå¼•å…¥äº†Size Classesã€‚é€šè¿‡Size Classes å’Œ auto layoutä¸€èµ·è®¾è®¡è‡ªé€‚åº”UIã€‚Size Classesä»…ä»…æ˜¯å¯¹å±å¹•è¿›è¡Œäº†åˆ†ç±», å®žé™…ä¸Šçš„å¸ƒå±€è¿˜æ˜¯äº¤ç»™autolayout Size Classesæœ‰ä¸¤ç§ç±»åž‹ï¼šregular å’Œ compactï¼ˆå¯ä»¥ç†è§£ä¸ºå¤§[R] å’Œ å°[C]ï¼‰ã€‚è€Œè¿™ä¸¤ç§ç±»åž‹åº”ç”¨åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šï¼švertical (height) å’Œ horizontal (width) ï¼Œå°±å¯¹åº”ä¸åŒç±»åž‹çš„è®¾å¤‡ï¼šRegular width-Regular Height, Regular width-Compact Height, Compact width-Regular Height and Compact width-Compact Height æœ€æ–°ç‰ˆæœ¬çš„Xcodeå·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†ä¸åŒè®¾å¤‡å’Œæ–¹å‘çš„Size ClassesæŸ¥çœ‹ï¼š é€‰æ‹©ä¸Šè¾¹è·çº¦æŸã€‚åœ¨å±žæ€§æ£€æŸ¥å™¨ä¸­ï¼Œç‚¹å‡»Constantå‰é¢çš„+å·ï¼Œå¼¹æ¡†ä¸­åˆ†åˆ«é€‰æ‹©ï¼šWidthï¼šAnyï¼ŒHeightï¼šCompactï¼ŒGamuntï¼šAnyï¼ŒåŽé¢çš„å€¼ä¸º0ï¼Œè¡¨ç¤ºåªæœ‰åœ¨Compact heightä¸‹ä¸Šè¾¹è·ä¸º0 ä¸ºäº†æ›´åŠ ç®€æ´ä¹Ÿå¯ä»¥åœ¨æœ‰äº›å±å¹•çŠ¶æ€ä¸‹æŠŠâ€Need help with your â€¦â€ labeléšè—æŽ‰ï¼Œå°±æ˜¯heightä¸º0ã€‚ä¹Ÿå°±æ˜¯ä¸ºlabelæ·»åŠ ä¸€ä¸ªåªæœ‰åœ¨Widthï¼šAnyï¼ŒHeightï¼šCompactï¼ŒGamuntï¼šAnyè¿™ä¸ªSize Classesä¸‹ï¼Œçš„heightçº¦æŸã€‚ç”¨control-dragæ–¹æ³•æ·»åŠ heightçº¦æŸï¼š é€‰æ‹©çŽ°ä»·çš„heightçº¦æŸï¼Œä¿®æ”¹Constantä¸º0ï¼›åŽ»é™¤é€‰ä¸­Installedï¼Œç‚¹å‡»Installedå‰çš„+ï¼Œå¼¹å‡ºæ¡†é€‰æ‹©Widthï¼šAnyï¼ŒHeightï¼šCompactï¼ŒGamuntï¼šAnyï¼Œå¹¶é€‰æ‹©æ–°åŠ çš„Installedï¼ˆheightçº¦æŸé¢œè‰²å˜æµ…äº†ï¼Œè¯´æ˜Žè¿™ä¸ªçº¦æŸä¸æ˜¯åœ¨ä»»ä½•çŠ¶æ€ä¸‹éƒ½æœ‰æ•ˆçš„ï¼‰ï¼š ç»ƒä¹ è¿˜æœ‰è€ƒè™‘ç‰¹æ®Šçš„ä¸€äº›è®¾å¤‡çš„æƒ…å†µï¼Œæ·»åŠ ä¸€äº›ç‰¹æ®Šçš„çº¦æŸï¼š åœ¨wR hRæ—¶ï¼Œä¿®æ”¹ä¸¤ä¸ªæŒ‰é’®çš„å®½åº¦ä¸º300 åœ¨iphone 6/7 å’Œä¸€äº›è€çš„iphoneç­‰è®¾å¤‡ç«–å±æ—¶ï¼Œä¿®æ”¹â€Need help with â€¦â€ label å­—ä½“ä¸º15 åœ¨wR hRæ—¶ï¼Œä¿®æ”¹å›¾åƒstack viewçš„ä¸Šä¸‹ç©ºé—´ä¸º30 ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 3 ä»‹ç»Auto Layout]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-3.html</url>
    <content type="text"><![CDATA[Auto layoutæ˜¯ä¸€ç§åŸºäºŽçº¦æŸçš„ï¼Œæè¿°æ€§çš„å¸ƒå±€ç³»ç»Ÿã€‚ iPhoneå°ºå¯¸ ä¸ºä»€ä¹ˆä½¿ç”¨Auto Layoutå‰é¢çš„ä¸€éƒ¨åˆ†çš„é¡¹ç›®HelloWorldé»˜è®¤æ˜¯è¿è¡Œçš„iPhone 7(iPhone 6)çš„ç«–å±ä¸‹çš„ï¼Œbuttonæ˜¯åœ¨å±å¹•ä¸­é—´çš„ï¼Œä½†æ˜¯å¦‚æžœå…¶ä»–å±å¹•å¤§å°æˆ–ä¸åŒæ–¹ä½å°±ä¸ä¸€å®šäº†ã€‚æŒ‰ç…§åœ¨é»˜è®¤iPhone 7çš„æ¡ä»¶ä¸‹ï¼Œbuttonçš„å·¦ä¸Šè§’çš„åæ ‡æ˜¯(147,318)ï¼Œå…¶ä»–å°ºå¯¸çš„è®¾å¤‡å’Œä¸åŒæ–¹ä½æ˜¾ç¤ºæ—¶ä¹Ÿä¼šæŒ‰ç…§è¿™ç§åæ ‡æ˜¾ç¤ºï¼Œå°±ä¸ä¼šåœ¨ä¸­é—´äº†ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨Auto Layoutã€‚ Auto Layoutå°±æ˜¯å…³äºŽæ‰€æœ‰çº¦æŸå…³äºŽâ€œHello Worldâ€æŒ‰é’®çš„ä½ç½®ä¿¡æ¯çš„æè¿°å¯èƒ½æ¯”è¾ƒå¥½çš„æ˜¯ï¼š æ— è®ºå±å¹•çš„åˆ†è¾¨çŽ‡å’Œæ–¹ä½ï¼Œè¿™ä¸ªæŒ‰é’®åœ¨æ°´å¹³å’Œåž‚ç›´æ–¹å‘éƒ½åº”è¯¥æ˜¯å±…ä¸­çš„ è¿™å®žé™…å°±å®šä¹‰äº†ä¸¤ä¸ªçº¦æŸï¼š æ°´å¹³å±…ä¸­ åž‚ç›´å±…ä¸­ åœ¨Auto Layoutä¸­çº¦æŸéƒ½è¢«æè¿°æˆæ•°å­¦è¡¨ç¤ºï¼Œä¾‹å¦‚ä¸Šè¿°ä¸¤ä¸ªé™åˆ¶å°±ä¼šè¢«è¡¨ç¤ºæˆï¼š Hello World.centerX = centerX ï¼Œ Hello World.centerY = centerYã€‚å½“ç„¶æˆ‘ä»¬ä¸éœ€è¦ç›´æŽ¥å¤„ç†è¿™ç§æ•°å­¦å…¬å¼ï¼ŒXcodeä¼šå¸®æˆ‘ä»¬å¤„ç†ã€‚ ä½¿ç”¨Auto Layoutä½¿Buttonåˆ°ä¸­å¤®Xcodeæä¾›äº†ä¸¤ç§æ–¹æ³•å®šä¹‰Auto Layoutçš„çº¦æŸï¼š Auto Layoutå·¥å…·æ  Control-drag Auto Layoutå·¥å…·æ æä¾›äº†å››ä¸ªæŒ‰é’®ï¼š Stack - ç»„åˆviewså˜æˆä¸€ä¸ªstack view Align - æž„å»ºå¯¹é½çº¦æŸ Pin - æž„å»ºç©ºé—´çº¦æŸï¼Œä¾‹å¦‚UIçš„å®½åº¦ï¼Œé«˜åº¦ï¼Œè¾¹è·ç­‰ Issues - è§£å†³å¸ƒå±€é—®é¢˜ ä½¿ç”¨Alignæ¥å®šä¹‰ä¸¤ä¸ªçº¦æŸï¼šæ°´å¹³å±…ä¸­ å’Œ åž‚ç›´å±…ä¸­ã€‚å¼¹çª—ä¸­â€Horizontal in containerâ€åŽçš„æ•°å­—è¡¨ç¤ºbuttonä¸­å¿ƒç‚¹çš„xåæ ‡ä¸Žçˆ¶è§†å›¾ä¸­å¿ƒç‚¹çš„xåæ ‡çš„ç›¸å·®æ•°ï¼Œ â€œVertically in containerâ€åŽçš„æ•°å­—è¡¨ç¤ºbuttonä¸­å¿ƒç‚¹çš„yåæ ‡ä¸Žçˆ¶è§†å›¾ä¸­å¿ƒç‚¹çš„yåæ ‡çš„ç›¸å·®æ•°ã€‚å¦‚æžœéƒ½ä¸ºé›¶å°±è¡¨ç¤ºbuttonçš„ä¸­å¿ƒå’Œçˆ¶è§†å›¾çš„ä¸­å¿ƒæ˜¯ç›¸åŒçš„ï¼Œä¹Ÿå°±æ˜¯è¯´buttonæ°´å¹³å’Œåž‚ç›´æ–¹å‘éƒ½å±…ä¸­ã€‚ ç‚¹å‡» â€œAdd 2 Constraintsâ€ åŽï¼Œä¼šå‡ºçŽ°å¦‚ä¸‹æƒ…å†µã€‚åœ¨document outlineä¸­å‡ºçŽ°ä¸¤ä¸ªçº¦æŸé€‰é¡¹ï¼Œåœ¨è§†å›¾ä¸­å‡ºçŽ°åž‚ç›´ä¸¤æ¡è“è‰²çš„å®žçº¿ï¼Œåœ¨sizeæ£€æŸ¥å™¨ä¸­ä¹Ÿèƒ½çœ‹åˆ°çº¦æŸã€‚ å¦‚æžœç‚¹å‡»æ¯ä¸ªçº¦æŸï¼Œåœ¨sizeæ£€æŸ¥å™¨ä¸­è¿˜èƒ½çœ‹åˆ°æ¯ä¸ªçº¦æŸçš„å…·ä½“ä¿¡æ¯ï¼Œä¹Ÿèƒ½åœ¨æ­¤ä¿®æ”¹çº¦æŸã€‚ è§£å†³å¸ƒå±€çº¦æŸé—®é¢˜Xcodeå¯ä»¥éžå¸¸æ™ºèƒ½çš„æ£€æµ‹çš„å¸ƒå±€çº¦æŸæ–¹é¢çš„é—®é¢˜ã€‚å½“åˆ›å»ºäº†æ¨¡æ£±ä¸¤å¯æˆ–å†²çªçš„çº¦æŸæ—¶å°±ä¼šå‡ºçŽ°å¸ƒå±€é—®é¢˜ã€‚è¯•ç€å°†buttonæ‹–åŠ¨å·¦ä¸‹è§’ï¼Œè§†å›¾ä¸­åŽŸæœ¬çš„è“è‰²å®žçº¿å˜æˆäº†é»„è‰²å®žçº¿ï¼Œå¹¶ä¸”çº¿ä¸Šè¿˜æœ‰æ•°å­—ï¼Œè¿™äº›æ•°å­—è¡¨ç¤ºbuttonçŽ°åœ¨çš„ä½ç½®åç¦»çº¦æŸçš„è·ç¦»ï¼Œdocument outlineå³ä¸Šè§’å‡ºçŽ°ä¸€ä¸ªé»„è‰²ç®­å¤´(disclosure arrow)ã€‚ ç‚¹å‡»disclosure arrowï¼Œå‡ºçŽ°å¸ƒå±€é—®é¢˜åˆ—è¡¨ï¼Œçº¢è‰²æ¡†ä¸­çš„Expectedè¡¨ç¤ºçŽ°åœ¨çº¦æŸæ‰€æœŸæœ›çš„ä½ç½®ä¹Ÿå°±æ˜¯å±…ä¸­ä½ç½®ï¼ŒActualè¡¨ç¤ºçŽ°åœ¨å®žé™…ä½ç½®ã€‚æ¯ä¸ªé—®é¢˜å³ä¾§æœ‰ä¸ªindicator iconï¼Œç‚¹å‡»å®ƒå‡ºçŽ°ä¸€ä¸ªå¼¹æ¡†ï¼Œé€‰æ‹©Update Frameç„¶åŽç‚¹å‡»Fix Misplacementï¼ŒæŒ‰é’®å›žåˆ°åŽŸæ¥ä¸­å¤®ä½ç½®ï¼›é€‰æ‹©Update constraintsè¡¨ç¤ºbuttonçš„ä½ç½®ä¸å˜ï¼Œæ›´æ–°åˆ°æœ€æ–°ä½ç½®çš„çº¦æŸã€‚ å®žé™…ä¸Šï¼Œç‚¹å‡»Auto Layoutå·¥å…·æ æœ€å³ä¾§çš„issueï¼Œä¹Ÿä¼šå‡ºçŽ°ç±»ä¼¼çš„åŠŸèƒ½ï¼š ä¸åŒè®¾å¤‡åŒæ—¶é¢„è§ˆXcodeæä¾›äº†ä¸€ä¸ªåŒæ—¶é¢„è§ˆä¸åŒè®¾å¤‡ä¸‹è§†å›¾çš„ç•Œé¢ã€‚æŒ‰ä½optionï¼Œç„¶åŽæŒ‰menu &gt; Preview(1) &gt; Main.storyboard (Preview)ï¼Œå°±èƒ½æ‰“å¼€ç”¨äºŽé¢„è§ˆçš„assistant editorã€‚ è¿™ä¸ªé¢„è§ˆçª—å£å¯ä»¥é¢„è§ˆç›®å‰æ‰€æœ‰iOSè®¾å¤‡ã€‚ æ·»åŠ ä¸€ä¸ªLabel æ·»åŠ ä¸€ä¸ªâ€Welcome to Auto Layoutâ€çš„æ ‡ç­¾åœ¨å³ä¸‹è§’ï¼Œå¹¶æ‰“å¼€é¢„è§ˆçª—å£æŸ¥çœ‹ï¼Œå‘çŽ°å‡ºæ¥é™¤äº†é»˜è®¤çš„iPhone 7ï¼Œå…¶ä»–è®¾å¤‡è¦ä¸åç¦»äº†ï¼Œè¦ä¸ä¸è§äº†ã€‚ ç”¨control+dragæ–¹æ³•æ¥æ·»åŠ spacing constraintã€‚æŒ‰ä½controlï¼Œä»Žlabelä¸Šå‘å³æ‹–åŠ¨ï¼Œæ‹–å‡ºlabelåˆ°è§†å›¾åŽæ¾å¼€ï¼Œå‡ºçŽ°å¼¹æ¡†ï¼Œé€‰æ‹© â€œTrailing space to container marginâ€ ï¼Œè¡¨ç¤ºè®¾ç½®å³è¾¹è·çš„çº¦æŸã€‚ ç±»ä¼¼2çš„æ–¹æ³•ï¼Œå‘ä¸‹æ‹–åŠ¨æ¾å¼€ï¼Œé€‰æ‹©å¼¹æ¡†ä¸­çš„â€Vertical Spacing to Bottom Layout Guideâ€ï¼Œè¡¨ç¤ºè®¾ç½®äº†ä¸‹è¾¹è·çº¦æŸã€‚æ‰€æœ‰çº¦æŸçº¿å˜æˆäº†è“è‰²å®žçº¿ï¼Œè“è‰²å®žçº¿è¡¨ç¤ºçº¦æŸæ­£å¸¸ã€‚ document outlineä¸Šåˆå‡ºçŽ°ä¸¤ä¸ªçº¦æŸï¼š æ­¤æ—¶å¦‚æžœç”¨é¢„è§ˆçª—å£æŸ¥çœ‹ï¼Œå‘çŽ°labelåœ¨ä¸åŒçš„è®¾å¤‡ä¸Šéƒ½åœ¨å³ä¸‹è§’äº†ï¼š ç¼–è¾‘çº¦æŸå‰é¢ä¹Ÿæåˆ°çº¦æŸæœ¬èº«å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹çš„ï¼Œé€‰æ‹©çº¦æŸï¼Œç„¶åŽåœ¨sizeæ£€æŸ¥å™¨ä¸­ä¿®æ”¹ã€‚é»˜è®¤labelçš„â€trailingMarginâ€çº¦æŸçš„constantå€¼æ˜¯0ï¼Œå¯ä»¥è¯•ç€ä¿®æ”¹ã€‚ ç»ƒä¹  æ·»åŠ æ–°çš„labelï¼Œä¿®æ”¹æ–‡æœ¬ä¸ºLearn Swift æŠŠå­—ä½“å¤§å°æ”¹ä¸º30 pointï¼Œè°ƒæ•´labelä¸ºé€‚å®œå¤§å° æ·»åŠ ä¸¤ä¸ªçº¦æŸ labelçš„ä¸Šè¾¹è·ä¸º40point labelæ°´å¹³å±…ä¸­ ä»£ç HelloWorldAutoLayoutHelloWorldAutoLayoutExercise è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 2 Hello Worldï¼ç¬¬ä¸€ä¸ªSwift APP]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-2.html</url>
    <content type="text"><![CDATA[â€œHello,Worldâ€å·²ç»æˆä¸ºç¼–ç¨‹ä¸–ç•Œé‡Œå¼€å§‹çš„æƒ¯ä¾‹ã€‚ å¼€å§‹ï¼šå…ˆåŠ¨èµ·æ¥ï¼Œå¿˜è®°ä»£ç  æ‰“å¼€Xcodeï¼Œé€‰æ‹©â€Create a new Xcode projectâ€ é€‰æ‹© iOS &gt; Single View Application and click Next å¡«å†™é¡¹ç›®çš„ä¸€äº›é€‰é¡¹: Product Name: HelloWorld - appçš„åå­— Team - Apple ID Organization Name: andyron - è¿™ä¸€èˆ¬æ˜¯ç»„ç»‡çš„åå­—ï¼Œæˆ–ä¸ªäººç”¨æˆ·çš„åå­—ï¼›å°½é‡ä¿æŒä¸ä¸Žåˆ«äººé‡å¤ Organization Identifier: cn.andyron Bundle Identifier: com.andyron.HelloWorld - æ ¹æ®Organization Identifierå’ŒProduct Nameè‡ªåŠ¨ç»„åˆè€Œæˆ Language: Swift Devices: iPhone Use Core Data: [unchecked] Include Unit Tests: [unchecked] Include UI Tests: [unchecked] é€‰æ‹©ä¸€ä¸ªé¡¹ç›®ä¿æŒä½ç½®ï¼Œç„¶åŽç”Ÿæˆé¡¹ç›® ç†Ÿæ‚‰Xcodeç•Œé¢Xcode Helpä¸­è¯¦ç»†ä»‹ç»äº†Xcodeï¼Œä¸»ç•Œé¢å¦‚ä¸‹ï¼š ä¸»è¦åˆ†å…­ä¸ªåŒºåŸŸï¼š Toolbar(å·¥å…·æ ) Tab bar(ä¾¿ç­¾é¡µæ )ï¼šç±»ä¼¼æµè§ˆå™¨çš„æ ‡ç­¾é¡µï¼Œå¿«æ·é”®ä¹Ÿå’Œå¤§éƒ¨åˆ†è½¯ä»¶çš„ç›¸åŒ(âŒ˜+Tæ–°å»ºï¼ŒâŒ˜+Wå…³é—­)ï¼Œå•ä¸ªæ ‡ç­¾é¡µæ—¶æ˜¯éšè—çš„ Navigator area(å¯¼èˆªåŒºåŸŸ)è¿™ä¸ªåŒºåŸŸæœ€ä¸Šé¢æœ‰å…«ä¸ªå›¾æ ‡ï¼ˆå¿«æ·é”®åˆ†åˆ«å¯¹åº”âŒ˜+1 ~ âŒ˜+8ï¼‰ï¼š project navigator(æºä»£ç æ–‡ä»¶ã€å›¾ç‰‡æ–‡ä»¶ã€æ•°æ®æ¨¡åž‹ã€å±žæ€§åˆ—è¡¨ç­‰) symbol navigator(ç¼–è¯‘å™¨èƒ½è¯†åˆ«çš„ï¼šOCç±»ã€æžšä¸¾ç±»åž‹ã€ç»“æž„ä½“ã€å…¨å±€å˜é‡) find navigator issues navigator test navigator debug navigator breakpoint navigator log navigator Editor areaï¼ˆç¼–è¾‘åŒºï¼‰è¿™ä¸ªåŒºåŸŸæœ€ä¸Šé¢æ˜¯jump bar(è·³è½¬æ ) Debug area Utilities areaï¼ˆå®žç”¨å·¥å…·é¢æ¿ï¼‰åˆ†ä¸Šä¸‹ä¸¤å—ï¼š Inspector pane(æ£€æŸ¥å™¨)ï¼šé€‰æ‹©ä¸åŒæ–‡ä»¶ä¼šæœ‰ä¸åŒä¸ªæ•°çš„æ£€æŸ¥å™¨ï¼Œæœ€å¤šå…­ä¸ª(å¿«æ·é”®åˆ†åˆ«å¯¹åº”âŒ˜+option+1 ~ âŒ˜+option+6)ã€‚ Library pane(åº“é¢ç‰ˆ, å¿«æ·é”®åˆ†åˆ«å¯¹åº”âŒ˜+option+control+1 ~ âŒ˜+option+control+4) æ–‡ä»¶åº“æ¨¡æ¿(File Template Library) : ç®¡ç†æ–‡ä»¶æ¨¡æ¿, å¯ä»¥å¿«é€Ÿåˆ›å»ºæŒ‡å®šç±»åž‹æ–‡ä»¶, å¯ä»¥ç›´æŽ¥æ‹–å…¥é¡¹ç›®ä¸­; ä»£ç ç‰‡æ®µåº“(Code Snippet Library) : ç®¡ç†å„ç§ä»£ç ç‰‡æ®µ, å¯ä»¥ç›´æŽ¥æ‹–å…¥æºä»£ç ä¸­; å¯¹è±¡åº“(Object Library) : ç•Œé¢ç»„ä»¶, å¯ä»¥ç›´æŽ¥æ‹–å…¥ æ•…äº‹æ¿ä¸­; åª’ä½“åº“(Media Library) : ç®¡ç†å„ç§ å›¾ç‰‡, éŸ³é¢‘ ç­‰å¤šåª’ä½“èµ„æº; ç¬¬ä¸€æ¬¡è¿è¡ŒAppRunå’ŒStopåˆ†åˆ«å¯¹åº” âŒ˜+Rå’ŒâŒ˜+.ï¼ŒSimulatorç”¨äºŽé€‰æ‹©æ¨¡æ‹Ÿå™¨æˆ–çœŸå®žè®¾å¤‡ å¿«é€Ÿäº†è§£Interface Builderï¼ˆIBï¼‰åœ¨project navigatorä¸­é€‰æ‹©main.storyboardThe Interface Builder editorä¸ºåˆ›é€ å’Œè®¾è®¡appçš„UIæé«˜äº†ä¸€ä¸ªå¯è§†åŒ–çš„æ–¹æ³•ã€‚åœ¨è¿™é‡Œæ—¢å¯ä»¥è®¾è®¡å•ä¸ªé¡µé¢ï¼Œä¹Ÿå¯ä»¥è®¾è®¡å¤šä¸ªé¡µé¢ã€‚å¯ä»¥ç›´æŽ¥ä»Žå³ä¸‹è§’Object libraryæ‹–åŠ¨å¯ç”¨å¯¹è±¡åˆ°IBä¸­ã€‚å½“å¼€å§‹æ–°å»ºé¡¹ç›®ï¼Œé€‰æ‹©äº†Single View Applicationæ¨¡æ¿æ—¶ï¼ŒXcodeé»˜è®¤åœ¨storyboardä¸­ç”Ÿæˆä¸€ä¸ªview controller sceneï¼Œå¯¹åº”ä¸€ä¸ªview controllerã€‚é€šå¸¸appçš„æ¯ä¸€ä¸ªscreenä»£è¡¨ä¸€ä¸ªview controllerã€‚The Document Outline viewåœ¨é€‰æ‹©storyboardç‰¹å®šå¯¹è±¡æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚ è®¾è®¡UI æ‹–åŠ¨ä¸€ä¸ªButtonåˆ°IBä¸­ åŒå‡»Buttonæˆ–åœ¨å±žæ€§æ£€æŸ¥å™¨ä¸­ä¿®æ”¹nameä¸ºâ€Hello World** æ ¹æ®è“è‰²è™šçº¿è¾…åŠ©çº¿å¯ä»¥æŠŠButtonæ‹–åˆ°ä¸­å¿ƒä½ç½® å†™ä»£ç  é€‰æ‹©main.storyboardï¼Œç‚¹å‡»å·¥å…·æ å³ä¾§çš„Assistant editor(option+âŒ˜+return)ï¼Œç¼–è¾‘åŒºå‡ºçŽ°ä¸¤éƒ¨åˆ†ï¼ŒCtrlæ‹–åŠ¨æŒ‰é’®åˆ°å³ä¾§ViewControllerç±»ä¸­ï¼š ç„¶åŽå†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š1234567@IBAction func showMessage() &#123; let alertController = UIAlertController(title: &quot;Welcome to My First App&quot;,message: &quot;Hello World&quot;, preferredStyle: UIAlertControllerStyle.alert) alertController.addAction(UIAlertAction(title: &quot;OK&quot;, style:UIAlertActionStyle.default, handler: nil)) present(alertController, animated: true, completion: nil)&#125; ä¸Šé¢çš„æ–¹æ³•æ˜¯å…ˆè¿žæŽ¥å…³ç³»ï¼Œç„¶åŽå†™ä»£ç ï¼›ä¹Ÿå¯ä»¥å…ˆå†™å¥½ä»£ç ï¼Œç„¶åŽå»ºç«‹å…³ç³»ï¼š@IBActionè¡¨ç¤ºä¸€ä¸ªActionçš„æ ‡è¯†ç¬¦ï¼Œæ²¡æœ‰ç‰¹æ®Šæ„ä¹‰ï¼Œå½“å»ºç«‹å¥½å…³ç³»åŽï¼Œ@IBActionå³ä¾§ä¼šå‡ºçŽ°ä¸€ä¸ªå®žå¿ƒçš„ç‚¹ï¼Œç‚¹å‡»ä¼šå‡ºçŽ°ä¼šå‡ºçŽ°ä»¥ä¸ªå¼¹æ¡†è¡¨ç¤ºè¿žæŽ¥çš„åœ°æ–¹ï¼š ä¿®æ”¹æŒ‰é’®çš„é¢œè‰²ã€‚é€‰ä¸­æŒ‰é’®ï¼Œåœ¨å±žæ€§æ£€æŸ¥å™¨ä¸­ä¿®æ”¹å¯¹åº”å±žæ€§ æµ‹è¯•åº”ç”¨é€‰æ‹©ç‰¹å®šçš„æ¨¡æ‹Ÿå™¨æˆ–è®¾å¤‡ï¼ŒâŒ˜+R Hello world åº”ç”¨ä¸­äº‹ä»¶æµ æ›´è¿‘ä¸€æ­¥ åŒä¸Šçš„æ–¹æ³•æ·»åŠ å‡ ä¸ªæŒ‰é’®ï¼Œå¹¶ä¿®æ”¹buttonçš„nameä¸ºä¸€äº›emojiè¡¨æƒ…ï¼ˆcontrol+âŒ˜+spaceï¼‰ æ·»åŠ @IBActionæ–¹æ³•ä»£ç  é€šè¿‡å…ˆå†™å¥½ä»£ç ç„¶åŽå»ºç«‹å…³ç³»çš„æ–¹æ³•ï¼ŒæŠŠå‡ ä¸ªbuttonéƒ½ä¸ŽåŒä¸€ä¸ª@IBActionæ–¹æ³•å»ºç«‹å…³ç³» ä»£ç HelloWorldHelloWordExercise è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
</search>