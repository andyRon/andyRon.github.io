<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ä¸ºåšå®¢æ·»åŠ Disqusè¯„è®ºç³»ç»Ÿ]]></title>
    <url>%2F2018%2Fcomment-disqus.html</url>
    <content type="text"><![CDATA[ç»™åšå®¢æ·»åŠ ä¸€ä¸ªè¯„è®ºç³»ç»Ÿï¼Œè€ƒè™‘äº†å¥½å‡ ä¸ªï¼Œä½†æœ€ç»ˆè¿˜æ˜¯é€‰æ‹©äº†Disqusï¼Œè€ƒè™‘ä¸€ä¸‹å‡ ç‚¹ï¼š ä¹‹å‰éžå¸¸å—æ¬¢è¿Žçš„å¤šè¯´ï¼ŒæŸåŽŸå› å…³é—­äº†ï¼ŒçŽ°åœ¨å›½å†…ä¹Ÿæœ‰éžå¸¸å¤šå¥½çš„è¯„è®ºç³»ç»Ÿï¼Œä½†å°±æ˜¯æ‹…å¿ƒåˆå‡ºçŽ°æŸåŽŸå› å…³é—­ï¼Œé‚£å°±éº»çƒ¦äº† Disquså”¯ä¸€çš„é—®é¢˜å°±æ˜¯åœ¨å¢™å¤–ï¼Œæˆ‘è€ƒè™‘ä¸€ä¸‹ï¼Œè®¿é—®æˆ‘åšå®¢åæœ‰å…«ä¹éƒ½æ˜¯åšæŠ€æœ¯çš„ï¼Œæ¢¯å­è‚¯å®šæ˜¯å¤šçš„æ˜¯ï¼ŒðŸ˜€ Disqusæ·»åŠ ä¹Ÿéžå¸¸æ–¹ä¾¿ã€‚ æ³¨å†ŒDisqusåˆ°Disqusï¼Œæ³¨å†Œä¸€ä¸ªè´¦å· I want to install Disqus on my siteå°±æ˜¯çŽ°åœ¨Disqusåšä¸ªç«™ç‚¹çš„æ ‡è®°ã€‚ è¿™è¾¹çš„Shortnameæ¯”è¾ƒé‡è¦ï¼Œä¹‹åŽå†hexo-nextä¸­é…ç½®å°±æ˜¯ç”¨è¿™ä¸ªShortnameï¼Œéœ€è¦ä¸é‡å¤ã€‚ ä¸‹é¢çš„ä¿¡æ¯å°±æŒ‰ç…§è§„åˆ™å¡«å°±æ˜¯äº†ã€‚ å¡«å†™é…ç½®æ–‡ä»¶åœ¨next/_config.ymlä¸­æ·»åŠ æˆ–ä¿®æ”¹ï¼Œå¦‚ä¸‹ï¼š12345# Disqusdisqus: enable: true shortname: http-andyron-com count: true æ›´æ–°ä¸€ä¸‹ç³»ç»Ÿ123hexo cleanhexo ghexo d çŽ°åœ¨åœ¨æ–‡ç« åº•éƒ¨å°±å‡ºçŽ°è¯„è®ºç³»ç»Ÿäº†ã€‚ DisqusåˆšåˆšæŽ¨å‡ºäº† Reactionsï¼Œå¯ä»¥åœ¨åŽå°é…ç½®ã€‚]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>Disqus</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç”¨LeanCloundç»™hexo+nextåšå®¢æ·»åŠ æ–‡ç« é˜…è¯»æ•°]]></title>
    <url>%2F2018%2Fleanclound-hexo-next.html</url>
    <content type="text"><![CDATA[ä¸ªäººåšå®¢ä¹‹å‰ç”¨çš„NexT æ¡†æž¶ä»‹ç» ä¸è’œå­ç»Ÿè®¡ æ¥ç»Ÿè®¡æ–‡ç« é˜…è¯»æ•°ã€ç½‘ç«™è®¿é—®äººæ•°å’Œç½‘ç«™è®¿é—®æ€»æ•°ã€‚ä½†æ˜¯æ€»æ˜¯å‘çŽ°æ–‡ç« é˜…è¯»æ•°è€æ˜¯å‡ºçŽ°é—®é¢˜ï¼Œå› æ­¤æŠŠæ–‡ç« é˜…è¯»æ•°æ¢æˆç”¨LeanCloudæ¥ç»Ÿè®¡ï¼Œçœ‹èµ·æ¥ä¹Ÿæ–¹ä¾¿ã€‚LeanCloudçš„å…è´¹çš„å¼€å‘ç‰ˆå®Œå…¨æ»¡è¶³äº†æˆ‘åšå®¢è¿™ç§å°ç½‘ç«™çš„éœ€æ±‚äº†ã€‚é…ç½®èµ·æ¥ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œä¸‹é¢åšä¸ªè®°å½•ï¼š æ³¨å†ŒLeanCloundè´¦å·è¿™ä¸ªå¾ˆæ–¹ä¾¿ï¼Œå¾®åšï¼ŒGitHubéƒ½å¯ä»¥ç›´æŽ¥å…³è”æ³¨å†Œï¼Œæˆ–è€…ç›´æŽ¥ç”¨é‚®ç®±æ³¨å†Œã€‚ åˆ›å»ºåº”ç”¨æ¯”å¦‚æˆ‘åˆ›å»ºä¸€ä¸ªåä¸ºandyron.com.counterçš„åº”ç”¨ã€‚ èŽ·å–APP IDï¼ŒAPP Keyï¼Œä¹‹åŽå†é…ç½®æ–‡ä»¶ä¸­é…ç½®ã€‚ åˆ›å»ºClass åœ¨åº”ç”¨çš„æ•°æ®é…ç½®ç•Œé¢ï¼Œå·¦ä¾§ä¸‹åˆ’çº¿å¼€å¤´çš„éƒ½æ˜¯ç³»ç»Ÿé¢„å®šä¹‰å¥½çš„è¡¨ï¼Œä¸ºäº†ä¾¿äºŽåŒºåˆ†æˆ‘ä»¬æ–°å»ºä¸€å¼ è¡¨æ¥ä¿å­˜æˆ‘ä»¬çš„æ•°æ®ã€‚æ–°å»ºClassç”¨æ¥ä¸“é—¨ä¿å­˜æˆ‘ä»¬åšå®¢çš„æ–‡ç« è®¿é—®é‡ç­‰æ•°æ®ï¼Œç†è®ºä¸Šæ¥è¯´åå­—å¯ä»¥éšæ„å–åï¼Œåªè¦ä½ äº¤äº’ä»£ç åšç›¸åº”çš„æ›´æ”¹å³å¯ï¼Œä½†æ˜¯ä¸ºäº†ä¿è¯å¯¹NexTä¸»é¢˜çš„ä¿®æ”¹å…¼å®¹ï¼Œæ­¤å¤„çš„æ–°å»ºClassåå­—å¿…é¡»ä¸ºCounter: æ·»åŠ å®‰å…¨åŸŸåæ·»åŠ å®‰å…¨åŸŸååŽï¼Œåªæœ‰è¿™äº›å®‰å…¨åŸŸåæ‰æœ‰æƒè®¿é—®åŽå°çš„æ•°æ®äº†ï¼Œå¯ä»¥è¿›ä¸€æ­¥æå‡å®‰å…¨æ€§ã€‚ ä¿®æ”¹ä¸€ä¸‹ä¸»é¢˜é…ç½®æ–‡ä»¶ä¿®æ”¹é…ç½®æ–‡ä»¶next/_config.yml12345678910111213141516171819202122leancloud_visitors: enable: true app_id: #ä½ çš„app_id app_key: #ä½ çš„çš„app_key# Show PV/UV of the website/page with busuanzi. ä¸è’œå­ç»Ÿè®¡# Get more information on http://ibruce.info/2015/04/04/busuanzi/busuanzi_count: # count values only if the other configs are false enable: true # custom uv span for the whole site site_uv: true site_uv_header: &lt;i class=&quot;fa fa-user&quot;&gt;&lt;/i&gt; è®¿é—®äººæ•° site_uv_footer: äººæ¬¡ # # custom pv span for the whole site site_pv: true site_pv_header: &lt;i class=&quot;fa fa-eye&quot;&gt;&lt;/i&gt; æ€»è®¿é—®é‡ site_pv_footer: æ¬¡ # custom pv span for one page only page_pv: false page_pv_header: &lt;i class=&quot;fa fa-file-o&quot;&gt;&lt;/i&gt; é˜…è¯» page_pv_footer: æ¬¡ æ›´æ–°ä¸€ä¸‹ç³»ç»Ÿ123hexo cleanhexo ghexo d æœ€æ–°çš„NexTæ¡†æž¶å·²ç»ä¸éœ€è¦å†é…ç½®æ ·å¼ï¼Œå¯ä»¥çœ‹åˆ° åœ¨LeanCloudä¸­ä¹Ÿå¯ä»¥æŸ¥çœ‹æ•°æ®äº†ï¼š æ³¨ï¼šobjetcIdè¿™ä¸ªä¸»é”®æ˜¯ç”±æ—¥æœŸå’Œåšæ–‡æ ‡é¢˜ç»„åˆæˆçš„ï¼Œå› æ­¤æ ‡é¢˜å˜åŒ–ï¼Œé˜…è¯»ä¼šé‡æ–°è®¡æ•° å‚è€ƒï¼š ä¸ºNexTä¸»é¢˜æ·»åŠ æ–‡ç« é˜…è¯»é‡ç»Ÿè®¡åŠŸèƒ½ä½¿ç”¨leancloudç»™åšå®¢æ·»åŠ é˜…è¯»æ¬¡æ•°]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>LeanClound</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºŽiOSå¤šçº¿ç¨‹ï¼Œè¿™è¾¹å‹‰å¼ºå¯ä»¥çœ‹çœ‹(OC&Swift)]]></title>
    <url>%2F2018%2Fios-multithreading.html</url>
    <content type="text"><![CDATA[iOSå¼€å‘å¤šçº¿ç¨‹æ€»æ˜¯ç»•ä¸è¿‡çš„åŽï¼Œçœ‹äº†å¾ˆå¤šå‰è¾ˆä»¬ä¼˜ç§€çš„æ–‡ç« ï¼Œå¦‚ï¼šå…³äºŽiOSå¤šçº¿ç¨‹ï¼Œæˆ‘è¯´ï¼Œä½ å¬ï¼Œæ²¡å‡†ä½ å°±æ‡‚äº†ï¼ã€è°ˆiOSå¤šçº¿ç¨‹(NSThreadã€NSOperationã€GCD)ç¼–ç¨‹ã€iOSå¤šçº¿ç¨‹ï¼šã€ŽGCDã€è¯¦å°½æ€»ç»“ã€iOSå¤šçº¿ç¨‹ï¼šã€Žpthreadã€NSThreadã€è¯¦å°½æ€»ç»“ã€iOSå¤šçº¿ç¨‹ï¼šã€ŽNSOperationã€NSOperationQueueã€è¯¦å°½æ€»ç»“ã€å…³äºŽiOSå¤šçº¿ç¨‹ï¼Œä½ çœ‹æˆ‘å°±å¤Ÿäº†ç­‰ï¼Œä½†ä¸è‡ªå·±æ•´ç†ä¸€ä¸‹ï¼Œæ•²ä¸€ä¸‹ä»£ç æ€»æ˜¯æ„Ÿè§‰ä¸æ·±åˆ» ï¼ŒäºŽæ˜¯å°±æœ‰è¿™ç¯‡æ–‡ç« ï¼Œæ–­æ–­ç»­ç»­æ•´ç†äº†å¥½ä¹…ã€‚ ç¤ºä¾‹æˆ‘å°½é‡æŠŠä¸åŒçŸ¥è¯†ç‚¹ä»£ç ç‹¬ç«‹å¼€ï¼Œçœ‹ç€ç®€å•ä¸€äº›ï¼Œå®¹æ˜“ç†è§£ã€‚ç¤ºä¾‹ä»£ç æˆ‘éƒ½ç”¨OCå’ŒSwiftåˆ†åˆ«å†™äº†ï¼Œä¸è¿‡æ–‡ä¸­éƒ½æ˜¯ä»¥OCè¯´æ˜Žçš„ï¼Œè‹±æ–‡å¦‚æžœç”¨ä¸¤ç§è¯­è¨€ä¸€èµ·ï¼Œçœ‹èµ·æ¥å¯èƒ½æ¯”è¾ƒä¹±ï¼Œæ–‡ç« ä¹Ÿä¼šæ›´åŠ é•¿ï¼ˆå·²ç»éžå¸¸é•¿äº†ðŸ˜‚ðŸ˜‚ï¼‰ã€‚Swiftå†™æ³•å¯èƒ½æœ‰æ¯”è¾ƒå¤§åŒºåˆ«ï¼Œä¹Ÿæœ‰äº›åŠŸèƒ½å–æ¶ˆï¼Œä½†çœ‹ä¸€ä¸‹ä»£ç åº”è¯¥èƒ½æ˜Žç™½äº†ã€‚æ–‡ä¸­çš„æ‰€æœ‰ç¤ºä¾‹ä»£ç ï¼šandyRon/iOS-Multithreading å…ˆçœ‹ä¸ªå¤§æ¦‚ï¼š 1 ç®€ä»‹1.1 ä¸€äº›æ¦‚å¿µ ç³»ç»Ÿä¸­æ­£åœ¨è¿è¡Œçš„æ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºéƒ½æ˜¯ä¸€ä¸ª è¿›ç¨‹(Process) ï¼Œæ¯ä¸ªè¿›ç¨‹ç³»ç»Ÿéƒ½ä¼šåˆ†é…ç»™å®ƒç‹¬ç«‹çš„å†…å­˜è¿è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨iOSç³»ç»Ÿä¸­ä¸­ï¼Œæ¯ä¸€ä¸ªåº”ç”¨éƒ½æ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚ ä¸€ä¸ªè¿›ç¨‹çš„æ‰€æœ‰ä»»åŠ¡éƒ½åœ¨ çº¿ç¨‹(Thread) ä¸­è¿›è¡Œï¼Œå› æ­¤æ¯ä¸ªè¿›ç¨‹è‡³å°‘è¦æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯ä¸»çº¿ç¨‹ã€‚é‚£å¤šçº¿ç¨‹å…¶å®žå°±æ˜¯ä¸€ä¸ªè¿›ç¨‹å¼€å¯å¤šæ¡çº¿ç¨‹ï¼Œè®©æ‰€æœ‰ä»»åŠ¡å¹¶å‘æ‰§è¡Œã€‚ iOS Appä¸€æ—¦è¿è¡Œï¼Œé»˜è®¤å°±ä¼šå¼€å¯ä¸€æ¡çº¿ç¨‹ã€‚è¿™æ¡çº¿ç¨‹ï¼Œé€šå¸¸ç§°ä½œä¸ºâ€œä¸»çº¿ç¨‹â€ã€‚åœ¨iOSåº”ç”¨ä¸­ä¸»çº¿ç¨‹çš„ä½œç”¨ä¸€èˆ¬æ˜¯ï¼šåˆ·æ–°UIï¼›å¤„ç†UIäº‹ä»¶ï¼Œä¾‹å¦‚ç‚¹å‡»ã€æ»šåŠ¨ã€æ‹–æ‹½ã€‚ å¦‚æžœä¸»çº¿ç¨‹çš„æ“ä½œå¤ªå¤šã€å¤ªè€—æ—¶ï¼Œå°±ä¼šé€ æˆAppå¡é¡¿çŽ°è±¡ä¸¥é‡ã€‚æ‰€ä»¥ï¼Œé€šå¸¸æˆ‘ä»¬éƒ½ä¼šæŠŠè€—æ—¶çš„æ“ä½œæ”¾åœ¨å­çº¿ç¨‹ä¸­è¿›è¡Œï¼ŒèŽ·å–åˆ°ç»“æžœä¹‹åŽï¼Œå›žåˆ°ä¸»çº¿ç¨‹åŽ»åˆ·æ–°UIã€‚ å¤šçº¿ç¨‹åœ¨ä¸€å®šæ„ä¹‰ä¸Šå®žçŽ°äº†è¿›ç¨‹å†…çš„èµ„æºå…±äº«ï¼Œä»¥åŠæ•ˆçŽ‡çš„æå‡ã€‚åŒæ—¶ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šç›¸å¯¹ç‹¬ç«‹ï¼Œå®ƒæ˜¯ç¨‹åºæ‰§è¡Œæµçš„æœ€å°å•å…ƒï¼Œæ˜¯è¿›ç¨‹ä¸­çš„ä¸€ä¸ªå®žä½“ï¼Œæ˜¯æ‰§è¡Œç¨‹åºæœ€åŸºæœ¬çš„å•å…ƒï¼Œæœ‰è‡ªå·±æ ˆå’Œå¯„å­˜å™¨ã€‚ åŒæ­¥ï¼š åªèƒ½åœ¨å½“å‰çº¿ç¨‹æŒ‰å…ˆåŽé¡ºåºä¾æ¬¡æ‰§è¡Œï¼Œä¸å¼€å¯æ–°çº¿ç¨‹ã€‚ å¼‚æ­¥ï¼š å¯ä»¥åœ¨å½“å‰çº¿ç¨‹å¼€å¯å¤šä¸ªæ–°çº¿ç¨‹æ‰§è¡Œï¼Œå¯ä¸æŒ‰é¡ºåºæ‰§è¡Œã€‚ é˜Ÿåˆ—ï¼š è£…è½½çº¿ç¨‹ä»»åŠ¡çš„é˜Ÿå½¢ç»“æž„ã€‚ å¹¶å‘ï¼š çº¿ç¨‹æ‰§è¡Œå¯ä»¥åŒæ—¶ä¸€èµ·è¿›è¡Œæ‰§è¡Œã€‚ ä¸²è¡Œï¼š çº¿ç¨‹æ‰§è¡Œåªèƒ½ä¾æ¬¡é€ä¸€å…ˆåŽæœ‰åºçš„æ‰§è¡Œã€‚ é€šè¿‡ç¡®ä¿ä¸»çº¿ç¨‹è‡ªç”±å“åº”ç”¨æˆ·äº‹ä»¶ï¼Œå¹¶å‘å¯ä»¥å¾ˆå¥½åœ°æé«˜åº”ç”¨çš„å“åº”æ€§ã€‚é€šè¿‡å°†å·¥ä½œåˆ†é…åˆ°å¤šæ ¸ï¼Œè¿˜èƒ½æé«˜åº”ç”¨å¤„ç†çš„æ€§èƒ½ã€‚ä½†æ˜¯å¹¶å‘ä¹Ÿå¸¦æ¥ä¸€å®šçš„é¢å¤–å¼€é”€(è°ƒåº¦)ï¼Œå¹¶ä¸”ä½¿ä»£ç æ›´åŠ å¤æ‚ï¼Œæ›´éš¾ç¼–å†™å’Œè°ƒè¯•ã€‚ 1.2 å¤šçº¿ç¨‹æ¦‚å¿µè¡¥å…… å¤šçº¿ç¨‹çš„åŽŸç†ï¼š åŒä¸€æ—¶é—´ï¼ŒCPUåªèƒ½å¤„ç†ä¸€æ¡çº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯åªæœ‰ä¸€æ¡çº¿ç¨‹åœ¨å·¥ä½œã€‚æ‰€è°“å¤šçº¿ç¨‹å¹¶å‘(åŒæ—¶)æ‰§è¡Œï¼Œå…¶å®žæ˜¯CPUå¿«é€Ÿçš„åœ¨å¤šçº¿ç¨‹ä¹‹é—´è°ƒåº¦(åˆ‡æ¢)ã€‚å¦‚æžœCPUè°ƒåº¦çº¿ç¨‹çš„æ—¶é—´è¶³å¤Ÿå¿«ï¼Œå°±é€ æˆäº†å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„å‡è±¡ã€‚ åœ¨å®žé™…é¡¹ç›®å¼€å‘ä¸­å¹¶ä¸æ˜¯çº¿ç¨‹è¶Šå¤šè¶Šå¥½ï¼Œå¦‚æžœå¼€äº†å¤§é‡çš„çº¿ç¨‹ï¼Œä¼šæ¶ˆè€—å¤§é‡çš„CPUèµ„æºï¼ŒCPUä¼šè¢«ç´¯æ­»ï¼Œæ‰€ä»¥ä¸€èˆ¬æ‰‹æœºåªå¼€1~3ä¸ªçº¿ç¨‹ä¸ºå®œï¼Œä¸è¶…è¿‡5ä¸ªã€‚ å¤šçº¿ç¨‹çš„ä¼˜ç‚¹ï¼š èƒ½é€‚å½“æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆçŽ‡èƒ½é€‚å½“æé«˜èµ„æºçš„åˆ©ç”¨çŽ‡ï¼Œè¿™ä¸ªåˆ©ç”¨çŽ‡è¡¨çŽ°åœ¨(CPUï¼Œå†…å­˜çš„åˆ©ç”¨çŽ‡) å¤šçº¿ç¨‹çš„ç¼ºç‚¹ï¼š å¼€å¯çº¿ç¨‹éœ€è¦å ç”¨ä¸€å®šçš„å†…å­˜ç©ºé—´(é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸»çº¿ç¨‹å ç”¨1Mï¼Œå­çº¿ç¨‹å ç”¨512KBï¼Œå¦‚æžœå¼€å¯å¤§é‡çš„çº¿ç¨‹ï¼Œä¼šå ç”¨å¤§é‡çš„å†…å­˜ç©ºé—´ï¼Œé™ä½Žç¨‹åºçš„æ€§èƒ½) çº¿ç¨‹è¶Šå¤šï¼ŒCPUåœ¨è°ƒåº¦çº¿ç¨‹ä¸Šçš„å¼€é”€å°±è¶Šå¤§ çº¿ç¨‹è¶Šå¤šï¼Œç¨‹åºè®¾è®¡å°±è¶Šå¤æ‚ï¼Œæ¯”å¦‚çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œå¤šçº¿ç¨‹çš„æ•°æ®å…±äº«ï¼Œè¿™äº›éƒ½éœ€è¦ç¨‹åºçš„å¤„ç†ï¼Œå¢žåŠ äº†ç¨‹åºçš„å¤æ‚åº¦ã€‚ åœ¨iOSå¼€å‘ä¸­ä½¿ç”¨çº¿ç¨‹çš„æ³¨æ„äº‹é¡¹ï¼š åˆ«å°†æ¯”è¾ƒè€—æ—¶çš„æ“ä½œæ”¾åœ¨ä¸»çº¿ç¨‹ä¸­ è€—æ—¶æ“ä½œä¼šå¡ä½ä¸»çº¿ç¨‹ï¼Œä¸¥é‡å½±å“UIçš„æµç•…åº¦ï¼Œç»™ç”¨æˆ·ä¸€ç§â€œå¡â€çš„åä½“éªŒ 2 å››ç§è§£å†³æ–¹æ¡ˆå¯¹æ¯” ç›®å‰iOSå¤šçº¿ç¨‹æœ‰å››ç§æ–¹æ³•ï¼špthreadï¼ŒNSThreadï¼ŒGCDï¼Œ NSOperationï¼Œå››ç§æ–¹æ¡ˆçš„ç®€å•å¯¹æ¯”ä¸€ä¸‹ã€‚ ç”±äºŽpthreadå¹³å¸¸å‡ ä¹Žç”¨ä¸åˆ°ï¼Œæˆ‘æš‚æ—¶å°±ä¸å­¦äº†ã€‚ æ¯ä¸ªNSThreadå¯¹è±¡å¯¹åº”ä¸€ä¸ªçº¿ç¨‹ï¼ŒçœŸæ­£æœ€åŽŸå§‹çš„çº¿ç¨‹ï¼Œç›¸å¯¹ç®€å•ï¼Œä½†æ˜¯éœ€è¦æ‰‹åŠ¨ç®¡ç†æ‰€æœ‰çš„çº¿ç¨‹æ´»åŠ¨ï¼Œå¦‚ç”Ÿå‘½å‘¨æœŸã€çº¿ç¨‹åŒæ­¥ã€ç¡çœ ç­‰ã€‚ æ€Žä¹ˆé€‰æ‹©ï¼Ÿç®€å•è€Œå®‰å…¨çš„é€‰æ‹©NSOperationå®žçŽ°å¤šçº¿ç¨‹å³å¯ã€‚å¤„ç†å¤§é‡å¹¶å‘æ•°æ®ï¼Œåˆè¿½æ±‚æ€§èƒ½æ•ˆçŽ‡çš„é€‰æ‹©GCDã€‚ 3 NSTreadç”Ÿå‘½å‘¨æœŸè¿˜æ˜¯éœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨ç®¡ç†ï¼Œæ‰€ä»¥è¿™å¥—æ–¹æ¡ˆä¹Ÿæ˜¯å¶å°”ç”¨ç”¨ã€‚ 3.1 NSThreadä¸‰ç§çº¿ç¨‹å¼€å¯æ–¹å¼ åŠ¨æ€å¼€å¯ 12NSThread *thread1 = [[NSThread alloc] initWithTarget:self selector:@selector(doSomething1:) object:(@&quot;NSThread1&quot;)];[thread1 start]; é™æ€å¼€å¯ 12// åˆ›å»ºå¥½ä¹‹åŽç›´æŽ¥å¯åŠ¨[NSThread detachNewThreadSelector:@selector(doSomething2:) toTarget:self withObject:(@&quot;NSTread2&quot;)]; éšå¼å¼€å¯ 12// åˆ›å»ºå¥½ä¹‹åŽä¹Ÿæ˜¯ç›´æŽ¥å¯åŠ¨[self performSelectorInBackground:@selector(doSomething3:) withObject:(@&quot;NSTread3&quot;)]; 3.2 NSThreadæ‹“å±• èŽ·å–å½“å‰çº¿ç¨‹ 1NSThread *current = [NSThread currentThread]; èŽ·å–ä¸»çº¿ç¨‹ 1NSThread *main = [NSThread mainThread]; æš‚åœå½“å‰çº¿ç¨‹ä¸€æ®µæ—¶é—´ 1[NSThread sleepForTimeInterval:2]; æš‚åœå½“å‰çº¿ç¨‹åˆ°æŸä¸ªæ—¶é—´ 1[NSThread sleepUntilDate: date]; çº¿ç¨‹ä¹‹é—´é€šä¿¡ 123456//åœ¨æŒ‡å®šçº¿ç¨‹ä¸Šæ‰§è¡Œæ“ä½œ[self performSelector:@selector(run) onThread:thread withObject:nil waitUntilDone:YES]; //åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œæ“ä½œ[self performSelectorOnMainThread:@selector(run) withObject:nil waitUntilDone:YES]; //åœ¨å½“å‰çº¿ç¨‹æ‰§è¡Œæ“ä½œ[self performSelector:@selector(run) withObject:nil]; 4. GCD GCDä¸ºGrand Central Dispatchçš„ç¼©å†™ã€‚Grand Central Dispatch (GCD)æ˜¯Appleå¼€å‘çš„ä¸€ä¸ªå¤šæ ¸ç¼–ç¨‹çš„è¾ƒæ–°çš„è§£å†³æ–¹æ³•ã€‚å®ƒä¸»è¦ç”¨äºŽä¼˜åŒ–åº”ç”¨ç¨‹åºä»¥æ”¯æŒå¤šæ ¸å¤„ç†å™¨ä»¥åŠå…¶ä»–å¯¹ç§°å¤šå¤„ç†ç³»ç»Ÿã€‚ 4.1 GCDçš„ä¼˜ç‚¹ GCD å¯ç”¨äºŽå¤šæ ¸çš„å¹¶è¡Œè¿ç®— GCD ä¼šè‡ªåŠ¨åˆ©ç”¨æ›´å¤šçš„ CPU å†…æ ¸ï¼ˆæ¯”å¦‚åŒæ ¸ã€å››æ ¸ï¼‰ GCD ä¼šè‡ªåŠ¨ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼ˆåˆ›å»ºçº¿ç¨‹ã€è°ƒåº¦ä»»åŠ¡ã€é”€æ¯çº¿ç¨‹ï¼‰ ç¨‹åºå‘˜åªéœ€è¦å‘Šè¯‰ GCD æƒ³è¦æ‰§è¡Œä»€ä¹ˆä»»åŠ¡ï¼Œä¸éœ€è¦ç¼–å†™ä»»ä½•çº¿ç¨‹ç®¡ç†ä»£ç  4.2 ä»»åŠ¡å’Œé˜Ÿåˆ— ä»»åŠ¡ï¼š è¡¨çŽ°ä¸Šå°±æ˜¯ä¸€æ®µä»£ç ï¼ŒOCå°±å¯¹åº”ä¸€ä¸ªBlockã€‚ä»»åŠ¡ æœ‰ä¸¤ç§æ‰§è¡Œæ–¹å¼ï¼Œæ˜¯å¦ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œä¼šä¸ä¼šé˜»å¡žå½“å‰çº¿ç¨‹ åŒæ­¥æ‰§è¡Œï¼ˆsyncï¼‰ï¼šåœ¨å½“å‰çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œä¸ä¼šå¼€è¾Ÿæ–°çš„çº¿ç¨‹ã€‚å¿…é¡»ç­‰åˆ°Blockå‡½æ•°æ‰§è¡Œå®Œæ¯•åŽï¼Œdispatchå‡½æ•°æ‰ä¼šè¿”å›žã€‚ å¼‚æ­¥æ‰§è¡Œï¼ˆasyncï¼‰ï¼šå¯ä»¥åœ¨æ–°çš„çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œä½†ä¸ä¸€å®šä¼šå¼€è¾Ÿæ–°çš„çº¿ç¨‹ã€‚dispatchå‡½æ•°ä¼šç«‹å³è¿”å›ž, ç„¶åŽBlockåœ¨åŽå°å¼‚æ­¥æ‰§è¡Œã€‚ é˜Ÿåˆ—ï¼šä»»åŠ¡ç®¡ç†æ–¹å¼ã€‚åˆ†ä¸º ä¸²è¡Œ å’Œ å¹¶è¡Œä¸¤ç§æ–¹å¼ï¼Œéƒ½æ˜¯æŒ‰ç…§ FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰åŽŸåˆ™ä¾æ¬¡è§¦å‘ä»»åŠ¡ã€‚ ä¸²è¡Œé˜Ÿåˆ— ï¼š æ‰€æœ‰ä»»åŠ¡ä¼šåœ¨ä¸€æ¡çº¿ç¨‹ä¸­æ‰§è¡Œï¼ˆæœ‰å¯èƒ½æ˜¯å½“å‰çº¿ç¨‹ä¹Ÿæœ‰å¯èƒ½æ˜¯æ–°å¼€è¾Ÿçš„çº¿ç¨‹ï¼‰ï¼Œå¹¶ä¸”ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•åŽï¼Œæ‰å¼€å§‹æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚ï¼ˆç­‰å¾…å®Œæˆï¼‰ å¹¶è¡Œé˜Ÿåˆ—ï¼š å¯ä»¥å¼€å¯å¤šæ¡çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œä»»åŠ¡ï¼ˆä½†ä¸ä¸€å®šä¼šå¼€å¯æ–°çš„çº¿ç¨‹ï¼‰ï¼Œå¹¶ä¸”å½“ä¸€ä¸ªä»»åŠ¡æ”¾åˆ°æŒ‡å®šçº¿ç¨‹å¼€å§‹æ‰§è¡Œæ—¶ï¼Œä¸‹ä¸€ä¸ªä»»åŠ¡å°±å¯ä»¥å¼€å§‹æ‰§è¡Œäº†ã€‚ï¼ˆç­‰å¾…å‘ç”Ÿï¼‰ ä¸¤è€…çš„åŒºåˆ«ï¼šæ‰§è¡Œé¡ºåºä¸åŒï¼Œä»¥åŠå¼€å¯çº¿ç¨‹æ•°ä¸åŒã€‚ ä¸¤ä¸ªç‰¹æ®Šé˜Ÿåˆ—ï¼š ä¸»é˜Ÿåˆ—ï¼š ç³»ç»Ÿåˆ›å»ºå¥½çš„ä¸€ä¸ª ä¸²è¡Œé˜Ÿåˆ—ï¼Œå®ƒç®¡ç†å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œçš„ä»»åŠ¡ã€‚ å…¨å±€é˜Ÿåˆ—ï¼šç³»ç»Ÿä¸ºæˆ‘ä»¬åˆ›å»ºå¥½çš„ä¸€ä¸ªå¹¶è¡Œé˜Ÿåˆ—ï¼Œä½¿ç”¨èµ·æ¥ä¸Žæˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„å¹¶è¡Œé˜Ÿåˆ—æ— æœ¬è´¨å·®åˆ«ã€‚ ä¸åŒé˜Ÿåˆ—åˆ›å»ºèŽ·å–æ–¹å¼ï¼š 123456789101112- (void)create &#123; // dispatch_queue_create ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é˜Ÿåˆ—åå­—ï¼Œä¸€èˆ¬ç”¨appçš„Bundle Identifierå‘½åæ–¹å¼å‘½åï¼›ç¬¬äºŒä¸ªå‚æ•°ä¸ºNULLæ—¶è¡¨æ˜¯ä¸²è¡Œé˜Ÿåˆ— //ä¸²è¡Œé˜Ÿåˆ— dispatch_queue_t serialQueue = dispatch_queue_create(&quot;q1.andyron.com&quot;, NULL); dispatch_queue_t serialQueue2 = dispatch_queue_create(&quot;q2.andyron.com&quot;, DISPATCH_QUEUE_SERIAL); //å¹¶è¡Œé˜Ÿåˆ— dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;q3.andyron.com&quot;, DISPATCH_QUEUE_CONCURRENT); //å…¨å±€å¹¶è¡Œé˜Ÿåˆ— DISPATCH_QUEUE_PRIORITY_DEFAULTè¡¨ç¤ºä¼˜å…ˆçº§ dispatch_queue_t globalQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0); //ä¸»é˜Ÿåˆ—èŽ·å– dispatch_queue_t mainQueue = dispatch_get_main_queue();&#125; åŒæ­¥æ‰§è¡Œ å¼‚æ­¥æ‰§è¡Œ ä¸²è¡Œé˜Ÿåˆ— å½“å‰çº¿ç¨‹ï¼Œä¸€ä¸ªä¸€ä¸ªæ‰§è¡Œ å…¶ä»–çº¿ç¨‹ï¼Œä¸€ä¸ªä¸€ä¸ªæ‰§è¡Œ å¹¶è¡Œé˜Ÿåˆ— å½“å‰çº¿ç¨‹ï¼Œä¸€ä¸ªä¸€ä¸ªæ‰§è¡Œ å¼€å¾ˆå¤šçº¿ç¨‹ï¼Œä¸€èµ·æ‰§è¡Œ 4.3 ä¸‹é¢ðŸ‘‡ä»¥ä¸€ä¸ªä¸€ä¸ªðŸŒ°æ¥å­¦ä¹ GCDï¼Œå¸®åŠ©æžæ¸…ä¸Šé¢çš„æ¦‚å¿µ ä¾‹å­ä¸€:çº¿ç¨‹æ­»é”ï¼ˆä¸»é˜Ÿåˆ— + åŒæ­¥æ‰§è¡Œï¼‰1234567- (void)case1 &#123; NSLog(@&quot;A=====%@&quot;, [NSThread currentThread]); dispatch_sync(dispatch_get_main_queue(), ^&#123; NSLog(@&quot;B=====%@&quot;, [NSThread currentThread]); &#125;); NSLog(@&quot;C=====%@&quot;, [NSThread currentThread]);&#125; è¿è¡Œç»“æžœå´©æºƒï¼š æ‰“å°ç»“æžœï¼š1GCD(OC)[51511:6351422] A=====&lt;NSThread: 0x600000064340&gt;&#123;number = 1, name = main&#125; è§£é‡Šï¼šé»˜è®¤å°±ä¸€ä¸ªä¸»é˜Ÿåˆ—å’Œä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œå› æ­¤case1å‡½æ•°è¿™æ®µä»»åŠ¡å°±åœ¨ä¸»é˜Ÿåˆ—ä¸­åŒæ­¥æ‰§è¡Œï¼Œdispatch_sync...è¿™æ®µä»£ç è¡¨ç¤ºæŠŠBå¤„ä»»åŠ¡åŠ å…¥ä¸»é˜Ÿåˆ—ä¸­ï¼Œå¹¶ä¸”åŒæ­¥æ‰§è¡Œï¼Œè¿™å°±å‡ºé—®é¢˜ï¼ŒBå¤„ä»»åŠ¡è¦ç­‰ä¸»é˜Ÿåˆ—ä¸­åŒæ­¥æ‰§è¡Œä¹‹å‰çš„case1è¿™æ®µä»»åŠ¡ç»“æŸåŽæ‰§è¡Œï¼Œä½†Bå¤„ä»»åŠ¡åœ¨case1è¿™æ®µä»»åŠ¡ä¸­ï¼Œcase1åˆè¦ç­‰Bå¤„ä»»åŠ¡æ‰§è¡Œå®Œæ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚case1ä»»åŠ¡è¦ç­‰Bå¤„å®Œæˆæ‰èƒ½ç»§ç»­ï¼Œä½†case1åˆæŽ’åœ¨Bå¤„å‰é¢ï¼Œè¿™å°±å°´å°¬äº†ï¼Œï¿£â–¡ï¿£ï½œï½œï¼Œå› æ­¤å´©æºƒäº†ðŸ˜– ä¾‹å­äºŒï¼šä¸»é˜Ÿåˆ— + å¼‚æ­¥æ‰§è¡Œ1234567- (void)case2 &#123; NSLog(@&quot;A=====%@&quot;, [NSThread currentThread]); dispatch_async(dispatch_get_main_queue(), ^&#123; NSLog(@&quot;B=====%@&quot;, [NSThread currentThread]); &#125;); NSLog(@&quot;C=====%@&quot;, [NSThread currentThread]);&#125; ç»“æžœï¼š123GCD(OC)[52567:6465354] A=====&lt;NSThread: 0x600000068d40&gt;&#123;number = 1, name = main&#125;GCD(OC)[52567:6465354] C=====&lt;NSThread: 0x600000068d40&gt;&#123;number = 1, name = main&#125;GCD(OC)[52567:6465354] B=====&lt;NSThread: 0x600000068d40&gt;&#123;number = 1, name = main&#125; è§£é‡Šï¼šä»»åŠ¡éƒ½åœ¨ä¸»é˜Ÿåˆ—ï¼ˆä¸²è¡Œï¼‰ï¼Œè€Œä¸”åªè¦ä¸€ä¸ªä¸»çº¿ç¨‹ï¼ˆnameéƒ½æ˜¯mainï¼‰ï¼ŒBå¤„ä»»åŠ¡ç”±äºŽæ˜¯å¼‚æ­¥æ‰§è¡Œï¼Œç­‰case2ä»»åŠ¡å®ŒæˆåŽæ‰§è¡Œã€‚ ä¾‹å­ä¸‰ï¼šä¸²è¡Œé˜Ÿåˆ— + åŒæ­¥æ‰§è¡Œ1234567891011121314// ä¸²è¡Œé˜Ÿåˆ— + åŒæ­¥æ‰§è¡Œ- (void)case3 &#123; dispatch_queue_t serialQueue = dispatch_queue_create(&quot;q2.andyron.com&quot;, DISPATCH_QUEUE_SERIAL); dispatch_sync(serialQueue, ^&#123; NSLog(@&quot;1======%@&quot;, [NSThread currentThread]); &#125;); dispatch_sync(serialQueue, ^&#123; NSLog(@&quot;2======%@&quot;, [NSThread currentThread]); &#125;); dispatch_sync(serialQueue, ^&#123; NSLog(@&quot;3======%@&quot;, [NSThread currentThread]); &#125;); NSLog(@&quot;4======%@&quot;, [NSThread currentThread]);&#125; ç»“æžœï¼š1234GCD(OC)[53734:6582112] 1======&lt;NSThread: 0x604000261700&gt;&#123;number = 1, name = main&#125;GCD(OC)[53734:6582112] 2======&lt;NSThread: 0x604000261700&gt;&#123;number = 1, name = main&#125;GCD(OC)[53734:6582112] 3======&lt;NSThread: 0x604000261700&gt;&#123;number = 1, name = main&#125;GCD(OC)[53734:6582112] 4======&lt;NSThread: 0x604000261700&gt;&#123;number = 1, name = main&#125; è§£é‡Šï¼šðŸŒ°1ä¸­çš„ä¸»é˜Ÿåˆ—ä¹Ÿæ˜¯ä¸²è¡Œé˜Ÿåˆ—ï¼Œä½†å’Œè¿™è¾¹ä¸åŒï¼Œè¿™è¾¹æ˜¯æ–°å»ºäº†å¦ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—ï¼Œä¸ä¼šå‡ºçŽ°å†²çªï¼Œå¹¶ä¸”éƒ½åœ¨ä¸»çº¿ç¨‹ä¸­è¿è¡Œï¼Œè¿™ä¹Ÿè¯´æ˜Žäº†åŒæ­¥æ‰§è¡Œä¸å…·å¤‡åˆ›å»ºæ–°çº¿ç¨‹çš„èƒ½åŠ›ã€‚ åˆ—å­å››ï¼šä¸²è¡Œé˜Ÿåˆ— + å¼‚æ­¥æ‰§è¡Œ1234567891011121314// ä¸²è¡Œé˜Ÿåˆ— + å¼‚æ­¥æ‰§è¡Œ- (void)case4 &#123; dispatch_queue_t serialQueue = dispatch_queue_create(&quot;q2.andyron.com&quot;, DISPATCH_QUEUE_SERIAL); dispatch_async(serialQueue, ^&#123; NSLog(@&quot;1========%@&quot;,[NSThread currentThread]); &#125;); dispatch_async(serialQueue, ^&#123; NSLog(@&quot;2========%@&quot;,[NSThread currentThread]); &#125;); dispatch_async(serialQueue, ^&#123; NSLog(@&quot;3========%@&quot;,[NSThread currentThread]); &#125;); NSLog(@&quot;4========%@&quot;,[NSThread currentThread]);&#125; æ‰“å°ç»“æžœï¼š1234GCD(OC)[53970:6604711] 4========&lt;NSThread: 0x60000007c880&gt;&#123;number = 1, name = main&#125;GCD(OC)[53970:6604933] 1========&lt;NSThread: 0x600000460280&gt;&#123;number = 3, name = (null)&#125;GCD(OC)[53970:6604933] 2========&lt;NSThread: 0x600000460280&gt;&#123;number = 3, name = (null)&#125;GCD(OC)[53970:6604933] 3========&lt;NSThread: 0x600000460280&gt;&#123;number = 3, name = (null)&#125; è§£é‡Šï¼šçŽ°åœ¨æ‰“å°äº†4ï¼ŒåŽæ‰“å°äº†1ï¼Œ2ï¼Œ3ï¼Œè¿™æ˜¯ä¸€éƒ¨æ‰§è¡Œçš„ç»“æžœï¼Œå¹¶ä¸”4åœ¨ä¸»çº¿ç¨‹ï¼Œå…¶å®ƒåœ¨å­çº¿ç¨‹æ‰“å°ï¼Œè¿™ä¹Ÿè¯´æ˜Žäº†å¼‚æ­¥æ‰§è¡Œå¯ä»¥åˆ›å»ºæ–°çº¿ç¨‹ã€‚ åˆ—å­äº”ï¼šå¹¶è¡Œé˜Ÿåˆ— + åŒæ­¥æ‰§è¡Œ1234567891011121314151617/// å¹¶è¡Œé˜Ÿåˆ— + åŒæ­¥æ‰§è¡Œ- (void)case5 &#123; dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;q3.andyron.com&quot;, DISPATCH_QUEUE_CONCURRENT); dispatch_sync(concurrentQueue, ^&#123; NSLog(@&quot;1========%@&quot;,[NSThread currentThread]); //[self nslogCount:10000 number:1]; &#125;); dispatch_sync(concurrentQueue, ^&#123; NSLog(@&quot;2========%@&quot;,[NSThread currentThread]); //[self nslogCount:10000 number:2]; &#125;); dispatch_sync(concurrentQueue, ^&#123; NSLog(@&quot;3========%@&quot;,[NSThread currentThread]); //[self nslogCount:10000 number:3]; &#125;); NSLog(@&quot;4========%@&quot;,[NSThread currentThread]);&#125; æ‰“å°ç»“æžœï¼š1234GCD(OC)[54401:6646454] 1========&lt;NSThread: 0x600000260e80&gt;&#123;number = 1, name = main&#125;GCD(OC)[54401:6646454] 2========&lt;NSThread: 0x600000260e80&gt;&#123;number = 1, name = main&#125;GCD(OC)[54401:6646454] 3========&lt;NSThread: 0x600000260e80&gt;&#123;number = 1, name = main&#125;GCD(OC)[54401:6646454] 4========&lt;NSThread: 0x600000260e80&gt;&#123;number = 1, name = main&#125; è§£é‡Šï¼šéƒ½åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œç”±äºŽåªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œç»“æžœçœ‹ä¸ŠåŽ»æ˜¯é¡ºåºæ‰§è¡Œã€‚ åˆ—å­å…­ï¼š å¹¶è¡Œé˜Ÿåˆ— + å¼‚æ­¥æ‰§è¡Œ1234567891011121314// å¹¶è¡Œé˜Ÿåˆ— + å¼‚æ­¥æ‰§è¡Œ- (void)case6 &#123; dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;q3.andyron.com&quot;, DISPATCH_QUEUE_CONCURRENT); dispatch_async(concurrentQueue, ^&#123; NSLog(@&quot;1========%@&quot;,[NSThread currentThread]); &#125;); dispatch_async(concurrentQueue, ^&#123; NSLog(@&quot;2========%@&quot;,[NSThread currentThread]); &#125;); dispatch_async(concurrentQueue, ^&#123; NSLog(@&quot;3========%@&quot;,[NSThread currentThread]); &#125;); NSLog(@&quot;4========%@&quot;,[NSThread currentThread]);&#125; æ‰“å°ç»“æžœï¼š1234GCD(OC)[54687:6675227] 2========&lt;NSThread: 0x600000466600&gt;&#123;number = 5, name = (null)&#125;GCD(OC)[54687:6675036] 4========&lt;NSThread: 0x604000078d00&gt;&#123;number = 1, name = main&#125;GCD(OC)[54687:6675226] 1========&lt;NSThread: 0x600000463fc0&gt;&#123;number = 4, name = (null)&#125;GCD(OC)[54687:6675229] 3========&lt;NSThread: 0x60400067d400&gt;&#123;number = 6, name = (null)&#125; è§£é‡Šï¼šé™¤äº†æ‰“å°4çš„æ˜¯ä¸»çº¿ï¼Œå…¶ä»–åˆå¼€å¯äº†ä¸‰ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œä¸‰ä¸ªä»»åŠ¡ï¼Œå½“å¤©å¼€å¯å‡ ä¸ªçº¿ç¨‹æ˜¯æœ‰CPUè‡ªå·±å†³å®šçš„ï¼Œä»»åŠ¡çš„æ‰§è¡Œæ˜¯éšæœºçš„ã€‚ 4.4 GCD é‡ç‚¹ åªè¦æ˜¯ä¸²è¡Œé˜Ÿåˆ—ï¼Œè‚¯å®šè¦ç­‰ä¸Šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆï¼Œæ‰èƒ½å¼€å§‹ä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚ä½†æ˜¯å¹¶è¡Œé˜Ÿåˆ—å½“ä¸Šä¸€ä¸ªä»»åŠ¡å¼€å§‹æ‰§è¡ŒåŽï¼Œä¸‹ä¸€ä¸ªä»»åŠ¡å°±å¯ä»¥å¼€å§‹æ‰§è¡Œã€‚ åŒæ­¥+ä¸²è¡Œï¼šæœªå¼€è¾Ÿæ–°çº¿ç¨‹ï¼Œä¸²è¡Œæ‰§è¡Œä»»åŠ¡ï¼›åŒæ­¥+å¹¶è¡Œï¼šæœªå¼€è¾Ÿæ–°çº¿ç¨‹ï¼Œä¸²è¡Œæ‰§è¡Œä»»åŠ¡ï¼›å¼‚æ­¥+ä¸²è¡Œï¼šæ–°å¼€è¾Ÿä¸€æ¡çº¿ç¨‹ï¼Œä¸²è¡Œæ‰§è¡Œä»»åŠ¡ï¼›å¼‚æ­¥+å¹¶è¡Œï¼šå¼€è¾Ÿå¤šæ¡æ–°çº¿ç¨‹ï¼Œå¹¶è¡Œæ‰§è¡Œä»»åŠ¡ï¼›åœ¨ä¸»çº¿ç¨‹ä¸­åŒæ­¥ä½¿ç”¨ä¸»é˜Ÿåˆ—æ‰§è¡Œä»»åŠ¡ï¼Œä¼šé€ æˆæ­»é”ã€‚ 4.5 GCDå…¶ä»–ç›¸å…³æ–¹æ³• å»¶è¿Ÿæ‰§è¡Œæ–¹æ³•ï¼š void dispatch_after(dispatch_time_t when, dispatch_queue_t queue, dispatch_block_t block);æŒ‡å®šæ—¶é—´åŽæ‰§è¡ŒæŸä¸ªä»»åŠ¡ï¼Œdispatch_afterå‡½æ•°æŒ‡å®šçš„æ—¶é—´æ˜¯æŒ‡å¤šé•¿åŽå°†ä»»åŠ¡åŠ åˆ°æŸä¸ªé˜Ÿåˆ—ä¸­ï¼Œè€Œä¸æ˜¯å…·ä½“æ‰§è¡Œæ—¶é—´ï¼Œå…·ä½“æ—¶é—´è¦çœ‹CPUæ‰§è¡Œæ—¶é—´äº†ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸ªå¤§çº¦å»¶è¿Ÿæ—¶é—´ã€‚ 123456- (void)after &#123; dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; // 2.0ç§’åŽå¼‚æ­¥è¿½åŠ ä»»åŠ¡ä»£ç åˆ°ä¸»é˜Ÿåˆ—ï¼Œå¹¶å¼€å§‹æ‰§è¡Œ NSLog(@&quot;after---%@&quot;,[NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹ &#125;);&#125; dispatch_onceï¼šåœ¨ç”Ÿå‘½å‘¨æœŸå†…åªæ‰§è¡Œä¸€æ¬¡ã€‚ 123456- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; NSLog(@&quot;å°±ä¸€æ¬¡%@&quot;,[NSThread currentThread]); &#125;);&#125; ä¸ç®¡ç‚¹å‡»å¤šå°‘æ¬¡åªæœ‰ä¸€æ¬¡è¾“å‡ºã€‚ GCDçš„å†…å®¹å¾ˆä¸°å¯Œï¼Œè¿˜æœ‰å¾ˆå¤šå‡½æ•°ï¼Œ2016å’Œ2017çš„WWDCéƒ½æœ‰ä¸“é—¨è®²åˆ°GCDï¼Œæƒ³æ›´è¿‘ä¸€æ­¥å¯ä»¥å‚è€ƒï¼šModernizing Grand Central Dispatch Usageï¼ŒConcurrent Programming With GCD in Swift 3ã€‚ 5 NSOperation å’Œ NSOperationQueue5.1 æ¦‚å¿µ NSOperation(æ“ä½œ) å’Œ NSOperationQueueï¼ˆæ“ä½œé˜Ÿåˆ—ï¼‰ æ˜¯è‹¹æžœå¯¹GCDçš„å°è£… NSOperation å’Œ NSOperationQueue åˆ†åˆ«ç›¸å½“äºŽ GCD çš„ ä»»åŠ¡ å’Œ é˜Ÿåˆ— NSOperation åªæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸èƒ½ç›´æŽ¥ä½¿ç”¨ï¼Œä½¿ç”¨å…¶ 2 ä¸ªå­ç±»ï¼šNSInvocationOperation å’Œ NSBlockOperation ã€‚ NSOperationçš„ä½¿ç”¨é™¤äº†å…¶çŽ°æœ‰çš„å­ç±»ï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰å­ç±»ã€‚ æ“ä½œé˜Ÿåˆ—é€šè¿‡è®¾ç½®æœ€å¤§å¹¶å‘æ“ä½œæ•°ï¼ˆmaxConcurrentOperationCountï¼‰æ¥æŽ§åˆ¶å¹¶å‘ã€ä¸²è¡Œã€‚ NSOperationQueue ä¸ºæˆ‘ä»¬æä¾›äº†ä¸¤ç§ä¸åŒç±»åž‹çš„é˜Ÿåˆ—ï¼šä¸»é˜Ÿåˆ—å’Œè‡ªå®šä¹‰é˜Ÿåˆ—ã€‚ä¸»é˜Ÿåˆ—è¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¹‹ä¸Šï¼Œè€Œè‡ªå®šä¹‰é˜Ÿåˆ—åœ¨åŽå°æ‰§è¡Œã€‚ NSOperation éœ€è¦é…åˆ NSOperationQueue æ¥ä½¿ç”¨ã€‚å¦åˆ™ï¼ŒNSOperation å•ç‹¬ä½¿ç”¨æ—¶ç³»ç»Ÿé»˜è®¤åŒæ­¥æ‰§è¡Œæ“ä½œï¼Œé…åˆ NSOperationQueue æˆ‘ä»¬èƒ½æ›´å¥½çš„å®žçŽ°å¼‚æ­¥æ‰§è¡Œã€‚ 5. 2 NSOperation å®žçŽ°å¤šçº¿ç¨‹çš„æ­¥éª¤ åˆ›å»ºæ“ä½œï¼šå…ˆå°†éœ€è¦æ‰§è¡Œçš„æ“ä½œå°è£…åˆ°ä¸€ä¸ª NSOperation å¯¹è±¡ä¸­ã€‚ åˆ›å»ºé˜Ÿåˆ—ï¼šåˆ›å»º NSOperationQueue å¯¹è±¡ã€‚ å°†æ“ä½œåŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ï¼šå°† NSOperation å¯¹è±¡æ·»åŠ åˆ°NSOperationQueue å¯¹è±¡ä¸­ã€‚ ä¹‹åŽï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨å°† NSOperationQueue ä¸­çš„ NSOperation å–å‡ºæ¥ï¼Œåœ¨æ–°çº¿ç¨‹ä¸­æ‰§è¡Œæ“ä½œã€‚ 5.3 ä½¿ç”¨NSOperationçš„å­ç±»NSInvocationOperation12NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(run) object:nil];[operation start]; åœ¨æ²¡æœ‰ä½¿ç”¨NSOperationQueueæ—¶ï¼ŒNSInvocationOperationä¼šåœ¨å½“å‰çº¿ç¨‹ï¼ˆä¸»çº¿ç¨‹æˆ–å…¶ä»–çº¿ç¨‹ï¼‰å†…è¿è¡Œã€‚ 5.4 ä½¿ç”¨NSOperationçš„å­ç±»NSBlockOperation1234NSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^&#123; NSLog(@&quot;%@&quot;, [NSThread currentThread]); &#125;];[operation start]; ç»“æžœï¼š 12NSOperation(OC)[97406:5880178] 1---&lt;NSThread: 0x60400006e700&gt;&#123;number = 1, name = main&#125;NSOperation(OC)[97406:5880178] 1---&lt;NSThread: 0x60400006e700&gt;&#123;number = 1, name = main&#125; åœ¨æ²¡æœ‰ä½¿ç”¨NSOperationQueueæ—¶ï¼ŒNSBlockOperationä¹Ÿä¼šåœ¨å½“å‰çº¿ç¨‹ï¼ˆä¸»çº¿ç¨‹æˆ–å…¶ä»–çº¿ç¨‹ï¼‰å†…è¿è¡Œã€‚ å¦å¤–ï¼ŒNSBlockOperationè¿˜æä¾›äº†ä¸€ä¸ªæ–¹æ³• addExecutionBlock:ï¼Œç”¨æ¥æ·»åŠ é¢å¤–çš„æ“ä½œï¼š 1234567891011121314151617181920212223242526272829// 1.åˆ›å»º NSBlockOperation å¯¹è±¡NSBlockOperation *op = [NSBlockOperation blockOperationWithBlock:^&#123; NSLog(@&quot;1---%@&quot;, [NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹&#125;];// 2.æ·»åŠ é¢å¤–çš„æ“ä½œ[op addExecutionBlock:^&#123; [NSThread sleepForTimeInterval:1]; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ NSLog(@&quot;2---%@&quot;, [NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹ &#125;];[op addExecutionBlock:^&#123; [NSThread sleepForTimeInterval:1]; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ NSLog(@&quot;3---%@&quot;, [NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹ &#125;];[op addExecutionBlock:^&#123; [NSThread sleepForTimeInterval:1]; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ NSLog(@&quot;4---%@&quot;, [NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹ &#125;];[op addExecutionBlock:^&#123; [NSThread sleepForTimeInterval:1]; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ NSLog(@&quot;5---%@&quot;, [NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹ &#125;];// 3.è°ƒç”¨ start æ–¹æ³•å¼€å§‹æ‰§è¡Œæ“ä½œ[op start]; æŸä¸€æ¬¡çš„è¿è¡Œç»“æžœï¼š 12345NSOperation(OC)[97709:5888750] 1---&lt;NSThread: 0x600000469740&gt;&#123;number = 3, name = (null)&#125;NSOperation(OC)[97709:5888750] 5---&lt;NSThread: 0x600000469740&gt;&#123;number = 3, name = (null)&#125;NSOperation(OC)[97709:5888748] 3---&lt;NSThread: 0x600000469e40&gt;&#123;number = 4, name = (null)&#125;NSOperation(OC)[97709:5888498] 4---&lt;NSThread: 0x60400007a600&gt;&#123;number = 1, name = main&#125;NSOperation(OC)[97709:5888758] 2---&lt;NSThread: 0x604000463480&gt;&#123;number = 5, name = (null)&#125; addExecutionBlock:æ·»åŠ çš„æ“ä½œå’Œä¹‹å‰blockOperationWithBlockæ·»åŠ çš„æ“ä½œæ˜¯å¦åœ¨ä¸»çº¿ç¨‹æˆ–è€…æ˜¯å¦å¼€å¤šçº¿ç¨‹ï¼Œæ˜¯ç”±ç³»ç»Ÿå†³å®šï¼Œå®ƒä»¬çš„åœ°ä½æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥æ¯ä¸€æ¬¡æ‰§è¡Œçš„ç»“æžœå¯èƒ½ä¸åŒã€‚ 5.5 NSOperationçš„è‡ªå®šä¹‰å­ç±»é™¤äº†ä¸Šé¢ä¸¤ä¸ªå­ç±»å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡é‡å†™mainæ–¹æ³•æ¥è‡ªå®šä¹‰å­ç±»ã€‚12345678910111213#import &quot;AROperation.h&quot;@implementation AROperation- (void)main &#123; if (!self.isCancelled) &#123; for (int i = 0; i &lt; 2; i++) &#123; [NSThread sleepForTimeInterval:2]; NSLog(@&quot;è‡ªå®šä¹‰Operation---%@&quot;, [NSThread currentThread]); &#125; &#125;&#125;@end ä½¿ç”¨ï¼š12AROperation *op = [[AROperation alloc] init];[op start]; 5.6 NSOperationQueueä¸Šé¢å‡ ç§æƒ…å†µéƒ½æ˜¯æ²¡æœ‰æ“ä½œé˜Ÿåˆ—ï¼Œä¸€èˆ¬åªåœ¨ä¸»çº¿ç¨‹è¿è¡Œã€‚è€Œä½¿ç”¨æ“ä½œé˜Ÿåˆ—å°±å¯ä»¥å®žçŽ°å¤šçº¿ç¨‹äº†ã€‚æ“ä½œé˜Ÿåˆ—åˆ†ä¸¤ç§ï¼š ä¸»é˜Ÿåˆ— : å‡¡æ˜¯æ·»åŠ åˆ°ä¸»é˜Ÿåˆ—ä¸­çš„æ“ä½œï¼Œéƒ½ä¼šæ”¾åˆ°ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ è‡ªå®šä¹‰é˜Ÿåˆ—: æ“ä½œè‡ªåŠ¨æ”¾åˆ°å­çº¿ç¨‹ä¸­æ‰§è¡Œï¼ŒåŒæ—¶åŒ…å«äº†ï¼šä¸²è¡Œã€å¹¶å‘åŠŸèƒ½ã€‚ 5.6.1 åˆ›å»ºé˜Ÿåˆ—12345// ä¸»é˜Ÿåˆ—èŽ·å–æ–¹æ³•NSOperationQueue *queue = [NSOperationQueue mainQueue];// è‡ªå®šä¹‰é˜Ÿåˆ—åˆ›å»ºæ–¹æ³•NSOperationQueue *queue = [[NSOperationQueue alloc] init]; 5.6.2 æ·»åŠ æ“ä½œåˆ°é˜Ÿåˆ—ä¸­ä¸¤ç§ä¸åŒçš„æ·»åŠ æ–¹æ³•ï¼š - (void)addOperation:(NSOperation *)op;1234567891011121314151617181920212223242526272829303132333435- (void)addOperationToQueue &#123; // 1.åˆ›å»ºé˜Ÿåˆ— NSOperationQueue *queue = [[NSOperationQueue alloc] init]; // 2.åˆ›å»ºæ“ä½œ // ä½¿ç”¨ NSInvocationOperation åˆ›å»ºæ“ä½œ1 NSInvocationOperation *op1 = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(task1) object:nil]; // ä½¿ç”¨ NSInvocationOperation åˆ›å»ºæ“ä½œ2 NSInvocationOperation *op2 = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(task2) object:nil]; // ä½¿ç”¨ NSBlockOperation åˆ›å»ºæ“ä½œ3 NSBlockOperation *op3 = [NSBlockOperation blockOperationWithBlock:^&#123; for (int i = 0; i &lt; 2; i++) &#123; [NSThread sleepForTimeInterval:2]; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ NSLog(@&quot;3---%@&quot;, [NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹ &#125; &#125;]; [op3 addExecutionBlock:^&#123; for (int i = 0; i &lt; 2; i++) &#123; [NSThread sleepForTimeInterval:2]; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ NSLog(@&quot;4---%@&quot;, [NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹ &#125; &#125;]; // 3.ä½¿ç”¨ addOperation: æ·»åŠ æ‰€æœ‰æ“ä½œåˆ°é˜Ÿåˆ—ä¸­ [queue addOperation:op1]; // [op1 start] [queue addOperation:op2]; // [op2 start] [queue addOperation:op3]; // [op3 start]&#125;- (void) task1 &#123; NSLog(@&quot;1---%@&quot;, [NSThread currentThread]);&#125;- (void) task2 &#123; NSLog(@&quot;2---%@&quot;, [NSThread currentThread]);&#125; æŸä¸€æ¬¡çš„è¿è¡Œç»“æžœï¼š123456NSOperation(OC)[7557:6218702] 2---&lt;NSThread: 0x60400027f900&gt;&#123;number = 4, name = (null)&#125;NSOperation(OC)[7557:6218699] 1---&lt;NSThread: 0x600000461a00&gt;&#123;number = 3, name = (null)&#125;NSOperation(OC)[7557:6218701] 4---&lt;NSThread: 0x6040004606c0&gt;&#123;number = 5, name = (null)&#125;NSOperation(OC)[7557:6218700] 3---&lt;NSThread: 0x604000460d40&gt;&#123;number = 6, name = (null)&#125;NSOperation(OC)[7557:6218700] 3---&lt;NSThread: 0x604000460d40&gt;&#123;number = 6, name = (null)&#125;NSOperation(OC)[7557:6218701] 4---&lt;NSThread: 0x6040004606c0&gt;&#123;number = 5, name = (null)&#125; å¹¶å‘è¿è¡Œï¼Œæ‰§è¡Œæ¬¡åºä¸ç¡®å®šã€‚ - (void)addOperationWithBlock:(void (^)(void))block; ä¸éœ€è¦å…ˆåˆ›å»ºæ“ä½œï¼Œç›´æŽ¥æ·»åŠ block123456789101112131415161718192021222324- (void)addOperationWithBlockToQueue &#123; // 1.åˆ›å»ºé˜Ÿåˆ— NSOperationQueue *queue = [[NSOperationQueue alloc] init]; // 2.ä½¿ç”¨ addOperationWithBlock: æ·»åŠ æ“ä½œåˆ°é˜Ÿåˆ—ä¸­ [queue addOperationWithBlock:^&#123; for (int i = 0; i &lt; 2; i++) &#123; [NSThread sleepForTimeInterval:2]; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ NSLog(@&quot;1---%@&quot;, [NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹ &#125; &#125;]; [queue addOperationWithBlock:^&#123; for (int i = 0; i &lt; 2; i++) &#123; [NSThread sleepForTimeInterval:2]; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ NSLog(@&quot;2---%@&quot;, [NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹ &#125; &#125;]; [queue addOperationWithBlock:^&#123; for (int i = 0; i &lt; 2; i++) &#123; [NSThread sleepForTimeInterval:2]; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ NSLog(@&quot;3---%@&quot;, [NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹ &#125; &#125;];&#125; æŸä¸€æ¬¡çš„è¿è¡Œç»“æžœï¼š123456NSOperation(OC)[7772:6229770] 2---&lt;NSThread: 0x600000277640&gt;&#123;number = 5, name = (null)&#125;NSOperation(OC)[7772:6229772] 1---&lt;NSThread: 0x60400026bfc0&gt;&#123;number = 4, name = (null)&#125;NSOperation(OC)[7772:6229780] 3---&lt;NSThread: 0x6040002686c0&gt;&#123;number = 3, name = (null)&#125;NSOperation(OC)[7772:6229770] 2---&lt;NSThread: 0x600000277640&gt;&#123;number = 5, name = (null)&#125;NSOperation(OC)[7772:6229780] 3---&lt;NSThread: 0x6040002686c0&gt;&#123;number = 3, name = (null)&#125;NSOperation(OC)[7772:6229772] 1---&lt;NSThread: 0x60400026bfc0&gt;&#123;number = 4, name = (null)&#125; 5.6.3 maxConcurrentOperationCountNSOperationQueue æä¾›ä¸€ä¸ªmaxConcurrentOperationCountï¼ˆæœ€å¤§å¹¶å‘æ“ä½œæ•°ï¼‰å±žæ€§æ¥æŽ§åˆ¶ä¸²è¡Œè¿˜æ˜¯å¹¶å‘ã€‚maxConcurrentOperationCount æŽ§åˆ¶çš„ä¸æ˜¯å¹¶å‘çº¿ç¨‹çš„æ•°é‡ï¼Œè€Œæ˜¯ä¸€ä¸ªé˜Ÿåˆ—ä¸­åŒæ—¶èƒ½å¹¶å‘æ‰§è¡Œçš„æœ€å¤§æ“ä½œæ•°ã€‚è€Œä¸”ä¸€ä¸ªæ“ä½œä¹Ÿå¹¶éžåªèƒ½åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­è¿è¡Œã€‚maxConcurrentOperationCounté»˜è®¤æƒ…å†µä¸‹ä¸º-1ï¼Œè¡¨ç¤ºä¸è¿›è¡Œé™åˆ¶ã€‚ 1234567891011121314151617181920212223242526272829303132333435- (void)setMaxConcurrentOperationCount &#123; // 1.åˆ›å»ºé˜Ÿåˆ— NSOperationQueue *queue = [[NSOperationQueue alloc] init]; // 2.è®¾ç½®æœ€å¤§å¹¶å‘æ“ä½œæ•° queue.maxConcurrentOperationCount = 1; // ä¸²è¡Œé˜Ÿåˆ— // queue.maxConcurrentOperationCount = 2; // å¹¶å‘é˜Ÿåˆ— // queue.maxConcurrentOperationCount = 8; // å¹¶å‘é˜Ÿåˆ— // 3.æ·»åŠ æ“ä½œ [queue addOperationWithBlock:^&#123; for (int i = 0; i &lt; 2; i++) &#123; [NSThread sleepForTimeInterval:2]; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ NSLog(@&quot;1---%@&quot;, [NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹ &#125; &#125;]; [queue addOperationWithBlock:^&#123; for (int i = 0; i &lt; 2; i++) &#123; [NSThread sleepForTimeInterval:2]; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ NSLog(@&quot;2---%@&quot;, [NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹ &#125; &#125;]; [queue addOperationWithBlock:^&#123; for (int i = 0; i &lt; 2; i++) &#123; [NSThread sleepForTimeInterval:2]; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ NSLog(@&quot;3---%@&quot;, [NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹ &#125; &#125;]; [queue addOperationWithBlock:^&#123; for (int i = 0; i &lt; 2; i++) &#123; [NSThread sleepForTimeInterval:2]; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ NSLog(@&quot;4---%@&quot;, [NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹ &#125; &#125;];&#125; å½“æœ€å¤§å¹¶å‘æ“ä½œæ•°ä¸º1æ—¶ï¼Œä¹Ÿå°±æ˜¯ä¸²è¡Œæ‰§è¡Œæ—¶ï¼ŒæŽ§åˆ¶å°ä¸­è¿”å›žçš„ç»“æžœé¡ºåºæ˜¯å›ºå®šçš„ã€‚è€Œå¤§äºŽ1æ—¶ï¼Œä¹Ÿå°±æ˜¯å¹¶å‘æ‰§è¡Œï¼Œæ¯ä¸€æ¬¡æ‰§è¡Œçš„é¡ºåºå°±å¯èƒ½ä¸åŒï¼ˆæŽ§åˆ¶å°ä¸­è¿”å›žçš„é¢ç»“æžœé¡ºåºå¯èƒ½ä¸åŒï¼‰ã€‚å½“ç„¶å¼€å¯çš„çº¿ç¨‹æ•°é‡æ˜¯æœ‰ç³»ç»Ÿå†³å®šçš„ã€‚ 5.7 NSOperationä¹‹é—´çš„ä¾èµ–å¹¶è¡Œæ—¶ï¼Œå„ä¸ªçš„æ“ä½œçš„æ‰§è¡Œé¡ºåºæ˜¯æœ‰ç³»ç»Ÿå†³å®šï¼Œç¨‹åºå‘˜ä¸èƒ½ç›´æŽ¥æŽ§åˆ¶ã€‚ä½†æ˜¯NSOperationæé«˜äº†ä¾èµ–ï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ç›¸å…³æ–¹æ³•å’Œå±žæ€§ï¼š - (void)addDependency:(NSOperation *)op; æ·»åŠ ä¾èµ–ï¼Œä½¿å½“å‰æ“ä½œä¾èµ–äºŽæ“ä½œ op çš„å®Œæˆã€‚ - (void)removeDependency:(NSOperation *)op; ç§»é™¤ä¾èµ–ï¼Œå–æ¶ˆå½“å‰æ“ä½œå¯¹æ“ä½œ op çš„ä¾èµ–ã€‚ @property (readonly, copy) NSArray&lt;NSOperation *&gt; *dependencies; åœ¨å½“å‰æ“ä½œå¼€å§‹æ‰§è¡Œä¹‹å‰å®Œæˆæ‰§è¡Œçš„æ‰€æœ‰æ“ä½œå¯¹è±¡æ•°ç»„ã€‚ 1234567891011121314151617181920212223- (void)addDependency &#123; // 1.åˆ›å»ºé˜Ÿåˆ— NSOperationQueue *queue = [[NSOperationQueue alloc] init]; // 2.åˆ›å»ºæ“ä½œ NSBlockOperation *op1 = [NSBlockOperation blockOperationWithBlock:^&#123; for (int i = 0; i &lt; 2; i++) &#123; [NSThread sleepForTimeInterval:2]; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ NSLog(@&quot;1---%@&quot;, [NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹ &#125; &#125;]; NSBlockOperation *op2 = [NSBlockOperation blockOperationWithBlock:^&#123; for (int i = 0; i &lt; 2; i++) &#123; [NSThread sleepForTimeInterval:2]; // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ NSLog(@&quot;2---%@&quot;, [NSThread currentThread]); // æ‰“å°å½“å‰çº¿ç¨‹ &#125; &#125;]; // 3.æ·»åŠ ä¾èµ– [op2 addDependency:op1]; // è®©op2 ä¾èµ–äºŽ op1ï¼Œåˆ™å…ˆæ‰§è¡Œop1ï¼Œå†æ‰§è¡Œop2 // 4.æ·»åŠ æ“ä½œåˆ°é˜Ÿåˆ—ä¸­ [queue addOperation:op1]; [queue addOperation:op2];&#125; è¿è¡Œç»“æžœæ˜¯å›ºå®šçš„ï¼š1234NSOperation(OC)[8977:6302811] 1---&lt;NSThread: 0x604000277f80&gt;&#123;number = 3, name = (null)&#125;NSOperation(OC)[8977:6302811] 1---&lt;NSThread: 0x604000277f80&gt;&#123;number = 3, name = (null)&#125;NSOperation(OC)[8977:6302810] 2---&lt;NSThread: 0x604000274240&gt;&#123;number = 4, name = (null)&#125;NSOperation(OC)[8977:6302810] 2---&lt;NSThread: 0x604000274240&gt;&#123;number = 4, name = (null)&#125; æ³¨æ„ï¼šä¸èƒ½æ·»åŠ ç›¸äº’ä¾èµ–ï¼Œä¼šæ­»é”ï¼Œæ¯”å¦‚ Aä¾èµ–Bï¼ŒBä¾èµ–Aã€‚å¯ä»¥ä½¿ç”¨ removeDependency æ¥è§£é™¤ä¾èµ–å…³ç³»ã€‚å¯ä»¥åœ¨ä¸åŒçš„é˜Ÿåˆ—ä¹‹é—´ä¾èµ–ï¼Œåæ­£å°±æ˜¯è¿™ä¸ªä¾èµ–æ˜¯æ·»åŠ åˆ°ä»»åŠ¡èº«ä¸Šçš„ï¼Œå’Œé˜Ÿåˆ—æ²¡å…³ç³»ã€‚ 5.8 NSOperation å¸¸ç”¨å±žæ€§å’Œæ–¹æ³• å–æ¶ˆæ“ä½œæ–¹æ³•- (void)cancel; å®žè´¨æ˜¯æ ‡è®° isCancelled çŠ¶æ€ã€‚ åˆ¤æ–­æ“ä½œçŠ¶æ€æ–¹æ³• - (BOOL)isFinished; åˆ¤æ–­æ“ä½œæ˜¯å¦å·²ç»ç»“æŸã€‚ - (BOOL)isCancelled; åˆ¤æ–­æ“ä½œæ˜¯å¦å·²ç»æ ‡è®°ä¸ºå–æ¶ˆã€‚ - (BOOL)isExecuting; åˆ¤æ–­æ“ä½œæ˜¯å¦æ­£åœ¨åœ¨è¿è¡Œã€‚ - (BOOL)isReady; åˆ¤æ–­æ“ä½œæ˜¯å¦å¤„äºŽå‡†å¤‡å°±ç»ªçŠ¶æ€ï¼Œè¿™ä¸ªå€¼å’Œæ“ä½œçš„ä¾èµ–å…³ç³»ç›¸å…³ã€‚ æ“ä½œåŒæ­¥ - (void)waitUntilFinished; é˜»å¡žå½“å‰çº¿ç¨‹ï¼Œç›´åˆ°è¯¥æ“ä½œç»“æŸã€‚å¯ç”¨äºŽçº¿ç¨‹æ‰§è¡Œé¡ºåºçš„åŒæ­¥ã€‚ - (void)setCompletionBlock:(void (^)(void))block; completionBlock ä¼šåœ¨å½“å‰æ“ä½œæ‰§è¡Œå®Œæ¯•æ—¶æ‰§è¡Œ completionBlockã€‚ - (void)addDependency:(NSOperation *)op; æ·»åŠ ä¾èµ–ï¼Œä½¿å½“å‰æ“ä½œä¾èµ–äºŽæ“ä½œ op çš„å®Œæˆã€‚ - (void)removeDependency:(NSOperation *)op; ç§»é™¤ä¾èµ–ï¼Œå–æ¶ˆå½“å‰æ“ä½œå¯¹æ“ä½œ op çš„ä¾èµ–ã€‚ @property (readonly, copy) NSArray&lt;NSOperation *&gt; *dependencies; åœ¨å½“å‰æ“ä½œå¼€å§‹æ‰§è¡Œä¹‹å‰å®Œæˆæ‰§è¡Œçš„æ‰€æœ‰æ“ä½œå¯¹è±¡æ•°ç»„ã€‚ 5.9 NSOperationQueue å¸¸ç”¨å±žæ€§å’Œæ–¹æ³• å–æ¶ˆ/æš‚åœ/æ¢å¤æ“ä½œ - (void)cancelAllOperations; å¯ä»¥å–æ¶ˆé˜Ÿåˆ—çš„æ‰€æœ‰æ“ä½œã€‚ - (BOOL)isSuspended; åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦å¤„äºŽæš‚åœçŠ¶æ€ã€‚ YES ä¸ºæš‚åœçŠ¶æ€ï¼ŒNO ä¸ºæ¢å¤çŠ¶æ€ã€‚ - (void)setSuspended:(BOOL)b; å¯è®¾ç½®æ“ä½œçš„æš‚åœå’Œæ¢å¤ï¼ŒYES ä»£è¡¨æš‚åœé˜Ÿåˆ—ï¼ŒNO ä»£è¡¨æ¢å¤é˜Ÿåˆ—ã€‚ æ“ä½œåŒæ­¥ - (void)waitUntilAllOperationsAreFinished; é˜»å¡žå½“å‰çº¿ç¨‹ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­çš„æ“ä½œå…¨éƒ¨æ‰§è¡Œå®Œæ¯•ã€‚ æ·»åŠ /èŽ·å–æ“ä½œ - (void)addOperationWithBlock:(void (^)(void))block; å‘é˜Ÿåˆ—ä¸­æ·»åŠ ä¸€ä¸ª NSBlockOperation ç±»åž‹æ“ä½œå¯¹è±¡ã€‚ - (void)addOperations:(NSArray *)ops waitUntilFinished:(BOOL)wait; å‘é˜Ÿåˆ—ä¸­æ·»åŠ æ“ä½œæ•°ç»„ï¼Œwait æ ‡å¿—æ˜¯å¦é˜»å¡žå½“å‰çº¿ç¨‹ç›´åˆ°æ‰€æœ‰æ“ä½œç»“æŸ - (NSArray *)operations; å½“å‰åœ¨é˜Ÿåˆ—ä¸­çš„æ“ä½œæ•°ç»„ï¼ˆæŸä¸ªæ“ä½œæ‰§è¡Œç»“æŸåŽä¼šè‡ªåŠ¨ä»Žè¿™ä¸ªæ•°ç»„æ¸…é™¤ï¼‰ã€‚ - (NSUInteger)operationCount; å½“å‰é˜Ÿåˆ—ä¸­çš„æ“ä½œæ•°ã€‚ èŽ·å–é˜Ÿåˆ— + (id)currentQueue; èŽ·å–å½“å‰é˜Ÿåˆ—ï¼Œå¦‚æžœå½“å‰çº¿ç¨‹ä¸æ˜¯åœ¨ NSOperationQueue ä¸Šè¿è¡Œåˆ™è¿”å›ž nilã€‚ + (id)mainQueue; èŽ·å–ä¸»é˜Ÿåˆ—ã€‚ 6 åŽè®°è™½ç„¶æ€»ç»“äº†å¾ˆå¤šï¼Œä½†è¿˜æœ‰å¾ˆå¤šå†…å®¹æ²¡æœ‰æ¶‰åŠå’Œæ·±å…¥ã€‚ç”±äºŽä¸ªäººèƒ½åŠ›æœ‰é™ï¼Œæ—¶é—´ç´§å‡‘ï¼ˆå®žé™…æˆ‘å·²ç»èŠ±äº†å¾ˆå¤šæ—¶é—´ðŸ˜’ðŸ¤¦â€â™€ï¸ðŸ¤¦â€â™€ï¸ï¼‰ï¼Œæ–‡ä¸­éš¾å…æœ‰é”™è¯¯ï¼Œå¸Œæœ›å°ä¼™ä¼´æ‰¹è¯„æŒ‡æ­£ã€‚ ç¤ºä¾‹ä»£ç ï¼šandyRon/iOS-Multithreading å‚è€ƒï¼šå…³äºŽiOSå¤šçº¿ç¨‹ï¼Œæˆ‘è¯´ï¼Œä½ å¬ï¼Œæ²¡å‡†ä½ å°±æ‡‚äº†ï¼è°ˆiOSå¤šçº¿ç¨‹(NSThreadã€NSOperationã€GCD)ç¼–ç¨‹iOSå¤šçº¿ç¨‹ï¼šã€ŽGCDã€è¯¦å°½æ€»ç»“iOSå¤šçº¿ç¨‹ï¼šã€Žpthreadã€NSThreadã€è¯¦å°½æ€»ç»“iOSå¤šçº¿ç¨‹ï¼šã€ŽNSOperationã€NSOperationQueueã€è¯¦å°½æ€»ç»“å…³äºŽiOSå¤šçº¿ç¨‹ï¼Œä½ çœ‹æˆ‘å°±å¤Ÿäº†Grand Central Dispatch (GCD) and Dispatch Queues in Swift 3WWDC-2017-Modernizing Grand Central Dispatch Usage]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>Multithreading</tag>
        <tag>GCD</tag>
        <tag>NSThread</tag>
        <tag>NSOperation</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OCä¸­çš„é”®/å€¼ç¼–ç (KVC)]]></title>
    <url>%2F2018%2Fios-oc-kvc-begin.html</url>
    <content type="text"><![CDATA[1. KVC çš„å®šä¹‰é”®/å€¼ç¼–ç (Key-value codingï¼ŒKVC) å¯ä»¥å…è®¸å¼€å‘è€…é€šè¿‡Keyåè®¿é—®å¯¹è±¡çš„å±žæ€§æˆ–ç»™å¯¹è±¡çš„å±žæ€§èµ‹å€¼, è€Œä¸éœ€è¦è°ƒç”¨æ˜Žç¡®çš„å­˜å–æ–¹æ³•ï¼Œå¹¶æœ‰ä¸€ç»„apiä¾›å¼€å‘è€…ä½¿ç”¨ï¼Œåƒæ“ä½œå­—å…¸ä¸€æ ·æ“ä½œå¯¹è±¡å±žæ€§/æˆå‘˜å˜é‡/å…³è”å¯¹è±¡ã€‚è¿™æ ·å°±å¯ä»¥åœ¨ è¿è¡Œæ—¶åŠ¨æ€åœ°è®¿é—®å’Œä¿®æ”¹ å¯¹è±¡çš„å±žæ€§ã€‚è€Œä¸æ˜¯åœ¨ç¼–è¯‘æ—¶ç¡®å®šã€‚è¿™ç§æœºåˆ¶ä¸å±žäºŽObjective-Cè¯­è¨€çš„ç‰¹æ€§ï¼Œè€Œæ˜¯Cocoaæä¾›çš„ä¸€ç§ç‰¹æ€§ã€‚ é€šè¿‡å®šä¹‰ä¸€ä¸ªNSObjectçš„ç±»åˆ«NSKeyValueCodingæ¥å®žçŽ°KVCåŠŸèƒ½ã€‚å› æ­¤æ‰€æœ‰ç»§æ‰¿äº†NSObjectçš„ç±»éƒ½æ”¯æŒKVCã€‚NSKeyValueCodingçš„å››ä¸ªé‡è¦æ–¹æ³•ï¼š1234- (nullable id)valueForKey:(NSString *)key; //ç›´æŽ¥é€šè¿‡Keyæ¥å–å€¼- (void)setValue:(nullable id)value forKey:(NSString *)key; //é€šè¿‡Keyæ¥è®¾å€¼- (nullable id)valueForKeyPath:(NSString *)keyPath; //é€šè¿‡KeyPathæ¥å–å€¼- (void)setValue:(nullable id)value forKeyPath:(NSString *)keyPath; //é€šè¿‡KeyPathæ¥è®¾å€¼ NSKeyValueCodingè¿˜æœ‰å…¶å®ƒè®¸å¤šæ–¹æ³•ï¼Œæˆ‘åˆ—ä¸¾ä¸€äº›ï¼Œè¯¦ç»†å¯æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ NSKeyValueCodingï¼š1234567891011121314151617181920+ (BOOL)accessInstanceVariablesDirectly;//é»˜è®¤è¿”å›žYESï¼Œè¡¨ç¤ºå¦‚æžœæ²¡æœ‰æ‰¾åˆ°set&lt;Key&gt;æ–¹æ³•çš„è¯ï¼Œä¼šæŒ‰ç…§_&lt;key&gt;ï¼Œ_isKeyï¼Œkeyï¼ŒisKeyçš„é¡ºåºæœç´¢æˆå‘˜ï¼Œè®¾ç½®æˆNOå°±ä¸è¿™æ ·æœç´¢- (BOOL)validateValue:(inout id __nullable * __nonnull)ioValue forKey:(NSString *)inKey error:(out NSError **)outError;//KVCæä¾›å±žæ€§å€¼æ­£ç¡®æ€§éªŒè¯çš„APIï¼Œå®ƒå¯ä»¥ç”¨æ¥æ£€æŸ¥setçš„å€¼æ˜¯å¦æ­£ç¡®ã€ä¸ºä¸æ­£ç¡®çš„å€¼åšä¸€ä¸ªæ›¿æ¢å€¼æˆ–è€…æ‹’ç»è®¾ç½®æ–°å€¼å¹¶è¿”å›žé”™è¯¯åŽŸå› ã€‚- (NSMutableArray *)mutableArrayValueForKey:(NSString *)key;//è¿™æ˜¯é›†åˆæ“ä½œçš„APIï¼Œé‡Œé¢è¿˜æœ‰ä¸€ç³»åˆ—è¿™æ ·çš„APIï¼Œå¦‚æžœå±žæ€§æ˜¯ä¸€ä¸ªNSMutableArrayï¼Œé‚£ä¹ˆå¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•æ¥è¿”å›žã€‚- (nullable id)valueForUndefinedKey:(NSString *)key;//åœ¨å–å€¼æ—¶ï¼Œå¦‚æžœKeyä¸å­˜åœ¨ï¼Œä¸”KVCæ— æ³•æœç´¢åˆ°ä»»ä½•å’ŒKeyæœ‰å…³çš„å­—æ®µæˆ–è€…å±žæ€§(æˆ–è€…+ (BOOL)accessInstanceVariablesDirectly;æ–¹æ³•è¿”å›žNOæ—¶)ï¼Œåˆ™ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œé»˜è®¤æ˜¯æŠ›å‡º NSUndefinedKeyExceptionå¼‚å¸¸ã€‚- (void)setValue:(nullable id)value forUndefinedKey:(NSString *)key;//å’Œä¸Šä¸€ä¸ªæ–¹æ³•ç›¸å¯¹åº”ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥è®¾å€¼ã€‚- (void)setNilValueForKey:(NSString *)key;//å¦‚æžœä½ åœ¨SetValueæ–¹æ³•æ—¶é¢ç»™Valueä¼ nilï¼Œåˆ™ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•- (NSDictionary&lt;NSString *, id&gt; *)dictionaryWithValuesForKeys:(NSArray&lt;NSString *&gt; *)keys;//è¾“å…¥ä¸€ç»„key,è¿”å›žè¯¥ç»„keyå¯¹åº”çš„Valueï¼Œå†è½¬æˆå­—å…¸è¿”å›žï¼Œç”¨äºŽå°†Modelè½¬åˆ°å­—å…¸ã€‚ 2 KVCæ˜¯å¦‚ä½•å¯»æ‰¾Key2.1 è®¾ç½®å€¼å½“è°ƒç”¨setValue:forKey:æ–¹æ³•æ¥è®¾ç½®å±žæ€§å€¼æ—¶ï¼Œæ‰§è¡Œæœºåˆ¶å¦‚ä¸‹ï¼š å…ˆè°ƒç”¨setteræ–¹æ³•set&lt;Key&gt;ï¼šå±žæ€§å€¼ å¦‚æžœæ²¡æœ‰æ‰¾åˆ°setteræ–¹æ³•ï¼ŒKVCå°±ä¼šæ£€æµ‹+ (BOOL)accessInstanceVariablesDirectlyçš„è¿”å›žå€¼ï¼Œæ˜¯é»˜è®¤å€¼YES,å°±æŒ‰ç…§_&lt;key&gt;ï¼Œ_isKeyï¼Œkeyï¼ŒisKeyçš„é¡ºåºä¸€ä¸€æŸ¥æ‰¾ã€‚åªè¦å­˜åœ¨_&lt;key&gt;ï¼Œæ— è®ºè¯¥å˜é‡æ˜¯åœ¨ç±»æŽ¥å£å¤„å®šä¹‰ï¼Œè¿˜æ˜¯åœ¨ç±»å®žçŽ°å¤„å®šä¹‰ï¼Œä¹Ÿä¸ç®¡æ˜¯ä»€ä¹ˆè®¿é—®ä¿®é¥°ç¬¦ï¼ŒKVCéƒ½å¯ä»¥å¯¹å…¶è®¿é—®ã€‚ å¦‚æžœæ²¡æœ‰setteræ–¹æ³•ï¼Œä¹Ÿæ²¡æ‰¾åˆ°_&lt;key&gt;ï¼Œ_isKeyï¼Œkeyï¼ŒisKeyä¸­çš„ä»»ä½•ä¸€ä¸ªï¼ŒKVCå°±ä¼šæ‰§è¡Œæ–¹æ³•- (void)setValue:(nullable id)value forUndefinedKey:(NSString *)key;ï¼Œé»˜è®¤æ˜¯æŠ›å‡ºå¼‚å¸¸ã€‚ ä»£ç ç¤ºä¾‹ï¼ˆandyRon/KVCDemo1ï¼‰ï¼š1234567891011121314151617181920212223242526272829303132@interface Dog : NSObject@end@implementation Dog&#123; NSString* toSetName; NSString* isName; NSString* name; NSString* _name; NSString* _isName;&#125;+(BOOL)accessInstanceVariablesDirectly&#123; return NO;&#125;-(id)valueForUndefinedKey:(NSString *)key&#123; NSLog(@&quot;å–å€¼å‡ºçŽ°å¼‚å¸¸ï¼Œkeyä¸ºï¼š%@çš„å˜é‡ä¸å­˜åœ¨&quot;,key); return nil;&#125;-(void)setValue:(id)value forUndefinedKey:(NSString *)key&#123; NSLog(@&quot;è®¾ç½®å€¼å‡ºçŽ°å¼‚å¸¸ï¼Œkeyä¸ºï¼š%@çš„å˜é‡ä¸å­˜åœ¨&quot;,key);&#125;@endint main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; // insert code here... Dog* dog = [Dog new]; [dog setValue:@&quot;newNameValue&quot; forKey:@&quot;name&quot;]; NSString* toSetName = [dog valueForKey:@&quot;toSetName&quot;]; NSLog(@&quot;%@&quot;,toSetName); &#125; return 0;&#125; æ‰“å°ç»“æžœï¼š123KVCDemo1[5107:12399654] è®¾ç½®å€¼å‡ºçŽ°å¼‚å¸¸ï¼Œkeyä¸ºï¼šnameçš„å˜é‡ä¸å­˜åœ¨KVCDemo1[5107:12399654] å–å€¼å‡ºçŽ°å¼‚å¸¸ï¼Œkeyä¸ºï¼štoSetNameçš„å˜é‡ä¸å­˜åœ¨KVCDemo1[5107:12399654] (null) é‡å†™+(BOOL)accessInstanceVariablesDirectlyæ–¹æ³•è®©å…¶è¿”å›žNOåŽ,KVCæœºåˆ¶å°±ä¸ä¼šå®žçŽ°ï¼Œå°±ç›´æŽ¥è°ƒç”¨- (nullable id)valueForUndefinedKey:(NSString *)key;æˆ–- (void)setValue:(nullable id)value forUndefinedKey:(NSString *)key; ç¨å¾®ä¿®æ”¹ä»¥ä¸‹ä»£ç ï¼Œçœ‹ç¤ºä¾‹ï¼ˆandyRon/KVCDemo2ï¼‰ï¼š123456789101112131415161718192021222324252627282930313233343536@interface Dog : NSObject@end@implementation Dog&#123; NSString* toSetName; NSString* isName; NSString* _name; NSString* _isName;&#125; -(void)setName:(NSString*)name&#123; toSetName = name; &#125;-(NSString*)getName&#123; return toSetName;&#125;+(BOOL)accessInstanceVariablesDirectly&#123; return NO;&#125;-(id)valueForUndefinedKey:(NSString *)key&#123; NSLog(@&quot;å–å€¼å‡ºçŽ°å¼‚å¸¸ï¼Œkeyä¸ºï¼š%@çš„å˜é‡ä¸å­˜åœ¨&quot;,key); return nil;&#125;-(void)setValue:(id)value forUndefinedKey:(NSString *)key&#123; NSLog(@&quot;è®¾ç½®å€¼å‡ºçŽ°å¼‚å¸¸ï¼Œkeyä¸ºï¼š%@çš„å˜é‡ä¸å­˜åœ¨&quot;,key);&#125;@endint main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; Dog* dog = [Dog new]; [dog setValue:@&quot;newNameValue&quot; forKey:@&quot;name&quot;]; NSString* name = [dog valueForKey:@&quot;name&quot;]; NSLog(@&quot;%@&quot;,name); &#125; return 0;&#125; æ‰“å°ç»“æžœï¼š1KVCDemo2[5323:12426199] newNameValue è™½ç„¶+(BOOL)accessInstanceVariablesDirectlyæ–¹æ³•ç»“æžœè¿˜æ˜¯NOï¼Œä½†å› ä¸ºæœ‰äº†setterå’Œgetteræ–¹æ³•å°±ä¸ä¼šå‡ºçŽ°å¼‚å¸¸äº†ã€‚å½“+(BOOL)accessInstanceVariablesDirectlyç»“æžœä¸ºYESï¼Œçš„ðŸŒ°ä»£ç æˆ‘å°±ä¸åˆ—å‡ºäº†ï¼Œå¯æŸ¥çœ‹andyRon/KVCDemo3ã€‚ 2.2 KVCå–å€¼å¯¹äºŽå–å€¼æ–¹æ³•valueForKey:, KVCå¯¹keyçš„æŸ¥è¯¢æ–¹å¼ä¸åŒäºŽsetValue:forKey:,å¦‚ä¸‹ï¼š é¦–å…ˆæŒ‰get&lt;Key&gt;,&lt;key&gt;,is&lt;Key&gt;çš„é¡ºåºæ–¹æ³•æŸ¥æ‰¾getteræ–¹æ³•ï¼Œæ‰¾åˆ°çš„è¯ä¼šç›´æŽ¥è°ƒç”¨ã€‚å¦‚æžœæ˜¯BOOLæˆ–è€…Intç­‰å€¼ç±»åž‹ï¼Œ ä¼šå°†å…¶åŒ…è£…æˆä¸€ä¸ªNSNumberå¯¹è±¡ã€‚ å¦‚æžœgetteræ²¡æœ‰æ‰¾åˆ°ï¼ŒKVCåˆ™ä¼šæŸ¥æ‰¾countOf&lt;Key&gt;,objectIn&lt;Key&gt;AtIndexæˆ–&lt;Key&gt;AtIndexesæ ¼å¼çš„æ–¹æ³•ã€‚å¦‚æžœæœ‰ä¸€ä¸ªè¢«æ‰¾åˆ°ï¼Œé‚£ä¹ˆå°±ä¼šè¿”å›žä¸€ä¸ªå¯ä»¥å“åº”NSArrayæ‰€æœ‰æ–¹æ³•çš„ä»£ç†é›†åˆ(å®ƒæ˜¯NSKeyValueArrayï¼Œæ˜¯NSArrayçš„å­ç±»)ï¼Œè°ƒç”¨è¿™ä¸ªä»£ç†é›†åˆçš„æ–¹æ³•ï¼Œæˆ–è€…è¯´ç»™è¿™ä¸ªä»£ç†é›†åˆå‘é€å±žäºŽNSArrayçš„æ–¹æ³•ï¼Œå°±ä¼šä»¥countOf&lt;Key&gt;,objectIn&lt;Key&gt;AtIndexæˆ–&lt;Key&gt;AtIndexesè¿™å‡ ä¸ªæ–¹æ³•ç»„åˆçš„å½¢å¼è°ƒç”¨ã€‚è¿˜æœ‰ä¸€ä¸ªå¯é€‰çš„get&lt;Key&gt;:range:æ–¹æ³•ã€‚æ‰€ä»¥ä½ æƒ³é‡æ–°å®šä¹‰KVCçš„ä¸€äº›åŠŸèƒ½ï¼Œä½ å¯ä»¥æ·»åŠ è¿™äº›æ–¹æ³•ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ä½ çš„æ–¹æ³•åè¦ç¬¦åˆKVCçš„æ ‡å‡†å‘½åæ–¹æ³•ï¼ŒåŒ…æ‹¬æ–¹æ³•ç­¾åã€‚ å¦‚æžœä¸Šé¢çš„æ–¹æ³•æ²¡æœ‰æ‰¾åˆ°ï¼Œé‚£ä¹ˆä¼šåŒæ—¶æŸ¥æ‰¾countOf&lt;Key&gt;ï¼ŒenumeratorOf&lt;Key&gt;,memberOf&lt;Key&gt;æ ¼å¼çš„æ–¹æ³•ã€‚å¦‚æžœè¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ‰¾åˆ°ï¼Œé‚£ä¹ˆå°±è¿”å›žä¸€ä¸ªå¯ä»¥å“åº”NSSetæ‰€çš„æ–¹æ³•çš„ä»£ç†é›†åˆï¼Œå’Œä¸Šé¢ä¸€æ ·ï¼Œç»™è¿™ä¸ªä»£ç†é›†åˆå‘NSSetçš„æ¶ˆæ¯ï¼Œå°±ä¼šä»¥countOf&lt;Key&gt;ï¼ŒenumeratorOf&lt;Key&gt;,memberOf&lt;Key&gt;ç»„åˆçš„å½¢å¼è°ƒç”¨ã€‚ åœ¨ç±»è‡ªå®šä¹‰äº†KVCçš„å®žçŽ°ï¼Œå¹¶ä¸”å®žçŽ°äº†ä¸Šé¢çš„æ–¹æ³•ï¼Œå°±å¯ä»¥å°†è¿”å›žçš„å¯¹è±¡å½“æ•°ç»„(NSArray)ç”¨äº† å¦‚æžœè¿˜æ²¡æœ‰æ‰¾åˆ°ï¼Œå†æ£€æŸ¥ç±»æ–¹æ³•+ (BOOL)accessInstanceVariablesDirectly,å¦‚æžœè¿”å›žYES(é»˜è®¤è¡Œä¸º)ï¼Œé‚£ä¹ˆå’Œå…ˆå‰çš„è®¾å€¼ä¸€æ ·ï¼Œä¼šæŒ‰_,_is,,isçš„é¡ºåºæœç´¢æˆå‘˜å˜é‡åï¼Œè¿™é‡Œä¸æŽ¨èè¿™ä¹ˆåšï¼Œå› ä¸ºè¿™æ ·ç›´æŽ¥è®¿é—®å®žä¾‹å˜é‡ç ´åäº†å°è£…æ€§ï¼Œä½¿ä»£ç æ›´è„†å¼±ã€‚å¦‚æžœé‡å†™äº†ç±»æ–¹æ³•+ (BOOL)accessInstanceVariablesDirectlyè¿”å›žNOçš„è¯ï¼Œé‚£ä¹ˆä¼šç›´æŽ¥è°ƒç”¨valueForUndefinedKey: ç¤ºä¾‹ä»£ç ï¼ˆandyRon/KVCDemo4ï¼‰ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960@interface TwoTimesArray : NSObject-(void)incrementCount;-(NSUInteger)countOfNumbers;-(id)objectInNumbersAtIndex:(NSUInteger)index;@end@interface TwoTimesArray()@property (nonatomic,readwrite,assign) NSUInteger count;@property (nonatomic,copy) NSString* arrName;@end@implementation TwoTimesArray-(void)incrementCount&#123; self.count ++;&#125;-(NSUInteger)countOfNumbers&#123; return self.count;&#125;-(id)objectInNumbersAtIndex:(NSUInteger)index&#123; //å½“keyä½¿ç”¨numbersæ—¶ï¼ŒKVCä¼šæ‰¾åˆ°è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚ return @(index * 2);&#125;-(NSInteger)getNum&#123; //ç¬¬ä¸€ä¸ª,è‡ªå·±ä¸€ä¸ªä¸€ä¸ªæ³¨é‡Šè¯• return 10;&#125;-(NSInteger)num&#123; //ç¬¬äºŒä¸ª return 11;&#125;-(NSInteger)isNum&#123; //ç¬¬ä¸‰ä¸ª return 12;&#125;@endint main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; TwoTimesArray* arr = [TwoTimesArray new]; NSNumber* num = [arr valueForKey:@&quot;num&quot;]; NSLog(@&quot;%@&quot;,num); id ar = [arr valueForKey:@&quot;numbers&quot;]; NSLog(@&quot;%@&quot;,NSStringFromClass([ar class])); NSLog(@&quot;0:%@ 1:%@ 2:%@ 3:%@&quot;,ar[0],ar[1],ar[2],ar[3]); [arr incrementCount]; //countåŠ 1 NSLog(@&quot;%lu&quot;,(unsigned long)[ar count]); //æ‰“å°å‡º1 [arr incrementCount]; //countå†åŠ 1 NSLog(@&quot;%lu&quot;,(unsigned long)[ar count]); //æ‰“å°å‡º2 [arr setValue:@&quot;newName&quot; forKey:@&quot;arrName&quot;]; NSString* name = [arr valueForKey:@&quot;arrName&quot;]; NSLog(@&quot;%@&quot;,name); &#125; return 0;&#125; ç»“æžœï¼š123456KVCDemo4[25723:3947658] 10KVCDemo4[25723:3947658] NSKeyValueArrayKVCDemo4[25723:3947658] 0:0 1:2 2:4 3:6KVCDemo4[25723:3947658] 1KVCDemo4[25723:3947658] 2KVCDemo4[25723:3947658] newName 3 KVCä¸­ä½¿ç”¨keyPathä¸€ä¸ªç±»çš„å±žæ€§å¯èƒ½æ˜¯å¦å¤–ä¸€ä¸ªç±»ï¼Œå¯ä»¥é€šè¿‡keyPathæ–¹å¼èŽ·å–æˆ–è®¾ç½®è¿™ç§å¤šå±‚ä¸­å±žæ€§ï¼Œè¿™ç§è§£å†³æ–¹å¼ä¹Ÿæ˜¯é€šè¿‡NSKeyValueCodingä¸­çš„æ–¹æ³•æ¥å®žçŽ°çš„ã€‚1234//é€šè¿‡KeyPathæ¥å–å€¼- (nullable id)valueForKeyPath:(NSString *)keyPath; //é€šè¿‡KeyPathæ¥è®¾å€¼- (void)setValue:(nullable id)value forKeyPath:(NSString *)keyPath; æ¥çœ‹çœ‹å…·ä½“ä»£ç ä¾‹å­ï¼ˆKVCKeyPathDemoï¼‰ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445@interface Address : NSObject@end@interface Address()@property (nonatomic,copy)NSString* country;@end@implementation Address- (id)valueForUndefinedKey:(NSString *)key &#123; return key;&#125;@end@interface People : NSObject@end@interface People()@property (nonatomic,copy) NSString* name;@property (nonatomic,strong) Address* address;@property (nonatomic,assign) NSInteger age;@end@implementation People@endint main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; People* people1 = [People new]; Address* add = [Address new]; add.country = @&quot;China&quot;; people1.address = add; NSString* country1 = people1.address.country; NSString * country2 = [people1 valueForKeyPath:@&quot;address.country&quot;]; NSLog(@&quot;country1:%@ country2:%@&quot;,country1,country2); [people1 setValue:@&quot;USA&quot; forKeyPath:@&quot;address.country&quot;]; country1 = people1.address.country; country2 = [people1 valueForKeyPath:@&quot;address.country&quot;]; NSString* city = [people1 valueForKeyPath:@&quot;address.city&quot;]; NSLog(@&quot;country1:%@ country2:%@ city:%@&quot;,country1, country2, city); &#125; return 0;&#125; æ‰“å°ç»“æžœï¼š12KVCKeyPathDemo[6330:12568821] country1:China country2:ChinaKVCKeyPathDemo[6330:12568821] country1:USA country2:USA city:city keyPathä¸­ï¼Œkeyä¹‹é—´ç”¨.åˆ†éš”ï¼Œå½“keyPathå‡ºçŽ°é”™è¯¯æ—¶ï¼Œå°±ä¼šè°ƒç”¨valueForUndefinedKey:keyæ–¹æ³•ã€‚ 4 KVCçš„å¼‚å¸¸å¤„ç†ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯keyæˆ–keyPathé”™è¯¯ï¼Œä¸Šé¢ä¹Ÿéƒ½æåˆ°è¿‡ï¼Œå°±æ˜¯è°ƒç”¨valueForUndefinedKey:keyæ–¹æ³•ã€‚ å¦ä¸€ç§æƒ…å†µæ˜¯åœ¨ä½¿ç”¨setValue:forKey:æ–¹æ³•æ—¶å€¼è®¾ç½®ä¸ºniläº†ï¼Œè¿™æ˜¯ä¸è¢«å…è®¸çš„ï¼Œä¼šè°ƒç”¨setNilValueForKey:æ–¹æ³•ã€‚1234567@implementation People-(void)setNilValueForKey:(NSString *)key&#123; NSLog(@&quot;ä¸èƒ½å°†%@è®¾æˆnil&quot;,key);&#125;@end 1[people setValue:nil forKey:@&quot;age&quot;]; 5 KVCå¤„ç†éžå¯¹è±¡å’Œè‡ªå®šä¹‰å¯¹è±¡valueForKey:æ€»æ˜¯è¿”å›žä¸€ä¸ªidå¯¹è±¡ï¼Œå¦‚æžœåŽŸæœ¬çš„å˜é‡ç±»åž‹æ˜¯å€¼ç±»åž‹æˆ–è€…ç»“æž„ä½“ï¼Œè¿”å›žå€¼ä¼šå°è£…æˆNSNumberæˆ–è€…NSValueå¯¹è±¡ã€‚è¿™ä¸¤ä¸ªç±»ä¼šå¤„ç†ä»Žæ•°å­—ï¼Œå¸ƒå°”å€¼åˆ°æŒ‡é’ˆå’Œç»“æž„ä½“ä»»ä½•ç±»åž‹ã€‚ç„¶åŽå¼€ä»¥è€…éœ€è¦æ‰‹åŠ¨è½¬æ¢æˆåŽŸæ¥çš„ç±»åž‹ã€‚å°½ç®¡valueForKeyï¼šä¼šè‡ªåŠ¨å°†å€¼ç±»åž‹å°è£…æˆå¯¹è±¡ï¼Œä½†æ˜¯setValue:forKey:å´ä¸è¡Œã€‚ä½ å¿…é¡»æ‰‹åŠ¨å°†å€¼ç±»åž‹è½¬æ¢æˆNSNumberæˆ–è€…NSValueç±»åž‹ï¼Œæ‰èƒ½ä¼ é€’è¿‡åŽ»ã€‚ å¯¹äºŽè‡ªå®šä¹‰å¯¹è±¡ï¼ŒKVCä¹Ÿä¼šæ­£ç¡®åœ°è®¾å€¼å’Œå–å€¼ã€‚å› ä¸ºä¼ é€’è¿›åŽ»å’Œå–å‡ºæ¥çš„éƒ½æ˜¯idç±»åž‹ï¼Œæ‰€ä»¥éœ€è¦å¼€å‘è€…è‡ªå·±æ‹…ä¿ç±»åž‹çš„æ­£ç¡®æ€§ï¼Œè¿è¡Œæ—¶Objective-Cåœ¨å‘é€æ¶ˆæ¯çš„ä¼šæ£€æŸ¥ç±»åž‹ï¼Œå¦‚æžœé”™è¯¯ä¼šç›´æŽ¥æŠ›å‡ºå¼‚å¸¸ã€‚ 6 KVCå’Œå®¹å™¨ç±»å¯¹è±¡çš„å±žæ€§å¯ä»¥æ˜¯ä¸€å¯¹ä¸€çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€å¯¹å¤šçš„ã€‚ä¸€å¯¹å¤šçš„å±žæ€§è¦ä¹ˆæ˜¯æœ‰åºçš„(æ•°ç»„)ï¼Œè¦ä¹ˆæ˜¯æ— åºçš„(é›†åˆ)ã€‚ ä¸å¯å˜çš„æœ‰åºå®¹å™¨å±žæ€§(NSArray)å’Œæ— åºå®¹å™¨å±žæ€§(NSSet)ä¸€èˆ¬å¯ä»¥ä½¿ç”¨valueForKey:æ¥èŽ·å–ã€‚ä½†ä¹Ÿå¯ä»¥åˆ©ç”¨æ›´çµæ´»çš„æ–¹æ³•æ¥ç®¡ç†ï¼Œæ¯”å¦‚ï¼š- (NSMutableArray *)mutableArrayValueForKey:(NSString *)key;å®žä¾‹ä»£ç ï¼ˆKVCDemo6ï¼‰:12345678910111213141516171819202122232425262728293031323334353637383940@interface Demo : NSObject@property (nonatomic,strong) NSMutableArray* arr;@end@implementation Demo-(id)init&#123; if (self == [super init])&#123; _arr = [NSMutableArray new]; [self addObserver:self forKeyPath:@&quot;arr&quot; options:NSKeyValueObservingOptionNew|NSKeyValueObservingOptionOld context:nil]; &#125; return self;&#125;// Informs the observing object when the value at the specified key path relative to the observed object has changed.-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary&lt;NSString *,id&gt; *)change context:(void *)context&#123; NSLog(@&quot;%@&quot;, self.arr);&#125;-(void)dealloc&#123; [self removeObserver:self forKeyPath:@&quot;arr&quot;]; //ä¸€å®šè¦åœ¨deallocé‡Œé¢ç§»é™¤è§‚å¯Ÿ&#125;-(void)addItem&#123; [_arr addObject:@&quot;addItem&quot;];&#125;-(void)addItemObserver&#123; [[self mutableArrayValueForKey:@&quot;arr&quot;] addObject:@&quot;addItemObserver&quot;];&#125;-(void)removeItemObserver&#123; [[self mutableArrayValueForKey:@&quot;arr&quot;] removeLastObject];&#125;@endint main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; Demo* d = [Demo new]; [d addItem]; [d addItemObserver]; [d removeItemObserver]; &#125; return 0;&#125; ç»“æžœï¼š1234567KVCDemo6[11393:3534594] ( addItem, addItemObserver)KVCDemo6[11393:3534594] ( addItem) å½“åªæ˜¯æ™®é€šåœ°è°ƒç”¨[_arr addObject:@&quot;addItem&quot;];æ—¶ï¼ŒObserverå¹¶ä¸ä¼šå›žè°ƒï¼Œåªæœ‰[[self mutableArrayValueForKey:@&quot;arr&quot;] addObject:@&quot;addItemObserver&quot;];è¿™æ ·å†™æ—¶æ‰èƒ½æ­£ç¡®åœ°è§¦å‘KVOã€‚ å¯¹äºŽæ— åºå®¹å™¨å±žæ€§(NSSet)æœ‰å¯¹åº”çš„æ–¹æ³•ï¼š- (NSMutableSet *)mutableSetValueForKey:(NSString *)key; å¦å¤–è¿˜æœ‰å¯¹åº”çš„keyPathæ–¹æ³•ï¼š12- (NSMutableArray *)mutableArrayValueForKeyPath:(NSString *)keyPath;- (NSMutableSet *)mutableSetValueForKeyPath:(NSString *)keyPath; 7 KVCå’Œå­—å…¸KVCä¸Žå­—å…¸ç›¸å…³çš„æ–¹æ³•ï¼š12- (NSDictionary&lt;NSString *, id&gt; *)dictionaryWithValuesForKeys:(NSArray&lt;NSString *&gt; *)keys;- (void)setValuesForKeysWithDictionary:(NSDictionary&lt;NSString *, id&gt; *)keyedValues; ç¤ºä¾‹ä»£ç ï¼ˆKVCDemo7ï¼‰ï¼š123456789101112131415161718192021222324252627282930313233343536@interface Address : NSObject@end@interface Address()@property (nonatomic,copy)NSString* country;@property (nonatomic,copy)NSString* province;@property (nonatomic,copy)NSString* city;@property (nonatomic,copy)NSString* district;@end@implementation Address@endint main(int argc, const char * argv[]) &#123; @autoreleasepool &#123; Address *address = [Address new]; address.country = @&quot;ä¸­å›½&quot;; address.province = @&quot;ä¸Šæµ·&quot;; address.city = @&quot;ä¸Šæµ·&quot;; address.district = @&quot;æµ¦ä¸œ&quot;; NSArray* arr = @[@&quot;country&quot;,@&quot;province&quot;,@&quot;district&quot;]; NSDictionary* dict = [address dictionaryWithValuesForKeys:arr]; //æŠŠå¯¹åº”keyæ‰€æœ‰çš„å±žæ€§å…¨éƒ¨å–å‡ºæ¥ NSLog(@&quot;%@&quot;,dict); NSDictionary* modifyDict = @&#123;@&quot;country&quot;:@&quot;ç¾Žå›½&quot;,@&quot;province&quot;:@&quot;åŠ å·ž&quot;,@&quot;city&quot;:@&quot;æ—§é‡‘å±±&quot;&#125;; [address setValuesForKeysWithDictionary:modifyDict]; //ä¿®æ”¹çš„å±žæ€§ NSLog(@&quot;country:%@ province:%@ city:%@&quot;,address.country, address.province, address.city); &#125; return 0;&#125; ç»“æžœï¼š1234567KVCDemo7[14135:3606256] &#123; country = &quot;\U4e2d\U56fd&quot;; district = &quot;\U6d66\U4e1c&quot;; province = &quot;\U4e0a\U6d77&quot;;&#125;KVCDemo7[14135:3606256] country:ç¾Žå›½ province:åŠ å·ž city:æ—§é‡‘å±±Program ended with exit code: 0 8 KVCçš„åº”ç”¨åœºæ™¯ åŠ¨æ€å–å€¼å’Œè®¾å€¼ ç”¨KVCæ¥è®¿é—®å’Œä¿®æ”¹ç§æœ‰å˜é‡ Modelå’Œå­—å…¸è½¬æ¢ ä¿®æ”¹ä¸€äº›æŽ§ä»¶çš„å†…éƒ¨å±žæ€§æœ‰çš„æ—¶å€™å¯ä»¥é€šè¿‡KVCä¿®æ”¹ä¸€äº›è‹¹æžœå®˜æ–¹æ²¡æœ‰å…¬å¼€çš„å±žæ€§ï¼Œæ¯”å¦‚UITextFieldä¸­çš„placeHolderTextã€‚è¿™ä¸ªæ—¶å€™ç”¨playgroundèƒ½å¾ˆæ–¹ä¾¿çš„æ¼”ç¤ºï¼ˆKVCDemo8ï¼‰ï¼š æ²¡æœ‰å…¬å¼€çš„å±žæ€§å¯é€šè¿‡runtimeçš„æ–¹å¼èŽ·å–(KVCDemo9):12345678910import UIKitvar count: UInt32 = 0let ivars = class_copyIvarList(UITextField.self, &amp;count)for i in 0 ..&lt; count &#123; let ivar = ivars![Int(i)] let name = ivar_getName(ivar) print(String(cString: name!))&#125;free(ivars) æ“ä½œé›†åˆ ç”¨KVCå®žçŽ°é«˜é˜¶æ¶ˆæ¯ä¼ é€’ ç”¨KVCä¸­çš„å‡½æ•°æ“ä½œé›†åˆ æœ€åŽå‚ç…§å‰è¾ˆçš„æ–‡ç«  iOSå¼€å‘æŠ€å·§ç³»åˆ—â€”è¯¦è§£KVC(æˆ‘å‘Šè¯‰ä½ KVCçš„ä¸€åˆ‡)å­¦ä¹ KVCï¼ŒåŠ¨æ‰‹å†™äº†å„ç§ç®€å•çš„ç¤ºä¾‹åŠ æ·±ç†è§£ï¼Œç”±äºŽç›®å‰KVCå®žé™…é¡¹ç›®ä¸­è¿ç”¨çš„è¿˜ä¸æ˜¯å¾ˆå¤šï¼Œæœ‰å¾ˆå¤šåœ°æ–¹ç†è§£çš„è¿˜ä¸å¤Ÿé€å½»ã€‚ ç¤ºä¾‹ä»£ç ï¼š andyRon/KVCDemo å‚è€ƒï¼šiOSå¼€å‘æŠ€å·§ç³»åˆ—â€”è¯¦è§£KVC(æˆ‘å‘Šè¯‰ä½ KVCçš„ä¸€åˆ‡)Key-Value Coding Programming Guide - Apple Developer]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>OC</tag>
        <tag>KVC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OSæ•°æ®æŒä¹…åŒ–å°ç»“]]></title>
    <url>%2F2018%2Fios-persistdata.html</url>
    <content type="text"><![CDATA[æŒä¹…åŒ–å°±æ˜¯æŠŠæ•°æ®ä¿å­˜åœ¨ç¡¬ç›˜ä¸Šè€Œä¸æ˜¯å†…å­˜é‡Œï¼Œç¨‹åºé‡å¯åŽæ•°æ®ä¸ä¼šæ¶ˆå¤±ã€‚iOSä¸­æ•°æ®æŒä¹…åŒ–æ–¹æ³•æœ‰ï¼šplistæ–‡ä»¶ï¼ˆå±žæ€§åˆ—è¡¨ï¼‰ã€UserDefaultsã€NSKeyedArchiverï¼ˆå½’æ¡£ï¼‰ã€SQLite3ã€CoreDataç­‰ï¼Œå¦å¤–è¿˜æœ‰FMDBï¼ˆç”¨OCå°è£…çš„SQLiteåº“ï¼‰ã€realmï¼ˆä»£æ›¿SQLite3å’ŒCoreDataæ–°çš„æ•°æ®åº“ï¼‰ã€‚ plistæŸäº›ç‰¹å®šçš„æ•°æ®ç±»åž‹ï¼Œå¯ä»¥é€šè¿‡XMLå½¢å¼å­˜å‚¨æˆplistæ–‡ä»¶ã€‚è¿™äº›æ•°æ®ç±»åž‹éƒ½æœ‰write(ToFile:)æ–¹æ³•ï¼ŒåŒ…æ‹¬ï¼š12345678910NSArray;NSMutableArray;NSDictionary;NSMutableDictionary;NSData;NSMutableData;NSString;NSMutableString;NSNumber;NSDate; ç¤ºä¾‹ä»£ç ï¼š1234567891011121314// èŽ·å¾—è·¯å¾„let fileManager = FileManager.defaultlet path = fileManager.urls(for: .documentDirectory, in: .userDomainMask).firstlet fileName = path?.appendingPathComponent(&quot;test.plist&quot;)// å­˜å‚¨ã€‚ å…¶ä¸­atomicallyè¡¨ç¤ºæ˜¯å¦éœ€è¦å…ˆå†™å…¥ä¸€ä¸ªè¾…åŠ©æ–‡ä»¶ï¼Œå†æŠŠè¾…åŠ©æ–‡ä»¶æ‹·è´åˆ°ç›®æ ‡æ–‡ä»¶åœ°å€ã€‚è¿™æ˜¯æ›´å®‰å…¨çš„å†™å…¥æ–‡ä»¶æ–¹æ³•ï¼Œä¸€èˆ¬éƒ½å†™trueã€‚let arr: NSArray = [123, 34]try? arr.write(toFile: (fileName?.path)!, atomically: true)// è¯»å–let res = NSArray(contentsOfFile: (fileName?.path)!)print((fileName?.path)!)print(res) UserDefaults123456789101112131415// èŽ·å¾—UserDefaultsæ–‡ä»¶let userDefaults = UserDefaults.standard// å‘æ–‡ä»¶ä¸­å†™å…¥å†…å®¹userDefaults.set(&quot;Andy&quot;, forKey: &quot;name&quot;)userDefaults.set(&quot;male&quot;, forKey: &quot;sex&quot;)userDefaults.set(100, forKey: &quot;age&quot;)// ç«‹å³ä¿å­˜userDefaults.synchronize()// è¯»å–æ–‡ä»¶let name = userDefaults.object(forKey: &quot;name&quot;)let sex = userDefaults.object(forKey: &quot;sex&quot;)let age = userDefaults.object(forKey: &quot;age&quot;)print(name, sex, age) å¦‚æžœæ²¡æœ‰è°ƒç”¨synchronizeæ–¹æ³•ï¼Œç³»ç»Ÿä¼šæ ¹æ®I/Oæƒ…å†µä¸å®šæ—¶åˆ»åœ°ä¿å­˜åˆ°æ–‡ä»¶ä¸­ã€‚æ‰€ä»¥å¦‚æžœéœ€è¦ç«‹å³å†™å…¥æ–‡ä»¶çš„å°±å¿…é¡»è°ƒç”¨synchronizeæ–¹æ³•. UserDefaultsé€‚åˆå­˜å‚¨å°‘é‡çš„æœ¬åœ°æ•°æ®ï¼Œæ¯”å¦‚è¦ä¿å­˜ä¸€ä¸ªç™»é™†ç•Œé¢çš„æ•°æ®ï¼Œç”¨æˆ·åã€å¯†ç ä¹‹ç±»çš„ã€‚ ç›¸å¯¹äºŽplistæ–‡ä»¶ï¼ŒUserDefaultsä¿å­˜æ•°æ®æ–¹ä¾¿ï¼Œä¸éœ€è¦åˆ›å»ºæ–‡ä»¶ï¼Œè¯»å–æ–‡ä»¶ã€‚ UserDefaultsä¿å­˜çš„æ•°æ®ä¹Ÿæ˜¯plistç±»åž‹æ–‡ä»¶ï¼Œåœ¨ç›®å½•Library/Preferences/é‡Œã€‚ NSKeyedArchiverï¼ˆå½’æ¡£ï¼‰éµå¾ªäº†NSCodingåè®®çš„å¯¹è±¡éƒ½å¯ä»¥é€šè¿‡NSKeyedArchiverå®žçŽ°åºåˆ—åŒ– å®žçŽ°NSCodingåè®®çš„ä¸¤ä¸ªæ–¹æ³• 1234567891011121314151617//è§£æ¡£- (id)initWithCoder:(NSCoder *)aDecoder &#123; if ([super init]) &#123; self.name = [aDecoder decodeObjectForKey:@&quot;name&quot;]; self.sex = [aDecoder decodeObjectForKey:@&quot;sex&quot;]; self.age = [aDecoder decodeIntegerForKey:@&quot;age&quot;]; &#125; return self;&#125;//å½’æ¡£- (void)encodeWithCoder:(NSCoder *)aCoder &#123; [aCoder encodeObject:self.name forKey:@&quot;name&quot;]; [aCoder encodeObject:self.sex forKey:@&quot;sex&quot;]; [aCoder encodeInteger:self.age forKey:@&quot;age&quot;];&#125; å½’æ¡£åŽçš„å¯¹è±¡å­˜å‚¨å’Œè¯»å– 1234567891011121314151617181920- (void)save &#123; NSString *file = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).firstObject stringByAppendingPathComponent:@&quot;person.data&quot;]; Person *person = [[Person alloc] init]; person.sex = @&quot;male&quot;; person.name = @&quot;Andy&quot;; person.age = 100; [NSKeyedArchiver archiveRootObject:person toFile:file];&#125;- (void)get &#123; NSString *file = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).firstObject stringByAppendingPathComponent:@&quot;person.data&quot;]; Person *person = [NSKeyedUnarchiver unarchiveObjectWithFile:file]; if (person) &#123; NSLog(@&quot;name: %@, sex: %@, age: %ld&quot;, person.name, person.sex, (long)person.age); &#125;&#125; SQLite3 æ‰“å¼€æ•°æ®åº“å¹¶åˆ›å»ºä¸€ä¸ªè¡¨ 123456789101112131415161718192021222324252627/** * æ‰“å¼€æ•°æ®åº“å¹¶åˆ›å»ºä¸€ä¸ªè¡¨ */- (void)openDatabase &#123; //1.è®¾ç½®æ–‡ä»¶å NSString *filename = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).firstObject stringByAppendingPathComponent:@&quot;person.db&quot;]; //2.æ‰“å¼€æ•°æ®åº“æ–‡ä»¶ï¼Œå¦‚æžœæ²¡æœ‰ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ NSInteger result = sqlite3_open(filename.UTF8String, &amp;_sqlite3); if (result == SQLITE_OK) &#123; NSLog(@&quot;æ‰“å¼€æ•°æ®åº“æˆåŠŸï¼&quot;); //3.åˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¡¨ char *errmsg = NULL; sqlite3_exec(_sqlite3, &quot;CREATE TABLE IF NOT EXISTS t_person(id integer primary key autoincrement, name text, age integer)&quot;, NULL, NULL, &amp;errmsg); if (errmsg) &#123; NSLog(@&quot;é”™è¯¯ï¼š%s&quot;, errmsg); &#125; else &#123; NSLog(@&quot;åˆ›è¡¨æˆåŠŸï¼&quot;); &#125; &#125; else &#123; NSLog(@&quot;æ‰“å¼€æ•°æ®åº“å¤±è´¥ï¼&quot;); &#125;&#125; æ’å…¥æ•°æ® 12345678910111213141516171819202122/** * å¾€è¡¨ä¸­æ’å…¥1000æ¡æ•°æ® */- (void)insertData &#123; NSString *nameStr; NSInteger age; for (NSInteger i = 0; i &lt; 1000; i++) &#123; nameStr = [NSString stringWithFormat:@&quot;andy-%d&quot;, arc4random_uniform(10000)]; age = arc4random_uniform(80) + 20; NSString *sql = [NSString stringWithFormat:@&quot;INSERT INTO t_person (name, age) VALUES(&apos;%@&apos;, &apos;%ld&apos;)&quot;, nameStr, age]; char *errmsg = NULL; sqlite3_exec(_sqlite3, sql.UTF8String, NULL, NULL, &amp;errmsg); if (errmsg) &#123; NSLog(@&quot;é”™è¯¯ï¼š%s&quot;, errmsg); &#125; &#125; NSLog(@&quot;æ’å…¥å®Œæ¯•ï¼&quot;);&#125; è¯»å–æ•°æ® 123456789101112131415161718192021/** * ä»Žè¡¨ä¸­è¯»å–æ•°æ® */- (void)readData &#123; NSMutableArray *mArray = [NSMutableArray arrayWithCapacity:1000]; char *sql = &quot;select name, age from t_person;&quot;; sqlite3_stmt *stmt; NSInteger result = sqlite3_prepare_v2(_sqlite3, sql, -1, &amp;stmt, NULL); if (result == SQLITE_OK) &#123; while (sqlite3_step(stmt) == SQLITE_ROW) &#123; char *name = (char *)sqlite3_column_text(stmt, 0); NSInteger age = sqlite3_column_int(stmt, 1); NSLog(@&quot;name: %s, age: %d&quot;, name, age); &#125; &#125; sqlite3_finalize(stmt);&#125; CoreDataä¹‹å‰çš„ç¬”è®°ï¼šå¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 17 ä½¿ç”¨Core Data ä»£ç ï¼šLearniOSByProject/115-PersistData å‚è€ƒï¼š æˆ‘è¦æ°¸è¿œåœ°è®°ä½ä½ ï¼ï¼ˆiOSä¸­å‡ ç§æ•°æ®æŒä¹…åŒ–æ–¹æ¡ˆï¼‰]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[åˆè¯†iOSäº‹æƒ…å¤„ç†æœºåˆ¶]]></title>
    <url>%2F2018%2Fios-event-begin.html</url>
    <content type="text"><![CDATA[äº‹ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼š äº‹ä»¶çš„äº§ç”Ÿå’Œä¼ é€’ï¼ˆäº‹ä»¶å¦‚ä½•ä»Žçˆ¶æŽ§ä»¶ä¼ é€’åˆ°å­æŽ§ä»¶å¹¶å¯»æ‰¾åˆ°æœ€åˆé€‚çš„viewã€å¯»æ‰¾æœ€åˆé€‚çš„viewçš„åº•å±‚å®žçŽ°ã€æ‹¦æˆªäº‹ä»¶çš„å¤„ç†ï¼‰-&gt;æ‰¾åˆ°æœ€åˆé€‚çš„viewåŽäº‹ä»¶çš„å¤„ç†ï¼ˆtouchesæ–¹æ³•çš„é‡å†™ï¼Œä¹Ÿå°±æ˜¯äº‹ä»¶çš„å“åº”ï¼‰ iOSä¸­çš„äº‹ä»¶å¯ä»¥åˆ†ä¸º3å¤§ç±»åž‹ï¼šè§¦æ‘¸äº‹ä»¶åŠ é€Ÿè®¡äº‹ä»¶è¿œç¨‹æŽ§åˆ¶äº‹ä»¶è¿™é‡Œåªè®¨è®ºiOSä¸­çš„è§¦æ‘¸äº‹ä»¶ã€‚ 1 å“åº”è€…å¯¹è±¡(UIResponder)åœ¨iOSä¸­ä¸æ˜¯ä»»ä½•å¯¹è±¡éƒ½èƒ½å¤„ç†äº‹ä»¶ï¼Œåªæœ‰ç»§æ‰¿äº†UIResponderçš„å¯¹è±¡æ‰èƒ½æŽ¥å—å¹¶å¤„ç†äº‹ä»¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œå“åº”è€…å¯¹è±¡â€ã€‚UIApplicationUIViewController,UIViewéƒ½ç»§æ‰¿äº†UIResponderï¼Œæ‰€ä»¥éƒ½èƒ½æŽ¥æ”¶å¹¶å¤„ç†äº‹ä»¶ã€‚ UIResponderä¸­å¤„ç†äº‹ä»¶çš„ç›¸å…³æ–¹æ³•1234567891011121314151617// è§¦æ‘¸äº‹ä»¶open func touchesBegan(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?)open func touchesMoved(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?)open func touchesEnded(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?)open func touchesCancelled(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?)// åŠ é€Ÿè®¡äº‹ä»¶@available(iOS 3.0, *)open func motionBegan(_ motion: UIEventSubtype, with event: UIEvent?)@available(iOS 3.0, *)open func motionEnded(_ motion: UIEventSubtype, with event: UIEvent?)@available(iOS 3.0, *)open func motionCancelled(_ motion: UIEventSubtype, with event: UIEvent?)// è¿œç¨‹æŽ§åˆ¶äº‹ä»¶@available(iOS 4.0, *)open func remoteControlReceived(with event: UIEvent?) 2 è§¦æ‘¸äº‹ä»¶çš„å¤„ç†ä»¥UIViewä¸ºä¾‹è¯´æ˜Žè§¦æ‘¸äº‹ä»¶çš„å¤„ç†12345678// ä¸€æ ¹æˆ–è€…å¤šæ ¹æ‰‹æŒ‡å¼€å§‹è§¦æ‘¸viewï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨open func touchesBegan(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?)// ä¸€æ ¹æˆ–è€…å¤šæ ¹æ‰‹æŒ‡åœ¨viewä¸Šç§»åŠ¨ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨ï¼ˆéšç€æ‰‹æŒ‡çš„ç§»åŠ¨ï¼Œä¼šæŒç»­è°ƒç”¨è¯¥æ–¹æ³•ï¼‰open func touchesMoved(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?)// ä¸€æ ¹æˆ–è€…å¤šæ ¹æ‰‹æŒ‡ç¦»å¼€viewï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨open func touchesEnded(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?)// è§¦æ‘¸ç»“æŸå‰ï¼ŒæŸä¸ªç³»ç»Ÿäº‹ä»¶(ä¾‹å¦‚ç”µè¯å‘¼å…¥)ä¼šæ‰“æ–­è§¦æ‘¸è¿‡ç¨‹ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨open func touchesCancelled(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?) touchesä¸­å­˜æ”¾çš„éƒ½æ˜¯UITouchå¯¹è±¡ å¦‚æžœä¸¤æ ¹æ‰‹æŒ‡åŒæ—¶è§¦æ‘¸ä¸€ä¸ªviewï¼Œé‚£ä¹ˆviewåªä¼šè°ƒç”¨ä¸€æ¬¡touchesBegan(_:with:)æ–¹æ³•ï¼Œtoucheså‚æ•°ä¸­è£…ç€2ä¸ªUITouchå¯¹è±¡ å¦‚æžœè¿™ä¸¤æ ¹æ‰‹æŒ‡ä¸€å‰ä¸€åŽåˆ†å¼€è§¦æ‘¸åŒä¸€ä¸ªviewï¼Œé‚£ä¹ˆviewä¼šåˆ†åˆ«è°ƒç”¨2æ¬¡touchesBegan(_:with:)æ–¹æ³•ï¼Œå¹¶ä¸”æ¯æ¬¡è°ƒç”¨æ—¶çš„toucheså‚æ•°ä¸­åªåŒ…å«ä¸€ä¸ªUITouchå¯¹è±¡ æƒ³å¤„ç†UIViewçš„è§¦æ‘¸äº‹ä»¶ï¼Œå¿…é¡»è‡ªå®šä¹‰UIViewå­ç±»ç»§æ‰¿è‡ªUIView 3 UITouchå¯¹è±¡3.1 UITouchçš„å±žæ€§å’Œæ–¹æ³•12345678910111213141516// è§¦æ‘¸äº§ç”Ÿæ—¶æ‰€å¤„çš„çª—å£open var window: UIWindow? &#123; get &#125;// è§¦æ‘¸äº§ç”Ÿæ—¶æ‰€å¤„çš„è§†å›¾open var view: UIView? &#123; get &#125;// è®°å½•äº†è§¦æ‘¸äº‹ä»¶äº§ç”Ÿæˆ–å˜åŒ–æ—¶çš„æ—¶é—´ï¼Œå•ä½æ˜¯ç§’open var timestamp: TimeInterval &#123; get &#125;// å½“å‰è§¦æ‘¸äº‹ä»¶æ‰€å¤„çš„çŠ¶æ€open var phase: UITouchPhase &#123; get &#125;// çŸ­æ—¶é—´å†…ç‚¹æŒ‰å±å¹•çš„æ¬¡æ•°ï¼Œå¯ä»¥æ ¹æ®tapCountåˆ¤æ–­å•å‡»ã€åŒå‡»æˆ–æ›´å¤šçš„ç‚¹å‡»open var tapCount: Int &#123; get &#125;// è¿”å›žå€¼è¡¨ç¤ºè§¦æ‘¸åœ¨viewä¸Šçš„ä½ç½®// è¿™é‡Œè¿”å›žçš„ä½ç½®æ˜¯é’ˆå¯¹viewçš„åæ ‡ç³»çš„ï¼ˆä»¥viewçš„å·¦ä¸Šè§’ä¸ºåŽŸç‚¹(0, 0)ï¼‰open func location(in view: UIView?) -&gt; CGPoint// å‰ä¸€ä¸ªè§¦æ‘¸ç‚¹çš„ä½ç½®open func previousLocation(in view: UIView?) -&gt; CGPoint 3.2 UITouchçš„ä½œç”¨ ä¿å­˜ç€è·Ÿæ‰‹æŒ‡ç›¸å…³çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è§¦æ‘¸çš„ä½ç½®ã€æ—¶é—´ã€é˜¶æ®µ å½“æ‰‹æŒ‡ç§»åŠ¨æ—¶ï¼Œç³»ç»Ÿä¼šæ›´æ–°åŒä¸€ä¸ªUITouchå¯¹è±¡ï¼Œä½¿ä¹‹èƒ½å¤Ÿä¸€ç›´ä¿å­˜è¯¥æ‰‹æŒ‡åœ¨çš„è§¦æ‘¸ä½ç½® å½“æ‰‹æŒ‡ç¦»å¼€å±å¹•æ—¶ï¼Œç³»ç»Ÿä¼šé”€æ¯ç›¸åº”çš„UITouchå¯¹è±¡ 4 iOSäº‹ä»¶çš„äº§ç”Ÿ å‘ç”Ÿè§¦æ‘¸äº‹ä»¶åŽï¼Œç³»ç»Ÿä¼šå°†è¯¥äº‹ä»¶åŠ å…¥åˆ°ä¸€ä¸ªç”±UIApplicationç®¡ç†çš„äº‹ä»¶é˜Ÿåˆ—ä¸­,å³å…ˆè¿›å…ˆå‡ºï¼Œå…ˆäº§ç”Ÿçš„äº‹ä»¶å…ˆå¤„ç†æ‰ç¬¦åˆå¸¸ç†ã€‚ UIApplicationä¼šä»Žäº‹ä»¶é˜Ÿåˆ—ä¸­å–å‡ºæœ€å‰é¢çš„äº‹ä»¶ï¼Œå¹¶å°†äº‹ä»¶åˆ†å‘ä¸‹åŽ»ä»¥ä¾¿å¤„ç†ï¼Œé€šå¸¸ï¼Œå…ˆå‘é€äº‹ä»¶ç»™åº”ç”¨ç¨‹åºçš„ä¸»çª—å£ï¼ˆkeyWindowï¼‰ã€‚ ä¸»çª—å£ä¼šåœ¨è§†å›¾å±‚æ¬¡ç»“æž„ä¸­æ‰¾åˆ°ä¸€ä¸ªæœ€åˆé€‚çš„è§†å›¾æ¥å¤„ç†è§¦æ‘¸äº‹ä»¶ï¼Œè¿™ä¹Ÿæ˜¯æ•´ä¸ªäº‹ä»¶å¤„ç†è¿‡ç¨‹çš„ç¬¬ä¸€æ­¥ã€‚æ‰¾åˆ°åˆé€‚çš„è§†å›¾æŽ§ä»¶åŽï¼Œå°±ä¼šè°ƒç”¨è§†å›¾æŽ§ä»¶çš„touchesæ–¹æ³•æ¥ä½œå…·ä½“çš„äº‹ä»¶å¤„ç†ã€‚ 5 iOSäº‹ä»¶çš„ä¼ é€’ è§¦æ‘¸äº‹ä»¶çš„ä¼ é€’æ˜¯ä»Žçˆ¶æŽ§ä»¶ä¼ é€’åˆ°å­æŽ§ä»¶ï¼Œä¹Ÿå°±æ˜¯UIApplication-&gt;window-&gt;å¯»æ‰¾å¤„ç†äº‹ä»¶æœ€åˆé€‚çš„view å¦‚æžœçˆ¶æŽ§ä»¶ä¸èƒ½æŽ¥å—è§¦æ‘¸äº‹ä»¶ï¼Œé‚£ä¹ˆå­æŽ§ä»¶å°±ä¸å¯èƒ½æŽ¥æ”¶åˆ°è§¦æ‘¸äº‹ä»¶ ç‚¹å‡»ä¸€ä¸ªUIViewæˆ–äº§ç”Ÿä¸€ä¸ªè§¦æ‘¸äº‹ä»¶Aï¼Œè¿™ä¸ªè§¦æ‘¸äº‹ä»¶Aä¼šè¢«æ·»åŠ åˆ°ç”±UIApplicationç®¡ç†çš„äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼ˆå³ï¼Œé¦–å…ˆæŽ¥æ”¶åˆ°äº‹ä»¶çš„æ˜¯UIApplicationï¼‰ã€‚ UIApplicationä¼šä»Žäº‹ä»¶å¯¹åˆ—ä¸­å–å‡ºæœ€å‰é¢çš„äº‹ä»¶ï¼ˆæ­¤å¤„å‡è®¾ä¸ºè§¦æ‘¸äº‹ä»¶Aï¼‰ï¼ŒæŠŠäº‹ä»¶Aä¼ é€’ç»™åº”ç”¨ç¨‹åºçš„ä¸»çª—å£ï¼ˆkeyWindowï¼‰ã€‚ 5.1 åº”ç”¨å¦‚ä½•æ‰¾åˆ°æœ€åˆé€‚çš„æŽ§ä»¶æ¥å¤„ç†äº‹ä»¶ï¼Ÿ é¦–å…ˆåˆ¤æ–­ä¸»çª—å£ï¼ˆkeyWindowï¼‰è‡ªå·±æ˜¯å¦èƒ½æŽ¥å—è§¦æ‘¸äº‹ä»¶ åˆ¤æ–­è§¦æ‘¸ç‚¹æ˜¯å¦åœ¨è‡ªå·±èº«ä¸Š å­æŽ§ä»¶æ•°ç»„ä¸­ä»ŽåŽå¾€å‰éåŽ†å­æŽ§ä»¶ï¼Œé‡å¤å‰é¢çš„ä¸¤ä¸ªæ­¥éª¤ï¼ˆæ‰€è°“ä»ŽåŽå¾€å‰éåŽ†å­æŽ§ä»¶ï¼Œå°±æ˜¯é¦–å…ˆæŸ¥æ‰¾å­æŽ§ä»¶æ•°ç»„ä¸­æœ€åŽä¸€ä¸ªå…ƒç´ ï¼Œç„¶åŽæ‰§è¡Œ1ã€2æ­¥éª¤ï¼‰ viewï¼Œæ¯”å¦‚å«åšfitViewï¼Œé‚£ä¹ˆä¼šæŠŠè¿™ä¸ªäº‹ä»¶äº¤ç»™è¿™ä¸ªfitViewï¼Œå†éåŽ†è¿™ä¸ªfitViewçš„å­æŽ§ä»¶ï¼Œç›´è‡³æ²¡æœ‰æ›´åˆé€‚çš„viewä¸ºæ­¢ã€‚ å¦‚æžœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å­æŽ§ä»¶ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºè‡ªå·±æœ€åˆé€‚å¤„ç†è¿™ä¸ªäº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯è‡ªå·±æ˜¯æœ€åˆé€‚çš„viewã€‚ 5.2 UIViewä¸èƒ½æŽ¥æ”¶è§¦æ‘¸äº‹ä»¶çš„ä¸‰ç§æƒ…å†µï¼š ä¸å…è®¸äº¤äº’ï¼šuserInteractionEnabled = false éšè—ï¼šå¦‚æžœæŠŠçˆ¶æŽ§ä»¶éšè—ï¼Œé‚£ä¹ˆå­æŽ§ä»¶ä¹Ÿä¼šéšè—ï¼Œéšè—çš„æŽ§ä»¶ä¸èƒ½æŽ¥å—äº‹ä»¶ é€æ˜Žåº¦ï¼šå¦‚æžœè®¾ç½®ä¸€ä¸ªæŽ§ä»¶çš„é€æ˜Žåº¦&lt;0.01ï¼Œä¼šç›´æŽ¥å½±å“å­æŽ§ä»¶çš„é€æ˜Žåº¦ã€‚alphaï¼š0.0~0.01ä¸ºé€æ˜Žã€‚ é»˜è®¤UIImageViewä¸èƒ½æŽ¥å—è§¦æ‘¸äº‹ä»¶ï¼Œå› ä¸ºä¸å…è®¸äº¤äº’ï¼Œå³userInteractionEnabled = NOã€‚æ‰€ä»¥å¦‚æžœå¸Œæœ›UIImageViewå¯ä»¥äº¤äº’ï¼Œéœ€è¦è®¾ç½®UIImageViewçš„userInteractionEnabled = YESã€‚ 5.3 äº‹ä»¶ä¼ é€’ç¤ºä¾‹ ä¸ç®¡è§†å›¾èƒ½ä¸èƒ½å¤„ç†äº‹ä»¶ï¼Œåªè¦ç‚¹å‡»äº†è§†å›¾å°±éƒ½ä¼šäº§ç”Ÿäº‹ä»¶ï¼Œå…³é”®åœ¨äºŽè¯¥äº‹ä»¶æœ€ç»ˆæ˜¯ç”±è°æ¥å¤„ç†ï¼ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœè“è‰²è§†å›¾ä¸èƒ½å¤„ç†äº‹ä»¶ï¼Œç‚¹å‡»è“è‰²è§†å›¾äº§ç”Ÿçš„è§¦æ‘¸äº‹ä»¶ä¸ä¼šç”±è¢«ç‚¹å‡»çš„è§†å›¾ï¼ˆè“è‰²è§†å›¾ï¼‰å¤„ç†ï¼ å¦‚æžœè®¾ç½®çˆ¶æŽ§ä»¶çš„é€æ˜Žåº¦æˆ–è€…hiddenï¼Œä¼šç›´æŽ¥å½±å“åˆ°å­æŽ§ä»¶çš„é€æ˜Žåº¦å’Œhiddenã€‚å¦‚æžœçˆ¶æŽ§ä»¶çš„é€æ˜Žåº¦ä¸º0æˆ–è€…hidden = YESï¼Œé‚£ä¹ˆå­æŽ§ä»¶ä¹Ÿæ˜¯ä¸å¯è§çš„ï¼ 6 å¦‚ä½•å¯»æ‰¾æœ€åˆé€‚çš„view ä¸»çª—å£æŽ¥æ”¶åˆ°åº”ç”¨ç¨‹åºä¼ é€’è¿‡æ¥çš„äº‹ä»¶åŽï¼Œé¦–å…ˆåˆ¤æ–­è‡ªå·±èƒ½å¦æŽ¥æ‰‹è§¦æ‘¸äº‹ä»¶ã€‚å¦‚æžœèƒ½ï¼Œé‚£ä¹ˆåœ¨åˆ¤æ–­è§¦æ‘¸ç‚¹åœ¨ä¸åœ¨çª—å£è‡ªå·±èº«ä¸Š å¦‚æžœè§¦æ‘¸ç‚¹ä¹Ÿåœ¨çª—å£èº«ä¸Šï¼Œé‚£ä¹ˆçª—å£ä¼šä»ŽåŽå¾€å‰éåŽ†è‡ªå·±çš„å­æŽ§ä»¶ï¼ˆéåŽ†è‡ªå·±çš„å­æŽ§ä»¶åªæ˜¯ä¸ºäº†å¯»æ‰¾å‡ºæ¥æœ€åˆé€‚çš„viewï¼‰ éåŽ†åˆ°æ¯ä¸€ä¸ªå­æŽ§ä»¶åŽï¼Œåˆä¼šé‡å¤ä¸Šé¢çš„ä¸¤ä¸ªæ­¥éª¤ï¼ˆä¼ é€’äº‹ä»¶ç»™å­æŽ§ä»¶ï¼Œ1.åˆ¤æ–­å­æŽ§ä»¶èƒ½å¦æŽ¥å—äº‹ä»¶ï¼Œ2.ç‚¹åœ¨ä¸åœ¨å­æŽ§ä»¶ä¸Šï¼‰ å¦‚æ­¤å¾ªçŽ¯éåŽ†å­æŽ§ä»¶ï¼Œç›´åˆ°æ‰¾åˆ°æœ€åˆé€‚çš„viewï¼Œå¦‚æžœæ²¡æœ‰æ›´åˆé€‚çš„å­æŽ§ä»¶ï¼Œé‚£ä¹ˆè‡ªå·±å°±æˆä¸ºæœ€åˆé€‚çš„viewã€‚ 6.1 å¯»æ‰¾çš„æ–¹æ³• 6.1.1 hitTest(_:with:)æ–¹æ³•ä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼Ÿåªè¦äº‹ä»¶ä¸€ä¼ é€’ç»™ä¸€ä¸ªæŽ§ä»¶,è¿™ä¸ªæŽ§ä»¶å°±ä¼šè°ƒç”¨å®ƒè‡ªå·±çš„hitTest(_:with:)æ–¹æ³•ï¼ˆä¸ç®¡è¿™ä¸ªæŽ§ä»¶èƒ½ä¸èƒ½å¤„ç†äº‹ä»¶ï¼‰ ä½œç”¨å¯»æ‰¾å¹¶è¿”å›žæœ€åˆé€‚çš„view(èƒ½å¤Ÿå“åº”äº‹ä»¶çš„é‚£ä¸ªæœ€åˆé€‚çš„view) æ‹¦æˆªäº‹ä»¶çš„å¤„ç† é€šè¿‡é‡å†™hitTest(_:with:)æ–¹æ³•ï¼Œè¿”å›žæŒ‡å®šçš„viewä½œä¸ºæœ€åˆé€‚çš„viewã€‚ ä¸ç®¡ç‚¹å‡»å“ªé‡Œï¼Œæœ€åˆé€‚çš„viewéƒ½æ˜¯hitTest(_:with:)æ–¹æ³•ä¸­è¿”å›žçš„é‚£ä¸ªviewã€‚ é€šè¿‡é‡å†™hitTest(_:with:)ï¼Œå°±å¯ä»¥æ‹¦æˆªäº‹ä»¶çš„ä¼ é€’è¿‡ç¨‹ï¼Œæƒ³è®©è°å¤„ç†äº‹ä»¶è°å°±å¤„ç†äº‹ä»¶ã€‚ äº‹ä»¶çš„ä¼ é€’é¡ºåº æ˜¯ï¼šäº§ç”Ÿè§¦æ‘¸äº‹ä»¶ -&gt; UIApplicationäº‹ä»¶é˜Ÿåˆ— -&gt; UIWindow.hitTest(_:with:) -&gt;è¿”å›žæ›´åˆé€‚çš„view -&gt; å­æŽ§ä»¶.hitTest(_:with:) -&gt; è¿”å›žæœ€åˆé€‚çš„view 6.1.2 point(inside:with:) æ–¹æ³•æ¬¡æ–¹æ³•åˆ¤æ–­ç‚¹åœ¨ä¸åœ¨å½“å‰viewä¸Šï¼ˆæ–¹æ³•è°ƒç”¨è€…çš„åæ ‡ç³»ä¸Šï¼‰å¦‚æžœè¿”å›žtrueï¼Œä»£è¡¨ç‚¹åœ¨æ–¹æ³•è°ƒç”¨è€…çš„åæ ‡ç³»ä¸Š;è¿”å›žfalseä»£è¡¨ç‚¹ä¸åœ¨æ–¹æ³•è°ƒç”¨è€…çš„åæ ‡ç³»ä¸Šï¼Œé‚£ä¹ˆæ–¹æ³•è°ƒç”¨è€…ä¹Ÿå°±ä¸èƒ½å¤„ç†äº‹ä»¶ã€‚ 7 äº‹ä»¶çš„å“åº”äº‹ä»¶çš„ä¼ é€’å’Œå“åº”çš„åŒºåˆ«ï¼š äº‹ä»¶çš„ä¼ é€’æ˜¯ä»Žä¸Šåˆ°ä¸‹ï¼ˆçˆ¶æŽ§ä»¶åˆ°å­æŽ§ä»¶ï¼‰ï¼Œäº‹ä»¶çš„å“åº”æ˜¯ä»Žä¸‹åˆ°ä¸Šï¼ˆé¡ºç€å“åº”è€…é“¾æ¡å‘ä¸Šä¼ é€’ï¼šå­æŽ§ä»¶åˆ°çˆ¶æŽ§ä»¶ã€‚ å‚è€ƒï¼šå²ä¸Šæœ€è¯¦ç»†çš„iOSä¹‹äº‹ä»¶çš„ä¼ é€’å’Œå“åº”æœºåˆ¶-åŽŸç†ç¯‡iOSè§¦æ‘¸äº‹ä»¶å…¨å®¶æ¡¶å²ä¸Šæœ€è¯¦ç»†çš„iOSä¹‹äº‹ä»¶çš„ä¼ é€’å’Œå“åº”æœºåˆ¶-å®žè·µç¯‡]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>äº‹ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 15ï¼šå®žçŽ°è®¡ç®—å™¨ç•Œé¢å¸ƒå±€--Masonryå’ŒSnapKitçš„å­¦ä¹ ]]></title>
    <url>%2F2018%2Fios-tutorial-15.html</url>
    <content type="text"><![CDATA[Masonryå’ŒSnapKitåˆ†åˆ«æ˜¯OCã€Swiftçš„ç•Œé¢å¸ƒå±€æ¡†æž¶ï¼Œè€Œä¸”å¼€å‘è€…ç›¸åŒã€‚åˆ†åˆ«ç”¨è¿™ä¸¤ä¸ªæ¡†æž¶å®žçŽ°ä¸€ä¸ªç®€å•è®¡ç®—å™¨ç•Œé¢ï¼š å®Œå…¨ä»£ç ï¼šLearniOSByProject/101-MasonryDemo å’Œ LearniOSByProject/114-SnapKitDemo æ˜¾ç¤ºåŒºåŸŸå’Œé”®ç›˜åŒºåŸŸï¼š 12345678910111213141516171819202122232425262728293031323334//ç”³æ˜ŽåŒºåŸŸï¼ŒdisplayViewæ˜¯æ˜¾ç¤ºåŒºåŸŸï¼ŒkeyboardViewæ˜¯é”®ç›˜åŒºåŸŸ UIView *displayView = [UIView new]; [displayView setBackgroundColor:[UIColor blackColor]]; [self.view addSubview:displayView]; UIView *keyboardView = [UIView new]; [self.view addSubview:keyboardView]; //displViewï¼ˆæ˜¾ç¤ºç»“æžœåŒºåŸŸï¼‰å’Œ keyboardViewï¼ˆé”®ç›˜åŒºåŸŸï¼‰ [displayView mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.top.equalTo(self.view.mas_top); make.left.and.right.equalTo(self.view); // displViewæ˜¯keyboardViewçš„0.3å€ï¼Œä¹Ÿå°±æ˜¯å‰è€…æ˜¯3ä»½ï¼ŒåŽè€…æ˜¯10ä»½ã€‚æ•´ä¸ªå±å¹•çš„å æ¯”æ˜¯å‰è€…3/13,åŽè€…10/13 make.height.equalTo(keyboardView).multipliedBy(0.3f); &#125;]; [keyboardView mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.top.equalTo(displayView.mas_bottom); make.bottom.equalTo(self.view.mas_bottom); make.left.and.right.equalTo(self.view); &#125;]; //è®¾ç½®æ˜¾ç¤ºä½ç½®çš„æ•°å­—ä¸º0 UILabel *displayNum = [[UILabel alloc]init]; [displayView addSubview:displayNum]; displayNum.text = @&quot;0&quot;; displayNum.font = [UIFont fontWithName:@&quot;HeiTi SC&quot; size:70]; displayNum.textColor = [UIColor whiteColor]; displayNum.textAlignment = NSTextAlignmentRight; [displayNum mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.left.and.right.equalTo(displayView).with.offset(-10); make.bottom.equalTo(displayView).with.offset(-10); &#125;]; é”®ç›˜åŒºåŸŸå’Œçº¦æŸ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109//å®šä¹‰é”®ç›˜é”®åç§°ï¼Œï¼Ÿå·ä»£è¡¨åˆå¹¶çš„å•å…ƒæ ¼ NSArray *keys = @[@&quot;AC&quot;,@&quot;+/-&quot;,@&quot;%&quot;,@&quot;Ã·&quot; ,@&quot;7&quot;,@&quot;8&quot;,@&quot;9&quot;,@&quot;x&quot; ,@&quot;4&quot;,@&quot;5&quot;,@&quot;6&quot;,@&quot;-&quot; ,@&quot;1&quot;,@&quot;2&quot;,@&quot;3&quot;,@&quot;+&quot; ,@&quot;0&quot;,@&quot;?&quot;,@&quot;.&quot;,@&quot;=&quot;]; int indexOfKeys = 0; for (NSString *key in keys)&#123; //å¾ªçŽ¯æ‰€æœ‰é”® indexOfKeys++; int rowNum = (indexOfKeys % 4 == 0) ? indexOfKeys/4 : (indexOfKeys/4 + 1); int colNum = (indexOfKeys % 4 == 0) ? 4 : indexOfKeys % 4; NSLog(@&quot;index is:%d and row:%d,col:%d&quot;,indexOfKeys,rowNum,colNum); //é”®æ ·å¼ UIButton *keyView = [UIButton buttonWithType:UIButtonTypeCustom]; [keyboardView addSubview:keyView]; [keyView setTitleColor:[UIColor blackColor] forState:UIControlStateNormal]; [keyView setTitle:key forState:UIControlStateNormal]; [keyView.layer setBorderWidth:1]; [keyView.layer setBorderColor:[[UIColor blackColor]CGColor]]; [keyView.titleLabel setFont:[UIFont fontWithName:@&quot;Arial-BoldItalicMT&quot; size:30]]; //é”®çº¦æŸ [keyView mas_makeConstraints:^(MASConstraintMaker *make) &#123; //å¤„ç† 0 åˆå¹¶å•å…ƒæ ¼ if([key isEqualToString:@&quot;0&quot;] || [key isEqualToString:@&quot;?&quot;] )&#123; if([key isEqualToString:@&quot;0&quot;])&#123; [keyView mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.height.equalTo(keyboardView.mas_height).with.multipliedBy(.2f); make.width.equalTo(keyboardView.mas_width).multipliedBy(.5); make.left.equalTo(keyboardView.mas_left); make.baseline.equalTo(keyboardView.mas_baseline).with.multipliedBy(.92f); &#125;]; &#125;if([key isEqualToString:@&quot;?&quot;])&#123; [keyView removeFromSuperview]; &#125; &#125; //æ­£å¸¸çš„å•å…ƒæ ¼ else&#123; make.width.equalTo(keyboardView.mas_width).with.multipliedBy(.25f); make.height.equalTo(keyboardView.mas_height).with.multipliedBy(.2f); //æŒ‰ç…§è¡Œå’Œåˆ—æ·»åŠ çº¦æŸï¼Œè¿™é‡Œæ·»åŠ è¡Œçº¦æŸ switch (rowNum) &#123; case 1: &#123; make.baseline.equalTo(keyboardView.mas_baseline).with.multipliedBy(.12f); &#125; break; case 2: &#123; make.baseline.equalTo(keyboardView.mas_baseline).with.multipliedBy(.32f); &#125; break; case 3: &#123; make.baseline.equalTo(keyboardView.mas_baseline).with.multipliedBy(.52f); &#125; break; case 4: &#123; make.baseline.equalTo(keyboardView.mas_baseline).with.multipliedBy(.72f); &#125; break; case 5: &#123; make.baseline.equalTo(keyboardView.mas_baseline).with.multipliedBy(.92f); &#125; break; default: break; &#125; //æŒ‰ç…§è¡Œå’Œåˆ—æ·»åŠ çº¦æŸï¼Œè¿™é‡Œæ·»åŠ åˆ—çº¦æŸ switch (colNum) &#123; case 1: &#123; make.left.equalTo(keyboardView.mas_left); &#125; break; case 2: &#123; make.right.equalTo(keyboardView.mas_centerX); &#125; break; case 3: &#123; make.left.equalTo(keyboardView.mas_centerX); &#125; break; case 4: &#123; make.right.equalTo(keyboardView.mas_right); &#125; break; default: break; &#125; &#125; &#125;]; &#125; å‚è€ƒï¼šå¿˜è®°è®°å½•äº†ðŸ˜]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 14ï¼šç®€å•çš„ä¸‹æ‹‰èœå• -- dropDownMenu]]></title>
    <url>%2F2018%2Fios-tutorial-14.html</url>
    <content type="text"><![CDATA[è¯¦ç»†ä»£ç ï¼š dropDownMenu æŒ‰é’®dropDownBtn: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687class dropDownBtn: UIButton, dropDownProtocol &#123; func dropDownPressed(string: String) &#123; self.setTitle(string, for: .normal) self.dismissDropDown() &#125; var dropView = dropDownView() var height = NSLayoutConstraint() override init(frame: CGRect) &#123; super.init(frame: frame) self.backgroundColor = UIColor.darkGray dropView = dropDownView.init(frame: CGRect.init(x: 0, y: 0, width: 0, height: 0)) dropView.translatesAutoresizingMaskIntoConstraints = false dropView.delegate = self &#125; // æœ¬è§†å›¾è¢«æ·»åŠ åˆ°çˆ¶è§†å›¾ä¸Šæ—¶è°ƒç”¨ override func didMoveToSuperview() &#123; self.superview?.addSubview(dropView) self.superview?.bringSubview(toFront: dropView) dropView.topAnchor.constraint(equalTo: self.bottomAnchor).isActive = true dropView.centerXAnchor.constraint(equalTo: self.centerXAnchor).isActive = true dropView.widthAnchor.constraint(equalTo: self.widthAnchor).isActive = true height = dropView.heightAnchor.constraint(equalToConstant: 0) &#125; var isOpen = false // åˆšè§¦æ‘¸æ—¶è°ƒç”¨ override func touchesBegan(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?) &#123; if isOpen == false &#123; isOpen = true NSLayoutConstraint.deactivate([self.height]) if self.dropView.tableView.contentSize.height &gt; 150 &#123; self.height.constant = 150 &#125; else &#123; self.height.constant = self.dropView.tableView.contentSize.height &#125; NSLayoutConstraint.activate([self.height]) UIView.animate(withDuration: 0.5, delay: 0, usingSpringWithDamping: 0.5, initialSpringVelocity: 0.5, options: .curveEaseInOut, animations: &#123; self.dropView.layoutIfNeeded() print(self.center, self.dropView.center, self.dropView.frame.height, self.dropView.frame.width) self.dropView.center.y += self.dropView.frame.height / 2 &#125;, completion: nil) &#125; else &#123; isOpen = false NSLayoutConstraint.deactivate([self.height]) self.height.constant = 0 NSLayoutConstraint.activate([self.height]) UIView.animate(withDuration: 0.5, delay: 0, usingSpringWithDamping: 0.5, initialSpringVelocity: 0.5, options: .curveEaseInOut, animations: &#123; self.dropView.center.y -= self.dropView.frame.height / 2 self.dropView.layoutIfNeeded() &#125;, completion: nil) &#125; &#125; func dismissDropDown() &#123; isOpen = false NSLayoutConstraint.deactivate([self.height]) self.height.constant = 0 NSLayoutConstraint.activate([self.height]) UIView.animate(withDuration: 0.5, delay: 0, usingSpringWithDamping: 0.5, initialSpringVelocity: 0.5, options: .curveEaseInOut, animations: &#123; self.dropView.center.y -= self.dropView.frame.height / 2 self.dropView.layoutIfNeeded() &#125;, completion: nil) &#125; required init?(coder aDecoder: NSCoder) &#123; fatalError(&quot;init(coder:) has not been implemented&quot;) &#125;&#125; ä¸‹æ‹‰è§†å›¾dropDownView 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354class dropDownView: UIView, UITableViewDelegate, UITableViewDataSource &#123; var dropDownOptions = [String]() var tableView = UITableView() var delegate: dropDownProtocol! override init(frame: CGRect) &#123; super.init(frame: frame) tableView.backgroundColor = UIColor.darkGray self.backgroundColor = UIColor.darkGray tableView.delegate = self tableView.dataSource = self tableView.translatesAutoresizingMaskIntoConstraints = false self.addSubview(tableView) tableView.leftAnchor.constraint(equalTo: self.leftAnchor).isActive = true tableView.rightAnchor.constraint(equalTo: self.rightAnchor).isActive = true tableView.topAnchor.constraint(equalTo: self.topAnchor).isActive = true tableView.bottomAnchor.constraint(equalTo: self.bottomAnchor).isActive = true &#125; required init?(coder aDecoder: NSCoder) &#123; fatalError(&quot;init(coder:) has not been implemented&quot;) &#125; func numberOfSections(in tableView: UITableView) -&gt; Int &#123; return 1 &#125; func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123; return dropDownOptions.count &#125; func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cell = UITableViewCell() cell.textLabel?.text = dropDownOptions[indexPath.row] cell.backgroundColor = UIColor.darkGray return cell &#125; func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) &#123; self.delegate.dropDownPressed(string: dropDownOptions[indexPath.row]) self.tableView.deselectRow(at: indexPath, animated: true) &#125; &#125; å‚è€ƒï¼šhttps://www.youtube.com/watch?v=22zu-OTS-3M]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[æ•´ç†ä¹‹å‰å­¦çš„iOSå°é¡¹ç›®åˆé›†â€”â€”LearniOSByProject]]></title>
    <url>%2F2018%2Flearniosbyproject.html</url>
    <content type="text"><![CDATA[ä»‹ç»LearniOSByProjectæœ¬æ¥æ˜¯è‡ªå·±å­¦ä¹ iOSæ—¶çš„ä¸€äº›éžå¸¸ç®€å•å°ä¾‹å­ï¼Œå°é¡¹ç›®ï¼Œæˆ–è€…æˆ‘ä¸ªäººåšå®¢AndyRonâ€™s Blogæ–‡ç« çš„ä»£ç é›†åˆã€‚æ²¡æœ‰æŒ‰ç…§ä»€ä¹ˆè·¯çº¿å­¦ä¹ ï¼Œå°±æ˜¯å­¦åˆ°ä»€ä¹ˆå°±æ˜¯ä»€ä¹ˆäº†ï¼Œçœ‹ä¸ŠåŽ»ç‰¹åˆ«ä¹±ï¼Œæˆ‘è‡ªå·±æœ‰æ—¶å€™ä¹Ÿéžå¸¸æ‡µé€¼ï¼Œç„¶åŽçœ‹åˆ°é“é•¿å‰è¾ˆçš„é¡¹ç›®Swift-30-Projectsï¼Œå°±æ•´ç†ã€ç­›é€‰ä¸€ä¸‹ï¼Œè¿™æ ·çœ‹ç€æ¸…æ™°ä¸€ç‚¹ï¼Œæ‰¾èµ·æ¥ä¹Ÿæ–¹ä¾¿ã€‚ è¯­è¨€æ–¹é¢å¤§éƒ¨åˆ†æ˜¯Swiftï¼Œä¸ªåˆ«é¡¹ç›®æ˜¯OCã€‚ ä»¥æ•°å­—ä¸ºç›®å½•åªæ˜¯ä¸ºäº†è®°å½•é¡¹ç›®æ•°å’ŒæŽ’åºï¼Œæ²¡æœ‰ç‰¹æ®Šæ„ä¹‰ã€‚ ä¸‹è½½å•ä¸ªé¡¹ç›®å¯ä»¥å‚è€ƒ DownGitï¼šæ€Žä¹ˆä¸‹è½½githubä¸­æŸä¸ªæ–‡ä»¶å¤¹ï¼Ÿ æ€»è§ˆå›¾ ä¸€äº›é¡¹ç›®çš„é¢„è§ˆå›¾]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>swift</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘å…³äºŽæ²™ç›’]]></title>
    <url>%2F2018%2Fios-sandbox.html</url>
    <content type="text"><![CDATA[æ¯ä¸ªiOSç¨‹åºéƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ç³»ç»Ÿï¼ˆå­˜å‚¨ç©ºé—´ï¼‰ï¼Œè€Œä¸”åªèƒ½åœ¨å¯¹åº”çš„æ–‡ä»¶ç³»ç»Ÿä¸­è¿›è¡Œæ“ä½œï¼Œæ­¤åŒºåŸŸè¢«ç§°ä¸ºæ²™ç›’ã€‚åº”ç”¨å¿…é¡»å¾…åœ¨è‡ªå·±çš„æ²™ç›’é‡Œï¼Œå…¶ä»–åº”ç”¨ä¸èƒ½è®¿é—®è¯¥æ²™ç›’ã€‚æ‰€æœ‰çš„éžä»£ç æ–‡ä»¶éƒ½è¦ä¿å­˜åœ¨æ­¤ï¼Œä¾‹å¦‚å±žæ€§æ–‡ä»¶plistã€æ–‡æœ¬æ–‡ä»¶ã€å›¾åƒã€å›¾æ ‡ã€åª’ä½“èµ„æºç­‰ã€‚ æ²™ç›’ä¸­ç›¸å…³è·¯å¾„ AppName.app åº”ç”¨ç¨‹åºçš„ç¨‹åºåŒ…ç›®å½•ï¼ŒåŒ…å«åº”ç”¨ç¨‹åºçš„æœ¬èº«ã€‚ç”±äºŽåº”ç”¨ç¨‹åºå¿…é¡»ç»è¿‡ç­¾åï¼Œæ‰€ä»¥ä¸èƒ½åœ¨è¿è¡Œæ—¶å¯¹è¿™ä¸ªç›®å½•ä¸­çš„å†…å®¹è¿›è¡Œä¿®æ”¹ï¼Œå¦åˆ™ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºæ— æ³•å¯åŠ¨ã€‚ Documents/ ä¿å­˜åº”ç”¨ç¨‹åºçš„é‡è¦æ•°æ®æ–‡ä»¶å’Œç”¨æˆ·æ•°æ®æ–‡ä»¶ç­‰ã€‚ç”¨æˆ·æ•°æ®åŸºæœ¬ä¸Šéƒ½æ”¾åœ¨è¿™ä¸ªä½ç½®(ä¾‹å¦‚ä»Žç½‘ä¸Šä¸‹è½½çš„å›¾ç‰‡æˆ–éŸ³ä¹æ–‡ä»¶)ï¼Œè¯¥æ–‡ä»¶å¤¹åœ¨åº”ç”¨ç¨‹åºæ›´æ–°æ—¶ä¼šè‡ªåŠ¨å¤‡ä»½ï¼Œåœ¨è¿žæŽ¥iTunesæ—¶ä¹Ÿå¯ä»¥è‡ªåŠ¨åŒæ­¥å¤‡ä»½å…¶ä¸­çš„æ•°æ®ã€‚ Libraryï¼šè¿™ä¸ªç›®å½•ä¸‹æœ‰ä¸¤ä¸ªå­ç›®å½•,å¯åˆ›å»ºå­æ–‡ä»¶å¤¹ã€‚å¯ä»¥ç”¨æ¥æ”¾ç½®æ‚¨å¸Œæœ›è¢«å¤‡ä»½ä½†ä¸å¸Œæœ›è¢«ç”¨æˆ·çœ‹åˆ°çš„æ•°æ®ã€‚è¯¥è·¯å¾„ä¸‹çš„æ–‡ä»¶å¤¹ï¼Œé™¤Cachesä»¥å¤–ï¼Œéƒ½ä¼šè¢«iTuneså¤‡ä»½. Library/Caches: ä¿å­˜åº”ç”¨ç¨‹åºä½¿ç”¨æ—¶äº§ç”Ÿçš„æ”¯æŒæ–‡ä»¶å’Œç¼“å­˜æ–‡ä»¶(ä¿å­˜åº”ç”¨ç¨‹åºå†æ¬¡å¯åŠ¨è¿‡ç¨‹ä¸­éœ€è¦çš„ä¿¡æ¯)ï¼Œè¿˜æœ‰æ—¥å¿—æ–‡ä»¶æœ€å¥½ä¹Ÿæ”¾åœ¨è¿™ä¸ªç›®å½•ã€‚iTunes åŒæ­¥æ—¶ä¸ä¼šå¤‡ä»½è¯¥ç›®å½•å¹¶ä¸”å¯èƒ½è¢«å…¶ä»–å·¥å…·æ¸…ç†æŽ‰å…¶ä¸­çš„æ•°æ®ã€‚ Library/Preferences: ä¿å­˜åº”ç”¨ç¨‹åºçš„åå¥½è®¾ç½®æ–‡ä»¶ã€‚NSUserDefaultsç±»åˆ›å»ºçš„æ•°æ®å’Œplistæ–‡ä»¶éƒ½æ”¾åœ¨è¿™é‡Œã€‚ä¼šè¢«iTuneså¤‡ä»½ã€‚ tmp/: ä¿å­˜åº”ç”¨è¿è¡Œæ—¶æ‰€éœ€è¦çš„ä¸´æ—¶æ•°æ®ã€‚ä¸ä¼šè¢«iTuneså¤‡ä»½ã€‚iPhoneé‡å¯æ—¶ï¼Œä¼šè¢«æ¸…ç©ºã€‚ 12345678910111213141516171819// èŽ·å–æ²™ç›’æ ¹ç›®å½•è·¯å¾„ NSString *homeDir = NSHomeDirectory(); // èŽ·å–Documentsç›®å½•è·¯å¾„ NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES) firstObject]; //èŽ·å–Libraryçš„ç›®å½•è·¯å¾„ NSString *libDir = [NSSearchPathForDirectoriesInDomains(NSLibraryDirectory,NSUserDomainMask,YES) lastObject]; // èŽ·å–cacheç›®å½•è·¯å¾„ NSString *cachesDir = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory,NSUserDomainMask,YES) firstObject]; // èŽ·å–tmpç›®å½•è·¯å¾„ NSString *tmpDir =NSTemporaryDirectory(); // èŽ·å–åº”ç”¨ç¨‹åºç¨‹åºåŒ…ä¸­èµ„æºæ–‡ä»¶è·¯å¾„çš„æ–¹æ³•ï¼š NSString *bundle = [[NSBundle mainBundle] bundlePath]; NSLog(@&quot;homeDir=%@ \n docDir=%@ \n libDir=%@ \n cachesDir=%@ \n tmpDir=%@ \n bundle=%@&quot;, homeDir,docDir, libDir, cachesDir, tmpDir, bundle); ç»“æžœä¸ºï¼š123456homeDir=/var/mobile/Containers/Data/Application/FBE41071-F5DD-4F02-9DFC-E9E473D3C917 docDir=/var/mobile/Containers/Data/Application/FBE41071-F5DD-4F02-9DFC-E9E473D3C917/Documents libDir=/var/mobile/Containers/Data/Application/FBE41071-F5DD-4F02-9DFC-E9E473D3C917/Library cachesDir=/var/mobile/Containers/Data/Application/FBE41071-F5DD-4F02-9DFC-E9E473D3C917/Library/Caches tmpDir=/private/var/mobile/Containers/Data/Application/FBE41071-F5DD-4F02-9DFC-E9E473D3C917/tmp/ bundle=/var/containers/Bundle/Application/4A42EF08-30BA-4C19-B0C9-62903300C2BC/SandboxDemo.app å…³äºŽNSSearchPathForDirectoriesInDomainså‡½æ•°FOUNDATION_EXPORT NSArray&lt;NSString *&gt; *NSSearchPathForDirectoriesInDomains(NSSearchPathDirectory directory, NSSearchPathDomainMask domainMask, BOOL expandTilde); ç”¨äºŽæŸ¥æ‰¾ç›®å½•ï¼Œè¿”å›žæŒ‡å®šèŒƒå›´å†…çš„æŒ‡å®šåç§°çš„ç›®å½•çš„è·¯å¾„é›†åˆã€‚æœ‰ä¸‰ä¸ªå‚æ•°ï¼š NSSearchPathDirectory directory æƒ³è¦æŸ¥æ‰¾çš„ç›®å½•ï¼Œæ˜¯ä¸ªæžšä¸¾å€¼ï¼Œæœ‰å¾ˆå¤šå€¼ï¼Œæœ‰å…³äºŽiOSçš„ï¼Œæœ‰å…³äºŽmacOSï¼Œä¹Ÿæœ‰å…³äºŽwatchOSçš„ã€‚ 123456789101112131415161718192021222324252627282930typedef NS_ENUM(NSUInteger, NSSearchPathDirectory) &#123; NSApplicationDirectory = 1, // supported applications (Applications) NSDemoApplicationDirectory, // unsupported applications, demonstration versions (Demos) NSDeveloperApplicationDirectory, // developer applications (Developer/Applications). DEPRECATED - there is no one single Developer directory. NSAdminApplicationDirectory, // system and network administration applications (Administration) NSLibraryDirectory, // various documentation, support, and configuration files, resources (Library) NSDeveloperDirectory, // developer resources (Developer) DEPRECATED - there is no one single Developer directory. NSUserDirectory, // user home directories (Users) NSDocumentationDirectory, // documentation (Documentation) NSDocumentDirectory, // documents (Documents) NSCoreServiceDirectory, // location of CoreServices directory (System/Library/CoreServices) NSAutosavedInformationDirectory API_AVAILABLE(macos(10.6), ios(4.0), watchos(2.0), tvos(9.0)) = 11, // location of autosaved documents (Documents/Autosaved) NSDesktopDirectory = 12, // location of user&apos;s desktop NSCachesDirectory = 13, // location of discardable cache files (Library/Caches) NSApplicationSupportDirectory = 14, // location of application support files (plug-ins, etc) (Library/Application Support) NSDownloadsDirectory API_AVAILABLE(macos(10.5), ios(2.0), watchos(2.0), tvos(9.0)) = 15, // location of the user&apos;s &quot;Downloads&quot; directory NSInputMethodsDirectory API_AVAILABLE(macos(10.6), ios(4.0), watchos(2.0), tvos(9.0)) = 16, // input methods (Library/Input Methods) NSMoviesDirectory API_AVAILABLE(macos(10.6), ios(4.0), watchos(2.0), tvos(9.0)) = 17, // location of user&apos;s Movies directory (~/Movies) NSMusicDirectory API_AVAILABLE(macos(10.6), ios(4.0), watchos(2.0), tvos(9.0)) = 18, // location of user&apos;s Music directory (~/Music) NSPicturesDirectory API_AVAILABLE(macos(10.6), ios(4.0), watchos(2.0), tvos(9.0)) = 19, // location of user&apos;s Pictures directory (~/Pictures) NSPrinterDescriptionDirectory API_AVAILABLE(macos(10.6), ios(4.0), watchos(2.0), tvos(9.0)) = 20, // location of system&apos;s PPDs directory (Library/Printers/PPDs) NSSharedPublicDirectory API_AVAILABLE(macos(10.6), ios(4.0), watchos(2.0), tvos(9.0)) = 21, // location of user&apos;s Public sharing directory (~/Public) NSPreferencePanesDirectory API_AVAILABLE(macos(10.6), ios(4.0), watchos(2.0), tvos(9.0)) = 22, // location of the PreferencePanes directory for use with System Preferences (Library/PreferencePanes) NSApplicationScriptsDirectory NS_ENUM_AVAILABLE(10_8, NA) = 23, // location of the user scripts folder for the calling application (~/Library/Application Scripts/code-signing-id) NSItemReplacementDirectory API_AVAILABLE(macos(10.6), ios(4.0), watchos(2.0), tvos(9.0)) = 99, // For use with NSFileManager&apos;s URLForDirectory:inDomain:appropriateForURL:create:error: NSAllApplicationsDirectory = 100, // all directories where applications can occur NSAllLibrariesDirectory = 101, // all directories where resources can occur NSTrashDirectory API_AVAILABLE(macos(10.8), ios(11.0)) API_UNAVAILABLE(watchos, tvos) = 102 // location of Trash directory&#125;; NSSearchPathDomainMask domainMask è¡¨ç¤ºâ€œæƒ³è¦ä»Žå“ªä¸ªè·¯å¾„åŒºåŸŸä¿æŠ¤åŒºæŸ¥æ‰¾â€ã€‚ 1234567typedef NS_OPTIONS(NSUInteger, NSSearchPathDomainMask) &#123; NSUserDomainMask =1, // ç”¨æˆ·çš„ä¸»ç›®å½• NSLocalDomainMask =2, // å½“å‰æœºå™¨çš„æœ¬åœ°ç›®å½• NSNetworkDomainMask =4, //åœ¨ç½‘ç»œä¸­å…¬å¼€å¯ç”¨çš„ä½ç½® NSSystemDomainMask =8, // è¢«è‹¹æžœç³»ç»Ÿæä¾›çš„ï¼Œä¸å¯æ›´æ”¹çš„ä½ç½® (/System) NSAllDomainsMask = 0x0ffff // ä¸Šè¿°æ‰€æœ‰åŠæœªæ¥çš„ä½ç½®&#125;; BOOL expandTilde è¡¨ç¤ºæ˜¯å¦ç”¨æ³¢æµªçº¿æ˜¾ç¤ºéƒ¨åˆ†ç›®å½•è·¯å¾„ã€‚~åœ¨*nixç³»ç»Ÿè¡¨ç¤ºå½“å‰ç”¨æˆ·çš„Homeç›®å½•ã€‚åˆ—å¦‚ä¸Šé¢èŽ·å–cacheç›®å½•è·¯å¾„å¦‚æžœä½¿ç”¨NOï¼Œé‚£ä¹ˆç»“æžœå°±æ˜¯cachesDir=~/Library/Caches å‚è€ƒï¼šæ²™ç›’å’ŒNSBundleNSSearchPathForDirectoriesInDomainsæ–¹æ³•ä½¿ç”¨æ²™ç›’å’ŒNSBundleæ–‡ä»¶ç³»ç»Ÿå®˜æ–¹æ‰‹å†Œ]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>sandbox</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ï¼šå­¦ä¹ Runtime]]></title>
    <url>%2F2018%2Fios-runtime-begin.html</url>
    <content type="text"><![CDATA[å­¦ä¹ iOSå¼€å‘ï¼Œruntimeè¿™ä¸ªçŸ¥è¯†ç‚¹æ˜¯ç»•ä¸è¿‡åŽ»çš„ï¼Œä½†å¯¹äºŽæˆ‘è¿™ç§å­¦ä¹ OCä¸æ˜¯å¤ªä¹…ï¼Œå†™OCçš„é‡ä¸å¤Ÿå¤šçš„äººæ¥è¯´ï¼ŒæŠ½è±¡ç†è§£runtimeçš„æ¦‚å¿µæˆ–è€…æ˜¯çœ‹æºä»£ç æœ‰ç‚¹æž¯ç‡¥ï¼Œæ•ˆæžœä¹Ÿä¸å¥½ï¼Œä»¥ä¾‹å­çš„æ–¹æ³•å­¦ä¹ å¯èƒ½ä¼šæ›´å¥½ï¼Œéšç€ä»£ç é‡çš„ä¸Šå‡ï¼Œå¯¹runtimeçš„ç†è§£ä¼šè¶Šæ¥è¶Šæ·±å…¥ã€‚è¯¦ç»†ä»£ç ARRuntimeDemo,å¼€å‘çŽ¯å¢ƒXcode9.4 Person.hä¸ºï¼š123456789101112131415#import &lt;Foundation/Foundation.h&gt;@interface Person : NSObject&#123; NSString * firstName;&#125;@property (nonatomic, assign) int age;+(void)run;+(void)study;-(void)f1;-(void)f2;@end Person.mä¸ºï¼š12345678910111213141516171819202122232425262728293031323334#import &quot;Person.h&quot;@implementation Person&#123; NSString *lastname; float weight;&#125;-(instancetype)init &#123; self = [super init]; if (self) &#123; firstName = @&quot;Andy&quot;; &#125; return self;&#125;-(void)f1 &#123; NSLog(@&quot;æ‰§è¡Œf1&quot;);&#125;-(void)f2 &#123; NSLog(@&quot;æ‰§è¡Œf2&quot;);&#125;+ (void)run &#123; NSLog(@&quot;è·‘&quot;);&#125;+ (void)study &#123; NSLog(@&quot;å­¦ä¹ &quot;);&#125;@end 1 èŽ·å–ç±»çš„æ‰€æœ‰å˜é‡(åŒ…æ‹¬æˆå‘˜å˜é‡å’Œå±žæ€§å˜é‡)12345678910111213// 1. èŽ·å–æ‰€æœ‰å˜é‡ï¼ŒåŒ…æ‹¬æˆå‘˜å˜é‡å’Œå±žæ€§å˜é‡- (IBAction)getAllVar:(UIButton *)sender &#123; unsigned int count = 0; Ivar *allVariables = class_copyIvarList([Person class], &amp;count); for (int i=0; i&lt;count; i++) &#123; Ivar ivar = allVariables[i]; const char *Variablename = ivar_getName(ivar); const char *VariableType = ivar_getTypeEncoding(ivar); NSLog(@&quot;Name: %s Type: %s&quot;, Variablename, VariableType); &#125;&#125; ç»“æžœè¾“å‡º(å…¶ä¸­firstNameã€lastnameã€weightä¸ºæˆå‘˜å˜é‡ï¼Œ_ageä¸ºå±žæ€§å˜é‡)ï¼š12342018-06-01 17:04:56.275194+0800 ARRuntimeDemo[60670:5448260] Name: firstName Type: @&quot;NSString&quot;2018-06-01 17:04:56.276120+0800 ARRuntimeDemo[60670:5448260] Name: lastname Type: @&quot;NSString&quot;2018-06-01 17:04:56.276503+0800 ARRuntimeDemo[60670:5448260] Name: weight Type: f2018-06-01 17:04:56.276614+0800 ARRuntimeDemo[60670:5448260] Name: _age Type: i è§£é‡Šï¼š Ivaï¼Œä¸€ä¸ªæŒ‡å‘objc_ivarç»“æž„ä½“æŒ‡é’ˆ,åŒ…å«äº†å˜é‡åã€å˜é‡ç±»åž‹ç­‰ä¿¡æ¯ åƒlastnameã€weightè¿™ç§å®šä¹‰åœ¨@implementationæ‰€è°“çš„ç§æœ‰å˜é‡ä¹Ÿå¯èŽ·å– å¯¹åº”class_copyIvarListè¿˜æœ‰ä¸€ä¸ªclass_copyPropertyListåªèƒ½èŽ·å¾—å±žæ€§å˜é‡çš„æ–¹æ³• 2 èŽ·å–æ‰€æœ‰æ–¹æ³•ï¼ˆä¸åŒ…æ‹¬ç±»æ–¹æ³•ï¼‰12345678910111213141516// 2. èŽ·å–æ‰€æœ‰æ–¹æ³•ï¼Œä¸åŒ…æ‹¬ç±»æ–¹æ³•- (IBAction)getAllMethod:(UIButton *)sender &#123; unsigned int count; //èŽ·å–æ–¹æ³•åˆ—è¡¨ï¼Œæ‰€æœ‰åœ¨.mæ–‡ä»¶æ˜¾å¼å®žçŽ°çš„æ–¹æ³•éƒ½ä¼šè¢«æ‰¾åˆ°ï¼ŒåŒ…æ‹¬setter+getteræ–¹æ³•ï¼› Method *allMethods = class_copyMethodList([Person class], &amp;count); for(int i =0;i&lt;count;i++) &#123; //Methodï¼Œä¸ºruntimeå£°æ˜Žçš„ä¸€ä¸ªå®ï¼Œè¡¨ç¤ºå¯¹ä¸€ä¸ªæ–¹æ³•çš„æè¿° Method md = allMethods[i]; //èŽ·å–SELï¼šSELç±»åž‹,å³èŽ·å–æ–¹æ³•é€‰æ‹©å™¨@selector() SEL sel = method_getName(md); //å¾—åˆ°selçš„æ–¹æ³•åï¼šä»¥å­—ç¬¦ä¸²æ ¼å¼èŽ·å–selçš„nameï¼Œä¹Ÿå³@selector()ä¸­çš„æ–¹æ³•åç§° const char *methodname = sel_getName(sel); NSLog(@&quot;(Method:%s)&quot;,methodname); &#125;&#125; ç»“æžœè¾“å‡º:123456782018-06-01 16:54:50.433232+0800 ARRuntimeDemo[60482:5418318] (Method:f1)2018-06-01 16:54:50.433465+0800 ARRuntimeDemo[60482:5418318] (Method:f2)2018-06-01 16:54:50.433930+0800 ARRuntimeDemo[60482:5418318] (Method:.cxx_destruct)2018-06-01 16:54:50.434335+0800 ARRuntimeDemo[60482:5418318] (Method:init)2018-06-01 16:54:50.435163+0800 ARRuntimeDemo[60482:5418318] (Method:height)2018-06-01 16:54:50.435788+0800 ARRuntimeDemo[60482:5418318] (Method:setHeight:)2018-06-01 16:54:50.435990+0800 ARRuntimeDemo[60482:5418318] (Method:setAge:)2018-06-01 16:54:50.436482+0800 ARRuntimeDemo[60482:5418318] (Method:age) è§£é‡Šï¼š èŽ·å¾—äº†åƒheight,setHeightè¿™ç§éšè—çš„setterã€getteræ–¹æ³• Methodæ˜¯ä¸€ä¸ªæŒ‡å‘objc_methodç»“æž„ä½“æŒ‡é’ˆï¼Œè¡¨ç¤ºå¯¹ç±»ä¸­çš„æŸä¸ªæ–¹æ³•çš„æè¿°ã€‚ .cxx_destructæ˜¯å…³äºŽç³»ç»Ÿè‡ªåŠ¨å†…å­˜é‡Šæ”¾çš„éšè—æ–¹æ³• 3 ä¸ºç±»æ·»åŠ æ–°å±žæ€§categoryåªèƒ½ä¸ºç±»æ·»åŠ æ–°æ–¹æ³•ï¼Œä¸èƒ½æ·»åŠ æ–°å±žæ€§ï¼Œä½†é€šè¿‡runtimeé…åˆcategoryå°±å¯ä»¥è¾¾åˆ°æ·»åŠ å±žæ€§æ•ˆæžœã€‚é¦–å…ˆæ–°å»ºä¸€ä¸ªç±»Personçš„categoryï¼š.hæ–‡ä»¶123456789// Person+Category.h#import &quot;Person.h&quot;@interface Person (Category)@property (nonatomic, assign)float height;@end .mæ–‡ä»¶1234567891011121314151617181920212223242526// Person+Category.m#import &quot;Person+Category.h&quot;#import &lt;objc/runtime.h&gt;const char *key = &quot;myKey&quot;;@implementation Person (Category)-(void)setHeight:(float)height &#123; NSNumber *num = [NSNumber numberWithFloat:height]; /* objc_setAssociatedObject(id object, const void *key, id value, objc_AssociationPolicy policy); ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦æ·»åŠ å±žæ€§çš„å¯¹è±¡ï¼› ç¬¬äºŒä¸ªå‚æ•°æ˜¯å±žæ€§çš„keyï¼Œæ˜¯Cå­—ç¬¦ä¸²å°±å¯ä»¥; ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å±žæ€§çš„å€¼,ç±»åž‹å¿…é¡»ä¸ºidï¼Œæ‰€ä»¥æ­¤å¤„heightå…ˆè½¬ä¸ºNSNumberç±»åž‹ï¼› ç¬¬å››ä¸ªå‚æ•°æ˜¯ä½¿ç”¨ç­–ç•¥ï¼Œæ˜¯ä¸€ä¸ªæžšä¸¾å€¼ï¼Œç±»ä¼¼@propertyå±žæ€§åˆ›å»ºæ—¶è®¾ç½®å±žæ€§ä¿®é¥°ç¬¦ï¼Œå¯ä»Žå‘½åçœ‹å‡ºå„æžšä¸¾çš„æ„ä¹‰ï¼› */ objc_setAssociatedObject(self, key, num, OBJC_ASSOCIATION_RETAIN_NONATOMIC);&#125;-(float)height &#123; NSNumber *number = objc_getAssociatedObject(self, key); return [number floatValue];&#125;@end ç„¶åŽå°±èƒ½è®¿é—®æ–°å±žæ€§heightäº†ï¼š123456- (IBAction)addVar:(UIButton *)sender &#123; per = [[Person alloc] init]; per.height = 123; NSLog(@&quot;%f&quot;, [per height]);&#125; æ­¤æ—¶è™½ç„¶é€šè¿‡ä¸Šé¢çš„èŽ·å–æ‰€æœ‰å˜é‡æ–¹æ³•ä¸èƒ½èŽ·å–height,ä½†é€šè¿‡ä¸Šé¢çš„é¢èŽ·å–æ‰€æœ‰æ–¹æ³•å¯ä»¥èŽ·å–heightå’ŒsetHeightæ–¹æ³•äº†:123456789101112132018-06-01 17:14:36.945742+0800 ARRuntimeDemo[60892:5482950] Name: firstName Type: @&quot;NSString&quot;2018-06-01 17:14:36.948330+0800 ARRuntimeDemo[60892:5482950] Name: lastname Type: @&quot;NSString&quot;2018-06-01 17:14:36.948771+0800 ARRuntimeDemo[60892:5482950] Name: weight Type: f2018-06-01 17:14:36.949166+0800 ARRuntimeDemo[60892:5482950] Name: _age Type: i2018-06-01 17:15:02.198444+0800 ARRuntimeDemo[60892:5482950] (Method:f1)2018-06-01 17:15:02.198620+0800 ARRuntimeDemo[60892:5482950] (Method:f2)2018-06-01 17:15:02.198800+0800 ARRuntimeDemo[60892:5482950] (Method:.cxx_destruct)2018-06-01 17:15:02.198917+0800 ARRuntimeDemo[60892:5482950] (Method:init)2018-06-01 17:15:02.199048+0800 ARRuntimeDemo[60892:5482950] (Method:height)2018-06-01 17:15:02.199150+0800 ARRuntimeDemo[60892:5482950] (Method:setHeight:)2018-06-01 17:15:02.199239+0800 ARRuntimeDemo[60892:5482950] (Method:setAge:)2018-06-01 17:15:02.199356+0800 ARRuntimeDemo[60892:5482950] (Method:age) 4 æ·»åŠ æ–°æ–¹æ³•1234567891011121314151617// 4. æ·»åŠ æ–°æ–¹æ³•- (IBAction)addMethod:(UIButton *)sender &#123; /* åŠ¨æ€æ·»åŠ æ–¹æ³•ï¼š ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºClass cls ç±»åž‹ï¼› ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºå¾…è°ƒç”¨çš„æ–¹æ³•åç§°ï¼› ç¬¬ä¸‰ä¸ªå‚æ•°(IMP)myAddingFunctionï¼ŒIMPä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œè¿™é‡Œè¡¨ç¤ºæŒ‡å®šå…·ä½“å®žçŽ°æ–¹æ³•myAddingFunctionï¼› ç¬¬å››ä¸ªå‚æ•°è¡¨æ–¹æ³•çš„å‚æ•°ï¼Œ0ä»£è¡¨æ²¡æœ‰å‚æ•°ï¼› */ class_addMethod([per class], @selector(NewMethod), (IMP)myAddingFunction, 0); //è°ƒç”¨æ–¹æ³• ã€å¦‚æžœä½¿ç”¨[per NewMethod]è°ƒç”¨æ–¹æ³•ï¼Œåœ¨ARCä¸‹ä¼šæŠ¥â€œno visible @interface&quot;é”™è¯¯ã€‘ [per performSelector:@selector(NewMethod)];&#125;//å…·ä½“çš„å®žçŽ°ï¼ˆæ–¹æ³•çš„å†…éƒ¨éƒ½é»˜è®¤åŒ…å«ä¸¤ä¸ªå‚æ•°Classç±»å’ŒSELæ–¹æ³•ï¼Œè¢«ç§°ä¸ºéšå¼å‚æ•°ã€‚ï¼‰int myAddingFunction(id self, SEL _cmd)&#123; NSLog(@&quot;å·²æ–°å¢žæ–¹æ³•:NewMethod&quot;); return 1;&#125; è¾“å‡ºï¼š12018-06-01 17:31:56.113168+0800 ARRuntimeDemo[61295:5543319] å·²æ–°å¢žæ–¹æ³•:NewMethod 5 äº¤æ¢ä¸¤ä¸ªæ–¹æ³•12345678910111213// 5. äº¤æ¢ä¸¤ä¸ªæ–¹æ³•- (IBAction)swapMethod:(UIButton *)sender &#123; [Person run]; [Person study]; Method m1 = class_getClassMethod([Person class], @selector(run)); Method m2 = class_getClassMethod([Person class], @selector(study)); method_exchangeImplementations(m1, m2); [Person run]; [Person study];&#125; è¾“å‡ºï¼š12342018-06-01 17:39:00.497375+0800 ARRuntimeDemo[61448:5566239] è·‘2018-06-01 17:39:00.497841+0800 ARRuntimeDemo[61448:5566239] å­¦ä¹ 2018-06-01 17:39:00.499255+0800 ARRuntimeDemo[61448:5566239] å­¦ä¹ 2018-06-01 17:39:00.499449+0800 ARRuntimeDemo[61448:5566239] è·‘ è¿™ç¯‡æ–‡ç« æˆ‘åªæ˜¯åšäº†runtimeä¸€äº›ç®€å•ä½¿ç”¨ï¼Œå¹¶æ²¡æœ‰ç›¸å…³çš„ä½¿ç”¨åœºæ™¯ï¼Œç®—æ˜¯å…¥é—¨äº†ï¼Œæ–‡æœ«å‚è€ƒæåˆ°çš„æ–‡ç« éƒ½æ˜¯ä¸é”™ï¼Œå€¼å¾—ä»¥åŽæ·±å…¥ã€‚ å‚è€ƒï¼šiOSå¼€å‘ â€“ Runtime çš„å‡ ä¸ªå°ä¾‹å­OCæœ€å®žç”¨çš„runtimeæ€»ç»“ï¼Œé¢è¯•ã€å·¥ä½œä½ çœ‹æˆ‘å°±è¶³å¤Ÿäº†ï¼iOS-RunTimeï¼Œä¸å†åªæ˜¯å¬è¯´Runtimeå…¨æ–¹ä½è£…é€¼æŒ‡å— Objective-C Runtime]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>runtime</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSæ ¸å¿ƒåŠ¨ç”»å°ç»“(swift)]]></title>
    <url>%2F2018%2Fios-coreanimation-swift.html</url>
    <content type="text"><![CDATA[æœ¬æ–‡æ‰€æœ‰ç¤ºä¾‹ä»£ç éƒ½æ˜¯Swift4ï¼Œå‚çœ‹æ–‡æœ«é“¾æŽ¥ Core Animationæ˜¯IOSå’ŒOS Xå¹³å°ä¸Šè´Ÿè´£å›¾å½¢æ¸²æŸ“ä¸ŽåŠ¨ç”»çš„åŸºç¡€æ¡†æž¶ã€‚Core Animationå¯ä»¥ä½œç”¨ä¸ŽåŠ¨ç”»è§†å›¾æˆ–è€…å…¶ä»–å¯è§†å…ƒç´ ï¼Œä¸ºä½ å®Œæˆäº†åŠ¨ç”»æ‰€éœ€çš„å¤§éƒ¨åˆ†ç»˜ç”»å·¥ä½œã€‚ä½ åªéœ€è¦é…ç½®å°‘é‡çš„åŠ¨ç”»å‚æ•°ï¼ˆå¦‚å¼€å§‹ç‚¹çš„ä½ç½®å’Œç»“æŸç‚¹çš„ä½ç½®ï¼‰å³å¯ä½¿ç”¨Core Animationçš„åŠ¨ç”»æ•ˆæžœã€‚Core Animationå°†å¤§éƒ¨åˆ†å®žé™…çš„ç»˜å›¾ä»»åŠ¡äº¤ç»™äº†å›¾å½¢ç¡¬ä»¶æ¥å¤„ç†ï¼Œå›¾å½¢ç¡¬ä»¶ä¼šåŠ é€Ÿå›¾å½¢æ¸²æŸ“çš„é€Ÿåº¦ã€‚è¿™ç§è‡ªåŠ¨åŒ–çš„å›¾å½¢åŠ é€ŸæŠ€æœ¯è®©åŠ¨ç”»æ‹¥æœ‰æ›´é«˜çš„å¸§çŽ‡å¹¶ä¸”æ˜¾ç¤ºæ•ˆæžœæ›´åŠ å¹³æ»‘ï¼Œä¸ä¼šåŠ é‡CPUçš„è´Ÿæ‹…è€Œå½±å“ç¨‹åºçš„è¿è¡Œé€Ÿåº¦ã€‚ ä¸Šå›¾å°‘äº†iOS9æ‰å¼•å…¥çš„CASpringAnimation, å®ƒç»§æ‰¿è‡³CABasicAnimation ä¸€ã€å¸¸ç”¨å±žæ€§è¿™äº›å±žæ€§ä¸€èˆ¬æ˜¯åœ¨åŸºç±»CAAnimationå’Œåè®®CAMediaTimingä¸­ï¼Œæ˜¯å‡ ç§åŠ¨ç”»ç±»å…±ç”¨çš„å±žæ€§ã€‚ duration : åŠ¨ç”»çš„æŒç»­æ—¶é—´ beginTime : åŠ¨ç”»çš„å¼€å§‹æ—¶é—´ repeatCount : åŠ¨ç”»çš„é‡å¤æ¬¡æ•° autoreverses :åŠ¨ç”»ç»“æŸæ—¶æ˜¯å¦æ‰§è¡Œé€†åŠ¨ç”» timingFunction : æŽ§åˆ¶åŠ¨ç”»çš„æ˜¾ç¤ºèŠ‚å¥ç³»ç»Ÿæä¾›äº”ç§å€¼é€‰æ‹©ï¼Œåˆ†åˆ«æ˜¯ï¼š kCAMediaTimingFunctionLinear çº¿æ€§åŠ¨ç”» kCAMediaTimingFunctionEaseIn å…ˆæ…¢åŽå¿«ï¼ˆæ…¢è¿›å¿«å‡ºï¼‰ kCAMediaTimingFunctionEaseOut å…ˆå—åŽæ…¢ï¼ˆå¿«è¿›æ…¢å‡ºï¼‰ kCAMediaTimingFunctionEaseInEaseOut å…ˆæ…¢åŽå¿«å†æ…¢ kCAMediaTimingFunctionDefault é»˜è®¤ï¼Œä¹Ÿå±žäºŽä¸­é—´æ¯”è¾ƒå¿« delegate ï¼š åŠ¨ç”»ä»£ç†ã€‚èƒ½å¤Ÿæ£€æµ‹åŠ¨ç”»çš„æ‰§è¡Œå’Œç»“æŸï¼Œåœ¨åŠ¨ç”»æ‰§è¡Œå’Œç»“æŸåšä¸€äº›å¤„ç†ã€‚ 1234567public protocol CAAnimationDelegate : NSObjectProtocol &#123; @available(iOS 2.0, *) optional public func animationDidStart(_ anim: CAAnimation) @available(iOS 2.0, *) optional public func animationDidStop(_ anim: CAAnimation, finished flag: Bool)&#125; fillMode åŠ¨ç”»åœ¨å¼€å§‹å’Œç»“æŸæ—¶çš„åŠ¨ä½œã€‚ kCAFillModeRemoved è¿™ä¸ªæ˜¯é»˜è®¤å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´å½“åŠ¨ç”»å¼€å§‹å‰å’ŒåŠ¨ç”»ç»“æŸåŽï¼ŒåŠ¨ç”»å¯¹layeréƒ½æ²¡æœ‰å½±å“ï¼ŒåŠ¨ç”»ç»“æŸåŽï¼Œlayerä¼šæ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€ kCAFillModeForwards å½“åŠ¨ç”»ç»“æŸåŽï¼Œlayerä¼šä¸€ç›´ä¿æŒç€åŠ¨ç”»æœ€åŽçš„çŠ¶æ€ kCAFillModeBackwards åœ¨åŠ¨ç”»å¼€å§‹å‰ï¼Œåªéœ€è¦å°†åŠ¨ç”»åŠ å…¥äº†ä¸€ä¸ªlayerï¼Œlayerä¾¿ç«‹å³è¿›å…¥åŠ¨ç”»çš„åˆå§‹çŠ¶æ€å¹¶ç­‰å¾…åŠ¨ç”»å¼€å§‹ã€‚ kCAFillModeBoth è¿™ä¸ªå…¶å®žå°±æ˜¯ä¸Šé¢ä¸¤ä¸ªçš„åˆæˆ.åŠ¨ç”»åŠ å…¥åŽå¼€å§‹ä¹‹å‰ï¼Œlayerä¾¿å¤„äºŽåŠ¨ç”»åˆå§‹çŠ¶æ€ï¼ŒåŠ¨ç”»ç»“æŸåŽlayerä¿æŒåŠ¨ç”»æœ€åŽçš„çŠ¶æ€ äºŒã€åŸºç¡€åŠ¨ç”»ï¼ˆCABasicAnimationï¼‰åŸºç¡€åŠ¨ç”»å°±æ˜¯ä»Žä¸€ä¸ªçŠ¶æ€å€¼ï¼ˆfromValueï¼‰å˜æ¢æˆå¦ä¸€ä¸ªçŠ¶æ€å€¼ï¼ˆtoValueï¼‰ï¼Œç‰¹æœ‰çš„å±žæ€§ï¼š fromValue æ‰€æ”¹å˜å±žæ€§çš„èµ·å§‹å€¼ toValue æ‰€æ”¹å˜å±žæ€§çš„ç»“æŸæ—¶çš„å€¼ byValue æ‰€æ”¹å˜å±žæ€§ç›¸åŒèµ·å§‹å€¼çš„æ”¹å˜é‡ä¸‹é¢çš„ä»£ç æ˜¯ä¸€ä¸ªç®€å•ä½ç½®ç§»åŠ¨åŠ¨ç”»ï¼š12345678910111213let moveView = UIView(frame: CGRect(x: 20, y: 240, width: 70, height: 70))moveView.center = CGPoint(x: 40, y: 200)moveView.backgroundColor = UIColor.redview.addSubview(moveView)let moveAnim = CABasicAnimation(keyPath: &quot;position&quot;)moveAnim.fromValue = NSValue(cgPoint: CGPoint(x: 40, y: 240))moveAnim.toValue = NSValue(cgPoint: CGPoint(x: 300, y: 240))moveAnim.duration = 2moveAnim.repeatCount = Float.infinitymoveAnim.autoreverses = truemoveView.layer.add(moveAnim, forKey: &quot;moveAnim&quot;) å¦å¤–CABasicAnimationè¿˜å¯ä»¥åšæ—‹è½¬ã€æ¯”ä¾‹ç¼©æ”¾ã€èƒŒæ™¯é¢œè‰²å˜åŒ–ã€å†…å®¹ï¼ˆå›¾ç‰‡ï¼‰å˜åŒ–ã€é€æ˜Žåº¦å˜åŒ–ã€åœ†è§’å˜åŒ–ã€æŒ‡å®šå¤§å°å˜åŒ–ç­‰åŠ¨ç”»ã€‚ï¼ˆè¿™äº›æˆ‘éƒ½å†™äº†ä¸€äº›ç¤ºä¾‹ä»£ç ï¼Œé“¾æŽ¥åœ¨æ–‡æœ«ï¼‰è¿™äº›åŠ¨ç”»çš„ä»£ç å½¢å¼åŸºæœ¬éƒ½å·®ä¸å¤šï¼Œå…ˆå»ºç«‹è§†å›¾ï¼Œç„¶åŽåˆ›å»ºCABasicAnimationç±»åž‹åŠ¨ç”»å¯¹è±¡ï¼Œå¹¶æŒ‡å®šä¸åŒçš„fromValueã€toValueç­‰å±žæ€§ï¼Œæœ€åŽæŠŠåŠ¨ç”»å¯¹è±¡åŠ å…¥åˆ°è§†å›¾çš„CALayerå±‚ã€‚ ä¸‰ã€å…³é”®å¸§åŠ¨ç”»ï¼ˆCAKeyframeAnimationï¼‰æŒ‰ç…§æŒ‡å®šçš„ä¸€ä¸²å€¼è¿›è¡ŒåŠ¨ç”»,å¥½åƒæ‹ç”µå½±ä¸€æ ·çš„ä¸€å¸§ä¸€å¸§çš„æ•ˆæžœã€‚ valuesï¼š åŠ¨ç”»å¯¹è±¡ä¼šåœ¨æŒ‡å®šçš„æ—¶é—´(duration)å†…ï¼Œä¾æ¬¡æ˜¾ç¤ºvaluesæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…³é”®å¸§ path ï¼š å¯ä»¥è®¾ç½®ä¸€ä¸ªCGPathRef\CGMutablePathRef,è®©å±‚è·Ÿç€è·¯å¾„ç§»åŠ¨ã€‚pathåªå¯¹CALayerçš„anchorPointå’Œpositionèµ·ä½œç”¨ã€‚è®¾ç½®äº†pathï¼Œé‚£ä¹ˆvalueså°†è¢«å¿½ç•¥ã€‚ keyTimes ï¼š å¯ä»¥ä¸ºå¯¹åº”çš„å…³é”®å¸§æŒ‡å®šå¯¹åº”çš„æ—¶é—´ç‚¹,å…¶å–å€¼èŒƒå›´ä¸º0åˆ°1.0,keyTimesä¸­çš„æ¯ä¸€ä¸ªæ—¶é—´å€¼éƒ½å¯¹åº”valuesä¸­çš„æ¯ä¸€å¸§ã€‚å½“keyTimesæ²¡æœ‰è®¾ç½®çš„æ—¶å€™,å„ä¸ªå…³é”®å¸§çš„æ—¶é—´æ˜¯å¹³åˆ†çš„ã€‚ rotationMode : æ—‹è½¬æ ·å¼ CABasicAnimationå¯çœ‹åšæ˜¯æœ€å¤šåªæœ‰2ä¸ªå…³é”®å¸§ï¼ˆå¼€å§‹å’Œç»“æŸï¼‰çš„CAKeyframeAnimation ä¸‹é¢çš„ä»£ç é€šè¿‡valuesåšæˆæŠ–åŠ¨çš„åŠ¨ç”»ï¼š1234let anima = CAKeyframeAnimation(keyPath: &quot;transform.rotation&quot;)anima.values = [-Double.pi/180*4,Double.pi/180*4, -Double.pi/180*4]anima.repeatCount = Float.infinityanimView.layer.add(anima, forKey: &quot;shake&quot;) ä½¿ç”¨pathé…åˆè´å¡žå°”æ›²çº¿å°±å¯ä»¥åšæˆå¦‚ä¸‹æ•ˆæžœï¼š ä»£ç 12345678910111213141516171819let tempView = UIView(frame: CGRect(x: 50, y: 100, width: 250, height: 500))let bezierPath = UIBezierPath(ovalIn: tempView.frame)let orbitAnim = CAKeyframeAnimation(keyPath: &quot;position&quot;)orbitAnim.duration = 5orbitAnim.path = bezierPath.cgPathorbitAnim.calculationMode = kCAAnimationPacedorbitAnim.fillMode = kCAFillModeForwardsorbitAnim.repeatCount = Float.infinityorbitAnim.rotationMode = kCAAnimationRotateAutoReverseanimView.layer.add(orbitAnim, forKey: &quot;orbitAnim&quot;)let shapeLayer = CAShapeLayer()shapeLayer.strokeColor = UIColor.purple.cgColorshapeLayer.fillColor = UIColor.clear.cgColorshapeLayer.lineWidth = 0.5shapeLayer.lineJoin = kCALineJoinRoundshapeLayer.lineCap = kCALineCapRoundshapeLayer.path = bezierPath.cgPathview.layer.addSublayer(shapeLayer) å››ã€ç»„åŠ¨ç”»ï¼ˆCAAnimationGroupï¼‰ç»„åŠ¨ç”»é¡¾åæ€ä¹‰å°±æ˜¯æŠŠä¸åŒçš„åŠ¨ç”»ç»„åˆèµ·æ¥ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š1234567891011121314151617// ä½ç§»let anima1 = CABasicAnimation(keyPath: &quot;position&quot;)anima1.fromValue = NSValue(cgPoint: CGPoint(x: 40, y: 240))anima1.toValue = NSValue(cgPoint: CGPoint(x: 300, y: 240))// ç¼©æ”¾let anima2 = CABasicAnimation(keyPath: &quot;transform.scale&quot;)anima2.fromValue = NSNumber.init(value: 0.8)anima2.toValue = NSNumber.init(value: 2.0)// æ—‹è½¬let anima3 = CABasicAnimation(keyPath: &quot;transform.rotation&quot;)anima3.toValue = Double.pi*4// ç»„åˆlet groupAnimation = CAAnimationGroup()groupAnimation.animations = [anima1, anima2, anima3]groupAnimation.duration = 3.0animView.layer.add(groupAnimation, forKey: nil) ç»„åˆåŽçš„åŠ¨ç”»æ•ˆæžœå°±æ˜¯åœ¨ç§»åŠ¨çš„åŒæ—¶ï¼Œä¹Ÿåœ¨ç¼©æ”¾å’Œæ—‹è½¬ã€‚ äº”ã€è¿‡æ¸¡åŠ¨ç”»ï¼ˆCATransitionï¼‰CATransitionç”¨äºŽåšè¿‡æ¸¡åŠ¨ç”»æˆ–è€…è½¬åœºåŠ¨ç”»ï¼Œèƒ½å¤Ÿä¸ºå±‚æä¾›ç§»å‡ºå±å¹•å’Œç§»å…¥å±å¹•çš„åŠ¨ç”»æ•ˆæžœã€‚ typeï¼šåŠ¨ç”»è¿‡æ¸¡ç±»åž‹å››ä¸ªç³»ç»Ÿå…¬å¼€çš„ ç³»ç»Ÿå…¬å¼€API æ•ˆæžœè¯´æ˜Ž æ˜¯å¦æ”¯æŒæ–¹å‘ kCATransitionFade æ·¡å‡ºæ•ˆæžœ æ˜¯ kCATransitionMoveIn æ–°è§†å›¾ç§»åŠ¨åˆ°æ—§è§†å›¾ä¸Š æ˜¯ kCATransitionPush æ–°è§†å›¾æŽ¨å‡ºæ—§è§†å›¾ æ˜¯ kCATransitionReveal ç§»å¼€æ—§è§†å›¾æ˜¾ç¤ºæ–°è§†å›¾ æ˜¯ å…¶ä»–è¿˜æœ‰ä¸€äº›éžç³»ç»Ÿå…¬å¼€çš„è¿‡æ¸¡ç±»åž‹ï¼š1[&quot;cube&quot;, &quot;suckEffect&quot;, &quot;rippleEffect&quot;, &quot;pageCurl&quot;, &quot;pageUnCurl&quot;, &quot;oglFlip&quot;] subtype : è¿‡æ¸¡åŠ¨ç”»çš„åŠ¨ç”»æ–¹å‘ 1234kCATransitionFromRight ä»Žå³ä¾§è¿›å…¥kCATransitionFromLeft ä»Žå·¦ä¾§è¿›å…¥kCATransitionFromTop ä»Žé¡¶éƒ¨è¿›å…¥kCATransitionFromBottom ä»Žåº•éƒ¨è¿›å…¥ startProgressï¼šåŠ¨ç”»èµ·ç‚¹(åœ¨æ•´ä½“åŠ¨ç”»çš„ç™¾åˆ†æ¯”) endProgressï¼šåŠ¨ç”»ç»ˆç‚¹(åœ¨æ•´ä½“åŠ¨ç”»çš„ç™¾åˆ†æ¯”) å…­ã€å¼¹ç°§åŠ¨ç”» CASpringAnimationå¸¸ç”¨å±žæ€§ massï¼š æ¨¡æ‹Ÿçš„æ˜¯è´¨é‡ï¼Œå½±å“å›¾å±‚è¿åŠ¨æ—¶çš„å¼¹ç°§æƒ¯æ€§ï¼Œè´¨é‡è¶Šå¤§ï¼Œå¼¹ç°§æ‹‰ä¼¸å’ŒåŽ‹ç¼©çš„å¹…åº¦è¶Šå¤§ é»˜è®¤å€¼ï¼š1 ; stiffnessï¼šåˆšåº¦ç³»æ•°(åŠ²åº¦ç³»æ•°/å¼¹æ€§ç³»æ•°)ï¼Œåˆšåº¦ç³»æ•°è¶Šå¤§ï¼Œå½¢å˜äº§ç”Ÿçš„åŠ›å°±è¶Šå¤§ï¼Œè¿åŠ¨è¶Šå¿«ã€‚é»˜è®¤å€¼ï¼š 100 ï¼› dampingï¼šé˜»å°¼ç³»æ•°ï¼Œé˜»æ­¢å¼¹ç°§ä¼¸ç¼©çš„ç³»æ•°ï¼Œé˜»å°¼ç³»æ•°è¶Šå¤§ï¼Œåœæ­¢è¶Šå¿«ã€‚é»˜è®¤å€¼ï¼š10ï¼› initialVelocityï¼šåˆå§‹é€ŸçŽ‡ï¼ŒåŠ¨ç”»è§†å›¾çš„åˆå§‹é€Ÿåº¦å¤§å°ã€‚é»˜è®¤å€¼ï¼š0 ï¼›é€ŸçŽ‡ä¸ºæ­£æ•°æ—¶ï¼Œé€Ÿåº¦æ–¹å‘ä¸Žè¿åŠ¨æ–¹å‘ä¸€è‡´ï¼Œé€ŸçŽ‡ä¸ºè´Ÿæ•°æ—¶ï¼Œé€Ÿåº¦æ–¹å‘ä¸Žè¿åŠ¨æ–¹å‘ç›¸åï¼› settlingDurationï¼šä¼°ç®—æ—¶é—´ è¿”å›žå¼¹ç°§åŠ¨ç”»åˆ°åœæ­¢æ—¶çš„ä¼°ç®—æ—¶é—´ï¼Œæ ¹æ®å½“å‰çš„åŠ¨ç”»å‚æ•°ä¼°ç®—ï¼›å®žä¾‹ï¼š1234567891011121314151617181920212223242526272829// ä¸åŒçš„keypathï¼Œä¸åŒçš„æ•ˆæžœlet springAnimation = CASpringAnimation(keyPath: &quot;position.y&quot;)if springAnimation.keyPath == &quot;position&quot; &#123; springAnimation.fromValue = NSValue.init(cgPoint: self.jellyView.layer.position) springAnimation.toValue = NSValue.init(cgPoint: point)&#125; else if springAnimation.keyPath == &quot;position.x&quot; &#123; springAnimation.fromValue = self.jellyView.layer.position.x springAnimation.toValue = point.x&#125; else if springAnimation.keyPath == &quot;position.y&quot; &#123; springAnimation.fromValue = self.jellyView.layer.position.y springAnimation.toValue = point.y&#125; else if springAnimation.keyPath == &quot;bounds&quot; &#123; springAnimation.fromValue = NSValue.init(cgRect: CGRect(x: point.x, y: point.y, width: 60, height: 60)) springAnimation.toValue = NSValue.init(cgRect: self.jellyView.frame)&#125;springAnimation.mass = 5springAnimation.stiffness = 100springAnimation.damping = 10springAnimation.initialVelocity = 10springAnimation.duration = springAnimation.settlingDurationspringAnimation.isRemovedOnCompletion = falseself.jellyView.layer.add(springAnimation, forKey: &quot;springAnimation&quot;) keyPathä¸åŒæ—¶æ•ˆæžœä¸åŒï¼š ä»£ç ï¼šæœ¬æ–‡æ‰€æœ‰çš„ç¤ºä¾‹ä»£ç éƒ½åœ¨https://github.com/andyRon/iOS-Animation å‚è€ƒï¼šIOSAnimationDemoiOSåŠ¨ç”»è¯¦è§£(å­¦ä¹ åŠ¨ç”»çœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†)ä¸€ç¯‡æ–‡ç« æžå®š CASpringAnimation å¼¹ç°§åŠ¨ç”»Core Animation å®˜æ–¹æ‰‹å†Œ]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Masonryå­¦ä¹ ]]></title>
    <url>%2F2018%2Fmasonry-begin.html</url>
    <content type="text"><![CDATA[Masonryæ˜¯ä¸€ä¸ªè½»é‡çº§çš„OCå¸ƒå±€æ¡†æž¶ï¼Œ æ‹¥æœ‰è‡ªå·±çš„æè¿°è¯­æ³•ï¼Œé‡‡ç”¨æ›´ä¼˜é›…çš„é“¾å¼è¯­æ³•å°è£…è‡ªåŠ¨å¸ƒå±€ï¼Œç®€æ´æ˜Žäº†ï¼Œå¹¶å…·æœ‰é«˜å¯è¯»æ€§ï¼Œè€Œä¸”åŒæ—¶æ”¯æŒ iOS å’Œ Max OS Xã€‚ Masonryæ”¯æŒçš„å±žæ€§ä¸ŽNSLayoutAttrubuteçš„å¯¹ç…§ï¼š MASConstraint (Masonry) NSAutoLayout è¯´æ˜Ž left NSLayoutAttributeLeft å·¦ä¾§ top NSLayoutAttributeTop ä¸Šä¾§ right NSLayoutAttributeRight å³ä¾§ bottom NSLayoutAttributeBottom ä¸‹ä¾§ leading NSLayoutAttributeLeading é¦–éƒ¨ trailing NSLayoutAttributeTrailing å°¾éƒ¨ width NSLayoutAttributeWidth å®½ height NSLayoutAttributeHeight é«˜ centerX NSLayoutAttributeCenterX æ¨ªå‘ä¸­ç‚¹ centerY NSLayoutAttributeCenterY çºµå‘ä¸­ç‚¹ baseline NSLayoutAttributeBaseline æ–‡æœ¬åŸºçº¿ å…¶ä¸­leadingä¸Žleft, trailingä¸Žright åœ¨æ­£å¸¸æƒ…å†µä¸‹æ˜¯ç­‰ä»·çš„ã€‚ä½†æ˜¯å½“ä¸€äº›å¸ƒå±€æ˜¯ä»Žå³è‡³å·¦æ—¶(æ¯”å¦‚é˜¿æ‹‰ä¼¯æ–‡) åˆ™ä¼šå¯¹è°ƒï¼Œ æ¢å¥è¯è¯´å°±æ˜¯åŸºæœ¬å¯ä»¥ ç”¨leftå’Œrightå°±å¥½äº†ã€‚ åœ¨Masonryä¸­èƒ½å¤Ÿæ·»åŠ AutoLayoutçº¦æŸæœ‰ä¸‰ä¸ªå‡½æ•°: 12345678/*mas_makeConstraints åªè´Ÿè´£æ–°å¢žçº¦æŸ Autolayoutä¸èƒ½åŒæ—¶å­˜åœ¨ä¸¤æ¡é’ˆå¯¹äºŽåŒä¸€å¯¹è±¡çš„çº¦æŸ å¦åˆ™ä¼šæŠ¥é”™ mas_updateConstraints é’ˆå¯¹ä¸Šé¢çš„æƒ…å†µ ä¼šæ›´æ–°åœ¨blockä¸­å‡ºçŽ°çš„çº¦æŸ ä¸ä¼šå¯¼è‡´å‡ºçŽ°ä¸¤ä¸ªç›¸åŒçº¦æŸçš„æƒ…å†µmas_remakeConstraints åˆ™ä¼šæ¸…é™¤ä¹‹å‰çš„æ‰€æœ‰çº¦æŸ ä»…ä¿ç•™æœ€æ–°çš„çº¦æŸ*/- (NSArray *)mas_makeConstraints:(void(^)(MASConstraintMaker *make))block;- (NSArray *)mas_updateConstraints:(void(^)(MASConstraintMaker *make))block;- (NSArray *)mas_remakeConstraints:(void(^)(MASConstraintMaker *make))block; equalTo å’Œ mas_equalToçš„åŒºåˆ«? mas_equalToæ˜¯å®ï¼Œåœ¨MASConstraint.hæ–‡ä»¶ä¸­å®šä¹‰ï¼š 1#define mas_equalTo(...) equalTo(MASBoxValue((__VA_ARGS__))) mas_equalTo æ¯”equalToå¤šäº†ç±»åž‹è½¬æ¢æ“ä½œ, å¤§å¤šæ•°æ—¶å€™ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯ é€šç”¨çš„ï¼Œä½†æ˜¯å¯¹äºŽæ•°å€¼å…ƒç´ ä½¿ç”¨mas_equalToã€‚å¯¹äºŽå¯¹è±¡æˆ–æ˜¯å¤šä¸ªå±žæ€§çš„å¤„ç†ï¼Œä½¿ç”¨equalToã€‚ ä»¥å‡ ä¸ªðŸŒ°å­¦ä¹ Masonryï¼š 1 ä¸­å¿ƒç‚¹ä¸Žself.viewç›¸åŒï¼Œå®½åº¦ä¸º300*30012345678910// exp1: ä¸­å¿ƒç‚¹ä¸Žself.viewç›¸åŒï¼Œå®½åº¦ä¸º300*300-(void)exp1 &#123; UIView *view = [UIView new]; [view setBackgroundColor:[UIColor redColor]]; [self.view addSubview:view]; [view mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.center.equalTo(self.view); make.size.mas_equalTo(CGSizeMake(300, 300)); &#125;];&#125; 2 ä¸Šä¸‹å·¦å³è¾¹è·éƒ½ä¸º1012345678910111213141516171819202122-(void)exp2 &#123; UIView *view = [UIView new]; [view setBackgroundColor:[UIColor redColor]]; [self.view addSubview:view]; [view mas_makeConstraints:^(MASConstraintMaker *make) &#123; // å†™æ³•1 make.edges.equalTo(self.view).with.insets(UIEdgeInsetsMake(10, 10, 10, 10)); /* // å†™æ³•2 make.top.equalTo(self.view).with.offset(10); make.left.equalTo(self.view).with.offset(10); make.bottom.equalTo(self.view).with.offset(-10); make.right.equalTo(self.view).with.offset(-10); */ /* // å†™æ³•3 make.top.left.bottom.and.right.equalTo(self.view).with.insets(UIEdgeInsetsMake(10, 10, 10, 10)); */ &#125;];&#125; edges å°±æ˜¯top,left,bottom,rightç®€åŒ–å†™æ³• å†™æ³•2ä¸­ bottomå’Œrightçš„offsetæ˜¯è´Ÿæ•°ï¼Œå› ä¸ºè®¡ç®—çš„æ˜¯ç»å¯¹çš„æ•°å€¼ï¼Œä¹Ÿå°±æ˜¯viewçš„bottomçš„yå€¼å‡åŽ»self.viewçš„bottomçš„yå€¼æ˜¯-10ï¼Œviewçš„rightçš„xå€¼å‡åŽ»self.viewçš„rightçš„xå€¼æ˜¯-10ã€‚ andå’Œwithä»€ä¹ˆäº‹ä»¶éƒ½æ²¡åšï¼Œåªæ˜¯ä»Žåº”ç”¨è¯­æ³•çœ‹ä¸ŠåŽ»å¾ˆé¡ºã€‚ 3 è®©ä¸¤ä¸ªé«˜åº¦ä¸º150çš„viewåž‚ç›´å±…ä¸­ä¸”ç­‰å®½ä¸”ç­‰é—´éš”æŽ’åˆ— é—´éš”ä¸º10(è‡ªåŠ¨è®¡ç®—å™¨é«˜åº¦)123456789101112131415161718192021222324252627282930-(void)exp3&#123; UIView *view1 = [UIView new]; [view1 setBackgroundColor:[UIColor redColor]]; [self.view addSubview:view1]; UIView *view2 = [UIView new]; [view2 setBackgroundColor:[UIColor redColor]]; [self.view addSubview:view2]; [view1 mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.centerY.mas_equalTo(self.view.mas_centerY); make.height.mas_equalTo(150); make.width.mas_equalTo(view2.mas_width); make.left.mas_equalTo(self.view.mas_left).with.offset(10); make.right.mas_equalTo(view2.mas_left).offset(-10); &#125;]; [view2 mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.centerY.mas_equalTo(self.view.mas_centerY); make.height.mas_equalTo(150); make.width.mas_equalTo(view1.mas_width); make.left.mas_equalTo(view1.mas_right).with.offset(10); make.right.equalTo(self.view.mas_right).offset(-10); &#125;]; &#125; 4 iOSè‡ªå¸¦è®¡ç®—å™¨å¸ƒå±€123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150-(void)exp4&#123; //ç”³æ˜ŽåŒºåŸŸï¼ŒdisplayViewæ˜¯æ˜¾ç¤ºåŒºåŸŸï¼ŒkeyboardViewæ˜¯é”®ç›˜åŒºåŸŸ UIView *displayView = [UIView new]; [displayView setBackgroundColor:[UIColor blackColor]]; [self.view addSubview:displayView]; UIView *keyboardView = [UIView new]; [self.view addSubview:keyboardView]; //å…ˆæŒ‰1ï¼š3åˆ†å‰² displViewï¼ˆæ˜¾ç¤ºç»“æžœåŒºåŸŸï¼‰å’Œ keyboardViewï¼ˆé”®ç›˜åŒºåŸŸï¼‰ [displayView mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.top.equalTo(self.view.mas_top); make.left.and.right.equalTo(self.view); make.height.equalTo(keyboardView).multipliedBy(0.3f); &#125;]; [keyboardView mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.top.equalTo(displayView.mas_bottom); make.bottom.equalTo(self.view.mas_bottom); make.left.and.right.equalTo(self.view); &#125;]; //è®¾ç½®æ˜¾ç¤ºä½ç½®çš„æ•°å­—ä¸º0 UILabel *displayNum = [[UILabel alloc]init]; [displayView addSubview:displayNum]; displayNum.text = @&quot;0&quot;; displayNum.font = [UIFont fontWithName:@&quot;HeiTi SC&quot; size:70]; displayNum.textColor = [UIColor whiteColor]; displayNum.textAlignment = NSTextAlignmentRight; [displayNum mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.left.and.right.equalTo(displayView).with.offset(-10); make.bottom.equalTo(displayView).with.offset(-10); &#125;]; //å®šä¹‰é”®ç›˜é”®åç§°ï¼Œï¼Ÿå·ä»£è¡¨åˆå¹¶çš„å•å…ƒæ ¼ NSArray *keys = @[@&quot;AC&quot;,@&quot;+/-&quot;,@&quot;%&quot;,@&quot;Ã·&quot; ,@&quot;7&quot;,@&quot;8&quot;,@&quot;9&quot;,@&quot;x&quot; ,@&quot;4&quot;,@&quot;5&quot;,@&quot;6&quot;,@&quot;-&quot; ,@&quot;1&quot;,@&quot;2&quot;,@&quot;3&quot;,@&quot;+&quot; ,@&quot;0&quot;,@&quot;?&quot;,@&quot;.&quot;,@&quot;=&quot;]; int indexOfKeys = 0; for (NSString *key in keys)&#123; //å¾ªçŽ¯æ‰€æœ‰é”® indexOfKeys++; int rowNum = indexOfKeys %4 ==0? indexOfKeys/4:indexOfKeys/4 +1; int colNum = indexOfKeys %4 ==0? 4 :indexOfKeys %4; NSLog(@&quot;index is:%d and row:%d,col:%d&quot;,indexOfKeys,rowNum,colNum); //é”®æ ·å¼ UIButton *keyView = [UIButton buttonWithType:UIButtonTypeCustom]; [keyboardView addSubview:keyView]; [keyView setTitleColor:[UIColor blackColor] forState:UIControlStateNormal]; [keyView setTitle:key forState:UIControlStateNormal]; [keyView.layer setBorderWidth:1]; [keyView.layer setBorderColor:[[UIColor blackColor]CGColor]]; [keyView.titleLabel setFont:[UIFont fontWithName:@&quot;Arial-BoldItalicMT&quot; size:30]]; //é”®çº¦æŸ [keyView mas_makeConstraints:^(MASConstraintMaker *make) &#123; //å¤„ç† 0 åˆå¹¶å•å…ƒæ ¼ if([key isEqualToString:@&quot;0&quot;] || [key isEqualToString:@&quot;?&quot;] )&#123; if([key isEqualToString:@&quot;0&quot;])&#123; [keyView mas_makeConstraints:^(MASConstraintMaker *make) &#123; make.height.equalTo(keyboardView.mas_height).with.multipliedBy(.2f); make.width.equalTo(keyboardView.mas_width).multipliedBy(.5); make.left.equalTo(keyboardView.mas_left); make.baseline.equalTo(keyboardView.mas_baseline).with.multipliedBy(.9f); &#125;]; &#125;if([key isEqualToString:@&quot;?&quot;])&#123; [keyView removeFromSuperview]; &#125; &#125; //æ­£å¸¸çš„å•å…ƒæ ¼ else&#123; make.width.equalTo(keyboardView.mas_width).with.multipliedBy(.25f); make.height.equalTo(keyboardView.mas_height).with.multipliedBy(.2f); //æŒ‰ç…§è¡Œå’Œåˆ—æ·»åŠ çº¦æŸï¼Œè¿™é‡Œæ·»åŠ è¡Œçº¦æŸ switch (rowNum) &#123; case 1: &#123; make.baseline.equalTo(keyboardView.mas_baseline).with.multipliedBy(.1f); keyView.backgroundColor = [UIColor colorWithRed:205 green:205 blue:205 alpha:1]; &#125; break; case 2: &#123; make.baseline.equalTo(keyboardView.mas_baseline).with.multipliedBy(.3f); &#125; break; case 3: &#123; make.baseline.equalTo(keyboardView.mas_baseline).with.multipliedBy(.5f); &#125; break; case 4: &#123; make.baseline.equalTo(keyboardView.mas_baseline).with.multipliedBy(.7f); &#125; break; case 5: &#123; make.baseline.equalTo(keyboardView.mas_baseline).with.multipliedBy(.9f); &#125; break; default: break; &#125; //æŒ‰ç…§è¡Œå’Œåˆ—æ·»åŠ çº¦æŸï¼Œè¿™é‡Œæ·»åŠ åˆ—çº¦æŸ switch (colNum) &#123; case 1: &#123; make.left.equalTo(keyboardView.mas_left); &#125; break; case 2: &#123; make.right.equalTo(keyboardView.mas_centerX); &#125; break; case 3: &#123; make.left.equalTo(keyboardView.mas_centerX); &#125; break; case 4: &#123; make.right.equalTo(keyboardView.mas_right); [keyView setBackgroundColor:[UIColor colorWithRed:243 green:127 blue:38 alpha:1]]; &#125; break; default: break; &#125; &#125; &#125;]; &#125; &#125; ä»£ç : MasonryDemo å‚è€ƒ:Masonryä»‹ç»ä¸Žä½¿ç”¨å®žè·µ(å¿«é€Ÿä¸Šæ‰‹Autolayout)Masonryçš„ä½¿ç”¨]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>Masonry</tag>
        <tag>å¸ƒå±€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‘CocoaPodså‘å¸ƒä»£ç ]]></title>
    <url>%2F2017%2Fios-cocoapods-push.html</url>
    <content type="text"><![CDATA[Cocoapodsæ˜¯éžå¸¸å¥½ç”¨çš„ä¸€ä¸ªiOSä¾èµ–ç®¡ç†å·¥å…·ï¼Œç”¨å®ƒæ¥ç®¡ç†å’Œæ›´æ–°é¡¹ç›®ä¸­çš„ç¬¬ä¸‰åº“ä½¿iOSå¼€å‘æ›´åŠ æ–¹ä¾¿ã€‚ä½¿ç”¨åˆ«äººä¼˜ç§€çš„ä»£ç åœ¨ç¨‹åºå‘˜å¼€å‘è¿‡ç¨‹ä¸­æ˜¯éžå¸¸å¸¸è§çš„äº‹ï¼Œä¸ºåˆ«äººè´¡çŒ®ä»£ç ä¹Ÿæ˜¯å¾ˆæœ‰å¿…è¦çš„äº‹ã€‚ è¿™ç¯‡æ–‡ç« æ˜¯æˆ‘æ€»ç»“å‘Cocoapodsè´¡çŒ®ä»£ç çš„è¿‡ç¨‹ã€‚æˆ‘ä»¥è‡ªå·±ä¸€ä¸ªéžå¸¸éžå¸¸ç®€å•çš„é¡¹ç›®ARFPSStatusæ¥è®°å½•è¿™ä¸ªè¿‡ç¨‹ã€‚ARFPSStatuséžå¸¸ç®€å•ï¼Œæ˜¯Swiftå†™çš„åœ¨çŠ¶æ€æ æ˜¾ç¤ºå±å¹•çš„FPSï¼Œæºç åªæœ‰ä¸€ä¸ªSwiftæ–‡ä»¶ã€‚ æ¥å§ï¼ðŸŽ‰æˆ‘è¯•ç€ä¸ºiOSå¼€å‘è´¡çŒ®ä¸€ç‚¹ç»µè–„ä¹‹åŠ›å§ã€‚ðŸŽ‰ ä¸€ã€å®‰è£…cocoapods1sudo gem install cocoapods --pre äºŒã€åˆ›å»ºä»£ç å¹¶ä¸Šä¼ ä»£ç åˆ°Githubå°±æ˜¯è¦å‘å¸ƒçš„ä»£ç äº†ï¼Œå…·ä½“æ€Žä¹ˆä¸Šä¼ ä»£ç åˆ°Githubä¸Šæˆ‘å°±ä¸é‡å¤äº†ã€‚ ä¸‰ã€åœ¨githubä¸Šå‘å¸ƒä¸€ä¸ªç‰ˆæœ¬ç‚¹å‡»è¿™è¾¹çš„release:å‘å¸ƒä¸€ä¸ªç‰ˆæœ¬ï¼Œå‡è®¾æ˜¯0.1.0: åˆ›å»ºpodspecæ–‡ä»¶å¸¸è§ä¸€ä¸ª&lt;é¡¹ç›®åç§°&gt;.podspecæ–‡ä»¶ï¼Œæˆ‘è¿™è¾¹å°±æ˜¯ARFPSStatus.podspecæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š1234567891011121314Pod::Spec.new do |s| s.name = &quot;ARFPSStatus&quot; s.version = &quot;0.1.0&quot; s.summary = &quot;ARFPSStatus - Show FPS Status on StatusBar in Swift&quot; s.homepage = &quot;https://github.com/andyRon/ARFPSStatus&quot; s.license = &quot;MIT&quot; s.authors = &#123; &quot;andyron&quot; =&gt; &quot;rongming.2008@163.com&quot; &#125; s.source = &#123; :git =&gt; &quot;https://github.com/andyRon/ARFPSStatus.git&quot;, :tag =&gt; &quot;0.1.0&quot; &#125; s.frameworks = &apos;Foundation&apos;, &apos;UIKit&apos; s.platform = :ios, &apos;9.0&apos; s.source_files = &apos;ARFPSStatus/*&apos; s.requires_arc = true end s.name â€“ é¡¹ç›®åç§°ï¼Œä¹Ÿå°±æ˜¯åˆ«äººä½¿ç”¨Podæ—¶ä½¿ç”¨çš„åå­—ï¼Œéœ€è¦å”¯ä¸€ï¼Œå¯äº‹å…ˆåœ¨Cocoapodsä¸ŠæŸ¥è¯¢ä¸€ä¸‹ã€‚ s.version â€“ è¿™æ˜¯ä½  Pod çš„ç‰ˆæœ¬ã€‚åŠ¡å¿…æ³¨æ„ï¼Œå®ƒå¾—å’Œ Github release çš„ç‰ˆæœ¬å·ç›¸åŒï¼Œå°±æ˜¯åˆšæ‰å‘å¸ƒçš„ç‰ˆæœ¬0.1.0ã€‚å¦‚æžœä¸¤è€…ä¸åŒ¹é…ï¼Œå°±ä¼šæŠ¥é”™ã€‚ s.summary å’Œ s.description â€“ è¿™ä¸¤ä¸ªå˜é‡æœ€ç»ˆä¼šæ˜¾ç¤ºåœ¨ Cocoapods é¡µé¢ä¸Šã€‚è¯·ç¡®ä¿ description æ¯” summary æ›´é•¿ï¼Œå¦åˆ™å°†ä¼šæŠ¥é”™ã€‚descriptionä¸æ˜¯å¿…é¡»çš„ã€‚ s.homepage â€“ è¿™æ˜¯ Pod æºä»£ç çš„ URLã€‚ s.author â€“ å¼€å‘è€…ä¿¡æ¯ï¼Œå¼€å‘è€…åå­—å’Œé‚®ç®±ã€‚ s.source_files â€“ è¿™æ˜¯æœ€é‡è¦çš„å‚æ•°ã€‚ä¸æ˜¯æ‰€æœ‰Githubé¡¹ç›®ä¸­æ‰€æœ‰æ–‡ä»¶éƒ½éœ€è¦æäº¤åˆ°CocoaPodsé‡Œï¼Œé¡¹ç›®ä¸­å¯èƒ½æœ‰ä¸€äº›Demoã€å›¾ç‰‡å•Šç­‰ï¼Œæäº¤åˆ°CocoaPodsçš„åªéœ€è¦æºç ï¼Œå°±æ˜¯åˆ«äººä½¿ç”¨æ—¶æœ€å°‘æ‰€éœ€çš„ä»£ç ã€‚ä¾‹å¦‚ï¼Œæˆ‘éœ€è¦æäº¤çš„æ˜¯ARFPSStatus/ARFPSStatus.swiftæ–‡ä»¶ï¼Œs.source_fileså°±æ˜¯ARFPSStatus/ARFPSStatus.swiftï¼Œæˆ–è€…ä¹‹åŽå¦‚æžœå†åœ¨ARFPSStatus/ç›®å½•ä¸­æ·»åŠ å…¶ä»–æ–‡ä»¶ï¼Œs.source_fileså°±å¯ä»¥æ˜¯ARFPSStatus/*ã€‚å½“ç„¶ï¼Œè¿˜å¯ä»¥æ˜¯å…¶å®ƒä¸€äº›å½¢å¼ã€‚ARFPSStatus/*.swiftARFPSStatus/*.{swift,plist} Podspecæ–‡ä»¶çš„è¯¦ç»†è¯­æ³•è§„åˆ™å¯æŸ¥çœ‹å®˜ç½‘çš„Podspec Syntax Reference éªŒè¯é¡¹ç›®CocoaPods éœ€è¦éªŒè¯é¡¹ç›®æœ‰æ²¡æœ‰é”™è¯¯ pod lib lint12345678$ pod lib lint -&gt; ARFPSStatus (0.1.0) - WARN | [iOS] license: Unable to find a license file - WARN | xcodebuild: /Users/andyron/myfield/github/ARFPSStatus/ARFPSStatus/ARFPSStatus.swift:91:17: warning: variable &apos;label&apos; was never mutated; consider changing to &apos;let&apos; constant[!] ARFPSStatus did not pass validation, due to 2 warnings (but you can use `--allow-warnings` to ignore them).You can use the `--no-clean` option to inspect any issue. å¦‚æžœæƒ³å¿½ç•¥è­¦å‘Šï¼Œå¯ä½¿ç”¨--allow-warningsã€‚ $ pod lib lint --allow-warnings å‘å¸ƒ åˆ›å»º Trunk è´¦å·å…³äºŽTrunkå¯ä»¥æŸ¥çœ‹ä¸ºä»€ä¹ˆåš Trunkè¿™ç¯‡æ–‡ç« åˆ›å»º Trunk è´¦å·å¾ˆç®€å•ï¼Œåªè¦ä¸€ä¸ªé‚®ç®±ã€‚pod trunk register rongming.2008@163.comé‚®ç®±ä¼šæ”¶åˆ°ä¸€å°ç¡®è®¤é‚®ä»¶ï¼Œç¡®è®¤æˆåŠŸï¼š æŽ¨é€ä»£ç åˆ°Podpod trunk push ARFPSStatus.podspecå½“ç„¶ä¹Ÿå¯ä½¿ç”¨pod trunk push ARFPSStatus.podspec --allow-warningsæ¥å¿½ç•¥ä¸€äº›ä¸å¿…è¦çš„è­¦å‘Šã€‚æˆåŠŸåŽï¼š1234567891011$ pod trunk push ARFPSStatus.podspec Updating spec repo `master`-------------------------------------------------------------------------------- ðŸŽ‰ Congrats ðŸš€ ARFPSStatus (0.1.0) successfully published ðŸ“… September 28th, 11:33 ðŸŒŽ https://cocoapods.org/pods/ARFPSStatus ðŸ‘ Tell your friends!-------------------------------------------------------------------------------- ä½¿ç”¨æ–°å‘å¸ƒçš„ä»£ç å‘å¸ƒæˆåŠŸå’Œå¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½ä½¿ç”¨ï¼Œå¯ä»¥åˆ°Cocoapodsä¸ŠæŸ¥è¯¢ã€‚ é¡¹ç›®çš„Podfileæ–‡ä»¶ä¸­æ·»åŠ ARFPSStatus,å¹¶å®‰è£…ã€‚ 123456target &apos;FPSDemo&apos; douse dynamic frameworks use_frameworks! pod &quot;ARFPSStatus&quot; end Podsé¡¹ç›®ä¼šå¤šå‡ºARFPSStatusç›®å½•ï¼Œé‡Œé¢çš„Support Filesç›®å½•ä¸æ˜¯æˆ‘æ·»åŠ çš„ï¼Œæ˜¯Cocoapodsè‡ªåŠ¨æ·»åŠ çš„ä¸€äº›ç›¸å…³æ–‡ä»¶ã€‚ å‚è€ƒï¼šåŸºäºŽ Swift åˆ›å»º CocoaPods å®Œå…¨æŒ‡å—Podspec Syntax Reference]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>CocoaPods</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºŽiOSå¼€å‘ä¸­çš„pchæ–‡ä»¶]]></title>
    <url>%2F2017%2Fios-pch.html</url>
    <content type="text"><![CDATA[.pchæ–‡ä»¶ä¹Ÿæ˜¯ä¸€ç§å¤´æ–‡ä»¶ï¼Œå®ƒçš„å†…å®¹èƒ½è¢«é¡¹ç›®ä¸­çš„å…¶ä»–æ‰€æœ‰æºæ–‡ä»¶å…±äº«å’Œè®¿é—®ã€‚æ˜¯ä¸€ä¸ªé¢„ç¼–è¯‘æ–‡ä»¶ã€‚ pchæ–‡ä»¶çš„ä½œç”¨ï¼š1.å­˜æ”¾ä¸€äº›å…¨å±€çš„å®(æ•´ä¸ªé¡¹ç›®ä¸­éƒ½ç”¨å¾—ä¸Šçš„å®) 2.ç”¨æ¥åŒ…å«ä¸€äº›å¤´æ–‡ä»¶(æ•´ä¸ªé¡¹ç›®ä¸­éƒ½ç”¨å¾—ä¸Šçš„å¤´æ–‡ä»¶) 3.èƒ½è‡ªåŠ¨æ‰“å¼€æˆ–è€…å…³é—­æ—¥å¿—è¾“å‡ºåŠŸèƒ½ Xcodeæ–°å»ºpchæ–‡ä»¶ Xcodeé…ç½®pchæ–‡ä»¶ pchæ–‡ä»¶çš„ç®€å•ä¾‹å­ä¸€ä¸ªå°é¡¹ç›®çš„pchæ–‡ä»¶ï¼š 1234567891011121314151617181920212223242526272829303132#ifndef PrefixHeader_pch#define PrefixHeader_pch// Include any system framework and library headers here that should be included in all compilation units.// You will also need to set the Prefix Header build setting of one or more of your targets to reference this file.#import &quot;ARSearchBar.h&quot;#import &lt;FMDB.h&gt;#import &quot;ARSqliteTool.h&quot;#import &lt;AFNetworking.h&gt;#import &lt;SSZipArchive.h&gt;#import &lt;MobileCoreServices/MobileCoreServices.h&gt;#import &lt;SystemConfiguration/SystemConfiguration.h&gt;#define ARUserDefaults [NSUserDefaults standardUserDefaults]#define ARScreenBounds [UIScreen mainScreen].bounds#define ARScreenWidth [UIScreen mainScreen].bounds.size.width#define ARScreenHeight [UIScreen mainScreen].bounds.size.height#define WeakSelf __weak typeof(self) weakSelf = self;/** * 1.è¿”å›žä¸€ä¸ªRGBAæ ¼å¼çš„UIColorå¯¹è±¡ */#define RGBA(r, g, b, a) [UIColor colorWithRed:r/255.0f green:g/255.0f blue:b/255.0f alpha:a]/** * 2.è¿”å›žä¸€ä¸ªRGBæ ¼å¼çš„UIColorå¯¹è±¡ */#define RGB(r, g, b) RGBA(r, g, b, 1.0f)#endif /* PrefixHeader_pch */ å‚è€ƒï¼šhttp://www.cnblogs.com/manmq/p/6377882.html]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>pch</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSæ²™ç›’å’Œæ–‡ä»¶ç®¡ç†]]></title>
    <url>%2F2017%2Fios-sandbox-file.html</url>
    <content type="text"><![CDATA[æ²™ç›’ï¼ˆsandboxï¼‰ï¼šiOSç³»ç»Ÿä¸ºæ¯ä¸ªåº”ç”¨ç¨‹åºåˆ›å»ºè‡ªå·±çš„ç›®å½•ï¼Œæ¯ä¸ªåº”ç”¨ç¨‹åºåªèƒ½è®¿é—®è‡ªå·±çš„ç›®å½•ã€‚æ‰€æœ‰çš„éžä»£ç æ–‡ä»¶éƒ½è¦ä¿å­˜åœ¨æ­¤ï¼Œä¾‹å¦‚å›¾åƒï¼Œå›¾æ ‡ï¼Œå£°éŸ³ï¼Œæ˜ åƒï¼Œå±žæ€§åˆ—è¡¨ï¼Œæ–‡æœ¬æ–‡ä»¶ç­‰ã€‚ åœ¨Macçš„Finderä¸Šæ‰“å¼€ä¸€ä¸ªç›®å½•ç”±äºŽæœ‰äº›ç›®å½•æ¯”è¾ƒé•¿ï¼Œä¸é€‚åˆç›´æŽ¥Finderé‡Œç‚¹å‡»é€‰å–ã€‚æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥ç”¨ï¼š åœ¨Finderçš„èœå•ä¸­é€‰æ‹© å‰å¾€ &gt; å‰å¾€æ–‡ä»¶å¤¹ åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨openå‘½ä»¤ï¼š open /Users/andyron/Library/Developer/CoreSimulator/Devices/F03C84B3-2A5E-44A7-AA51-2142A6397CA7/data/Containers/Data/Application/E83106A7-FCF3-45A6-888E-330BC52B279B/ åº”ç”¨æ²™ç›’çš„å®Œæ•´ç›®å½• Xcodeçš„æ¨¡æ‹Ÿå™¨çš„ç›®å½•ç±»ä¼¼ï¼š1/Users/andyron/Library/Developer/CoreSimulator/Devices/F03C84B3-2A5E-44A7-AA51-2142A6397CA7/data/Containers/Data/Application/E83106A7-FCF3-45A6-888E-330BC52B279B/ Devices/F03C84B3-2A5E-44A7-AA51-2142A6397CA7æ˜¯Xcodeä¸­ä¸åŒæ¨¡æ‹Ÿå™¨çš„åŒºåˆ«å­—ç¬¦ çœŸæœºä¸­ç±»ä¼¼ï¼š1/var/mobile/Containers/Data/Application/9AC577C1-08B2-4BAE-9CE2-1211E4994F9E/ ç±»ä¼¼Application/9AC577C1-08B2-4BAE-9CE2-1211E4994F9E/è¿™ä¸ªç›®å½•å°±æ˜¯æ¯ä¸ªåº”ç”¨æ²™ç›’çš„æ ¹ç›®å½•ã€‚ æ²™ç›’ä¸­ç›®å½•ç»“æž„ç±»ä¼¼å¦‚ä¸‹ï¼š12345678910â”œâ”€â”€ Documentsâ”œâ”€â”€ Libraryâ”‚ â”œâ”€â”€ Cachesâ”‚ â”‚ â””â”€â”€ Snapshotsâ”‚ â”‚ â””â”€â”€ com.andyron.Sandboxâ”‚ â”‚ â”œâ”€â”€ 9EEA412B-07C1-44EC-995B-0C12AD87BAF9@2x.ktxâ”‚ â”‚ â””â”€â”€ D3F89052-27FD-42A1-B246-B416E1772FBB@2x.ktxâ”‚ â””â”€â”€ Preferencesâ”œâ”€â”€ SystemDataâ””â”€â”€ tmp é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªæ²™ç›’å«æœ‰3ä¸ªæ–‡ä»¶å¤¹ï¼šDocuments, Library å’Œ tmpã€‚å› ä¸ºåº”ç”¨çš„æ²™ç›’æœºåˆ¶ï¼Œåº”ç”¨åªèƒ½åœ¨å‡ ä¸ªç›®å½•ä¸‹è¯»å†™æ–‡ä»¶ Documentsï¼šè‹¹æžœå»ºè®®å°†ç¨‹åºä¸­å»ºç«‹çš„æˆ–åœ¨ç¨‹åºä¸­æµè§ˆåˆ°çš„æ–‡ä»¶æ•°æ®ä¿å­˜åœ¨è¯¥ç›®å½•ä¸‹ï¼ŒiTuneså¤‡ä»½å’Œæ¢å¤çš„æ—¶å€™ä¼šåŒ…æ‹¬æ­¤ç›®å½• Libraryï¼šå­˜å‚¨ç¨‹åºçš„é»˜è®¤è®¾ç½®æˆ–å…¶å®ƒçŠ¶æ€ä¿¡æ¯ï¼› Library/Cachesï¼šå­˜æ”¾ç¼“å­˜æ–‡ä»¶ï¼ŒiTunesä¸ä¼šå¤‡ä»½æ­¤ç›®å½•ï¼Œæ­¤ç›®å½•ä¸‹æ–‡ä»¶ä¸ä¼šåœ¨åº”ç”¨é€€å‡ºåˆ é™¤ tmpï¼šæä¾›ä¸€ä¸ªå³æ—¶åˆ›å»ºä¸´æ—¶æ–‡ä»¶çš„åœ°æ–¹ã€‚ iTunesåœ¨ä¸ŽiPhoneåŒæ­¥æ—¶ï¼Œå¤‡ä»½æ‰€æœ‰çš„Documentså’ŒLibraryæ–‡ä»¶ã€‚ iPhoneåœ¨é‡å¯æ—¶ï¼Œä¼šä¸¢å¼ƒæ‰€æœ‰çš„tmpæ–‡ä»¶ã€‚ èŽ·å–ä¸åŒç›®å½•12345678910111213141516171819202122// 1ã€èŽ·å–ç¨‹åºçš„Homeç›®å½• NSString *homeDirectory = NSHomeDirectory(); NSLog(@&quot;home path:%@&quot;, homeDirectory); // 2ã€èŽ·å–documentç›®å½• NSArray *Documentspaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); NSString *Documentspath = [Documentspaths objectAtIndex:0]; NSLog(@&quot;Documents path:%@&quot;, Documentspath); // 3ã€èŽ·å–Cacheç›®å½• Library/Caches NSArray *Cachepaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES); NSString *Cachepath = [Cachepaths objectAtIndex:0]; NSLog(@&quot;Cache path:%@&quot;, Cachepath);// 4ã€èŽ·å–Libraryç›®å½• NSArray *Librarypaths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES); NSString *Librarypath = [Librarypaths objectAtIndex:0]; NSLog(@&quot;Library path:%@&quot;, Librarypath);// 5ã€èŽ·å–Tmpç›®å½• NSString *tmpDir = NSTemporaryDirectory(); NSLog(@&quot;tmpDir:%@&quot;, tmpDir); æ–‡ä»¶çš„å†™å…¥å’Œè¯»å–1234567891011121314151617181920- (void)file_w &#123;// 6ã€å†™å…¥æ–‡ä»¶ NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); NSString *docDir = [paths objectAtIndex:0]; if (!docDir) &#123; NSLog(@&quot;Documents ç›®å½•æœªæ‰¾åˆ°&quot;); &#125; NSArray *array = [[NSArray alloc] initWithObjects:@&quot;å†…å®¹&quot;,@&quot;content&quot;,nil]; NSString *filePath = [docDir stringByAppendingPathComponent:@&quot;testFile.txt&quot;]; [array writeToFile:filePath atomically:YES];&#125;- (void)file_r &#123;// 7, è¯»å–æ–‡ä»¶ NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); NSString *docDir = [paths objectAtIndex:0]; NSString *filePath = [docDir stringByAppendingPathComponent:@&quot;testFile.txt&quot;]; NSArray *array = [[NSArray alloc]initWithContentsOfFile:filePath]; NSLog(@&quot;%@&quot;, array);&#125; æ–‡ä»¶ç®¡ç†æ–‡ä»¶ç®¡ç†å™¨NSFileManageræœ‰åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€åˆ›å»ºç›®å½•å’Œæ–‡ä»¶ã€èŽ·å–æ–‡ä»¶åã€åˆ é™¤æ–‡ä»¶ç­‰åŠŸèƒ½ã€‚ åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ 12345678910// åˆ›å»ºæ–‡ä»¶ç®¡ç†å™¨NSFileManager * fileManager = [NSFileManager defaultManager];NSString * documents = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];NSString * filePath = [documents stringByAppendingPathComponent:@&quot;testFile.txt&quot;];// åˆ¤æ–­ä¸€ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨,ä¼ å…¥å…¨è·¯å¾„if ([fileManager fileExistsAtPath:filePath]) &#123; NSLog(@&quot;it is exit&quot;);&#125; åˆ›å»ºç›®å½•å’Œæ–‡ä»¶ 123456789101112131415161718// åœ¨Documentsé‡Œåˆ›å»ºç›®å½•NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);NSString *documentsDirectory = [paths objectAtIndex:0];NSLog(@&quot;documentsDirectory: %@&quot;,documentsDirectory);NSFileManager *fileManager = [NSFileManager defaultManager];NSString *testDirectory = [documentsDirectory stringByAppendingPathComponent:@&quot;test&quot;];// åˆ›å»ºç›®å½•[fileManager createDirectoryAtPath:testDirectory withIntermediateDirectories:YES attributes:nil error:nil];// åœ¨ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶NSString *testPath = [testDirectory stringByAppendingPathComponent:@&quot;test00.txt&quot;];NSString *testPath2 = [testDirectory stringByAppendingPathComponent:@&quot;test22.txt&quot;];NSString *testPath3 = [testDirectory stringByAppendingPathComponent:@&quot;test33.txt&quot;];NSString *string = @&quot;å†™å…¥å†…å®¹ï¼Œwrite String&quot;;[fileManager createFileAtPath:testPath contents:[string dataUsingEncoding:NSUTF8StringEncoding] attributes:nil];[fileManager createFileAtPath:testPath2 contents:[string dataUsingEncoding:NSUTF8StringEncoding] attributes:nil];[fileManager createFileAtPath:testPath3 contents:[string dataUsingEncoding:NSUTF8StringEncoding] attributes:nil]; èŽ·å–ç›®å½•åˆ—é‡Œæ‰€æœ‰æ–‡ä»¶åsubpathsOfDirectoryAtPath å’Œ subpathsAtPath ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥ã€‚ 12345678910NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);NSString *documentsDirectory = [paths objectAtIndex:0];NSLog(@&quot;documentsDirectory: %@&quot;,documentsDirectory);NSFileManager *fileManage = [NSFileManager defaultManager];NSString *myDirectory = [documentsDirectory stringByAppendingPathComponent:@&quot;test&quot;];NSArray *file = [fileManage subpathsOfDirectoryAtPath: myDirectory error:nil];NSLog(@&quot;%@&quot;,file);NSArray *file2 = [fileManage subpathsAtPath: myDirectory ];NSLog(@&quot;%@&quot;,file2); æ›´æ”¹åˆ°æŒ‡å®šç›®å½•ä¸‹æ“ä½œchangeCurrentDirectoryPathæ–¹æ³•ã€‚ 12345678910//åˆ›å»ºæ–‡ä»¶ç®¡ç†å™¨NSFileManager *fileManager = [NSFileManager defaultManager];NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);NSString *documentsDirectory = [paths objectAtIndex:0];//æ›´æ”¹åˆ°å¾…æ“ä½œçš„ç›®å½•ä¸‹[fileManager changeCurrentDirectoryPath:[documentsDirectory stringByExpandingTildeInPath]];//åˆ›å»ºæ–‡ä»¶fileNameæ–‡ä»¶åç§°ï¼Œcontentsæ–‡ä»¶çš„å†…å®¹ï¼Œå¦‚æžœå¼€å§‹æ²¡æœ‰å†…å®¹å¯ä»¥è®¾ç½®ä¸ºnilï¼Œattributesæ–‡ä»¶çš„å±žæ€§ï¼Œåˆå§‹ä¸ºnilNSString * fileName = @&quot;testFileNSFileManager.txt&quot;;NSArray *array = [[NSArray alloc] initWithObjects:@&quot;hello world&quot;,@&quot;hello world1&quot;, @&quot;hello world2&quot;,nil];[fileManager createFileAtPath:fileName contents:[NSKeyedArchiver archivedDataWithRootObject:array] attributes:nil]; åˆ é™¤æ–‡ä»¶ 1[fileManager removeItemAtPath:fileName error:nil]; ä»£ç ï¼š Sandbox å‚è€ƒï¼šæ²™ç›’æœºåˆ¶ä¸Žæ–‡ä»¶(ä¸€)æ²™ç›’æœºåˆ¶ä¸Žæ–‡ä»¶(äºŒ)æ²™ç›’æœºåˆ¶ä¸Žæ–‡ä»¶(ä¸‰)]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>sandbox</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSç½‘ç»œç¼–ç¨‹(å…­)ï¼šSDWebImageçš„ç®€å•ä½¿ç”¨]]></title>
    <url>%2F2017%2Fios-network-6.html</url>
    <content type="text"><![CDATA[SDWebImageä¸€äº›çŸ¥è¯†ï¼š å¯¹è¿œç¨‹å›¾ç‰‡è¿›è¡Œç¼“å­˜ç®¡ç†ï¼ˆç£ç›˜+å†…å­˜ï¼‰ å¼‚æ­¥åŠ è½½ åŒä¸€ä¸ªURLå›¾ç‰‡ä¸ä¼šé‡å¤ä¸‹è½½ å¤±æ•ˆçš„URLä¸ä¼šè¢«æ— é™é‡è¯• å›¾ç‰‡åŠ è½½ä¸€èˆ¬ä½¿ç”¨ SDWebImageé€šè¿‡ä¸ºUIImageViewæ·»åŠ ç±»åˆ«ï¼Œæ‰©å±•äº†ä¸€äº›ç±»ä¼¼çš„æ–¹æ³•ï¼Œåªæ˜¯å‚æ•°çš„å¤šå°‘æ•°ç›®ä¸åŒï¼Œæœ€å…¨çš„å‚æ•°çš„æ–¹æ³•æ˜¯ï¼š 1-sd_setImageWithURL:placeholderImage:options:progress:completed: sd_setImageWithURL: URLçš„å›¾ç‰‡çš„URL placeholderImage: è¿œç¨‹å›¾ç‰‡æ²¡æœ‰åŠ è½½å®Œæˆçš„å ä½å›¾ç‰‡ options: ä¸€ä¸ªä½ç§»æžšä¸¾(SDWebImageOptions)ï¼Œå¯ä»¥é€šè¿‡æŒ‰ä½æˆ– | æ¥å¹¶åˆ—æ·»åŠ å‚æ•°ã€‚SDWebImageOptionsçš„æ‰€æœ‰é€‰é¡¹å¦‚ä¸‹ 1234567891011121314151617181920212223242526272829303132//å¤±è´¥åŽé‡è¯•SDWebImageRetryFailed = 1 &lt;&lt; 0, //UIäº¤äº’æœŸé—´å¼€å§‹ä¸‹è½½ï¼Œå¯¼è‡´å»¶è¿Ÿä¸‹è½½æ¯”å¦‚UIScrollViewå‡é€Ÿã€‚SDWebImageLowPriority = 1 &lt;&lt; 1, //åªè¿›è¡Œå†…å­˜ç¼“å­˜SDWebImageCacheMemoryOnly = 1 &lt;&lt; 2, //è¿™ä¸ªæ ‡å¿—å¯ä»¥æ¸è¿›å¼ä¸‹è½½,æ˜¾ç¤ºçš„å›¾åƒæ˜¯é€æ­¥åœ¨ä¸‹è½½SDWebImageProgressiveDownload = 1 &lt;&lt; 3, //åˆ·æ–°ç¼“å­˜SDWebImageRefreshCached = 1 &lt;&lt; 4, //åŽå°ä¸‹è½½SDWebImageContinueInBackground = 1 &lt;&lt; 5, //NSMutableURLRequest.HTTPShouldHandleCookies = YES;SDWebImageHandleCookies = 1 &lt;&lt; 6, //å…è®¸ä½¿ç”¨æ— æ•ˆçš„SSLè¯ä¹¦//SDWebImageAllowInvalidSSLCertificates = 1 &lt;&lt; 7, //ä¼˜å…ˆä¸‹è½½SDWebImageHighPriority = 1 &lt;&lt; 8, //å»¶è¿Ÿå ä½ç¬¦SDWebImageDelayPlaceholder = 1 &lt;&lt; 9, //æ”¹å˜åŠ¨ç”»å½¢è±¡SDWebImageTransformAnimatedImage = 1 &lt;&lt; 10, progress: Block èŽ·å–å½“å‰å›¾ç‰‡æ•°æ®çš„ä¸‹è½½è¿›åº¦ receivedSizeï¼šå·²ç»ä¸‹è½½å®Œæˆçš„æ•°æ®å¤§å° expectedSizeï¼šè¯¥æ–‡ä»¶çš„æ•°æ®æ€»å¤§å° completed: BlockåŠ è½½å®Œ image:ä¸‹è½½å¾—åˆ°çš„å›¾ç‰‡æ•°æ® error:ä¸‹è½½å‡ºçŽ°çš„é”™è¯¯ä¿¡æ¯ SDImageCacheTypeï¼šå›¾ç‰‡çš„ç¼“å­˜ç­–ç•¥ imageURLï¼šä¸‹è½½çš„å›¾ç‰‡çš„urlåœ°å€ å¼•å…¥UIImageView+WebCacheç±»åˆ«å°±å¯ä»¥ä½¿ç”¨SDWebImageåŠ è½½å›¾ç‰‡ 1#import &quot;UIImageView+WebCache.h&quot; ä¸åŒå‚æ•°æ–¹æ³•ä½¿ç”¨ðŸŒ° 12345678910111213141516171819[self.imageView sd_setImageWithURL: url];[self.imageView sd_setImageWithURL: url completed:^(UIImage * _Nullable image, NSError * _Nullable error, SDImageCacheType cacheType, NSURL * _Nullable imageURL) &#123; NSLog(@&quot;å›¾ç‰‡åŠ è½½å®Œ&quot;);&#125;];[self.imageView sd_setImageWithURL:url placeholderImage:[UIImage imageNamed:@&quot;apple&quot;]];[self.imageView sd_setImageWithURL:url placeholderImage:[UIImage imageNamed:@&quot;apple&quot;] completed:^(UIImage * _Nullable image, NSError * _Nullable error, SDImageCacheType cacheType, NSURL * _Nullable imageURL) &#123; NSLog(@&quot;å›¾ç‰‡åŠ è½½å®Œ&quot;);&#125;];[self.imageView sd_setImageWithURL:url placeholderImage:[UIImage imageNamed:@&quot;apple&quot;] options: SDWebImageCacheMemoryOnly];[self.imageView sd_setImageWithURL:url placeholderImage:nil options:0 progress:^(NSInteger receivedSize, NSInteger expectedSize, NSURL * _Nullable targetURL) &#123; //è®¡ç®—å½“å‰å›¾ç‰‡çš„ä¸‹è½½è¿›åº¦ NSLog(@&quot;ä¸‹è½½è¿›åº¦:%.2f&quot;,1.0 *receivedSize / expectedSize);&#125; completed:^(UIImage * _Nullable image, NSError * _Nullable error, SDImageCacheType cacheType, NSURL * _Nullable imageURL) &#123;&#125;]; å›¾ç‰‡åŠ è½½è¿‡ç¨‹ ç¼“å­˜å¤§å°12NSInteger *cacheSize = [[SDImageCache sharedImageCache] getSize];NSLog(@&quot;ç¼“å­˜å¤§å°ï¼š%d&quot;, cacheSize); æ¸…ç†ç¼“å­˜12345// æ¸…ç†å†…å­˜ç¼“å­˜[[SDImageCache sharedImageCache] clearMemory];// æ¸…ç†ç£ç›˜ç¼“å­˜[[SDImageCache sharedImageCache] clearDisk]; æŸ¥çœ‹ç¼“å­˜å®Œæ•´ç›®å½•1NSLog(@&quot;%s__%d__|%@&quot;,__FUNCTION__,__LINE__,[[SDImageCache sharedImageCache] defaultCachePathForKey:@&quot;http://img4.duitang.com/uploads/blog/201310/18/20131018213446_smUw4.thumb.600_0.jpeg&quot;]); ä»£ç ï¼šSDWebImageDemo å‚è€ƒï¼šiOSå›¾ç‰‡åŠ è½½æ¡†æž¶ï¼SDWebImageè§£è¯»SDWebImage çš„ç®€å•ä½¿ç”¨æ–¹æ³•iOSå¼€å‘SDWebImageçš„åŸºæœ¬ä½¿ç”¨]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>SDWebImage</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSç½‘ç»œç¼–ç¨‹(äº”)ï¼šCookieçš„ä½¿ç”¨]]></title>
    <url>%2F2017%2Fios-network-5.html</url>
    <content type="text"><![CDATA[Cookieåœ¨Webå¼€å‘æ—¶æ˜¯éžå¸¸å¸¸ç”¨çš„å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ä¿å­˜å°‘é‡ä¿¡æ¯ä¸€ç§æ–¹æ³•ã€‚Cookieæ˜¯ç½‘ç«™ä¸ºäº†ä¾¿æ˜¯ç»ˆç«¯èº«ä»½ï¼Œä¿å­˜åœ¨ç»ˆç«¯æœ¬åœ°çš„ç”¨æˆ·å‡­è¯ä¿¡æ¯ã€‚Cookieä¸­çš„å­—æ®µä¸Žæ„ä¹‰ç”±æœåŠ¡ç«¯è¿›è¡Œå®šä¹‰ã€‚ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·åœ¨æŸä¸ªç½‘ç«™è¿›è¡Œäº†ç™»å½•æ“ä½œåŽï¼ŒæœåŠ¡ç«¯ä¼šå°†Cookieä¿¡æ¯è¿”å›žç»™ç»ˆç«¯ï¼Œç»ˆç«¯ä¼šå°†è¿™äº›ä¿¡æ¯è¿›è¡Œä¿å­˜ï¼Œåœ¨ä¸‹ä¸€æ¬¡å†æ¬¡è®¿é—®è¿™ä¸ªç½‘ç«™æ—¶ï¼Œç»ˆç«¯ä¼šå°†ä¿å­˜çš„Cookieä¿¡æ¯ä¸€å¹¶å‘é€åˆ°æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯æ ¹æ®Cookieä¿¡æ¯æ˜¯å¦æœ‰æ•ˆæ¥åˆ¤æ–­æ­¤ç”¨æˆ·æ˜¯å¦å¯ä»¥è‡ªåŠ¨ç™»å½•ã€‚ åœ¨iOSåŒæ ·ä¹Ÿæœ‰Cookieï¼ŒCookieç®¡ç†çš„æœ‰ä¸¤ä¸ªç±»ï¼šNSHTTPCookieStorage å’Œ NSHTTPCookieã€‚ èŽ·å–Cookieåœ¨è¯·æ±‚åŽèŽ·å–Cookie1234NSHTTPCookieStorage *cookieJar = [NSHTTPCookieStorage sharedHTTPCookieStorage];for (NSHTTPCookie *cookie in [cookieJar cookies]) &#123; NSLog(@&quot;%@&quot;, cookie);&#125; ä¾‹å¦‚è¯·æ±‚ç™¾åº¦åŽï¼Œå°±ä¼šè¿”å›žå‡ ä¸ªå¦‚ä¸‹Cookieå¯¹è±¡(NSHTTPCookie):123456789101112&lt;NSHTTPCookie version:0 name:BD_NOT_HTTPS value:1 expiresDate:&apos;2017-09-23 14:14:22 +0000&apos; created:&apos;2017-09-23 14:09:22 +0000&apos; sessionOnly:FALSE domain:www.baidu.com partition:none path:/ isSecure:FALSE path:&quot;/&quot; isSecure:FALSE&gt; è®¾ç½®Cookieåœ¨è¯·æ±‚å‰è®¾ç½®ä¸€ä¸ªå¦‚ä¸‹Cookieï¼š1234567891011 // è¯·æ±‚å‰ è®¾ç½®Cookie NSMutableDictionary *cookieProperties = [NSMutableDictionary dictionary]; [cookieProperties setObject:@&quot;andyron&quot; forKey:NSHTTPCookieName]; [cookieProperties setObject:@&quot;1587&quot; forKey:NSHTTPCookieValue]; [cookieProperties setObject:@&quot;andyron.com&quot; forKey:NSHTTPCookieDomain]; [cookieProperties setObject:@&quot;andyron.com&quot; forKey:NSHTTPCookieOriginURL]; [cookieProperties setObject:@&quot;/&quot; forKey:NSHTTPCookiePath]; [cookieProperties setObject:@&quot;0&quot; forKey:NSHTTPCookieVersion]; NSHTTPCookie *cookie = [NSHTTPCookie cookieWithProperties:cookieProperties]; [[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookie:cookie];` åœ¨è¯·æ±‚åŽèŽ·å–çš„å‡ ä¸ªCookieå¯¹è±¡ï¼ˆæœåŠ¡å™¨æœ¬èº«è®¾ç½®çš„å’ŒæœåŠ¡å™¨ä»Žå®¢æˆ·ç«¯åŽåŽ»çš„ï¼‰ä¸­å°±æœ‰å¦‚ä¸‹ä¸€ä¸ªï¼š123456789101112&lt;NSHTTPCookie version:0 name:andyron value:1587 expiresDate:&apos;(null)&apos; created:&apos;2017-09-23 14:43:52 +0000&apos; sessionOnly:TRUE domain:andyron.com partition:none path:/ isSecure:FALSE path:&quot;/&quot; isSecure:FALSE&gt; NSHTTPCookieStorageæ–¹æ³•å’Œå±žæ€§ä»‹ç»12345678910111213141516171819202122232425262728293031323334//èŽ·å–å•ä¾‹å¯¹è±¡+ (NSHTTPCookieStorage *)sharedHTTPCookieStorage;//æ‰€æœ‰Cookieæ•°æ®æ•°ç»„ å…¶ä¸­å­˜æ”¾NSHTTPCookieå¯¹è±¡@property (nullable , readonly, copy) NSArray&lt;NSHTTPCookie *&gt; *cookies;//æ‰‹åŠ¨è®¾ç½®ä¸€æ¡Cookieæ•°æ®- (void)setCookie:(NSHTTPCookie *)cookie;//åˆ é™¤æŸæ¡Cookieä¿¡æ¯- (void)deleteCookie:(NSHTTPCookie *)cookie;//åˆ é™¤æŸä¸ªæ—¶é—´åŽçš„æ‰€æœ‰Cookieä¿¡æ¯ iOS8åŽå¯ç”¨- (nullable NSArray&lt;NSHTTPCookie *&gt; *)cookiesForURL:(NSURL *)URL;//èŽ·å–æŸä¸ªç‰¹å®šURLçš„æ‰€æœ‰Cookieæ•°æ®- (void)removeCookiesSinceDate:(NSDate *)date NS_AVAILABLE(10_10, 8_0);//ä¸ºæŸä¸ªç‰¹å®šçš„URLè®¾ç½®Cookie- (void)setCookies:(NSArray&lt;NSHTTPCookie *&gt; *)cookies forURL:(nullable NSURL *)URL mainDocumentURL:(nullable NSURL *)mainDocumentURL;//Cookieæ•°æ®çš„æŽ¥æ”¶åè®®/*æžšä¸¾å¦‚ä¸‹ï¼štypedef NS_ENUM(NSUInteger, NSHTTPCookieAcceptPolicy) &#123; NSHTTPCookieAcceptPolicyAlways,//æŽ¥æ”¶æ‰€æœ‰Cookieä¿¡æ¯ NSHTTPCookieAcceptPolicyNever,//ä¸æŽ¥æ”¶æ‰€æœ‰Cookieä¿¡æ¯ NSHTTPCookieAcceptPolicyOnlyFromMainDocumentDomain//åªæŽ¥æ”¶ä¸»æ–‡æ¡£åŸŸçš„Cookieä¿¡æ¯&#125;;*/@property NSHTTPCookieAcceptPolicy cookieAcceptPolicy; ä¸ŽCookieç›¸å…³çš„é€šçŸ¥ï¼š12345//Cookieæ•°æ®çš„æŽ¥æ”¶åè®®æ”¹å˜æ—¶å‘é€çš„é€šçŸ¥FOUNDATION_EXPORT NSString * const NSHTTPCookieManagerAcceptPolicyChangedNotification;//ç®¡ç†çš„Cookieæ•°æ®å‘ç”Ÿå˜åŒ–æ—¶å‘é€çš„é€šçŸ¥FOUNDATION_EXPORT NSString * const NSHTTPCookieManagerCookiesChangedNotification; NSHTTPCookieçš„æ–¹æ³•å’Œå±žæ€§ä»‹ç»NSHTTPCookieå°±æ˜¯Cookieå¯¹è±¡ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546//ä¸‹é¢ä¸¤ä¸ªæ–¹æ³•ç”¨äºŽå¯¹è±¡çš„åˆ›å»ºå’Œåˆå§‹åŒ– éƒ½æ˜¯é€šè¿‡å­—å…¸è¿›è¡Œé”®å€¼è®¾ç½®- (nullable instancetype)initWithProperties:(NSDictionary&lt;NSString *, id&gt; *)properties;+ (nullable NSHTTPCookie *)cookieWithProperties:(NSDictionary&lt;NSString *, id&gt; *)properties;//è¿”å›žCookieæ•°æ®ä¸­å¯ç”¨äºŽæ·»åŠ HTTPå¤´å­—æ®µçš„å­—å…¸+ (NSDictionary&lt;NSString *, NSString *&gt; *)requestHeaderFieldsWithCookies:(NSArray&lt;NSHTTPCookie *&gt; *)cookies;//ä»ŽæŒ‡å®šçš„å“åº”å¤´å’ŒURLåœ°å€ä¸­è§£æžå‡ºCookieæ•°æ®+ (NSArray&lt;NSHTTPCookie *&gt; *)cookiesWithResponseHeaderFields:(NSDictionary&lt;NSString *, NSString *&gt; *)headerFields forURL:(NSURL *)URL;//Cookieæ•°æ®ä¸­çš„å±žæ€§å­—å…¸@property (nullable, readonly, copy) NSDictionary&lt;NSString *, id&gt; *properties;//è¯·æ±‚å“åº”çš„ç‰ˆæœ¬@property (readonly) NSUInteger version;//è¯·æ±‚ç›¸åº”çš„åç§°@property (readonly, copy) NSString *name;//è¯·æ±‚ç›¸åº”çš„å€¼@property (readonly, copy) NSString *value;//è¿‡æœŸæ—¶é—´@property (nullable, readonly, copy) NSDate *expiresDate;//è¯·æ±‚çš„åŸŸå@property (readonly, copy) NSString *domain;//è¯·æ±‚çš„è·¯å¾„@property (readonly, copy) NSString *path;//æ˜¯å¦æ˜¯å®‰å…¨ä¼ è¾“@property (readonly, getter=isSecure) BOOL secure;//æ˜¯å¦åªå‘é€HTTPçš„æœåŠ¡@property (readonly, getter=isHTTPOnly) BOOL HTTPOnly;//å“åº”çš„æ–‡æ¡£@property (nullable, readonly, copy) NSString *comment;//ç›¸åº”çš„æ–‡æ¡£URL@property (nullable, readonly, copy) NSURL *commentURL;//æœåŠ¡ç«¯å£åˆ—è¡¨@property (nullable, readonly, copy) NSArray&lt;NSNumber *&gt; *portList;` ä»£ç ï¼šCookie å‚è€ƒï¼š IOSä¸­httpè¯·æ±‚ä½¿ç”¨cookieiOSç½‘ç»œç¼–ç¨‹ä¹‹ä¸ƒâ€”â€”æœ¬åœ°ç”¨æˆ·å‡­è¯Cookieçš„åº”ç”¨]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>NSHTTPCookieStorage</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSç½‘ç»œç¼–ç¨‹(å››)ï¼šç¼“å­˜ç±»NSURLCacheä»‹ç»]]></title>
    <url>%2F2017%2Fios-network-4.html</url>
    <content type="text"><![CDATA[ç½‘ç»œè¯·æ±‚ä¸­ç¼“å­˜ç±»NSURLCacheå¸¸ç”¨å±žæ€§å’Œæ–¹æ³•ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041//èŽ·å–å½“å‰åº”ç”¨çš„ç¼“å­˜ç®¡ç†å¯¹è±¡+ (NSURLCache *)sharedURLCache;//è®¾ç½®è‡ªå®šä¹‰çš„NSURLCacheä½œä¸ºåº”ç”¨ç¼“å­˜ç®¡ç†å¯¹è±¡+ (void)setSharedURLCache:(NSURLCache *)cache;//åˆå§‹åŒ–ä¸€ä¸ªåº”ç”¨ç¼“å­˜å¯¹è±¡/*memoryCapacity è®¾ç½®å†…å­˜ç¼“å­˜å®¹é‡diskCapacity è®¾ç½®ç£ç›˜ç¼“å­˜å®¹é‡path ç£ç›˜ç¼“å­˜è·¯å¾„å†…å®¹ç¼“å­˜ä¼šåœ¨åº”ç”¨ç¨‹åºé€€å‡ºåŽ æ¸…ç©º ç£ç›˜ç¼“å­˜ä¸ä¼š*/- (instancetype)initWithMemoryCapacity:(NSUInteger)memoryCapacity diskCapacity:(NSUInteger)diskCapacity diskPath:(nullable NSString *)path;//èŽ·å–æŸä¸€è¯·æ±‚çš„ç¼“å­˜- (nullable NSCachedURLResponse *)cachedResponseForRequest:(NSURLRequest *)request;//ç»™è¯·æ±‚è®¾ç½®æŒ‡å®šçš„ç¼“å­˜- (void)storeCachedResponse:(NSCachedURLResponse *)cachedResponse forRequest:(NSURLRequest *)request;//ç§»é™¤æŸä¸ªè¯·æ±‚çš„ç¼“å­˜- (void)removeCachedResponseForRequest:(NSURLRequest *)request;//ç§»é™¤æ‰€æœ‰ç¼“å­˜æ•°æ®- (void)removeAllCachedResponses;//ç§»é™¤æŸä¸ªæ—¶é—´èµ·çš„ç¼“å­˜è®¾ç½®- (void)removeCachedResponsesSinceDate:(NSDate *)date NS_AVAILABLE(10_10, 8_0);//å†…å­˜ç¼“å­˜å®¹é‡å¤§å°@property NSUInteger memoryCapacity;//ç£ç›˜ç¼“å­˜å®¹é‡å¤§å°@property NSUInteger diskCapacity;//å½“å‰å·²ç”¨å†…å­˜å®¹é‡@property (readonly) NSUInteger currentMemoryUsage;//å½“å‰å·²ç”¨ç£ç›˜å®¹é‡@property (readonly) NSUInteger currentDiskUsage; å‚è€ƒï¼šiOSç½‘ç»œç¼–ç¨‹ä¹‹å…­â€”â€”æ•°æ®ç¼“å­˜ç±»NSURLCacheä½¿ç”¨è§£æž]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>NSURLCache</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSç½‘ç»œç¼–ç¨‹(ä¸‰)ï¼šè¯·æ±‚ç±»NSURLRequestå’Œè¯·æ±‚å“åº”ç±»NSURLResponseä»‹ç»]]></title>
    <url>%2F2017%2Fios-network-3.html</url>
    <content type="text"><![CDATA[NSURLSessionå’ŒNSURLConnectionæ¡†æž¶ï¼Œç½‘ç»œè¯·æ±‚éƒ½æ˜¯é€šè¿‡NSURLRequestç±»å‘èµ·çš„ã€‚ NSURLRequestè¯·æ±‚ç±»é™¤äº†åœ¨åˆå§‹åŒ–æ—¶å¯ä»¥è®¾å®šä¸€äº›å±žæ€§ï¼Œåˆ›å»ºå‡ºæ¥åŽåˆ™å¤§éƒ¨åˆ†å±žæ€§éƒ½ä¸ºåªè¯»çš„ï¼Œæ— æ³•è®¾ç½®ä¸Žä¿®æ”¹ã€‚NSMutableURLRequestç›¸å¯¹è€Œè¨€å¯ä»¥æ›´åŠ çµæ´»çš„è®¾ç½®è¯·æ±‚çš„ç›¸å…³å±žæ€§ï¼ˆå±žæ€§ä¿®é¥°ç¬¦å˜åŒ–ï¼‰ï¼Œå…¶ä»–æ–¹é¢æ²¡æœ‰å¤šå°‘åŒºåˆ«ã€‚ ä¸€ã€NSURLRequestç±»ä¸­å¸¸ç”¨æ–¹æ³•å’Œå±žæ€§ç±»æ–¹æ³•ï¼š12345// åˆ›å»ºçš„è¯·æ±‚å¯¹è±¡ é»˜è®¤ä½¿ç”¨NSURLRequestUseProtocolCachePolicyç¼“å­˜é€»è¾‘ é»˜è®¤è¯·æ±‚è¶…æ—¶æ—¶é™ä¸º60s+ (instancetype)requestWithURL:(NSURL *)URL;// åˆ›å»ºçš„è¯·æ±‚å¯¹è±¡ åˆ›å»ºæ—¶è®¾ç½®ç¼“å­˜é€»è¾‘å’Œè¶…æ—¶æ—¶é™+ (instancetype)requestWithURL:(NSURL *)URL cachePolicy:(NSURLRequestCachePolicy)cachePolicy timeoutInterval:(NSTimeInterval)timeoutInterval; å®žä¾‹æ–¹æ³•ï¼š12345// initæ–¹æ³•è¿›è¡Œå¯¹è±¡çš„åˆ›å»º é»˜è®¤ä½¿ç”¨NSURLRequestUseProtocolCachePolicyç¼“å­˜é€»è¾‘ é»˜è®¤è¯·æ±‚è¶…æ—¶æ—¶é™ä¸º60s- (instancetype)initWithURL:(NSURL *)URL;// initæ–¹æ³•è¿›è¡Œå¯¹è±¡çš„åˆ›å»º- (instancetype)initWithURL:(NSURL *)URL cachePolicy:(NSURLRequestCachePolicy)cachePolicy timeoutInterval:(NSTimeInterval)timeoutInterval; å±žæ€§ï¼š1234567891011121314151617181920// åˆ¤æ–­æ˜¯å¦æ”¯æŒå®‰å…¨ç¼–ç @property (class, readonly) BOOL supportsSecureCoding;// åªè¯»å±žæ€§ èŽ·å–è¯·æ±‚å¯¹è±¡çš„URL@property (nullable, readonly, copy) NSURL *URL;// åªè¯»å±žæ€§ ç¼“å­˜ç­–ç•¥@property (readonly) NSURLRequestCachePolicy cachePolicy;//åªè¯»å±žæ€§ èŽ·å–è¯·æ±‚çš„è¶…æ—¶æ—¶é™@property (readonly) NSTimeInterval timeoutInterval;//ä¸»æ–‡æ¡£åœ°å€ è¿™ä¸ªåœ°å€ç”¨æ¥å­˜æ”¾ç¼“å­˜@property (nullable, readonly, copy) NSURL *mainDocumentURL;// èŽ·å–ç½‘ç»œè¯·æ±‚çš„æœåŠ¡ç±»åž‹@property (readonly) NSURLRequestNetworkServiceType networkServiceType;//èŽ·å–æ˜¯å¦å…è®¸ä½¿ç”¨æœåŠ¡å•†èœ‚çªç½‘ç»œ@property (readonly) BOOL allowsCellularAccess; ç¼“å­˜ç­–ç•¥NSURLRequestCachePolicy:12345678910111213141516171819202122232425262728293031typedef NS_ENUM(NSUInteger, NSURLRequestCachePolicy)&#123; //é»˜è®¤çš„ç¼“å­˜åè®® NSURLRequestUseProtocolCachePolicy = 0, //æ— è®ºæœ‰æ— æœ¬åœ°ç¼“å­˜æ•°æ® éƒ½è¿›è¡Œä»Žæ–°è¯·æ±‚ NSURLRequestReloadIgnoringLocalCacheData = 1, //å¿½ç•¥æœ¬åœ°å’Œè¿œç¨‹çš„ç¼“å­˜æ•°æ® æœªå®žçŽ°çš„ç­–ç•¥ NSURLRequestReloadIgnoringLocalAndRemoteCacheData = 4, //æ— è®ºæœ‰æ— ç¼“å­˜æ•°æ® éƒ½è¿›è¡Œä»Žæ–°è¯·æ±‚ NSURLRequestReloadIgnoringCacheData = NSURLRequestReloadIgnoringLocalCacheData, //å…ˆæ£€æŸ¥ç¼“å­˜ å¦‚æžœæ²¡æœ‰ç¼“å­˜å†è¿›è¡Œè¯·æ±‚ NSURLRequestReturnCacheDataElseLoad = 2, //ç±»ä¼¼ç¦»çº¿æ¨¡å¼ï¼Œåªè¯»ç¼“å­˜ æ— è®ºæœ‰æ— ç¼“å­˜éƒ½ä¸è¿›è¡Œè¯·æ±‚ NSURLRequestReturnCacheDataDontLoad = 3, //æœªå®žçŽ°çš„ç­–ç•¥ NSURLRequestReloadRevalidatingCacheData = 5, // Unimplemented&#125;; ç½‘ç»œè¯·æ±‚çš„æœåŠ¡ç±»åž‹æžšä¸¾NSURLRequestNetworkServiceType:12345678910111213typedef NS_ENUM(NSUInteger, NSURLRequestNetworkServiceType)&#123; NSURLNetworkServiceTypeDefault = 0, // Standard internet traffic NSURLNetworkServiceTypeVoIP = 1, // Voice over IP control traffic NSURLNetworkServiceTypeVideo = 2, // Video traffic NSURLNetworkServiceTypeBackground = 3, // Background traffic NSURLNetworkServiceTypeVoice = 4 // Voice data&#125;; äºŒã€ä¸ŽHTTP/HTTPSåè®®ç›¸å…³è¯·æ±‚çš„å±žæ€§å’Œæ–¹æ³•è¿™äº›å±žæ€§å±žäºŽNSMutableURLRequest: 1234567891011121314151617181920212223// HPPTè¯·æ±‚æ–¹å¼ é»˜è®¤ä¸ºâ€œGETâ€@property (copy) NSString *HTTPMethod;//é€šè¿‡å­—å…¸è®¾ç½®HTTPè¯·æ±‚å¤´çš„é”®å€¼æ•°æ®@property (nullable, copy) NSDictionary&lt;NSString *, NSString *&gt; *allHTTPHeaderFields;//è®¾ç½®httpè¯·æ±‚å¤´ä¸­çš„å­—æ®µå€¼- (void)setValue:(nullable NSString *)value forHTTPHeaderField:(NSString *)field;//å‘httpè¯·æ±‚å¤´ä¸­æ·»åŠ ä¸€ä¸ªå­—æ®µ- (void)addValue:(NSString *)value forHTTPHeaderField:(NSString *)field;//è®¾ç½®httpè¯·æ±‚ä½“ ç”¨äºŽPOSTè¯·æ±‚@property (nullable, copy) NSData *HTTPBody;//è®¾ç½®httpè¯·æ±‚ä½“çš„è¾“å…¥æµ@property (nullable, retain) NSInputStream *HTTPBodyStream;//è®¾ç½®å‘é€è¯·æ±‚æ—¶æ˜¯å¦å‘é€cookieæ•°æ®@property BOOL HTTPShouldHandleCookies;//è®¾ç½®è¯·æ±‚æ—¶æ˜¯å¦æŒ‰é¡ºåºæ”¶å‘ é»˜è®¤ç¦ç”¨ åœ¨æŸäº›æœåŠ¡å™¨ä¸­è®¾ä¸ºYESå¯ä»¥æé«˜ç½‘ç»œæ€§èƒ½@property BOOL HTTPShouldUsePipelining; ä¸‰ã€NSURLResponseç½‘ç»œè¯·æ±‚æˆåŠŸåŽï¼ŒæœåŠ¡å™¨å“åº”ä¿¡æ¯ä¼šå­˜å­˜æ”¾åœ¨NSURLResponseå’Œå…¶å­ç±»NSHTTPURLResponseä¸­: 1234567891011121314151617181920//è¯·æ±‚çš„URLåœ°å€@property (nullable, readonly, copy) NSURL *URL;//è¿”å›žæ•°æ®çš„æ•°æ®ç±»åž‹@property (nullable, readonly, copy) NSString *MIMEType;//èŽ·å–è¿”å›žæ•°æ®çš„å†…å®¹é•¿åº¦@property (readonly) long long expectedContentLength;//èŽ·å–è¿”å›žæ•°æ®çš„ç¼–ç æ–¹å¼@property (nullable, readonly, copy) NSString *textEncodingName;//è¿”å›žæ‹¼æŽ¥çš„æ•°æ®æ–‡ä»¶å ä»¥urlä¸ºå æ•°æ®æ²¡é†’MIMETypeä¸ºæ‰©å±•å@property (nullable, readonly, copy) NSString *suggestedFilename;//è¯·æ±‚çš„çŠ¶æ€ç @property (readonly) NSInteger statusCode;//è¯·æ±‚å¤´ä¸­æ‰€æœ‰çš„å­—æ®µ@property (readonly, copy) NSDictionary *allHeaderFields; å‚è€ƒï¼šiOSç½‘ç»œç¼–ç¨‹ä¹‹å››â€”â€”è¯·æ±‚ç±»NSURLRequestä½¿ç”¨è¯¦è§£iOSç½‘ç»œç¼–ç¨‹ä¹‹äº”â€”â€”è¯·æ±‚å›žæ‰§ç±»NSURLResponseå±žæ€§ç®€ä»‹]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>NSURLRequest</tag>
        <tag>NSURLResponse</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSç½‘ç»œç¼–ç¨‹(äºŒ)ï¼šNSURLConnectionä»‹ç»]]></title>
    <url>%2F2017%2Fios-network-2.html</url>
    <content type="text"><![CDATA[NSURLConnectionåœ¨iOS7ä¹‹åŽåŸºæœ¬è¢«NSURLSessionï¼Œä½†ä¸ºäº†å…¼å®¹ï¼Œæœ‰å¿…è¦å­¦ä¹ ä¸€ä¸‹ã€‚ ç½‘ç»œè¯·æ±‚åˆ†ä¸ºåŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§ï¼š åŒæ­¥æ˜¯æŒ‡åœ¨è¯·æ±‚ç»“æžœè¿”å›žä¹‹å‰ï¼Œç¨‹åºä»£ç ä¼šå¡åœ¨è¯·æ±‚å¤„ï¼Œä¹‹åŽçš„ä»£ç ä¸ä¼šè¢«æ‰§è¡Œï¼Œè¯·æ±‚è¿”å›žç»“æžœåŽï¼Œä¹‹åŽçš„ä»£ç å†æ‰§è¡Œã€‚ å¼‚æ­¥æ˜¯æŒ‡åœ¨å‘é€è¯·æ±‚ä¹‹åŽï¼Œä¸€è¾¹åœ¨å­çº¿ç¨‹ä¸­æŽ¥æ”¶è¿”å›žæ•°æ®ï¼Œä¸€è¾¹æ‰§è¡Œä¹‹åŽçš„ä»£ç ï¼Œå½“è¿”å›žæ•°æ®æŽ¥æ”¶å®Œæ¯•åŽï¼Œé‡‡ç”¨å›žè°ƒçš„æ–¹å¼é€šçŸ¥ä¸»çº¿ç¨‹åšå¤„ç†ã€‚ ä¸€ã€NSURLConnectionåŒæ­¥è¯·æ±‚12345678// åŒæ­¥- (void)tongbu &#123; NSURL * url = [NSURL URLWithString:@&quot;https://www.baidu.com&quot;]; NSURLRequest * request = [NSURLRequest requestWithURL:url]; NSData * data = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]; NSLog(@&quot;%@&quot;,data); NSLog(@&quot;ç»§ç»­æ‰§è¡Œ&quot;);&#125; è€Œã€NSURLConnectionå¼‚æ­¥è¯·æ±‚ blockæ–¹å¼çš„å¼‚æ­¥è¯·æ±‚ 12345678910// blockçš„å¼‚æ­¥- (void)yibu &#123; NSURL * url = [NSURL URLWithString:@&quot;https://www.baidu.com&quot;]; NSURLRequest * request = [NSURLRequest requestWithURL:url]; //å…¶ä¸­çš„queueå‚æ•°å†³å®šblockä¸­çš„ä»£ç åœ¨å“ªä¸ªé˜Ÿåˆ—ä¸­æ‰§è¡Œ [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * _Nullable response, NSData * _Nullable data, NSError * _Nullable connectionError) &#123; NSLog(@&quot;%@&quot;,data); &#125;]; NSLog(@&quot;ç»§ç»­æ‰§è¡Œ&quot;);&#125; ä»£ç†å›žè°ƒæ–¹å¼çš„å¼‚æ­¥è¯·æ±‚é‡‡ç”¨åè®®å’Œå£°æ˜Žä¸€ä¸ªç”¨æˆ·æŽ¥å—æ•°æ®çš„å¯å˜NSDataï¼š 1234@interface ViewController ()&lt;NSURLConnectionDataDelegate&gt;&#123; NSMutableData * _data;&#125; è¯·æ±‚ä»£ç ï¼š1234567// ä»£ç†å›žè°ƒçš„å¼‚æ­¥- (void)yibu_delegate &#123; _data = [[NSMutableData alloc]init]; NSURL * url = [NSURL URLWithString:@&quot;https://www.baidu.com&quot;]; NSURLRequest * request = [NSURLRequest requestWithURL:url]; [NSURLConnection connectionWithRequest:request delegate:self];&#125; å®žçŽ°ä»£ç†æ–¹æ³•ï¼š123456789101112131415161718-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response&#123; //å¼€å§‹æŽ¥æ”¶æ•°æ® [_data setLength:0]; NSLog(@&quot;%s&quot;,&quot;å¼€å§‹æŽ¥æ”¶æ•°æ®&quot;);&#125;-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data&#123; //æ­£åœ¨æŽ¥æ”¶æ•°æ® [_data appendData:data]; NSLog(@&quot;%s&quot;,&quot;æ­£åœ¨æŽ¥æ”¶æ•°æ®&quot;);&#125;-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error&#123; //æŽ¥æ”¶æ•°æ®å¤±è´¥ NSLog(@&quot;%@&quot;,error);&#125;-(void)connectionDidFinishLoading:(NSURLConnection *)connection&#123; //æŽ¥æ”¶æ•°æ®å®Œæˆ NSLog(@&quot;%@&quot;,_data);&#125; ä»£ç ï¼šNSURLConnection å‚è€ƒï¼šiOSç½‘ç»œç¼–ç¨‹ä¹‹ä¸‰â€”â€”NSURLConnectionçš„ç®€å•ä½¿ç”¨]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>NSURLConnection</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSç½‘ç»œç¼–ç¨‹(ä¸€)ï¼šNSURLSessionä»‹ç»]]></title>
    <url>%2F2017%2Fios-network-1.html</url>
    <content type="text"><![CDATA[NSURLSessionæ˜¯iOS7ä¹‹åŽè¢«ç”¨æ¥ä»£æ›¿NSURLConnectionçš„ç½‘ç»œå¼€å‘æ¡†æž¶ï¼Œå‰è€…ç›¸å¯¹äºŽåŽè€…çš„ä¼˜åŠ¿æ˜¯æ”¯æŒåŽå°å¤„ç†èƒ½åŠ› NSURLSessionçš„é…ç½®é€šè¿‡NSURLSessionConfigurationæ¥é…ç½®Sessionçš„ä¸‰ç§ç±»åž‹ï¼š Defaultï¼šæä¾›å‰å°è¯·æ±‚ç›¸å…³æ–¹æ³•ï¼Œæ”¯æŒé…ç½®ç¼“å­˜ï¼Œèº«ä»½å‡­è¯ç­‰ã€‚ NSURLSessionConfiguration * defaultConfiguration = [NSURLSessionConfiguration defaultSessionConfiguration]; Ephemeralç±»åž‹ï¼šå³æ—¶çš„è¯·æ±‚ç±»åž‹ï¼Œä¸ä½¿ç”¨ç¼“å­˜ï¼Œèº«ä»½å‡­è¯ç­‰ã€‚ NSURLSessionConfiguration * defaultConfiguration = [NSURLSessionConfiguration ephemeralSessionConfiguration]; Backgroundï¼šåŽå°ç±»åž‹ï¼Œæ”¯æŒåœ¨åŽå°å®Œæˆè¯·æ±‚ä»»åŠ¡ã€‚ NSURLSessionConfiguration * backgroundConfiguration = [NSURLSessionConfiguration backgroundSessionConfigurationWithIdentifier:@&quot;com.andyron.NSURLSession-delegate-&quot;]; backgroundSessionConfigurationWithIdentifieråªæ˜¯æ ‡è¯†ç¬¦ã€‚ NSURLSessionConfigurationè¿˜å¯ä»¥é…ç½®å¦‚ç¼“å­˜ï¼Œç½‘ç»œæ¨¡å¼ç­‰å‚æ•°ã€‚ NSURLSessionçš„ä¸¤ç§è¿›è¡Œç½‘ç»œè¯·æ±‚æ–¹å¼ é€šè¿‡blockçš„æ–¹å¼èŽ·å–ç½‘ç»œæ•°æ® 123456789101112//åˆ›å»ºsessioné…ç½®å¯¹è±¡NSURLSessionConfiguration * defaultConfiguration = [NSURLSessionConfiguration defaultSessionConfiguration];//åˆ›å»ºè¯·æ±‚å¯¹è±¡NSURLRequest * request = [NSURLRequest requestWithURL:[NSURL URLWithString:@&quot;https://www.baidu.com&quot;]];//åˆ›å»ºsessionå¯¹è±¡NSURLSession * defaultSession = [NSURLSession sessionWithConfiguration:defaultConfiguration];//æ·»åŠ ä»»åŠ¡NSURLSessionTask * task= [defaultSession dataTaskWithRequest:request completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) &#123; NSLog(@&quot;%@&quot;,response);&#125;];//å¼€å§‹ä»»åŠ¡[task resume]; åœ¨blockä¸­è¿›è¡Œæ•°æ®å¤„ç† é€šè¿‡ä»£ç†å›žè°ƒèŽ·å–ç½‘ç»œæ•°æ® é¦–å…ˆé‡‡ç”¨åè®® NSURLSessionDataDelegate123@interface ViewController ()&lt;NSURLSessionDataDelegate&gt;@end é…ç½® 1234567NSURLSessionConfiguration * defaultConfiguration = [NSURLSessionConfiguration defaultSessionConfiguration];NSURLRequest * request = [NSURLRequest requestWithURL:[NSURL URLWithString:@&quot;https://www.baidu.com&quot;]];NSURLSession * defaultSession = [NSURLSession sessionWithConfiguration:defaultConfiguration delegate:self delegateQueue:[NSOperationQueue mainQueue]];NSURLSessionTask * task= [defaultSession dataTaskWithRequest:request];[task resume]; å®žçŽ°ä»£ç†æ–¹æ³• 12345678//å¼€å§‹æŽ¥å—æ•°æ®-(void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveData:(NSData *)data&#123; NSLog(@&quot;=======%@&quot;,data);&#125;//æŽ¥å—æ•°æ®ç»“æŸ-(void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didCompleteWithError:(NSError *)error&#123; NSLog(@&quot;å®Œæˆï¼šerror%@&quot;,error);&#125; åŽå°å¤„ç†ä¸‹è½½ä»»åŠ¡è¿™æ˜¯NSURLSessionæœ€å¤§çš„ä¼˜åŠ¿ã€‚ä½¿ç”¨ä»£ç†çš„æ–¹å¼è¿›è¡ŒåŽå°å¤„ç†ä¸‹è½½ä»»åŠ¡ã€‚é…ç½®å’Œä»£ç†æ–¹å¼ç›¸åŒï¼Œä¸»è¦æ˜¯å®žçŽ°ä¸€äº›ä»£ç†æ–¹æ³•ã€‚ ä¸‹è½½è¿›åº¦ç›‘å¬çš„ä»£ç†æ–¹æ³•ï¼š 12345// ä¸‹è½½è¿›åº¦ç›‘å¬- (void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didWriteData:(int64_t)bytesWritten totalBytesWritten:(int64_t)totalBytesWritten totalBytesExpectedToWrite:(int64_t)totalBytesExpectedToWrite&#123; NSLog(@&quot;######&quot;);&#125; åœ¨ä¸‹è½½è¿‡ç¨‹ä¸­ç‚¹å‡»Homeé”®ä½¿åº”ç”¨ç¨‹åºè¿›å…¥åŽå°ï¼Œä¸‹è½½ä»»åŠ¡ä¾ç„¶åœ¨è¿›è¡Œï¼Œå½“åŽå°ä¸‹è½½å®ŒæˆåŽä¼šä¸ŽAppDelegateè¿›è¡Œäº¤äº’ï¼Œä¼šè°ƒç”¨AppDelegateä¸­çš„ä»£ç†æ–¹æ³• 123-(void)application:(UIApplication *)application handleEventsForBackgroundURLSession:(NSString *)identifier completionHandler:(void (^)(void))completionHandler&#123; NSLog(@&quot;ä¸‹è½½ä»»åŠ¡åœ¨åŽå°å®Œæˆ&quot;);&#125; ä¸‹è½½å®ŒæˆåŽï¼Œå¯æŸ¥çœ‹ä¸‹è½½çš„æ–‡ä»¶æ‰€åœ¨ä½ç½® 1234//æ­¤æ–¹æ³•åªæœ‰ä¸‹è½½æˆåŠŸæ‰ä¼šè°ƒç”¨ï¼Œ æ–‡ä»¶æ”¾åœ¨locationä½ç½®-(void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didFinishDownloadingToURL:(NSURL *)location&#123; NSLog(@&quot;ä¸‹è½½ä¸´æ—¶æ–‡ä»¶çš„ä½ç½®%@&quot;, location);&#125; åœ¨åŽå°å®Œæˆæ— äººæ‰€æœ‰ä»»åŠ¡æ—¶è°ƒç”¨ 12345// åŽå°æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆ-(void)URLSessionDidFinishEventsForBackgroundURLSession:(NSURLSession *)session&#123; NSLog(@&quot;All tasks are finished&quot;);&#125; ä»£ç ï¼šNSURLSession(delegate), NSURLSession(block)æ·±å…¥å­¦ä¹ ï¼šURL Session Programming Guide å‚è€ƒiOSç½‘ç»œç¼–ç¨‹ä¹‹äºŒâ€”â€”NSURLSessionçš„ç®€å•ä½¿ç”¨]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>NSURLSession</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨CharlesæŠ“å–iOSçš„http/httpsè¯·æ±‚æ•°æ®]]></title>
    <url>%2F2017%2Fios-charles.html</url>
    <content type="text"><![CDATA[å…³äºŽCharlesä¸åšå¤šçš„ä»‹ç»äº†ï¼ŒCharleså®˜ç½‘ä¸€å¥è¯ä»‹ç»ç®€å•æ˜Žäº†ï¼š Web Debugging Proxy Application for Windows, Mac OS and Linux ä¸€ã€å®‰è£…Charleshttps://www.charlesproxy.com/download/ äºŒã€å®‰è£…Charlesæ ¹è¯ä¹¦æ‰“å¼€Charlesï¼Œåœ¨èœå•æ çš„Helpä¸­æ“ä½œï¼š åœ¨é’¥åŒ™ä¸²è®¿é—®ä¸­æŠŠCharlesçš„æ ¹è¯ä¹¦è®¾ç½®ä¸ºä¿¡ä»»ï¼š ä¸‰ã€åœ¨iOSè®¾å¤‡ä¸Šé…ç½®è¯ä¹¦ é¦–å…ˆåœ¨Charlesç‚¹å‡» ä¼šå¼¹å‡ºä»¥ä¸€ä¸ªæç¤ºæ¡†ï¼š æœ‰çš„ç‰ˆæœ¬ä¹Ÿä¼šå¼¹å‡ºä¸ä¸€æ ·çš„ï¼Œæ¯”å¦‚æˆ‘çš„ï¼š æ²¡å…³ç³»ï¼Œåˆ°ç³»ç»Ÿç½‘ç»œæŸ¥çœ‹iP é…ç½®æ‰‹æœºç½‘ç»œçš„HTTPä»£ç†ä¸ºæ‰‹åŠ¨ï¼Œç„¶åŽæ›´æ”¹æœåŠ¡å™¨ä¸ºç”µè„‘çš„IPï¼Œç«¯å£ä¸º8888. æ³¨æ„ï¼šç”µè„‘å’Œæ‰‹æœºè¦åœ¨åŒä¸€å±€åŸŸç½‘å†…ã€‚ æ‰‹æœºæµè§ˆå™¨ä¸­è¾“å…¥ charlesproxy.com/getssl å®‰è£…è¯ä¹¦ ä¹‹å‰å¦‚æžœå‡ºçŽ°å¦‚ä¸‹ï¼Œé€‰æ‹©å…è®¸å³å¯ï¼š **æ­¤æ—¶å·²ç»å¯ä»¥æŠ“å–iOSçš„httpè¯·æ±‚æ•°æ®äº†ï¼š Structure æŒ‰ç…§åŸŸååˆ†ç±»æ˜¾ç¤ºã€‚sequenceæŒ‰ç…§æ—¶é—´é€‰é¡¹åˆ†ç±»æ˜¾ç¤ºã€‚ åŸŸåå‰é¢çš„ç¬¦åˆè¡¨ç¤ºè¯·æ±‚æ˜¯å¦åŠ å¯†äº† å››ã€æŠ“å–HTTPSè¯·æ±‚é€‰æ‹©å¦‚ä¸‹ï¼š åœ¨å¼¹æ¡†ä¸­æ·»åŠ ï¼Œéœ€è¦æŸ¥çœ‹httpsè¯·æ±‚çš„åŸŸåï¼š æ¯”å¦‚æˆ‘æ·»åŠ äº†çŸ¥ä¹Žçš„ï¼ŒæŸ¥çœ‹ çŸ¥ä¹Žé¦–é¡µåŠ¨æ€å¯¹åº”çš„æŽ¥å£ï¼š æé†’ï¼šä¸æŠ“åŒ…æ—¶ï¼ŒæŠŠæ‰‹æœºçš„httpä»£ç†æ”¹ä¸ºè‡ªåŠ¨ æ‰‹æœºï¼Œç”µè„‘ï¼ŒCharlesçš„çŽ¯å¢ƒä¸åŒå¯èƒ½æœ‰æ‰€ä¸åŒï¼Œæˆ‘çš„çŽ¯å¢ƒï¼šCharles v4.0.1macOS Sierra 10.12.6iPhone 6s iOS 11.0 å‚è€ƒï¼šååˆ†é’Ÿå­¦ä¼šCharlesæŠ“åŒ…(iOSçš„http/httpsè¯·æ±‚)ä½¿ç”¨ Charles èŽ·å– https çš„æ•°æ®]]></content>
      <tags>
        <tag>Charles</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OCåŸºç¡€å­¦ä¹ 13ï¼šæ–‡ä»¶åŠ è½½ä¸Žä¿å­˜]]></title>
    <url>%2F2017%2Foc-basic-13.html</url>
    <content type="text"><![CDATA[1 å±žæ€§åˆ—è¡¨(property list, plist)å±žæ€§åˆ—è¡¨å¯ä»¥ä¿å­˜çš„ç±»åž‹æœ‰NSArray,NSDictionary,NSString,NSNumber,NSDate,NSDateä»¥åŠå®ƒä»¬å¯¹åº”çš„Mutableç±»ã€‚ NSDate 1234NSDate *date = [NSDate date];NSLog(@&quot;today is %@&quot;, date);NSDate *yesterday = [NSDate dateWithTimeIntervalSinceNow: -(24*3600)];NSLog(@&quot;yesterday is %@&quot;, yesterday); NSDateFormatterç”¨æ¥å¤„ç†æ—¶é—´æ ¼å¼ NSData 123456const *string = &quot;Hi there, this is a C string!&quot;;NSData *data = [NSData dataWithBytes: string length: strlen(string)+1];NSLog(@&quot;data is %@&quot;, data);// data is &lt;48692074 68657265 2c207468 69732069 73206120 43207374 72696e67 2100&gt;NSLog(@&quot;%lu byte string is &apos;%s&apos;&quot;, [data length], [data bytes]);// 30 byte string is &apos;Hi there, this is a C string!&apos; å†™å…¥å’Œè¯»å–å±žæ€§åˆ—è¡¨ å†™å…¥123NSArray *phrase;phrase = [NSArray arrayWithObjects:@&quot;I&quot;, @&quot;seem&quot;, @&quot;to&quot;, @&quot;be&quot;, @&quot;a&quot;, @&quot;verb&quot;, nil];[phrase writeToFile:@&quot;/tmp/verbiage.txt&quot; atomically:YES]; verbiage.txtå†…å®¹ä¸ºï¼š123456789101112&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;&lt;plist version=&quot;1.0&quot;&gt;&lt;array&gt; &lt;string&gt;I&lt;/string&gt; &lt;string&gt;seem&lt;/string&gt; &lt;string&gt;to&lt;/string&gt; &lt;string&gt;be&lt;/string&gt; &lt;string&gt;a&lt;/string&gt; &lt;string&gt;verb&lt;/string&gt;&lt;/array&gt;&lt;/plist&gt; Macç”µè„‘ç³»ç»Ÿä¸­ ~/Library/Preferencesä¸‹çš„æ‰€æœ‰é¦–é€‰é¡¹æ–‡ä»¶å’Œ/System/Library/LaunchDaemons/ä¸‹çš„ç³»ç»Ÿé…ç½®æ–‡ä»¶éƒ½æ˜¯plist è¯»å–123NSArray *phrase2;phrase2 = [NSArray arrayWithContentsOfFile:@&quot;/tmp/verbiage.txt&quot;];NSLog(@&quot;%@&quot;, phrase2); -writeToFile:atomically:æ–¹æ³•ä¸­çš„atomicallyè¡¨ç¤ºæ˜¯å¦é¦–å…ˆå°†æ–‡ä»¶å†…å®¹ä¿å­˜åœ¨ä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œå†å°†ä¸´æ—¶æ–‡ä»¶å’ŒåŽŸå§‹æ–‡ä»¶äº¤æ¢ã€‚ ä¿®æ”¹å¯¹è±¡ç±»åž‹NSPropertyListSerialization 2 ç¼–ç å¯¹è±¡æ— æ³•å°†å¯¹è±¡ä¿¡æ¯è¡¨ç¤ºä¸ºå±žæ€§åˆ—è¡¨ç±»ã€‚ç¼–ç å’Œè§£ç (encoding and decoding) å’Œ åºåˆ—åŒ–ä¸Žååºåˆ—åŒ–(serialization and deserialization) å¿…é¡»é‡‡ç”¨NSCodingåè®®åœ¨Interface Builderä¸­çš„çš„å¯¹è±¡å°±è¢«åºåˆ—åŒ–ä¿å­˜åˆ°ç£ç›˜ä¸­äº†ã€‚NSCodingå®šä¹‰ä¸¤ä¸ªæ–¹æ³•ï¼Œç”¨äºŽå¯¹è±¡ä¸ŽNSDateä¹‹é—´çš„è½¬æ¢ï¼š123456@protocol NSCoding- (void)encodeWithCoder:(NSCoder *)aCoder;- (nullable instancetype)initWithCoder:(NSCoder *)aDecoder; // NS_DESIGNATED_INITIALIZER@end ä¸€ä¸ªåˆ—å­123456789101112131415161718@interface Thingie : NSObject &lt;NSCoding&gt;&#123; NSString *name; int magicNumber; float shoeSize; NSMutableArray *subThingies;&#125;@property (copy) NSString *name;@property int magicNumber;@property float shoeSize;@property (retain) NSMutableArray *subThingies;- (id)initWithName: (NSString *) n magicNumber: (int) mn shoeSize: (float) ss;@end // Thingie Thingieé‡‡ç”¨äº†NSCodingåè®®ï¼Œè¦å®žçŽ°ç¼–ç å’Œè§£ç å“åº”çš„æ–¹æ³•ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162@implementation Thingie@synthesize name;@synthesize magicNumber;@synthesize shoeSize;@synthesize subThingies;- (id)initWithName: (NSString *) n magicNumber: (int) mn shoeSize: (float) ss&#123; if (self = [super init]) &#123; self.name = n; self.magicNumber = mn; self.shoeSize = ss; self.subThingies = [NSMutableArray array]; &#125; return (self);&#125;- (void) encodeWithCoder: (NSCoder *) coder&#123; [coder encodeObject: name forKey: @&quot;name&quot;]; [coder encodeInt: magicNumber forKey: @&quot;magicNumber&quot;]; [coder encodeFloat: shoeSize forKey: @&quot;shoeSize&quot;]; [coder encodeObject: subThingies forKey: @&quot;subThingies&quot;]; &#125; // encodeWithCoder- (id) initWithCoder: (NSCoder *) decoder&#123; if (self = [super init]) &#123; self.name = [decoder decodeObjectForKey: @&quot;name&quot;]; self.magicNumber = [decoder decodeIntForKey: @&quot;magicNumber&quot;]; self.shoeSize = [decoder decodeFloatForKey: @&quot;shoeSize&quot;]; self.subThingies = [decoder decodeObjectForKey: @&quot;subThingies&quot;]; &#125; return (self); &#125; // initWithCoder- (NSString *) description&#123; NSString *description = [NSString stringWithFormat: @&quot;%@: %d/%.1f %@&quot;, name, magicNumber, shoeSize, subThingies]; return (description); &#125; // description@end // Thingie]]></content>
      <categories>
        <category>Objective-C</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[OCåŸºç¡€å­¦ä¹ 12ï¼šä»£ç å—ï¼ˆBlockï¼‰]]></title>
    <url>%2F2017%2Foc-basic-12.html</url>
    <content type="text"><![CDATA[ä»£ç å—(Block)/é—­åŒ…(closure) æ˜¯å¯¹Cè¯­è¨€ä¸­å‡½æ•°çš„æ‰©å±•ã€‚ä»£ç å—ä¸¤ç§ç±»çš„ç»‘å®šï¼šè‡ªåŠ¨ç»‘å®š(automatic binding) æ ˆå†…å­˜æ‰˜ç®¡ç»‘å®š(managed binding) å †å†…å­˜ ä»£ç å—å’Œå‡½æ•°æŒ‡é’ˆå‡½æ•°æŒ‡é’ˆçš„å£°æ˜Žï¼švoid (*my_func)(void);*å˜æˆ^ï¼ˆå¹‚ç¬¦å·ï¼‰å˜æˆä»£ç å—å®šä¹‰ï¼švoid (^my_block)(void); ä»£ç å—å±•ç¤ºï¼š 123int (^square_block)(int number) = ^(int number) &#123;return (number * number);&#125;;int result = square_block(5);printf(&quot;Result = %d\n&quot;, result); ç­‰å·å‰é¢æ˜¯ä»£ç å—çš„å®šä¹‰ï¼Œè€Œç­‰å·åŽé¢æ˜¯å®žçŽ°å†…å®¹ã€‚ä¸€èˆ¬å½¢å¼ï¼š 1&lt;returntype&gt; (^blockname)(list of arguments) = ^(arguments)&#123; body; &#125;; æ²¡æœ‰å‚æ•°æ—¶å¯ä»¥ç®€å†™ï¼š 1void (^theBlock)(void) = ^&#123; printf(&quot;Hello Blocks!\n&quot;); &#125;; ä½¿ç”¨ä»£ç å—ä»£ç å—å¯ä»¥è®¿é—®ä¸Žå®ƒç›¸åŒçš„ï¼ˆæœ¬åœ°ï¼‰æœ‰æ•ˆèŒƒå›´å†…å£°æ˜Žçš„å˜é‡ã€‚ 12345int value = 6;int (^multiply_block)(int number) = ^(int number) &#123; return (value * number);&#125;;value = 8;int result2 = multiply_block(7);printf(&quot;Result2 = %d\n&quot;, result2); // æ˜¯6*7ï¼Œä¸æ˜¯8*7 ç›´æŽ¥ä½¿ç”¨ä»£ç å— 123456NSArray *array = [NSArray arrayWithObjects:@&quot;Amir&quot;, @&quot;Mishal&quot;, @&quot;Irrum&quot;, @&quot;Adam&quot;, nil];NSLog(@&quot;Unsorted Array %@&quot;, array);NSArray *sorteArray = [array sortedArrayUsingComparator:^(NSString *objet1, NSString *object2) &#123; return [objet1 compare:object2];&#125;];NSLog(@&quot;Sorted Array %@&quot;, sorteArray); ä½¿ç”¨typedefå…³é”®å­— 12345typedef double (^MKSampleMultiply2BlockRef)(double c, double d);MKSampleMultiply2BlockRef multiply2 = ^(double c, double d) &#123; return c * d; &#125;;printf(&quot;%f, %f&quot;, multiply2(4, 5), multiply2(5,3));typedef void (^MKSampleVoidBlockRef)(void);typedef void (^MKSampleStringBlockRef)(NSString *); ä»£ç å—å’Œå˜é‡ä»£ç å—è¢«å£°æ˜ŽåŽä¼šæ•æ‰åˆ›å»ºç‚¹æ—¶çš„çŠ¶æ€ã€‚ä»£ç å—å¯ä»¥è®¿é—®å‡½æ•°ç”¨åˆ°çš„æ ‡å‡†ç±»çš„å˜é‡ï¼š å…¨å±€å˜é‡ï¼ŒåŒ…æ‹¬å°é—­èŒƒå›´å†…å£°æ˜Žçš„æœ¬åœ°é™æ€å˜é‡ã€‚ å…¨å±€å‡½æ•° å°é—­èŒƒå›´å†…çš„å‚æ•° å‡½æ•°çº§åˆ«ï¼ˆå³ä¸Žä»£ç å—å£°æ˜Žæ—¶ç›¸åŒçš„çº§åˆ«ï¼‰çš„_blockå˜é‡ã€‚ å°é—­èŒƒå›´å†…çš„éžé™æ€å˜é‡ä¼šè¢«èŽ·å–ä¸ºå¸¸é‡ã€‚ Objective-Cçš„å®žä¾‹å˜é‡ ä»£ç å—å†…éƒ¨çš„æœ¬åœ°å˜é‡ æœ¬åœ°å˜é‡ 12345678typedef double (^MKSampleMultiplyBlockRef)(void);double a = 10, b = 20;MKSampleMultiplyBlockRef multiply = ^(void)&#123; return a * b; &#125;;NSLog(@&quot;%f&quot;, multiply()); // 200.0a = 20;b = 50;NSLog(@&quot;%f&quot;, multiply()); // 200.0 å…¨å±€å˜é‡ 1234567typedef double (^MKSampleMultiplyBlockRef)(void);static double a = 10, b = 20;MKSampleMultiplyBlockRef multiply = ^(void)&#123; return a * b; &#125;;NSLog(@&quot;%f&quot;, multiply()); // 200.0a = 20; b = 50;NSLog(@&quot;%f&quot;, multiply()); // 1000.0 å‚æ•°å˜é‡ä»£ç å—ä¸­çš„å‚æ•°å˜é‡ä¸Žå‡½æ•°ä¸­çš„å‚æ•°å˜é‡å…·æœ‰åŒæ ·çš„ä½œç”¨ã€‚ 123typedef double (^MKSampleMultiply2BlockRef)(double c, double d);MKSampleMultiply2BlockRef multiply2 = ^(double c, double d) &#123; return c * d; &#125;;printf(&quot;%f, %f&quot;, multiply2(4, 5), multiply2(5,3)); __blockå˜é‡æœ¬åœ°å˜é‡ä¼šè¢«ä»£ç å—ä½œä¸ºå¸¸é‡èŽ·å–åˆ°ã€‚åœ¨ä»£ç å—ä¸­ä¿®æ”¹ä¼šæŠ¥é”™ã€‚ 123double c = 3;MKSampleMultiplyBlockRef multiply = ^(void) &#123; c = 5; return c; &#125;;//æŠ¥é”™ï¼š Variable is not assignable (missing __block type specifier) å°†æœ¬åœ°å˜é‡æ ‡è®°ä¸º__blockï¼Œå°±å¯ä»¥ä¿®æ”¹äº† 12__block double c = 3;MKSampleMultiplyBlockRef multiply = ^(void) &#123; c = 5; return c; &#125;; ä»£ç å—å†…éƒ¨çš„æœ¬åœ°å˜é‡]]></content>
      <categories>
        <category>Objective-C</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[OCåŸºç¡€å­¦ä¹ 11ï¼šåè®®]]></title>
    <url>%2F2017%2Foc-basic-11.html</url>
    <content type="text"><![CDATA[1 æ­£å¼åè®® å£°æ˜Žåè®® 123@protocol NSCoding- (id) copyWithZone: (NSZone *) zone;@end ç»§æ‰¿çˆ¶åè®®ï¼š12@protocol MySuperDuberProtocol &lt;MyParentProtocol&gt;@end é‡‡ç”¨åè®® 123456@interface Car ï¼šNSObject &lt;NSCopying, NSCoding&gt;&#123;// instance variables&#125;// methods@end // Car å®žçŽ°åè®® 2 å¤åˆ¶æµ…å±‚å¤åˆ¶æ·±å±‚å¤åˆ¶ 3 @optional @required4 å§”æ‰˜æ–¹æ³•å§”æ‰˜(delegation)æ˜¯æŸä¸ªå¯¹è±¡æŒ‡å®šå¦ä¸€ä¸ªå¯¹è±¡å¤„ç†æŸäº›ç‰¹å®šä»»åŠ¡çš„è®¾è®¡æ¨¡å¼ã€‚å§”æ‰˜ç»å¸¸ä¸Žåè®®å…±ç”¨ã€‚]]></content>
      <categories>
        <category>Objective-C</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[OCåŸºç¡€å­¦ä¹ 10ï¼šç±»åˆ«ï¼ˆcategoryï¼‰]]></title>
    <url>%2F2017%2Foc-basic-10.html</url>
    <content type="text"><![CDATA[ç±»åˆ«ï¼ˆcategoryï¼‰æ˜¯ä¸€ç§ä¸ºçŽ°æœ‰çš„ç±»æ·»åŠ æ–°æ–¹æ³•çš„æ–¹å¼ã€‚ 1 åˆ›å»ºç±»åˆ«ä¸€èˆ¬ï¼Œåªæ˜¯ä¹ æƒ¯ æŠŠç±»åˆ«ä»£ç æ”¾åœ¨ç‹¬ç«‹çš„æ–‡ä»¶ä¸­å‘½åï¼šâ€ç±»åç§°+ç±»åˆ«åç§°â€ï¼Œå¦‚ NSString+NumberConvenience å¼€å§‹åˆ›å»ºç±»åˆ« ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼ŒNSString+NumberConvenience.h:12345#import &lt;Foundation/Foundation.h&gt;@interface NSString (NumberConvenience)@end NSString+NumberConvenience.m:12345#import &quot;NSString+NumberConvenience.h&quot;@implementation NSString (NumberConvenience)@end ç±»åˆ«ååœ¨æ‹¬å·ä¸­ã€‚å¯ä»¥åœ¨@implementationéƒ¨åˆ†å®žçŽ°è‡ªå·±çš„æ–¹æ³•ã€‚ä»»ä½•NSStringç±»çš„å¯¹è±¡éƒ½å°†å“åº”åœ¨ç±»åˆ«ä¸­çš„æ–¹æ³•ã€‚æ­£æ˜¯è¿™ç§å…¼å®¹æ€§ä½¿ç±»åˆ«æˆä¸ºäº†ä¸€ç§éžå¸¸å¼ºå¤§çš„æ¦‚å¿µã€‚ ç±»åˆ«çš„ç¼ºé™· æ–‡æ³•å‘ç±»ä¸­æ·»åŠ æ–°çš„å®žä¾‹å˜é‡ã€‚ åç§°å†²çªã€‚ç±»åˆ«ä¸­çš„æ–¹æ³•ä¸ŽçŽ°æœ‰çš„æ–¹æ³•é‡åæ—¶ï¼Œç±»åˆ«ä¸­çš„æ–¹æ³•ä¼šæ›¿ä»£çŽ°æœ‰çš„æ–¹æ³•ã€‚ï¼ˆå¯åœ¨ç±»åˆ«åç§°åŠ å‰ç¼€ï¼‰ ç±»åˆ«çš„ä¼˜åŠ¿ å°†ç±»çš„å®žçŽ°åˆ†æ•£åˆ°å¤šä¸ªä¸åŒæ–‡ä»¶æˆ–å¤šä¸ªä¸åŒæ¡†æž¶ä¸­ åˆ›å»ºå¯¹ç§æœ‰æ–¹æ³•çš„å‰å‘å¼•ç”¨ å‘å¯¹è±¡æ·»åŠ éžæ­£å¼åè®® ç±»æ‰©å±•ï¼ˆclass extentsionï¼‰ï¼šç‰¹æ®Šçš„ç±»åˆ« 12345678@interface Things : NSObject@property (assign) NSInteger thing1;@property (readonly, assign) NSInteger thing2;- (void)resetAllValues;@end 12345678@interface Things()&#123; NSInteger thing4; &#125;@property (readwrite, assign) NSInteger thing2;@property (assign) NSInteger thing3;@end 2 åˆ©ç”¨ç±»åˆ«åˆ†æ•£å®žçŽ°ä»£ç ä¸èƒ½å°†@implementationåˆ†æ•£åˆ°å¤šä¸ªä¸åŒçš„.mæ–‡ä»¶ä¸­ã€‚å¯ä»¥é€šè¿‡ç±»åˆ«æŠŠå¤§åž‹çš„å•ä¸ªç±»åˆ†æ•£åˆ°å¤šä¸ªä¸åŒçš„.mæ–‡ä»¶ä¸­ã€‚ä»¥AppKitä¸­çš„NSWindowä¸ºä¾‹ï¼Œåœ¨NSWindow.hä¸­æœç´¢@interfaceå¤§çº¦èƒ½æœåˆ°5ä¸ªç±»åˆ«å£°æ˜Žï¼š12345@interface NSWindow(NSEvent)@interface NSWindow(NSCursorRect)@interface NSWindow(NSDrag)@interface NSWindow(NSCarbonExtensions)@interface NSWindow(NSDeprecated) ç±»åˆ«å¯ä»¥è®¿é—®å…¶ç»§æ‰¿çš„ç±»çš„å®žä¾‹å˜é‡ã€‚ 3 é€šè¿‡ç±»åˆ«åˆ›å»ºå‰å‘å¼•ç”¨æ²¡æœ‰çœŸæ­£çš„ç§æœ‰æ–¹æ³•ã€‚ä¸åœ¨å¤´æ–‡ä»¶å£°æ˜Žï¼Œä¹Ÿå¯ä»¥è°ƒç”¨ï¼Œä¸è¿‡ç¼–è¯‘å™¨ä¼šæç¤ºè­¦å‘Šï¼Œå¹¶ä¸”app storeä¼šæ‹’ç»ä¸Šæž¶ã€‚å¯é€šè¿‡åœ¨ç±»åˆ«ä¸­å£°æ˜Žæ–¹æ³•é¿å…è¿™ç§è­¦å‘Šã€‚]]></content>
      <categories>
        <category>Objective-C</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[OCåŸºç¡€å­¦ä¹ 9ï¼šå±žæ€§]]></title>
    <url>%2F2017%2Foc-basic-9.html</url>
    <content type="text"><![CDATA[1 ä½¿ç”¨å±žæ€§ æŽ¥å£ä»£ç ç®€åŒ–æ²¡æœ‰ä½¿ç”¨å±žæ€§ï¼š12345678910111213#import &quot;Tire.h&quot;@interface AllWeatherRadial : Tire&#123; // è½®èƒŽåœ¨æ½®æ¹¿å’Œç§¯é›ªçš„é“è·¯ä¸Šçš„æ€§èƒ½ float rainHandling; float snowHandling;&#125;- (void) setRainHandling:(float)rainHandling;- (float) rainHandling;- (void) setSnowHandling:(float)snowHandling;- (float) snowHandling;@end ä½¿ç”¨å±žæ€§ï¼š1234567891011@interface AllWeatherRadial : Tire&#123; // è½®èƒŽåœ¨æ½®æ¹¿å’Œç§¯é›ªçš„é“è·¯ä¸Šçš„æ€§èƒ½ float rainHandling; float snowHandling;&#125;@property float rainHandling;@property float snowHandling;@end @ propertyé¢„ç¼–è¯‘æŒ‡ä»¤çš„ä½œç”¨æ˜¯è‡ªåŠ¨å£°æ˜Žå±žæ€§çš„setterå’Œgetteræ–¹æ³•ã€‚ ç®€åŒ–å®žçŽ°ä»£ç ä¹‹å‰ï¼š123456789101112131415161718192021222324252627282930313233343536#import &quot;AllWeatherRadial.h&quot;@implementation AllWeatherRadial-(NSString *)description&#123;// return (@&quot;I am a tire for rain or shine.&quot;); NSString *desc; desc = [[NSString alloc] initWithFormat:@&quot;AllWeatherRadial: %.1f / %.1f / %.1f / %.1f.&quot;, self.pressure, self.treadDepth, self.rainHandling, self.snowHandling]; return desc;&#125;- (void)setRainHandling:(float)r&#123; rainHandling = r;&#125;- (float)rainHandling&#123; return rainHandling;&#125;- (void)setSnowHandling:(float)s&#123; snowHandling = s;&#125;- (float)snowHandling&#123; return snowHandling;&#125;- (id) initWithPressure:(float)p treadDepth:(float)td&#123; if (self = [super initWithPressure:p treadDepth:td]) &#123; rainHandling = 23.7; snowHandling = 58.1; &#125; return self;&#125;@end ä½¿ç”¨å±žæ€§åŽçš„å®žçŽ°ä»£ç ï¼š1234567891011121314151617181920212223#import &quot;AllWeatherRadial.h&quot;@implementation AllWeatherRadial@synthesize rainHandling;@synthesize snowHandling;-(NSString *)description&#123; NSString *desc; desc = [[NSString alloc] initWithFormat:@&quot;AllWeatherRadial: %.1f / %.1f / %.1f / %.1f.&quot;, self.pressure, self.treadDepth, self.rainHandling, self.snowHandling]; return desc;&#125;- (id) initWithPressure:(float)p treadDepth:(float)td&#123; if (self = [super initWithPressure:p treadDepth:td]) &#123; rainHandling = 23.7; snowHandling = 58.1; &#125; return self;&#125;@end @synthesizeé¢„ç¼–è¯‘æŒ‡ä»¤è¡¨ç¤ºé€šçŸ¥ç¼–è¯‘å™¨ç”Ÿæˆè®¿é—®æ–¹æ³•ã€‚å½“é‡åˆ°@synthesize xxxï¼›è¿™è¡Œä»£ç æ—¶ï¼Œç¼–è¯‘å™¨å°†æ·»åŠ å®žçŽ°-setXxxï¼šå’Œ-xxxæ–¹æ³•çš„é¢„ç¼–è¯‘ä»£ç ã€‚ è¯¥@synthesizeé¢„ç¼–è¯‘æŒ‡ä»¤ä¸åŒäºŽä»£ç ç”Ÿæˆã€‚ä½ æ°¸è¿œçœ‹ä¸åˆ°å®žçŽ°-setXxxï¼šå’Œ-xxxçš„ä»£ç ï¼Œä½†æ˜¯è¿™äº›æ–¹æ³•ç¡®å®žå­˜åœ¨å¹¶å¯ä»¥è¢«è°ƒç”¨ã€‚è¿™ç§æŠ€æœ¯ä½¿è‹¹æžœå…¬å¸å¯ä»¥æ›´åŠ çµæ´»åœ°æ”¹å˜Objective-Cä¸­ç”Ÿæˆè®¿é—®æ–¹æ³•çš„æ–¹å¼ï¼Œå¹¶èŽ·å¾—æ›´å®‰å…¨çš„å®žçŽ°å’Œæ›´é«˜çš„çš„æ€§èƒ½ã€‚åœ¨Xcode4.5ä»¥åŽçš„ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥ä¸å¿…ä½¿ç”¨@synthesizeäº†ã€‚ æ‰€æœ‰çš„å±žæ€§éƒ½æ˜¯åŸºäºŽå˜é‡çš„ï¼Œåœ¨@synthesizeæ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åˆ›å»ºä¸Žå±žæ€§åç§°ç›¸åŒçš„å®žä¾‹å˜é‡ã€‚ å®žä¾‹å˜é‡å£°æ˜Žä½ç½®ï¼š å¤´æ–‡ä»¶ï¼šæœ‰å­ç±»ï¼Œæƒ³ä»Žå­ç±»ç›´æŽ¥é€šè¿‡å±žæ€§è®¿é—®å˜é‡ã€‚ å®žçŽ°æ–‡ä»¶ï¼šå˜é‡åªå±žäºŽå½“å‰ç±»ã€‚ ç‚¹è¡¨è¾¾å¼ä¹‹å‰çš„[tire setPressure:23+i];å¯ç›¸åº”å˜ä¸ºï¼štire.rainHandling = 23+i; 2 å±žæ€§æ‰©å±• å®žä¾‹å˜é‡å’Œå±žæ€§ä¸æ˜¯åŒä¸€ä¸ªåç§°12345678@interface Car : NSObject&#123; NSMutableArray *tires; Engine *engine; NSString *appellation;&#125;@property (copy) NSString *name;@property (retain) Engine *engine; ä¿®æ”¹@synthesizeæŒ‡ä»¤ä¸ºï¼š @synthesize name = appellation;ç¼–è¯‘å™¨ä»å°†åˆ›å»º-setName:å’Œ-nameæ–¹æ³•ï¼Œä½†åœ¨å…¶å®žçŽ°ä»£ç ä¸­ç”¨çš„ç¡®å®žappellationå®žä¾‹å˜é‡ã€‚ åªè¯»å±žæ€§readwrite readonlyå±žæ€§ä¸ºåªè¯»æ—¶ï¼Œç¼–è¯‘å™¨åªä¼šç”Ÿæˆä¸€ä¸ªgetteræ–¹æ³•ã€‚ å±žæ€§ä¸æ”¯æŒé‚£äº›éœ€è¦æŽ¥æ”¶é¢å¤–å‚æ•°çš„æ–¹æ³•ã€‚å¦‚carå¯¹è±¡ä¸­tireå¯¹è±¡çš„ä»£ç ã€‚]]></content>
      <categories>
        <category>Objective-C</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[OCåŸºç¡€å­¦ä¹ 8ï¼šå¯¹è±¡åˆå§‹åŒ–]]></title>
    <url>%2F2017%2Foc-basic-8.html</url>
    <content type="text"><![CDATA[1 åˆ†é…(allocation)å¯¹è±¡allocæ–¹æ³•å¹²çš„äº‹ä»¶ï¼š 1 ä»Žæ“ä½œç³»ç»ŸèŽ·å¾—ä¸€å—å†…å­˜ã€‚2 æŒ‡å®šä¸ºå­˜å‚¨å¯¹è±¡çš„å®žä¾‹å˜é‡çš„ä½ç½®ã€‚3 å¯¹å†…å­˜åˆå§‹åŒ–ï¼šBOOLç±»åž‹è¢«åˆå§‹åŒ–ä¸ºï¼šNOï¼›intç±»åž‹è¢«åˆå§‹åŒ–ä¸ºï¼š0ï¼›floatç±»åž‹è¢«åˆå§‹åŒ–ä¸ºï¼š0.0ï¼›æ‰€æœ‰æŒ‡é’ˆè¢«åˆå§‹åŒ–ä¸ºnilã€‚ åˆå§‹åŒ–å¯¹è±¡initæ–¹æ³•Car *car = [[Car alloc] init]; åˆå§‹åŒ–è¦åšäº›ä»€ä¹ˆ CarPartsç¨‹åºä¸­åˆå§‹carå¯¹è±¡æ˜¯ï¼Œinitæ–¹æ³•ä¸­åˆ›å»ºengineå¯¹è±¡å’Œå…¨éƒ¨4ä¸ªtireå¯¹è±¡ æ‡’æ€§æ±‚å€¼(lazy evaluation)ï¼Œåªä¸ºengineå¯¹è±¡å’Œtireå¯¹è±¡é¢„ç•™ä½ç½® 2 ä¾¿åˆ©åˆå§‹åŒ–å‡½æ•°(convenience initializer)ä»¥initå¼€å¤´çš„æ–¹æ³•åªæ˜¯éµå¾ªå‘½åçº¦å®šçš„æ™®é€šæ–¹æ³•ã€‚NSStringç±»çš„åˆå§‹åŒ–æ–¹æ³•ä¾‹å­ï¼š - (id) init; NSString *emptyString = [[NSString alloc] init]; - (instancetype)initWithFormat:(NSString *)format, ... NS_FORMAT_FUNCTION(1,2); NSString *string = [[NSString alloc] initWithFormat:@&quot;%d or %d&quot;, 1, 2]; - (nullable instancetype)initWithContentsOfFile:(NSString *)path encoding:(NSStringEncoding)enc error:(NSError **)error; NSError *error = nil; NSString *string1 = [[NSString alloc] initWithContentsOfFile:@&quot;/tmp/words.txt&quot; encoding:NSUTF8StringEncoding error:&amp;error]; if (nil != error) { NSLog(@&quot;æœªèƒ½è¯»å–æ–‡ä»¶æ•°æ®ï¼š%@&quot;, [error localizedDescription]); } 3 æŒ‡å®šåˆå§‹åŒ–å‡½æ•°(designated initializer) ç±»ä¸­çš„æŸä¸ªåˆå§‹åŒ–æ–¹æ³•è¢«æŒ‡æ´¾ä¸ºæŒ‡å®šåˆå§‹åŒ–å‡½æ•° è¯¥ç±»çš„æ‰€æœ‰åˆå§‹åŒ–æ–¹æ³•éƒ½ä½¿ç”¨æŒ‡å®šåˆå§‹åŒ–å‡½æ•°æ‰§è¡Œåˆå§‹åŒ–æ“ä½œ å­ç±»ä½¿ç”¨æœŸè¶…ç±»çš„æŒ‡å®šåˆå§‹åŒ–å‡½æ•°è¿›è¡Œè¶…ç±»çš„åˆå§‹åŒ– é€šå¸¸ï¼ŒæŽ¥å—å‚æ•°æœ€å¤šçš„åˆå§‹åŒ–æ–¹æ³•æ˜¯æœ€ç»ˆçš„æŒ‡å®šçš„åˆå§‹åŒ–å‡½æ•°]]></content>
      <categories>
        <category>Objective-C</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOSä¸ŽJS(ä¸€)ï¼šä½¿ç”¨URLæ‹¦æˆªçš„æ–¹å¼è¿›è¡ŒJSä¸ŽOCäº’ç›¸è°ƒç”¨]]></title>
    <url>%2F2017%2Fios-js-1.html</url>
    <content type="text"><![CDATA[å…³äºŽWKWebViewä¸ŽUIWebViewä¹‹é—´çš„åŒºåˆ«ï¼Œæœ¬æ–‡å°±ä¸åœ¨è¯´æ˜Žï¼Œæœ¬æ–‡åªä½¿ç”¨WKWebViewã€‚æ•ˆæžœå›¾å¦‚ä¸‹ï¼š htmlä»£ç ï¼š12345678910111213141516171819202122232425262728293031323334353637&lt;html&gt; &lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf8&quot;&gt; &lt;script language=&quot;javascript&quot;&gt; function loadURL(url) &#123; window.location.href = url &#125; function locationClick() &#123; loadURL(&quot;scheme://getLocation&quot;); &#125; function shake() &#123; loadURL(&quot;scheme://shake&quot;); &#125; function setLocation(location) &#123; alert(location) document.getElementById(&quot;returnValue&quot;).value = location; &#125; &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;è¿™æ˜¯æŒ‰é’®è°ƒç”¨&lt;/h1&gt; &lt;input type=&quot;button&quot; value=&quot;èŽ·å–å®šä½&quot; onclick=&quot;locationClick()&quot; /&gt;&lt;br&gt;&lt;br&gt; &lt;input type=&quot;button&quot; value=&quot;éœ‡åŠ¨ä¸€ä¸‹&quot; onclick=&quot;shake()&quot; /&gt;&lt;br&gt;&lt;br&gt; &lt;h1&gt;è¿™æ˜¯æ–‡ä»¶ä¸Šä¼ &lt;/h1&gt; &lt;input type=&quot;file&quot; /&gt;&lt;br&gt;&lt;br&gt; &lt;h1&gt;è¿™æ˜¯å›žè°ƒç»“æžœå±•ç¤ºåŒº&lt;/h1&gt; &lt;textarea id =&quot;returnValue&quot; type=&quot;value&quot; rows=&quot;5&quot; cols=&quot;50&quot;&gt;&lt;/textarea&gt; &lt;/body&gt;&lt;/html&gt; ä»¥èŽ·å–å®šä½è¿™ä¸ªæŒ‰é’®ä¸ºä¾‹è¯´æ˜ŽOCå’ŒJSäº’ç›¸è°ƒç”¨ä»£ç æ‰§è¡Œæµç¨‹ï¼š åˆå§‹åŒ–WKWebViewåŠ è½½æœ¬åœ°htmlæ–‡ä»¶ã€‚ ç‚¹å‡»webä¸­çš„æŒ‰é’®ï¼Œwebå‘èµ·URLè¯·æ±‚ã€‚ URLè¯·æ±‚è¢«WKNavigationDelegateä¸­çš„ä»£ç†æ–¹æ³•æ‹¦æˆªã€‚æ ¹æ®è‡ªå®šä¹‰çš„URLè¯†åˆ«ä½¿ç”¨ä¸åŒçš„å¤„ç†æ–¹å¼ã€‚å¦‚ï¼šåœ¨- (void)getLocationæ–¹æ³•ä¸­è°ƒç”¨JSçš„setLocationå‡½æ•°ã€‚ JSçš„setLocationå‡½æ•°æ‰§è¡ŒJSçš„alert()å‡½æ•°ï¼Œè¢«WKUIDelegateä¸­çš„ä»£ç†æ–¹æ³•æ•èŽ·ï¼Œè°ƒç”¨iOSåŽŸç”Ÿçš„å¼¹æ¡†ã€‚ è¯¦ç»†ä»£ç è¯´æ˜Ž åˆå§‹åŒ–WKWebViewåŠ è½½æœ¬åœ°htmlæ–‡ä»¶ 123456789101112131415161718192021- (void)initWKWebView&#123; // 1 WKWebViewConfiguration *configuration = [[WKWebViewConfiguration alloc] init]; configuration.userContentController = [WKUserContentController new]; WKPreferences *preferences = [WKPreferences new]; preferences.javaScriptCanOpenWindowsAutomatically = YES; preferences.minimumFontSize = 40.0; configuration.preferences = preferences; self.webView = [[WKWebView alloc] initWithFrame:self.view.frame configuration:configuration]; // 2 NSString *urlStr = [[NSBundle mainBundle] pathForResource:@&quot;index.html&quot; ofType:nil]; NSURL *fileURL = [NSURL fileURLWithPath:urlStr]; [self.webView loadFileURL:fileURL allowingReadAccessToURL:fileURL]; self.webView.navigationDelegate = self; self.webView.UIDelegate = self; [self.view addSubview:self.webView];&#125; 1 WKWebViewçš„ä¸€äº›å‚æ•°é…ç½® 2 åŠ è½½æœ¬html URLè¯·æ±‚è¢«WKNavigationDelegateä¸­çš„ä»£ç†æ–¹æ³•æ‹¦æˆªã€‚ä¹Ÿå°±æ˜¯JSè°ƒç”¨äº†OC 1234567891011121314#pragma mark - WKNavigationDelegate- (void)webView:(WKWebView *)webView decidePolicyForNavigationAction:(WKNavigationAction *)navigationAction decisionHandler:(void (^)(WKNavigationActionPolicy))decisionHandler&#123; NSURL *URL = navigationAction.request.URL; NSString *scheme = [URL scheme]; if ([scheme isEqualToString:@&quot;scheme&quot;]) &#123; [self handleCustomAction:URL]; decisionHandler(WKNavigationActionPolicyCancel); return; &#125; decisionHandler(WKNavigationActionPolicyAllow);&#125; OC è°ƒç”¨ JS 12345678- (void)getLocation&#123; // å°†ç»“æžœè¿”å›žç»™js NSString *jsStr = [NSString stringWithFormat:@&quot;setLocation(&apos;%@&apos;)&quot;,@&quot;ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒº&quot;]; [self.webView evaluateJavaScript:jsStr completionHandler:^(id _Nullable result, NSError * _Nullable error) &#123; NSLog(@&quot;%@----%@&quot;,result, error); &#125;];&#125; JSä»£ç è¢«å½“æˆå­—ç¬¦ä¸²è°ƒç”¨ completionHandleræ˜¯JSä»£ç è¢«è°ƒç”¨åŽå›žè°ƒ JSä¸­alertå¼¹çª—è¢«WKUIDelegateä¸­çš„ä»£ç†æ–¹æ³•æ•èŽ·ï¼Œè°ƒç”¨iOSåŽŸç”Ÿçš„å¼¹æ¡†ã€‚ 1234567891011#pragma mark - WKUIDelegate- (void)webView:(WKWebView *)webView runJavaScriptAlertPanelWithMessage:(NSString *)message initiatedByFrame:(WKFrameInfo *)frame completionHandler:(void (^)(void))completionHandler&#123; UIAlertController *alert = [UIAlertController alertControllerWithTitle:@&quot;æé†’&quot; message:message preferredStyle:UIAlertControllerStyleAlert]; [alert addAction:[UIAlertAction actionWithTitle:@&quot;çŸ¥é“äº†&quot; style:UIAlertActionStyleCancel handler:^(UIAlertAction * _Nonnull action) &#123; completionHandler(); &#125;]]; [self presentViewController:alert animated:YES completion:nil];&#125; æœ€åŽï¼Œhtmlä¸­çš„æ–‡ä»¶inputå¯ä»¥ç›´æŽ¥è°ƒç”¨iOSçš„å›¾ç‰‡åº“ï¼Œç›¸æœºå’Œæ–‡ä»¶ã€‚ ä»£ç ï¼š 90-iOSJS/OCJS1 å‚è€ƒï¼š iOSä¸‹JSä¸ŽOCäº’ç›¸è°ƒç”¨ï¼ˆäºŒï¼‰â€“WKWebView æ‹¦æˆªURL iOSä¸‹JSä¸ŽåŽŸç”ŸOCäº’ç›¸è°ƒç”¨(æ€»ç»“)]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOSä¸ŽJS(äºŒ)ï¼šMessageHandler(OC&Swift)]]></title>
    <url>%2F2017%2Fios-js-2.html</url>
    <content type="text"><![CDATA[iOSä¸ŽJSçš„ç›¸äº’è°ƒç”¨é™¤äº†URLæ‹¦æˆªï¼ˆiOSä¸ŽJS(ä¸€)ï¼šä½¿ç”¨URLæ‹¦æˆªçš„æ–¹å¼è¿›è¡ŒJSä¸ŽOCäº’ç›¸è°ƒç”¨ï¼‰å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨WKWebViewçš„ä¸­çš„MessageHandleræ¥å®žçŽ°ã€‚ MessageHandleræ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä»¥ä»£ç æ¥è¯´æ˜Žï¼Œæ¯”è¾ƒå¥½ç†è§£ã€‚åœ¨OCä¸­åˆå§‹åŒ–WKWebViewæ˜¯ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç :[self.webView.configuration.userContentController addScriptMessageHandler:self name:@&quot;Location&quot;];é‚£ä¹ˆåœ¨JSä¸­å°±å¯ä»¥ä½¿ç”¨ï¼šwindow.webkit.messageHandlers.Location.postMessage(null);JSä¸­çš„Locationå°±å¯¹åº”OCä¸­çš„nameï¼ŒpostMessageåŽçš„å‚æ•°å°±æ˜¯JSä¼ ç»™OCçš„å‚æ•°ï¼Œç±»åž‹å¯ä»¥æ˜¯ NSNumber, NSString, NSDate, NSArray, NSDictionary, and NSNullã€‚JSå›žè°ƒOCæ—¶ï¼Œå°±å›žè°ƒWKScriptMessageHandlerçš„- (void)userContentController:([WKUserContentController](apple-reference-documentation://hcracoR5p2) *)userContentController didReceiveScriptMessage:([WKScriptMessage](apple-reference-documentation://hcD3KQdcJY) *)message;æ–¹æ³•ï¼Œè¿™è¾¹çš„messageæ˜¯WKScriptMessageï¼Œ message.nameå°±æ˜¯â€œLocationâ€ï¼Œmessage.bodyå°±æ˜¯postMessageåŽçš„å‚æ•°ã€‚ ä¸‹é¢çœ‹å®Œæ•´çš„ðŸŒ°ï¼š htmlçš„ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&lt;html&gt; &lt;head&gt; &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf8&quot;&gt; &lt;script language=&quot;javascript&quot;&gt; var ctuapp_share_img=&quot;www.baidu.com&quot;; function locationClick() &#123; window.webkit.messageHandlers.Location.postMessage(null); &#125; function shake() &#123; window.webkit.messageHandlers.Shake.postMessage(null); &#125; function payClick()&#123; window.webkit.messageHandlers.Pay.postMessage(&#123;order_no:&apos;201511120981234&apos;,channel:&apos;wx&apos;,amount:1,subject:&apos;ç²‰è‰²å¤–å¥—&apos;&#125;); &#125; function setLocation(location) &#123; alert(location) document.getElementById(&quot;returnValue&quot;).value = location; &#125; function payResult(str) &#123; alert(str); document.getElementById(&quot;returnValue&quot;).value = str; &#125; &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;è¿™æ˜¯æŒ‰é’®è°ƒç”¨&lt;/h1&gt; &lt;input type=&quot;button&quot; value=&quot;èŽ·å–å®šä½&quot; onclick=&quot;locationClick()&quot; /&gt;&lt;br&gt;&lt;br&gt; &lt;input type=&quot;button&quot; value=&quot;éœ‡åŠ¨ä¸€ä¸‹&quot; onclick=&quot;shake()&quot; /&gt;&lt;br&gt;&lt;br&gt; &lt;input type=&quot;button&quot; value=&quot;æ”¯ä»˜&quot; onclick=&quot;payClick()&quot; /&gt;&lt;br&gt;&lt;br&gt; &lt;h1&gt;è¿™æ˜¯æ–‡ä»¶ä¸Šä¼ &lt;/h1&gt; &lt;input type=&quot;file&quot; /&gt;&lt;br&gt;&lt;br&gt; &lt;h1&gt;è¿™æ˜¯å›žè°ƒç»“æžœå±•ç¤ºåŒº&lt;/h1&gt; &lt;textarea id =&quot;returnValue&quot; type=&quot;value&quot; rows=&quot;5&quot; cols=&quot;50&quot;&gt;&lt;/textarea&gt; &lt;/body&gt;&lt;/html&gt; åˆå§‹åŒ–WKWebView12345678910111213141516171819- (void)initWKWebView&#123; WKWebViewConfiguration *configuration = [[WKWebViewConfiguration alloc] init]; WKPreferences *preferences = [WKPreferences new]; preferences.javaScriptCanOpenWindowsAutomatically = YES; preferences.minimumFontSize = 40.0; configuration.preferences = preferences; self.webView = [[WKWebView alloc] initWithFrame:self.view.frame configuration:configuration]; NSString *urlStr = [[NSBundle mainBundle] pathForResource:@&quot;index.html&quot; ofType:nil]; NSURL *fileURL = [NSURL fileURLWithPath:urlStr]; [self.webView loadFileURL:fileURL allowingReadAccessToURL:fileURL]; self.webView.UIDelegate = self; [self.view addSubview:self.webView];&#125; æ·»åŠ  MessageHandlerä¸ºäº†é˜²æ­¢å¾ªçŽ¯å¼•ç”¨ï¼Œç»“æŸæ—¶é‡Šæ”¾ã€‚123456789101112131415161718- (void)viewWillAppear:(BOOL)animated&#123; [super viewWillAppear:animated]; // addScriptMessageHandler å¾ˆå®¹æ˜“å¯¼è‡´å¾ªçŽ¯å¼•ç”¨ // æŽ§åˆ¶å™¨ å¼ºå¼•ç”¨äº†WKWebView,WKWebView copy(å¼ºå¼•ç”¨äº†ï¼‰configurationï¼Œ configuration copy ï¼ˆå¼ºå¼•ç”¨äº†ï¼‰userContentController [self.webView.configuration.userContentController addScriptMessageHandler:self name:@&quot;Location&quot;]; [self.webView.configuration.userContentController addScriptMessageHandler:self name:@&quot;Shake&quot;]; [self.webView.configuration.userContentController addScriptMessageHandler:self name:@&quot;Pay&quot;];&#125;- (void)viewWillDisappear:(BOOL)animated&#123; [super viewWillDisappear:animated]; [self.webView.configuration.userContentController removeScriptMessageHandlerForName:@&quot;Location&quot;]; [self.webView.configuration.userContentController removeScriptMessageHandlerForName:@&quot;Shake&quot;]; [self.webView.configuration.userContentController removeScriptMessageHandlerForName:@&quot;Pay&quot;];&#125; å®žçŽ°WKUIDelegateå’ŒWKScriptMessageHandleråè®®æ–¹æ³•12345678910111213141516171819202122232425#pragma mark - WKUIDelegate- (void)webView:(WKWebView *)webView runJavaScriptAlertPanelWithMessage:(NSString *)message initiatedByFrame:(WKFrameInfo *)frame completionHandler:(void (^)(void))completionHandler&#123; UIAlertController *alert = [UIAlertController alertControllerWithTitle:@&quot;æé†’&quot; message:message preferredStyle:UIAlertControllerStyleAlert]; [alert addAction:[UIAlertAction actionWithTitle:@&quot;çŸ¥é“äº†&quot; style:UIAlertActionStyleCancel handler:^(UIAlertAction * _Nonnull action) &#123; completionHandler(); &#125;]]; [self presentViewController:alert animated:YES completion:nil];&#125;#pragma mark - WKScriptMessageHandler- (void)userContentController:(WKUserContentController *)userContentController didReceiveScriptMessage:(WKScriptMessage *)message&#123; // message.body -- Allowed types are NSNumber, NSString, NSDate, NSArray,NSDictionary, and NSNull. NSLog(@&quot;body:%@&quot;,message.body); if ([message.name isEqualToString:@&quot;Location&quot;]) &#123; [self getLocation]; &#125; else if ([message.name isEqualToString:@&quot;Shake&quot;]) &#123; [self shakeAction]; &#125; else if ([message.name isEqualToString:@&quot;Pay&quot;]) &#123; [self payWithParams:message.body]; &#125;&#125; æ•ˆæžœï¼š Swiftçš„å’ŒOCç±»åž‹ï¼Œä»£ç æˆ‘ä¹Ÿä¸€èµ·å†™äº† ä»£ç ï¼š 90-iOSJS ä¸­çš„ OCJSMessageHandler å’Œ SwiftJSMessageHandler å‚è€ƒï¼šiOSä¸‹JSä¸ŽOCäº’ç›¸è°ƒç”¨ï¼ˆä¸‰ï¼‰â€“MessageHandler]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOSåŠ¨ç”»(ä¸‰)ï¼šæ ¸å¿ƒåŠ¨ç”»ä¸­ç¼©æ”¾å’Œæ—‹è½¬(Swift)]]></title>
    <url>%2F2017%2Fios-animation-3.html</url>
    <content type="text"><![CDATA[åŽŸç†å’Œä¸Šä¸€ç¯‡æ˜¯ç›¸åŒçš„ï¼Œä¸åŒä¹‹å¤„æ˜¯keyPathå±žæ€§ï¼Œç¼©æ”¾æ—¶æ˜¯keyPathæ˜¯ transform.scaleï¼Œæ—‹è½¬æ—¶keyPathæ˜¯transform.rotationã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113class ScaleRotationViewController: UIViewController &#123; // ç”¨äºŽç¼©æ”¾çš„layer lazy var redLayer: CALayer = &#123; return self.createLayer(position: CGPoint(x: 125, y: 150), backgroundColor: UIColor.red) &#125;() lazy var greenLayer: CALayer = &#123; return self.createLayer(position: CGPoint(x: 125, y: 250), backgroundColor: UIColor.green) &#125;() lazy var cyanLayer: CALayer = &#123; return self.createLayer(position: CGPoint(x: 125, y: 350), backgroundColor: UIColor.cyan) &#125;() lazy var blueLayer: CALayer = &#123; return self.createLayer(position: CGPoint(x: 125, y: 450), backgroundColor: UIColor.blue) &#125;() // ç”¨äºŽæ—‹è½¬çš„Layer lazy var redRotationLayer: CALayer = &#123; return self.createLayer(position: CGPoint(x: 300, y: 150), backgroundColor: UIColor.red) &#125;() lazy var greenRotationLayer: CALayer = &#123; return self.createLayer(position: CGPoint(x: 300, y: 250), backgroundColor: UIColor.green) &#125;() lazy var cyanRotationLayer: CALayer = &#123; return self.createLayer(position: CGPoint(x: 300, y: 350), backgroundColor: UIColor.cyan) &#125;() override func viewDidLoad() &#123; super.viewDidLoad() // æ·»åŠ ç¼©æ”¾çš„åŠ¨ç”» redLayer.add(createAnimation(keyPath: &quot;transform.scale.x&quot;, toValue: 0.5), forKey: nil) greenLayer.add(createAnimation(keyPath: &quot;transform.scale.y&quot;, toValue: 0.5), forKey: nil) cyanLayer.add(createAnimation(keyPath: &quot;transform.scale.z&quot;, toValue: 0.5), forKey: nil) blueLayer.add(createAnimation(keyPath: &quot;transform.scale&quot;, toValue: 0.5), forKey: nil) // æ·»åŠ æ—‹è½¬çš„åŠ¨ç”» redRotationLayer.add(createAnimation(keyPath: &quot;transform.rotation.x&quot;, toValue: CGFloat(Double.pi / 4)), forKey: nil) greenRotationLayer.add(createAnimation(keyPath: &quot;transform.rotation.y&quot;, toValue: CGFloat(Double.pi / 4)), forKey: nil) cyanRotationLayer.add(createAnimation(keyPath: &quot;transform.rotation.z&quot;, toValue: CGFloat(Double.pi / 4)), forKey: nil) self.creatLabel(title: &quot;ç¼©æ”¾&quot;, frame: CGRect(x: 100, y: 80, width: 50, height: 20)) self.creatLabel(title: &quot;æ—‹è½¬&quot;, frame: CGRect(x: 250, y: 80, width: 50, height: 20)) self.creatLabel(title: &quot;Xè½´&quot;, frame: CGRect(x: 20, y: 125, width: 50, height: 20)) self.creatLabel(title: &quot;Yè½´&quot;, frame: CGRect(x: 20, y: 225, width: 50, height: 20)) self.creatLabel(title: &quot;Zè½´&quot;, frame: CGRect(x: 20, y: 325, width: 50, height: 20)) self.creatLabel(title: &quot;XYZè½´&quot;, frame: CGRect(x: 20, y: 425, width: 50, height: 20)) &#125; // åˆ›å»ºcalayer func createLayer (position: CGPoint, backgroundColor: UIColor) -&gt; CALayer &#123; //åˆ›å»ºcalayer let layer = CALayer() //è®¾ç½®ä½ç½®å’Œå¤§å° layer.position = position layer.bounds = CGRect(x: 0, y: 0, width: 100, height: 100) //è®¾ç½®èƒŒæ™¯é¢œè‰² layer.backgroundColor = backgroundColor.cgColor //æŠŠlayeræ·»åŠ åˆ°UIViewçš„layerä¸Š self.view.layer.addSublayer(layer) return layer &#125; // åˆ›å»ºåŸºç¡€Animation func createAnimation (keyPath: String, toValue: CGFloat) -&gt; CABasicAnimation &#123; //åˆ›å»ºåŠ¨ç”»å¯¹è±¡ let scaleAni = CABasicAnimation() //è®¾ç½®åŠ¨ç”»å±žæ€§ scaleAni.keyPath = keyPath //è®¾ç½®åŠ¨ç”»çš„èµ·å§‹ä½ç½®ã€‚ä¹Ÿå°±æ˜¯åŠ¨ç”»ä»Žå“ªé‡Œåˆ°å“ªé‡Œã€‚ä¸æŒ‡å®šèµ·ç‚¹ï¼Œé»˜è®¤å°±ä»Žpositoinå¼€å§‹ scaleAni.toValue = toValue //åŠ¨ç”»æŒç»­æ—¶é—´ scaleAni.duration = 2; //åŠ¨ç”»é‡å¤æ¬¡æ•° scaleAni.repeatCount = Float(CGFloat.greatestFiniteMagnitude) return scaleAni; &#125; //åˆ›å»ºLabel fileprivate func creatLabel (title: String, frame: CGRect) -&gt; ()&#123; let label = UILabel() label.text = title label.frame = frame label.textColor = UIColor.darkGray label.font = UIFont.systemFont(ofSize: 12) self.view.addSubview(label) &#125;&#125; ä»£ç ï¼š 89-Animation/CABasic Animation å‚è€ƒï¼šç¬¬äº”ç¯‡ï¼šCABasic Animationã€‚iOSåŠ¨ç”»ç³»åˆ—ä¹‹äº”ï¼šåŸºç¡€åŠ¨ç”»ä¹‹ç¼©æ”¾ç¯‡&amp;æ—‹è½¬ç¯‡]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOSåŠ¨ç”»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSåŠ¨ç”»(äºŒ)ï¼šæ ¸å¿ƒåŠ¨ç”»ä¸­çš„åŸºç¡€ç§»åŠ¨(Swift)]]></title>
    <url>%2F2017%2Fios-animation-2.html</url>
    <content type="text"><![CDATA[ç®€å•çš„ç§»åŠ¨ æ–°å»ºä¸€ä¸ªCALayerã€‚ 12345678910lazy var redLayer: CALayer = &#123; return self.createLayer()&#125;()func createLayer() -&gt; CALayer &#123; let redLayer = CALayer() redLayer.position = CGPoint(x: 200, y: 200) redLayer.bounds = CGRect(x: 0, y: 0, width: 100, height: 100) redLayer.backgroundColor = UIColor.red.cgColor return redLayer&#125; æŠŠæ–°å»ºçš„CALayeræ·»åŠ çš„viewçš„layerä¸­ã€‚ 1view.layer.addSublayer(redLayer) éµå®ˆåè®®CAAnimationDelegate class BasicPostionViewController: UIViewController, CAAnimationDelegate { åˆ›å»ºåŠ¨ç”»CABasicAnimation,å¹¶æ·»åŠ çš„CALayerä¸­ã€‚ 12345678910111213141516171819func createCABasicAnimation() -&gt; CABasicAnimation &#123; let basicAni = CABasicAnimation() // è®¾ç½®åŠ¨ç”»å±žæ€§ basicAni.keyPath = &quot;position&quot; basicAni.fromValue = NSValue.init(cgPoint: CGPoint(x: 0, y: 0)) basicAni.toValue = NSValue.init(cgPoint: CGPoint(x: 300, y: 300)) basicAni.duration = 2 basicAni.fillMode = kCAFillModeForwards basicAni.isRemovedOnCompletion = false basicAni.delegate = self return basicAni&#125; 12let basicAni = createCABasicAnimation()self.redLayer.add(basicAni, forKey: &quot;basicPosition&quot;) forKey æ˜¯åŠ¨ç”»å¯¹è±¡çš„åå­—ï¼Œåªæ˜¯ç”¨æ¥æ ‡è¯†ï¼Œæ²¡æœ‰ç‰¹æ®Šæ„ä¹‰ã€‚ ç¨å¾®å¤æ‚çš„ç§»åŠ¨ åŽŸç†å’Œä¸Šé¢ç›¸åŒï¼Œéƒ½æ˜¯å…ˆåˆ›å»ºCALayerï¼Œç„¶åŽæ·»åŠ CABasicAnimationã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465class BasicPostion2ViewController: UIViewController, CAAnimationDelegate&#123; lazy var redLayer: CALayer = &#123; return self.createLayer(postion: CGPoint(x: 0, y: 150), backgroundColor: UIColor.red) &#125;() lazy var greenLayer: CALayer = &#123; return self.createLayer(postion: CGPoint(x: 0, y: 250), backgroundColor: UIColor.green) &#125;() lazy var cyanLayer: CALayer = &#123; return self.createLayer(postion: CGPoint(x: 0, y: 350), backgroundColor: UIColor.cyan) &#125;() lazy var blueLayer: CALayer = &#123; return self.createLayer(postion: CGPoint(x: 0, y: 450), backgroundColor: UIColor.blue) &#125;() override func viewDidLoad() &#123; super.viewDidLoad() redLayer.add(createBasicAnimation(fromValue: CGPoint(x: 0, y: 150), toValue: CGPoint(x: 300, y: 150), timingFunction: kCAMediaTimingFunctionLinear), forKey: &quot;basicAnimation&quot;) view.layer.addSublayer(redLayer) greenLayer.add(createBasicAnimation(fromValue: CGPoint(x: 0, y: 250), toValue: CGPoint(x: 300, y: 250), timingFunction: kCAMediaTimingFunctionEaseIn), forKey: &quot;basicAnimation&quot;) view.layer.addSublayer(greenLayer) cyanLayer.add(createBasicAnimation(fromValue: CGPoint(x: 0, y: 350), toValue: CGPoint(x: 300, y: 350), timingFunction: kCAMediaTimingFunctionEaseOut), forKey: &quot;basicAnimation&quot;) view.layer.addSublayer(cyanLayer) blueLayer.add(createBasicAnimation(fromValue: CGPoint(x: 0, y: 450), toValue: CGPoint(x: 300, y: 450), timingFunction: kCAMediaTimingFunctionEaseInEaseOut), forKey: &quot;basicAnimation&quot;) view.layer.addSublayer(blueLayer) &#125; func createLayer(postion: CGPoint, backgroundColor: UIColor) -&gt; CALayer &#123; let layer = CALayer() layer.position = postion layer.bounds = CGRect(x: 0, y: 0, width: 100, height: 100) layer.backgroundColor = backgroundColor.cgColor return layer &#125; func createBasicAnimation (fromValue: CGPoint, toValue: CGPoint, timingFunction: String) -&gt; CABasicAnimation &#123; let basicAni = CABasicAnimation() basicAni.keyPath = &quot;position&quot; basicAni.fromValue = fromValue basicAni.toValue = toValue basicAni.duration = 2 // basicAni.fillMode = kCAFillModeForwards // basicAni.isRemovedOnCompletion = false // 1 basicAni.timingFunction = CAMediaTimingFunction(name: timingFunction) basicAni.delegate = self return basicAni &#125;&#125; 1 timingFunctionä»£è¡¨ç§»åŠ¨æ¨¡å¼ï¼š kCAMediaTimingFunctionLinearï¼ˆçº¿æ€§ï¼‰ï¼šåŒ€é€Ÿï¼Œç»™ä½ ä¸€ä¸ªç›¸å¯¹é™æ€çš„æ„Ÿè§‰ kCAMediaTimingFunctionEaseInï¼ˆæ¸è¿›ï¼‰ï¼šåŠ¨ç”»ç¼“æ…¢è¿›å…¥ï¼Œç„¶åŽåŠ é€Ÿç¦»å¼€ kCAMediaTimingFunctionEaseOutï¼ˆæ¸å‡ºï¼‰ï¼šåŠ¨ç”»å…¨é€Ÿè¿›å…¥ï¼Œç„¶åŽå‡é€Ÿçš„åˆ°è¾¾ç›®çš„åœ° kCAMediaTimingFunctionEaseInEaseOutï¼ˆæ¸è¿›æ¸å‡ºï¼‰ï¼šåŠ¨ç”»ç¼“æ…¢çš„è¿›å…¥ï¼Œä¸­é—´åŠ é€Ÿï¼Œç„¶åŽå‡é€Ÿçš„åˆ°è¾¾ç›®çš„åœ°ã€‚ ä»£ç ï¼š 89-Animation/CABasic Animation å‚è€ƒï¼š ç¬¬ä¸‰ç¯‡ï¼šiOSåŠ¨ç”»ç³»åˆ—ä¹‹ä¸‰ï¼šCore Animationã€‚ä»‹ç»äº†Core Animationçš„å¸¸ç”¨å±žæ€§å’Œæ–¹æ³•ã€‚ ç¬¬å››ç¯‡ï¼šCABasic Animationã€‚iOSåŠ¨ç”»ç³»åˆ—ä¹‹å››ï¼šåŸºç¡€åŠ¨ç”»ä¹‹å¹³ç§»ç¯‡]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOSåŠ¨ç”»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSåŠ¨ç”»(ä¸€)ï¼šæ—¶é’ŸåŠ¨ç”»(Swift)]]></title>
    <url>%2F2017%2Fios-animation-1-clock.html</url>
    <content type="text"><![CDATA[ä¸€ã€ç›´æŽ¥åšåŠ¨ç”» æ–°å»ºé¡¹ç›®clock åŠ è½½è¡¨ç›˜å›¾ç‰‡ã€‚åœ¨viewDidLoadä¸­æ·»åŠ ï¼š 123456let dialLayer = CALayer()dialLayer.bounds = CGRect(x: 0, y: 0, width: 150, height: 150)dialLayer.position = self.view.centerdialLayer.contents = UIImage(named: &quot;clock&quot;)?.cgImageview.layer.addSublayer(dialLayer) æ‡’åŠ è½½ç§’é’ˆã€åˆ†é’ˆã€æ—¶é’ˆè§†å›¾ã€‚æ‡’åŠ è½½æœºåˆ¶æ˜¯Swiftä¸­ä¸€ç§å­˜å‚¨å±žæ€§ï¼šå»¶è¿Ÿå­˜å‚¨å±žæ€§ï¼Œå…·ä½“å¯æ“¦çœ‹ ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-10ï¼šProperties 1234567891011121314151617181920212223242526272829303132// ç§’é’ˆlazy var secondHandView: UIView = &#123; let secondHandView = UIView() secondHandView.backgroundColor = UIColor.red secondHandView.bounds = CGRect(x: 0, y: 0, width: 1, height: 60) secondHandView.layer.anchorPoint = CGPoint(x: 0.5, y: 1) return secondHandView&#125;()// åˆ†é’ˆlazy var minuteHandView: UIView = &#123; let minuteHandView = UIView() minuteHandView.backgroundColor = UIColor.darkGray minuteHandView.bounds = CGRect(x: 0, y: 0, width: 3, height: 60) minuteHandView.layer.anchorPoint = CGPoint(x: 0.5, y: 1) return minuteHandView&#125;()// æ—¶é’ˆlazy var hourHandView: UIView = &#123; let hourHandView = UIView() hourHandView.backgroundColor = UIColor.darkGray hourHandView.bounds = CGRect(x: 0, y: 0, width: 3, height: 45) hourHandView.layer.anchorPoint = CGPoint(x: 0.5, y: 1) return hourHandView&#125;() æŠŠç§’é’ˆã€åˆ†é’ˆã€æ—¶é’ˆæ·»åŠ åˆ°viewä¸­ã€‚åœ¨viewDidLoadä¸­æ·»åŠ ï¼š 123456secondHandView.center = view.centerself.view.addSubview(secondHandView)minuteHandView.center = view.centerself.view.addSubview(minuteHandView)hourHandView.center = view.centerself.view.addSubview(hourHandView) åˆ›å»ºCADisplayLinkï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°ä¸»çº¿ç¨‹ä¸­ã€‚åœ¨viewDidLoadä¸­æ·»åŠ ï¼š 12let link = CADisplayLink(target: self, selector: #selector(ViewController.clockRunning))link.add(to: RunLoop.main, forMode: .defaultRunLoopMode) æ·»åŠ æ–¹æ³•clockRunning: 123456789101112131415161718func clockRunning() &#123; let tZone = TimeZone.current var calendar = Calendar.current let currentDate = Date() calendar.timeZone = tZone let currentTime = calendar.dateComponents([Calendar.Component.hour, Calendar.Component.minute, Calendar.Component.second], from: currentDate) // æ ¹æ®å½“å‰ç§’ã€åˆ†ã€æ—¶æ•°åˆ†åˆ«è®¡ç®—ç§’é’ˆã€åˆ†é’ˆã€æ—¶é’ˆåè½¬å¼§åº¦ let secondAngle = CGFloat ( Double(currentTime.second!) * (Double.pi * 2.0 / 60) ) secondHandView.transform = CGAffineTransform(rotationAngle: secondAngle) let minuteAngle = CGFloat ( Double(currentTime.minute!) * (Double.pi * 2.0 / 60) ) minuteHandView.transform = CGAffineTransform(rotationAngle: minuteAngle) let hourAngle = CGFloat ( Double(currentTime.hour!) * (Double.pi * 2.0 / 12) ) hourHandView.transform = CGAffineTransform(rotationAngle: hourAngle)&#125; çŽ°åœ¨å°±å®Œæˆäº†æ–‡ç« å¼€å¤´çš„æ•ˆæžœã€‚ äºŒã€ä»£ç è¯´æ˜Ž å…³äºŽanchorPointï¼ˆé”šç‚¹ï¼‰å¦‚æžœæ³¨é‡ŠæŽ‰åˆ†é’ˆå’Œæ—¶é’ˆè§†å›¾ï¼Œå¹¶ä¸”å…³æŽ‰åŠ¨ç”»æ•ˆæžœå’Œé”šç‚¹è®¾ç½®ï¼š123456789// secondHandView.layer.anchorPoint = CGPoint(x: 0.5, y: 1)// minuteHandView.center = view.center// self.view.addSubview(minuteHandView)// hourHandView.center = view.center// self.view.addSubview(hourHandView) // åˆ›å»ºCADisplayLinkï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°ä¸»çº¿ç¨‹ä¸­// let link = CADisplayLink(target: self, selector: #selector(ViewController.clockRunning))// link.add(to: RunLoop.main, forMode: .defaultRunLoopMode) åŠ ä¸ŠsecondHandView.layer.anchorPoint = CGPoint(x: 0.5, y: 1)åŽï¼š anchorPointçš„å®˜æ–¹æè¿°ï¼š Defines the anchor point of the layerâ€™s bounds rectangle. Animatable.You specify the value for this property using the unit coordinate space. The default value of this property is (0.5, 0.5), which represents the center of the layerâ€™s bounds rectangle. All geometric manipulations to the view occur about the specified point. For example, applying a rotation transform to a layer with the default anchor point causes the layer to rotate around its center. Changing the anchor point to a different location would cause the layer to rotate around that new point. anchorPointçš„å€¼åœ¨ (0,0) å’Œ (1,1)ä¹‹é—´ã€‚é»˜è®¤æ˜¯ (0.5, 0.5),ä»£è¡¨é”šç‚¹åœ¨ä¸­å¿ƒä½ç½®ã€‚ (0,0) å’Œ (1,1)åˆ†åˆ«ä»£è¡¨å·¦ä¸Šè§’å’Œå³ä¸Šè§’ã€‚ å…³äºŽCALayerçš„å±žæ€§positionå’ŒanchorPoint positionç±»ä¼¼UIView çš„center positionå†³å®šäº†layeråœ¨çˆ¶è§†å›¾ä¸Šçš„ä½ç½® anchorPointå†³å®šäº†positionåœ¨è‡ªèº«çš„ä½ç½®ã€‚All geometric manipulations to the view occur about the specified point. CADisplayLink ä¸Ž NSTimer CADisplayLinkç²¾ç¡®åº¦é«˜ NSTimerå ç”¨ç³»ç»Ÿèµ„æºè¾ƒå¤š ä»£ç å’Œå›¾ç‰‡ä½ç½®ï¼š 89-Animation/clock å‚è€ƒï¼š iOSåŠ¨ç”»ç³»åˆ—ä¹‹ä¸€ï¼šé€šè¿‡å®žæˆ˜å­¦ä¹ CALayerå’Œé€è§†çš„åŽŸç†ã€‚åšä¸€ä¸ªå¸¦æ—¶åˆ†ç§’æŒ‡é’ˆçš„æ—¶é’ŸåŠ¨ç”»(ä¸Š) iOSåŠ¨ç”»ç³»åˆ—ä¹‹äºŒï¼šé€šè¿‡å®žæˆ˜å­¦ä¹ CALayerå’Œé€è§†çš„åŽŸç†ã€‚åšä¸€ä¸ªå¸¦æ—¶åˆ†ç§’æŒ‡é’ˆçš„æ—¶é’ŸåŠ¨ç”»ã€‚åŒ…å«äº†OCå’ŒSwiftä¸¤ç§æºä»£ç (ä¸‹)]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOSåŠ¨ç”»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆè¯†Core MLï¼šå»ºç«‹ä¸€ä¸ªç®€å•çš„å›¾ç‰‡å†…å®¹è¯†åˆ«åº”ç”¨]]></title>
    <url>%2F2017%2Fintroducing-coreml.html</url>
    <content type="text"><![CDATA[Xcode 9 beta &amp; iOS11 beta &amp; Swift4 Core MLæ˜¯ä¸€ä¸ªèƒ½é›†æˆæœºå™¨å­¦ä¹ æ¨¡åž‹åˆ°appä¸­çš„æ¡†æž¶ã€‚ ä¸€ã€æ–°å»ºåˆå§‹é¡¹ç›® æ–°å»ºé¡¹ç›®CoreMLDemoï¼Œä»¥single-view application templateæ¨¡æ¿ å»ºç«‹å¦‚ä¸‹å¦‚ä¸‹UI äºŒã€å®žçŽ°ç…§ç›¸å’ŒèŽ·å–å›¾ç‰‡åº“åŠŸèƒ½ éµå®ˆä¸¤ä¸ªåè®®ï¼šclass ViewController: UIViewController, UINavigationControllerDelegate, UIImagePickerControllerDelegate { æ·»åŠ ä¸¤ä¸ªæŽ¥å£ï¼Œå¹¶å…³è”ã€‚ 12@IBOutlet var imageView: UIImageView!@IBOutlet var classifier: UILabel! å®žçŽ°ä¸¤ä¸ªAction 1234567891011121314151617181920@IBAction func camera(_ sender: Any) &#123; if !UIImagePickerController.isSourceTypeAvailable(.camera) &#123; return &#125; let cameraPicker = UIImagePickerController() cameraPicker.delegate = self cameraPicker.sourceType = .camera cameraPicker.allowsEditing = false present(cameraPicker, animated: true, completion: nil)&#125;@IBAction func openLibrary(_ sender: Any) &#123; let picker = UIImagePickerController() picker.allowsEditing = false picker.delegate = self picker.sourceType = .photoLibrary present(picker, animated: true)&#125; å®žçŽ°åè®®UIImagePickerControllerDelegateä¸­çš„æ–¹æ³•ï¼š 123func imagePickerControllerDidCancel(_ picker: UIImagePickerController) &#123; dismiss(animated: true, completion: nil)&#125; åœ¨Info.plistä¸­æ·»åŠ ðŸ“·ä½¿ç”¨è¯·æ±‚ï¼ŒPrivacy â€“ Camera Usage Description and Privacy ä¸‰ã€é›†æˆCore ML Data Model åˆ°Appleæœºå™¨å­¦ä¹ å®˜ç½‘ Machine Learningä¸‹è½½Core ML modelsï¼Œç›®å‰æœ‰6ä¸ªModelï¼Œè¯†åˆ«å›¾ç‰‡çš„ä½¿ç”¨Inception v3ã€‚ä¸‹è½½å¾—åˆ°ä¸€ä¸ªmlmodelç»“å°¾çš„æ–‡ä»¶ï¼Œç›´æŽ¥æ‹–åˆ°é¡¹ç›®ä¸­ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”modelåçš„swiftçš„ç±»æ–‡ä»¶ï¼Œå¯ä»¥ç›´æŽ¥åœ¨ä»£ç ä¸­ä½¿ç”¨ã€‚ åœ¨ViewController.swiftä¸­å¼•å…¥Core ML:import CoreML åˆå§‹Inceptionv3: 12345var model: Inceptionv3!override func viewWillAppear(_ animated: Bool) &#123; model = Inceptionv3()&#125; å®žçŽ°UIImagePickerControllerDelegateåè®®çš„imagePickerController(_:didFinishPickingMediaWithInfo)æ–¹æ³•ï¼š 12345678910111213141516171819202122232425262728293031323334func imagePickerController(_ picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : Any]) &#123; picker.dismiss(animated: true) classifier.text = &quot;Analyzing Image...&quot; guard let image = info[&quot;UIImagePickerControllerOriginalImage&quot;] as? UIImage else &#123; return &#125; UIGraphicsBeginImageContextWithOptions(CGSize(width: 299, height: 299), true, 2.0) image.draw(in: CGRect(x: 0, y: 0, width: 299, height: 299)) let newImage = UIGraphicsGetImageFromCurrentImageContext()! UIGraphicsEndImageContext() let attrs = [kCVPixelBufferCGImageCompatibilityKey: kCFBooleanTrue, kCVPixelBufferCGBitmapContextCompatibilityKey: kCFBooleanTrue] as CFDictionary var pixelBuffer : CVPixelBuffer? let status = CVPixelBufferCreate(kCFAllocatorDefault, Int(newImage.size.width), Int(newImage.size.height), kCVPixelFormatType_32ARGB, attrs, &amp;pixelBuffer) guard (status == kCVReturnSuccess) else &#123; return &#125; CVPixelBufferLockBaseAddress(pixelBuffer!, CVPixelBufferLockFlags(rawValue: 0)) let pixelData = CVPixelBufferGetBaseAddress(pixelBuffer!) let rgbColorSpace = CGColorSpaceCreateDeviceRGB() let context = CGContext(data: pixelData, width: Int(newImage.size.width), height: Int(newImage.size.height), bitsPerComponent: 8, bytesPerRow: CVPixelBufferGetBytesPerRow(pixelBuffer!), space: rgbColorSpace, bitmapInfo: CGImageAlphaInfo.noneSkipFirst.rawValue) //3 context?.translateBy(x: 0, y: newImage.size.height) context?.scaleBy(x: 1.0, y: -1.0) UIGraphicsPushContext(context!) newImage.draw(in: CGRect(x: 0, y: 0, width: newImage.size.width, height: newImage.size.height)) UIGraphicsPopContext() CVPixelBufferUnlockBaseAddress(pixelBuffer!, CVPixelBufferLockFlags(rawValue: 0)) imageView.image = newImage ä½¿ç”¨Core MLåœ¨ä¸Šé¢imagePickerController(_:didFinishPickingMediaWithInfo)æ–¹æ³•æœ€åŽæ·»åŠ ï¼š 1234guard let prediction = try? model.prediction(image: pixelBuffer!) else &#123; return&#125;classifier.text = &quot;I think this is a \(prediction.classLabel).&quot; çŽ°åœ¨å°±å¯è¿è¡Œè¯†åˆ«å›¾ç‰‡å†…å®¹äº†ï¼Œæˆ‘å·²å‡ ä¸ªç®€å•çš„åšäº†å®žéªŒï¼Œæ•ˆæžœè¿˜å¯ä»¥ï¼š èƒ½è¯†åˆ«ðŸ¶çš„ç§ç±»ï¼Œå“ˆå·´ç‹—pug ðŸŒåº”è¯¥ç›¸å¯¹è€Œè¨€ç®€å•ï¼š æœ‹å‹å®¶çš„çŒ«ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“çŒ«çš„ç§ç±»ï¼Œè¯†åˆ«ä¸ºæ³¢æ–¯çŒ«(Persian cat): è¿™ä¸ªæˆ‘å°±ä¸çŸ¥é“æ˜¯æ€Žä¹ˆè¯†åˆ«ä¸ºæµ“å’–å•¡(espresso)çš„äº†ðŸ¤” å½“ç„¶è¯†åˆ«ç›¸å·®æ¯”è¾ƒå¥‡æ€ªçš„ã€‚å°ç±³æ‰‹çŽ¯è¯†åˆ«æˆå¬è¯Šå™¨ï¼ˆstethoscopeï¼‰ðŸ˜¢ kindleè¯†åˆ«ä¸å‡ºðŸ˜¢ðŸ˜¢ðŸ˜¢ å››ã€Core MLå­¦ä¹ èµ„æºå®˜æ–¹æ–‡æ¡£ official Core ML documentation WWDC 2017ï¼š Introducing Core ML Core ML in Depth ä»£ç  CoreMLDemo ï¼ˆç”±äºŽInceptionv3.mlmodelæ¯”è¾ƒå¤§ï¼Œæˆ‘å°±æ²¡æœ‰ä¸Šä¼ åˆ°githubä¸Šï¼Œç›´æŽ¥åˆ° Machine Learningç„¶åŽæ‹–åˆ°é¡¹ç›®ä¸­å³å¯ï¼‰ å‚è€ƒï¼šIntroduction to Core ML: Building a Simple Image Recognition App]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>Core ML</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨githubå’Œhexoåˆ›å»ºå…è´¹çš„é™æ€ä¸ªäººåšå®¢ç½‘ç«™]]></title>
    <url>%2F2017%2Fgithub-hexo.html</url>
    <content type="text"><![CDATA[ä¹‹å‰åˆšå­¦ç¼–ç¨‹ï¼ŒæŽ¥è§¦PHPæ—¶ï¼Œå‡ºäºŽå­¦ä¹ çš„ç›®çš„ï¼Œå…´è‡´å‹ƒå‹ƒåœ°ä¹°äº†åŸŸåã€ä¸»æœºã€å­¦äº†Wordpressï¼Œæ‰¾äº†ä¸»é¢˜ï¼ŒæŠ˜è…¾äº†å¥½ä¹…å»ºäº†ä¸ªç½‘ç«™ï¼Œä¹Ÿå†™äº†ä¸€äº›æ–‡ç« ï¼Œç„¶åŽå°±æ²¡æœ‰ç„¶åŽäº†ï¼Œè¿™æ˜¯ä»Žå…¥é—¨åˆ°æ”¾å¼ƒç³»åˆ—çš„å…¸åž‹æ¡ˆä¾‹ã€‚å‰æ®µæ—¶é—´æ”¶åˆ°ä¸»æœºè¦åˆ°æœŸçš„é€šçŸ¥ï¼Œæ­£å¥½æˆ‘ä¹ŸæŽ¥è§¦åˆ°äº†ç®€ä¹¦ï¼Œæ”¯æŒmarkdownï¼Œæ„Ÿè§‰è›®å¥½ï¼Œå¹³å¸¸ä¹Ÿä¹ æƒ¯ä½¿ç”¨markdownæ ¼å¼è®°å½•ç¬”è®°ã€‚å°±è§‰å¾—ä¸å†ç»­è´¹ä¸»æœºäº†ï¼Œå°±ä¸»è¦ä½¿ç”¨ç®€ä¹¦ï¼Œä¸ªäººåšå®¢å°±ä½¿ç”¨githubå’Œhexoè¿™ç§æ”¯æŒmarkdownç”Ÿæˆé™æ€ç½‘é¡µå½¢å¼å°±è¡Œäº†ã€‚ å·²ç»æœ‰å¾ˆå¤šå°ä¼™ä¼´è¿™æ ·æ­å»ºè‡ªå·±çš„ä¸ªäººåšå®¢ï¼Œå¹¶å†™äº†ç›¸å…³æ–‡ç« ï¼Œè¿™è¾¹æˆ‘å°±åšä¸€ä¸ªæ­å»ºè¿‡ç¨‹ä¸­çš„ç®€å•è®°å½•ã€‚å¼€å§‹ä¹‹å‰éœ€è¦å®‰è£…gitå’Œnodejsï¼Œæœ‰githubè´¦å·ï¼Œç¨‹åºå‘˜å°ä¼™ä¼´ä¸€èˆ¬éƒ½ä¼šæœ‰äº†ï¼Œæˆ‘å°±ä¸å•°å—¦äº†ã€‚ å…³äºŽGitHub PagesGitHub PagesåŽŸæœ¬æ˜¯ä¸ºæ‰˜ç®¡åœ¨githubä¸Šçš„é¡¹ç›®æä¾›ä»‹ç»é¡µé¢çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œéžå¸¸é€‚åˆæ‰˜ç®¡ä¸€äº›åŠŸèƒ½ç®€å•æˆ–è€…æ˜¯é™æ€é¡µé¢çš„ç½‘ç«™ã€‚è€ƒè™‘åˆ°è®¿é—®é€Ÿåº¦ï¼Œå¯ä»¥è€ƒè™‘å›½å†…çš„codingã€‚ æŒ‰ç…§GitHub Pagesæ­¥éª¤å»ºç«‹è‡ªå·±çš„GitHub Pagesåº“ã€‚ hexohexoæ–‡æ¡£å¾ˆè¯¦ç»†ï¼Œä¹Ÿæœ‰ä¸­æ–‡ï¼Œå¾ˆæ–¹ä¾¿ã€‚ å®‰è£… hexonpm install hexo-cli -g å»ºç«™ 123$ hexo init &lt;folder&gt;$ cd &lt;folder&gt;$ npm install æ–°ç”Ÿæˆçš„ç›®å½•ç»“æž„ä¸ºï¼š 12345678910111213141516171819 . â”œâ”€â”€ _config.yml â”œâ”€â”€ node_modules â”œâ”€â”€ package.json â”œâ”€â”€ scaffolds â”œâ”€â”€ source â””â”€â”€ themes``` + `_config.yml` æ˜¯ç½‘ç«™çš„[ç«™ç‚¹é…ç½®æ–‡ä»¶](https://hexo.io/zh-cn/docs/configuration.html) + `node_modules` æ˜¯nodejsåº“æ–‡ä»¶ç›®å½•ï¼Œå°±æ˜¯`npm install`å‘½ä»¤å®‰è£…çš„æ–‡ä»¶ä½ç½® + `package.json`æ˜¯ç¨‹åºä¿¡æ¯ + `scaffolds` æ–°å»ºæ–‡ç« çš„æ¨¡æ¿ + `source` å­˜æ”¾ç”¨æˆ·èµ„æºçš„åœ°æ–¹ï¼Œ404ã€faviconã€CNAME ç­‰å µåœ¨æ­¤å¤„ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸»è¦å·¥ä½œçš„åœ°æ–¹ã€‚å…¶ä¸­ï¼Œ`_posts`æ–‡ä»¶æ˜¯å†™æ–‡ç« åœ°æ–¹ï¼Œé™¤` _posts`æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œå¼€å¤´å‘½åä¸º _ (ä¸‹åˆ’çº¿)çš„æ–‡ä»¶ / æ–‡ä»¶å¤¹å’Œéšè—çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚Markdown å’Œ HTML æ–‡ä»¶ä¼šè¢«è§£æžå¹¶æ”¾åˆ° public æ–‡ä»¶å¤¹ï¼ˆä¹‹åŽç”Ÿæˆï¼‰ï¼Œè€Œå…¶ä»–æ–‡ä»¶ä¼šè¢«æ‹·è´è¿‡åŽ»ã€‚ + `themes` æ˜¯ä¸»é¢˜å­˜å‚¨åœ°æ–¹ã€‚- é…ç½®ç½‘ç«™ä¿¡æ¯`_config.yml` æ–‡ä»¶æä¾›äº†å¾ˆå¤šé…ç½®ï¼Œè¯¦ç»†å¯çœ‹å®˜ç½‘[é…ç½®ä¿¡æ¯](https://hexo.io/zh-cn/docs/configuration.html)ã€‚å…ˆé…ç½®ä¸¤æ–¹é¢çš„ï¼Œä¹‹åŽéœ€è¦å†é…ç½®ã€‚ + ç½‘ç«™åŸºæœ¬ä¿¡æ¯ Site title: æ¬£æ¬£å‘æˆŽ subtitle: AndyRonâ€™s Blog description: Just for fun. author: AndyRon language: zh-Hans timezone: Asia/Shanghai 12+ éƒ¨ç½²ï¼Œæ³¨æ„å­—æ®µï¼Œ`repo`å°±æ˜¯ä¸ªäººGitHub Pagesçš„åœ°å€åº“ã€‚ DeploymentDocs: https://hexo.io/docs/deployment.html deploy: type: git repo: https://github.com/andyRon/andyRon.github.io.git branch: master 123456789101112131415161718192021222324252627282930313233343536- æ–°å»ºæ–‡ç«  `hexo new [layout] &lt;title&gt;` ï¼š ä¹Ÿå°±æ˜¯åœ¨`source/_posts/`ä¸‹æŒ‰ç…§æ¨¡æ¿æ–°å»ºäº†ä¸€ä¸ªmarkdownæ–‡ä»¶ï¼Œlayoutå°±æ˜¯æŒ‡`scaffolds`æ–‡ä»¶å¤¹ä¸­çš„æ¨¡æ¿ï¼Œä¹Ÿå¯ä»¥ç›´æŽ¥åœ¨`_posts`ä¸­æ–°å»ºmarkdownæ–‡ä»¶ã€‚- åœ¨æœ¬åœ°æœåŠ¡å™¨æµ‹è¯•`hexo server` ï¼šåœ¨æµè§ˆå™¨æ‰“å¼€http://localhost:4000/ ï¼Œå°±å¯ä»¥æŸ¥çœ‹- ç”Ÿæˆé™æ€æ–‡ä»¶`hexo generate`ï¼ˆ`hexo g`ï¼‰ ï¼šè¿™ä¸ªå‘½ä»¤ä¼šæ–°å»ºä¸€ä¸ª`public`æ–‡ä»¶å¤¹ï¼Œåœ¨å…¶ä¸­ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œè¿™ä¸ªç›®å½•ç›¸å½“äºŽç½‘ç«™çš„æ ¹ç›®å½•ã€‚- å‘å¸ƒåˆ°github`hexo deploy`ï¼ˆ`hexo d`ï¼‰ï¼šæŠŠ`public`æ–‡ä»¶å¤¹å†…çš„å†…å®¹ä¸Šä¼ åˆ°githubä¸Šã€‚çŽ°åœ¨è®¿é—®https://yourname.github.io (æˆ‘çš„æ˜¯https://andyron.github.io )å°±èƒ½è®¿é—®åˆšå»ºç«‹çš„ç½‘ç«™äº†ã€‚å¦‚æžœå‡ºçŽ°[**ERROR Deployer not found**](https://github.com/hexojs/hexo/issues/1040)çš„é—®é¢˜ï¼Œå¯é€šè¿‡`npm install hexo-deployer-git --save`è§£å†³ã€‚- å…¶ä»–hexoå‘½ä»¤`hexo clean` ï¼šåˆ é™¤publicæ–‡ä»¶å¤¹å†…å®¹ï¼Œå’Œæ¸…ç†ä¸€äº›ç¼“å­˜ã€‚è°ƒè¯•ç½‘ç«™å¯ä»¥ä½¿ç”¨ã€‚### åŸŸåç»‘å®šï¼ˆå¦‚æœ‰å¿…è¦ï¼‰- åœ¨`source/`ä¸‹æ·»åŠ æ–‡ä»¶`CNAME`ï¼Œå†…å®¹åªä¸ºå¦‚`andyron.com`ï¼ˆæ²¡æœ‰httpå’Œwwwï¼‰- éƒ¨ç½²åˆ°githubä¸Šï¼š`hexo generate`ï¼Œ`hexo deploy`- åŸŸåè§£æžã€‚ä¸åŒçš„åŸŸåæœåŠ¡å•†å¤§åŒå°å¼‚ï¼Œæˆ‘çš„æ˜¯é˜¿é‡Œäº‘ï¼Œä¸ºäº†é˜²æ­¢è§£æžå‡ºé—®é¢˜ï¼Œæˆ‘æŠŠå…¶ä»–é»˜è®¤ä¸€äº›é‚®ä»¶è§£æžç­‰éƒ½åˆ äº†ï¼Œå°±æ·»åŠ ä¸¤ä¸ªï¼š![](http://upload-images.jianshu.io/upload_images/1678135-248c8a30a3115f53.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)å¯èƒ½éœ€è¦ç­‰ä¸€çŸ­æ—¶é—´ï¼ˆ10åˆ†é’Ÿä»¥ä¸Šï¼‰ï¼Œå°±å¯ä»¥ç”¨ http://andyron.com è®¿é—®äº†ã€‚### hexoä¸»é¢˜hexoæœ‰å¾ˆå¤šä¸»é¢˜ï¼Œå¾ˆå¤šç½‘å‹ä¸ºhexoè´¡çŒ®äº†å¾ˆå¤šä¸»é¢˜ï¼Œå¯åˆ°[ä¸»é¢˜](https://hexo.io/themes/)ä¸Šå¯»æ‰¾ã€‚æˆ‘é€‰æ‹©çš„æ˜¯[next](https://github.com/iissnan/hexo-theme-next)ä¸»é¢˜ï¼Œè¿™ä¸ªä½¿ç”¨ä¸»é¢˜ç”¨çš„äººæ¯”è¾ƒå¤šï¼Œ[æ–‡æ¡£](http://theme-next.iissnan.com/getting-started.html)å¾ˆå…¨ï¼Œä¹Ÿæ¯”è¾ƒç®€æ´ã€‚ä¸»é¢˜çš„ä½¿ç”¨éžå¸¸ç®€å•ï¼š - å°†ä¸»é¢˜æ–‡ä»¶æ‹·è´è‡³ç«™ç‚¹ç›®å½•çš„`themes` ç›®å½•ä¸‹ - ä¿®æ”¹**ç«™ç‚¹é…ç½®æ–‡ä»¶**ï¼š `theme: ä¸»é¢˜å`ä¸»é¢˜çš„ä¸€äº›è®¾ç½®ï¼š- è®¾ç½®RSS + å®‰è£… [hexo-generator-feed](https://github.com/hexojs/hexo-generator-feed)æ’ä»¶ï¼Œåœ¨`hexo init`åˆå§‹åŒ–çš„ç›®å½•ä¸‹æ‰§è¡Œ`npm install hexo-generator-feed --save` + åœ¨**ç«™ç‚¹é…ç½®æ–‡ä»¶**æ·»åŠ ï¼š feed: type: atom path: atom.xml limit: 20 hub: content: 1234567 + `hexo generate`- è®¾ç½®æœç´¢æœ‰å¾ˆå¤šæœç´¢æ–¹å¼ï¼Œè¿™åªæ˜¯ä¸€ç§ç®€å•æ–¹å¼ + å®‰è£…`hexo-generator-searchdb`ï¼Œåœ¨`hexo`çš„æ ¹ç›®å½•ä¸‹ï¼š`$ npm install hexo-generator-searchdb --save` + åœ¨**ç«™ç‚¹é…ç½®æ–‡ä»¶**æ·»åŠ ï¼š search: path: search.xml field: post format: html limit: 10000 12+ åœ¨**ä¸»é¢˜é…ç½®æ–‡ä»¶**ï¼ˆ`themes/next/_config.yml`ï¼‰ä¿®æ”¹ï¼š local_search: enable: true ``` æ·»åŠ æ ‡ç­¾é¡µé¢ $hexo new page tagsï¼šç»“æžœç”Ÿæˆæ–°æ–‡ä»¶å¤¹source/tags/ï¼Œå¹¶åœ¨å…¶ä¸­æœ‰ä¸€ä¸ªindex.mdã€‚ åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶çš„menuä¸­æ‰“å¼€æ ‡ç­¾ æ·»åŠ åˆ†ç±»é¡µé¢ $hexo new page categoriesï¼šç»“æžœç”Ÿæˆæ–°æ–‡ä»¶å¤¹source/categoriesï¼Œå¹¶åœ¨å…¶ä¸­æœ‰ä¸€ä¸ªindex.mdã€‚ åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶çš„menuä¸­æ‰“å¼€åˆ†ç±»ã€‚ æ·»åŠ å…³äºŽæˆ‘é¡µé¢ $hexo new page aboutï¼šç»“æžœç”Ÿæˆæ–°æ–‡ä»¶å¤¹source/aboutï¼Œå¹¶åœ¨å…¶ä¸­æœ‰ä¸€ä¸ªindex.mdï¼Œåœ¨index.mdä¸­ç›´æŽ¥ç¼–å†™å…³äºŽæˆ‘çš„å†…å®¹ã€‚ åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶çš„menuä¸­æ‰“å¼€åˆ†ç±»ã€‚ æ·»åŠ ç™¾åº¦åˆ†æž æ³¨å†Œ ç™¾åº¦ç»Ÿè®¡ï¼Œå¹¶æ·»åŠ è‡ªå·±çš„ç½‘ç«™ å¤åˆ¶ hm.js? åŽé¢é‚£ä¸²ç»Ÿè®¡è„šæœ¬ id åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å­—æ®µbaidu_analytics`ï¼ŒèŒä½ä¸Šé¢çš„è„šæœ¬id å‚è€ƒhttp://blog.csdn.net/zuoziji416/article/details/53204478]]></content>
      <tags>
        <tag>github</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS ä¼ æ„Ÿå™¨(ä¸€)ï¼šæ€»çš„ä»‹ç»å’Œè·ç¦»ä¼ æ„Ÿå™¨]]></title>
    <url>%2F2017%2Fios-sensor-1.html</url>
    <content type="text"><![CDATA[å…³äºŽä¼ æ„Ÿå™¨ï¼ˆSensorï¼‰ï¼ŒAppleå®˜æ–¹å¥½åƒå¹¶æ²¡æœ‰ä¸“é—¨åˆ—å‡ºæ¥ä»‹ç»è¿‡ï¼Œæˆ‘åªèƒ½ä»Žå‰è¾ˆçš„æ–‡ç« å¯»æ‰¾ï¼Œå¾ˆå¤šæ–‡ç« ä¸­éƒ½ç»™iOSä¼ æ„Ÿå™¨è¿›è¡Œè¿‡å¾ˆè¯¦ç»†çš„åˆ†ç±»ä»‹ç»ï¼Œä½†æœ‰çš„ä¼ æ„Ÿå™¨åªæ˜¯æœ‰è¿‡ä»‹ç»ï¼Œæ²¡æœ‰ä»‹ç»ä½¿ç”¨æ–¹æ³•æˆ–APIï¼Œå½“ç„¶ä¹Ÿæœ‰å¯èƒ½æ˜¯æˆ‘æ²¡æœç´¢åˆ°ï¼Œæ¯”å¦‚æ¹¿åº¦ä¼ æ„Ÿå™¨å¾ˆå¤šæ–‡ç« éƒ½æåˆ°ï¼Œä½†è¯¦ç»†ä½¿ç”¨æ–¹å¼å°±æœªæ›¾çœ‹åˆ°è¿‡ï¼Œè¿˜æœ‰è¿™è¾¹çš„æ¹¿åº¦ä¼ æ„Ÿå™¨æ˜¯æŒ‡iPhoneå†…éƒ¨çš„ï¼Ÿè¿˜æ˜¯æŒ‡iPhoneæ‰€åœ¨å¤–éƒ¨çŽ¯å¢ƒçš„ï¼Ÿ iPhoneçš„ä¼ æ„Ÿå™¨æ˜¯ç»è¿‡é•¿æ—¶é—´ä¸åœçš„å˜åŒ–å’Œæ”¹è¿›çš„ï¼Œå› ä¸ºä¼ æ„Ÿå™¨ä¸€å¬åå­—å°±çŸ¥é“è¿™ç§å˜åŒ–å’Œæ”¹è¿›åä¹‹å…«ä¹æ˜¯è¦ä¸Žç¡¬ä»¶æœ‰å…³ç³»çš„ã€‚çŸ¥ä¹Žä¸­æœ‰ä¸€éæ–‡ç« ä»‹ç»çš„å¾ˆè¯¦ç»†ï¼ŒiPhoneè¿™åå¹´åœ¨ä¼ æ„Ÿå™¨ä¸Šçš„æ¼”è¿›- çŸ¥ä¹Žä¸“æ ã€‚ iOSä¸­ä¼ æ„Ÿå™¨åˆ†ç±»æˆ‘å§‘ä¸”æŒ‰ç…§æˆ‘æŸ¥çœ‹çš„èµ„æ–™å¯¹iOSä¼ æ„Ÿå™¨è¿›è¡Œä¸€ä¸ªä¸ç²¾ç¡®åˆ†ç±»ã€‚ ä¼ æ„Ÿå™¨ç±»åž‹ è¯´æ˜Ž åŠ é€Ÿè®¡ Core Motionï¼Œæ„Ÿåº”è®¾å¤‡çš„è¿åŠ¨ï¼ˆæ‘‡ä¸€æ‘‡ã€è®¡æ­¥å™¨ï¼‰ é™€èžºä»ª Core Motionï¼Œæ„Ÿåº”è®¾å¤‡çš„æŒæ¡æ–¹å¼ï¼ˆèµ›è½¦ç±»æ¸¸æˆï¼‰ æ­¥æ•°è®¡ Core Motion æ°”åŽ‹è®¡ Core Motion ç£åŠ›è®¡ Core Motion è·ç¦»ä¼ æ„Ÿå™¨ æ„Ÿåº”æ˜¯å¦æœ‰å…¶ä»–ç‰©ä½“é è¿‘è®¾å¤‡å±å¹•ï¼ˆæ‰“ç”µè¯è‡ªåŠ¨å±ï¼‰ çŽ¯å¢ƒå…‰çº¿ä¼ æ„Ÿå™¨ æ„Ÿåº”å‘¨è¾¹çŽ¯å¢ƒå…‰çº¿çš„å¼ºå¼±ï¼ˆè‡ªåŠ¨è°ƒèŠ‚å±å¹•äº®åº¦ï¼‰ å†…éƒ¨æ¸©åº¦ä¼ æ„Ÿå™¨ æ„Ÿåº”è®¾å¤‡å†…éƒ¨çš„æ¸©åº¦ï¼ˆæé†’ç”¨æˆ·é™æ¸©ï¼Œé˜²æ­¢æŸä¼¤è®¾å¤‡ï¼‰ æ¹¿åº¦ä¼ æ„Ÿå™¨ æ„Ÿåº”è®¾å¤‡æ˜¯å¦è¿›æ°´ï¼ˆæ–¹ä¾¿ç»´ä¿®äººå‘˜ï¼‰ è·ç¦»ä¼ æ„Ÿå™¨å’Œå…‰çº¿ä¼ æ„Ÿå™¨çŸ¥ä¹ŽçŸ¥å‹ Hi-iD çš„ç­”æ¡ˆä»‹ç»è¿‡è¿™ä¸¤ä¸ªä¼ æ„Ÿå™¨çš„å…³ç³»ï¼Œæœ¬äººç®€å•æ€»ç»“å¦‚ä¸‹ï¼š iPhone 5/5s/6ä¹‹åŽå…‰çº¿/è·ç¦»æ„Ÿåº”å™¨å°±æ˜¯iPhoneé¡¶éƒ¨ä¸­å¿ƒä¸€ä¸ªå­” å…‰çº¿ä¼ æ„Ÿå™¨å’Œè·ç¦»ä¼ æ„Ÿå™¨æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„ä¼ æ„Ÿå™¨ï¼Œä½†ä¸¤è€…éƒ½æ˜¯å¯¹å…‰ä½œå‡ºååº”ã€‚ è·ç¦»ä¼ æ„Ÿå™¨æ˜¯åŸºäºŽçº¢å¤–å…‰ï¼Œè·ç¦»ä¼ æ„Ÿå™¨è‡ªèº«å‘å°„å‡ºçš„çº¢å¤–å…‰ï¼Œç»å¤–ç•Œåå°„åŽæŠ˜å›žçš„çº¢å¤–å…‰è¢«è·ç¦»ä¼ æ„Ÿå™¨è¿›è¡Œè¯†åˆ«åˆ¤æ–­ï¼Œæ‰€ä»¥è·ç¦»ä¼ æ„Ÿå™¨ä¼šæœ‰ä¸¤ä¸ªå•å…ƒï¼ˆåå°„å’ŒæŽ¥æ”¶ï¼‰ è·ç¦»ä¼ æ„Ÿå™¨çš„ä½¿ç”¨è·ç¦»ä¼ æ„Ÿå™¨çš„ä½¿ç”¨çš„ä½¿ç”¨ç›¸å¯¹ç®€å•ï¼š1234567891011121314override func viewDidLoad() &#123; super.viewDidLoad() UIDevice.current.isProximityMonitoringEnabled = true NotificationCenter.default.addObserver(self, selector: #selector(ViewController.sensorStateChange(notification:)), name: Notification.Name.UIDeviceProximityStateDidChange, object: nil) &#125; @objc func sensorStateChange(notification: NotificationCenter) &#123; if UIDevice.current.proximityState == true &#123; print(&quot;æŽ¥è¿‘&quot;) &#125; else &#123; print(&quot;è¿œç¦»&quot;) &#125; &#125; çŽ°åœ¨å¯¹iPhoneé¡¶éƒ¨ä¸­å¿ƒä¸€ä¸ªå­”è¿›è¡Œé®æŒ¡ï¼Œå°±èƒ½æ„Ÿå—çš„è·ç¦»ä¼ æ„Ÿå™¨ã€‚ Core MotionCore Motionæ˜¯å…³äºŽaccelerometers(åŠ é€Ÿè®¡), gyroscopes(é™€èžºä»ª), pedometers(æ­¥æ•°è®¡), magnetometers( ç£åŠ›è®¡), and barometers(æ°”åŽ‹è®¡)ç­‰5ä¸ªä¼ æ„Ÿå™¨ä½¿ç”¨çš„æ¡†æž¶ï¼Œ æš‚æ—¶å°±æŒ‰ç…§å­—é¢æ„æ€ç¿»è¯‘æˆæ ¸å¿ƒè¿åŠ¨æ¡†æž¶ã€‚å®˜æ–¹æ–‡æ¡£çš„ä»‹ç»ï¼š Core Motion reports motion- and environment-related data from the onboard hardware of iOS devices, including from the accelerometers(åŠ é€Ÿè®¡), gyroscopes(é™€èžºä»ª), pedometers(æ­¥æ•°è®¡), magnetometers( ç£åŠ›è®¡), and barometers(æ°”åŽ‹è®¡). You use this framework to access hardware-generated data so that you can use it in your app. For example, a game might use accelerometer and gyroscope data to control onscreen game behavior. ä¹‹åŽçš„æ–‡ç« å°±å­¦ä¹ Core Motionçš„ä½¿ç”¨ã€‚ðŸ˜‹ å‚è€ƒï¼š1 https://www.zhihu.com/question/25526443/answer/310408872 iPhoneè¿™åå¹´åœ¨ä¼ æ„Ÿå™¨ä¸Šçš„æ¼”è¿›- çŸ¥ä¹Žä¸“æ 3 iOSå¼€å‘ä¹‹ä¼ æ„Ÿå™¨4 æ‰’ä¸€æ‰’iPhone6çš„æ‰‹æœºä¼ æ„Ÿå™¨5 éžå…¸åž‹æŠ€æœ¯å®… çš„ä¼ æ„Ÿå™¨ç³»åˆ—æ–‡ç«  iOSä¼ æ„Ÿå™¨ï¼šå®žçŽ°ä¸€ä¸ªéšå±å¹•æ—‹è½¬çš„å›¾ç‰‡]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>ä¼ æ„Ÿå™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 13ï¼šæ‰‹åŠ¿å¤„ç†]]></title>
    <url>%2F2017%2Fios-tutorial-13.html</url>
    <content type="text"><![CDATA[iOSæ‰‹åŠ¿å¤„ç†ç”±UIGestureRecognizeræŽ§åˆ¶ï¼Œä¸åŒæ‰‹åŠ¿æœ‰è¿™ä¸ªç±»çš„ä¸åŒå­ç±»å¤„ç†ï¼Œä¸åŒæ‰‹åŠ¿å¤„ç†æœ‰ä¸åŒçš„ç›¸å…³å±žæ€§ã€‚ å­ç±» æè¿° UITapGestureRecognizer ç‚¹å‡»æ‰‹åŠ¿ UIPanGestureRecognizer è·Ÿç€æ‰‹ç§»åŠ¨æ‰‹åŠ¿ UIPinchGestureRecognizer ç¼©æ”¾æ‰‹åŠ¿ UIRotationGestureRecognizer æ—‹è½¬æ‰‹åŠ¿ UISwipeGestureRecognizer è½»æ‰«æ‰‹åŠ¿ UILongPressGestureRecognizer é•¿æŒ‰æ‰‹åŠ¿ UIScreenEdgePanGestureRecognizer å±å¹•è¾¹ç¼˜æ»‘åŠ¨æ‰‹åŠ¿ æ‰‹åŠ¿å¤„ç†çš„æ­¥éª¤ä¸€èˆ¬ï¼š åˆå§‹åŒ–æ‰‹åŠ¿ï¼Œå¹¶æ·»åŠ åˆ°éœ€è¦æ‰‹åŠ¿çš„Viewä¸­ æ·»åŠ æ‰‹åŠ¿å›žè°ƒæ–¹æ³• UITapGestureRecognizerå±žæ€§numberOfTapsRequiredè¡¨ç¤ºç‚¹å‡»æ¬¡æ•°ï¼Œå±žæ€§numberOfTouchesRequiredè¡¨ç¤ºç‚¹å‡»æ‰‹æŒ‡æ•°ã€‚12345678910111213141516171819202122var isChange = false...let tap = UITapGestureRecognizer(target: self, action: #selector(ViewController.tap(tap:)))tap.numberOfTapsRequired = 2...imageView.addGestureRecognizer(tap)...@objc func tap(tap: UITapGestureRecognizer) &#123; let center = imageView.center if isChange &#123; imageView.frame.size.width /= 2 imageView.frame.size.height /= 2 imageView.center = center isChange = false &#125; else &#123; imageView.frame.size.width *= 2 imageView.frame.size.height *= 2 imageView.center = center isChange = true &#125;&#125; UIPanGestureRecognizer1let pan = UIPanGestureRecognizer(target: self, action: #selector(ViewController.pan(pan:))) 12345678910@objc func pan(pan: UIPanGestureRecognizer) &#123; if pan.state == .began || pan.state == .changed &#123; // ç§»åŠ¨åŽçš„å˜åŒ–ï¼ˆå˜åŒ–å€¼ç±»ä¼¼å‘é‡ï¼‰ let translation = pan.translation(in: imageView.superview) print(translation) imageView.center = CGPoint(x: imageView.center.x + translation.x, y: imageView.center.y + translation.y) // viewç§»åŠ¨åŽï¼ŒæŠŠä¸Šä¸€æ­¥çš„ç§»åŠ¨å€¼å˜ä¸º0ï¼Œå¦åˆ™ç§»åŠ¨å€¼ä¸ºé€’å¢ž pan.setTranslation(CGPoint.zero, in: imageView.superview) &#125;&#125; UIRotationGestureRecognizerlet rotation = UIRotationGestureRecognizer(target: self, action: #selector(ViewController.rotation(rotation:))) 12345@objc func rotation(rotation: UIRotationGestureRecognizer) &#123; if rotation.state == .began || rotation.state == .changed &#123; imageView.transform = CGAffineTransform(rotationAngle: rotation.rotation) &#125;&#125; UISwipeGestureRecognizerlet swipe = UISwipeGestureRecognizer(target: self, action: #selector(ViewController.swipe(swipe:))) swipe.direction = .up swipe.numberOfTouchesRequired = 3 123@objc func swipe(swipe: UISwipeGestureRecognizer) &#123; print(&quot;æ‰«çš„æ–¹å‘ï¼š\(swipe.direction),æ‰«çš„æ‰‹æŒ‡æ•°ï¼š\(swipe.numberOfTouchesRequired)&quot;)&#125; UILongPressGestureRecognizernumberOfTouchesRequired é•¿æŒ‰çš„æŒ‡å¤´æ•°minimumPressDuratio é•¿æŒ‰æœ€å°æ—¶é—´ï¼ˆç§’ï¼‰ let long = UILongPressGestureRecognizer(target: self, action: #selector(ViewController.long(long:))) long.numberOfTouchesRequired = 2 long.minimumPressDuration = 1 123@objc func long(long: UILongPressGestureRecognizer) &#123; print(&quot;é•¿æŒ‰æ‰‹åŠ¿ï¼Œé•¿æŒ‰å­—å¤´æ•°ä¸º\(long.numberOfTouchesRequired)&quot;)&#125; UIScreenEdgePanGestureRecognizerlet screenEdge = UIScreenEdgePanGestureRecognizer(target: self, action: #selector(ViewController.screenEdage(screenEdage:))) screenEdge.edges = .left 123@objc func screenEdage(screenEdage: UIScreenEdgePanGestureRecognizer) &#123; print(&quot;å±å¹•è¾¹ç¼˜æ»‘åŠ¨æ‰‹åŠ¿ï¼š\(screenEdage.edges)&quot;)&#125; è¯¦ç»†ä»£ç ï¼š GestureDemo]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>æ‰‹åŠ¿</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 12ï¼šè§†é¢‘èƒŒæ™¯]]></title>
    <url>%2F2017%2Fios-tutorial-12.html</url>
    <content type="text"><![CDATA[æ–°å»ºé¡¹ç›® BackgroundVideoDemo æ–°å»ºBackgroundVideo.swiftæ–‡ä»¶ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990import Foundationimport AVKitimport AVFoundationenum BackgroundVideoErrors: Error &#123; case invalidVideo&#125;class BackgroundVideo &#123; var isMuted = true private var player : AVPlayer? private var videoURL: URL? private var viewController: UIViewController? private var hasBeenUsed: Bool = false init (on viewController: UIViewController, withVideoURL URL: String) &#123; self.viewController = viewController // parse the video string to split it into name and extension let videoNameAndExtension:[String]? = URL.characters.split&#123;$0 == &quot;.&quot;&#125;.map(String.init) if videoNameAndExtension!.count == 2 &#123; if let videoName = videoNameAndExtension?[0] , let videoExtension = videoNameAndExtension?[1] &#123; if let url = Bundle.main.url(forResource: videoName, withExtension: videoExtension) &#123; self.videoURL = url // initialize our player with our fetched video url self.player = AVPlayer(url: self.videoURL!) &#125; else &#123; print(BackgroundVideoErrors.invalidVideo) &#125; &#125; &#125; else &#123; print(&quot;Wrong video name format&quot;) &#125; &#125; deinit&#123; if self.hasBeenUsed &#123; NotificationCenter.default.removeObserver(self, name: .AVPlayerItemDidPlayToEndTime, object: nil) NotificationCenter.default.removeObserver(self, name: .UIApplicationWillEnterForeground, object: nil) &#125; &#125; public func setUpBackground()&#123; self.player?.actionAtItemEnd = .none self.player?.isMuted = isMuted //add the video to your view .. let loginView: UIView = self.viewController!.view//get our view controllers view let playerLayer = AVPlayerLayer(player: self.player) playerLayer.videoGravity = AVLayerVideoGravityResizeAspectFill // preserve aspect ratio and resize to fill screen playerLayer.zPosition = -1 // set it&apos;s possition behined anything in our view playerLayer.frame = loginView.frame // set our player frame to our view&apos;s frame loginView.layer.addSublayer(playerLayer) // prevent video from disturbing audio services from other apps do &#123; try AVAudioSession.sharedInstance().setCategory(AVAudioSessionCategoryAmbient) &#125; catch &#123; print(&quot;failed setting AVAudioSession Category to AVAudioSessionCategoryAmbient&quot;) &#125; self.player?.play() // start the video /// å‘é€šçŸ¥ä¸­å¿ƒå‘é€è§†é¢‘ç»“æŸåŽå†æ¬¡ä»Žå¤´æ’­æ”¾ NotificationCenter.default.addObserver(self, selector: #selector(self.loopVideo), name: .AVPlayerItemDidPlayToEndTime, object: nil) // è§†é¢‘è¿›å…¥ForegroundåŽä»Žå¤´æ’­æ”¾ NotificationCenter.default.addObserver(self, selector: #selector(self.loopVideo), name: .UIApplicationWillEnterForeground, object: nil) self.hasBeenUsed = true &#125; // å¾ªçŽ¯æ’­æ”¾è§†é¢‘ @objc private func loopVideo() &#123; self.player?.seek(to: kCMTimeZero) self.player?.play() &#125; &#125; åœ¨æ‰€éœ€è¦çš„è§†å›¾æŽ§åˆ¶å™¨ä¸­å®šä¹‰å˜é‡var backgroundPlayer : BackgroundVideo?ï¼Œç„¶åŽå†åœ¨viewDidLoadä¸­å®šä¹‰ï¼š 12345678910 override func viewDidLoad() &#123; super.viewDidLoad() let backgroundPlayer = BackgroundVideo(on: self, withVideoURL: &quot;test.mp4&quot;) //æ˜¯å¦æ‰“å¼€é™éŸ³// backgroundPlayer?.isMuted = false backgroundPlayer.setUpBackground() &#125; è¯¦ç»†ä»£ç ï¼š BackgroundVideoDemo å‚è€ƒï¼šBackgroundVideoiOS]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 9ï¼šæœ¬åœ°è§†é¢‘æ’­æ”¾]]></title>
    <url>%2F2017%2Fios-tutorial-9.html</url>
    <content type="text"><![CDATA[æ–°å»ºé¡¹ç›®PlayLocalVideo åœ¨IBä¸­ä½¿View ControllerEmbed In &gt; Navigation Controller,å¹¶åœ¨View Controller**ä¸­æ·»åŠ UITableViewå’ŒUITableViewCellã€‚ åœ¨ä¸Šé¢çš„UITableViewCellçš„ä¸­æ·»åŠ ä¸€ä¸ªUIImageViewä½œä¸ºè§†é¢‘çš„é¢„è§ˆå›¾ã€ä¸€ä¸ªUIButtonä½œä¸ºå¼€å§‹æ’­æ”¾ã€ä¸¤ä¸ªUILabelåˆ†åˆ«ç”¨äºŽæ˜¾ç¤ºè§†é¢‘çš„åç§°å’Œæ¥æºã€‚å¹¶ä¿®æ”¹ä¸€å®šæ ·å¼å’Œæ·»åŠ ä¸€å®šçº¦æŸ æ·»åŠ å‡ å¼ å›¾ç‰‡å’Œä¸€ä¸ªè§†é¢‘ æ·»åŠ ä¸€ä¸ªcellçš„ç±»ï¼Œå¹¶æ·»åŠ ä¸‰ä¸ªæŽ¥å£ã€‚ 12345class VideoCell: UITableViewCell &#123; @IBOutlet var previewImageView: UIImageView! @IBOutlet var nameLabel: UILabel! @IBOutlet var sourceLabel: UILabel! æ·»åŠ ä¸€ä¸ªvideoæžšä¸¾ï¼Œç”¨æ¥å­˜å‚¨è§†é¢‘ä¿¡æ¯ã€‚ 12345struct video &#123; let image: String let title: String let source: String&#125; ä½¿ViewControllerç¬¦åˆtable viewä»£ç†å’Œæ•°æ®çš„åè®®ï¼Œå¹¶å®žçŽ°æ‰€éœ€æ–¹æ³•ï¼š 12345678910111213141516171819202122232425func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -&gt; CGFloat &#123; return 220 &#125; func numberOfSectionsInTableView(tableView: UITableView) -&gt; Int &#123; return 2 &#125; func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123; return data.count &#125; func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cell = tableView.dequeueReusableCell(withIdentifier: &quot;Cell&quot;, for: indexPath) as! VideoCell let video = data[indexPath.row] cell.previewImageView.image = UIImage(named: video.image) cell.nameLabel.text = video.title cell.sourceLabel.text = video.source return cell &#125; å¼•å…¥æ’­æ”¾è§†é¢‘æ‰€éœ€æ¡†æž¶ï¼Œå¹¶å®šä¹‰ç›¸å…³å˜é‡ã€‚ 1234567import AVFoundationimport AVKit... var playViewController : AVPlayerViewController? var playerView : AVPlayer? å®žçŽ°è§†é¢‘æ’­æ”¾æŒ‰é’®æ–¹æ³•ã€‚ 12345678910111213@IBAction func playVideo(_ sender: UIButton) &#123; let path = Bundle.main.path(forResource: &quot;KL&quot;, ofType: &quot;mp4&quot;) playerView = AVPlayer(url: URL(fileURLWithPath: path!)) playViewController = AVPlayerViewController() playViewController?.player = playerView present(playViewController!, animated: true, completion: &#123; self.playViewController?.player?.play() &#125;) &#125; è¯¦ç»†ä»£ç ï¼š PlayLocalVideo å‚è€ƒï¼š 30DaysofSwift]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 11ï¼šç…§ç‰‡æ¨ªå±æ»‘åŠ¨]]></title>
    <url>%2F2017%2Fios-tutorial-11.html</url>
    <content type="text"><![CDATA[çŸ¥è¯†ç‚¹ï¼š UICollectionView UIVisualEffectView UICollectionViewDataSource æ–°å»ºé¡¹ç›®Carousel Effect åœ¨IBæž„å»ºUIã€‚Collection View é‡Œçš„ Scroll Direction è®¾ç½®æˆæ°´å¹³æ»šåŠ¨ã€‚UIVisualEffectViewæ˜¯ç”¨æ¥æ·»åŠ æ¨¡ç³Šæ•ˆæžœçš„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç±»ä¼¼å¦‚ä¸‹çš„ä»£ç æž„å»ºï¼š 1234let blurEffect = UIBlurEffect(style: .dark)let blurEffectView = UIVisualEffectView(effect: blurEffect)blurEffectView.frame = view.boundsbackgroundImageView.addSubview(blurEffectView) åˆ›å»ºæ•°æ®ç±»Interest åˆ›å»ºUICollectionViewCell å®žçŽ°UICollectionViewDataSourceçš„æ–¹æ³•ï¼ˆæœ‰ç‚¹ç±»ä¼¼UITableViewDataSourceï¼‰ã€‚12345678910111213141516171819202122232425262728293031323334353637class ViewController: UIViewController, UICollectionViewDataSource &#123; @IBOutlet weak var backgroundImageView: UIImageView! @IBOutlet weak var collectionView: UICollectionView! var interests = Interest.createInterests() override func viewDidLoad() &#123; super.viewDidLoad() collectionView.dataSource = self collectionView.dataSource = self &#125; override var preferredStatusBarStyle : UIStatusBarStyle &#123; return UIStatusBarStyle.lightContent &#125; func numberOfSections(in collectionView: UICollectionView) -&gt; Int &#123; return 1 &#125; func collectionView(_ collectionView: UICollectionView, numberOfItemsInSection section: Int) -&gt; Int &#123; return interests.count &#125; func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -&gt; UICollectionViewCell &#123; let CellIdentifier = &quot;InterestCell&quot; let cell = collectionView.dequeueReusableCell(withReuseIdentifier: CellIdentifier, for: indexPath) as! InterestCollectionViewCell cell.interest = self.interests[indexPath.item] return cell &#125;&#125; è¯¦ç»†ä»£ç ï¼š Carousel Effect å‚è€ƒï¼š30DaysofSwift]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 10ï¼šUIScrollViewæ»šåŠ¨è§†å›¾]]></title>
    <url>%2F2017%2Fios-tutorial-10-uiscrolview.html</url>
    <content type="text"><![CDATA[çŸ¥è¯†ç‚¹: UIScrollView å½“è§†å›¾è¶…è¿‡å±å¹•å¤§å°æ—¶ï¼Œå¯é€šè¿‡æŠŠè§†å›¾æ”¾åœ¨UIScrollViewä¸­è®©è§†å›¾å¯ä»¥ä¸Šä¸‹æ»šåŠ¨çš„åŠŸèƒ½ã€‚ä»¥ä¸€å¼ å¤§å›¾ç‰‡ä¸ºä¾‹ã€‚ æ–°å»ºé¡¹ç›® ScrollViewTutorial ä»£ç ï¼š12345678910111213141516171819202122class ViewController: UIViewController &#123; var imageView: UIImageView! var scrollView: UIScrollView! override func viewDidLoad() &#123; super.viewDidLoad() imageView = UIImageView(image: UIImage(named: &quot;strandvagen.jpg&quot;)) scrollView = UIScrollView(frame: view.bounds) scrollView.backgroundColor = UIColor.black scrollView.contentSize = imageView.bounds.size scrollView.addSubview(imageView) view.addSubview(scrollView) &#125; &#125; è¯¦ç»†ä»£ç ï¼šScrollViewTutorial å‚è€ƒï¼šScroll View Tutorial in iOS8 with Swift]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Alamofireï¼šSwiftçš„HTTP ç½‘ç»œåº“]]></title>
    <url>%2F2017%2Falamofire-introduce.html</url>
    <content type="text"><![CDATA[å®‰è£… CocoaPodså’ŒCarthageéƒ½å¾ˆæ–¹ä¾¿å®‰è£…å®‰è£…å®Œï¼Œå¦‚æžœå‡ºçŽ°åŠ è½½ä¸åˆ°Alamofireï¼Œå¯ä»¥æŸ¥çœ‹Cannot load underlying module for â€˜Alamofireâ€™ #441ï¼Œé—®é¢˜åº”è¯¥å¯ä»¥è§£å†³ã€‚ æ‰‹åŠ¨å®‰è£… ä¸‹è½½Alamofire å°†Alamofire.xcodeprojæ‹–è¿›åˆ°é¡¹ç›®ä¸­ åœ¨â€œEmbedded Binariesä¸­æ·»åŠ  command + B ç¼–è¯‘åŽå°±å¯ä»¥ä½¿ç”¨ å…³äºŽ https://httpbin.org/ ç½‘ç«™ https://httpbin.org/ ç½‘ç«™å¯ç”¨æ¥åšhttpçš„å„ç§è¯·æ±‚æµ‹è¯•ä½¿ç”¨ï¼Œä¸è¿‡é—æ†¾çš„æ˜¯æ²¡æœ‰POSTç­‰æäº¤ç±»åž‹è¯·æ±‚çš„æµ‹è¯• åŸºæœ¬ä½¿ç”¨ä¸€ä¸ªç®€å•çš„è¯·æ±‚ï¼š 123import AlamofireAlamofire.request(&quot;https://httpbin.org/get&quot;) httpä¸­æœ‰è¯·æ±‚(Request) å’Œ å“åº”(Response)ä¸¤ä¸ªé‡è¦æ¦‚å¿µã€‚å¤§éƒ¨åˆ†httpæ¡†æž¶ï¼Œéƒ½ä¼šä½¿ç”¨requestå’Œresponseä½œä¸ºæ–¹æ³•åã€‚çœ‹çœ‹Alamofireçš„requestæ–¹æ³•çš„è¯¦ç»†å‚æ•°ï¼š 12345678public func request( _ url: URLConvertible, method: HTTPMethod = .get, parameters: Parameters? = nil, encoding: ParameterEncoding = URLEncoding.default, headers: HTTPHeaders? = nil) -&gt; DataRequest&#123; æœ‰url,method,parameters,encoding,headersäº”ä¸ªå‚æ•°ï¼Œä¸Žhttpæ˜¯ç›¸äº’å¯¹åº”çš„ã€‚å…¶ä¸­åªæœ‰urlæ˜¯å¿…é¡»çš„ï¼Œå…¶å®ƒéƒ½æœ‰é»˜è®¤å€¼ã€‚ è¯·æ±‚åŽçš„å“åº”å¤„ç†å‘httpå‘é€è¯·æ±‚åŽï¼Œå°±éœ€å¯¹å“åº”ç»“æžœè¿›è¡Œå¤„ç†ã€‚ Alamofireé‡‡ç”¨é“¾å¼è°ƒç”¨çš„æ–¹å¼å¤„ç†å“åº”ï¼Œè¿™ç§é“¾å¼è°ƒç”¨çš„æ–¹å¼æœ€åˆåº”è¯¥æ˜¯èµ·æºjQueryã€‚å“åº”å¤„ç†çš„ä¸€èˆ¬å½¢å¼å¦‚ä¸‹ï¼Œresponseå°±æ˜¯å“åº”ç»“æžœã€‚ 123Alamofire.request(&quot;https://httpbin.org/get&quot;).responseJSON &#123; response in&#125; Alamofire æä¾›äº†äº”ç§ä¸åŒçš„å“åº”å¤„ç†ï¼š 123456789101112131415161718192021222324252627282930// Response Handler - Unserialized Responsefunc response( queue: DispatchQueue?, completionHandler: @escaping (DefaultDataResponse) -&gt; Void) -&gt; Self// Response Data Handler - Serialized into Datafunc responseData( queue: DispatchQueue?, completionHandler: @escaping (DataResponse&lt;Data&gt;) -&gt; Void) -&gt; Self// Response String Handler - Serialized into Stringfunc responseString( queue: DispatchQueue?, encoding: String.Encoding?, completionHandler: @escaping (DataResponse&lt;String&gt;) -&gt; Void) -&gt; Self// Response JSON Handler - Serialized into Anyfunc responseJSON( queue: DispatchQueue?, completionHandler: @escaping (DataResponse&lt;Any&gt;) -&gt; Void) -&gt; Self// Response PropertyList (plist) Handler - Serialized into Anyfunc responsePropertyList( queue: DispatchQueue?, completionHandler: @escaping (DataResponse&lt;Any&gt;) -&gt; Void)) -&gt; Self äº”ç§æ–¹æ³•çš„å‚æ•°ä¸åŒï¼Œä½†æœ€åŽä¸€å‚æ•°éƒ½æ˜¯ä¸€ä¸ªå›žè°ƒçš„é—­åŒ…ï¼Œéƒ½å¯ä»¥å†™æˆå°¾éšé—­åŒ…å½¢å¼ã€‚é™¤äº†responseæ–¹æ³•çš„å›žè°ƒå‚æ•°æ˜¯DefaultDataResponseï¼Œå…¶å®ƒéƒ½æ˜¯DataResponse: 1234567891011121314151617181920212223public struct DataResponse&lt;Value&gt; &#123; /// The URL request sent to the server. public let request: URLRequest? /// The server&apos;s response to the URL request. public let response: HTTPURLResponse? /// The data returned by the server. public let data: Data? /// The result of response serialization. public let result: Result&lt;Value&gt; /// The timeline of the complete lifecycle of the request. public let timeline: Timeline /// Returns the associated value of the result if it is a success, `nil` otherwise. public var value: Value? &#123; return result.value &#125; /// Returns the associated error value if the result if it is a failure, `nil` otherwise. public var error: Error? &#123; return result.error &#125; var _metrics: AnyObject? DataResponseä¸ŽDefaultDataResponseæœ€å¤§çš„ä¸åŒå°±æ˜¯å¤šäº†ä¸¤ä¸ªå±žæ€§resultå’Œvalueï¼Œvalueå€¼å°±æ˜¯æ ¼å¼åŒ–çš„ä¸åŒç±»åž‹ã€‚ å“åº”å¤„ç†çš„ä¸€äº›ä¾‹å­ response 123456789Alamofire.request(&quot;https://httpbin.org/get&quot;).response &#123; response in print(&quot;Request: \(response.request)&quot;) print(&quot;Response: \(response.response)&quot;) print(&quot;Error: \(response.error)&quot;) if let data = response.data, let utf8Text = String(data: data, encoding: .utf8) &#123; print(&quot;Data: \(utf8Text)&quot;) &#125;&#125; responseæ–¹æ³•çš„å“åº”ç»“æžœresponseæ˜¯DefaultDataResponseï¼Œæ²¡æœ‰è¿›è¡Œè¿‡æ ¼å¼åŒ–å¤„ç†ã€‚ responseData 1234567Alamofire.request(&quot;https://httpbin.org/get&quot;).responseData &#123; response in debugPrint(&quot;All Response Info: \(response)&quot;) if let data = response.result.value, let utf8Text = String(data: data, encoding: .utf8) &#123; print(&quot;Data: \(utf8Text)&quot;) &#125;&#125; responseDataæ–¹æ³•å¯¹å“åº”ç»“æžœè¿›è¡Œäº†å¤„ç†ï¼Œresponse.result.valueå°±æ˜¯æˆ‘ä»¬å±žæ€§çš„Dataç±»åž‹ã€‚ é“¾å¼è°ƒç”¨ 1234567Alamofire.request(&quot;https://httpbin.org/get&quot;).responseString &#123; response in print(&quot;Response String: \(response.result.value)&quot;)&#125;.responseJSON &#123; response in print(&quot;Response JSON: \(response.result.value)&quot;)&#125; å“åº”éªŒè¯httpå“åº”ç»“æžœä¸­çš„ä¸åŒçŠ¶æ€ç (100..&lt;600)è¡¨ç¤ºä¸åŒç»“æžœã€‚ æ‰‹åŠ¨éªŒè¯ 1234567891011 Alamofire.request(&quot;https://httpbin.org/get&quot;).validate(statusCode: 200..&lt;300).validate(contentType: [&quot;application/json&quot;]).responseData &#123; response in switch response.result &#123; case .success: print(&quot;Validation Successful&quot;) case .failure(let error): print(error) &#125;&#125; è‡ªåŠ¨éªŒè¯çŠ¶æ€ç åœ¨200..&lt;300çš„ä¸ºæ­£ç¡®ï¼Œå…¶å®ƒä¸ºé”™è¯¯ã€‚12345678Alamofire.request(&quot;https://httpbin.org/get&quot;).validate().responseJSON &#123; response in switch response.result &#123; case .success: print(&quot;Validation Successful&quot;) case .failure(let error): print(error) &#125;&#125; HTTPä¸åŒè¯·æ±‚æ–¹å¼requestæ–¹æ³•çš„methodå‚æ•°è¡¨ç¤ºä¸åŒçš„æ–¹æ³•ã€‚ 12345Alamofire.request(&quot;https://httpbin.org/get&quot;) // method defaults to `.get`Alamofire.request(&quot;https://httpbin.org/post&quot;, method: .post)Alamofire.request(&quot;https://httpbin.org/put&quot;, method: .put)Alamofire.request(&quot;https://httpbin.org/delete&quot;, method: .delete) è¯·æ±‚å‚æ•°ç¼–ç GETçš„å‚æ•°æŒ‰ç…§å›ºå®šæ ¼å¼å†™åˆ°URLä¸­ï¼Œå…¶ä»–ç±»åž‹åˆ™æŒ‰ç…§ä¸åŒæ ¼å¼å†™åˆ°è¯·æ±‚bodyä¸­ã€‚ GETå‚æ•°ç¼–ç  12345678let parameters: Parameters = [&quot;foo&quot;: &quot;bar&quot;]// All three of these calls are equivalentAlamofire.request(&quot;https://httpbin.org/get&quot;, parameters: parameters) // encoding defaults to `URLEncoding.default`Alamofire.request(&quot;https://httpbin.org/get&quot;, parameters: parameters, encoding: URLEncoding.default)Alamofire.request(&quot;https://httpbin.org/get&quot;, parameters: parameters, encoding: URLEncoding(destination: .methodDependent))// https://httpbin.org/get?foo=bar POSTå‚æ•°ç¼–ç  12345678910111213141516let parameters: Parameters = [ &quot;foo&quot;: &quot;bar&quot;, &quot;baz&quot;: [&quot;a&quot;, 1], &quot;qux&quot;: [ &quot;x&quot;: 1, &quot;y&quot;: 2, &quot;z&quot;: 3 ]]// All three of these calls are equivalentAlamofire.request(&quot;https://httpbin.org/post&quot;, method: .post, parameters: parameters)Alamofire.request(&quot;https://httpbin.org/post&quot;, method: .post, parameters: parameters, encoding: URLEncoding.default)Alamofire.request(&quot;https://httpbin.org/post&quot;, method: .post, parameters: parameters, encoding: URLEncoding.httpBody)// HTTP body: foo=bar&amp;baz[]=a&amp;baz[]=1&amp;qux[x]=1&amp;qux[y]=2&amp;qux[z]=3 JSONç¼–ç  123456789101112let parameters: Parameters = [ &quot;foo&quot;: [1,2,3], &quot;bar&quot;: [ &quot;baz&quot;: &quot;qux&quot; ]]// Both calls are equivalentAlamofire.request(&quot;https://httpbin.org/post&quot;, method: .post, parameters: parameters, encoding: JSONEncoding.default)Alamofire.request(&quot;https://httpbin.org/post&quot;, method: .post, parameters: parameters, encoding: JSONEncoding(options: []))// HTTP body: &#123;&quot;foo&quot;: [1, 2, 3], &quot;bar&quot;: &#123;&quot;baz&quot;: &quot;qux&quot;&#125;&#125; æ·»åŠ è¯·æ±‚HTTPå¤´éƒ¨12345678let headers: HTTPHeaders = [ &quot;Authorization&quot;: &quot;Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==&quot;, &quot;Accept&quot;: &quot;application/json&quot;]Alamofire.request(&quot;https://httpbin.org/headers&quot;, headers: headers).responseJSON &#123; response in debugPrint(response)&#125; HTTPè®¤è¯12345678let user = &quot;user&quot;let password = &quot;password&quot;Alamofire.request(&quot;https://httpbin.org/basic-auth/\(user)/\(password)&quot;) .authenticate(user: user, password: password) .responseJSON &#123; response in debugPrint(response)&#125; ä¸‹è½½æ–‡ä»¶12345Alamofire.download(&quot;https://httpbin.org/image/png&quot;).responseData &#123; response in if let data = response.result.value &#123; let image = UIImage(data: data) &#125;&#125; å¦å¤–å¯ä»¥ä¸‹æ–‡ä»¶ä¿å­˜åœ¨æœ¬åœ°ï¼š12345678910111213141516let destination: DownloadRequest.DownloadFileDestination = &#123; _, _ in let documentsURL = FileManager.default.urls(for: .documentDirectory, in: .userDomainMask)[0] let fileURL = documentsURL.appendingPathComponent(&quot;pig.png&quot;) return (fileURL, [.removePreviousFile, .createIntermediateDirectories])&#125;Alamofire.download(&quot;https://httpbin.org/image/png&quot;, to: destination).response &#123; response in print(response) if response.error == nil, let imagePath = response.destinationURL?.path &#123; let image = UIImage(contentsOfFile: imagePath) self.imageView.image = image self.tableView.reloadData() &#125;&#125; ä¸Šä¼  ä¸Šä¼  Data 12345let imageData = UIImagePNGRepresentation(image!)!Alamofire.upload(imageData, to: &quot;https://httpbin.org/post&quot;).responseJSON &#123; response in debugPrint(response)&#125; ä¸Šä¼ æ–‡ä»¶ 12345let fileURL = Bundle.main.url(forResource: &quot;video&quot;, withExtension: &quot;mov&quot;)Alamofire.upload(fileURL!, to: &quot;https://httpbin.org/post&quot;).responseJSON &#123; response in debugPrint(response)&#125; ä¸Šä¼ Multipart Form Dataï¼ˆè¡¨å•æäº¤ï¼‰ 1234567891011121314151617Alamofire.upload( multipartFormData: &#123; multipartFormData in multipartFormData.append(unicornImageURL, withName: &quot;unicorn&quot;) multipartFormData.append(rainbowImageURL, withName: &quot;rainbow&quot;)&#125;, to: &quot;https://httpbin.org/post&quot;, encodingCompletion: &#123; encodingResult in switch encodingResult &#123; case .success(let upload, _, _): upload.responseJSON &#123; response in debugPrint(response) &#125; case .failure(let encodingError): print(encodingError) &#125;&#125;) è¯·æ±‚ä¸­èŠ±è´¹çš„å„ç§æ—¶é—´123Alamofire.request(&quot;https://httpbin.org/get&quot;).responseJSON &#123; response in print(response.timeline)&#125; ç»“æžœï¼š1Timeline: &#123; &quot;Latency&quot;: 1.527 secs, &quot;Request Duration&quot;: 1.528 secs, &quot;Serialization Duration&quot;: 0.001 secs, &quot;Total Duration&quot;: 1.529 secs &#125;]]></content>
  </entry>
  <entry>
    <title><![CDATA[Swiftä¸­çš„é—®å·ä¸‰ç§ç”¨æ³•]]></title>
    <url>%2F2017%2Fswift-question.html</url>
    <content type="text"><![CDATA[ä¸‰ç›®è¿ç®—ç¬¦(Ternary Conditional Operator)è¿™åœ¨å¤§éƒ¨åˆ†è¯­è¨€ä¸­éƒ½æ¯”è¾ƒå¸¸è§å¸ƒå°”å€¼ ? &quot;true&quot; : &quot;false&quot; å¯é€‰å€¼å¯é€‰å€¼?å’Œ !æ˜¯ä¸€å¯¹ã€‚?ç”¨åœ¨æŸä¸ªç±»åž‹åŽé¢ï¼Œå¯ä»¥é€šä¿—çš„ç†è§£ä¸ºï¼Œè¿™ä¸ªå€¼ä¸å¤ªç¡®å®žæ˜¯å¦æ˜¯è¿™ä¸ªç±»åž‹ï¼Œå¦‚æžœä¸æ˜¯å°±ç»™ä¸ªnilå§ï¼›!å¯ä»¥ç†è§£ä¸ºï¼Œä¸€å®šè¦ç»™ä¸ªç±»åž‹æˆ‘ï¼Œè¦ä¸è€å­åˆ†åˆ†é’ŸæŒ‚ç»™ä½ çœ‹äº†ã€‚ðŸ˜Ž ç©ºåˆè¿ç®—ç¬¦(Nil Coalescing Operator) ??è¿™ä¸ªæˆ‘åœ¨å…¶ä»–è¯­è¨€æ²¡è§è¿‡ã€‚e ?? f ç›¸å½“äºŽ e != nil ? e! : fï¼Œ å¯é€‰ç±»åž‹eä¸æ˜¯nilæ—¶ï¼Œå°±e!,å¦åˆ™ä¸ºfã€‚ 123var e: String?var f = &quot;æˆ‘æ˜¯fuck&quot;e ?? f // `e != nil ? e! : f` ï¼Œ å¯é€‰ç±»åž‹`e`ä¸æ˜¯`nil`æ—¶ï¼Œå°±`e!`,å¦åˆ™ä¸º`f`ã€‚ï¼ˆæ³¨æ„`??`å‰åŽè¦ç©ºæ ¼ï¼‰]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 1 å‰è¨€å’Œç›®å½•]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-1.html</url>
    <content type="text"><![CDATA[è¿™æ˜¯æˆ‘å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„è®°å½•ï¼Œç« èŠ‚å’ŒåŽŸä¹¦ä¸åŒã€‚ å¼€å‘çŽ¯å¢ƒæ˜¯Xcode 8ï¼ŒSwift 3ï¼ŒiOS 10ã€‚ æˆ‘çš„ä»£ç åœ¨githubä¸Šï¼ŒandyRon/Beginning-iOS-Programming-with-Swift ç›®å½• å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 1 å‰è¨€å’Œç›®å½• å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 2 Hello Worldï¼ç¬¬ä¸€ä¸ªSwift APP å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 3 ä»‹ç»Auto Layout å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 4 ç”¨Stack Viewè®¾è®¡UI å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 5 åŽŸåž‹çš„ä»‹ç» å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 6 åˆ›å»ºç®€å•çš„Table Based App å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 7 å®šåˆ¶Table Views å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 8 Table Viewå’ŒUIAlertControllerçš„äº¤äº’ å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 9 Table Rowçš„åˆ é™¤, UITableViewRowActionå’ŒUIActivityViewControllerçš„ä½¿ç”¨ å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 10 Navigation Controllerçš„ä»‹ç»å’ŒSegue å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 11 é¢å‘å¯¹è±¡ç¼–ç¨‹ä»‹ç» å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 12 ä¸°å¯ŒDetail Viewå’Œå®šåˆ¶åŒ–Navigation Bar å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 13 Self Sizing Cells and Dynamic Type å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 14 åŸºç¡€åŠ¨ç”»ï¼Œæ¨¡ç³Šæ•ˆæžœå’ŒUnwind Segue å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 15 ä½¿ç”¨åœ°å›¾ å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 16 ä»‹ç»é™æ€Table Viewsï¼ŒUIImagePickerControllerå’ŒNSLayoutConstraint å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 17 ä½¿ç”¨Core Data å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 18 Search Bar å’Œ UISearchController å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 19 ä½¿ç”¨UIPageViewControlleræž„å»ºä»‹ç»é¡µé¢ å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 20 ä½¿ç”¨Tab Bar Controller å’Œ æ‹†åˆ†Storyboard å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 21 ä½¿ç”¨WKWebViewå’ŒSFSafariViewController å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 22 ä½¿ç”¨CloudKit å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 24 ä½¿ç”¨TestFlightè¿›è¡ŒBetaæµ‹è¯• å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 25 ä½¿ç”¨3D Touch å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 26 ä½¿ç”¨æœ¬åœ°ç”¨æˆ·é€šçŸ¥]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 8ï¼šä½¿ç”¨IBInspectable å’Œ IBDesignableå®šåˆ¶UI]]></title>
    <url>%2F2017%2Fios-tutorial-8-ibinspectable-ibdesignable.html</url>
    <content type="text"><![CDATA[ä¾‹å­ä»£ç ï¼šhttps://github.com/andyRon/LearniOSByProject/tree/master/77 ç†è§£IBInspectable å’Œ IBDesignableç®€å•åœ°è¯´ï¼ŒIBInspectable å°±æ˜¯å…è®¸å¼€å‘è€…åœ¨IBçš„å±žæ€§æ£€æŸ¥å™¨ä¸­æ·»åŠ é¢å¤–çš„é€‰é¡¹ã€‚IBDesignable èƒ½å¤Ÿè®© IBInspectable æ·»åŠ çš„é¢å¤–é€‰é¡¹äº§ç”Ÿçš„å˜åŒ–åœ¨IBä¸­å®žæ—¶æ˜¾ç¤ºã€‚ä»¥Buttonçš„åœ†è§’ä¸ºä¾‹è¯´æ˜Žã€‚ æ­£å¸¸æƒ…å†µä¸‹ï¼ŒButtonçš„åœ†è§’éœ€è¦ä»£ç ï¼š12button.layer.cornerRadius = 10.0button.layer.masksToBounds = true æˆ–è€…ç›´æŽ¥åœ¨IBçš„Identityæ£€æŸ¥å™¨çš„ user defined runtime attributesä¸­æ·»åŠ ï¼š æ³¨æ„åˆ°ï¼Œè¿™ç§ä¿®æ”¹ä¸æ˜¯å®žæ—¶ï¼Œåœ¨IBä¸­Buttonè¿˜æ˜¯ç›´è§’ï¼Œåªæœ‰è¿è¡ŒåŽæ‰æ˜¯åœ†è§’ã€‚ ä»¥IBInspectableçš„æ–¹å¼ã€‚å®šä¹‰ä¸ªç»§æ‰¿è‡³UIButtonçš„ç±»ã€‚12345678class RoundedCornerButton: UIButton &#123; @IBInspectable var cornerRadius: CGFloat = 0.0 &#123; didSet &#123; layer.cornerRadius = cornerRadius layer.masksToBounds = cornerRadius &gt; 0 &#125; &#125;&#125; ç„¶åŽæŠŠbuttonçš„classå±žæ€§ä¿®æ”¹æˆRoundedCornerButton: å‘çŽ°è¿™ä¸ªbuttonçš„å±žæ€§æ£€æŸ¥å™¨ä¸­å¤šäº†Corner Radiusã€‚ æ³¨æ„ï¼š cornerRadiuså±žæ€§å˜æˆäº†Corner Radiusï¼ŒRoundedCornerButtonç±»å˜æˆäº† Rounded Corner Buttonï¼Œè¿™æ˜¯Xcodeè‡ªåŠ¨è½¬å˜çš„ï¼Œå¼€å‘è€…åªéœ€è¦ä¾ç…§swiftçš„å‘½åè§„èŒƒå°±å¯ä»¥äº†ï¼ˆç±»åæ˜¯å¤§å†™å¼€å¤´çš„é©¼å³°å‘½åè§„åˆ™ï¼Œå±žæ€§åæ˜¯å°å†™å¼€å¤´çš„é©¼å³°å‘½åè§„åˆ™ï¼‰ cornerRadiusçš„ç±»åž‹æ˜¯CGFloatï¼Œåœ¨å±žæ€§æ£€æŸ¥å™¨ä¸­å°±å¯¹åº”æ•°å­—çš„é€‰æ‹©ã€‚å½“ç„¶ä¸æ˜¯æ‰€æœ‰ç±»åž‹éƒ½å¯ä»¥æ·»åŠ å±žæ€§æ£€æŸ¥å™¨ä¸­çš„ï¼ŒIBInspectableæ”¯æŒå¦‚ä¸‹ç±»åž‹ï¼š12345678910IntCGFloat Double String Bool CGPoint CGSize CGRect UIColor UIImage å¦‚æžœåœ¨ç±»RoundedCornerButtonå‰æ·»åŠ @IBDesignableï¼Œé‚£åœ¨å±žæ€§æ£€æŸ¥å™¨ä¸­è‡ªå®šä¹‰çš„å±žæ€§å˜åŒ–å°±å¯ä»¥åœ¨IBä¸­å®žæ—¶æ˜¾ç¤ºäº†ã€‚12345678@IBDesignable class RoundedCornerButton: UIButton &#123; @IBInspectable var cornerRadius: CGFloat = 0.0 &#123; didSet &#123; layer.cornerRadius = cornerRadius layer.masksToBounds = cornerRadius &gt; 0 &#125; &#125;&#125; åˆ›å»ºFancy Buttonåˆ›å»ºFancy Buttonæ¥æ›´åŠ æ·±å…¥çš„äº†è§£IBInspectable å’Œ IBDesignable åˆ›å»ºæ–°é¡¹ç›®FancyButton ä¸‹è½½å›¾æ ‡ï¼Œä¹Ÿå¯ä»¥éšæ„å›¾æ ‡ï¼Œæ‹–è¿›asset catalog æ–°å»ºç±»FancyButtonï¼Œç»§æ‰¿è‡³UIButton åœ†è§’ï¼Œè¾¹å®½ï¼Œè¾¹çš„é¢œè‰²ã€‚ æ›´æ–°FancyButtonï¼š12345678910111213141516171819@IBDesignableclass FancyButton: UIButton &#123; @IBInspectable var cornerRadius: CGFloat = 0.0 &#123; didSet &#123; layer.cornerRadius = cornerRadius layer.masksToBounds = cornerRadius &gt; 0 &#125; &#125; @IBInspectable var borderWidth: CGFloat = 0.0 &#123; didSet &#123; layer.borderWidth = borderWidth &#125; &#125; @IBInspectable var borderColor: UIColor = .black &#123; didSet &#123; layer.borderColor = borderColor.cgColor &#125; &#125;&#125; Titleåœ¨FancyButtonç»§ç»­æ·»åŠ å±žæ€§ï¼š1234567891011121314151617181920@IBInspectable var titleLeftPadding: CGFloat = 0.0 &#123; didSet &#123; titleEdgeInsets.left = titleLeftPadding &#125;&#125;@IBInspectable var titleRightPadding: CGFloat = 0.0 &#123; didSet &#123; titleEdgeInsets.right = titleRightPadding &#125;&#125;@IBInspectable var titleTopPadding: CGFloat = 0.0 &#123; didSet &#123; titleEdgeInsets.top = titleTopPadding &#125;&#125;@IBInspectable var titleBottomPadding: CGFloat = 0.0 &#123; didSet &#123; titleEdgeInsets.bottom = titleBottomPadding &#125;&#125; é€šè¿‡åœ†è§’å¯åˆ›å»ºåœ†å½¢button Image Paddingæ·»åŠ å›¾ç‰‡è¾¹è·çš„å±žæ€§ï¼š123456789101112131415161718192021@IBInspectable var imageLeftPadding: CGFloat = 0.0 &#123; didSet &#123; imageEdgeInsets.left = imageLeftPadding &#125;&#125;@IBInspectable var imageRightPadding: CGFloat = 0.0 &#123; didSet &#123; imageEdgeInsets.right = imageRightPadding &#125;&#125;@IBInspectable var imageTopPadding: CGFloat = 0.0 &#123; didSet &#123; imageEdgeInsets.top = imageTopPadding &#125;&#125;@IBInspectable var imageBottomPadding: CGFloat = 0.0 &#123; didSet &#123; imageEdgeInsets.bottom = imageBottomPadding &#125;&#125; å›¾ç‰‡é å³å¯¹é½æ ¹æ®ä¸‹å›¾å…³ç³»ï¼Œåº”æœ‰imageEdgeInsets.left = self.bounds.width - imageView.bounds.width - imageRightPaddingã€‚ åœ¨FancyButtonä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 123456789@IBInspectable var enableImageRightAligned: Bool = falseoverride func layoutSubviews() &#123; super.layoutSubviews() if enableImageRightAligned, let imageView = imageView &#123; imageEdgeInsets.left = self.bounds.width - imageView.bounds.width - imageRightPadding &#125;&#125; + `enableImageRightAligned`å±žæ€§åˆæ¥è‡ªåŠ¨è®¡ç®— `imageEdgeInsets.left` é¢œè‰²æ¸å˜æ·»åŠ ä¸‰ä¸ª@IBInspectableå±žæ€§ï¼Œå¹¶æ›´æ–°layoutSubviews:1234567891011121314151617181920@IBInspectable var enableGradientBackground: Bool = false@IBInspectable var gradientColor1: UIColor = UIColor.black@IBInspectable var gradientColor2: UIColor = UIColor.whiteoverride func layoutSubviews() &#123; super.layoutSubviews() if enableImageRightAligned, let imageView = imageView &#123; imageEdgeInsets.left = self.bounds.width - imageView.bounds.width - imageRightPadding &#125; if enableGradientBackground &#123; let gradientLayer = CAGradientLayer() gradientLayer.frame = self.bounds gradientLayer.colors = [gradientColor1.cgColor, gradientColor2.cgColor] gradientLayer.startPoint = CGPoint(x: 0.0, y: 0.5) gradientLayer.endPoint = CGPoint(x: 1.0, y: 0.5) self.layer.insertSublayer(gradientLayer, at: 0) &#125;&#125; æ¸å˜è‰²éœ€è¦è¿è¡ŒåŽæ‰èƒ½çœ‹åˆ° å‚è€ƒï¼šappcodeç½‘ç«™çš„ä¹¦ã€ŠIntermediate iOS Programming with Swiftã€‹ çš„Chapter 36]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[DownGitï¼šæ€Žä¹ˆä¸‹è½½githubä¸­æŸä¸ªæ–‡ä»¶å¤¹ï¼Ÿ]]></title>
    <url>%2F2017%2Fdowngit.html</url>
    <content type="text"><![CDATA[æ€Žä¹ˆä¸‹è½½githubä¸­æŸä¸ªæ–‡ä»¶å¤¹ï¼Ÿ githubåªæä¾›äº†æ•´ä¸ªé¡¹ç›®ä¸‹è½½ã€‚ä¸‹è½½ä¸€ä¸ªé¡¹ç›®ä¸­çš„æŸä¸ªæ–‡ä»¶å¤¹çš„å†…å®¹ï¼Œè¿™ç§éœ€æ±‚åœ¨ä½¿ç”¨githubæ—¶ï¼Œè¿˜æ˜¯ç»å¸¸ä½¿ç”¨çš„ã€‚ æ¯”å¦‚ï¼šåœ¨ä¸€äº›å¤§çš„é¡¹ç›®ä¸‹ï¼Œåªæƒ³çœ‹æŸä¸ªæ–‡ä»¶çš„å†…å®¹æ—¶ã€‚åˆæ¯”å¦‚ï¼Œåƒæˆ‘è¿™ç§andyRon/LearniOSByProjectï¼Œå°±æ˜¯æˆ‘ä¸€äº›å­¦ä¹ iOSçš„å°é¡¹ç›®æˆ–è€…Demoçš„é›†åˆï¼Œå¦‚æžœåªæƒ³æŸ¥çœ‹æŸä¸ªå°é¡¹ç›®ï¼Œè€Œä¸ä¸‹è½½æ•´ä¸ªé¡¹ç›®æ—¶ã€‚ æ–¹æ³•å¾ˆç®€å•ï¼Œæ—©å°±æœ‰å‰è¾ˆæƒ³åˆ°äº†ï¼ŒDownGitè¿™ä¸ªç½‘ç«™å°±æä¾›è¿™ä¸ªåŠŸèƒ½ï¼Œåªè¦æŠŠç›®å½•é“¾æŽ¥ï¼ˆæ¯”å¦‚ï¼šhttps://github.com/andyRon/LearniOSByProject/tree/master/76ï¼‰æ‹·è´ï¼Œç„¶åŽç‚¹å‡»downloadå°±å¯ä»¥ä¸‹è½½ç›®å½•çš„åŽ‹ç¼©æ–‡ä»¶ã€‚]]></content>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSæœ¬åœ°åŒ–(swift)]]></title>
    <url>%2F2017%2Fios-localize.html</url>
    <content type="text"><![CDATA[ç¤ºä¾‹ä»£ç åœ¨githubä¸ŠlocalizationsDemo 1 é¡¹ç›®ä¸­éœ€è¦é…ç½®çš„è¯­è¨€è¿™å°±æ˜¯é¡¹ç›®ä¸­å…¶ä»–ä¸åŒå½¢å¼æœ¬åœ°åŒ–å¯ä»¥æ·»åŠ çš„è¯­ç§è®¾ç½®ã€‚ å¦‚ä¸‹å›¾ä¸ºé¡¹ç›®æ·»åŠ ä¸åŒè¯­ç§ å¼¹æ¡†ä¸­æ˜¾ç¤ºè¦ä¸ºä¸¤ä¸ªStoryboardæ–‡ä»¶æ·»åŠ è¯­ç§ä¿¡æ¯ æ·»åŠ å®Œå¤šè¯­ç§åŽï¼Œç›¸å…³éœ€è¦æœ¬åœ°åŒ–çš„æ–‡ä»¶ä¼šäº§ç”Ÿä¸€ç»„æ–‡ä»¶ å®žé™…åœ¨ç›®å½•ç»“æž„ä¸­æ˜¯æ ¹æ®ä¸åŒè¯­è¨€ç”Ÿæˆä¸åŒçš„*.lprojç›®å½•ï¼Œå†åœ¨*.lprojç›®å½•ä¸­ç”Ÿæˆäº†ä¸åŒçš„.stringsæ–‡ä»¶ã€‚ 2 åº”ç”¨åç§°æœ¬åœ°åŒ–Appçš„åç§°åœ¨ä¸åŒè¯­ç§ä¸‹æ˜¾ç¤ºä¸åŒã€‚ æ–°å»ºä¸€ä¸ª.stringsæ–‡ä»¶ï¼Œåä¸ºInfoPlist.stringsã€‚ é€‰ä¸­InfoPlist.stringsï¼Œåœ¨å³ä¾§çš„æ–‡ä»¶æ£€æŸ¥å™¨ä¸­ç‚¹å‡»Localizeï¼Œåœ¨å¼¹æ¡†ä¸­å¯ä»¥é€‰æ‹©è¯­ç§ï¼Œå¯¹åº”é¡¹ç›®ä¸­éœ€è¦é…ç½®çš„è¯­è¨€ä¸­é…ç½®çš„è¯­ç§ã€‚ å¯é€‰ä¸­éœ€è¦æœ¬åœ°åŒ–çš„åº”ç”¨åç§°çš„è¯­ç§ï¼š åœ¨InfoPlist.stringsçš„ä¸åŒè¯­ç§æ–‡ä»¶ä¸­æ·»åŠ å­—æ®µCFBundleDisplayNameï¼Œè¡¨ç¤ºåº”ç”¨çš„åç§°ã€‚CFBundleDisplayName = &quot;ç®€ä½“ä¸­æ–‡åç§°&quot;; åœ¨æ¨¡æ‹Ÿå™¨ä¸­ï¼Œå¯é€šè¿‡Edit Scheme...ç¼–è¾‘è¯­ç§ï¼š 3 ä»£ç ä¸­çš„å­—ç¬¦ä¸²çš„æœ¬åœ°åŒ–ç±»ä¼¼åº”ç”¨åç§°æœ¬åœ°åŒ–ï¼Œä»£ç ä¸­çš„å­—ç¬¦ä¸²çš„æœ¬åœ°ä¹Ÿæ˜¯åˆ©ç”¨.stringsæ–‡ä»¶å­˜å‚¨ç¿»è¯‘ä¿¡æ¯ã€‚ç„¶åŽå†åœ¨ä»£ç ä¸­åˆ©ç”¨NSLocalizedStringï¼ˆç¿»è¯‘ä¿¡æ¯é»˜è®¤åœ¨Localizable.stringsæ–‡ä»¶ï¼‰æˆ–NSLocalizedString(_:tableName:bundle:value:comment:)ï¼ˆç¿»è¯‘ä¿¡æ¯åœ¨tableNameå¯¹åº”çš„.stringsæ–‡ä»¶ï¼‰æ–‡ä»¶æ ‡æ³¨ã€‚ NSLocalizedString(_:tableName:bundle:value:comment:)è¿™ç§æ–¹å¼å¯æ ¹æ®éœ€è¦æŠŠç¿»è¯‘ä¿¡æ¯ä¿å­˜åœ¨è‡ªå®šä¹‰çš„æ–‡ä»¶ä¸­ï¼Œåœ¨å¤šäººå¼€å‘æ—¶å¯ä»¥å¾ˆå¥½çš„é˜²æ­¢å†²çªã€‚ æ–°å»ºä¸€ä¸ªåä¸ºLocalizable.stringsçš„.stringsæ–‡ä»¶ã€‚ ç±»ä¼¼InfoPlist.stringsæ–‡ä»¶çš„é…ç½®æ–¹å¼ï¼Œé…ç½®ä¸åŒè¯­ç§ã€‚ åœ¨ä»£ç ä¸­éœ€è¦æœ¬åœ°åŒ–çš„å­—ç¬¦ä¸²ä¿®æ”¹ä¸ºç±»ä¼¼NSLocalizedString(&quot;labelName&quot;, comment: &quot;Label&quot;)æˆ–NSLocalizedString(&quot;labelName&quot;, tableName: &quot;andy&quot;, bundle: Bundle.main, value: &quot;&quot;, comment: &quot;Label&quot;) 4 å›¾ç‰‡çš„æœ¬åœ°åŒ–è¿™è¾¹æ‰€è¯´çš„å›¾ç‰‡çš„æœ¬åœ°åŒ–å°±æ˜¯æŒ‡ï¼ŒåŒä¸€ä¸ªåç§°å›¾ç‰‡ï¼Œåœ¨ä¸åŒè¯­ç§ä¸‹æ˜¾ç¤ºä¸åŒå›¾ç‰‡ã€‚ éšæ„æ·»åŠ ä¸€å¼ å›¾ç‰‡åˆ°é¡¹ç›®ï¼Œæ¯”å¦‚Swift_Logo.png é€‰ä¸­ä¸Šé¢çš„å›¾ç‰‡ï¼Œåœ¨å³ä¾§çš„æ–‡ä»¶æ£€æŸ¥å™¨ä¸­ç‚¹å‡»Localizeï¼Œç±»ä¼¼ä¹‹å‰çš„åšæ³•ï¼Œæ·»åŠ æ‰€éœ€çš„ä¸åŒè¯­ç§ã€‚ åœ¨Finderä¸­çš„ä¸åŒè¯­ç§çš„*.lprojç›®å½•ä¸­æ·»åŠ ï¼Œç›¸åŒåå­—ä½†ä¸åŒçš„å›¾ç‰‡ åœ¨ä»£ç ä¸­æ·»åŠ ç±»ä¼¼çš„ä»£ç ï¼š self.imageView.image = UIImage(named: NSLocalizedString(&quot;Swift_Logo&quot;, comment: &quot;&quot;)) æœ€åŽçš„è‹±æ–‡ä¸­çš„çŠ¶æ€ç»“æžœä¸ºï¼š 5 ä¼˜åŒ–æœ¬åœ°åŒ–ä»£ç ä¹¦å†™æ–¹å¼æœ¬åœ°åŒ–æ—¶ï¼ŒNSLocalizedString(&quot;labelName&quot;, comment: &quot;Label&quot;)æˆ–NSLocalizedString(&quot;labelName&quot;, tableName: &quot;andy&quot;, bundle: Bundle.main, value: &quot;&quot;, comment: &quot;Label&quot;)è¿™ä¸¤ç§æ–¹æ³•ä»£ç å†™æ³•æœ‰ç‚¹ç¹çï¼Œå‚è€ƒstackoverflowä¸­ä¸€ä¸ªé—®é¢˜Whatâ€™s NSLocalizedString equivalent in Swift?Askçš„ä¸€ä¸ªç­”æ¡ˆï¼Œæ‰©å±•ä¸€ä¸‹Stringï¼š12345678910111213extension String &#123; var localized: String &#123; return NSLocalizedString(self, tableName: nil, bundle: Bundle.main, value: &quot;&quot;, comment: &quot;&quot;) &#125; func localized(withComment:String) -&gt; String &#123; return NSLocalizedString(self, tableName: nil, bundle: Bundle.main, value: &quot;&quot;, comment: withComment) &#125; func localized(tableName: String) -&gt; String&#123; return NSLocalizedString(self, tableName: tableName, bundle: Bundle.main, value: &quot;&quot;, comment: &quot;&quot;) &#125;&#125; ç„¶åŽï¼ŒåŽŸæœ¬ä¸‹é¢çš„å†™æ³•ï¼š123self.label.text = NSLocalizedString(&quot;labelName&quot;, comment: &quot;Label&quot;)self.label2.text = NSLocalizedString(&quot;labelName&quot;, tableName: &quot;andy&quot;, bundle: Bundle.main, value: &quot;&quot;, comment: &quot;Label&quot;)self.imageView.image = UIImage(named: NSLocalizedString(&quot;Swift_Logo&quot;, comment: &quot;&quot;)) å°±å¯ä»¥å†™æˆï¼š123self.label.text = &quot;labelName&quot;.localizedself.label2.text = &quot;labelName&quot;.localized(tableName: &quot;andy&quot;)self.imageView.image = UIImage(named: &quot;Swift_Logo&quot;.localized) å‚è€ƒï¼šã€iOSã€‘æµ…è°ˆå¤šè¯­è¨€æœ¬åœ°åŒ–(å›½é™…åŒ–)3åˆ†é’Ÿå®žçŽ°iOSè¯­è¨€æœ¬åœ°åŒ–/å›½é™…åŒ–ï¼ˆå›¾æ–‡è¯¦è§£ï¼‰Whatâ€™s NSLocalizedString equivalent in Swift?Ask]]></content>
  </entry>
  <entry>
    <title><![CDATA[Carthageçš„ä½¿ç”¨]]></title>
    <url>%2F2017%2Fcarthage-introduce.html</url>
    <content type="text"><![CDATA[Carthageä¸ŽCocoaPodsçš„ç®€å•æ¯”è¾ƒ CocoaPods çš„ä¼˜åŠ¿ï¼š ä½¿ç”¨æ–¹ä¾¿ï¼Œé™¤ç¼–å†™ Podfile ä»¥å¤–å…¶ä»–å‡ ä¹Žéƒ½æ˜¯è‡ªåŠ¨å®Œæˆï¼› è½¯ä»¶åŒ…æ•°é‡å¤šï¼Œä¸»æµæ”¯æŒï¼› CocoaPods çš„ç¼ºç‚¹ï¼š æ¯æ¬¡æ›´æ–°çŽ¯å¢ƒéƒ½éœ€è¦è¿žæŽ¥åˆ°ä¸­å¿ƒä»“åº“ï¼Œæ¯”è¾ƒè€—æ—¶ï¼› å¼€å‘è€…ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯å¦‚æžœåˆ›å»ºå…¼å®¹ CocoaPods çš„åº“ï¼Œå°±ä¼šç›¸å¯¹ç¹çä¸€äº›ï¼ˆå°½ç®¡æœ‰äº†å‘½ä»¤è¡Œï¼‰ï¼› æ¯æ¬¡å¹²å‡€ç¼–è¯‘éƒ½ä¼šæŠŠæ‰€æœ‰ç¬¬ä¸‰æ–¹åº“éƒ½é‡æ–°ç¼–è¯‘ä¸€æ¬¡ï¼ˆçœ‹ä¼¼å¾ˆæ­£ç¡®ï¼Œç›´åˆ°æˆ‘é‡è§ Carthageâ€¦ï¼‰ Carthage çš„ä¼˜åŠ¿ ç¬¬ä¸‰æ–¹åº“ä¸æ˜¯æ¯ä¸€æ¬¡éƒ½é‡æ–°ç¼–è¯‘ï¼ŒèŠ‚çœæ—¶é—´ï¼› åŽ»ä¸­å¿ƒåŒ–ï¼Œæ²¡æœ‰ä¸­å¿ƒæœåŠ¡å™¨ï¼Œè¿™æ„å‘³ç€æ¯æ¬¡é…ç½®å’Œæ›´æ–°çŽ¯å¢ƒï¼Œåªä¼šåŽ»æ›´æ–°å…·ä½“çš„åº“ï¼Œè€Œä¸ä¼šæœ‰ä¸€ä¸ªå‘ä¸­å¿ƒæœåŠ¡å™¨èŽ·å–æœ€æ–°åº“çš„ç´¢å¼•è¿™ä¹ˆä¸ªè¿‡ç¨‹ï¼ŒèŠ‚çœæ—¶é—´ï¼› ä¸Ž CocoaPods æ— ç¼é›†æˆï¼› ç»“æž„æ ‡å‡†çš„é¡¹ç›®å¤©ç„¶å°±æ˜¯ Carthage åº“ï¼› å®‰è£…Carthagebrew install carthage ä½¿ç”¨Carthage è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚å»ºç«‹æ–°é¡¹ç›® carthageDemo åˆ›å»ºç©ºæ–‡ä»¶Cartfileï¼Œå‘½ä»¤ï¼štouch Cartfile ç¼–è¾‘Cartfileæ–‡ä»¶(xcodeï¼Œæˆ–å…¶å®ƒæ–‡æœ¬ç¼–è¾‘å™¨)ï¼Œä»¥SVProgressHUDä¸ºä¾‹ï¼ŒCartfileæ–‡ä»¶å†…å®¹å¤§è‡´å¦‚ä¸‹ï¼š 1github &quot;SVProgressHUD/SVProgressHUD&quot; ~&gt; 1.0 Cartfileæ–‡ä»¶æ ¼å¼è¯´æ˜Ž: ä¾èµ–æºæœ‰ä¸¤ç§ï¼Œgithubå’Œgitï¼Œå°±æ˜¯å‘Šè¯‰ Carthageåˆ°å“ªé‡Œä¸‹è½½ç¬¬ä¸‰æ–¹åº“ï¼Œä¾‹å­å¦‚ä¸‹ï¼š1234567891011121314151617181920212223# Require version 2.3.1 or latergithub &quot;ReactiveCocoa/ReactiveCocoa&quot; &gt;= 2.3.1# Require version 1.xgithub &quot;Mantle/Mantle&quot; ~&gt; 1.0 # (1.0 or later, but less than 2.0)# Require exactly version 0.4.1github &quot;jspahrsummers/libextobjc&quot; == 0.4.1# Use the latest versiongithub &quot;jspahrsummers/xcconfigs&quot;# Use the branchgithub &quot;jspahrsummers/xcconfigs&quot; &quot;branch&quot;# Use a project from GitHub Enterprisegithub &quot;https://enterprise.local/ghe/desktop/git-error-translations&quot;# Use a project from any arbitrary server, on the &quot;development&quot; branchgit &quot;https://enterprise.local/desktop/git-error-translations2.git&quot; &quot;development&quot;# Use a local projectgit &quot;file:///directory/to/project&quot; &quot;branch&quot; ä»Žä¸Šé¢çš„ä¾‹å­ä¸­æœ‰å¾ˆè¯¦ç»†çš„ç‰ˆæœ¬å·ä¾‹å­ï¼š == 1.0 ä½¿ç”¨1.0ç‰ˆæœ¬ &gt;= 1.0 ä½¿ç”¨1.0æˆ–æ›´é«˜çš„ç‰ˆæœ¬ ~&gt; 1.0 ä½¿ç”¨é«˜äºŽ1.0ä½†ä½ŽäºŽ2.0çš„æœ€æ–°ç‰ˆæœ¬ æ²¡æœ‰çš„æ˜¯ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ branchåç§°/tagåç§°/commitåç§° ä½¿ç”¨ç‰¹å®šåˆ†æ”¯/æ ‡ç­¾/æäº¤ç‰ˆæœ¬ è¿è¡ŒCarthage carthage update [--platform iOS]--platform iOSæ˜¯é’ˆå¯¹iOSçš„ï¼Œå¯é€‰é¡¹ã€‚åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ä¼šç”Ÿæˆä¸€ä¸ªCartfile.resolvedæ–‡ä»¶å’ŒCarthageæ–‡ä»¶å¤¹ï¼ŒCarthageæ–‡ä»¶å¤¹ä¸­çš„Buildç›®å½•ä¸‹æœ‰ç¼–è¯‘å¥½çš„frameworkæ–‡ä»¶ï¼ŒCheckoutsç›®å½•ç¬¬ä¸‰åº“çš„æºæ–‡ä»¶ã€‚ æŠŠåº“æ·»åŠ åˆ°é¡¹ç›®ä¸­ æŠŠç¼–è¯‘å¥½çš„frameworkæ–‡ä»¶æ‹–åŠ¨åˆ°Linked Frameworks and Librariesæˆ–è€…ç‚¹å‡»+é€‰æ‹©ã€‚ åœ¨Build Phasesä¸­æ·»åŠ ä¸€ä¸ªRun Scriptã€‚å‘½ä»¤ä¸º /usr/local/bin/carthage copy-frameworksã€‚Input Filesä¸‹çš„æ¡ç›®ä¸º$(SRCROOT)/Carthage/Build/iOS/SVProgressHUD.frameworkã€‚å…·ä½“æ“ä½œå¦‚ä¸‹å›¾ï¼š ç¼–è¯‘å°±å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“äº† å…¶ä»– æ–°åŠ åº“æ—¶åœ¨Cartfileæ–‡ä»¶ä¸­æ·»åŠ åŽï¼Œç„¶åŽæ“ä½œç±»ä¼¼ä¸Šé¢çš„ æ›´æ–°æŒ‡å®šåº“ï¼šcarthage update SVProgressHUD --platform iOS å‚è€ƒï¼šCarthageçš„å®‰è£…å’Œä½¿ç”¨ã€è¯‘ã€‘Carthageçš„ä½¿ç”¨Carthage åˆæŽ¢ï¼šå››å¤§ä¼˜åŠ¿ä¸Žå››å¤§åŠ£åŠ¿Carthageå®˜æ–¹åœ°å€]]></content>
  </entry>
  <entry>
    <title><![CDATA[OCåŸºç¡€å­¦ä¹ 7ï¼šå†…å­˜ç®¡ç†]]></title>
    <url>%2F2017%2Foc-basic-7.html</url>
    <content type="text"><![CDATA[1 å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ è¯žç”Ÿï¼ˆé€šè¿‡allocæˆ–newæ–¹æ³•å®žçŽ°ï¼‰ -&gt; ç”Ÿå­˜ï¼ˆæŽ¥æ”¶æ¶ˆæ¯å¹¶æ‰§è¡Œæ“ä½œï¼‰ -&gt; äº¤å‹ï¼ˆé€šè¿‡å¤åˆä»¥åŠå‘æ–¹æ³•ä¼ é€’å‚æ•°ï¼‰ -&gt; æ­»åŽ»ï¼ˆè¢«é‡Šæ”¾æŽ‰ï¼‰ å¼•ç”¨è®¡æ•°(reference counting) / ä¿ç•™è®¡æ•°(retain counting) alloc, new, copy: åˆ›å»ºå¯¹è±¡ï¼Œä¿ç•™è®¡æ•°è¢«è®¾ç½®ä¸º1 retain: ä¿ç•™è®¡æ•°åŠ 1ã€‚å¦‚[[car retain] setTire: tire atIndex:2];è¡¨ç¤ºè¦æ±‚carå¯¹è±¡å°†å…¶ä¿ç•™è®¡æ•°çš„å€¼åŠ 1å¹¶æ‰§è¡ŒsetTireæ“ä½œã€‚ release: ä¿ç•™è®¡æ•°å‡1 dealloc: ä¿ç•™è®¡æ•°å½’0æ—¶è‡ªåŠ¨è°ƒç”¨ retainCount: èŽ·å¾—å¯¹è±¡ä¿ç•™è®¡æ•°å½“å‰å€¼1234567891011121314151617181920212223242526272829303132333435363738394041424344#import &lt;Foundation/Foundation.h&gt;@interface RetainTracker : NSObject@end@implementation RetainTracker- (id) init&#123; if (self = [super init]) &#123; NSLog(@&quot;init: Retain count of %lu .&quot;, [self retainCount]); &#125; return self;&#125; // init- (void)dealloc&#123; NSLog(@&quot;dealloc called. Bye Bye.&quot;); [super dealloc];&#125; // dealloc@end // RetainTrackerint main(int argc, const char * argv[]) &#123; RetainTracker *a = [RetainTracker new]; [a retain]; NSLog(@&quot;%lu&quot;, [a retainCount]); [a retain]; NSLog(@&quot;%lu&quot;, [a retainCount]); [a release]; NSLog(@&quot;%lu&quot;, [a retainCount]); [a release]; NSLog(@&quot;%lu&quot;, [a retainCount]); [a release]; NSLog(@&quot;%lu&quot;, [a retainCount]); // ä¸ºä»€ä¹ˆæ­¤å¤„æ˜¯ 1 ä¸æ˜¯ 0å—ï¼Ÿ return 0;&#125; å¯¹è±¡æ‰€æœ‰æƒ(object ownership)å¦‚æžœä¸€ä¸ªå¯¹è±¡å†…æœ‰æŒ‡å‘å…¶ä»–å¯¹è±¡çš„å®žä¾‹å˜é‡ï¼Œåˆ™ç§° è¯¥å¯¹è±¡æ‹¥æœ‰è¿™äº›å¯¹è±¡ã€‚ è®¿é—®æ–¹æ³•ä¸­çš„ä¿ç•™å’Œé‡Šæ”¾æ‰€æœ‰å¯¹è±¡æ”¾å…¥æ± ä¸­ @autoreleasepool/NSAutoreleasePoolï¼š è‡ªåŠ¨é‡Šæ”¾æ±  NSObjectæä¾›autoreleaseæ–¹æ³•ï¼š- (id) autorelease; 2 Cocoaçš„å†…å­˜ç®¡ç†è§„åˆ™ 3 å¼‚å¸¸ä¸Žå¼‚å¸¸æœ‰å…³çš„å…³é”®å­— @try @catch @finally @throw æ•æ‰ä¸åŒç±»åž‹çš„å¼‚å¸¸123456@try &#123;&#125; @catch (MyCustomException *custom) &#123;&#125; @catch (NSException *exception) &#123;&#125; @catch (id value) &#123;&#125; @finally &#123;&#125; æŠ›å‡ºå¼‚å¸¸æŠ›å‡ºå¼‚å¸¸çš„ä¸¤ç§æ–¹å¼ï¼š @throwå¼‚å¸¸å å‘æŸä¸ªNSExceptionå¯¹è±¡å‘é€raiseæ¶ˆæ¯1234NSException *theException = [NSException exceptionWithName: ...];@throw theException;[theException raise]; åŒºåˆ«ï¼šraiseåªå¯¹NSExceptionå¯¹è±¡æœ‰æ•ˆï¼Œ@throwå¼‚å¸¸åå¯ç”¨åœ¨å…¶ä»–å¯¹è±¡ä¸Šã€‚ å¼‚å¸¸ä¹Ÿéœ€è¦å†…å­˜ç®¡ç†å¼‚å¸¸å’Œè‡ªåŠ¨é‡Šæ”¾æ± ]]></content>
      <categories>
        <category>Objective-C</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 26 ä½¿ç”¨æœ¬åœ°ç”¨æˆ·é€šçŸ¥]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-26.html</url>
    <content type="text"><![CDATA[iOS 10 ä¹‹å‰ç”¨æˆ·é€šçŸ¥ç›¸å¯¹è€Œè¨€æ˜¯ç®€å•çš„ï¼ŒiOS 10è®©ç”¨æˆ·é€šçŸ¥æ›´åŠ ä¸°å¯Œäº†ï¼Œå¯ä»¥æœ‰é™æ€å›¾ç‰‡ï¼ŒåŠ¨æ€gifï¼Œè§†é¢‘ï¼ŒéŸ³é¢‘ç­‰ã€‚ ç”¨æˆ·é€šçŸ¥å¯ä»¥å‡ºçŽ°åœ¨é€šçŸ¥ä¸­å¿ƒï¼Œä¸»å±ï¼Œé”å±æ—¶ï¼Œå½“ç”¨æˆ·é”™è¿‡äº†ç”¨æˆ·é€šçŸ¥æ—¶ï¼Œå¯ä»¥åœ¨é€šçŸ¥ä¸­å¿ƒæŸ¥çœ‹ã€‚ ç”¨æˆ·é€šçŸ¥åˆ†ä¸ºä¸¤ç±»ï¼š æœ¬åœ°é€šçŸ¥ã€‚ æ˜¯é€šè¿‡åº”ç”¨æœ¬èº«å’Œç”¨æˆ·è®¾å¤‡æœ¬èº«è§¦å‘çš„ã€‚æ¯”å¦‚ï¼šåŸºäºŽç”¨æˆ·ä½ç½®çš„appï¼Œåœ¨ç”¨æˆ·è¿›å…¥æŸä¸ªç‰¹æ®ŠåŒºåŸŸå‘é€é€šçŸ¥ï¼›to-do listçš„appåœ¨æŸäº›ç‰¹å®šæ—¶é—´å‘é€é€šçŸ¥ã€‚ è¿œç¨‹é€šçŸ¥ã€‚ æ˜¯è¿œç¨‹æœåŠ¡å™¨ç«¯é¦–å…ˆå‘è‹¹æžœæŽ¨é€æœåŠ¡å™¨ï¼ˆApple Push Notification Service ï¼ŒAPNSï¼‰å‘é€ï¼Œç„¶åŽå†ç»è¿‡APNSæŽ¨é€é€šçŸ¥åˆ°ç”¨æˆ·è®¾å¤‡ã€‚ è¿™ä¸€ç¯‡åªè®¨è®ºæœ¬åœ°é€šçŸ¥ã€‚ ä¸‰ç§ä¸åŒè§¦å‘çš„æœ¬åœ°é€šçŸ¥ï¼š ç‰¹å®šæ•°é‡çš„æ—¶é—´ã€‚ æ¯”å¦‚æ˜¯10åˆ†é’ŸåŽã€‚ ç‰¹å®šæ—¥æœŸå’Œæ—¶é—´ç‚¹ã€‚ ç‰¹å®šä½ç½®ã€‚ è¯¢é—®ç”¨æˆ·æŽˆæƒå‘ç”¨æˆ·å‘é€é€šçŸ¥æ˜¯è¦å¾—åˆ°ç”¨æˆ·å…è®¸çš„ã€‚ åœ¨AppDelegate.swiftä¸­æ·»åŠ  import UserNotifications åœ¨application(_:didFinishLaunchingWithOptions:)æ–¹æ³•ä¸­æ·»åŠ æŽˆæƒ12345678UNUserNotificationCenter.current().requestAuthorization(options: [.alert, .sound, .badge], completionHandler: &#123; (granted, error) in if granted &#123; print(&quot;User notifications are allowed.&quot;) &#125; else &#123; print(&quot;User notifications are not allowed.&quot;) &#125;&#125;) åˆ›å»ºé€šçŸ¥é€šçŸ¥çš„ä¸€èˆ¬ç»“æž„ï¼š é€šçŸ¥ç”¨UNMutableNotificationContentç±»æ¥è¡¨ç¤ºã€‚ åœ¨RestaurantTableViewControllerä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³• 12345678910111213141516171819202122func prepareNotification() &#123; // Make sure the restaurant array is not empty if restaurants.count &lt;= 0 &#123; return &#125; // 1 let randomNum = Int(arc4random_uniform(UInt32(restaurants.count))) let suggestedRestaurant = restaurants[randomNum] // 2 let content = UNMutableNotificationContent() content.title = &quot;Restaurant Recommendation&quot; content.subtitle = &quot;Try new food today&quot; content.body = &quot;I recommend you to check out \(suggestedRestaurant.name!).The restaurant is one of your favorites. It is located at \(suggestedRestaurant.location!). Would you like to give it a try?&quot; content.sound = UNNotificationSound.default() // 3 let trigger = UNTimeIntervalNotificationTrigger(timeInterval: 10, repeats: false) let request = UNNotificationRequest(identifier: &quot;foodpin.restaurantSuggestion&quot;, content: content, trigger: trigger) // Schedule the notification UNUserNotificationCenter.current().add(request, withCompletionHandler: nil) &#125; 1 èŽ·å¾—ä¸€ä¸ªéšæœºçš„restaurant 2 é€šè¿‡UNMutableNotificationContentèŽ·å¾—ä¸€ä¸ªé€šçŸ¥ï¼Œé…ç½®å‚æ•°ï¼Œsoundè¡¨ç¤ºéœ€è¦é€šçŸ¥å£°éŸ³ã€‚ 3 UNTimeIntervalNotificationTriggeræ˜¯ä¸€ä¸ªæ—¶é—´è§¦å‘ï¼Œä¸ºäº†å¥½æµ‹è¯•ï¼Œè¡¨ç¤º10såŽé€šçŸ¥ä¸€æ¬¡ã€‚ åœ¨viewDidLoadä¸­å®žçŽ°ä¸Šé¢å‡½æ•°ã€‚prepareNotification() çŽ°åœ¨è¿è¡Œï¼Œæ³¨æ„åœ¨åº”ç”¨å†…æ˜¯ä¸èƒ½æŽ¥å—æœ¬åº”ç”¨é€šçŸ¥ï¼Œæ‰€ä»¥è¿è¡ŒåŽç«‹å³è¿›å…¥ä¸»å±æˆ–é”å±ã€‚é€šçŸ¥æœ¬èº«æœ‰é«˜åº¦é™åˆ¶ï¼Œå†…å®¹è¿‡é•¿ä¼šä¸æ˜¾ç¤ºï¼Œåªè¦å‘ä¸‹æ»‘åŠ¨å°±å¯ä»¥æ˜¾ç¤ºå®Œæ•´ã€‚ å‘é€šçŸ¥ä¸­æ·»åŠ å›¾ç‰‡å›¾ç‰‡ç­‰å¯Œæ–‡æœ¬å†…å®¹é€šè¿‡UNMutableNotificationContentçš„attachmentså±žæ€§æ·»åŠ ï¼Œattachmentså±žæ€§æ˜¯UNNotificationAttachmentçš„æ•°ç»„ã€‚UNNotificationAttachmentå¯ä»¥æ˜¯å›¾ç‰‡ã€éŸ³é¢‘ã€éŸ³æ•ˆã€è§†é¢‘æ–‡ä»¶ã€‚ åœ¨prepareNotificationä¸­çš„è§¦å‘ä¹‹å‰æ·»åŠ ä»£ç ï¼š 123456789101112// 1let tempDirURL = URL(fileURLWithPath: NSTemporaryDirectory(), isDirectory: true)let tempFileURL = tempDirURL.appendingPathComponent(&quot;suggested-restaurant.jpg&quot;)if let image = UIImage(data: suggestedRestaurant.image! as Data) &#123; // 2 try? UIImageJPEGRepresentation(image, 1.0)?.write(to: tempFileURL) if let restaurantImage = try? UNNotificationAttachment(identifier: &quot;restaurantImage&quot;, url: tempFileURL, options: nil) &#123; content.attachments = [restaurantImage] &#125;&#125; 1 ç”±äºŽä½¿ç”¨Core Dataï¼Œå›¾ç‰‡ä»¥NSDataå½¢å¼å­˜å‚¨äº†ï¼Œæ‰€ä»¥ä½¿ç”¨NSTemporaryDirectoryæ¥ç”Ÿæˆä¸´æ—¶ç›®å½•å­˜å‚¨ä¸´æ—¶å›¾ç‰‡æ–‡ä»¶ 2 UIImageJPEGRepresentationç”¨æ¥ç”Ÿæˆjpgå›¾ç‰‡æ–‡ä»¶ è¿è¡ŒæŸ¥çœ‹ï¼ŒåŒæ ·å‘ä¸‹æ»‘åŠ¨å¯æŸ¥çœ‹å®Œæ•´ã€‚ å’Œé€šçŸ¥çš„äº¤äº’ä¹‹å‰åªè¦ç‚¹å‡»é€šçŸ¥è¿›å…¥åº”ç”¨çš„äº¤äº’ï¼Œè¿™æ˜¯é»˜è®¤çš„äº¤äº’ã€‚ åœ¨prepareNotificationä¸­çš„è§¦å‘ä¹‹å‰æ·»åŠ ä»£ç ï¼š 123456789101112 // 1let categoryIdentifer = &quot;foodpin.restaurantaction&quot;// 3let makeReservationAction = UNNotificationAction(identifier: &quot;foodpin.makeReservation&quot;, title: &quot;Reserve a table&quot;, options: [.foreground])let cancelAction = UNNotificationAction(identifier: &quot;foodpin.cancel&quot;, title: &quot;Later&quot;, options: [])// 4let category = UNNotificationCategory(identifier: categoryIdentifer, actions:[makeReservationAction, cancelAction], intentIdentifiers: [], options: [])// 5UNUserNotificationCenter.current().setNotificationCategories([category])// 2 content.categoryIdentifier = categoryIdentifer 1,2 categoryIdentifieræ˜¯è®©é€šçŸ¥å’Œcategoryå…³è”èµ·æ¥ 3 UNNotificationActionæœ‰ç‚¹ç±»ä¼¼UIAlertActionï¼Œoptions: [.foreground]è¡¨ç¤ºè®©åº”ç”¨åˆ°å‰å°ï¼Œå°±æ˜¯å¯åŠ¨åº”ç”¨ 4 UNNotificationCategoryæœ‰ç‚¹ç±»ä¼¼UIAlertController 5 æŠŠUNNotificationCategoryæ³¨å†Œåˆ°ç”¨æˆ·ä¸­å¿ƒ å¤„ç†Actionsä¸Šé¢çš„options: [.foreground]åªæ˜¯å¯åŠ¨äº†åº”ç”¨ï¼Œæ²¡æœ‰å®žçŽ°å…·ä½“æ“ä½œã€‚UNUserNotificationCenterDelegateä¸­çš„userNotificationCenter(_:didReceive:withCompletionHandler:)æ–¹æ³•åœ¨UNNotificationActionè¢«é€‰æ‹©æ—¶è°ƒç”¨ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•å†…éƒ¨å¯å®žçŽ°å…·ä½“æ“ä½œã€‚ è®©AppDelegateç¬¦åˆåè®®UNUserNotificationCenterDelegate å®žçŽ°userNotificationCenter(_:didReceive:withCompletionHandler:) 123456789101112131415161718func userNotificationCenter(_ center: UNUserNotificationCenter, didReceive response: UNNotificationResponse, withCompletionHandler completionHandler: @escaping () -&gt; Void) &#123; // 1 if response.actionIdentifier == &quot;foodpin.makeReservation&quot; &#123; print(&quot;Make reservation...&quot;) // 2 if let phone = response.notification.request.content.userInfo[&quot;phone&quot;] &#123; let telURL = &quot;tel://\(phone)&quot; if let url = URL(string: telURL) &#123; if UIApplication.shared.canOpenURL(url) &#123; print(&quot;calling \(telURL)&quot;) // 3 UIApplication.shared.open(url) &#125; &#125; &#125; &#125; completionHandler()&#125; 1 å¯¹åº”ä¹‹å‰åˆ›å»ºUNNotificationActionæ—¶çš„identifierã€‚ 2 response.notification.request.contentå¯¹åº”ä¹‹å‰åˆ›å»ºé€šçŸ¥prepareNotificationå‡½æ•°ä¸­çš„UNMutableNotificationContentï¼ŒuserInfoå±žæ€§å¯ç”¨æ¥å­˜å‚¨é€šçŸ¥æƒ³ä¼ é€’çš„æ•°æ®ã€‚æ¯”å¦‚åœ¨prepareNotificationå‡½æ•°ä¸­æ·»åŠ content.userInfo = [&quot;phone&quot;: suggestedRestaurant.phone!]ï¼Œè¿™è¾¹å°±å¯èŽ·å¾—ã€‚ 3 æ‹¨æ‰“ç”µè¯ã€‚ åœ¨content.userInfo = [&quot;phone&quot;: suggestedRestaurant.phone!]ä¸­æ·»åŠ UNUserNotificationCenter.current().delegate = selfã€‚ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 25 ä½¿ç”¨3D Touch]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-25.html</url>
    <content type="text"><![CDATA[æŽ¥ç€ä¸Šä¸€ç¯‡ å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 24 ä½¿ç”¨TestFlightè¿›è¡ŒBetaæµ‹è¯• ï¼Œè¿™ä¸€ç¯‡å­¦ä¹ ä½¿ç”¨3D Touchã€‚ è‡ªä»ŽiPhone 6så’ŒiPhone 6s Pluså¼€å§‹ï¼ŒAppleä»‹ç»äº†ä¸€ç§æ–°çš„äº¤äº’æ–¹å¼å°±æ˜¯3D Touchã€‚è¿™æ–°çš„ç‰¹æ€§éœ€è¦ç¡¬ä»¶çš„æ”¯æŒï¼Œæ˜¯iPhoneå±å¹•ä¸ä»…èƒ½æ„Ÿåº”åˆ°è§¦æ‘¸ï¼Œè¿˜èƒ½æ„Ÿåº”åˆ°åŽ‹åŠ›ã€‚ çŽ°åœ¨3D Touchä¸»è¦æœ‰ä¸‰ç±»äº¤äº’æ–¹å¼ï¼š Quick Action ï¼šç‚¹å‡»åº”ç”¨å›¾æ ‡åŽçš„å¿«æ·æ“ä½œã€‚ðŸ‘‡æ˜¯ä¾‹å­ï¼š Peek(preview) å’Œ Pop(commit)ä¸€èˆ¬æ˜¯ä¸€èµ·çš„ ï¼šä¸»è¦åº”ç”¨äºŽappä¸­å¿«é€ŸæŸ¥çœ‹è¯¦ç»†å†…å®¹ã€‚è‡ªå¸¦çš„Photos appæ˜¯å¾ˆå¥½çš„ä¾‹å­ï¼š å¾®ä¿¡å…¬ä¼—å·ä¹Ÿæ˜¯ä¸é”™çš„ä¾‹å­ï¼š Home Screen Quick Action Quick Actionåˆ†ä¸¤ç§ï¼š é™æ€çš„ï¼šåœ¨Info.plistä¸­ç¼–å†™ï¼Œå›ºå®šä¸å˜çš„ã€‚ åŠ¨æ€çš„ï¼šåœ¨ä»£ç ä¸­åˆ›å»ºå’Œæ›´æ–°ã€‚ä»¥è‡ªå¸¦çš„News appä¸ºä¾‹ï¼š ä¸åŒçš„é¢‘é“æ˜¯éšç€æ—¶é—´è€Œå˜åŒ–çš„ã€‚ é™æ€çš„Quick Action é™æ€çš„Quick Actionåªéœ€è¦åœ¨Info.plistä¸­é…ç½®UIApplicationShortcutItemsæ•°ç»„å°±å¯ä»¥äº†ï¼Œæ•°ç»„çš„æ¯ä¸€é¡¹ï¼ˆå­—å…¸ï¼‰å°±æ˜¯ä¸€ä¸ªActionï¼Œæ¯ä¸€ä¸ªActionæœ‰6ä¸ªç±»åž‹çš„å­—æ®µé…ç½®ï¼š UIApplicationShortcutItemType(å¿…é¡») UIApplicationShortcutItemTitle(å¿…é¡») UIApplicationShortcutItemSubtitle(å¯é€‰) UIApplicationShortcutItemIconType(å¯é€‰) UIApplicationShortcutItemIconFile(å¯é€‰) UIApplicationShortcutItemUserInfo(å¯é€‰)å¦‚æžœæ˜¯ä¸‹é¢é…ç½®ï¼š ç»“æžœå°±æ˜¯ï¼š åŠ¨æ€çš„Quick ActionåŠ¨æ€çš„çš„Quick Actioné…ç½®åªè¦åœ¨AppDelegate.swiftçš„application(:didFinishLaunchingWithOptions)ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç å³å¯ï¼š 12let shortcutItem = UIApplicationShortcutItem(type: &quot;com.andyron.NewRestaurant&quot;, localizedTitle: &quot;New Restaurant&quot;, localizedSubtitle: nil, icon: UIApplicationShortcutIcon(type: .add), userInfo: nil)UIApplication.shared.shortcutItems = [shortcutItem] ä½¿ç”¨åŠ¨æ€çš„Quick Actioné…ç½®æˆ‘çš„FoodPinåº”ç”¨ç”±äºŽæˆ‘ä¹‹å‰ä½¿ç”¨UIPageViewControlleråˆ›å»ºäº†å¼€å§‹ç»“æŸé¡µé¢ï¼Œå¦‚æžœåœ¨åœ¨AppDelegate.swiftçš„application(:didFinishLaunchingWithOptions)ä¸­æ·»åŠ åŠ¨æ€çš„Quick Actionå°±ä¼šå‡ºçŽ°ç›´æŽ¥è·³è¿‡ä»‹ç»é¡µé¢çš„æƒ…å†µï¼Œæ‰€ä»¥è¦åœ¨çœ‹å®Œç»“æŸä¹Ÿä¹‹åŽå†æ·»åŠ Quick Actionã€‚ ä¸‹è½½å›¾æ ‡ï¼Œæ‹–è¿›Assets.xcassets åœ¨WalkthroughContentViewControllerçš„nextButtonTappedæ–¹æ³•çš„case 2: é‡Œæ·»åŠ 3ä¸ªActionï¼š 123456789101112// 1if traitCollection.forceTouchCapability == UIForceTouchCapability.available &#123; let bundleIdentifier = Bundle.main.bundleIdentifier // 2 let shortcutItem1 = UIApplicationShortcutItem(type: &quot;\(bundleIdentifier).OpenFavorites&quot;, localizedTitle: &quot;Show Favorites&quot;, localizedSubtitle: nil, icon: UIApplicationShortcutIcon(templateImageName: &quot;favortie-shortcut&quot;), userInfo: nil) let shortcutItem2 = UIApplicationShortcutItem(type: &quot;\(bundleIdentifier).OpenDiscover&quot;, localizedTitle: &quot;Discover restaurants&quot;, localizedSubtitle: nil, icon: UIApplicationShortcutIcon(templateImageName: &quot;discover-shortcut&quot;), userInfo: nil) let shortcutItem3 = UIApplicationShortcutItem(type: &quot;\(bundleIdentifier).NewRestaurant&quot;, localizedTitle: &quot;New Restaurant&quot;, localizedSubtitle: nil, icon: UIApplicationShortcutIcon(type: .add), userInfo: nil) // 3 UIApplication.shared.shortcutItems = [shortcutItem1, shortcutItem2, shortcutItem3]&#125; 1 åˆ¤æ–­è®¾å¤‡æ˜¯å¦æ”¯æŒ3D Touch 2 UIApplicationShortcutIconå¯ä»¥ä½¿ç”¨ç³»ç»Ÿçš„å›¾æ ‡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¤–éƒ¨å›¾æ ‡ 3 shortcutItemsæ•°ç»„é¡ºåºå¯¹åº”ä»Žé è¿‘å›¾æ ‡å¼€å§‹å‘ä¸Šæˆ–å‘ä¸‹æ˜¾ç¤º å®žçŽ°Quick Actionçš„å…·ä½“è·³è½¬åŠ¨ä½œUIApplicationDelegateåè®®ä¸­çš„application(_:performActionFor:completionHandler:)æ–¹æ³•ä¼šåœ¨Quick Actionè¢«ç‚¹å‡»åŽè°ƒç”¨ã€‚ åœ¨AppDelegate.swiftæ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªQuickActionæžšä¸¾ã€‚åˆ—ä¸¾å‡ºquick actionç›¸å…³åŠ¨ä½œã€‚ 123456789101112enum QuickAction: String &#123; case OpenFavorites = &quot;OpenFavorites&quot; case OpenDiscover = &quot;OpenDiscover&quot; case NewRestaurant = &quot;NewRestaurant&quot; init?(fullIdentifier: String) &#123; guard let shortcutIdentifier = fullIdentifier.components(separatedBy: &quot;.&quot;).last else &#123; return nil &#125; self.init(rawValue: shortcutIdentifier) &#125;&#125; åœ¨AppDelegateä¸­å®žçŽ°application(_:performActionFor:completionHandler:)æ–¹æ³•ï¼š 12345678910111213141516171819202122232425262728func application(_ application: UIApplication, performActionFor shortcutItem: UIApplicationShortcutItem, completionHandler: @escaping (Bool) -&gt; Void) &#123; completionHandler(handleQuickAction(shortcutItem: shortcutItem))&#125;private func handleQuickAction(shortcutItem: UIApplicationShortcutItem) -&gt; Bool &#123; let shortcutType = shortcutItem.type guard let shortcutIdentifier = QuickAction(fullIdentifier: shortcutType) else &#123; return false &#125; guard let tabBarController = window?.rootViewController as? UITabBarController else &#123; return false &#125; switch shortcutIdentifier &#123; case .OpenFavorites: tabBarController.selectedIndex = 0 case .OpenDiscover: tabBarController.selectedIndex = 1 case .NewRestaurant: if let navController = tabBarController.viewControllers?[0] &#123; let restaurantTableViewController = navController.childViewControllers[0] restaurantTableViewController.performSegue(withIdentifier: &quot;addRestaurant&quot;, sender: restaurantTableViewController) &#125; else &#123; return false &#125; &#125; return false&#125; Peek å’Œ Pop åœ¨RestaurantTableViewControllerçš„viewDidLoadæ–¹æ³•ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ã€‚ä½¿ç”¨UIViewControllerä¸­çš„registerForPreviewingæ–¹æ³•æ³¨å†Œä½¿ç”¨peekå’Œpopã€‚ 1234// å¦‚æžœ3D Touchå¯ä»¥ç”¨ï¼Œå°±æ³¨å†Œæœ¬æŽ§åˆ¶å™¨å¯ä»¥peekå’Œpopif traitCollection.forceTouchCapability == .available &#123; registerForPreviewing(with: self as! UIViewControllerPreviewingDelegate, sourceView: view)&#125; è®©RestaurantTableViewControllerç¬¦åˆUIViewControllerPreviewingDelegateåè®®ï¼š class RestaurantTableViewController: UITableViewController, NSFetchedResultsControllerDelegate, UISearchResultsUpdating, UIViewControllerPreviewingDelegate { å®žçŽ°UIViewControllerPreviewingDelegateåè®®çš„æ–¹æ³•ï¼š 1234567891011121314151617181920212223242526272829// å½“æŒ‰åŽ‹æ—¶è°ƒç”¨ï¼ˆpeekï¼‰func previewingContext(_ previewingContext: UIViewControllerPreviewing, viewControllerForLocation location: CGPoint) -&gt; UIViewController? &#123; // 1 guard let indexPath = tableView.indexPathForRow(at: location) else &#123; return nil &#125; // 2 guard let cell = tableView.cellForRow(at: indexPath) else &#123; return nil &#125; // 3 guard let restaurantDetailViewController = storyboard?.instantiateViewController(withIdentifier: &quot;RestaurantDetailViewController&quot;) as? RestaurantDetailViewController else &#123; return nil &#125; let selectedRestaurant = restaurants[indexPath.row] restaurantDetailViewController.restaurant = selectedRestaurant // 4 restaurantDetailViewController.preferredContentSize = CGSize(width: 0.0, height: 450.0) previewingContext.sourceRect = cell.frame return restaurantDetailViewController&#125;// popæ—¶è°ƒç”¨func previewingContext(_ previewingContext: UIViewControllerPreviewing, commit viewControllerToCommit: UIViewController) &#123; show(viewControllerToCommit, sender: self)&#125; 1 é€šè¿‡æŒ‰åŽ‹çš„ä½ç½®èŽ·å¾—indexPath 2 é€šè¿‡indexPathèŽ·å¾—cell 3 é€šè¿‡æŽ§åˆ¶å™¨çš„Storyboard IDèŽ·å¾—æŽ§åˆ¶å™¨ï¼Œä¹‹å‰å¦‚æžœæ²¡æœ‰å¡«å†™Storyboard IDï¼ŒçŽ°åœ¨ä¹Ÿå¯å¡«å†™åˆé€‚Storyboard IDã€‚ 4 ç»™peekçš„é¢„è§ˆé¡µé¢ä¸€ä¸ªé«˜åº¦é™åˆ¶ï¼Œéžå¿…é¡»ã€‚ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 24 ä½¿ç”¨TestFlightè¿›è¡ŒBetaæµ‹è¯•]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-24.html</url>
    <content type="text"><![CDATA[Betaæµ‹è¯•æ˜¯åœ¨äº§å“å‘å¸ƒä¹‹å‰æ‰€è¿›è¡Œçš„è½¯ä»¶æµ‹è¯•æ´»åŠ¨ï¼Œå®ƒæ˜¯æŠ€æœ¯æµ‹è¯•çš„æœ€åŽä¸€ä¸ªé˜¶æ®µï¼Œé€šè¿‡äº†éªŒæ”¶æµ‹è¯•ï¼Œäº§å“å°±ä¼šè¿›å…¥å‘å¸ƒé˜¶æ®µã€‚ åœ¨iOS 8 æ—¶ï¼ŒAppleå‘å¸ƒTestFlightç”¨äºŽBetaæµ‹è¯•ã€‚ä¹‹å‰TestFlightä¸€ç›´æ˜¯ç‹¬ç«‹ç”¨æˆ·mobile appæµ‹è¯•çš„mobileå¹³å°ï¼Œåœ¨2014å¹´2æœˆï¼ŒAppleæ”¶è´­çš„TestFlightæ¯å…¬å¸Burstlyã€‚çŽ°åœ¨TestFlightå·²ç»é›†æˆåˆ°iTunes Connectä¸­ï¼Œå…è®¸å¼€å‘åªé€šè¿‡é‚®ä»¶åœ°å€é‚€è¯·Betaæµ‹è¯•ç”¨æˆ·ã€‚ åœ¨iTunes Connectä¸­åˆ›å»ºä¸€ä¸ªApp Record iTunes Connect æ˜¯ä¸ºiOSå¼€å‘è€…æä¾›åœ¨App Storeç®¡ç†é”€å”®ä»–ä»¬appsçš„Webåº”ç”¨å·¥å…·ã€‚ åœ¨ä¸Šä¼ appä¹‹å‰ï¼Œå¿…é¡»è¦åœ¨ iTunes Connectä¸­æœ‰App Recordã€‚ éœ€è¦æä¾›ä¸‹åˆ—ä¿¡æ¯ï¼š Platform App name Primary language Bundle ID SKU åˆ›å»ºæˆæžœåŽä¼šè·³åˆ°ä¸‹ä¸€ä¸ªé¡µé¢ Appä¿¡æ¯è¿™ä¸€æ­¥ä¸»è¦é€‰æ‹©ä¸€ä¸‹Appåˆ†ç±»çš„ç±»åˆ«ã€‚ ä»·æ ¼ä¸Žé”€å”®èŒƒå›´ å‡†å¤‡æäº¤è¿™ä¸€æ­¥ä¸»è¦æ·»åŠ æˆªå›¾ã€appæè¿°ã€appå›¾æ ‡ã€è”ç³»ä¿¡æ¯ç­‰ä¿¡æ¯ é¢„è§ˆå›¾å’Œæˆªå›¾æé«˜è‡³å°‘ä¸€å¼ 5.5 è‹±å¯¸çš„æˆªå›¾(1242x2208 pixels) ï¼ŒiTunes Connectä¼šè‡ªåŠ¨ç”Ÿæˆå…¶ä»–å±å¹•å°ºå¯¸çš„å›¾ç‰‡ã€‚è¯¦ç»†å¯å‚è€ƒiTunes Connect Developer Guide æˆ– iTunes Connect å¼€å‘äººå‘˜å¸®åŠ©ï¼ˆä¸­æ–‡ï¼‰ appæè¿°å¡«å†™ä¸€äº›ç›¸å…³æè¿°ï¼Œå…³é”®è¯ï¼ˆä»¥é€—å·åˆ†éš”ï¼‰ï¼ŒURLç­‰ App ç»¼åˆä¿¡æ¯ è¿™è¾¹çš„App Store å›¾æ ‡è¦æ±‚æ˜¯1024x1024 pixelsï¼Œä¸èƒ½åŒ…å«éšè—å…ƒç´ ã€‚ App å®¡æ ¸ä¿¡æ¯ ç‰ˆæœ¬å‘å¸ƒ æ›´æ–°Build stringå›žåˆ°Xcodeï¼Œç¡®è®¤ç‰ˆæœ¬æ•°å­—ä¸ŽiTunes Connectä¸­ä¸€è‡´ã€‚ å‡†å¤‡App Iconå’Œå¯åŠ¨é¡µå›¾ç‰‡ åˆ©ç”¨ç±»ä¼¼å›¾æ ‡å·¥åœºè¿™ç§ç§»åŠ¨åº”ç”¨å›¾æ ‡ç”Ÿæˆå·¥å…·ï¼Œå¯ç”Ÿæˆä¸€äº›å¤§å°çš„å›¾æ ‡ã€‚ å¯ä»¥åœ¨Finderä¸­ç›´æŽ¥å¤åˆ¶AppIcon.appiconsetç›®å½•æ›¿ä»£å³å¯ã€‚ åœ¨é»˜äººçš„å¯åŠ¨å¼€å§‹é¡µé¢LaunchScreen.storyboardä¸­ï¼Œæ·»åŠ ä¸€ä¸ªå›¾ç‰‡ã€‚ æ‰“åŒ…å’ŒéªŒè¯Appåœ¨ä¸Šä¼ appåˆ°iTunes Connectä¹‹å‰ï¼Œå¦‚è¦åˆ›å»ºappåŒ…ï¼Œè¿™åœ¨Xcode 8ä¹‹åŽå·²ç»éžå¸¸å®¹æ˜“äº†ã€‚ åœ¨ä¸»èœå•ä¸­é€‰æ‹©Product &gt; Scheme &gt; Edit Schemeï¼šç¡®è®¤Build Configurationæ˜¯Releaseï¼š åœ¨ä¸»èœå•ä¸­é€‰æ‹©Product &gt; Archiveï¼Œå¯èƒ½éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ã€‚ æ‰“åŒ…æˆåŠŸåŽï¼Œåœ¨ä¸»èœå•ä¸­æ‰“å¼€Window &gt; Organizerï¼Œå‡ºçŽ°å¦‚ä¸‹ç•Œé¢ï¼š é€‰æ‹©Validateâ€¦ï¼Œç„¶åŽé€‰æ‹©è‡ªå·±çš„å¼€å‘è€…è´¦å·ï¼š ç‚¹å‡»Validateï¼Œä¹‹åŽå¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´ï¼š ä¸Šä¼ åº”ç”¨åˆ°iTunes Connect ä¸Šé¢çš„éªŒè¯æˆåŠŸåŽï¼Œç‚¹å‡»Upload to App Storeâ€¦ï¼Œç„¶åŽåœ¨ç‚¹å‡»Uploadï¼Œè¿™ä¸ªè¿‡ç¨‹å¯èƒ½ä¹Ÿéœ€è¦æ¯”è¾ƒé•¿çš„æ—¶é—´ã€‚ ç®¡ç†å†…éƒ¨æµ‹è¯•ç”¨æˆ· å†…éƒ¨ç”¨æˆ·ä¹Ÿå°±æ˜¯ iTunes Connect ç”¨æˆ·ï¼Œæœ€å¤šå¯æ·»åŠ 25ä¸ªã€‚å¯åœ¨ç”¨æˆ·å’ŒèŒèƒ½ä¸­æ·»åŠ ã€‚ æ·»åŠ iTunes Connect ç”¨æˆ· æ·»åŠ å†…éƒ¨æµ‹è¯•ç”¨æˆ·åŽï¼Œå†…éƒ¨æµ‹è¯•ç”¨æˆ·ä¼šæ”¶åˆ°é‚®ä»¶ï¼Œå†…é¢æœ‰éªŒè¯ç ã€‚ ä¸‹è½½ TestFlight åº”ç”¨ç„¶åŽåœ¨ Redeemä¸­è¾“å…¥éªŒè¯ç ï¼Œå³å¯ä¸‹è½½å®‰è£…åº”ç”¨æµ‹è¯•ã€‚ ç®¡ç†å¤–éƒ¨æµ‹è¯•ç”¨æˆ·ï¼ˆBetaæµ‹è¯•ç”¨æˆ·ï¼‰ä»¥å‰æ˜¯æœ€å¤§é™åˆ¶2000ï¼ŒçŽ°åœ¨å¯ä»¥é‚€è¯·10000åå¤–éƒ¨æµ‹è¯•äººå‘˜ã€‚å¤–éƒ¨æµ‹è¯•ç”¨æˆ·ä¸éœ€è¦äº‹å…ˆæ·»åŠ ã€‚ å¡«å†™å®Œæ•´æµ‹è¯•ä¿¡æ¯ æ–°å»ºç¾¤ç»„ï¼Œæ¯”å¦‚å°±å«å¤–éƒ¨æµ‹è¯•å‘˜ï¼š ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 22 ä½¿ç”¨CloudKit]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-22.html</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡ å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 21 ä½¿ç”¨WKWebViewå’ŒSFSafariViewController å­¦ä¹ æ‰“å¼€ç½‘é¡µï¼Œè¿™ä¸€ç¯‡å­¦ä¹ ä½¿ç”¨CloudKitã€‚ iCloudæœ€åˆä¹”å¸ƒæ–¯åœ¨WWDC2011æ˜¯å‘å¸ƒçš„ï¼Œåªä¸ºäº†ç»™Appsã€æ¸¸æˆèƒ½å¤Ÿåœ¨äº‘ç«¯æ•°æ®ä¿å­˜ï¼Œè®©Macå’ŒiOSä¹‹é—´æ•°æ®è‡ªåŠ¨åŒæ­¥æ‰€ç”¨ã€‚ æœ€è¿‘å‡ å¹´æ‰æ¸æ¸æˆé•¿ä¸ºäº‘æœåŠ¡ã€‚å¦‚æžœæƒ³åˆ›å»ºç¤¾äº¤ç±»åž‹çš„ï¼Œå¯ä»¥åˆ†äº«ç”¨æˆ·ä¹‹é—´æ•°æ®çš„appï¼Œå°±å¯è€ƒè™‘ä½¿ç”¨iCloudï¼Œè¿™æ ·å°±ä¸éœ€è¦è‡ªå·±å†åŽ»æž„å»ºä¸€ä¸ªåŽç«¯APIsäº†ã€‚è™½ç„¶å¯èƒ½ç”±äºŽå›½å†…çš„ç½‘ç»œçŽ¯å¢ƒï¼ŒiCloudå®žé™…åº”ç”¨æ•ˆæžœå¹¶ä¸å¥½ï¼Œä¸è¿‡è¿˜æ˜¯æœ‰å¿…è¦å­¦ä¸€ä¸‹çš„ðŸ™‚ã€‚ å¦‚æžœå¼€å‘äº†Webåº”ç”¨ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥è®¿é—®iOSåº”ç”¨çš„iCloudä¸­æ•°æ®ã€‚Appleåˆ†åˆ«æä¾›äº†CloudKit JSå’ŒCloudKitåº“ã€‚ CloudKité»˜è®¤ç»™æˆ‘ä»¬çš„appæä¾›ä¸€äº›å…è´¹çš„ç©ºé—´ï¼š å½“appçš„ç”¨æˆ·çš„æ´»è·ƒæ•°æé«˜ï¼Œå…è´¹ç©ºé—´ä¹Ÿä¼šéšä¹‹æé«˜ï¼Œè¯¦ç»†å¯æŸ¥çœ‹å®˜ç½‘ä»‹ç»ã€‚ ç†è§£CloudKitæ¡†æž¶CloudKitæ¡†æž¶ä¸ä»…æä¾›äº†å­˜å‚¨åŠŸèƒ½ï¼Œè¿˜æä¾›äº†å¼€å‘è€…ä¸ŽiCloudä¹‹é—´çš„å„ç§äº¤äº’ã€‚Containerså’Œdatabaseæ˜¯CloudKitæ¡†æž¶çš„åŸºç¡€å…ƒç´ ã€‚ é»˜è®¤ï¼Œä¸€ä¸ªappå°±æ˜¯ä¸€ä¸ªcontainerï¼Œä»£ç ä¸­å°±æ˜¯CKContainerï¼Œä¸€ä¸ªcontainerä¸­åŒ…æ‹¬ä¸‰ä¸ªdatabase(CKDatabase)ï¼š ä¸€ä¸ªpublic databaseï¼š appä¸­æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½æŸ¥çœ‹ ä¸€ä¸ªshared databaseï¼šappä¸­ä¸€ç»„ç”¨æˆ·èƒ½æŸ¥çœ‹ï¼ˆiOS 10ï¼‰ ä¸€ä¸ªprivate databaseï¼šappä¸­å•ä¸ªç”¨æˆ·æŸ¥çœ‹ ä¸ºåº”ç”¨æ·»åŠ CloudKit é¦–å…ˆéœ€è¦å¼€å‘è€…è´¦å·ã€‚ ç„¶åŽåœ¨Capabilitiesä¸­æ‰“å¼€iCloudã€‚ åœ¨CloudKit Dashboardä¸­ç®¡ç† Record ç‚¹å‡»ä¸Šå›¾ä¸­çš„CloudKit Dashboardï¼Œæˆ–è€…ç›´æŽ¥è®¿é—®https://icloud.developer.apple.com/dashboard/ã€‚æœ€æ–°çš„CloudKit Dashboardçš„é¡µé¢æœ‰äº†ä¸€äº›å˜åŒ–ã€‚é¦–å…ˆè¿›åŽ»çš„æ˜¯åº”ç”¨åˆ—è¡¨ï¼ˆä¹Ÿå°±æ˜¯containeråˆ—è¡¨ï¼‰ï¼Œç‚¹å‡»ä¸€ä¸ªå°±è¿›å…¥å¦‚ä¸‹é¡µé¢ï¼š ç‚¹å‡»Developmentçš„dataï¼Œç±»ä¼¼ä¸‹é¢ é€‰æ‹©Record Typesï¼ˆæœ‰ç‚¹åƒå…³ç³»æ•°æ®ä¸­çš„è¡¨ï¼‰ï¼Œåˆ›å»ºæ–°çš„ç±»åž‹Restaurantï¼Œå¹¶æ·»åŠ å‡ ä¸ªFieldçš„ã€‚ é€‰æ‹©Recordsï¼ˆç±»åž‹è¡¨ä¸­çš„æ•°æ®ï¼‰ï¼Œæ·»åŠ å‡ æ¡æ•°æ®ï¼Œæ³¨æ„é€‰æ‹©public databaseã€‚ ä½¿ç”¨ Convenience APIèŽ·å–public DatabaseCloudKitæä¾›ä¸¤ç§APIsè®©å¼€å‘ä¸ŽiCloudäº¤äº’ï¼šthe convenience API å’Œ the operational APIã€‚ Convenience APIçš„é€šå¸¸è°ƒç”¨æ–¹å¼ï¼š 12345678let cloudContainer = CKContainer.default()let publicDatabase = cloudContainer.publicCloudDatabaselet predicate = NSPredicate(value: true)let query = CKQuery(recordType: &quot;Restaurant&quot;, predicate: predicate)publicDatabase.perform(query, inZoneWith: nil, completionHandler: &#123; (results, error) -&gt; Void in// Process the records&#125;) CKContainer.default()èŽ·å–åº”ç”¨çš„Containerã€‚ publicCloudDatabaseè¡¨ç¤ºé»˜è®¤çš„public databaseã€‚ NSPredicateå’ŒCKQueryæ˜¯æœç´¢æ¡ä»¶ æ–°å»ºDiscoverTableViewControllerï¼Œç»§æ‰¿è‡³UITableViewControllerï¼Œå…³è”discover.storyboardä¸­çš„table viewçš„æŽ§åˆ¶å™¨ï¼› å¹¶ä¿®æ”¹å…¶prototype cellçš„identifierä¸ºCellã€‚ åœ¨DiscoverTableViewController.swiftä¸­åŠ å…¥import CloudKitï¼Œå¹¶å®šä¹‰ä¸€ä¸ªCKRecordçš„æ•°ç»„å˜é‡ï¼š var restaurants:[CKRecord] = [] æ·»åŠ èŽ·å–Recordsçš„å‡½æ•°ï¼š 12345678910111213141516171819202122232425func fetchRecordsFromCloud() &#123; let cloudContainer = CKContainer.default() let publicDatabase = cloudContainer.publicCloudDatabase let predicate = NSPredicate(value: true) let query = CKQuery(recordType: &quot;Restaurant&quot;, predicate: predicate) publicDatabase.perform(query, inZoneWith: nil, completionHandler: &#123; (results, error) -&gt; Void in if error != nil &#123; print(error) return &#125; if let results = results &#123; print(&quot;Completed the download of Restaurant data&quot;) self.restaurants = results OperationQueue.main.addOperation &#123; self.spinner.stopAnimating() self.tableView.reloadData() &#125; &#125; &#125;)&#125; åœ¨performä¸­ï¼Œå½“ç¡®å®šèŽ·å–åˆ°äº†æ•°æ®åŽï¼Œèµ‹å€¼ç»™restaurantsï¼Œå¹¶åˆ·æ–°tableã€‚ åœ¨viewDidLoadä¸­æ·»åŠ ï¼š fetchRecordsFromCloud()ã€‚ æ·»åŠ table viewç›¸å…³ä»£ç†æ–¹æ³•ï¼š 12345678910111213141516171819202122override func numberOfSections(in tableView: UITableView) -&gt; Int &#123; return 1&#125;override func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123; return restaurants.count&#125;override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cell = tableView.dequeueReusableCell(withIdentifier: &quot;Cell&quot;, for:indexPath) // Configure the cell... let restaurant = restaurants[indexPath.row] cell.textLabel?.text = restaurant.object(forKey: &quot;name&quot;) as? String if let image = restaurant.object(forKey: &quot;image&quot;) &#123; let imageAsset = image as! CKAsset if let imageData = try? Data.init(contentsOf: imageAsset.fileURL) &#123; cell.imageView?.image = UIImage(data: imageData) &#125; &#125; return cell&#125; object(forKey:)æ˜¯CKRecordä¸­èŽ·å–Record Fieldå€¼çš„æ–¹æ³•ã€‚ å›¾ç‰‡å¯¹è±¡è½¬æ¢ä¸ºCKAssetã€‚ ä¸ºä»€ä¹ˆæ…¢ï¼Ÿæµ‹è¯•ä»¥ä¸Šä»£ç ï¼Œå‘çŽ°fetchRecordsFromCloudå‡½æ•°ä¸­çš„æ‰“å°ä¿¡æ¯â€Completed the download of Restaurant dataâ€å·²ç»æ˜¾ç¤ºåœ¨æŽ§åˆ¶å°äº†ï¼Œä½†æ˜¯è¿˜éœ€è¦è¿‡ä¸€æ®µæ—¶é—´Appä¸­æ‰èƒ½æ˜¾ç¤ºï¼Œä¹Ÿå°±æ˜¯è¯´å‘iCloudä¸­èŽ·å–å®Œæ•°æ®åŽæ‰å¼€å§‹å‡†å¤‡table viewåŠ è½½ã€‚ è¿™è¾¹å°±éœ€è¦ä½¿ç”¨åˆ°å¤šçº¿ç¨‹çš„æ¦‚å¿µã€‚åœ¨iOSä¸­ï¼ŒUIæ›´æ–°ï¼ˆåƒtableé‡æ–°åŠ è½½ï¼‰å¿…é¡»åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œã€‚è¿™æ ·èŽ·å–iCloudæ•°æ®çš„çº¿ç¨‹åœ¨è¿›è¡Œæ—¶ï¼ŒUIæ›´æ–°ä¹Ÿåœ¨åŒæ­¥è¿›è¡Œã€‚ 123OperationQueue.main.addOperation &#123; self.tableView.reloadData()&#125; ä½¿ç”¨operational APIèŽ·å–public Database Convenience APIåªé€‚åˆç®€å•å’Œå°‘é‡çš„æŸ¥è¯¢ã€‚ æ›´æ–°fetchRecordsFromCloudæ–¹æ³•ï¼š 123456789101112131415161718192021222324252627func fetchRecordsFromCloud() &#123; let cloudContainer = CKContainer.default() let publicDatabase = cloudContainer.publicCloudDatabase let predicate = NSPredicate(value: true) let query = CKQuery(recordType: &quot;Restaurant&quot;, predicate: predicate) // Create the query operation with the query let queryOperation = CKQueryOperation(query: query) queryOperation.desiredKeys = [&quot;name&quot;, &quot;image&quot;] queryOperation.queuePriority = .veryHigh queryOperation.resultsLimit = 50 queryOperation.recordFetchedBlock = &#123; (record) -&gt; Void in self.restaurants.append(record) &#125; queryOperation.queryCompletionBlock = &#123; (cursor, error) -&gt; Void in if let error = error &#123; print(&quot;Failed to get data from iCloud - \(error.localizedDescription)&quot;) return &#125; print(&quot;Successfully retrieve the data from iCloud&quot;) OperationQueue.main.addOperation &#123; self.tableView.reloadData() &#125; &#125; // Execute the query publicDatabase.add(queryOperation)&#125; é€šè¿‡CKQueryOperationä»£æ›¿performæ–¹æ³•,å®ƒæä¾›äº†è®¸å¤šæŸ¥è¯¢é€‰é¡¹ã€‚ desiredKeysä»£è¡¨éœ€è¦æŸ¥è¯¢çš„å­—æ®µã€‚ resultsLimitä»£è¡¨ä¾æ¬¡æŸ¥è¯¢æœ€å¤§Recordæ•°ç›® åŠ è½½æŒ‡ç¤ºï¼ˆèŠèŠ±è½¬ï¼‰ å¯ä»¥åœ¨viewDidLoadä¸­æ·»åŠ ç±»åž‹å¦‚ä¸‹ä»£ç ï¼š 123456let spinner:UIActivityIndicatorView = UIActivityIndicatorView()spinner.activityIndicatorViewStyle = .grayspinner.center = view.centerspinner.hidesWhenStopped = trueview.addSubview(spinner)spinner.startAnimating() ä¹Ÿå¯ä»¥é€šè¿‡åœ¨discover.storyboardä¸­æ·»åŠ ï¼š æ·»åŠ å®Œå‘çŽ° activity indicator viewåœ¨æŽ§åˆ¶å™¨ä¸Šé¢ï¼Œè¿™åœ¨Xcodeä¸­å«The Extra Views åœ¨DiscoverTableViewControllerä¸­æ·»åŠ æŽ¥å£ï¼Œå¹¶å…³è”ã€‚ @IBOutlet var spinner: UIActivityIndicatorView! åœ¨viewDidLoadä¸­æ·»åŠ ä»£ç ï¼š 1234spinner.hidesWhenStopped = truespinner.center = view.centertableView.addSubview(spinner)spinner.startAnimating() æ•°æ®åŠ è½½å®Œè¦éšè—åŠ è½½æç¤ºï¼š1234OperationQueue.main.addOperation &#123; self.spinner.stopAnimating() self.tableView.reloadData() &#125; æ‡’åŠ è½½å›¾ç‰‡æ‡’åŠ è½½å›¾ç‰‡å°±æ˜¯å…ˆåŠ è½½ä¸€ä¸ªæœ¬åœ°é»˜è®¤å›¾ç‰‡ï¼Œæš‚æ—¶ä¸åŠ è½½è¿œç¨‹å›¾ç‰‡ï¼Œå½“å›¾ç‰‡å‡†å¤‡å¥½åœ¨åŽ»æ›´æ–°å›¾ç‰‡è§†å›¾ã€‚ ä¿®æ”¹è¯·æ±‚å­—æ®µdesireKeysï¼Œè®©å¼€å§‹æ—¶ä¸åŠ å›¾ç‰‡: queryOperation.desiredKeys = [&quot;name&quot;] æ›´æ–° tableView(_:cellForRowAt:)ï¼š 1234567891011121314151617181920212223242526272829303132333435override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cell = tableView.dequeueReusableCell(withIdentifier: &quot;Cell&quot;, for: indexPath) let restaurant = restaurants[indexPath.row] cell.textLabel?.text = restaurant.object(forKey: &quot;name&quot;) as? String // Set the default image cell.imageView?.image = UIImage(named: &quot;photoalbum&quot;) // Fetch Image from Cloud in background let publicDatabase = CKContainer.default().publicCloudDatabase let fetchRecordsImageOperation = CKFetchRecordsOperation(recordIDs:[restaurant.recordID]) fetchRecordsImageOperation.desiredKeys = [&quot;image&quot;] fetchRecordsImageOperation.queuePriority = .veryHigh fetchRecordsImageOperation.perRecordCompletionBlock = &#123; (record, recordID, error) -&gt; Void in if let error = error &#123; print(&quot;Failed to get restaurant image: \(error.localizedDescription)&quot;) return &#125; if let restaurantRecord = record &#123; OperationQueue.main.addOperation() &#123; if let image = restaurantRecord.object(forKey: &quot;image&quot;) &#123; let imageAsset = image as! CKAsset print(imageAsset.fileURL) if let imageData = try? Data.init(contentsOf: imageAsset.fileURL) &#123; cell.imageView?.image = UIImage(data: imageData) &#125; &#125; &#125; &#125; &#125; publicDatabase.add(fetchRecordsImageOperation) return cell&#125; CKFetchRecordsOperationé€šè¿‡recordIDèŽ·å¾—ç‰¹å®šçš„Recordã€‚ CKFetchRecordsOperationä¸€äº›æ–¹æ³•ç±»ä¼¼CKQueryOperationã€‚ æ‡’åŠ è½½åŽå‘çŽ°ï¼Œå›¾ç‰‡åœ¨å…¶å®ƒè§†å›¾æ˜¾ç¤ºåŽæ…¢æ…¢å…ˆåŽåŠ è½½æ˜¾ç¤ºã€‚ ä¸‹æ‹‰åˆ·æ–°UIRefreshControlæä¾›äº†æ ‡å‡†çš„ä¸‹æ‹‰åˆ·æ–°ç‰¹æ€§ã€‚ åœ¨DiscoverTableViewControllerçš„viewDidLoadä¸­æ·»åŠ ï¼š12345// Pull To Refresh ControlrefreshControl = UIRefreshControl()refreshControl?.backgroundColor = UIColor.whiterefreshControl?.tintColor = UIColor.grayrefreshControl?.addTarget(self, action: #selector(fetchRecordsFromCloud), for: UIControlEvents.valueChanged) æ¯ä¸€æ¬¡ä¸‹æ‹‰æ˜¯æ˜¾ç¤ºèŠèŠ±è½¬ï¼Œå¹¶ä¸”è°ƒç”¨fetchRecordsFromCloudæ–¹æ³•ã€‚ åœ¨fetchRecordsFromCloudæ–¹æ³•çš„queryCompletionBlockæ·»åŠ æ•°æ®åŠ è½½å®ŒæˆåŽåŽ»é™¤èŠèŠ±è½¬ä»£ç ï¼š 12345if let refreshControl = self.refreshControl &#123; if refreshControl.isRefreshing &#123; refreshControl.endRefreshing() &#125;&#125; åˆ·æ–°ä¼šå‡ºçŽ°é‡å¤æ•°æ®ï¼Œè¦åœ¨fetchRecordsFromCloudæ–¹æ³•å¼€å§‹æ—¶ï¼Œæ¸…ç†æ•°æ®ï¼š 12restaurants.removeAll()tableView.reloadData() ä½¿ç”¨CloudKitä¿å­˜æ•°æ®åˆ°iCloudCKDatabaseçš„save(_:completionHandler:)çš„æ–¹æ³•å¯ç”¨æ¥ä¿å­˜æ•°æ®åˆ°iCloudã€‚å®žçŽ°ç”¨æˆ·æ–°åŠ æ•°æ®æ—¶ï¼Œæ—¢ä¿å­˜åœ¨æœ¬åœ°çš„Core Dataï¼Œæœ‰ä¿å­˜åœ¨iCloudä¸­ã€‚ åœ¨AddRestaurantControllerä¸­æ·»åŠ ï¼šimport CloudKitã€‚ åœ¨AddRestaurantControlleræ·»åŠ æ–¹æ³•ï¼š 12345678910111213141516171819202122232425262728// ä¿å­˜åˆ°Core Dataçš„åŒæ—¶ä¹Ÿä¿å­˜çš„iCloudä¸­func saveRecordToCloud(restaurant:RestaurantMO!) -&gt; Void &#123; // Prepare the record to save let record = CKRecord(recordType: &quot;Restaurant&quot;) record.setValue(restaurant.name, forKey: &quot;name&quot;) record.setValue(restaurant.type, forKey: &quot;type&quot;) record.setValue(restaurant.location, forKey: &quot;location&quot;) record.setValue(restaurant.phone, forKey: &quot;phone&quot;) let imageData = restaurant.image as! Data // Resize the image let originalImage = UIImage(data: imageData)! let scalingFactor = (originalImage.size.width &gt; 1024) ? 1024 / originalImage.size.width : 1.0 let scaledImage = UIImage(data: imageData, scale: scalingFactor)! // Write the image to local file for temporary use let imageFilePath = NSTemporaryDirectory() + restaurant.name! let imageFileURL = URL(fileURLWithPath: imageFilePath) try? UIImageJPEGRepresentation(scaledImage, 0.8)?.write(to: imageFileURL) // Create image asset for upload let imageAsset = CKAsset(fileURL: imageFileURL) record.setValue(imageAsset, forKey: &quot;image&quot;) // Get the Public iCloud Database let publicDatabase = CKContainer.default().publicCloudDatabase // Save the record to iCloud publicDatabase.save(record, completionHandler: &#123; (record, error) -&gt; Void in try? FileManager.default.removeItem(at: imageFileURL) &#125;)&#125; åœ¨saveæ–¹æ³•çš„dismiss(animated:completion:)çš„å‰é¢æ·»åŠ ï¼š saveRecordToCloud(restaurant: restaurant) æŽ’åºCKQueryæœ‰å±žæ€§sortDescriptorså¯ç”¨æ¥æŽ’åºã€‚åœ¨DiscoverTableViewControllerçš„fetchRecordsFromCloudæ–¹æ³•ï¼Œqueryå®šä¹‰åŽæ·»åŠ ï¼š query.sortDescriptors = [NSSortDescriptor(key: &quot;creationDate&quot;, ascending: false)] creationDateæ˜¯é»˜è®¤çš„åˆ›å»ºæ—¶é—´å­—æ®µã€‚ Exerciseï¼šä¿®æ”¹Discoveræ ·å¼ æ–°å»ºä¸€ä¸ªDiscoverTableViewCellï¼Œç»§æ‰¿è‡³UITableViewCellï¼Œå¹¶å…³è”Discoverçš„cellã€‚ ä¿®æ”¹cellåˆé€‚çš„æ ·å¼ï¼Œæ¯”å¦‚ä¸‹é¢ åœ¨DiscoverTableViewCellä¸­æ–°å»ºå››ä¸ªæŽ¥å£ï¼Œå¹¶å…³è”ã€‚ 1234@IBOutlet var nameLabel: UILabel!@IBOutlet var locationLabel: UILabel!@IBOutlet var typeLabel: UILabel!@IBOutlet var thumbnailImageView: UIImageView! æ›´æ–°tableView(_:cellForRowAt:)å’ŒfetchRecordsFromCloudç›¸å…³ä»£ç  ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 21 ä½¿ç”¨WKWebViewå’ŒSFSafariViewController]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-21.html</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 20 ä½¿ç”¨Tab Bar Controller å’Œ æ‹†åˆ†Storyboardå­¦ä¹ äº†å·¥å…·æ å’ŒStoryboardçš„æ‹†åˆ†ï¼Œè¿™ä¸€ç¯‡å­¦ä¹ æ€Žä¹ˆåœ¨appä¸­æ˜¾ç¤ºç½‘é¡µå†…å®¹ã€‚ç”±äºŽåŽŸä¹¦ä¸­ä½¿ç”¨äº†çš„ç½‘ç«™åœ¨å›½å†…ä¸å¥½è®¿é—®ï¼Œæˆ‘å°±ç”¨äº†æˆ‘çš„ç®€ä¹¦ã€åšå®¢ã€Githubä»£æ›¿ðŸ™‚ã€‚ è®¾è®¡about view ä¸‹è½½å›¾ç‰‡æ‹–è¿›Assets.xcassetã€‚ æ‰“å¼€about.storyboardï¼Œæ‹–è¿›ä¸€ä¸ªImage Viewåˆ°table view headerï¼Œheightä¸º190ï¼Œimageä¸ºabout-logoï¼Œcontent modeä¸ºAspect fitã€‚é€‰æ‹©table view cellï¼Œidentifierä¸ºCellï¼Œstyleä¸ºBasicã€‚ æ–°å»ºAboutTableViewControllerç»§æ‰¿è‡³UITableViewControllerï¼Œå…³è”aboutä¸­çš„table view controllerã€‚ åœ¨AboutTableViewControllerï¼Œæ·»åŠ ï¼š123var sectionTitles = [&quot;Leave Feedback&quot;, &quot;Follow Us&quot;]var sectionContent = [[&quot;Rate us on App Store&quot;, &quot;Tell us your feedback&quot;], [&quot;Jianshu&quot;, &quot;Blog&quot;, &quot;Github&quot;]]var links = [&quot;http://www.jianshu.com/u/efce1a2a95ab&quot;, &quot;http://andyron.com&quot;, &quot;https://github.com/andyRon&quot;] table viewçš„ç›¸å…³ä»£ç†åè®®æ–¹æ³•å®žçŽ°ï¼Œè¿™æ¬¡ä½¿ç”¨ä¿©ä¸ªsectionï¼ŒtableView(_:titleForHeaderInSection:)æ˜¯èŽ·å–sectionçš„titleæ–¹æ³•ã€‚1234567891011121314151617181920override func numberOfSections(in tableView: UITableView) -&gt; Int &#123; return sectionTitles.count&#125;override func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123; // #warning Incomplete implementation, return the number of rows return sectionContent[section].count&#125;override func tableView(_ tableView: UITableView, titleForHeaderInSection section: Int) -&gt; String? &#123; return sectionTitles[section]&#125;override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cell = tableView.dequeueReusableCell(withIdentifier: &quot;Cell&quot;, for: indexPath) cell.textLabel?.text = sectionContent[indexPath.section][indexPath.row] return cell&#125; ç§»é™¤Tableviewä¸‹é¢åˆ†å‰²çº¿ï¼Œåœ¨viewDidLoadä¸­æ·»åŠ ï¼š tableView.tableFooterView = UIView(frame: CGRect.zero) ç”¨Mobile Safariæ‰“å¼€Webå¯ç›´æŽ¥ç»™å‡ºç½‘å€ï¼Œé€šè¿‡Mobile Safariæ‰“å¼€ç½‘ç«™ï¼ŒUIApplication.shared.open(_:options:completionHandler:)ã€‚ 123456789101112131415override func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) &#123; switch indexPath.section &#123; case 0: if indexPath.row == 0 &#123; if let url = URL(string: &quot;http://www.apple.com/itunes/charts/paid-apps/&quot;) &#123; UIApplication.shared.open(url, options: [:], completionHandler: nil) &#125; &#125; default: break &#125; // å–æ¶ˆè¢«é€‰ä¸­çŠ¶æ€ tableView.deselectRow(at: indexPath, animated: false)&#125; ä½¿ç”¨WKWebViewè½½å…¥Webä½¿ç”¨ä½¿ç”¨WKWebViewè½½å…¥Webçš„ä¾‹å­1234if let url = URL(string: &quot;http://andyron.com&quot;) &#123; let request = URLRequest(url: url) webView.load(request)&#125; ç›´æŽ¥è½½å…¥æœ¬åœ°htmlæ–‡ä»¶çš„ä¾‹å­ï¼š123let url = URL(fileURLWithPath: &quot;about.html&quot;)let request = URLRequest(url: url)webView.load(request) åœ¨about.storyboardä¸­æ‹–è¿›ä¸€ä¸ªæ–°çš„View Controllerï¼Œç”¨æ¥å±•ç¤ºWebå†…å®¹ã€‚ä½¿ç”¨ctrl-dragå»ºç«‹Showç±»åž‹çš„segueï¼Œidentifierä¸º showWebViewã€‚ æ–°å»ºWebViewControllerç»§æ‰¿è‡³UIViewControllerï¼Œå…³è”ä¸Šé¢çš„ç”¨æ¥æ˜¾ç¤ºWebå†…å®¹çš„View Controllerã€‚ åœ¨WebViewController.swiftä¸­æ·»åŠ import WebKitï¼Œå˜é‡var webView: WKWebView!ã€‚ æ›´æ–° viewDidLoadï¼š 123456789override func viewDidLoad() &#123; super.viewDidLoad() if let url = URL(string: &quot;http://andyron.com&quot;) &#123; let request = URLRequest(url: url) webView.load(request) &#125;&#125; æ·»åŠ loadViewï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåœ¨viewDidLoadä¹‹å‰è°ƒç”¨åˆ›å»ºWKWebViewã€‚ 1234override func loadView() &#123; webView = WKWebView() view = webView&#125; æ›´æ–°AboutTableViewControllerä¸­çš„tableView(_didSelectRowAtIndexPath:)ï¼š 123456789101112131415161718override func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) &#123; switch indexPath.section &#123; case 0: if indexPath.row == 0 &#123; if let url = URL(string: &quot;http://www.apple.com/itunes/charts/paid-apps/&quot;) &#123; UIApplication.shared.open(url, options: [:], completionHandler: nil) &#125; &#125; else if indexPath.row == 1 &#123; performSegue(withIdentifier: &quot;showWebView&quot;, sender: self) &#125; default: break &#125; // å–æ¶ˆè¢«é€‰ä¸­çŠ¶æ€ tableView.deselectRow(at: indexPath, animated: false)&#125; ç”±äºŽè‡ªä»ŽiOS 9ä¹‹åŽï¼Œå‡ºäºŽå®‰å…¨è€ƒè™‘ï¼Œé»˜è®¤åªèƒ½è®¿é—®HTTPSçš„ç½‘ç«™ï¼Œå¦‚æžœéœ€è¦è®¿é—®HTTPçš„ç½‘ç«™ï¼Œå°±éœ€è¦åœ¨plistæ–‡ä»¶ä¸­æ·»åŠ è®¸å¯ï¼š ä½¿ç”¨SFSafariViewControllerè½½å…¥Webåœ¨AboutTableViewController.swiftä¸­åŠ å…¥import SafariServicesï¼Œç„¶åŽæ›´æ–°tableView(_didSelectRowAtIndexPath:)ï¼Œåªç”¨é€šè¿‡urlåˆ›å»ºä¸€ä¸ªSFSafariViewControllerå¯¹è±¡ï¼Œç„¶åŽä½¿ç”¨presentæ–¹æ³•å±•ç¤ºå°±å¯ä»¥äº†ã€‚1234567891011121314151617181920212223override func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) &#123; switch indexPath.section &#123; case 0: if indexPath.row == 0 &#123; if let url = URL(string: &quot;http://www.apple.com/itunes/charts/paid-apps/&quot;) &#123; UIApplication.shared.open(url, options: [:], completionHandler: nil) &#125; &#125; else if indexPath.row == 1 &#123; performSegue(withIdentifier: &quot;showWebView&quot;, sender: self) &#125; case 1: if let url = URL(string: links[indexPath.row]) &#123; let safariController = SFSafariViewController(url: url) present(safariController, animated: true, completion: nil) &#125; default: break &#125; // å–æ¶ˆè¢«é€‰ä¸­çŠ¶æ€ tableView.deselectRow(at: indexPath, animated: false)&#125; ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 20 ä½¿ç”¨Tab Bar Controller å’Œ æ‹†åˆ†Storyboard]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-20.html</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡ å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 19 ä½¿ç”¨UIPageViewControlleræž„å»ºä»‹ç»é¡µé¢æž„å»ºäº†å¼€å§‹ä»‹ç»é¡µé¢ï¼Œè¿™ä¸€ç¯‡å­¦ä¹ ä½¿ç”¨Tab Bar Controllerå’Œæ‹†åˆ†Storyboardã€‚ åˆ›å»º Tab Bar Controller é€‰æ‹©å¼€å§‹çš„Navigation Controllerï¼ŒEditor &gt; Embed in &gt; Tab Bar Controllerï¼Œç„¶åŽè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªæ–°çš„Tab Bar Controller ä½œä¸ºåˆå§‹çš„æŽ§åˆ¶å™¨ï¼Œä¹‹å‰Navigation Controllerå˜æˆTab Bar Controllerçš„ä¸€éƒ¨åˆ†äº†ã€‚ åœ¨Navigation Controllerä¸­é€‰æ‹© tab itemï¼Œä¿®æ”¹System Itemä¸ºFavoritesã€‚ éšè— Tab Barå·¥å…·æ åœ¨å…¶ä»–é¡µé¢éšè—ï¼Œé€‰æ‹©Detail Viewï¼Œå‹¾é€‰Hide Bottom Bar on Pushå°±å¯ä»¥ã€‚ ä¹Ÿå¯ä»¥ç”¨ä»£ç å½¢å¼ï¼Œåœ¨RestaurantTableViewControllerä¸­çš„prepare(for:)ä¸­æ·»åŠ ï¼š destinationController.hidesBottomBarWhenPushed = true æ·»åŠ æ–°çš„Tabs æ·»åŠ ä¸€ä¸ªæ–°çš„Navigation Controllerï¼Œ é€‰ä¸­tab itemï¼Œä¿®æ”¹System Itemä¸ºRecentsï¼›table viewçš„navigation itemçš„titleä¸ºDiscover æŠŠæ–°åŠ çš„Navigation ControlleråŠ å…¥åˆ° Tab Bar Controllerã€‚ç”¨ctrl+dragä»ŽTab Bar Controlleråˆ°æ–°çš„Navigation Controllerï¼Œé€‰æ‹©Relationship Segue - View Controllersã€‚ æ”¹å˜æ–°çš„Navigation Controllerçš„tab barçš„titleä¸ºRecentï¼Œä¿®æ”¹system itemä¸ºRecents åŒæ ·çš„æ–¹å¼æ·»åŠ ä¸€ä¸ªæ–°çš„Navigation Controllerï¼Œ é€‰ä¸­tab itemï¼Œä¿®æ”¹System Itemä¸ºMoreï¼›table viewçš„navigation itemçš„titleä¸ºAboutã€‚ä¹Ÿç”¨ctrl+dragä¸ŽTab Bar Controllerå»ºç«‹å…³ç³»ã€‚ æœ€ç»ˆåˆ›å»ºæœ‰ä¸‰ä¸ªTab Bar Itemçš„Tab Barã€‚ å®šåˆ¶Tab Barçš„æ ·å¼ä¿®æ”¹Tab Barçš„æ ·å¼åœ¨application(_:didFinishLaunchingWithOptions:)ä¸­è¿›è¡Œï¼Œç±»ä¼¼ä¸‹é¢çš„ä»£ç ï¼Œè¯¦ç»†çš„APIå¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š123UITabBar.appearance().tintColor = UIColor(red: 235.0/255.0, green: 75.0/255.0,blue: 27.0/255.0, alpha: 1.0)UITabBar.appearance().barTintColor = UIColor.black æ”¹å˜ Tab Bar Itemçš„å›¾ç‰‡ ä»Žå›¾ç‰‡ä¸‹è½½å›¾ç‰‡åˆ°Assets.xcassetã€‚ åœ¨SBä¸­ä¿®æ”¹ä¸‰ä¸ªTab Bar Itemçš„System Iteméƒ½ä¸ºCustomï¼Œä¿®æ”¹Titleå’ŒImageä¸ºæƒ³è¦çš„å€¼ï¼Œç±»ä¼¼ä¸‹å›¾ åœ¨application(_:didFinishLaunchingWithOptions:)ä¸­ä¿®æ”¹æ ·å¼ï¼š12UITabBar.appearance().tintColor = UIColor(red: 235.0/255.0, green: 75.0/255.0, blue: 27.0/255.0, alpha: 1.0)UITabBar.appearance().barTintColor = UIColor(red: 236/255.0, green: 240.0/255.0, blue: 241.0/255.0, alpha: 1.0) æ”¹å˜é€‰æ‹©æŒ‡ç¤ºå›¾ç‰‡ï¼ˆSelection Indicator Imageï¼‰Selection Indicator Imageå°±æ˜¯æŒ‡tab bar itemè¢«é€‰ä¸­åŽä¸Žå…¶å®ƒtab bar itemä¸åŒçš„æ ·å¼,åœ¨ä»£ç ä¸­å’ŒSBä¸­éƒ½å¯ä»¥ä¿®æ”¹ã€‚ UITabBar.appearance().selectionIndicatorImage = UIImage(named: &quot;tabitem-selected&quot;) æœ€ç»ˆæ•ˆæžœï¼š æ‹†åˆ†Storyboardå½“é¡¹ç›®å˜å¤§æ—¶ï¼Œä¸€ä¸ªStoryboardå°±ä¼šå¾ˆå¤§ï¼Œå¦‚æžœæ˜¯é¡¹ç›®ä¸­æœ‰å¾ˆå¤šäººåˆä½œçš„è¯ï¼Œä¸€ä¸ªStoryboardä¹Ÿå¾ˆéš¾ç®¡ç†ã€‚ä»ŽXcode7ä¹‹åŽï¼Œæ–°åŠŸèƒ½storyboard referencesè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ åœ¨Main.storyboardä¸­é€‰æ‹©ï¼Œaboutç›¸å…³çš„ä¸¤ä¸ªview controllerï¼Œç„¶åŽEditor &gt; Refactor to Storyboardâ€¦ï¼Œæ–°å»ºåä¸ºabout.storyboardçš„storyboardæ–‡ä»¶ï¼Œå°±æŠŠè¿™ä¸ªä¸¤ä¸ªç‹¬ç«‹å‡ºåŽ»äº†ã€‚ æŠŠaboutç›¸å…³çš„view controlleræ‹†åˆ†å‡ºåŽ»åŽï¼Œåœ¨Main.storyboardé‡Œæœ‰ä¸€ä¸ªå…³è”å›¾æ ‡ï¼ŒåŒå‡»å°±å¯ä»¥è·³è½¬åˆ°about.storyboardä¸­ã€‚ åŒæ ·çš„æ–¹æ³•ï¼Œç‹¬ç«‹å‡ºdiscoverç›¸å…³view controllerï¼Œç”Ÿæˆdiscover.storyboardæ–‡ä»¶ã€‚ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS-tutorial-7ï¼šè§£æžXML(swift)]]></title>
    <url>%2F2017%2Fios-tutorial-7-xml.html</url>
    <content type="text"><![CDATA[ä½¿ç”¨XMLParserè§£æžXMLæ–‡ä»¶ï¼Œç„¶åŽç”¨tableå±•ç¤ºæ•°æ®ã€‚ ä»¥Single View Applicationæ¨¡æ¿æ–°å»ºé¡¹ç›®XMLParserTutorialã€‚ åˆ é™¤SBä¸­çš„View Controllerï¼Œæ‹–è¿›ä¸€ä¸ªNavigation Controllerã€‚é€‰æ‹©æ–°çš„View Controllerä¸º â€œIs Initial View Controllerâ€ã€‚è®¾ç½®Navigation Barçš„titleä¸ºBooksã€‚ æ–°å»ºä¸€ä¸ªç»§æ‰¿è‡³UITableViewControllerï¼Œåä¸ºTableViewControllerçš„æŽ§åˆ¶å™¨æ–‡ä»¶ï¼Œå¹¶ä¸ŽSBçš„æŽ§åˆ¶å™¨å…³è”ã€‚ æ–°å»ºä¸€ä¸ªxmlæ–‡ä»¶Books.xmlï¼Œç”¨äºŽä¹‹åŽè§£æžï¼Œæ–‡ä»¶å†…å®¹ä¸º: 1234567891011121314151617181920212223&lt;?xml version=&quot;1.0&quot;?&gt;&lt;catalog&gt; &lt;book id=&quot;1&quot;&gt; &lt;title&gt;To Kill a Mockingbird&lt;/title&gt; &lt;author&gt;Harper Lee&lt;/author&gt; &lt;/book&gt; &lt;book id=&quot;2&quot;&gt; &lt;title&gt;1984&lt;/title&gt; &lt;author&gt;George Orwell&lt;/author&gt; &lt;/book&gt; &lt;book id=&quot;3&quot;&gt; &lt;title&gt;The Lord of the Rings&lt;/title&gt; &lt;author&gt;J.R.R Tolkien&lt;/author&gt; &lt;/book&gt; &lt;book id=&quot;4&quot;&gt; &lt;title&gt;The Catcher in the Rye&lt;/title&gt; &lt;author&gt;J.D. Salinger&lt;/author&gt; &lt;/book&gt; &lt;book id=&quot;5&quot;&gt; &lt;title&gt;The Great Gatsby&lt;/title&gt; &lt;author&gt;F. Scott Fitzgerald&lt;/author&gt; &lt;/book&gt;&lt;/catalog&gt; æ–°å»ºä¸€ä¸ªæ–‡ä»¶ Book.swiftï¼š 123456import Foundationclass Book &#123; var bookTitle: String = &quot;&quot; var bookAuthor: String = &quot;&quot;&#125; åœ¨TableViewControllerä¸­æ·»åŠ å‡ ä¸ªå˜é‡ï¼š 1234var books: [Book] = []var eName: String = &quot;&quot;var bookTitle = &quot;&quot;var bookAuthor = &quot;&quot; åœ¨viewDidLoadæ–¹æ³•ä¸­ï¼Œæ·»åŠ è¯»å–XMlæ–‡ä»¶ä»£ç ï¼š 123456789override func viewDidLoad() &#123; super.viewDidLoad() if let path = Bundle.main.url(forResource: &quot;Books&quot;, withExtension: &quot;xml&quot;) &#123; if let parser = XMLParser(contentsOf: path) &#123; parser.delegate = self parser.parse() &#125; &#125; æ·»åŠ Table Viewçš„æ•°æ®æºä»£ç†æ–¹æ³•ï¼š 1234567891011121314151617override func numberOfSections(in tableView: UITableView) -&gt; Int &#123; return 1&#125;override func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123; return books.count&#125;override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cell = tableView.dequeueReusableCell(withIdentifier: &quot;Cell&quot;, for: indexPath) let book = books[indexPath.row] cell.textLabel?.text = book.bookTitle cell.detailTextLabel?.text = book.bookAuthor return cell&#125; è®©TableViewControlleré‡‡çº³XMLParserDelegateåè®®ï¼š class TableViewController: UITableViewController, XMLParserDelegate å®žçŽ°XMLParserDelegateä¸­çš„ä¸‰ä¸ªæ–¹æ³•ï¼š 12345678910111213141516171819202122232425262728293031323334// è§£æžXMlå…ƒç´ å¼€å§‹æ—¶func parser(_ parser: XMLParser, didStartElement elementName: String, namespaceURI: String?, qualifiedName qName: String?, attributes attributeDict: [String : String] = [:]) &#123; print(&quot;å¼€å§‹ \(elementName)&quot;) eName = elementName if elementName == &quot;book&quot; &#123; bookTitle = &quot;&quot; bookAuthor = &quot;&quot; &#125;&#125;// æ­£åœ¨è§£æžXMlå…ƒç´ func parser(_ parser: XMLParser, foundCharacters string: String) &#123; print(&quot;ing \(eName)&quot;) let data = string.trimmingCharacters(in: NSCharacterSet.whitespacesAndNewlines) if (!data.isEmpty) &#123; if eName == &quot;title&quot; &#123; bookTitle += data &#125; else if eName == &quot;author&quot; &#123; bookAuthor += data &#125; &#125;&#125;// ç»“æŸè§£æžXMlå…ƒç´ func parser(_ parser: XMLParser, didEndElement elementName: String, namespaceURI: String?, qualifiedName qName: String?) &#123; print(&quot;ç»“æŸ \(elementName)&quot;) if elementName == &quot;book&quot; &#123; let book = Book() book.bookTitle = bookTitle book.bookAuthor = bookAuthor books.append(book) &#125;&#125; ä¸‰ä¸ªæ–¹æ³•åˆ†åˆ«åœ¨XMlå…ƒç´ å¼€å§‹è§£æžã€æ­£åœ¨è§£æžã€ç»“æŸè§£æžæ—¶è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´æœ‰å¾ˆå¤šå…ƒç´ æ—¶å°±ä¸åœåœ¨è°ƒç”¨è¿™ä¸‰ä¸ªæ–¹æ³•ã€‚ ä»£ç XMLParserTutorial å‚è€ƒï¼šParsing XML Tutorial]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 18 Search Bar å’Œ UISearchController]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-18.html</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡ å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 17 ä½¿ç”¨Core Data æ˜¯ä½¿ç”¨Core Dataå­˜å‚¨æ•°æ®ï¼Œè¿™ä¸€ç¯‡æ˜¯æ·»åŠ æœç´¢åŠŸèƒ½ã€‚ ä½¿ç”¨ UISearchControllerUISearchControlleræ˜¯ä¸€ä¸ªç®€æ´çš„åˆ›å»ºæœç´¢æ¡å’Œç®¡ç†æœç´¢ç»“æžœçš„APIã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸ºä»¥tableä¸ºåŸºç¡€çš„appæ·»åŠ æœç´¢æ¡åªéœ€è¦ä¸‹é¢ä¸‰è¡Œä»£ç å°±å¯ä»¥äº†ï¼ŒsearchResultsControllerä¸ºnilæ—¶æœç´¢ç»“æžœæ˜¾ç¤ºå°±åœ¨å½“å‰æœç´¢çš„é¡µé¢ä»¥å½“å‰çš„æ ·å¼æ˜¾ç¤ºã€‚123searchController = UISearchController(searchResultsController: nil)searchController.searchResultsUpdater = selftableView.tableHeaderView = searchController.searchBar ä¸ºæˆ‘çš„FoodPinåº”ç”¨æ·»åŠ æœç´¢æ¡: åœ¨RestaurantTableViewControllerä¸­æ·»åŠ ä¸€ä¸ªå˜é‡ï¼š var searchController: UISearchController! åœ¨viewDidLoadä¸­åˆå§‹åŒ–ï¼š searchController = UISearchController(searchResultsController: nil) tableView.tableHeaderView = searchController.searchBar è¿™æ ·å°±æ·»åŠ äº†æœç´¢æ¡ï¼Œä½†è¿˜æ¯å¤©æ·»åŠ æœç´¢é€»è¾‘ï¼Œæœç´¢æ²¡æ•ˆã€‚ ç­›é€‰å†…å®¹ åœ¨RestaurantTableViewControllerä¸­ç»§ç»­æ·»åŠ ä¸€ä¸ªå˜é‡ï¼Œç”¨æˆ·å­˜å‚¨ç­›é€‰ç»“æžœï¼š var searchResults: [RestaurantMO] = [] æ·»åŠ ç­›é€‰æ–¹æ³•ï¼š 1234567891011func filterContent(for searchText: String) &#123; searchResults = restaurants.filter(&#123; (restaurant) -&gt; Bool in if let name = restaurant.name &#123; let isMatch = name.localizedCaseInsensitiveContains(searchText) return isMatch &#125; return false &#125;)&#125; filteræ˜¯æ•°ç»„çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒéåŽ†æ•°ç»„çš„æ¯ä¸€é¡¹è¿›è¡Œé—­åŒ…ä¸­çš„æ“ä½œï¼Œæ ¹æ®ç»“æžœåˆ¤æ–­æ˜¯å¦åˆ é™¤å¯¹åº”é¡¹ï¼Œæœ€åŽå¾—åˆ°ä¸€ä¸ªç­›é€‰çš„æ•°ç»„ã€‚localizedCaseInsensitiveContainsæ–¹æ³•ç”¨æ¥åˆ¤æ–­nameä¸­æ˜¯å¦åŒ…å«searchTextï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰ æ›´æ–°æœç´¢ç»“æžœ è®©RestaurantTableViewController â€œç¬¦åˆâ€ UISearchResultsUpdatingåè®®ï¼š class RestaurantTableViewController: UITableViewController, NSFetchedResultsControllerDelegate, UISearchResultsUpdating å®žçŽ°UISearchResultsUpdatingåè®®ï¼šä¸­çš„updateSearchResults(for:)æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨æœç´¢æ¡è¢«é€‰åˆ™å’Œè¾“å…¥æœç´¢å­—æ—¶è°ƒç”¨ï¼š 123456func updateSearchResults(for searchController: UISearchController) &#123; if let searchText = searchController.searchBar.text &#123; filterContent(for: searchText) tableView.reloadData() &#125;&#125; æ›´æ–°tableView(_:numberOfRowsInSection:)ã€‚UISearchControlleræœ‰ä¸€ä¸ªisActiveå±žæ€§ç”¨æ¥åˆ¤æ–­æœç´¢æŽ§åˆ¶å™¨å½“å‰æ´»è·ƒçŠ¶æ€ã€‚ 1234567override func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123; if searchController.isActive &#123; return searchResults.count &#125; else &#123; return restaurants.count &#125;&#125; æ›´æ–°tableView(_:cellForRowAt:)ã€‚æ ¹æ®UISearchControllerçš„çŠ¶æ€åˆ¤æ–­æ˜¯ä»Žrestaurantsä¸­èŽ·å–æ•°æ®è¿˜æ˜¯searchResultsã€‚ 1234567891011121314151617override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cellIdentifier = &quot;Cell&quot; let cell = tableView.dequeueReusableCell(withIdentifier: cellIdentifier, for: indexPath) as! RestaurantTableViewCell let restaurant = (searchController.isActive) ? searchResults[indexPath.row] : restaurants[indexPath.row] cell.nameLabel.text = restaurant.name cell.thumbnailImageView.image = UIImage(data: restaurant.image! as Data) cell.thumbnailImageView.layer.cornerRadius = 30.0 cell.thumbnailImageView.clipsToBounds = true cell.locationLabel.text = restaurant.location cell.typeLabel.text = restaurant.type cell.accessoryType = restaurant.isVisited ? .checkmark: .none return cell&#125; å®žçŽ°ä¸€ä¸ªæ–°çš„æ–¹æ³•ï¼Œè®©tableåœ¨æœç´¢çŠ¶æ€ä¸‹ä¸å¯ä»¥æ»‘åŠ¨ç¼–è¾‘ã€‚ 1234567override func tableView(_ tableView: UITableView, canEditRowAt indexPath: IndexPath) -&gt; Bool &#123; if searchController.isActive &#123; return false &#125; else &#123; return true &#125;&#125; æ›´æ–°prepare(for:)ï¼Œè®©segueåœ¨ä¼ è¾“æ•°æ®åˆ°detail viewæ—¶çš„æ•°æ®ä¹Ÿç›¸å¯¹åº”ã€‚ destinationController.restaurant = searchController.isActive ? searchResults[indexPath.row] : restaurants[indexPath.row åœ¨viewDidLoadä¸­æ·»åŠ ä¸¤è¡Œä»£ç ï¼š 12searchController.searchResultsUpdater = selfsearchController.dimsBackgroundDuringPresentation = false çŽ°åœ¨å°±å®Œæˆäº†æœç´¢åŠŸèƒ½ã€‚ å®šåˆ¶æœç´¢æ¡çš„æ ·å¼UISearchBaræä¾›ä¸€äº›å±žæ€§ç”¨æ¥å®šåˆ¶ã€‚åœ¨viewDidLoadä¸­æ·»åŠ ï¼š1234searchController.searchBar.placeholder = &quot;Search restaurants...&quot;searchController.searchBar.tintColor = UIColor.whitesearchController.searchBar.barTintColor = UIColor(red: 218.0/255.0, green:100.0/255.0, blue: 70.0/255.0, alpha: 1.0) Exerciseï¼šæ·»åŠ åœ°å€æœç´¢åªéœ€è¦æ›´æ”¹æœç´¢å‡½æ•°filterContentï¼š12345678910111213searchResults = restaurants.filter(&#123; (restaurant) -&gt; Bool in if let name = restaurant.name, let location = restaurant.location &#123; let isMatchName = name.localizedCaseInsensitiveContains(searchText) let isMatchLocation = location.localizedCaseInsensitiveContains(searchText) if isMatchName || isMatchLocation &#123; return true &#125; &#125; return false &#125;) ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 19 ä½¿ç”¨UIPageViewControlleræž„å»ºä»‹ç»é¡µé¢]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-19.html</url>
    <content type="text"><![CDATA[ç»§ç»­ä¸Šä¸€ç¯‡ å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 18 Search Bar å’Œ UISearchController ï¼Œè¿™ä¸€ç¯‡ä½¿ç”¨UIPageViewControlleræž„å»ºä»‹ç»é¡µé¢ï¼Œä¸Žä½¿ç”¨LaunchScreen.storyboardçš„å¯åŠ¨é¡µä¸åŒã€‚ å‘Storyboardä¸­æ·»åŠ UIPageViewController åœ¨Storyboardæ‹–è¿›ä¸€ä¸ªUIPageViewControllerã€‚ä¿®æ”¹ç›¸å…³å±žæ€§ã€‚ ä¿®æ”¹UIPageViewControllerçš„ storyboard ID ä¸º WalkthroughControllerã€‚ ç±»ä¼¼UINavigationControllerï¼ŒUIPageViewControllerä¹Ÿæ˜¯ä¸€ç§å®¹å™¨ç±»åž‹çš„æŽ§åˆ¶å™¨ã€‚è¿™ç§å®¹å™¨ç±»åž‹çš„æŽ§åˆ¶å™¨æ˜¯ç”¨æ¥ç®¡ç†å…¶å®ƒå¤šä¸ªæŽ§åˆ¶å™¨çš„ã€‚ å¦‚æžœå®¹å™¨å†…çš„æŽ§åˆ¶å™¨é¡µé¢å…ƒç´ ç±»ä¼¼ï¼ˆä¸Šå›¾å°±æ˜¯è¿™ç§æƒ…å†µï¼‰ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªæŽ§åˆ¶å™¨é‡å¤åˆ©ç”¨ã€‚ è®¾è®¡ä»‹ç»é¡µ ä¸‹è½½ä»‹ç»é¡µæ‰€éœ€çš„å›¾ç‰‡ï¼Œæ‹–åˆ°Assets.xcassetã€‚ æ‹–åŠ¨ä¸€ä¸ªæ–°çš„View Controlleråˆ°SBä¸­ï¼ˆä½œä¸ºé‡å¤ä½¿ç”¨çš„æŽ§åˆ¶å™¨ï¼‰ï¼Œåšä¸€äº›UIè®¾è®¡ï¼š è®¾ç½®èƒŒæ™¯ä¸ºçº¢è‰² æ·»åŠ ä¸€ä¸ªLabelåä¸ºPersonalizeï¼Œé€‰æ‹©åˆé€‚çš„å­—ä½“å’Œå¤§å°ï¼Œå±…ä¸­ã€‚ æ·»åŠ ä¸€ä¸ªImage Viewï¼Œ300*232ï¼Œå±…ä¸­ã€‚ æ·»åŠ å¦ä¸€ä¸ªLabelåä¸ºPin your favorite restaurants and create your own food guideï¼Œ282*64ï¼Œè¡Œæ•°ä¸º0ï¼Œå±…ä¸­ï¼Œé€‰æ‹©åˆé€‚çš„å­—ä½“å’Œå¤§å°ã€‚ æ·»åŠ ä¸€äº›çº¦æŸ è®¾ç½®æ–°çš„View Controllerçš„ storyboard ID ä¸º WalkthroughContentViewControllerã€‚æœ€åŽå¤§æ¦‚å¦‚ä¸‹ï¼š åˆ›å»ºWalkthroughContentViewController åˆ›å»ºWalkthroughContentViewControllerç±»æ–‡ä»¶ï¼Œç»§æ‰¿è‡³UIViewControllerï¼Œå¹¶å…³è”ä¸Šé¢æ·»åŠ çš„æ–°View Controllerã€‚ æ·»åŠ ä¸‰ä¸ªæŽ¥å£ï¼Œå…³è”ä¸¤ä¸ªLabelå’Œä¸€ä¸ªimage viewï¼›æ·»åŠ å››ä¸ªå˜é‡ï¼Œå…¶ä¸­indexæ˜¯æŒ‡å¤šä¸ªä»‹ç»é¡µçš„ç´¢å¼•ã€‚ 12345678@IBOutlet var headingLabel: UILabel!@IBOutlet var contentLabel: UILabel!@IBOutlet var contentImageView: UIImageView!var index = 0var heading = &quot;&quot;var imageFile = &quot;&quot;var content = &quot;&quot; ä¿®æ”¹viewDidLoadä¸ºï¼š 1234567override func viewDidLoad() &#123; super.viewDidLoad() headingLabel.text = heading contentLabel.text = content contentImageView.image = UIImage(named: imageFile)&#125; å®žçŽ° UIPageViewController æ–°å»ºç±»WalkthroughPageViewControllerï¼Œç»§æ‰¿è‡³UIPageViewControllerã€‚ è®©WalkthroughPageViewControlleç¬¦åˆUIPageViewControllerDataSourceåè®®ã€‚ class WalkthroughPageViewController: UIPageViewController, UIPageViewControllerDataSource æ–°å»ºå‡ ä¸ªå˜é‡ï¼Œç”¨äºŽæ˜¾ç¤ºä»‹ç»é¡µä¸­çš„å†…å®¹ã€‚ 123var pageHeadings = [&quot;Personalize&quot;, &quot;Locate&quot;, &quot;Discover&quot;]var pageImages = [&quot;foodpin-intro-1&quot;, &quot;foodpin-intro-2&quot;, &quot;foodpin-intro-3&quot;]var pageContent = [&quot;Pin your favorite restaurants and create your own foodguide&quot;, &quot;Search and locate your favourite restaurant on Maps&quot;, &quot;Find restaurants pinned by your friends and other foodies around the world&quot;] å®žçŽ°UIPageViewControllerDataSourceåè®®çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«åœ¨ä»‹ç»é¡µç¿»åˆ°ä¸‹ä¸€ä¸ªå’Œç¿»åˆ°ä¸Šä¸€ä¸ªæ—¶è°ƒç”¨ã€‚contentViewControllerå‡½æ•°çš„ä½œç”¨æ˜¯æ ¹æ®ä»‹ç»é¡µçš„ç´¢å¼•èŽ·å–ä¸åŒçš„æ•°æ®ã€‚instantiateViewControlleræ–¹æ³•æ ¹æ®storyboardçš„ä¸­storyboard IDç”Ÿæˆè§†å›¾æŽ§åˆ¶å™¨ã€‚ 1234567891011121314151617181920212223242526272829303132func pageViewController(_ pageViewController: UIPageViewController, viewControllerBefore viewController: UIViewController) -&gt; UIViewController? &#123; var index = (viewController as! WalkthroughContentViewController).index index -= 1 return contentViewController(at: index)&#125;func pageViewController(_ pageViewController: UIPageViewController, viewControllerAfter viewController: UIViewController) -&gt; UIViewController? &#123; var index = (viewController as! WalkthroughContentViewController).index index += 1 return contentViewController(at: index)&#125;func contentViewController(at index: Int) -&gt; WalkthroughContentViewController? &#123; if index &lt; 0 || index &gt;= pageHeadings.count &#123; return nil &#125; if let pageContentViewController = storyboard?.instantiateViewController(withIdentifier: &quot;WalkthroughContentViewController&quot;) as? WalkthroughContentViewController &#123; pageContentViewController.imageFile = pageImages[index] pageContentViewController.heading = pageHeadings[index] pageContentViewController.content = pageContent[index] pageContentViewController.index = index return pageContentViewController &#125; return nil&#125; ä¿®æ”¹viewDidLoadï¼š 12345678override func viewDidLoad() &#123; super.viewDidLoad() dataSource = self if let startingViewController = contentViewController(at: 0) &#123; setViewControllers([startingViewController], direction: .forward, animated: true, completion: nil) &#125;&#125; setViewControllersæ–¹æ³•æ˜¯è®¾ç½®UIPageViewControllerç®¡ç†çš„è§†å›¾æŽ§åˆ¶å™¨ã€‚ è®©ä»‹ç»é¡µåœ¨é¦–é¡µæ˜¾ç¤ºåŽè·³å‡ºã€‚ åœ¨RestaurantTableViewControlleä¸­æ·»åŠ ï¼š123456override func viewDidAppear(_ animated: Bool) &#123; super.viewDidAppear(animated) if let pageViewController = storyboard?.instantiateViewController(withIdentifier: &quot;WalkthroughController&quot;) as? WalkthroughPageViewController &#123; present(pageViewController, animated: true, completion: nil) &#125;&#125; æ·»åŠ é»˜è®¤é¡µé¢æŒ‡ç¤ºé¡µé¢æŒ‡ç¤ºå°±æ˜¯ä¸€èˆ¬åœ¨é¡µé¢ä¸‹ç”¨äºŽåˆ†è¾¨å½“å‰æ˜¯ç¬¬ä¸€ä¸ªé¡µé¢çš„å‡ ä¸ªå°ç‚¹ã€‚å®žçŽ°UIPageViewControllerDataSourceåè®®çš„ä¸¤ä¸ªæ–¹æ³•ï¼špresentationCount(for:)è¡¨ç¤ºæ€»å…±æœ‰å‡ ä¸ªå°ç‚¹ï¼ˆé¡µé¢ï¼‰ã€‚presentationIndex(for:)è¡¨ç¤ºå½“å‰é¡µé¢çš„ç´¢å¼•ã€‚12345678910func presentationCount(for pageViewController: UIPageViewController) -&gt; Int &#123; return pageHeadings.count&#125;func presentationIndex(for pageViewController: UIPageViewController) -&gt; Int &#123; if let pageContentViewController = storyboard?.instantiateViewController(withIdentifier: &quot;WalkthroughContentViewController&quot;) as? WalkthroughContentViewController &#123; return pageContentViewController.index &#125; return 0&#125; ä¿®æ”¹é¡µé¢æŒ‡ç¤ºçš„æ ·å¼ä¸ç”¨é»˜è®¤çš„é¡µé¢æŒ‡ç¤ºï¼Œå°±è¦æŠŠä¸Šé¢ä¸¤ä¸ªæ–¹æ³•åˆ é™¤ï¼Œç„¶åŽä½¿ç”¨UIPageControlã€‚ åˆ é™¤ä¸Šé¢å®žçŽ°çš„ä¸¤ä¸ªæ–¹æ³•ã€‚ä»Žå¯¹è±¡åº“ä¸­æ‹–ä¸€ä¸ªPage Controlåˆ°walkthrough content view controlleråº•éƒ¨ï¼Œåœ¨å±žæ€§æ£€æŸ¥å™¨ä¸­ä¿®æ”¹é€‚å½“å±žæ€§ï¼Œå¹¶æ·»åŠ çº¦æŸã€‚ åœ¨WalkthroughContentViewControllerä¸­æ·»åŠ æŽ¥å£@IBOutlet var pageControl: UIPageControl!å¹¶ä¸ŽPage Controlå…³è”ã€‚åœ¨viewDidLoadä¸­æ·»åŠ pageControl.currentPage = index æ·»åŠ NEXT/DONEæŒ‰é’® åœ¨walkthrough content view controllerå³ä¸‹è§’æ·»åŠ ä¸€ä¸ªæŒ‰é’®åä¸ºNEXTã€‚ åœ¨WalkthroughContentViewControllerä¸­æ·»åŠ æŽ¥å£ï¼Œå¹¶æŒ‰é’®å…³è”ã€‚ @IBOutlet var forwardButton: UIButton! åœ¨viewDidLoadä¸­æ·»åŠ æ ¹æ®ç´¢å¼•åˆ¤æ–­æŒ‰é’®åçš„ä»£ç ï¼š 12345switch index &#123;case 0...1: forwardButton.setTitle(&quot;NEXT&quot;, for: .normal)case 2: forwardButton.setTitle(&quot;DONE&quot;, for: .normal)default: break&#125; æ·»åŠ ç‚¹å‡»æŒ‰é’®çš„actionï¼Œå¹¶ä¸ŽæŒ‰é’®å…³è” 12345678910@IBAction func nextButtonTapped(sender: UIButton) &#123; switch index &#123; case 0...1: let pageViewController = parent as! WalkthroughPageViewController pageViewController.forward(index: index) case 2: dismiss(animated: true, completion: nil) default: break &#125;&#125; åœ¨WalkthroughPageViewControllerä¸­æ·»åŠ æ–¹æ³•ï¼š 12345func forward(index: Int) &#123; if let nextViewController = contentViewController(at: index + 1) &#123; setViewControllers([nextViewController], direction: .forward, animated: true, completion: nil) &#125;&#125; å®Œæˆç±»ä¼¼ä¸‹é¢ï¼š ä½†å› ä¸ºä¹‹å‰æ˜¯åˆ©ç”¨RestaurantTableViewControllerçš„viewDidAppearæ–¹æ³•æ˜¾ç¤ºä»‹ç»é¡µçš„ï¼Œè€ŒviewDidAppearæ–¹æ³•æ˜¯é¡µé¢æ˜¾ç¤ºåŽå°±è°ƒç”¨ä¸€ä¸‹ï¼Œè¿™æ ·å°±å‡ºçŽ°ä¸åœè¿›å…¥ä»‹ç»é¡µã€‚å®žé™…ä¸Šåªéœ€è¦ç¬¬ä¸€æ¬¡æ‰“å¼€appçš„æ—¶æ˜¾ç¤ºä»‹ç»é¡µå°±å¯ä»¥äº†ã€‚ UserDefaultsçš„ä½¿ç”¨UserDefaultsæ˜¯ç”¨æ¥ç®¡ç†åº”ç”¨å’Œç”¨æˆ·ç›¸å…³çš„è®¾ç½®çš„ã€‚ä¹Ÿå°±æ˜¯å¯ä»¥ç”¨UserDefaultså­˜å‚¨ä¸€äº›ç”¨æˆ·ç›¸å…³çš„å°‘é‡æ•°æ®ï¼Œæ¯”å¦‚ä¸Šé¢çš„æ˜¯å¦çœ‹è¿‡ä»‹ç»é¡µï¼Œä¹Ÿå°±æ˜¯æ˜¯å¦ç‚¹å‡»è¿‡DONEæŒ‰é’®äº†ã€‚UserDefaultsä¹Ÿæ˜¯é€šè¿‡å•ä¾‹æ¨¡å¼è¿›è¡Œæ“ä½œçš„ï¼Œé€šè¿‡ç±»å±žæ€§standardèŽ·å–å•ä¾‹ã€‚ nextButtonTappedä¸­ç‚¹å‡»DONEæŒ‰é’®æ—¶è®¾ç½®ä¸€ä¸ªå€¼æ ‡å¿—ï¼š 1234567891011@IBAction func nextButtonTapped(sender: UIButton) &#123; switch index &#123; case 0...1: let pageViewController = parent as! WalkthroughPageViewController pageViewController.forward(index: index) case 2: UserDefaults.standard.set(true, forKey: &quot;hasViewedWalkthrough&quot;) dismiss(animated: true, completion: nil) default: break &#125;&#125; å†åˆ°RestaurantTableViewControllerçš„viewDidAppearåˆ¤æ–­å¯¹åº”keyå€¼ã€‚ 123456789override func viewDidAppear(_ animated: Bool) &#123; super.viewDidAppear(animated) if UserDefaults.standard.bool(forKey: &quot;hasViewedWalkthrough&quot;) &#123; return &#125; if let pageViewController = storyboard?.instantiateViewController(withIdentifier: &quot;WalkthroughController&quot;) as? WalkthroughPageViewController &#123; present(pageViewController, animated: true, completion: nil) &#125;&#125; å®Œæˆä»‹ç»é¡µã€‚å­¦ä¹ äº†UIPageViewControllerå’ŒUserDefaultsã€‚ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 17 ä½¿ç”¨Core Data]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-17.html</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡ å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 16 ä»‹ç»é™æ€Table Viewsï¼ŒUIImagePickerControllerå’ŒNSLayoutConstraint ä¸­æ·»åŠ æ–°å»ºrestauranté¡µé¢ï¼Œä½†æœ€åŽæ•°æ®å¹¶æ²¡æœ‰ä¿å­˜ä¸‹æ¥ï¼Œè¿™ä¸€ç¯‡ä½¿ç”¨Core Dataæ–¹å¼æ¥æŒä¹…åŒ–ä¿å­˜æ•°æ®ã€‚ æ•°æ®æŒä¹…åŒ–ä¸€èˆ¬æ˜¯æŒ‡æ•°æ®åº“ä¿å­˜ã€‚åœ¨Webå¼€å‘ä¸­ï¼Œå¸¸ç”¨Oracleæˆ–MySQLç­‰å…³ç³»æ•°æ®åº“æ¥ä¿å­˜æ•°æ®ï¼Œé€šè¿‡SQLè¯­å¥æŸ¥è¯¢ã€‚åœ¨iOSä¸­å¯¹åº”çš„æ•°æ®åº“æ˜¯SQLiteã€‚Core Dataä¸æ˜¯æ•°æ®åº“ï¼Œå®ƒæ˜¯è®©å¼€å‘è€…é€šè¿‡é¢å‘å¯¹è±¡æ–¹å¼ä¸Žæ•°æ®åº“è¿›è¡Œäº¤äº’çš„åº“ã€‚ ä½¿ç”¨Core Dataçš„ä¾‹å­æ–°å»ºä¸€ä¸ªä½¿ç”¨Core Dataçš„é¡¹ç›®ï¼Œåœ¨AppDelegateç±»ä¸­ä¼šæ¯”å¹³å¸¸å¤šäº†ä¸€ä¸ªå˜é‡å’Œä¸€æ–¹æ³•ï¼Œå¦å¤–è¿˜å¤šäº†ä¸€ä¸ªæ–‡ä»¶CoreDataDemo.xcdatamodeldã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142lazy var persistentContainer: NSPersistentContainer = &#123; /* The persistent container for the application. This implementation creates and returns a container, having loaded the store for the application to it. This property is optional since there are legitimate error conditions that could cause the creation of the store to fail. */ let container = NSPersistentContainer(name: &quot;CoreDataDemo&quot;) container.loadPersistentStores(completionHandler: &#123; (storeDescription, error) in if let error = error as NSError? &#123; // Replace this implementation with code to handle the error appropriately. // fatalError() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. /* Typical reasons for an error here include: * The parent directory does not exist, cannot be created, or disallows writing. * The persistent store is not accessible, due to permissions or data protection when the device is locked. * The device is out of space. * The store could not be migrated to the current model version. Check the error message to determine what the actual problem was. */ fatalError(&quot;Unresolved error \(error), \(error.userInfo)&quot;) &#125; &#125;) return container&#125;()// MARK: - Core Data Saving supportfunc saveContext () &#123; let context = persistentContainer.viewContext if context.hasChanges &#123; do &#123; try context.save() &#125; catch &#123; // Replace this implementation with code to handle the error appropriately. // fatalError() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. let nserror = error as NSError fatalError(&quot;Unresolved error \(nserror), \(nserror.userInfo)&quot;) &#125; &#125;&#125; å˜é‡persistentContaineræ˜¯NSPersistentContainerçš„å®žä¾‹ï¼Œlet container = NSPersistentContainer(name: &quot;CoreDataDemo&quot;)å¯¹åº”CoreDataDemo.xcdatamodeldæ–‡ä»¶ï¼Œå¦‚æžœæ˜¯è‡ªå·±æ·»åŠ æ—¶åå­—éœ€è¦å¯¹åº”ã€‚ å½“æ•°æ®å˜åŒ–(insert/update/delete)æ—¶ ï¼Œè°ƒç”¨saveContextæ–¹æ³•ä¿å­˜æ•°æ®ã€‚ å‘é¡¹ç›®ä¸­æ·»åŠ Data Model å³å‡»FoodPinæ–‡ä»¶å¤¹ï¼Œé€‰æ‹©æ–°å»ºData Modelæ–‡ä»¶ï¼Œæ–‡ä»¶åä¸ºFoodPinã€‚ é€‰ä¸­æ–°ç”Ÿæˆçš„FoodPin.xcdatamodeldï¼Œæ·»åŠ ä¸€ä¸ªRestaurant Entityï¼Œç„¶åŽå†åœ¨æ­¤Entityä¸‹æ·»åŠ ä¸€äº›å±žæ€§ã€‚ é€‰ä¸­ç‰¹å®šå±žæ€§åŽå¯åœ¨å³ä¾§æ£€æŸ¥å™¨ä¸­è®¾ç½®ç›¸å…³ç‰¹æ€§ï¼Œæ¯”å¦‚æ˜¯å¦å¼ºåˆ¶éœ€è¦ã€‚ åˆ›å»ºManaged ObjectsCore Dataæ¡†æž¶ä¸­çš„ Managed Objectsä¸ŽEntityä¹‹é—´çš„å…³ç³»ï¼Œæœ‰ç‚¹åƒä»£ç ä¸­ æŽ¥å£å˜é‡ å’Œ UI objectsä¹‹é—´çš„å…³ç³»ã€‚xcodeå¯è‡ªåŠ¨ç”ŸæˆManaged Objectsã€‚ é€‰ä¸­Restaurant Entityï¼Œåœ¨æ£€æŸ¥å™¨ä¸­ä¿®æ”¹classçš„nameä¸ºRestaurantMOï¼ŒCodegen ä¸º Class Definitionã€‚ command-R æˆ– comman-Bä¸€ä¸‹ï¼Œè¡¨é¢ä¸Šæ²¡æœ‰ä»€ä¹ˆå˜åŒ–ï¼Œåœ¨project navigatorä¸­æ²¡æœ‰å¤šå‡ºæ–‡ä»¶ã€‚å®žé™…ä¸Šå·²ç»ç”ŸæˆRestaurantMOç±»ï¼Œä»£ç å·²ç»å¯ä»¥ä½¿ç”¨äº†ï¼Œå¦‚æžœä½¿ç”¨command+ç‚¹å‡» RestaurantMOï¼Œå°±å¯ä»¥çœ‹åˆ°RestaurantMOçš„ä»£ç ï¼š ä¿®æ”¹ç›¸å…³å—å½±å“çš„ä»£ç  RestaurantTableViewController.swifté‡æ–°å®šä¹‰restaurants: var restaurants:[RestaurantMO] = []ç”±äºŽCoreDataä¸­å­˜å‚¨å›¾ç‰‡æ˜¯äºŒè¿›åˆ¶ï¼Œå¼•ç”¨æ—¶ä¸èƒ½ç”¨æ–‡ä»¶å: 12cell.thumbnailImageView.image = UIImage(data: restaurants[indexPath.row].imageas! Data) 12 if let imageToShare = UIImage(data: self.restaurants[indexPath.row].image as!Data) &#123; ç”±äºŽRestaurantMOçš„å±žæ€§å€¼æ˜¯å¯é€‰å€¼ï¼Œä½¿ç”¨æ—¶éœ€è¦è§£åŒ…ï¼š 1let defaultText = &quot;Just checking in at &quot; + self.restaurants[indexPath.row].name! RestaurantDetailViewController.swift 1var restaurant:RestaurantMO! 1restaurantImageView.image = UIImage(data: restaurant.image as! Data) 12 geoCoder.geocodeAddressString(restaurant.location!, completionHandler: &#123;placemarks, error in MapViewController.swift 1var restaurant:RestaurantMO! 1leftIconView.image = UIImage(data: restaurant.image as! Data) ReviewViewController.swift 1var restaurant:RestaurantMO! 1restaurantImageView.image = UIImage(data: restaurant.image as! Data) çŽ°åœ¨èƒ½æˆåŠŸè¿è¡Œï¼Œå‘çŽ°æ˜¯æ²¡æœ‰æ•°æ®çš„ã€‚ ä¿å­˜æ–°æ•°æ®åˆ°æ•°æ®åº“ åœ¨AddTableViewController.swiftä¸­å¼•å…¥Core Dataï¼šimport CoreDataã€‚æ·»åŠ å˜é‡var restaurant:RestaurantMO!ã€‚ åœ¨AppDelegateä¸­åŠ å…¥ä¸Šé¢ä¾‹å­ä¸€ä¸ªå˜é‡å’Œä¸€æ–¹æ³•ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344// MARK: - Core Data stack lazy var persistentContainer: NSPersistentContainer = &#123; /* The persistent container for the application. This implementation creates and returns a container, having loaded the store for the application to it. This property is optional since there are legitimate error conditions that could cause the creation of the store to fail. */ let container = NSPersistentContainer(name: &quot;FoodPin&quot;) container.loadPersistentStores(completionHandler: &#123; (storeDescription, error) in if let error = error as NSError? &#123; // Replace this implementation with code to handle the error appropriately. // fatalError() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. /* Typical reasons for an error here include: * The parent directory does not exist, cannot be created, or disallows writing. * The persistent store is not accessible, due to permissions or data protection when the device is locked. * The device is out of space. * The store could not be migrated to the current model version. Check the error message to determine what the actual problem was. */ fatalError(&quot;Unresolved error \(error), \(error.userInfo)&quot;) &#125; &#125;) return container &#125;() // MARK: - Core Data Saving support func saveContext () &#123; let context = persistentContainer.viewContext if context.hasChanges &#123; do &#123; try context.save() &#125; catch &#123; // Replace this implementation with code to handle the error appropriately. // fatalError() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. let nserror = error as NSError fatalError(&quot;Unresolved error \(nserror), \(nserror.userInfo)&quot;) &#125; &#125; &#125; åœ¨AddTableViewControllerçš„saveæ–¹æ³•çš„dismissä¹‹å‰æ’å…¥ï¼š 123456789101112131415161718// 1if let appDelegate = (UIApplication.shared.delegate as? AppDelegate) &#123; restaurant = RestaurantMO(context: appDelegate.persistentContainer.viewContext) restaurant.name = nameTextField.text restaurant.type = typeTextField.text restaurant.location = locationTextField.text restaurant.isVisited = isVisited if let restaurantImage = photoImageView.image &#123; // 2 if let imageData = UIImagePNGRepresentation(restaurantImage) &#123; restaurant.image = NSData(data: imageData) &#125; &#125; print(&quot;Saving data to context ...&quot;) appDelegate.saveContext()&#125; UIApplication.sharedè¿™ç§å½¢å¼æ˜¯iOS SDKä¸­æ¯”è¾ƒå¸¸ç”¨å•ä¾‹æ¨¡å¼ï¼Œå°±æ˜¯é€šè¿‡ä¸€ä¸ªç±»å±žæ€§sharedèŽ·å–æ•´ä¸ªappè¿è¡Œè¿‡ç¨‹åªéœ€è¦ä¸€ä¸ªå®žä¾‹çš„æ–¹æ³•ã€‚UIApplication.shared.delegate as? AppDelegateå°±èŽ·å–äº†AppDelegateå¯¹è±¡ã€‚ èŽ·å–å›¾ç‰‡çš„äºŒè¿›åˆ¶æ•°æ®å¯¹è±¡ã€‚ è¿è¡Œï¼Œæ·»åŠ æ–°çš„restaurantåŽå¹¶æ²¡æœ‰åœ¨Food Pinä¸­æ˜¾ç¤ºï¼Œå®žé™…å·²ç»æ·»åŠ åˆ°æ•°æ®åº“ä¸­ï¼Œåœ¨RestaurantTableViewControlleré‡Œæ²¡æœ‰å‘æ•°æ®åº“èŽ·å–ã€‚ é€šè¿‡CoreDataèŽ·å–æ•°æ® åœ¨RestaurantTableViewController.swiftä¸­æ·»åŠ import CoreDataã€‚å®žçŽ°åè®®NSFetchedResultsControllerDelegateï¼Œè¿™ä¸ªåè®®ä¸­æœ‰æ–¹æ³•ï¼Œä»»ä½•æ—¶å€™å½“èŽ·å–æ¥çš„æ•°æ®æœ‰å˜åŒ–æ—¶ç«‹å³é€šçŸ¥ä»£ç†ã€‚class RestaurantTableViewController: UITableViewController, NSFetchedResultsControllerDelegate å®šä¹‰ä¸€ä¸ªå˜é‡var fetchResultController: NSFetchedResultsController&lt;RestaurantMO&gt;! åœ¨viewDidLoadä¸­æ·»åŠ  123456789101112131415161718192021// 1 let fetchRequest: NSFetchRequest&lt;RestaurantMO&gt; = RestaurantMO.fetchRequest()// 2let sortDescriptor = NSSortDescriptor(key: &quot;name&quot;, ascending: true)fetchRequest.sortDescriptors = [sortDescriptor]if let appDelegate = (UIApplication.shared.delegate as? AppDelegate) &#123; let context = appDelegate.persistentContainer.viewContext fetchResultController = NSFetchedResultsController(fetchRequest: fetchRequest, managedObjectContext: context, sectionNameKeyPath: nil, cacheName: nil) fetchResultController.delegate = self&#125;do &#123; // 3 try fetchResultController.performFetch() if let fetchedObjects = fetchResultController.fetchedObjects &#123; // 4 restaurants = fetchedObjects &#125;&#125; catch &#123; print(error)&#125; 1 ä»ŽRestaurantMOå¯¹è±¡èŽ·å¾—æ•°æ®è¯·æ±‚å¯¹è±¡NSFetchRequestã€‚ 2 é€šè¿‡NSSortDescriptoræ¥è®¾ç½®èŽ·å–ç»“æžœçš„æŽ’åºæ–¹å¼ã€‚ 3 performFetchæ–¹æ³•æ‰§è¡Œä»Žæ•°æ®åº“ä¸­èŽ·å–æ•°æ®è¯·æ±‚ã€‚ 4 æŠŠè¯·æ±‚ç»“æžœå¤åˆ¶ç»™å˜é‡restaurantsã€‚ æ•°æ®åº“ä¸­æ•°æ®å˜åŒ–ï¼Œå°†è°ƒç”¨æ¥è‡ªNSFetchedResultsControllerDelegateä¸‰ä¸ªæ–¹æ³•ï¼Œè°ƒç”¨ä¸‰ä¸ªæ–¹æ³•çš„æ—¶é—´å¯ä»¥ç®€å•çš„ç†è§£åˆ†åˆ«ä¸ºæ•°æ®å°†è¦æ”¹å˜ã€æ•°æ®æ­£åœ¨æ”¹å˜ã€æ•°æ®æ”¹å˜åŽï¼šcontrollerWillChangeContent(_:)controller(_:didChange:at:for:newIndexPath:)controllerDidChangeContent(_:) æ–¹æ³•çš„å®žçŽ°ï¼Œä¹Ÿåˆ†åˆ«å¯¹table viewæœ‰ä¸åŒå¤„ç†ï¼š 123456789101112131415161718192021222324252627282930func controllerWillChangeContent(_ controller: NSFetchedResultsController&lt;NSFetchRequestResult&gt;) &#123; tableView.beginUpdates()&#125;func controller(_ controller: NSFetchedResultsController&lt;NSFetchRequestResult&gt;, didChange anObject: Any, at indexPath: IndexPath?, for type: NSFetchedResultsChangeType, newIndexPath: IndexPath?) &#123; switch type &#123; case .insert: if let newIndexPath = newIndexPath &#123; tableView.insertRows(at: [newIndexPath], with: .fade) &#125; case .delete: if let indexPath = indexPath &#123; tableView.deleteRows(at: [indexPath], with: .fade) &#125; case .update: if let indexPath = indexPath &#123; tableView.reloadRows(at: [indexPath], with: .fade) &#125; default: tableView.reloadData() &#125; if let fetchedObjects = controller.fetchedObjects &#123; restaurants = fetchedObjects as! [RestaurantMO] &#125;&#125;func controllerDidChangeContent(_ controller: NSFetchedResultsController&lt;NSFetchRequestResult&gt;) &#123; tableView.endUpdates()&#125; çŽ°åœ¨è¿è¡Œç¨‹åºï¼Œæ·»åŠ æ–°çš„Restaurantå°±èƒ½åŒæ­¥æ˜¾ç¤ºäº†ã€‚ é€šè¿‡CoreDataåˆ é™¤æ•°æ®æ›´æ–°RestaurantTableViewControllerçš„tableView(_:editActionsForRowAt:_)æ–¹æ³•ä¸­çš„ deleteActionã€‚1234567891011let deleteAction = UITableViewRowAction(style: .default, title: &quot;Delete&quot;, handler: &#123; (action, indexPath) -&gt; Void in if let appDelegate = (UIApplication.shared.delegate as? AppDelegate) &#123; let context = appDelegate.persistentContainer.viewContext let restaurantToDelete = self.fetchResultController.object(at: indexPath) context.delete(restaurantToDelete) appDelegate.saveContext() &#125; &#125;) çŽ°åœ¨åˆ é™¤ä¸€é¡¹åŽï¼Œé‡æ–°å¯åŠ¨åŽï¼Œæ•°æ®æ¶ˆå¤±ã€‚ æ›´æ–°æ•°æ®æ›´æ–°RestaurantDetailViewControllerçš„ä¸­çš„ActionratingButtonTapped: ï¼š12345678910111213141516171819202122@IBAction func ratingButtonTapped(segue: UIStoryboardSegue) &#123; if let rating = segue.identifier &#123; restaurant.isVisited = true switch rating &#123; case &quot;great&quot;: restaurant.rating = &quot;Absolutely love it! Must try.&quot; case &quot;good&quot;: restaurant.rating = &quot;Pretty good.&quot; case &quot;dislike&quot;: restaurant.rating = &quot;I don&apos;t like it.&quot; default: break &#125; &#125; if let appDelegate = (UIApplication.shared.delegate as? AppDelegate) &#123; appDelegate.saveContext() &#125; tableView.reloadData()&#125; çŽ°åœ¨è¯„ä»·ä¸€é¡¹åŽï¼Œé‡æ–°å¯åŠ¨åŽè¯„ä»·å°±ä¼šä¿ç•™ã€‚ Exerciseï¼šæ·»åŠ æ–°å­—æ®µä¹‹å‰æ–°å»ºRestauranté¡µé¢æ²¡æœ‰Phoneå­—æ®µï¼ŒçŽ°åœ¨æ·»åŠ  åœ¨SBçš„New Restaurantæ·»åŠ æ–°Cellï¼Œåœ¨AddRestaurantControllerä¸­æ·»åŠ ç›¸å…³æŽ¥å£å¹¶å…³è”ã€‚ æ›´æ–°AddRestaurantControllerä¸­çš„save:Actionç›¸å…³ä»£ç ã€‚ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-0ï¼šè¯´æ˜Žå’Œç›®å½•]]></title>
    <url>%2F2017%2Fswift-0.html</url>
    <content type="text"><![CDATA[è¿™æ˜¯æˆ‘å­¦ä¹ Swiftçš„ä¸€ä¸ªç¬”è®°å’Œæ€»ç»“ï¼Œä»¥playgroundçš„å½¢å¼æ”¾åœ¨æˆ‘çš„githubä¸Šï¼Œå­¦ä¹ çš„ç‰ˆæœ¬æ˜¯swift 3 ã€‚ å­¦ä¹ èµ„æº å®˜æ–¹æ–‡æ¡£ The Swift Programming Languageä»»ä½•å¥½çš„æŠ€æœ¯å®˜æ–¹æ–‡æ¡£æ€»æ˜¯æœ€å¥½çš„å­¦ä¹ èµ„æºã€‚ðŸ˜‹ å®˜æ–¹æ–‡æ¡£çš„ä¸­æ–‡ç‰ˆå¥½å¤šå°ä¼™ä¼´ä¸€èµ·åˆä½œç¿»è¯‘ï¼Œä»Žswiftåˆšæ‰æ¥å°±å¾ˆå¿«ç¿»è¯‘ï¼Œä»¥åŽä¸æ–­æ›´æ–°ï¼Œå‘èµ·è€…åœ¨å¼€å§‹å‘èµ·ç¿»è¯‘æ—¶è¿˜æ˜¯ä¸ªåœ¨æ ¡å­¦ç”Ÿï¼Œå¾ˆåŽ‰å®³ï¼ŒçœŸçš„éžå¸¸æ„Ÿè°¢ã€‚ è¿™æ˜¯raywenderlich.comç½‘ç«™å‡ºçš„ä¹¦ï¼Œä¸è¿‡æ˜¯æ”¶è´¹çš„ã€‚ðŸ˜‘ æœ‰éœ€è¦çš„å°ä¼™ä¼´å¯ç§ä¿¡æˆ‘ðŸ˜Ž ä¸ºä»€ä¹ˆæ˜¯playgroundçš„å½¢å¼å¾ˆå¤šæ¦‚å¿µå•ç”¨æ–‡å­—æè¿°ä¸å¤§å¥½ç†è§£ï¼Œplaygroundæ–¹ä¾¿åˆ©ç”¨XcodeæŸ¥çœ‹å’Œè°ƒè¯•ã€‚å¾ˆå¤šæ—¶å€™ä¸€äº›ä¸å¸¸ç”¨çš„è¯­æ³•å¾ˆå®¹æ˜“å¿˜è®°ï¼Œé€šè¿‡playgroundå¾ˆæ–¹ä¾¿æ¸©ä¹ ã€‚ ç›®å½• ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-1ï¼šThe Basics ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-2ï¼šBasic Operators ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-3ï¼šStrings and Characters ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-4ï¼šCollection Type ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-5ï¼šControl Flow ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-6ï¼šFunctions ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-7ï¼šClosure ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-8ï¼šEnumerations ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-9ï¼šClasses and Structures ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-10ï¼šProperties ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-11ï¼šMethods ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-12ï¼šSubscripts ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-13ï¼šInheritance ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-14ï¼šInitialization ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-15ï¼š(ç±»çš„)Deinitialization ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-16ï¼šAutomatic Reference Counting ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-17ï¼šOptional Chaining ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-18ï¼šError Handling ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-19ï¼šType Casting(ç±»åž‹è½¬æ¢) ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-20ï¼šNested Types(åµŒå¥—ç±»åž‹) ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-21ï¼šExtensions ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-22ï¼šProtocols ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-23ï¼šGenerics ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-24ï¼šAccess Control ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-25ï¼šAdvanced Operators]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 16 ä»‹ç»é™æ€Table Viewsï¼ŒUIImagePickerControllerå’ŒNSLayoutConstraint]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-16.html</url>
    <content type="text"><![CDATA[ç»§ç»­ä¸Šä¸€ç¯‡å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 15 ä½¿ç”¨åœ°å›¾ï¼Œè¿™ä¸€ç¯‡é€šè¿‡æ·»åŠ ä¸€ä¸ªæ–°å»ºRestauranté¡µé¢æ¥ä»‹ç»é™æ€Table Viewsï¼ŒUIImagePickerControllerï¼ŒNSLayoutConstraintã€‚é™æ€Table Viewså°±æ˜¯å›ºå®šcellæ•°ç›®çš„Table Viewsï¼›UIImagePickerControllerç”¨æ¥ä»Žè®¾å¤‡å›¾ç‰‡åº“ä¸­èŽ·å–å›¾ç‰‡ï¼›NSLayoutConstraintå°±æ˜¯çº¦æŸç±»ï¼Œç”¨æ¥ç”¨ä»£ç å½¢å¼æ·»åŠ çº¦æŸã€‚ æ·»åŠ æ–°çš„Table View Controller æ‹–åŠ¨ä¸€ä¸ªTable View Controlleråˆ°SBä¸­ã€‚ ä¿®æ”¹æˆTable Viewçš„contentä¸ºstatic cellsã€‚ é€‰ä¸­Table View Sectionï¼Œä¿®æ”¹Rowsæˆ5ã€‚ ä¸‹è½½ [å›¾ç‰‡] (http://www.appcoda.com/resources/swift3/photoicons.zip)ï¼Œæ‹–è¿›`Assets` ä¿®æ”¹ç¬¬ä¸€ä¸ªCellé«˜åº¦ä¸º250ã€‚æ·»åŠ Image Viewï¼Œ imageä¸ºphotoalbumï¼Œå¤§å°64*64ï¼Œæ°´å¹³å’Œåž‚ç›´å±…ä¸­ã€‚ ç¬¬äºŒä¸ªcellé«˜åº¦ä¸º72ã€‚æ·»åŠ ä¸€ä¸ªLabelæ–‡æœ¬NAMEã€‚æ·»åŠ ä¸€ä¸ªText Field,placeholderä¸ºRestaurant Nameï¼Œborder styleä¸º noneï¼Œå®½åº¦ä¸º339ã€‚æ·»åŠ é€‚å½“çº¦æŸã€‚ ç¬¬ä¸‰ä¸ªå’Œç¬¬å››ä¸ªCellä¸Žç¬¬äºŒä¸ªç±»ä¼¼ï¼ŒLabelæ–‡æœ¬åˆ†åˆ«ä¸ºTYPE LOCATIONï¼ŒText Fieldçš„ placeholder åˆ†åˆ«ä¸ºRestaurant Typeï¼ŒRestaurant Locationã€‚ ç¬¬äº”ä¸ª é«˜åº¦ä¸º72ã€‚ æ·»åŠ ä¸€ä¸ªLabelæ–‡æœ¬Have You Been Here ã€‚æ·»åŠ ä¸¤ä¸ªButtonï¼Œtitleåˆ†åˆ«ä¸ºYESã€NOï¼Œå­—ä½“é¢œè‰²éƒ½ä¸ºwhiteï¼ŒèƒŒæ™¯é¢œè‰²åˆ†åˆ«ä¸ºredï¼Œgrayã€‚ æ·»åŠ segue åœ¨Food Pin Controllerçš„Navigation barçš„å³è¾¹æ·»åŠ ä¸€ä¸ªbar button itemï¼ŒSystem Itemä¸ºAddã€‚ æŠŠä¸Šé¢æ–°å»ºæ˜¯æˆ‘table view controllerå†…åµŒåœ¨ä¸€ä¸ªNavigation controllerä¸­ï¼Œé€‰ä¸­table view controllerï¼Œåœ¨èœå•æ ä¸­é€‰æ‹©Editor &gt; Embed in &gt; Navigation Controllerï¼Œè®¾ç½®å…¶navigation barçš„titleä¸ºNew Restaurantã€‚ å…³è”AddæŒ‰é’®å’ŒNew Restaurant Controllerçš„Navigation controllerï¼Œsegueç±»åž‹present modallyï¼Œidentifierä¸ºaddRestaurantã€‚ åœ¨New Restaurant Controllerçš„Navigation barçš„å·¦è¾¹æ·»åŠ ä¸€ä¸ªbar button itemï¼ŒSystem Itemä¸º Cancelï¼Œtintä¸ºwhiteã€‚ åœ¨RestaurantTableViewControllerä¸­æ·»åŠ unwind segueçš„actionã€‚ç”¨control-dragå…³è”ã€‚ 12@IBAction func unwindToHomeScreen(segue:UIStoryboardSegue) &#123;&#125; ä½¿ç”¨UIImagePickerControllerè°ƒç”¨ç›¸å†Œ æ–°å»ºAddRestaurantControllerï¼Œç»§æ‰¿è‡³UITableViewControllerã€‚å…³è”New Restaurant Controllerã€‚ åˆ é™¤é™¤äº†viewDidLoadæ–¹æ³•çš„å…¶ä»–æ–¹æ³•ï¼Œé™æ€ç±»åž‹ä¸éœ€è¦äº†ã€‚ æ·»åŠ tableView(_:didSelectRowAt:)ï¼š1234567891011override func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) &#123; if indexPath.row == 0 &#123; if UIImagePickerController.isSourceTypeAvailable(.photoLibrary) &#123; let imagePicker = UIImagePickerController() imagePicker.allowsEditing = false imagePicker.sourceType = .photoLibrary present(imagePicker, animated: true, completion: nil) &#125; &#125;&#125; é€‰æ‹©ç¬¬ä¸€ä¸ªcellï¼Œä¹Ÿå°±æ˜¯å›¾ç‰‡ï¼Œé€šè¿‡isSourceTypeAvailableæ–¹æ³•åˆ¤æ–­æ˜¯å¦æœ‰å›¾åº“å¯ç”¨ã€‚ åœ¨Info.plistä¸­æ·»åŠ ä½¿ç”¨å›¾åº“çš„è¯·æ±‚æè¿°ï¼Œ Privacy - Photo Library Usage Description -&gt; You need to grant the app access to your photo library so you can pick your favorite restaurant photo. ã€‚ å®žçŽ°UIImagePickerControllerDelegateåè®® æ·»åŠ UIImagePickerControllerDelegate å’ŒUINavigationControllerDelegate class AddRestaurantController: UITableViewController, UIImagePickerControllerDelegate, UINavigationControllerDelegate { æ·»åŠ æŽ¥å£@IBOutlet var photoImageView: UIImageView!ï¼Œå¹¶å…³è”ã€‚ æ·»åŠ å‡½æ•°imagePickerController(_:didFinishPickingMediaWithInfo:)ï¼Œå½“ç”¨æˆ·ä»Žå›¾åº“ä¸­é€‰æ‹©å›¾ç‰‡æ—¶è°ƒç”¨ã€‚ 12345678910func imagePickerController(_ picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : Any]) &#123; if let selectedImage = info[UIImagePickerControllerOriginalImage] as? UIImage &#123; photoImageView.image = selectedImage photoImageView.contentMode = .scaleAspectFill photoImageView.clipsToBounds = true &#125; dismiss(animated: TUREAD, completion: nil)&#125; åœ¨tableView(_:didSelectRowAt:)ä¸­çš„imagePickerå®šä¹‰åŽæ·»åŠ ï¼š imagePicker.delegate = self ç”¨ä»£ç çš„æ–¹å¼å®šä¹‰çº¦æŸä¹‹å‰éƒ½æ˜¯é€šè¿‡storyboardè®¾ç½®çº¦æŸï¼Œå…¶å®žä¹Ÿå¯ä»¥é€šè¿‡ä»£ç çš„å½¢å¼è®¾ç½®ã€‚ ä¹‹å‰çš„åœ°å›¾çš„çº¦æŸä¾‹å­ï¼Œstoryboard ä¸­çš„Map View.leading = leadingç­‰ä»·äºŽï¼š let leadingConstraint = NSLayoutConstraint(item: mapView, attribute: NSLayoutAttribute.leading, relatedBy: .equal, toItem: mapView.superview, attribute: .leading, multiplier: 1, constant: 0) leadingConstraint.isActive = true åœ¨æ·»åŠ imagePickerController(_:didFinishPickingMediaWithInfo:)çš„dismiss(animated: true, completion: nil)ä¹‹å‰æ·»åŠ 4ä¸ªçº¦æŸä»£ç ã€‚ 123456789let leadingConstraint = NSLayoutConstraint(item: photoImageView, attribute: .leading, relatedBy: .equal, toItem: photoImageView.superview, attribute: .leading, multiplier: 1, constant: 0) leadingConstraint.isActive = true let trailingConstrain = NSLayoutConstraint(item: photoImageView, attribute: .trailing, relatedBy: .equal, toItem: photoImageView.superview, attribute: .trailing, multiplier: 1, constant: 0) trailingConstrain.isActive = true let topConstraint = NSLayoutConstraint(item: photoImageView, attribute: .top, relatedBy: .equal, toItem: photoImageView.superview, attribute: .top, multiplier: 1, constant: 0) let buttomConstraint = NSLayoutConstraint(item: photoImageView, attribute: .bottom, relatedBy: .equal, toItem: photoImageView.superview, attribute: .bottom, multiplier: 1, constant: 0) æ·»åŠ çº¦æŸå‰åŽå¯¹æ¯”ï¼š Exerciseï¼šéªŒè¯æ·»åŠ æ•°æ® åœ¨New Restaurant Controllerçš„Navigation controllerçš„æœ‰å³ä¸Šè§’æ·»åŠ SaveæŒ‰é’®ã€‚ åœ¨AddRestaurantControllerä¸­æ·»åŠ äº”ä¸ªæŽ¥å£å’Œä¸€ä¸ªå˜é‡ï¼Œå¹¶å…³è”ã€‚ 123456@IBOutlet var nameTextField:UITextField!@IBOutlet var typeTextField:UITextField!@IBOutlet var locationTextField:UITextField!@IBOutlet var yesButton:UIButton!@IBOutlet var noButton:UIButton! var isVisited: Bool = true æ·»åŠ ä¸€ä¸ªActionï¼Œå…³è”saveæŒ‰é’®ã€‚ 1234567891011121314@IBAction func save(_ sender: Any) &#123; if (nameTextField.text?.isEmpty)! || (typeTextField.text?.isEmpty)! || (locationTextField.text?.isEmpty)! &#123; let alertController = UIAlertController(title: &quot;Oops&quot;, message: &quot;We can&apos;t proceed because one of the fields is blank....&quot;, preferredStyle: .alert) let alertAction = UIAlertAction(title: &quot;OK&quot;, style: .default, handler: nil) alertController.addAction(alertAction) present(alertController, animated: true, completion: nil) &#125; else &#123; print(nameTextField.text, typeTextField.text, locationTextField.text, isVisited) dismiss(animated: true, completion: nil)// performSegue(withIdentifier: &quot;unwindToHomeScreen&quot;, sender: self) &#125;&#125; åŽ»é™¤ Add Restaurant view controllerå›žåˆ°ä¸»ç•Œé¢æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€æ˜¯dismiss(animated: true, completion: nil)ï¼Œè€Œæ˜¯åˆ©ç”¨unwind segueã€‚ æ·»åŠ ä¸€ä¸ªAction toggleBeenHereButton:ï¼Œç”¨äºŽyesButtonå’ŒnoButtonçš„æ“ä½œã€‚1234567891011@IBAction func toggleBeenHereButton(sender: UIButton) &#123; if sender == yesButton &#123; isVisited = true yesButton.backgroundColor = UIColor.red noButton.backgroundColor = UIColor.gray &#125; else &#123; isVisited = false yesButton.backgroundColor = UIColor.gray noButton.backgroundColor = UIColor.red &#125;&#125; ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 15 ä½¿ç”¨åœ°å›¾]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-15.html</url>
    <content type="text"><![CDATA[ç»§ç»­ä¸Šä¸€ç›˜å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 14 åŸºç¡€åŠ¨ç”»ï¼Œæ¨¡ç³Šæ•ˆæžœå’ŒUnwind Segueï¼Œè¿™ä¸€ç¯‡ä½¿ç”¨åœ°å›¾ã€‚æ·»åŠ MapKitæ¡†æž¶ï¼š æ·»åŠ Mapåˆ°åº”ç”¨ä¸­æ•ˆæžœå›¾å¦‚ä¸‹ï¼š åœ¨Detail viewçš„table viewåº•éƒ¨æ·»åŠ ä¸€ä¸ªMap Viewã€‚é«˜åº¦è®¾ç½®ä¸º135ï¼Œå–æ¶ˆä¸€äº›å±žæ€§zooming, scrolling, rotatingç­‰ï¼Œä½¿åœ°å›¾æ²¡æœ‰äº¤äº’åŠŸèƒ½ã€‚ åˆ é™¤ä¹‹å‰åŽ»æŽ‰table viewåº•éƒ¨çš„ä»£ç ï¼Œè®©åº•éƒ¨æ˜¾ç¤ºã€‚tableView.tableFooterView = UIView(frame: CGRect.zero) æ·»åŠ æ–°çš„è§†å›¾æŽ§åˆ¶å™¨ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ Map Viewï¼Œè°ƒæ•´å¤§å°ä¸ºå…¨å±ã€‚ control-dragä»Ždetailè§†å›¾æŽ§åˆ¶å™¨åˆ°æ–°çš„åœ°å›¾è§†å›¾æŽ§åˆ¶å™¨ï¼Œé€‰æ‹©showã€‚å› ä¸ºtable viewçš„å¤´éƒ¨å’Œåº•éƒ¨æ˜¯ä¸èƒ½é€‰æ‹©çš„ï¼Œæ‰€æœ‰ä¸èƒ½ä»Žtable viewçš„åº•éƒ¨control-dragåˆ°åœ°å›¾è§†å›¾æŽ§åˆ¶å™¨ã€‚ ä¸ºäº†èƒ½æ£€æµ‹çš„table viewåº•éƒ¨mapçš„æ˜¯å¦è¢«æŽ¥è§¦ï¼Œéœ€è¦ä¸ºåœ°å›¾æ·»åŠ UITapGestureRecognizer ã€‚åœ¨RestaurantDetailViewController.swiftä¸­å¼•å…¥ import MapKit;å®šä¹‰åœ°å›¾æŽ¥å£@IBOutlet var mapView: MKMapView!ï¼Œå¹¶å…³è”;åœ¨viewDidLoadä¸­æ·»åŠ ï¼š12let tapGestureRecognizer = UITapGestureRecognizer(target: self, action: #selector(showMap))mapView.addGestureRecognizer(tapGestureRecognizer) å¦å¤–æ·»åŠ æ–¹æ³•ï¼š123func showMap() &#123; performSegue(withIdentifier: &quot;showMap&quot;, sender: self)&#125; ç”¨Geocoderè½¬æ¢åœ°å€åˆ°ç»çº¬åº¦ç±»ä¼¼ä¸‹é¢ï¼š1234567let geoCoder = CLGeocoder()geoCoder.geocodeAddressString(&quot;ä¸Šæµ·ä¸œæ–¹æ˜Žç &quot;, completionHandler: &#123; placemarks, error in for p in placemarks! &#123; print(p.location?.coordinate) &#125;&#125;) placemarksæ˜¯CLPlacemarkçš„æ•°ç»„ã€‚ åœ°å›¾æ ‡æ³¨ï¼ˆannotationï¼‰ä»‹ç»é€šè¿‡åœ°å€æ–‡æœ¬èŽ·å¾—ç»çº¬åº¦åŽå°±å¯åœ¨åœ°å›¾ä¸Šæ ‡æ³¨æŒ‡ç¤ºï¼Œç±»ä¼¼ä¸‹é¢çš„æ ·å­ï¼š åœ°å›¾æ ‡æ³¨çš„ä»£ç ä¸€èˆ¬å¦‚ä¸‹ï¼Œå…ˆé€šè¿‡åœ°å€æ–‡æœ¬ç”Ÿæˆçš„ç»çº¬åº¦ï¼Œè§„å®šMKPointAnnotationçš„ç»çº¬åº¦ï¼Œç„¶åŽæŠŠMKPointAnnotationæ·»åŠ åˆ°åœ°å›¾è§†å›¾ä¸­å³å¯ã€‚12345let annotation = MKPointAnnotation()if let location = placemark.location &#123; annotation.coordinate = location.coordinate mapView.addAnnotation(annotation)&#125; ä¸ºæ²¡æœ‰äº¤äº’çš„åœ°å›¾æ·»åŠ æ ‡æ³¨åœ¨RestaurantDetailViewController.swiftçš„viewDidLoadä¸­æ·»åŠ ï¼š123456789101112131415161718192021222324252627let geoCoder = CLGeocoder()geoCoder.geocodeAddressString(restaurant.location, completionHandler: &#123; placemarks, error in if error != nil &#123; print(error) return &#125; if let placemarks = placemarks &#123; let placemark = placemarks[0] let annotation = MKPointAnnotation() if let location = placemark.location &#123; annotation.coordinate = location.coordinate self.mapView.addAnnotation(annotation) // è§„å®šåœ°å›¾æ˜¾ç¤ºåŠå¾„ 250ç±³ let region = MKCoordinateRegionMakeWithDistance(annotation.coordinate, 250, 250) self.mapView.setRegion(region, animated: false) &#125; &#125;&#125;)``` ### ä¸ºå…¨å±çš„åœ°å›¾æ·»åŠ æ ‡æ³¨- æ–°å»ºä¸€ä¸ªè§†å›¾æŽ§åˆ¶å™¨`MapViewController`ï¼Œå…³è”å…¨å±åœ°å›¾æŽ§åˆ¶å™¨ï¼Œå¼•å…¥åœ°å›¾æ¡†æž¶ `import MapKit`ã€‚- ç¬¬ä¸€ä¸ªåœ°å›¾æŽ¥å£å’Œ`restaurant`å˜é‡ @IBOutlet var mapView: MKMapView!var restaurant:Restaurant!1- æ›´æ–°`viewDidLoad`ï¼š override func viewDidLoad() { super.viewDidLoad() let geoCoder = CLGeocoder() geoCoder.geocodeAddressString(restaurant.location, completionHandler: { placemarks, error in if error != nil { print(error) return } if let placemarks = placemarks { // Get the first placemark let placemark = placemarks[0] // 1 let annotation = MKPointAnnotation() annotation.title = self.restaurant.name annotation.subtitle = self.restaurant.type if let location = placemark.location { annotation.coordinate = location.coordinate // 2 self.mapView.showAnnotations([annotation], animated: true) self.mapView.selectAnnotation(annotation, animated: true) } } }) } 123456 + 1 è®¾ç½®`MKPointAnnotation`ä¸€äº›å±žæ€§ + 2 åœ¨åœ°å›¾å±•ç¤ºæ ‡æ³¨ã€‚åœ°å›¾ä¸Šè¯¾å±•ç¤ºå¾ˆå¤šæ ‡æ³¨ã€‚`selectAnnotation:`æ–¹æ³•æ˜¯æ ‡æ³¨æ˜¾ç¤ºè¢«é€‰ä¸­çš„æ ·å¼ã€‚### åœ¨æ ‡æ³¨ä¸­æ·»åŠ å›¾ç‰‡- è®©`MapViewController`å®žçŽ°`MKMapViewDelegate`åè®®ï¼Œå¹¶åœ¨`viewDidLoad`ä¸­è®¾ç½®`mapView.delegate = self`- æ·»åŠ `mapView(_:viewFor:)`æ–¹æ³•ï¼Œå½“åœ°å›¾æ¯æ¬¡éœ€è¦annotationæ—¶è°ƒç”¨ï¼š func mapView(_ mapView: MKMapView, viewFor annotation: MKAnnotation) -&gt; MKAnnotationView? { let identifier = &quot;MyPin&quot; // 1 if annotation.isKind(of: MKUserLocation.self) { return nil } // 2 var annotationView: MKPinAnnotationView? = mapView.dequeueReusableAnnotationView(withIdentifier: identifier) as? MKPinAnnotationView if annotationView == nil { annotationView = MKPinAnnotationView(annotation: annotation, reuseIdentifier: identifier) annotationView?.canShowCallout = true } // 3 let leftIconView = UIImageView(frame: CGRect(x: 0, y: 0, width: 53, height: 53)) leftIconView.image = UIImage(named: restaurant.image) annotationView?.leftCalloutAccessoryView = leftIconView // 4 annotationView?.pinTintColor = UIColor.orange return annotationView } ``` 1 åˆ¤æ–­æ˜¯å¦ç”¨æˆ·å½“å‰ä½ç½®ã€‚ç”¨æˆ·å½“å‰ä½ç½®ç®—æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ ‡æ³¨ï¼Œæ˜¯å½“å‰ä½ç½®ï¼Œå°±ä¸éœ€è¦å¦å¤–æ·»åŠ æ ‡æ³¨äº†ã€‚ 2 åˆ›å»ºMKPinAnnotationViewã€‚æœ‰ç‚¹ç±»ä¼¼åˆ›å»ºtable view cellã€‚ 3 åœ¨MKPinAnnotationViewä¸Šæ·»åŠ å›¾ç‰‡ã€‚ 4 æ”¹å˜æ ‡æ³¨é’ˆçš„é¢œè‰²ã€‚ åœ°å›¾å®šåˆ¶mapView.showsCompass = true mapView.showsScale = true mapView.showsTraffic = true showsCompassè¡¨ç¤ºåœ¨å³ä¸Šè§’æ˜¾ç¤ºç½—ç›˜ã€‚showsScale è¡¨ç¤ºåœ¨å·¦ä¸Šè§’æ˜¾ç¤ºç¼©æ”¾æ¯”ä¾‹å°ºã€‚ showsTrafficè¡¨ç¤ºæ˜¾ç¤ºäº¤é€šä¿¡æ¯ã€‚ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 14 åŸºç¡€åŠ¨ç”»ï¼Œæ¨¡ç³Šæ•ˆæžœå’ŒUnwind Segue]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-14.html</url>
    <content type="text"><![CDATA[åŠ¨ç”»æ˜¯é€šè¿‡ä¸€ç³»åˆ—é™æ€å›¾ç‰‡ï¼ˆå¸§ï¼‰å¿«é€Ÿæ˜¾ç¤ºæ¥æ¨¡æ‹ŸåŠ¨ä½œå’Œå½¢çŠ¶çš„å˜åŒ–è¿‡ç¨‹ã€‚ åœ¨iOSä¸­ï¼Œåˆ›å»ºåŸºç¡€åŠ¨ç”»å¾ˆç®€å•ï¼Œåªéœ€è¦åˆ©ç”¨UIViewçš„ç±»åž‹æ–¹æ³•ï¼šanimate(withDuration:animations:)ã€‚è¿™ä¸ªæ–¹æ³•çš„åŽŸç†å°±æ˜¯ï¼Œè®¾ç½®å¥½å¼€å§‹çŠ¶ä½“å’Œç»“æŸçŠ¶æ€ï¼Œç„¶åŽ UIView animation åˆ›å»ºä¸­é—´çš„è¿‡ç¨‹æ•ˆæžœã€‚ç»§ç»­ä¸Šä¸€ç¯‡å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 13 Self Sizing Cells and Dynamic Typeã€‚ æ·»åŠ è¯„çº§Button ä¸‹è½½å›¾ç‰‡åŒ…ï¼Œæ·»åŠ åˆ°xcassetsé‡Œã€‚ åœ¨detail viewå³ä¸Šè§’æ·»åŠ ä¸€ä¸ªButtonï¼Œè®¾ç½®å…¶å†…å®¹ä¸ºç©ºï¼Œimageä¸ºæ›´æ·»åŠ çš„å›¾ç‰‡checkï¼ˆä¸€ä¸ªå¯¹å‹¾å›¾æ ‡ï¼‰ï¼Œtypeä¸ºsystemï¼Œtintä¸ºwhiteã€‚ ä¸ºButtonæ·»åŠ å››ä¸ªçº¦æŸï¼Œå³ã€ä¸Šä¸¤ä¸ªspacingçº¦æŸï¼Œå®½åº¦å’Œé«˜åº¦çº¦æŸã€‚ åˆ›å»ºRestaurant Reviewè§†å›¾æŽ§åˆ¶å™¨ åœ¨storyboardä¸­æ–°å»ºä¸€ä¸ªView Controllerã€‚ åœ¨æ–°å»ºè§†å›¾æŽ§åˆ¶å™¨ä¸­æ·»åŠ Image Viewï¼Œå¹¶æ”¹å˜å…¶å¤§å°ä¸ºæ•´ä¸ªviewï¼Œå…ˆè®¾ç½®imageå±žæ€§ä¸ºä¸€ä¸ªéšæœºå›¾ç‰‡ï¼Œæ¯”å¦‚cafeloislã€‚ å¹¶è®¾ç½®ä¸€äº›çº¦æŸã€‚ æŒ‰ç…§ä¸‹å›¾è®¾ç½®ä¹‹åŽæ˜¯UIï¼š åœ¨Reviewçš„å›¾ç‰‡ä¸Šæ·»åŠ ä¸€ä¸ªUIViewï¼Œxã€yã€å®½åº¦ã€é«˜åº¦åˆ†åˆ«æ˜¯53ã€40ã€269ã€420ã€‚ æ·»åŠ Image Viewï¼Œå®½åº¦å’Œé«˜åº¦åˆ†åˆ«ä¸º269ï¼Œ200ï¼Œéšæœºè®¾ç½®image æ·»åŠ ä¸€ä¸ªå†…å®¹ä¸ºYou&#39;ve dined here. What do you think?çš„Labelã€‚å­—ä½“é£Žæ ¼ä¸ºLightï¼Œå¤§å°ä¸º27ï¼Œå±…ä¸­é€€å™¨ï¼Œè¡Œæ•°ä¸º2ã€‚ æ·»åŠ ä¸‰ä¸ªæŒ‰é’®å†…å®¹åˆ†åˆ«ä¸ºAbsolutely love it!ï¼ŒGoodï¼ŒI don&#39;t like itã€‚èƒŒæ™¯ä¸ºçº¢è‰²ï¼Œtintä¸ºwhiteï¼Œå­—ä½“æ˜¯Lightå’Œ16ã€‚ è®¾ç½®ä¸‰ä¸ªæŒ‰é’®ä¸ºä¸€ä¸ªstack viewï¼Œæ”¹å˜distributionä¸ºFill Equallyï¼Œspaingä¸º5ã€‚ ä¸ºä¸Šé¢æ·»åŠ çš„UIViewæ·»åŠ å››ä¸ªçº¦æŸã€‚ä¸Šå·¦å³çš„spacingçº¦æŸåˆ†åˆ«ä¸º20ï¼Œ37ï¼Œ37ã€‚é«˜åº¦çº¦æŸä¸º420ã€‚ ä¸ºlabelæ·»åŠ å·¦å³ä¸‹ä¸‰ä¸ªspacingçº¦æŸï¼Œå€¼éƒ½æ˜¯15ã€‚ ä¸ºstack viewå¤©æœºå·¦å³ä¸‹ä¸‰ä¸ªspacingçº¦æŸï¼Œåˆ†åˆ«ä¸º8ï¼Œ8ï¼Œ10ã€‚ åˆ›å»ºPresent modallyç±»åž‹çš„Segueåœ¨å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 10 Navigation Controllerçš„ä»‹ç»å’ŒSegueä¸­ä»‹ç»è¿‡Segueç±»åž‹ã€‚Present modallyæ˜¯æ–°é¡µé¢å°†ä»¥åŠ¨ç”»å½¢å¼ä»Žåº•éƒ¨å‡ºçŽ°åˆ°è¦†ç›–æ•´ä¸ªæ‰‹æœºå±å¹•ã€‚ contrl-dragä»Žå¯¹å‹¾buttonåˆ°Reviewè§†å›¾æŽ§åˆ¶ï¼Œé€‰æ‹©Present modallyã€‚å¹¶è®¾ç½®æ–°ç”Ÿæˆsegueçš„identifierä¸ºshowReviewã€‚ å®šä¹‰å¦‚ä½•é€€å‡ºReview View Controlleråœ¨Navigation Controllerä¸­è‡ªå¸¦äº†è¿”å›žæŒ‰é’®ï¼Œè¿™è¾¹éœ€è¦è‡ªå·±è®¾ç½®unwind segueã€‚ åœ¨Review View Controllerä¸­çš„UIViewçš„å³ä¸Šè§’æ·»åŠ ä¸€ä¸ªå…³é—­æŒ‰é’®ï¼Œç±»ä¼¼äºŽå¯¹å‹¾æŒ‰é’®ï¼Œæ·»åŠ å³ä¸Šå’Œå®½åº¦é«˜åº¦çº¦æŸã€‚ ä¸ºäº†å®žçŽ°unwind segueï¼Œéœ€è¦åšä¸¤ä»¶äº‹ï¼šé¦–å…ˆï¼Œåœ¨è¿”å›žçš„çš„è§†å›¾æŽ§åˆ¶å™¨ï¼ˆRestaurantDetailViewControllerï¼‰ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œå®šä¹‰è¿™ä¸ªæ–¹æ³•æ˜¯ä¸ºäº†å‘Šè¯‰xcodeè¿™ä¸ªsegueæ˜¯å¯ä»¥è¿”å›žçš„ã€‚12@IBAction func close(segue:UIStoryboardSegue) &#123;&#125; å…¶æ¬¡åœ¨IBä¸­å…³è”è¿”å›žã€‚control+dragå…³é—­æŒ‰é’®åˆ°Exitï¼Œé€‰æ‹©closeWithSegue:ã€‚ ä¸ºèƒŒæ™¯å›¾ç‰‡æ·»åŠ æ¨¡ç³Šæ•ˆæžœUIVisualEffectView æ–°å»ºReviewViewControllerç»§æ‰¿è‡³UIViewControllerï¼Œå…³è”ä¸Šé¢æ–°å»ºè§†å›¾æŽ§åˆ¶å™¨ã€‚ åœ¨ReviewViewControllerä¸­æ·»åŠ èƒŒæ™¯å›¾ç‰‡ç»“æž„ï¼Œå¹¶å…³è”å›¾ç‰‡ã€‚@IBOutlet var backgroundImageView: UIImageView! åœ¨ReviewViewControllerçš„viewDidLoadä¸­æ·»åŠ ï¼š1234let blurEffect = UIBlurEffect(style: .dark)let blurEffectView = UIVisualEffectView(effect: blurEffect)blurEffectView.frame = view.boundsbackgroundImageView.addSubview(blurEffectView) æ¨¡ç³Šæ•ˆæžœæœ‰ç‚¹åƒåœ¨è¦æ·»åŠ çš„è§†å›¾ä¸Šé¢æ·»åŠ ä¸€ä¸ªè§†å›¾(UIVisualEffectView)ï¼Œè¿™å›¾æœ‰æ¨¡ç³Šæ•ˆæžœ(UIBlurEffect)ï¼Œæ¨¡ç³Šæ ·å¼é€šè¿‡UIBlurEffectStyleæŽ§åˆ¶ï¼Œæœ‰ä¸‰ç§extraLight, light, darkã€‚ å®žçŽ° UIView Animation ä¸ºå‡†å¤‡å®žçŽ°åŠ¨ç”»æ•ˆæžœçš„UIViewæ·»åŠ æŽ¥å£ï¼Œå¹¶å…³è”ã€‚@IBOutlet var containerView: UIView! å®šä¹‰åˆå§‹çŠ¶æ€ï¼šåœ¨ReviewViewControllerçš„viewDidLoadä¸­æ·»åŠ :containerView.transform = CGAffineTransform.init(scaleX: 0, y: 0) å®šä¹‰ä»‹ç»çŠ¶æ€ï¼šåœ¨ReviewViewControllerçš„viewDidAppearä¸­æ·»åŠ ï¼š12345override func viewDidAppear(_ animated: Bool) &#123; UIView.animate(withDuration: 0.3, animations: &#123; self.containerView.transform = CGAffineTransform.identity &#125;)&#125; CGAffineTransform.identityè¡¨ç¤ºåŽŸæœ¬è®¾ç½®çš„å¤§å°å’Œä½ç½®çŠ¶æ€ã€‚ Spring åŠ¨ç”»åªè¦ä¿®æ”¹ä¸€ä¸‹ç»“æŸçŠ¶æ€å°±å¯ä»¥äº†ï¼š123UIView.animate(withDuration: 0.4, delay: 0.0, usingSpringWithDamping: 0.3, initialSpringVelocity: 0.2, options: .curveEaseInOut, animations: &#123; self.containerView.transform = CGAffineTransform.identity&#125;, completion: nil) ä»Žä¸Šå‘ä¸‹çš„åŠ¨ç”»åªè¦ä¿®æ”¹ä¸€ä¸‹åˆå§‹çŠ¶æ€ï¼ŒæŠŠåˆå§‹ä½ç½®è®¾ç½®åœ¨ä¸Šé¢å³å¯ï¼š1containerView.transform = CGAffineTransform.init(translationX: 0, y: -1000) ç»„åˆä¸¤ç§å˜åŒ–æŠŠcontainerView.transform = CGAffineTransform.init(translationX: 0, y: -1000)ä¿®æ”¹æˆï¼š1234let scaleTransform = CGAffineTransform.init(scaleX: 0, y: 0)let translateTransform = CGAffineTransform.init(translationX: 0, y: -1000)let combineTransform = scaleTransform.concatenating(translateTransform)containerView.transform = combineTransform Unwind Segues å’Œæ•°æ®ä¼ è¾“åœ¨Review Viewä¸­ç‚¹å‡»ä¸‰ä¸ªä¸åŒè¯„ä»·æŒ‰é’®ä¹Ÿé€šè¿‡Unwind Seguesè¿”å›žå¹¶ä¼ è¾“æ•°æ®ã€‚ åœ¨RestaurantDetailViewControlleråœ¨æ·»åŠ å¦å¤–ä¸€ä¸ªunwind actionæ–¹æ³•ã€‚ 12@IBAction func ratingButtonTapped(segue: UIStoryboardSegue) &#123;&#125; åˆ†åˆ«å¯¹ä¸‰ä¸ªæŒ‰é’®control+dragåˆ°Exitï¼Œé€‰æ‹©ratingButtonTappedWithSegue:ï¼Œå¹¶åˆ†åˆ«æŠŠä¸‰ä¸ªunwind segueçš„identifieræ”¹æˆ great good dislikeã€‚ åœ¨Restaurantä¸­æ·»åŠ ratingå±žæ€§ï¼š var rating = &quot;&quot; æ›´æ–° ratingButtonTapped(segue:)ï¼š 1234567891011121314151617@IBAction func ratingButtonTapped(segue: UIStoryboardSegue) &#123; if let rating = segue.identifier &#123; restaurant.isVisited = true switch rating &#123; case &quot;greate&quot;: restaurant.rating = &quot;Absolutely love it! Must try.&quot; case &quot;good&quot;: restaurant.rating = &quot;Pretty good.&quot; case &quot;dislike&quot;: restaurant.rating = &quot;I don&apos;t like it.&quot; default: break &#125; &#125; tableView.reloadData()&#125; æ›´æ–°RestaurantDetailViewControllerçš„tableView(_:cellForRowAt:)ä¸­å½“fieldLabelä¸ºâ€œBeen hereâ€çš„valueLabelçš„å€¼ï¼š cell.valueLabel.text = (restaurant.isVisited) ? &quot;Yes, I&apos;ve been herebefore. \(restaurant.rating)&quot; : &quot;No&quot; ä¿®æ”¹ReviewViewControllerä¸­çš„å›¾ç‰‡ä¸ºç›¸åº”çš„å›¾ç‰‡ åœ¨ReviewViewControllerä¸­æ·»åŠ ä¸€ä¸ªå±žæ€§ï¼švar restaurant: Restaurant! åœ¨RestaurantDetailViewControllerä¸­æ·»åŠ prepare(for:sender:)æ–¹æ³•ï¼Œä½œä¸ºRestaurantDetailViewControlleråˆ°ReviewViewControllerçš„segueæ—¶è°ƒç”¨ï¼Œç”¨äºŽä¼ è¾“æ•°æ®ã€‚ 123456override func prepare(for segue: UIStoryboardSegue, sender: Any?) &#123; if segue.identifier == &quot;showReview&quot; &#123; let destinationController = segue.destination as! ReviewViewController destinationController.restaurant = self.restaurant &#125;&#125; åœ¨ReviewViewController ä¸­æ·»åŠ å›¾ç‰‡æŽ¥å£ã€‚@IBOutlet var topImageView: UIImageView! åœ¨ReviewViewControllerçš„viewDidLoadä¸­æ˜¾ç¤ºå›¾ç‰‡ï¼š123let image = UIImage(named: self.restaurant.image)backgroundImageView.image = imagetopImageView.image = image ä¸ºcloseButtonæ·»åŠ åŠ¨ç”»æ•ˆæžœ æ·»åŠ æŽ¥å£@IBOutlet var closeButton: UIButton! åœ¨viewDieLoadä¸­æ·»åŠ ï¼šcloseButton.transform = CGAffineTransform.init(scaleX: 1000, y: 0) åœ¨ viewDidAppear:æ·»åŠ ï¼š12345UIView.animate(withDuration: 0.5, delay: 0.5, usingSpringWithDamping: 0.7, initialSpringVelocity: 0.3, options: .curveEaseInOut, animations: &#123; self.closeButton.transform = CGAffineTransform.identity &#125;, completion: nil) ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 13 Self Sizing Cells and Dynamic Type]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-13.html</url>
    <content type="text"><![CDATA[æŽ¥ç€ä¸Šä¸€éå¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 12 ä¸°å¯ŒDetail Viewå’Œå®šåˆ¶åŒ–Navigation Barçš„ä»£ç ç¨ä½œä¿®æ”¹ï¼Œä¸ºRestaurantå¤šåŠ ä¸€ä¸ªphoneå±žæ€§,ä¿®æ”¹è¿‡locationçš„é•¿åº¦ã€‚ ä¿®æ”¹RestaurantTableViewControllerä¸­çš„restaurantså˜é‡ï¼ˆæ·»åŠ å­—æ®µphoneï¼Œlocationå­—æ®µå†…å®¹å¢žå¤šï¼‰ï¼š 1234567891011121314151617181920212223var restaurants:[Restaurant] = [ Restaurant(name: &quot;Cafe Deadend&quot;, type: &quot;Coffee &amp; Tea Shop&quot;,location: &quot;G/F, 72 Po Hing Fong, Sheung Wan, Hong Kong&quot;, phone: &quot;232-923423&quot;,image: &quot;cafedeadend.jpg&quot;, isVisited: false), Restaurant(name: &quot;Homei&quot;, type: &quot;Cafe&quot;, location: &quot;Shop B, G/F, 22-24A Tai Ping San Street SOHO, Sheung Wan, Hong Kong&quot;, phone: &quot;348-233423&quot;, image:&quot;homei.jpg&quot;, isVisited: false), Restaurant(name: &quot;Teakha&quot;, type: &quot;Tea House&quot;, location: &quot;Shop B, 18 Tai Ping Shan Road SOHO, Sheung Wan, Hong Kong&quot;, phone: &quot;354-243523&quot;, image: &quot;teakha.jpg&quot;, isVisited: false), Restaurant(name: &quot;Cafe loisl&quot;, type: &quot;Austrian / Causual Drink&quot;, location: &quot;Shop B, 20 Tai Ping Shan Road SOHO, Sheung Wan, Hong Kong&quot;, phone: &quot;453-333423&quot;, image: &quot;cafeloisl.jpg&quot;, isVisited: false), Restaurant(name: &quot;Petite Oyster&quot;, type: &quot;French&quot;, location: &quot;24 Tai Ping Shan Road SOHO, Sheung Wan, Hong Kong&quot;, phone: &quot;983-284334&quot;, image: &quot;petiteoyster.jpg&quot;, isVisited: false), Restaurant(name: &quot;For Kee Restaurant&quot;, type: &quot;Bakery&quot;, location: &quot;Shop J-K., 200 Hollywood Road, SOHO, Sheung Wan, Hong Kong&quot;, phone: &quot;232-434222&quot;, image: &quot;forkeerestaurant.jpg&quot;, isVisited: false), Restaurant(name: &quot;Po&apos;s Atelier&quot;, type: &quot;Bakery&quot;, location: &quot;G/F, 62 Po Hing Fong, Sheung Wan, Hong Kong&quot;, phone: &quot;234-834322&quot;, image: &quot;posatelier.jpg&quot;, isVisited: false), Restaurant(name: &quot;Bourke Street Backery&quot;, type: &quot;Chocolate&quot;, location: &quot;633 Bourke St Sydney New South Wales 2010 Surry Hills&quot;, phone: &quot;982-434343&quot;, image:&quot;bourkestreetbakery.jpg&quot;, isVisited: false), Restaurant(name: &quot;Haigh&apos;s Chocolate&quot;, type: &quot;Cafe&quot;, location: &quot;412-414 George St Sydney New South Wales&quot;, phone: &quot;734-232323&quot;, image: &quot;haighschocolate.jpg&quot;, isVisited: false), Restaurant(name: &quot;Palomino Espresso&quot;, type: &quot;American / Seafood&quot;, location: &quot;Shop 1 61 York St Sydney New South Wales&quot;, phone: &quot;872-734343&quot;, image: &quot;palominoespresso.jpg&quot;, isVisited: false), Restaurant(name: &quot;Upstate&quot;, type: &quot;American&quot;, location: &quot;95 1st Ave New York, NY 10003&quot;, phone: &quot;343-233221&quot;, image: &quot;upstate.jpg&quot;, isVisited: false), Restaurant(name: &quot;Traif&quot;, type: &quot;American&quot;, location: &quot;229 S 4th St Brooklyn, NY 11211&quot;, phone: &quot;985-723623&quot;, image: &quot;traif.jpg&quot;, isVisited: false), Restaurant(name: &quot;Graham Avenue Meats&quot;, type: &quot;Breakfast &amp; Brunch&quot;, location: &quot;445 Graham Ave Brooklyn, NY 11211&quot;, phone: &quot;455-232345&quot;, image: &quot;grahamavenuemeats.jpg&quot;, isVisited: false), Restaurant(name: &quot;Waffle &amp; Wolf&quot;, type: &quot;Coffee &amp; Tea&quot;, location: &quot;413 Graham Ave Brooklyn, NY 11211&quot;, phone: &quot;434-232322&quot;, image: &quot;wafflewolf.jpg&quot;, isVisited: false), Restaurant(name: &quot;Five Leaves&quot;, type: &quot;Coffee &amp; Tea&quot;, location: &quot;18 Bedford Ave Brooklyn, NY 11222&quot;, phone: &quot;343-234553&quot;, image: &quot;fiveleaves.jpg&quot;, isVisited: false), Restaurant(name: &quot;Cafe Lore&quot;, type: &quot;Latin American&quot;, location: &quot;Sunset Park 4601 4th Ave Brooklyn, NY 11220&quot;, phone: &quot;342-455433&quot;, image: &quot;cafelore.jpg&quot;, isVisited: false), Restaurant(name: &quot;Confessional&quot;, type: &quot;Spanish&quot;, location: &quot;308 E 6th St New York, NY 10003&quot;, phone: &quot;643-332323&quot;, image: &quot;confessional.jpg&quot;, isVisited: false), Restaurant(name: &quot;Barrafina&quot;, type: &quot;Spanish&quot;, location: &quot;54 Frith Street London W1D 4SL United Kingdom&quot;, phone: &quot;542-343434&quot;, image: &quot;barrafina.jpg&quot;, isVisited: false), Restaurant(name: &quot;Donostia&quot;, type: &quot;Spanish&quot;, location: &quot;10 Seymour Place London W1H 7ND United Kingdom&quot;, phone: &quot;722-232323&quot;, image: &quot;donostia.jpg&quot;, isVisited: false), Restaurant(name: &quot;Royal Oak&quot;, type: &quot;British&quot;, location: &quot;2 Regency Street London SW1P 4BZ United Kingdom&quot;, phone: &quot;343-988834&quot;, image: &quot;royaloak.jpg&quot;, isVisited: false), Restaurant(name: &quot;CASK Pub and Kitchen&quot;, type: &quot;Thai&quot;, location: &quot;22 Charlwood Street London SW1V 2DY Pimlico&quot;, phone: &quot;432-344050&quot;, image: &quot;caskpubkitchen.jpg&quot;, isVisited: false)] ä¸ºRestaurantæ·»åŠ å±žæ€§phoneã€‚ ä¿®æ”¹RestaurantDetailViewControllerä¸­ä¸¤ä¸ªtable viewæ–¹æ³•ï¼š123456789101112131415161718192021222324252627282930313233func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123; return 5&#125;func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cell = tableView.dequeueReusableCell(withIdentifier: &quot;Cell&quot;, for: indexPath) as! RestaurantDetailTableViewCell // Configure the cell... switch indexPath.row &#123; case 0: cell.fieldLabel.text = &quot;Name&quot; cell.valueLabel.text = restaurant.name case 1: cell.fieldLabel.text = &quot;Type&quot; cell.valueLabel.text = restaurant.type case 2: cell.fieldLabel.text = &quot;Location&quot; cell.valueLabel.text = restaurant.location case 3: cell.fieldLabel.text = &quot;Phone&quot; cell.valueLabel.text = restaurant.phone case 4: cell.fieldLabel.text = &quot;Been here&quot; cell.valueLabel.text = (restaurant.isVisited) ? &quot;Yes, I&apos;ve been herebefore&quot; : &quot;No&quot; default: cell.fieldLabel.text = &quot;&quot; cell.valueLabel.text = &quot;&quot; &#125; cell.backgroundColor = UIColor.clear return cell&#125; ä½¿Cellè‡ªé€‚åº” åœ¨RestaurantDetailViewControllerä¸­çš„viewDidLoadä¸­æ·»åŠ ï¼š 12tableView.estimatedRowHeight = 36.0 tableView.rowHeight = UITableViewAutomaticDimension estimatedRowHeightæ˜¯cellçš„é¢„è®¡é«˜åº¦ï¼Œè¿™è¾¹å°±è®¾ç½®æˆåŽŸæœ¬prototype cellçš„é«˜åº¦ã€‚ UITableViewAutomaticDimensionè¡¨ç¤ºè¶…è¿‡é¢„è®¡é«˜åº¦åŽè‡ªåŠ¨é€‚åº”é«˜åº¦ã€‚ ä¿®æ”¹Value labelçš„numberOfLineså±žæ€§ä¸º0ï¼Œå°±æ˜¯ä¸é™åˆ¶è¡Œæ•°ã€‚ æ·»åŠ spacingçº¦æŸå½“value labelè¶…è¿‡ä¸¤è¡Œï¼Œæ–‡æœ¬æ˜¾ç¤ºå‡ºé—®é¢˜ï¼š è¿™æ˜¯å› ä¸ºè™½ç„¶value labelçš„é«˜åº¦è‡ªé€‚åº”äº†åˆé€‚çš„é«˜åº¦ï¼Œä½†æ˜¯stack viewçš„é«˜åº¦æ²¡æœ‰çº¦æŸï¼Œä¸èƒ½è®¡ç®—çš„å‡ºæ¥ï¼Œå› æ­¤è¦ç»™stack viewæ·»åŠ ä¸¤ä¸ªä¸Šä¸‹çš„ç›¸ç­‰spcingçº¦æŸã€‚ è¿™æ ·ä¸ç®¡value labelæ˜¯å¤šå°‘è¡Œï¼Œé«˜åº¦éƒ½ä¼šè‡ªé€‚åº”äº†ã€‚ Dynamic TypeDynamic Typeå½“åœ¨æ‰‹æœºè®¾ç½® &gt;é€šç”¨ &gt; è¾…åŠ©åŠŸèƒ½ &gt; æ›´å¤§å­—ä½“è®¾ç½®å­—ä½“å¤§å°æ—¶ï¼Œappä¸­çš„åº”ç”¨ä¹Ÿç›¸åº”çš„å˜åŒ–ã€‚åªè¦æŠŠå­—ä½“è®¾ç½®æˆtext style - Headlineå°±ä¼šæœ‰Dynamic TypeåŠŸèƒ½ã€‚ç›®å‰åªæœ‰name labelçš„å­—ä½“è®¾ç½®æˆäº†text style - Headlineï¼Œå…¶ä»–è®¾ç½®æˆå›ºå®šå¤§å°çš„å­—ä½“ï¼Œä¸ä¼šéšç€åœ¨æ‰‹æœºè®¾ç½® &gt;é€šç”¨ &gt; è¾…åŠ©åŠŸèƒ½ &gt; æ›´å¤§å­—ä½“è®¾ç½®å­—ä½“å¤§å°æ—¶è€Œå˜åŒ–ã€‚ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[OCåŸºç¡€å­¦ä¹ 6ï¼šFondation-Kitä»‹ç»]]></title>
    <url>%2F2017%2Foc-basic-6.html</url>
    <content type="text"><![CDATA[12macOS -&gt; Cocoa -&gt; Foundation, AppKitiOS -&gt; Cocoa Touch -&gt; Foundation, UIKit(UIView, UIController) Foundationæ¡†æž¶çš„åŸºç¡€æ˜¯CoreFoundationï¼ˆCè¯­è¨€ï¼‰ï¼Œå¦‚æžœå‡½æ•°æˆ–å˜é‡æ˜¯ä»¥CFå¼€å¤´ï¼Œå°±æ˜¯CoreFoundationæ¡†æž¶ä¸­çš„ã€‚ Foundationä¸­ä¸€äº›æœ‰ç”¨çš„æ•°æ®ç±»åž‹èŒƒå›´ï¼š NSRange1234typedef struct _NSRange &#123; NSUInteger location; NSUInteger length;&#125; NSRange; è¡¨ç¤ºç›¸å…³äº‹åŠ¡çš„èŒƒå›´ã€‚æœ‰ä¸‰ç§æ–¹å¼åˆå§‹åŒ–ï¼š ç›´æŽ¥ç»™å­—æ®µèµ‹å€¼ï¼š 123NSRange range;range.location = 12;range.length = 5; åº”ç”¨Cè¯­è¨€çš„èšåˆç»“æž„èµ‹å€¼ï¼šNSRange range = {17, 4} å‡½æ•°NSMakeRange()ï¼šNSRange range3 = NSMakeRange(12, 5);è¿™ä¸ªæ–¹æ³•çš„å¥½å¤„æ˜¯å¯ä»¥åœ¨ä»»ä½•èƒ½å¤Ÿä½¿ç”¨å‡½æ•°çš„åœ°æ–¹ç›´æŽ¥ä½¿ç”¨ï¼š[anObject flarbulateWithRange: NSMakeRange(13, 15)]; å‡ ä½•æ•°æ®ç±»åž‹CGå‰ç¼€ï¼Œè¡¨ç¤ºCore Graphicsæ¡†æž¶ï¼ˆCè¯­è¨€ï¼‰ï¼Œç”¨æ¥è¿›è¡Œ2Dæ¸²æŸ“ã€‚ CGPointè¡¨ç¤ºåæ ‡ 12345struct CGPoint&#123; float x; float y;&#125; CGSizeè¡¨ç¤ºå¤§å°ï¼Œç”¨æ¥å­˜å‚¨é•¿åº¦å’Œå®½åº¦ 12345struct CGSize&#123; float width; float height;&#125; CGRect è¡¨ç¤ºçŸ©å½¢ï¼Œç”±åæ ‡å’Œå¤§å°å¤åˆè€Œæˆ 12345struct CGRect&#123; CGPoint origin; CGSize size;&#125; å¯¹åº”åˆ›å»ºå‡½æ•°ï¼š CGPointMake(), CGSizeMake(), CGRectMake() é›†åˆæ•°æ®ç±»åž‹æ˜¯Cè¯­è¨€ç»“æž„ä½“è€Œä¸æ˜¯ç±»ï¼Œæ˜¯è€ƒè™‘æ€§èƒ½çš„åŽŸå› ã€‚ å­—ç¬¦ä¸²å­—ç¬¦ä¸²ç±»ï¼š NSStringã€‚ é€šè¿‡æ ¼å¼å­—ç¬¦ä¸²å’Œå‚æ•°åˆ›å»ºNSStringï¼š 12NSString *height;height = [NSString stringWithFormat:@&quot;%d, %d&quot;, 4, 3]; ç±»æ–¹æ³•ï¼š ä»¥+ä¸ºèµ·å§‹ç¬¦çš„ã€‚ å­—ç¬¦é•¿åº¦ï¼Œå®žä¾‹æ–¹æ³•lengthï¼š - (NSUInteger) length; å­—ç¬¦ä¸²æ¯”è¾ƒ (BOOL)isEqualToString:(NSString *)aString;ï¼Œè¡¨ç¤ºå­—ç¬¦ä¸²å†…å®¹æ˜¯å¦ç›¸åŒï¼Œè¿”å›žBooLï¼›==åˆ¤æ–­å­—ç¬¦ä¸²çš„æŒ‡é’ˆæ˜¯å¦ç›¸åŒï¼Œä¹Ÿå°±æ˜¯æ˜¯å¦æ˜¯åŒä¸€ä¸ªäº‹åŠ¡ã€‚ 12345678910NSString *thing1 = @&quot;hello 5&quot;;NSString *thing2 = [NSString stringWithFormat:@&quot;hello %d&quot;, 5]; if ([thing1 isEqualToString:thing2]) &#123; NSLog(@&quot;ä¸¤ä¸ªå­—ç¬¦ä¸²å†…å®¹ç›¸åŒ&quot;);&#125;if (thing1 == thing2) &#123; NSLog(@&quot;ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯åŒä¸€ä¸ªå¯¹è±¡&quot;);&#125; - (NSComparisonResult)compare:(NSNumber *)decimalNumber;ï¼Œé€ä¸ªæ¯”è¾ƒå­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦ï¼Œåˆ¤æ–­å¤§å°ã€‚è¿”å›žä¸€ä¸ªæžšä¸¾ç±»åž‹NSComparisonResultï¼Œä¸‰ä¸ªæžšä¸¾å€¼åˆ†åˆ«è¡¨ç¤ºå·¦å°äºŽå³ï¼Œå·¦ç­‰äºŽå³ï¼Œå·¦å¤§äºŽå³ã€‚ - (NSComparisonResult)compare:(NSString *)string options:(NSStringCompareOptions)mask;ï¼Œæ ¹æ®optionsçš„ä¸åŒå€¼æœ‰ä¸åŒçš„åŠŸèƒ½ã€‚ å­—ç¬¦ä¸²å†…æ˜¯å¦è¿˜åŒ…å«åˆ«çš„å­—ç¬¦ä¸²æ£€æµ‹å­—ç¬¦ä¸²æ˜¯å¦ä»¥å¦ä¸€ä¸ªå­—ç¬¦å¼€å¤´æˆ–ç»“å°¾ï¼š 12- (BOOL)hasPrefix:(NSString *)str;- (BOOL)hasSuffix:(NSString *)str; ä¸€ä¸ªå­—ç¬¦ä¸²åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²å†…çš„è¿”å›žï¼š- (NSRange)rangeOfString:(NSString *)searchString; å¯å˜æ€§NSStringæ˜¯ä¸å¯å˜çš„ã€‚ä¹Ÿå°±æ˜¯ä¸€æ—¦è¢«åˆ›å»ºï¼Œå°±ä¸èƒ½ä»¥åˆ é™¤å­—ç¬¦æˆ–æ·»åŠ å­—ç¬¦çš„æ–¹å¼æ”¹å˜å®ƒã€‚NSMutableStringæ˜¯NSStringçš„å­ç±»ï¼Œå¯ä»¥æ”¹å˜ã€‚ å¯é€šè¿‡ç±»æ–¹æ³•stringWithCapacity:æ¥åˆ›å»ºï¼Œè¡¨ç¤ºåˆ†é…ä¸€å—å†…å­˜ç”¨äºŽå­˜å‚¨å­—ç¬¦ä¸²ï¼Œ+ (NSMutableString *)stringWithCapacity:(NSUInteger)capacity;ã€‚NSMutableString *string = [NSMutableString stringWithCapacity:1]; appendString:å’ŒappendFormat: æ·»åŠ å­—ç¬¦ä¸²ï¼š 123NSMutableString *string = [NSMutableString stringWithCapacity:50];[string appendString:@&quot;Hello there &quot;];[string appendFormat:@&quot;human %d!&quot;, 39]; // Hello there human 39! deleteCharactersInRange: åˆ é™¤å­—ç¬¦ä¸²ï¼Œç»å¸¸å’ŒrangeOfString:ä¸€èµ·ä½¿ç”¨ã€‚ 12345NSMutableString *friends = [NSMutableString stringWithCapacity:50]; [friends appendString:@&quot;James BethLynn Jack Evan&quot;]; NSRange jackRange = [friends rangeOfString:@&quot;Jack&quot;]; jackRange.length++; [friends deleteCharactersInRange:jackRange]; // James BethLynn Evan é›†åˆ NSArrayä¸¤ä¸ªé™åˆ¶ï¼šåªèƒ½å­˜å‚¨OCå¯¹è±¡ï¼›ä¸èƒ½å­˜å‚¨nilã€‚ åˆ›å»ºç±»æ–¹æ³•arrayWithObjects:(nilè¡¨ç¤ºç»“æŸ)ï¼šNSArray *array = [NSArray arrayWithObjects:@&quot;one&quot;, @&quot;two&quot;, @&quot;three&quot;, nil];ç›´æŽ¥å­—é¢é‡ï¼šNSArray *array2 = @[@&quot;one&quot;, @&quot;two&quot;, @&quot;three&quot;]; æ•°ç»„å¯¹è±¡ä¸ªæ•°ï¼š [array count]; æŒ‰ç´¢å¼•èŽ·å–å¯¹è±¡ï¼š 12[array objectAtIndex:1];array[1]; å­—ç¬¦ä¸²åˆ‡åˆ†æˆæ•°ç»„ï¼Œæ•°ç»„åˆå¹¶æˆå­—ç¬¦ä¸²ã€‚ 123NSMutableString *string2 = @&quot;oop:ack:bork:greeble:ponies&quot;; NSArray *chunks = [string2 componentsSeparatedByString:@&quot;:&quot;]; string2 = [chunks componentsJoinedByString:@&quot;:-)&quot;]; // oop:-)ack:-)bork:-)greeble:-)ponies NSMutableArrayNSArrayåŒ…å«çš„å¯¹è±¡ä¸ªæ•°æ˜¯ä¸èƒ½å˜åŒ–çš„ï¼ˆåŒ…å«çš„å¯¹è±¡æ˜¯å¯ä»¥å˜åŒ–çš„ï¼‰ã€‚NSMutableArrayæ˜¯å¯ä»¥å˜åŒ–æ•°ç›®ã€‚ åˆ›å»º: + (instancetype)arrayWithCapacity:(NSUInteger)numItems; æœ«å°¾æ·»åŠ  - (void) addObject: (id) anObject; åˆ é™¤ç‰¹å®šç´¢å¼•çš„å¯¹è±¡ - (void)removeObjectAtIndex:(NSIndexSet *)index; æžšä¸¾ï¼šå¯¹æ•°ç»„è¿›è¡ŒéåŽ†ã€‚NSEnumerator 1234NSEnumerator *emumerator = [array objectEnumerator];while (id thingie = [emumerator nextObject]) &#123; &#125; å¿«é€Ÿæžšä¸¾ 123for (NSString *string in array) &#123; NSLog()&#125; NSDictionaryåŒæ ·ä¹Ÿæœ‰å¯¹åº”çš„NSMutableDictionaryã€‚ 123456789101112131415161718 // åˆ›å»º NSDictionary Tire *t1 = [Tire new]; Tire *t2 = [Tire new]; Tire *t3 = [Tire new]; Tire *t4 = [Tire new]; NSDictionary *tires = [NSDictionary dictionaryWithObjectsAndKeys:t1, @&quot;front-left&quot;, t2, @&quot;front-right&quot;, t3, @&quot;back-left&quot;, t4, @&quot;back-right&quot;, nil];// NSDictionary *tires = @&#123;@&quot;front-left&quot;: t1, @&quot;front-right&quot;: t2, @&quot;back-left&quot;: t3,@&quot;back-right&quot;: t4,&#125;; // è®¿é—®ç‰¹å®škeyçš„å¯¹è±¡ Tire *tire = [tires objectForKey:@&quot;back-right&quot;];// Tire *tire = tires[@&quot;back-right&quot;]; // åˆ›å»ºNSMutableDictionary NSMutableDictionary *tires_m = [NSMutableDictionary dictionaryWithCapacity:10];// NSMutableDictionary *tires_m = [NSMutableDictionary dictionary]; // ä¸ºNSMutableDictionaryæ·»åŠ å…ƒç´  [tires_m setObject:t1 forKey:@&quot;front-left&quot;]; // ä»ŽNSMutableDictionaryä¸­åˆ é™¤å…ƒç´  [tires_m removeObjectForKey:@&quot;front-left&quot;]; å…¶ä»–æ•°æ®ç±»åž‹NSArrayå’ŒNSDictionaryåªèƒ½å­˜å‚¨å¯¹è±¡ï¼Œä¸èƒ½ç›´æŽ¥å­˜å‚¨ä»»ä½•åŸºæœ¬ç±»åž‹çš„æ•°æ®ï¼Œå¦‚intã€floatã€å’Œstructã€‚ NSNumber NSValue NSNull]]></content>
      <categories>
        <category>Objective-C</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[OCåŸºç¡€å­¦ä¹ 3ï¼šç»§æ‰¿(inheritance)]]></title>
    <url>%2F2017%2Foc-basic-3-inheritance.html</url>
    <content type="text"><![CDATA[ä¸ºä½•ä½¿ç”¨ç»§æ‰¿ UML(Unified Modeling Language, ç»Ÿä¸€å»ºæ¨¡è¯­è¨€) æ˜¯ä¸€ç§ç”¨å›¾è¡¨æ¥è¡¨ç¤ºç±»ã€ç±»çš„å†…å®¹ä»¥åŠå®ƒä»¬ä¹‹é—´å…³ç³»ã€‚ å°†é‡å¤çš„ä»£ç åˆå¹¶åˆ°ä¸€å¤„ã€‚ ç»§æ‰¿çš„è¯­æ³•æ ¼å¼ åªèƒ½ç»§æ‰¿ä¸€ä¸ª åªæœ‰ä»£ç ç²¾ç®€ï¼Œbugæ‰æ— å¤„è—èº« æ²¡æœ‰å£°æ˜Žå®žä¾‹å˜é‡æ—¶å¯ä»¥çœç•¥èŠ±æ‹¬å· ç›¸å…³æœ¯è¯­ refactoring (é‡æž„) superclass parent class subclass child class override ç»§æ‰¿çš„å·¥ä½œæœºåˆ¶OOPä¸€ä¸ªå¼ºå¤§ä¹‹å¤„ï¼šå¯ä»¥å¯¹ä¸€ä¸ªç¨‹åºåšä¸€äº›é‡å¤§æ”¹å˜ï¼Œç¨‹åºä»ç„¶å¯ä»¥æ­£å¸¸è¿è¡Œã€‚ æ–¹æ³•è°ƒåº¦ï¼šå½“ä»£ç å‘é€ä¿¡æ¯æ—¶ï¼Œå°†åœ¨å½“å‰çš„ç±»ä¸­æœç´¢ç›¸åº”æ–¹æ³•ï¼Œå¦‚æžœæ— æ³•åœ¨æŽ¥æ”¶æ¶ˆæ¯çš„å¯¹è±¡çš„ç±»æ–‡ä»¶ä¸­æ‰¾åˆ°ç›¸åº”çš„æ–‡ä»¶ï¼Œå°±ä¼šåœ¨è¯¥å¯¹è±¡çš„è¶…ç±»ä¸­è¿›è¡ŒæŸ¥æ‰¾ã€‚ å®žä¾‹å˜é‡ åœ¨åˆ›å»ºä¸€ä¸ªæ–°ç±»æ—¶ï¼Œå…¶å¯¹è±¡é¦–å…ˆä¼šä»Žå®ƒçš„è¶…ç±»ç»§æ‰¿å®žä¾‹å˜é‡ï¼Œç„¶åŽæ ¹æ®è‡ªèº«æƒ…å†µæ·»åŠ è‡ªå·±çš„å®žä¾‹å˜é‡ã€‚ polymorphism(å¤šæ€æ€§) selfï¼šæŒ‡å‘æŽ¥æ”¶æ¶ˆæ¯çš„å¯¹è±¡çš„æŒ‡é’ˆ é‡å†™æ–¹æ³• super è°ƒç”¨ç»§æ‰¿çš„æ–¹æ³•å¯ä»¥ç¡®ä¿èŽ·å¾—æ–¹æ³•å®žçŽ°çš„æ‰€æœ‰ç‰¹æ€§]]></content>
      <categories>
        <category>Objective-C</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[OCåŸºç¡€å­¦ä¹ 2ï¼šé¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºç¡€çŸ¥è¯†]]></title>
    <url>%2F2017%2Foc-basic-2.html</url>
    <content type="text"><![CDATA[é—´æŽ¥(indirection) â€œåªè¦å†å¤šæ·»åŠ ä¸€å±‚é—´æŽ¥ï¼Œè®¡ç®—æœºç§‘å­¦ä¸­å°±æ²¡æœ‰è§£å†³ä¸äº†çš„é—®é¢˜ã€‚â€ ä¾‹å­ ç”µè¯è–„ è®©ä»–äººä»£æ›¿ä½ è‡ªå·±åŽ»å®Œæˆå·¥ä½œ ç¼–å†™ä¸€æ®µä»£ç æ¥æŸ¥è¯¢å…¶ä»–ä»£ç ï¼Œå¹¶é€šè¿‡å®ƒç»§ç»­è®¿é—®å¦ä¸€å±‚ä»£ç ã€‚ æŽ¨è¯¿ å˜é‡ä¸Žé—´æŽ¥ ä½¿ç”¨æ–‡ä»¶åçš„é—´æŽ¥ åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ä½¿ç”¨é—´æŽ¥ ä½¿ç”¨é—´æŽ¥æ¥è°ƒç”¨ä»£ç ï¼Œä¸æ˜¯ç›´æŽ¥è°ƒç”¨æŸä¸ªå‡½æ•°ï¼Œè€Œæ˜¯é—´æŽ¥è°ƒç”¨ã€‚ è¿‡ç¨‹å¼ç¼–ç¨‹(Procedual Programming) 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798#import &lt;Foundation/Foundation.h&gt;typedef enum &#123; kCircle, kRectangle, kEgg,&#125; ShapeType;typedef enum &#123; kRedColor, kGreenColor, kBlueColor&#125; ShapeColor;//ä¸åŒå›¾å½¢å…ƒç´ typedef struct &#123; int x, y, width, height;&#125; ShapeRect;//å›¾å½¢ç»“æž„typedef struct &#123; ShapeType type; ShapeColor fillColor; ShapeRect bounds;&#125; Shape;//é¢œè‰²å‡½æ•°NSString *colorName(ShapeColor fillColor)&#123; switch (fillColor) &#123; case kRedColor: return @&quot;red&quot;; break; case kGreenColor: return @&quot;green&quot;; break; case kBlueColor: return @&quot;blue&quot;; break; &#125; return @&quot;no clue&quot;;&#125;//ç»˜åˆ¶å›¾å½¢void drawCircle(ShapeRect bounds, ShapeColor fillColor)&#123; NSLog(@&quot;drawing a Circle at (%d %d %d %d) in %@&quot;, bounds.x, bounds.y, bounds.width, bounds.height, colorName(fillColor));&#125;void drawRectangle(ShapeRect bounds, ShapeColor fillColor)&#123; NSLog(@&quot;drawing a Rectangle at (%d %d %d %d) in %@&quot;, bounds.x, bounds.y, bounds.width, bounds.height, colorName(fillColor));&#125;void drawEgg(ShapeRect bounds, ShapeColor fillColor)&#123; NSLog(@&quot;drawing a Egg at (%d %d %d %d) in %@&quot;, bounds.x, bounds.y, bounds.width, bounds.height, colorName(fillColor));&#125;void drawShapes(Shape shapes[], int count)&#123; for (int i=0; i&lt;count; i++) &#123; switch (shapes[i].type) &#123; case kCircle: drawCircle(shapes[i].bounds, shapes[i].fillColor); break; case kRectangle: drawRectangle(shapes[i].bounds, shapes[i].fillColor); break; case kEgg: drawEgg(shapes[i].bounds, shapes[i].fillColor); break; default: break; &#125; &#125;&#125;int main(int argc, const char * argv[]) &#123; Shape shapes[3]; ShapeRect rect0 = &#123;0, 0, 10, 30&#125;; shapes[0].type = kCircle; shapes[0].fillColor = kRedColor; shapes[0].bounds = rect0; ShapeRect rect1 = &#123;30, 40, 50, 60&#125;; shapes[1].type = kRectangle; shapes[1].fillColor = kGreenColor; shapes[1].bounds = rect1; ShapeRect rect2 = &#123;15, 18, 37, 29&#125;; shapes[2].type = kEgg; shapes[2].fillColor = kBlueColor; shapes[2].bounds = rect2; drawShapes(shapes, 3); return 0;&#125; ä¿®æ”¹è¿‡åŽ»æ­£å¸¸å·¥ä½œçš„ä»£ç å¾ˆå¯èƒ½ä¼šå¼•å…¥æ–°çš„é”™è¯¯ã€‚å»ºç«‹åœ¨å‡½æ•°ä¹‹ä¸Šï¼Œæ•°æ®ä¸ºå‡½æ•°æœåŠ¡ã€‚ä»£ç ä¾‹å­ 3.2.1 Shapes-Procedural é¢å‘å¯¹è±¡ç¼–ç¨‹ ä»¥æ•°æ®ä¸ºä¸­å¿ƒï¼Œå‡½æ•°ä¸ºæ•°æ®æœåŠ¡ ä»£ç ä¾‹å­ 3.2.2 Shapes-Object idæ˜¯ä¸€ç§æ³›åž‹ï¼Œå¯ä»¥ç”¨æ¥å¼•ç”¨ä»»ä½•ç±»åž‹çš„å¯¹è±¡(idå®žé™…ä¸Šæ˜¯ä¸€ä¸ªæŒ‡å‘ç»“æž„ä½“çš„æŒ‡é’ˆ)ã€‚ æ–¹æ‹¬å·åœ¨OCä¸­å…¶ä»–æ„ä¹‰ï¼šç”¨äºŽé€šçŸ¥æŸä¸ªå¯¹è±¡è¯¥åŽ»åšä»€ä¹ˆã€‚[shape draw];è¡¨ç¤ºé€šçŸ¥shapeå¯¹è±¡æ‰§è¡Œdrawæ“ä½œ å‘é€æ¶ˆæ¯ï¼ˆè°ƒç”¨æ–¹æ³•ï¼‰ï¼šé€šçŸ¥å¯¹è±¡æ‰§è¡ŒæŸç§æ“ä½œã€‚ ç±»æ˜¯ä¸€ç§èƒ½å¤Ÿå®žä¾‹åŒ–æˆå¯¹è±¡çš„ç»“æž„ä½“ã€‚ å¦‚æžœåœ¨è¿è¡Œæ—¶æ”¹å˜æŸä¸ªç±»ï¼Œåˆ™è¯¥ç±»çš„æ‰€æœ‰å¯¹è±¡è‡ªåŠ¨ç»§æ‰¿è¿™äº›å˜åŒ–ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184#import &lt;Foundation/Foundation.h&gt;typedef enum &#123; kRedColor, kGreenColor, kBlueColor&#125; ShapeColor;//ä¸åŒå›¾å½¢å…ƒç´ typedef struct &#123; int x, y, width, height;&#125; ShapeRect;//é¢œè‰²å‡½æ•°NSString *colorName(ShapeColor fillColor)&#123; switch (fillColor) &#123; case kRedColor: return @&quot;red&quot;; break; case kGreenColor: return @&quot;green&quot;; break; case kBlueColor: return @&quot;blue&quot;; break; &#125; return @&quot;no clue&quot;;&#125;@interface Circle : NSObject&#123; @private ShapeColor fillColor; ShapeRect bounds;&#125;- (void) setFillColor: (ShapeColor) fillColor;- (void) setBounds: (ShapeRect) bounds;- (void) draw;@end //Circle@implementation Circle- (void) setFillColor:(ShapeColor) c&#123; fillColor = c;&#125;- (void) setBounds:(ShapeRect) b&#123; bounds = b;&#125;- (void) draw&#123; NSLog(@&quot;drawing a Circle at (%d %d %d %d) in %@&quot;, bounds.x, bounds.y, bounds.width, bounds.height, colorName(fillColor));&#125;@end@interface Rectangle : NSObject&#123;@private ShapeColor fillColor; ShapeRect bounds;&#125;- (void) setFillColor: (ShapeColor) fillColor;- (void) setBounds: (ShapeRect) bounds;- (void) draw;@end //Rectangle@implementation Rectangle- (void) setFillColor:(ShapeColor) c&#123; fillColor = c;&#125;- (void) setBounds:(ShapeRect) b&#123; bounds = b;&#125;- (void) draw&#123; NSLog(@&quot;drawing a Rectangle at (%d %d %d %d) in %@&quot;, bounds.x, bounds.y, bounds.width, bounds.height, colorName(fillColor));&#125;@end@interface Egg : NSObject&#123;@private ShapeColor fillColor; ShapeRect bounds;&#125;- (void) setFillColor: (ShapeColor) fillColor;- (void) setBounds: (ShapeRect) bounds;- (void) draw;@end //Egg@implementation Egg- (void) setFillColor:(ShapeColor) c&#123; fillColor = c;&#125;- (void) setBounds:(ShapeRect) b&#123; bounds = b;&#125;- (void) draw&#123; NSLog(@&quot;drawing a Egg at (%d %d %d %d) in %@&quot;, bounds.x, bounds.y, bounds.width, bounds.height, colorName(fillColor));&#125;@end// è¡¥å……ä¸€ä¸ªä¸‰è§’å½¢@interface Triangle : NSObject&#123;@private ShapeColor fillColor; ShapeRect bounds;&#125;- (void) setFillColor: (ShapeColor) fillColor;- (void) setBounds: (ShapeRect) bounds;- (void) draw;@end //Triangle@implementation Triangle- (void) setFillColor:(ShapeColor) c&#123; fillColor = c;&#125;- (void) setBounds:(ShapeRect) b&#123; bounds = b;&#125;- (void) draw&#123; NSLog(@&quot;drawing a Triangle at (%d %d %d %d) in %@&quot;, bounds.x, bounds.y, bounds.width, bounds.height, colorName(fillColor));&#125;@endvoid drawShapes(id shapes[], int count)&#123; for (int i=0; i&lt;count; i++) &#123; id shape = shapes[i]; [shape draw]; &#125;&#125;int main(int argc, const char * argv[]) &#123; id shapes[4]; ShapeRect rect0 = &#123;0, 0, 10, 30&#125;; shapes[0] = [Circle new]; [shapes[0] setBounds:rect0]; [shapes[0] setFillColor:kRedColor]; ShapeRect rect1 = &#123;30, 40, 50, 60&#125;; shapes[1] = [Rectangle new]; [shapes[1] setBounds:rect1]; [shapes[1] setFillColor:kGreenColor]; ShapeRect rect2 = &#123;15, 18, 37, 29&#125;; shapes[2] = [Egg new]; [shapes[2] setBounds:rect2]; [shapes[2] setFillColor:kBlueColor]; ShapeRect rect3 = &#123;3, 4, 5, 0&#125;; shapes[3] = [Triangle new]; [shapes[3] setBounds:rect3]; [shapes[3] setFillColor:kBlueColor]; drawShapes(shapes, 4); return 0;&#125; æœ‰å…³æœ¯è¯­ class object instance message method method dispatcher interface implementation OCä¸­çš„OOP12345678910111213141516171819202122232425262728293031@interface Circle : NSObject&#123; @private ShapeColor fillColor; ShapeRect bounds;&#125;- (void) setFillColor: (ShapeColor) fillColor;- (void) setBounds: (ShapeRect) bounds;- (void) draw;@end //Circle@implementation Circle- (void) setFillColor:(ShapeColor) c&#123; fillColor = c;&#125;- (void) setBounds:(ShapeRect) b&#123; bounds = b;&#125;- (void) draw&#123; NSLog(@&quot;drawing a Circle at (%d %d %d %d) in %@&quot;, bounds.x, bounds.y, bounds.width, bounds.height, colorName(fillColor));&#125;@end``` 1. `@interface` OCç¼–è¯‘å™¨éœ€è¦ä¸€äº›æœ‰å…³ç±»çš„ä¿¡æ¯ + `@` å¯ä»¥çœ‹æˆæ˜¯å¯¹Cè¯­è¨€çš„æ‰©å±• + **instance variable**(å®žä¾‹å˜é‡) ï¼š `@interface`ä¸‹çš„èŠ±æ‹¬å·çš„å†…å®¹ï¼š { @private ShapeColor fillColor; ShapeRect bounds;} 1+ **method declaration**(æ–¹æ³•å£°æ˜Ž)ã€‚æœ‰ç‚¹åƒCè¯­è¨€ä¸­çš„å‡½æ•°åŽŸåž‹ã€‚`-`è¡¨ç¤ºå¯¹è±¡æ–¹æ³•ï¼Œ`+`è¡¨ç¤ºç±»æ–¹æ³•ã€‚`(void)`è¡¨ç¤ºè¿”å›žç±»åž‹ã€‚ - (void) setFillColor: (ShapeColor) fillColor; - (void) setBounds: (ShapeRect) bounds; - (void) draw; ``` + **infix notation**(ä¸­ç¼€ç¬¦) ï¼š *æ–¹æ³•çš„åç§°åŠå…¶å‚æ•°éƒ½æ˜¯åˆåœ¨ä¸€èµ·çš„* `[circle setFillColor: kRedColor]` è¡¨ç¤ºè°ƒç”¨å¸¦ä¸€ä¸ªå‚æ•°çš„æ–¹æ³• + å¦‚æžœæ–¹æ³•ä½¿ç”¨å‚æ•°ï¼Œåˆ™éœ€è¦å†’å·ï¼Œå¦åˆ™ä¸éœ€è¦å†’å· + æå€¡@endè¯­è¨€åŽæ·»åŠ æ³¨é‡Šæ¥æ³¨æ˜Žç±»çš„åç§° @implementation @implementationä¸­å¯ä»¥å®šä¹‰åœ¨@interfaceä¸­å£°æ˜Žè¿‡å’Œæ²¡æœ‰å£°æ˜Žè¿‡çš„æ–¹æ³• OCä¸­ä¸å­˜åœ¨çœŸæ­£çš„ç§æœ‰æ–¹æ³• å®žä¾‹åŒ–å¯¹è±¡ instantiationï¼ˆå®žä¾‹åŒ–ï¼‰ [Circle new] å‘é€newæ¶ˆæ¯ è½¯ä»¶å®žä½“åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œè€Œå¯¹ä¿®æ”¹å…³é—­ã€‚ â€”- å¼€æ”¾/å…³é—­åŽŸåˆ™(Bertrand Meyer)]]></content>
      <categories>
        <category>Objective-C</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[OCåŸºç¡€å­¦ä¹ 4ï¼šå¤åˆï¼ˆcompositionï¼‰]]></title>
    <url>%2F2017%2Foc-basic-4-composition.html</url>
    <content type="text"><![CDATA[å¤åˆ: å¯¹è±¡é—´çš„ç»„åˆï¼ˆç±»ä¸­ä¸­åŒ…æ‹¬ç±»ï¼‰compositionåœ¨éŸ³ä¹ä¸­ç¿»è¯‘ä¸ºä½œæ›²ï¼šå°†å¤šä¸ªç»„ä»¶ç»„åˆåœ¨ä¸€èµ·ï¼Œé…åˆä½¿ç”¨ï¼Œä»Žè€Œå¾—åˆ°å®Œæ•´çš„ä½œå“ã€‚åœ¨OCä¸­ï¼Œå¤åˆæ˜¯é€šè¿‡åŒ…å«ä½œä¸ºå®žä¾‹å˜é‡çš„å¯¹è±¡æŒ‡é’ˆå®žçŽ°çš„ã€‚1234567@interface Car : NSObject&#123; Engine *engine; Tire *tires[4];&#125;* (void)print;@end //Car è‡ªå®šä¹‰NSLog()NSLog()ä½¿ç”¨%@æ ¼å¼è¯´æ˜Žç¬¦è¡¨ç¤ºè¾“å‡ºå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯NSLog()ä¼šç»™è¿™ä¸ªå¯¹è±¡å‘é€äº†descriptionæ¶ˆæ¯ï¼Œç„¶åŽå¯¹è±¡çš„descriptionæ–¹æ³•ç”Ÿæˆä¸€ä¸ªNSStringå¹¶å°†å…¶è¿”å›žã€‚**åœ¨ç±»ä¸­æä¾›descriptionæ–¹æ³•å°±å¯ä»¥è‡ªå®šä¹‰NSLog()å¦‚ä½•è¾“å‡ºå¯¹è±¡ã€‚123456789101112131415@interface Tire : NSObject@end //Tire è½®èƒŽ@implementation Tire- (NSString *)description &#123; return (@&quot;I am a tire.&quot;);&#125;@endint main(int argc, const char * argv[]) &#123; Tire *tire = [Tire new]; NSLog(@&quot;%@&quot;, tire); // è¾“å‡º &quot;I am a tire.&quot; return 0;&#125; å­˜å–æ–¹æ³• å­˜å–(accessor) æ–¹æ³•æ˜¯ç”¨æ¥è¯»å–æˆ–æ”¹å˜æŸä¸ªå¯¹è±¡å±žæ€§çš„æ–¹æ³•ã€‚åˆ†ä¸º getteræ–¹æ³• å’Œ setteræ–¹æ³•ã€‚ åº”è¯¥å°½é‡ä½¿ç”¨å¯¹è±¡æä¾›çš„å­˜å–æ–¹æ³•ï¼Œä¸è¦ç›´æŽ¥æ”¹å˜å¯¹è±¡é‡Œé¢çš„å€¼ã€‚å­˜å–æ–¹æ³•æ€»æ˜¯æˆå¯¹å‡ºçŽ°çš„ã€‚å‘½åæ–¹å¼ï¼šsetteræ–¹æ³•åœ¨è¦æ›´æ”¹å±žæ€§çš„åŠ ä¸Šå‰ç¼€setï¼›getteræ–¹æ³•ç›´æŽ¥æ˜¯å±žæ€§åç§°ã€‚ 1234567891011@interface Car : NSObject&#123; Engine *engine; Tire *tires[4];&#125;- (Engine *) engine;- (void) setEngine: (Engine *) newEngine;- (Tire *) tireAtIndex: (int) index;- (void) setTire: (Tire *) tire atIndex: (int) index;- (void)print;@end //Car åœ¨OCä¸­æ‰€æœ‰å¯¹è±¡é—´çš„äº¤äº’éƒ½æ˜¯é€šè¿‡æŒ‡é’ˆå®žçŽ°çš„ã€‚ å¤åˆè¿˜æ˜¯ç»§æ‰¿ç»§æ‰¿çš„å…³ç³»ï¼šâ€œIs aâ€ï¼ˆæ˜¯ä¸€ä¸ªï¼‰ã€‚å¦‚ä¸‰è§’å½¢æ˜¯ä¸€ä¸ªå½¢çŠ¶ï¼ŒSlant6æ˜¯ä¸€ä¸ªå‘åŠ¨æœºâ€¦â€¦å¤åˆçš„å…³ç³»ï¼šâ€œhas aâ€ï¼ˆæœ‰ä¸€ä¸ªï¼‰ã€‚å¦‚å½¢çŠ¶æœ‰ä¸ªå¡«å……é¢œè‰²ï¼Œæ±½è½¦æœ‰ä¸ªå‘åŠ¨æœºå’Œå››ä¸ªè½®èƒŽâ€¦â€¦ è¯¦ç»†ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114#import &lt;Foundation/Foundation.h&gt;@interface Tire : NSObject@end //Tire è½®èƒŽ@implementation Tire- (NSString *)description &#123; return (@&quot;I am a tire.&quot;);&#125;@end@interface Engine : NSObject@end //Engine@implementation Engine- (NSString *)description &#123; return (@&quot;I am a Engine.&quot;);&#125; //description@end@interface Slant6 : Engine@end //slant-6åž‹å·çš„å‘åŠ¨æœº@implementation Slant6- (NSString *)description &#123; return (@&quot;I am a slant-6åž‹å·çš„å‘åŠ¨æœº.VROOM!&quot;);&#125;@end@interface AllWeatherRadial : Tire@end // æ–°åž‹è½®èƒŽ@implementation AllWeatherRadial-(NSString *)description&#123; return (@&quot;I am a tire for rain or shine.&quot;);&#125;@end@interface Car : NSObject&#123; Engine *engine; Tire *tires[4];&#125;- (Engine *) engine;- (void) setEngine: (Engine *) newEngine;- (Tire *) tireAtIndex: (int) index;- (void) setTire: (Tire *) tire atIndex: (int) index;- (void)print;@end //Car@implementation Car- (Engine *) engine&#123; return (engine);&#125; //engine- (void) setEngine:(Engine *)newEngine&#123; engine = newEngine;&#125; //setEngine- (void) setTire:(Tire *)tire atIndex:(int)index&#123; if (index&lt;0 || index&gt;3) &#123; NSLog(@&quot;bad index (%d) in setTire:atIndex&quot;, index); exit(1); &#125; tires[index] = tire;&#125; // setTire- (Tire *) tireAtIndex:(int)index&#123; if (index&lt;0 || index&gt;3) &#123; NSLog(@&quot;bad index (%d) in setTire:atIndex&quot;, index); exit(1); &#125; return tires[index];&#125; // tireAtIndex- (id)init&#123; if (self = [super init]) &#123; //? engine = [Engine new]; tires[0] = [Tire new]; tires[1] = [Tire new]; tires[2] = [Tire new]; tires[3] = [Tire new]; &#125; return (self);&#125;- (void)print&#123; NSLog(@&quot;%@&quot;, engine); NSLog(@&quot;%@&quot;, tires[0]); NSLog(@&quot;%@&quot;, tires[1]); NSLog(@&quot;%@&quot;, tires[2]); NSLog(@&quot;%@&quot;, tires[3]);&#125;@endint main(int argc, const char * argv[]) &#123; Car *car = [Car new]; Engine *engine = [Slant6 new]; [car setEngine:engine]; for (int i=0; i&lt;4; i++) &#123; Tire *tire = [AllWeatherRadial new]; [car setTire:tire atIndex:i]; &#125; [car print]; return 0;&#125;]]></content>
      <categories>
        <category>Objective-C</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[OCåŸºç¡€å­¦ä¹ 5ï¼šæºæ–‡ä»¶ç»„ç»‡]]></title>
    <url>%2F2017%2Foc-basic-5.html</url>
    <content type="text"><![CDATA[å°†ç¨‹åºæ‹†åˆ†ä¸ºå¤šä¸ªå°æ–‡ä»¶æœ‰åŠ©äºŽæ›´å¿«åœ°æ‰¾åˆ°é‡è¦çš„ä»£ç ï¼Œè€Œä¸”å…¶ä»–äººåœ¨æŸ¥çœ‹é¡¹ç›®æ—¶ä¹Ÿèƒ½æœ‰ä¸ªå¤§è‡´çš„äº†è§£ã€‚ æ‹†åˆ†æŽ¥å£å’Œå®žçŽ°æ ¹æ®@interfaceå’Œ@implementationï¼ŒOCçš„ä»£ç é€šå¸¸æ”¾åœ¨ä¸¤ç§æ–‡ä»¶é‡Œï¼š æŽ¥å£éƒ¨åˆ†(.h)ï¼šç±»çš„@interfaceæŒ‡ä»¤ã€å…¬å…±structå®šä¹‰ã€enumå¸¸é‡ã€#defineså’Œexternå…¨å±€å˜é‡ç­‰ã€‚ å®žçŽ°éƒ¨åˆ†(.m): ç±»çš„@implementationæŒ‡ä»¤ã€å…¨å±€å˜é‡çš„å®šä¹‰ã€ç§æœ‰structç­‰ã€‚ å¦å¤–ï¼Œå¤æ‚çš„é¡¹ç›®å¯ä»¥æ‹¥æœ‰å¤šä¸ªç›®æ ‡ï¼Œå®ƒä»¬æºæ–‡ä»¶çš„é…ç½®å„ä¸ç›¸åŒï¼Œæž„å»ºè§„åˆ™ä¹Ÿä¸åŒã€‚ç¾¤ç»„å…³ç³»ä»…ä»…æ˜¯æœ‰Xcodeè´Ÿè´£ç®¡ç†çš„ä¸€é¡¹å¥‡å¦™çš„åŠŸèƒ½ã€‚ æ‹†åˆ†Carç¨‹åº #import å¸¦å°–å·çš„æ˜¯å¯¼å…¥ç³»ç»Ÿå¤´æ–‡ä»¶(åªè¯»)ï¼Œå¦‚#import &lt;Foundation/Foundation.h&gt;ï¼›åŒå¼•å·æ˜¯é¡¹ç›®æœ¬åœ°çš„ä»£ç æ–‡ä»¶ï¼Œå¦‚#import &quot;Engine.h&quot;ã€‚ æ‹†åˆ†ä¸Šä¸€ç¯‡ä¸­çš„Carç¨‹åºé¦–å…ˆæ‹†åˆ†ç»§æ‰¿è‡ªNSObjectçš„ç±»ï¼šTireå’ŒEngineã€‚ 1234567// Tire.h#import &lt;Foundation/Foundation.h&gt;@interface Tire : NSObject@end 1234567891011// Tire.m#import &quot;Tire.h&quot;@implementation Tire//#pragma mark -- (NSString *)description &#123; return (@&quot;I am a Tire.&quot;);&#125; //description@end 1234567// Engine.h#import &lt;Foundation/Foundation.h&gt;@interface Engine : NSObject@end 12345678// Engine.m#import &quot;Engine.h&quot;@implementation Engine- (NSString *)description &#123; return (@&quot;I am a Engine.&quot;);&#125; //description@end ä½¿ç”¨è·¨æ–‡ä»¶ä¾èµ–å…³ç³» @class æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼šâ€œè¿™æ˜¯ä¸€ä¸ªç±»ï¼Œåªä¼šé€šè¿‡æŒ‡é’ˆæ¥å¼•ç”¨å®ƒï¼Œä¸éœ€è¦å…³æ³¨æ­¤ç±»çš„æ›´å¤šä¿¡æ¯â€ã€‚å¯å‡å°‘å¿…é¡»å¯¼å…¥çš„å¤´æ–‡ä»¶çš„æ•°é‡ï¼Œä»Žè€Œç¼©çŸ­ç¼–è¯‘æ—¶é—´ã€‚æ‹†åˆ†Carç±»ï¼š 1234567891011121314// Car.h#import &lt;Foundation/Foundation.h&gt;@class Engine;@class Tire;@interface Car : NSObject- (Engine *) engine;- (void) setEngine: (Engine *) newEngine;- (Tire *) tireAtIndex: (int) index;- (void) setTire: (Tire *) tire atIndex: (int) index;- (void)print;@end //Car 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657// Car.m#import &quot;Car.h&quot;#import &quot;Tire.h&quot;#import &quot;Engine.h&quot;@implementation Car&#123; Engine *engine; Tire *tires[4];&#125;- (Engine *) engine&#123; return (engine);&#125; //engine- (void) setEngine:(Engine *)newEngine&#123; engine = newEngine;&#125; //setEngine- (void) setTire:(Tire *)tire atIndex:(int)index&#123; if (index&lt;0 || index&gt;3) &#123; NSLog(@&quot;bad index (%d) in setTire:atIndex&quot;, index); exit(1); &#125; tires[index] = tire;&#125; // setTire- (Tire *) tireAtIndex:(int)index&#123; if (index&lt;0 || index&gt;3) &#123; NSLog(@&quot;bad index (%d) in setTire:atIndex&quot;, index); exit(1); &#125; return tires[index];&#125; // tireAtIndex- (id)init&#123; if (self = [super init]) &#123; //? engine = [Engine new]; tires[0] = [Tire new]; tires[1] = [Tire new]; tires[2] = [Tire new]; tires[3] = [Tire new]; &#125; return (self);&#125;- (void)print&#123; NSLog(@&quot;%@&quot;, engine); NSLog(@&quot;%@&quot;, tires[0]); NSLog(@&quot;%@&quot;, tires[1]); NSLog(@&quot;%@&quot;, tires[2]); NSLog(@&quot;%@&quot;, tires[3]);&#125;@end //Car ç¼–è¯‘å™¨éœ€è¦å…ˆçŸ¥é“æ‰€æœ‰å…³äºŽè¶…ç±»çš„ä¿¡æ¯æ‰èƒ½æˆåŠŸåœ°ä¸ºå…¶å­ç±»ç¼–è¯‘@interfaceéƒ¨åˆ†ã€‚æ‹†åˆ†Slant6å’ŒAllWeatherRadialï¼š 1234567// Slant6.h#import &quot;Engine.h&quot;@interface Slant6 : Engine@end 123456789// Slant6.m#import &quot;Slant6.h&quot;@implementation Slant6- (NSString *)description &#123; return (@&quot;I am a slant-6.VROOM!&quot;);&#125;@end 1234567// AllWeatherRadial.h#import &quot;Tire.h&quot;@interface AllWeatherRadial : Tire@end 12345678910// AllWeatherRadial.m#import &quot;AllWeatherRadial.h&quot;@implementation AllWeatherRadial-(NSString *)description&#123; return (@&quot;I am a tire for rain or shine.&quot;);&#125;@end æœ€åŽæ˜¯main.mæ–‡ä»¶ï¼š123456789101112131415161718192021222324// main.m#import &lt;Foundation/Foundation.h&gt;#import &quot;Car.h&quot;#import &quot;Tire.h&quot;#import &quot;Engine.h&quot;#import &quot;Slant6.h&quot;#import &quot;AllWeatherRadial.h&quot;int main(int argc, const char * argv[]) &#123; Car *car = [Car new]; Engine *engine = [Slant6 new]; [car setEngine:engine]; for (int i=0; i&lt;4; i++) &#123; Tire *tire = [AllWeatherRadial new]; [car setTire:tire atIndex:i]; &#125; [car print]; return 0;&#125;]]></content>
      <categories>
        <category>Objective-C</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[OCåŸºç¡€å­¦ä¹ 1ï¼šå¯¹Cçš„æ‰©å±•]]></title>
    <url>%2F2017%2Foc-basic-1-c.html</url>
    <content type="text"><![CDATA[åˆ†æžæœ€ç®€å•çš„Hello Objective-Cç¨‹åº1234567#import &lt;Foundation/Foundation.h&gt;int main(int argc, const char * argv[]) &#123; NSLog(@&quot;Hello, World!&quot;); return 0;&#125; // main OCæœ¬è´¨ä¸Šå°±æ˜¯Cè¯­è¨€ï¼Œå®ƒç”¨æ¥å£°æ˜Žmain()å’Œè¿”å›žæ•°å€¼çš„è¯­æ³•å’ŒCè¯­è¨€æ˜¯ä¸€æ ·çš„ã€‚ æ‰©å±•å.mä»£è¡¨message ä¸ŽCç±»ä¼¼ï¼ŒOCä½¿ç”¨å¤´æ–‡ä»¶æ¥åŒ…å«ç»“æž„ä½“ã€ç¬¦å·å¸¸é‡å’Œå‡½æ•°åŽŸåž‹ç­‰å…ƒç´ çš„å£°æ˜Žã€‚ #importç±»ä¼¼äºŽCçš„#includeï¼Œä½†#importå¯ä¿è¯å¤´æ–‡ä»¶åªè¢«åŒ…å«ä¸€æ¬¡ã€‚ #import &lt;Foundation/Foundation.h&gt;è¯­å¥å‘Šè¯‰ç¼–è¯‘å™¨æŸ¥æ‰¾Foundationæ¡†æž¶ä¸­çš„Foundation.hå¤´æ–‡ä»¶ã€‚ int argc, const char * argv[]ä¸­ argcæ˜¯æŒ‡å‘½ä»¤è¡Œå‚æ•°ä¸ªæ•°ï¼Œargv[0]æ˜¯æŒ‡å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ï¼Œargv[1]æ˜¯æŒ‡å‘½ä»¤è¡Œç¬¬ä¸€ä¸ªå‚æ•°ï¼Œargv[2]æ˜¯æŒ‡å‘½ä»¤è¡Œç¬¬äºŒä¸ªå‚æ•°ï¼Œä»¥æ­¤ç±»æŽ¨ã€‚ æ¡†æž¶ ï¼šä¸€ç§æŠŠå¤´æ–‡ä»¶ã€åº“ã€å›¾ç‰‡ã€å£°éŸ³ç­‰å†…å®¹èšé›†åœ¨ä¸€ä¸ªç‹¬ç«‹å•å…ƒä¸­çš„é›†åˆä½“ã€‚ å¦‚Cocoa,Carbon,QuickTime,OpenGL CocoaåŒ…æ‹¬Foundationå’ŒApplication Kit(AppKit) æ¯ä¸€ä¸ªæ¡†æž¶éƒ½æœ‰ä¸€ä¸ªä¸»å¤´æ–‡ä»¶ï¼Œå®ƒåŒ…å«äº†æ¡†æž¶å†…æ‰€æœ‰çš„å¤´æ–‡ä»¶ã€‚ Foundationçš„å¤´æ–‡ä»¶ 1MB 14000è¡Œ 100å¤šæ–‡ä»¶ ã€‚é€šè¿‡#import &lt;Foundation/Foundation.h&gt; å°±èŽ·å¾—äº†æ•´ä¸ªé›†åˆ Xcodeä½¿ç”¨é¢„ç¼–è¯‘å¤´æ–‡ä»¶ï¼ˆä¸€ç§ç»è¿‡åŽ‹ç¼©çš„ï¼Œæ‘˜è¦å½¢å¼çš„å¤´æ–‡ä»¶ï¼‰æ¥åŠ å¿«è¯»å–é€Ÿåº¦ã€‚ NSLog()å’Œ@â€å­—ç¬¦ä¸²â€ NSå‰ç¼€æ˜¯NextSTEPï¼ˆå¾ˆæ—©ä¹‹å‰è‹¹æžœå…¬å¸æ”¶è´­çš„å…¬å¸ï¼‰ NSLog()ç±»ä¼¼äºŽCçš„printf() @ç¬¦å·æ˜¯Objective-Cåœ¨æ ‡å‡†Cè¯­è¨€åŸºç¡€ä¸Šæ·»åŠ çš„ç‰¹æ€§ï¼Œæ„å‘³ç€å¼•å·å†…çš„å­—ç¬¦ä¸²åº”ä½œä¸ºCocoaçš„NSStringå…ƒç´ æ¥å¤„ç† @ç¬¦å·å¯ä»¥çœ‹æˆä¹‹åŽæ˜¯å¯¹Cè¯­è¨€çš„æ‰©å±• å¸ƒå°”ç±»åž‹OCä¸­çš„å¸ƒå°”å€¼YESæ˜¯1ï¼Œ NOæ˜¯0ï¼Œæ˜¯ä¸ŽCè¯­è¨€ä¸­ä¸åŒçš„ã€‚]]></content>
      <categories>
        <category>Objective-C</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 12 ä¸°å¯ŒDetail Viewå’Œå®šåˆ¶åŒ–Navigation Bar]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-12.html</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 11 é¢å‘å¯¹è±¡ç¼–ç¨‹ä»‹ç»å¯¹ä»£ç åšäº†ä¸€ç‚¹ä¿®æ”¹ï¼Œè¿™ä¸€ç¯‡æ¥ä¸°å¯Œä¸€ä¸‹è¯¦æƒ…é¡µå’Œå®šåˆ¶åŒ–Navigation Barã€‚ é‡æ–°è®¾è®¡è¯¦ç»†é¡µé¢ é€‰ä¸­Main.storyboardï¼Œåˆ é™¤Image Viewå’Œä¸‰ä¸ªLabelã€‚ æ·»åŠ Table Viewï¼Œä¿®æ”¹å…¶å¤§å°ä¸ºæ•´ä¸ªViewï¼Œå¹¶ä¸”æ·»åŠ ä¸€äº›çº¦æŸã€‚è®¾ç½®prototype cellsä¸º1ï¼›table view cellçš„identifierä¸ºCellï¼Œrow heightä¸º36ã€‚ åœ¨table viewçš„å¤´éƒ¨æ·»åŠ ä¸€ä¸ªimage viewï¼Œç»™å˜å…¶é«˜åº¦ä¸º300ï¼Œå®½åº¦ä¸ºViewçš„å®½åº¦ã€‚ è¿žæŽ¥image viewå’ŒRestaurantDetailViewControllerä¸­çš„restaurantImageViewæŽ¥å£ã€‚ ä¿®æ”¹Image Viewçš„content modeä¸º Aspect Fitï¼Œå¹¶å‹¾é€‰Clip to Bounds å®šåˆ¶ Prototype Cell å¢žåŠ ä¸¤ä¸ªlabelï¼Œåˆ†åˆ«å‘½åä¸ºFieldï¼ŒValue ï¼Œå­—ä½“ä¿®æ”¹æˆè‡ªå·±æƒ³è¦çš„ã€‚æŠŠå®ƒä»¬ç»„æˆä¸€ä¸ªStack Viewã€‚ ä¸ºStack Viewæ·»åŠ ä¸€äº›çº¦æŸã€‚åœ¨cellä¸­åž‚ç›´å±…ä¸­ï¼›Trailing Space å’Œ Leading Spaceéƒ½ä¸ºé›¶ã€‚ ç”¨Ctrl-dragä»ŽFieldLabelåˆ°ValueLabelï¼Œé€‰æ‹©Equal Widthsï¼Œç”Ÿæˆä¸€ä¸ªFieldLabelä¸ŽValueLabelå®½åº¦ç›¸åŒçš„çº¦æŸã€‚ä¿®æ”¹Multiplierå€¼ä¸º0.5ï¼Œå°±æ˜¯FieldLabelçš„å®½åº¦æ˜¯ValueLabelçš„ä¸€åŠã€‚ æ–°å»ºRestaurantDetailTableViewCellç±»æ–‡ä»¶ï¼Œç»§æ‰¿è‡³UITableViewCellã€‚æ·»åŠ ä¸¤ä¸ªæŽ¥å£ï¼Œå¹¶å…³è”ä¸Šé¢çš„ä¸¤ä¸ªLabelã€‚12@IBOutlet var fieldLabel:UILabel!@IBOutlet var valueLabel:UILabel! æ›´æ–° RestaurantDetailViewController å®žçŽ°UITableViewDataSourceå’ŒUITableViewDelegate: class RestaurantDetailViewController: UIViewController, UITableViewDataSource, UITableViewDelegate { å®žçŽ°UITableViewDataSourceçš„ç›¸å…³æ–¹æ³•ï¼š 123456789101112131415161718192021222324252627282930func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123; return 4&#125;func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cell = tableView.dequeueReusableCell(withIdentifier: &quot;Cell&quot;, for: indexPath) as! RestaurantDetailTableViewCell // Configure the cell... switch indexPath.row &#123; case 0: cell.fieldLabel.text = &quot;Name&quot; cell.valueLabel.text = restaurant.name case 1: cell.fieldLabel.text = &quot;Type&quot; cell.valueLabel.text = restaurant.type case 2: cell.fieldLabel.text = &quot;Location&quot; cell.valueLabel.text = restaurant.location case 3: cell.fieldLabel.text = &quot;Been here&quot; cell.valueLabel.text = (restaurant.isVisited) ? &quot;Yes, I&apos;ve been herebefore&quot; : &quot;No&quot; default: cell.fieldLabel.text = &quot;&quot; cell.valueLabel.text = &quot;&quot; &#125; cell.backgroundColor = UIColor.clear return cell&#125; æŠŠtable viewçš„delegateå’ŒdataSourceæŽ¥å£è®¾ç½®æˆRestaurant Detail View Controller ã€‚ å®šåˆ¶table view çš„æ ·å¼ åœ¨RestaurantDetailViewControllerä¸­æ·»åŠ ä¸€ä¸ªæŽ¥å£å˜é‡ï¼Œå¹¶å…³è”storyboardä¸­çš„table viewã€‚@IBOutlet var tableView:UITableView! è®¾ç½®table viewçš„èƒŒæ™¯é¢œè‰²ï¼Œåœ¨viewDidLoadä¸­æ·»åŠ :tableView.backgroundColor = UIColor(red: 240.0/255.0, green: 240.0/255.0, blue: 240.0/255.0, alpha: 0.2)æ–°åŠ çš„é¢œè‰²æ˜¯äº®ç°è‰²ï¼ˆå’Œç™½è‰²ç›¸è¿‘ï¼Œå¯ä»¥è®¾ç½®æˆå…¶ä»–æ·±é¢œè‰²åšå¯¹æ¯”ï¼‰ï¼Œè¿è¡ŒåŽä¸æ˜¯æ•´ä¸ªtable viewéƒ½å˜è‰²ã€‚è¿™æ˜¯å› ä¸ºï¼Œæ¯ä¸€ä¸ªcelléƒ½æ˜¯é‡æ–°æ·»åŠ çš„ï¼Œcellçš„èƒŒæ™¯é¢œè‰²è¿˜æ˜¯é»˜è®¤çš„ç™½è‰²ï¼Œè¦†ç›–äº†table viewçš„èƒŒæ™¯é¢œè‰²ï¼Œè¦åœ¨tableView(_:cellForRowAt:)çš„returnä¹‹å‰æ·»åŠ ï¼šcell.backgroundColor = UIColor.clear ç§»é™¤table viewä¸­ç©ºcellçš„åˆ†å‰²çº¿ï¼Œåœ¨viewDidLoadä¸­æ·»åŠ : tableView.tableFooterView = UIView(frame: CGRect.zero) æ”¹å˜åˆ†å‰²çº¿çš„é¢œè‰²ï¼Œ åœ¨viewDidLoadä¸­æ·»åŠ :tableView.separatorColor = UIColor(red: 240.0/255.0, green: 240.0/255.0, blue: 240.0/255.0, alpha: 0.8) å®šåˆ¶Navigation Barçš„æ ·å¼é€šè¿‡UINavigationBar.appearance()ä¿®æ”¹Navigation Barçš„æ ·å¼ã€‚ Navigation Barçš„æ ·å¼ä¿®æ”¹æ˜¯æ•´ä½“ä¿®æ”¹çš„ï¼Œæ‰€ä»¥ä¿®æ”¹Navigation Barçš„æ ·å¼ä»£ç è¦å†™åœ¨application(_:didFinishLaunchingWithOptions:)æ–¹æ³•ä¸­ã€‚ ä¿®æ”¹navigation barçš„èƒŒæ™¯é¢œè‰²ï¼šUINavigationBar.appearance().barTintColor = UIColor(red: 216.0/255.0, green: 74.0/255.0, blue: 32.0/255.0, alpha: 1.0) ä¿®æ”¹titleæ ·å¼ï¼š123if let barFont = UIFont(name: &quot;Avenir-Light&quot;, size: 24.0) &#123; UINavigationBar.appearance().titleTextAttributes = [NSForegroundColorAttributeName:UIColor.white, NSFontAttributeName:barFont]&#125; Avenir-Lightæ˜¯å­—ä½“åç§°ï¼Œè¯¦ç»†çš„iOSå­—ä½“å¯æŸ¥ http://iosfonts.com ã€‚ tintColoræŽ§åˆ¶Navigation itemså’Œbar button itemsçš„é¢œè‰²UINavigationBar.appearance().tintColor = UIColor.white ç›®å‰ï¼ŒNavigation barçš„è¿”å›žæŒ‰é’®æ˜¯ä¸€ä¸ª&lt;å’ŒFood Pinï¼Œæƒ³åˆ é™¤Food Pinï¼Œéœ€è¦ä¿®æ”¹RestaurantTableViewControllerçš„backBarButtonItemå±žæ€§ã€‚ åœ¨ RestaurantTableViewControllerçš„viewDidLoadä¸­æ·»åŠ ï¼š navigationItem.backBarButtonItem = UIBarButtonItem(title: &quot;&quot;, style: .plain, target: nil, action: nil) ä¸º detail view çš„ Navigation bar æ·»åŠ titleï¼Œåœ¨ RestaurantDetailViewControllerçš„viewDidLoadä¸­æ·»åŠ ï¼štitle = restaurant.name éšè—Navigation Bar è‡ªä»ŽiOS 8åŽï¼ŒNavigation Barå¯ä»¥åœ¨ä¸åŒæƒ…å†µä¸‹éšè—ï¼Œåœ¨storyboardä¸­é€‰æ‹©Navigation Controllerä¿®æ”¹ã€‚ï¼ˆOn Swipeæ˜¯å‘ä¸Šæ»‘ï¼‰ ä½†è¿™ç§è®¾ç½®æ•´ä¸ªappçš„Navigation Baréƒ½ä¼šéšè—ã€‚å¦‚æžœåªæƒ³åœ¨restaurant table view controllerä¸­éšè—ï¼Œåœ¨detail viewä¸­ä¸éšè—ï¼Œå°±éœ€è¦åœ¨ä¸¤ä¸ªæŽ§åˆ¶å™¨çš„viewDidLoadåˆ†åˆ«è®¾ç½®ï¼šnavigationController?.hidesBarsOnSwipe = true å’Œ navigationController?.hidesBarsOnSwipe = false ã€‚ è¿è¡Œåå¤æµ‹è¯•åŽå‘çŽ°ä¸¤ä¸ªé—®é¢˜ï¼š å½“ä»Ždetail viewè¿”å›žåŽï¼Œrestaurant table view controllerçš„ Navigation Barä¸èƒ½éšè—ã€‚ å½“restaurant table view controllerçš„ Navigation Baréšè—åŽè¿›å…¥detail viewåŽï¼Œ Navigation Baræ¶ˆå¤±ä¸èƒ½å†æ˜¾ç¤ºã€‚ é¦–å…ˆæ˜Žç¡®ä¸¤ä¸ªæŽ§åˆ¶å™¨ä¸­çš„navigationControllerå±žæ€§æŒ‡çš„æ˜¯åŒä¸€ä¸ªNavigation Controller ï¼ŒviewDidLoadæ–¹æ³•æ˜¯viewç¬¬ä¸€æ¬¡åŠ è½½æ—¶è°ƒç”¨ï¼Œä¹‹åŽå°±ä¸å†è°ƒç”¨äº†ã€‚ ä¹Ÿå°±æ˜¯è¯´å½“ä»Ždetail viewè¿”å›žï¼ŒhidesBarsOnSwipeå·²ç»è¢«è®¾ç½®ä¸ºfalseï¼Œè€Œåˆ°restaurant table view controllerçš„viewDidLoadä¸å†è°ƒç”¨ï¼Œæ‰€ä»¥Navigation Barä¸èƒ½å†éšè—ã€‚ è§£å†³åŠžæ³•æ˜¯ä½¿ç”¨viewWillAppearï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨è§†å›¾æ¯ä¸€æ¬¡æ˜¾ç¤ºæ—¶è°ƒç”¨ã€‚åœ¨RestaurantTableViewControllerä¸­æ·»åŠ ï¼š1234override func viewWillAppear(_ animated: Bool) &#123; super.viewWillAppear(animated) navigationController?.hidesBarsOnSwipe = true&#125; åœ¨RestaurantDetailViewControllerä¸­æ·»åŠ ï¼š12345override func viewWillAppear(_ animated: Bool) &#123; super.viewWillAppear(animated) navigationController?.hidesBarsOnSwipe = false navigationController?.setNavigationBarHidden(false, animated: true)&#125; ä¿®æ”¹Status Baræ ·å¼appä¸­Status Barçš„é»˜è®¤æ ·å¼æ˜¯é»‘è‰²ã€‚ åœ¨Info.plistä¸­æ·»åŠ ä¸€ä¸ªkeyä¸ºView controller-based status bar appearanceï¼Œå€¼ä¸ºNOã€‚ç„¶åŽapplication(_:didFinishLaunchingWithOptions:)ä¸­æ·»åŠ ï¼šUIApplication.shared.statusBarStyle = .lightContentã€‚ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 6ï¼šä½¿ç”¨Quick Lookæ¡†æž¶é¢„è§ˆæ–‡ä»¶(Swift)]]></title>
    <url>%2F2017%2Fios-tutorial-6-quicklook.html</url>
    <content type="text"><![CDATA[iOS SDKä¸­æœ‰å¾ˆå¤šä¸å¸¸è§ï¼Œå´éžå¸¸å¥½ç”¨çš„åº“ï¼ŒQuick Lookæ¡†æž¶å°±æ˜¯ä¸€ä¸ªéžå¸¸å¥½çš„ä¾‹å­ã€‚Quick Lookæ¡†æž¶æä¾›äº†é¢„è§ˆå¾ˆå¤šä¸åŒç±»åž‹æ–‡ä»¶çš„åŠŸèƒ½ï¼Œè€Œä¸éœ€è¦æ‰“å¼€ä¸åŒçš„APPæŸ¥çœ‹ï¼Œæœ‰ç‚¹åƒMacä¸­çš„ç©ºæ ¼é”®åŠŸèƒ½ã€‚ Quick Lookæ¡†æž¶å¯ä»¥é¢„è§ˆçš„æ–‡ä»¶ç±»åž‹ï¼š iWork documents (Pages, Numbers and Keynote) Microsoft Office documents (as long as theyâ€™ve been created with Office 97 or any other newer version) PDF files Images Text files Rich-Text Format documents Comma-Separated Value files (csv) å¼€å§‹é¡¹ç›®åˆ°å¼€å§‹é¡¹ç›®å¤„ä¸‹è½½å¼€å§‹é¡¹ç›®ï¼Œè¿™æ˜¯åŽŸæ–‡æä¾›äº†ä¸€ä¸ªå¼€å§‹é¡¹ç›®ï¼Œä»£ç æ˜¯è€ç‰ˆæœ¬çš„ï¼Œéœ€è¦è½¬æ¢ä¸€ä¸‹ã€‚è¿™ä¸ªå¼€å§‹é¡¹ç›®ä¸­åŒ…æ‹¬äº†å…­ç§ä¸åŒçš„ç±»åž‹çš„æ–‡ä»¶ï¼Œä¸€ä¸ªnavigation controllerï¼Œä¸€ä¸ªtable view controllerï¼ˆFileListViewControllerï¼‰ï¼Œå¦å¤–è¿˜åšäº†ä¸€äº›åˆå§‹åŒ–å·¥ä½œã€‚ä¹‹åŽä»£ç å°±åœ¨FileListViewControllerä¸­å®Œæˆã€‚ æ–‡ä»¶å’Œæ–‡ä»¶çš„URLS åœ¨FileListViewControllerä¸­å®šä¹‰ä¸€ä¸ªæ–‡ä»¶åå­—çš„æ•°ç»„å˜é‡ï¼šlet fileNames = [&quot;AppCoda-PDF.pdf&quot;, &quot;AppCoda-Pages.pages&quot;, &quot;AppCoda-Word.docx&quot;, &quot;AppCoda-Keynote.key&quot;, &quot;AppCoda-Text.txt&quot;, &quot;AppCoda-Image.jpeg&quot;] ç»§ç»­å®šä¹‰ä¸€ä¸ªæ•°ç»„å˜é‡ï¼Œç”¨æˆ·å­˜å‚¨ä¸åŒçš„æ–‡ä»¶çš„URLï¼švar fileURLs = [NSURL]() åˆ›å»ºä¸€ä¸ªæ–¹æ³•prepareFileURLs()ï¼Œç”¨äºŽä¸ºfileURLsæ·»åŠ å€¼ï¼š 123456789101112func prepareFileURLs() &#123; for file in fileNames &#123; // 1 let fileParts = file.components(separatedBy: &quot;.&quot;) if let fileURL = Bundle.main.url(forResource: fileParts[0], withExtension: fileParts[1]) &#123; // 2 if FileManager.default.fileExists(atPath: fileURL.path) &#123; fileURLs.append(fileURL as NSURL) &#125; &#125; &#125;&#125; 1 components(separatedBy:)æ–¹æ³•ç”¨äºŽæŠŠStringæŒ‰ç…§ç»™å®šçš„åˆ†éš”ç¬¦ï¼Œåˆ†è§£æˆ[String]ã€‚ 2 åˆ¤æ–­æ–‡ä»¶åœ°å€æ˜¯å¦çœŸå®žå­˜åœ¨ã€‚ åœ¨ viewDidLoad()ä¸­å®žçŽ°ä¸Šé¢çš„å‡½æ•°ï¼š 12345override func viewDidLoad() &#123; ... prepareFileURLs()&#125; å±•ç¤ºæ–‡ä»¶ç”¨table viewå±•ç¤ºä¸åŒçš„æ–‡ä»¶ï¼š æ ¹æ®æ–‡ä»¶çš„URLï¼ŒèŽ·å¾—æ–‡ä»¶åå’Œæ–‡ä»¶åŽç¼€ï¼ˆæ–‡ä»¶ç±»åž‹ï¼‰ï¼Œæ·»åŠ å‡½æ•°extractAndBreakFilenameInComponents(:)ã€‚ 12345678910func extractAndBreakFilenameInComponents(fileURL: NSURL) -&gt; (fileName: String, fileExtension: String) &#123; let fileURLParts = fileURL.path!.components(separatedBy: &quot;/&quot;) let fileName = fileURLParts.last let filenameParts = fileName?.components(separatedBy: &quot;.&quot;) return (filenameParts![0], filenameParts![1])&#125; ä¿®æ”¹ tableView(tableView:cellForRowAtIndexPath)ï¼š 123456789func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -&gt; UITableViewCell &#123; let cell = tableView.dequeueReusableCellWithIdentifier(&quot;idCellFile&quot;, forIndexPath: indexPath) let currentFileParts = extractAndBreakFilenameInComponents(fileURLs[indexPath.row]) cell.textLabel?.text = currentFileParts.fileName return cell&#125; æ ¹æ®ä¸åŒçš„åŽç¼€åï¼Œå®šä¹‰ä¸åŒçš„æ–‡ä»¶ç±»åž‹åç§°ï¼Œæ·»åŠ å‡½æ•°getFileTypeFromFileExtension(:)ï¼š 12345678910111213141516171819202122232425func getFileTypeFromFileExtension(fileExtension: String) -&gt; String &#123; var fileType = &quot;&quot; switch fileExtension &#123; case &quot;docx&quot;: fileType = &quot;Microsoft Word document&quot; case &quot;pages&quot;: fileType = &quot;Pages document&quot; case &quot;jpeg&quot;: fileType = &quot;Image document&quot; case &quot;key&quot;: fileType = &quot;Keynote document&quot; case &quot;pdf&quot;: fileType = &quot;PDF document&quot; default: fileType = &quot;Text document&quot; &#125; return fileType&#125; å›žåˆ°tableView(tableView:cellForRowAtIndexPath)ï¼Œæ·»åŠ ä¸€æ®µcellé…ç½®ï¼š cell.detailTextLabel?.text = getFileTypeFromFileExtension(fileExtension: currentFileParts.fileExtension) ä¿®æ”¹æ¯ä¸ªsectionä¸­rowçš„æ•°ç›®ä¸ºæ–‡ä»¶æ•°ç›®ï¼š 123func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123; return fileNames.count&#125; QLPreviewControllerDataSource å¼•å…¥æ¡†æž¶Quick Look import QuickLook å®šä¹‰QLPreviewController let quickLookController = QLPreviewController() è®©FileListViewControllerå®žçŽ°QLPreviewControllerDataSourceåè®® å®žçŽ°QLPreviewControllerDataSourceåè®®çš„å¿…é¡»è¦å®žçŽ°çš„æ–¹æ³•ã€‚ç¬¬ä¸€æ–¹æ³•è¡¨ç¤ºæœ‰å¤šå°‘ä¸ªæ–‡ä»¶éœ€è¦é¢„è§ˆï¼š 123func numberOfPreviewItems(in controller: QLPreviewController) -&gt; Int &#123; return fileURLs.count&#125; ç¬¬äºŒä¸ªæ–¹æ³•ï¼š123func previewController(_ controller: QLPreviewController, previewItemAt index: Int) -&gt; QLPreviewItem &#123; return fileURLs[index]&#125; åœ¨viewDidLoad()ä¸­æ·»åŠ ï¼šquickLookController.dataSource = self é¢„è§ˆæ–‡ä»¶åœ¨table viewä¸­é€‰ä¸­æ–‡ä»¶ï¼Œå°±è¦è·³è½¬çš„é¢„è§ˆé¡µé¢ã€‚å®žçŽ°æ–¹æ³•tableView(_:didSelectRowAt:)ï¼š123456func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) &#123; if QLPreviewController.canPreview(fileURLs[indexPath.row]) &#123; quickLookController.currentPreviewItemIndex = indexPath.row navigationController?.pushViewController(quickLookController, animated: true) &#125; &#125; navigationController?.pushViewController(quickLookController, animated: true)å¯ç”¨presentViewController(quickLookController, animated: true, completion: nil)ä»£æ›¿ã€‚ è¿è¡Œå¯é¢„è§ˆæ–‡ä»¶ï¼š è§‚å¯Ÿä¸Šå›¾ï¼Œå¯å‘çŽ° Quick Look Preview Controllerè‡ªå¸¦äº†toolbarï¼Œå·¦è¾¹ä¸€ä¸ªæ˜¯åˆ†äº«æŒ‰é’®(é€šè¿‡UIActivityViewControllerå®žçŽ°çš„)ï¼Œå³è¾¹ä¸€ä¸ªæ˜¯ç±»ä¼¼ç›®å½•åŠŸèƒ½ï¼Œå½“æœ‰å¾ˆå¤šé¢„è§ˆæ–‡ä»¶æ—¶ï¼Œæ¥è·³è½¬åˆ°ä¸åŒé¢„è§ˆæ–‡ä»¶ã€‚ ä»£ç QuickLookDemo å‚è€ƒ Using Quick Look Framework for Previewing Documents]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-25ï¼šAdvanced Operators]]></title>
    <url>%2F2017%2Fswift-25.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081/** Advanced Operators */// 1 ä½è¿ç®—ç¬¦// æŒ‰ä½å–åè¿ç®—ç¬¦let initialBits: UInt8 = 0b00001111let invertedBits = ~initialBits // ç­‰äºŽ 0b11110000// æŒ‰ä½ä¸Žè¿ç®—ç¬¦let firstSixBits: UInt8 = 0b11111100let lastSixBits: UInt8 = 0b00111111let middleFourBits = firstSixBits &amp; lastSixBits // ç­‰äºŽ 00111100// æŒ‰ä½æˆ–è¿ç®—ç¬¦let someBits: UInt8 = 0b10110010let moreBits: UInt8 = 0b01011110let combinedbits = someBits | moreBits // ç­‰äºŽ 11111110// æŒ‰ä½å¼‚æˆ–è¿ç®—ç¬¦let firstBits: UInt8 = 0b00010100let otherBits: UInt8 = 0b00000101let outputBits = firstBits ^ otherBits // ç­‰äºŽ 00010001// æŒ‰ä½å·¦ç§»ã€å³ç§»è¿ç®—ç¬¦let shiftBits: UInt8 = 4 // 00000100shiftBits &lt;&lt; 1 // 00001000shiftBits &lt;&lt; 2 // 00010000shiftBits &lt;&lt; 5 // 10000000shiftBits &lt;&lt; 6 // 00000000shiftBits &gt;&gt; 2 // 00000001// ä½¿ç”¨ç§»ä½è¿ç®—å¯¹é¢œè‰²è¿›è¡ŒRGBåˆ†è§£let pink: UInt32 = 0xCC6699let redComponent = (pink &amp; 0xFF0000) &gt;&gt; 16 // redComponent æ˜¯ 0xCCï¼Œå³ 204let greenComponent = (pink &amp; 0x00FF00) &gt;&gt; 8 // greenComponent æ˜¯ 0x66ï¼Œ å³ 102let blueComponent = pink &amp; 0x0000FF // blueComponent æ˜¯ 0x99ï¼Œå³ 153// æœ‰ç¬¦å·æ•´æ•°çš„ç§»ä½è¿ç®—// 2 æº¢å‡ºè¿ç®—ç¬¦// åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“å‘ä¸€ä¸ªæ•´æ•°èµ‹äºˆè¶…è¿‡å®ƒå®¹é‡çš„å€¼æ—¶ï¼ŒSwifté»˜è®¤ä¼šæŠ¥é”™ï¼Œè€Œä¸æ˜¯ç”Ÿæˆä¸€ä¸ªæ— æ•ˆçš„æ•°ã€‚var potentialOverflow = Int16.max // potentialOverflow çš„å€¼æ˜¯ 32767ï¼Œè¿™æ˜¯ Int16 èƒ½å®¹çº³çš„æœ€å¤§æ•´æ•°//potentialOverflow += 1 // è¿™é‡Œä¼šæŠ¥é”™// å¯ä»¥é€‰æ‹©è®©ç³»ç»Ÿåœ¨æ•°å€¼æº¢å‡ºçš„æ—¶å€™é‡‡å–æˆªæ–­å¤„ç†ï¼Œè€ŒéžæŠ¥é”™ã€‚ `&amp;+` `&amp;-` `&amp;*`var unsignedOverflow = UInt8.max // unsignedOverflow ç­‰äºŽ UInt8 æ‰€èƒ½å®¹çº³çš„æœ€å¤§æ•´æ•° 255 unsignedOverflow = unsignedOverflow &amp;+ 1 // æ­¤æ—¶ unsignedOverflow ç­‰äºŽ 0var unsignedOverflow2 = UInt8.min // unsignedOverflow ç­‰äºŽ UInt8 æ‰€èƒ½å®¹çº³çš„æœ€å°æ•´æ•° 0unsignedOverflow2 = unsignedOverflow2 &amp;- 1 // æ­¤æ—¶ unsignedOverflow ç­‰äºŽ 255// 3 ä¼˜å…ˆçº§å’Œç»“åˆæ€§// 4 è¿ç®—ç¬¦å‡½æ•°// *è¿ç®—ç¬¦é‡è½½*: ç±»å’Œç»“æž„ä½“å¯ä»¥ä¸ºçŽ°æœ‰çš„è¿ç®—ç¬¦æä¾›è‡ªå®šä¹‰çš„å®žçŽ°ã€‚// ä¾‹å­ï¼šå‘é‡çš„ç›¸åŠ struct Vector2D &#123; var x = 0.0, y = 0.0&#125;extension Vector2D &#123; static func + (left: Vector2D, right: Vector2D) -&gt; Vector2D &#123; return Vector2D(x: left.x + right.x, y: left.y + right.y) &#125; static prefix func - (vector: Vector2D) -&gt; Vector2D &#123; return Vector2D(x: -vector.x, y: -vector.y) &#125; static func += (left: inout Vector2D, right: Vector2D) &#123; left = left + right &#125; static func == (left: Vector2D, right: Vector2D) -&gt; Bool &#123; return (left.x == right.x) &amp;&amp; (left.y == right.y) &#125; static func != (left: Vector2D, right: Vector2D) -&gt; Bool &#123; return !(left == right) &#125;&#125;let vector = Vector2D(x: 3.0, y: 1.0)let anotherVector = Vector2D(x: 2.0, y: 4.0)let combinedVector = vector + anotherVector // combinedVector æ˜¯ä¸€ä¸ªæ–°çš„ Vector2D å®žä¾‹ï¼Œå€¼ä¸º (5.0, 5.0)let negative = -vector // negative æ˜¯ä¸€ä¸ªå€¼ä¸º (-3.0, -1.0) çš„ Vector2D å®žä¾‹var original = Vector2D(x: 1.0, y: 2.0)let vectorToAdd = Vector2D(x: 3.0, y: 4.0)original += vectorToAdd // original çš„å€¼çŽ°åœ¨ä¸º (4.0, 6.0)let twoThree = Vector2D(x: 2.0, y: 3.0)let anotherTwoThree = Vector2D(x: 2.0, y: 3.0)if twoThree == anotherTwoThree &#123; print(&quot;These two vectors are equivalent.&quot;)&#125;]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 11 é¢å‘å¯¹è±¡ç¼–ç¨‹ä»‹ç»]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-11.html</url>
    <content type="text"><![CDATA[å…³äºŽé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆObject Oriented Programming ï¼ŒOOPï¼‰çš„çŸ¥è¯†å°±ä¸å¤šä»‹ç»äº†ï¼Œè¿™ä¸æ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€ä¸­çš„æ¦‚å¿µï¼Œè€Œæ˜¯ç¼–ç¨‹æ–¹æ³•ã€‚OOPæœ€å¥½çš„ä¸€åœ°æ–¹æ˜¯ï¼Œå®ƒè®©å¤æ‚çš„è½¯ä»¶åˆ†è§£æˆä¸€ä¸ªä¸ªå°çš„éƒ¨åˆ†ï¼Œæ–¹ä¾¿ç¨‹åºå‘˜å¼€æ”¾å’Œç®¡ç†ã€‚ è¿™ä¸€ç¯‡æ–‡ç« å°±æŠŠä¸Šä¸€ç¯‡æ–‡ç« å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 10 Navigation Controllerçš„ä»‹ç»å’ŒSegueçš„ä»£ç æ•´ç†æˆOOPå½¢å¼ã€‚ é‡æ–°ä¿®æ”¹FoodPiné¡¹ç›® ä¹‹å‰åœ¨RestaurantTableViewControllerç±»ä¸­ï¼Œå®šä¹‰äº†restaurantNames,restaurantImages, restaurantLocations,restaurantTypeså››ä¸ªæ•°ç»„å˜é‡ï¼Œåˆ†åˆ«è¡¨ç¤ºrestaurantçš„åå­—ï¼Œå›¾ç‰‡åç§°ï¼Œä½ç½®ï¼Œç±»åž‹ã€‚æ¯ä¸ªrestaurantçš„ä¿¡æ¯åˆ†æ•£åœ¨å››ä¸ªæ•°ç»„ä¸­ï¼Œè€Œä¸”æ•°ç»„çš„å†…å®¹é¡ºåºè¦å¯¹åº”ï¼ŒçŽ°åœ¨æŠŠå››ä¸ªä¿¡æ¯ç»„æˆåœ¨ä¸€ä¸ªç±»ä¸­Restaurantã€‚ æ·»åŠ ç±»æ–‡ä»¶Restaurant.swift 123456789101112131415161718import Foundationclass Restaurant &#123; var name = &quot;&quot; var type = &quot;&quot; var location = &quot;&quot; var image = &quot;&quot; var isVisited = false // 1 init(name: String, type: String, location: String, image: String, isVisited: Bool) &#123; self.name = name self.type = type self.location = location self.image = image self.isVisited = isVisited &#125;&#125; 1 è‡ªå®šä¹‰çš„åˆå§‹åŒ–æ–¹æ³•ã€‚åœ¨Swiftä¸­ï¼Œç±»çš„æ‰€æœ‰å˜é‡éƒ½éœ€è¦è¢«åˆå§‹åŒ–ï¼Œæˆ–è€…å£°æ˜Žä¸ºå¯é€‰å€¼ã€‚ ç”¨Restaurantå¯¹è±¡æ•°ç»„ä»£æ›¿RestaurantTableViewControllerä¸­çš„å‡ ä¸ªæ•°ç»„å˜é‡ã€‚ var restaurants:[Restaurant] = [ Restaurant(name: &quot;Cafe Deadend&quot;, type: &quot;Coffee &amp; Tea Shop&quot;, location: &quot;HongKong&quot;, image: &quot;cafedeadend.jpg&quot;, isVisited: false), Restaurant(name: &quot;Homei&quot;, type: &quot;Cafe&quot;, location: &quot;Hong Kong&quot;, image:&quot;homei.jpg&quot;, isVisited: false), Restaurant(name: &quot;Teakha&quot;, type: &quot;Tea House&quot;, location: &quot;Hong Kong&quot;, image:&quot;teakha.jpg&quot;, isVisited: false), Restaurant(name: &quot;Cafe loisl&quot;, type: &quot;Austrian / Causual Drink&quot;, location: &quot;Hong Kong&quot;, image: &quot;cafeloisl.jpg&quot;, isVisited: false), Restaurant(name: &quot;Petite Oyster&quot;, type: &quot;French&quot;, location: &quot;Hong Kong&quot;, image: &quot;petiteoyster.jpg&quot;, isVisited: false), Restaurant(name: &quot;For Kee Restaurant&quot;, type: &quot;Bakery&quot;, location: &quot;HongKong&quot;, image: &quot;forkeerestaurant.jpg&quot;, isVisited: false), Restaurant(name: &quot;Po&apos;s Atelier&quot;, type: &quot;Bakery&quot;, location: &quot;Hong Kong&quot;, image: &quot;posatelier.jpg&quot;, isVisited: false), Restaurant(name: &quot;Bourke Street Backery&quot;, type: &quot;Chocolate&quot;, location: &quot;Sydney&quot;, image: &quot;bourkestreetbakery.jpg&quot;, isVisited: false), Restaurant(name: &quot;Haigh&apos;s Chocolate&quot;, type: &quot;Cafe&quot;, location: &quot;Sydney&quot;, image: &quot;haighschocolate.jpg&quot;, isVisited: false), Restaurant(name: &quot;Palomino Espresso&quot;, type: &quot;American / Seafood&quot;, location: &quot;Sydney&quot;, image: &quot;palominoespresso.jpg&quot;, isVisited: false), Restaurant(name: &quot;Upstate&quot;, type: &quot;American&quot;, location: &quot;New York&quot;, image: &quot;upstate.jpg&quot;, isVisited: false), Restaurant(name: &quot;Traif&quot;, type: &quot;American&quot;, location: &quot;New York&quot;, image: &quot;traif.jpg&quot;, isVisited: false), Restaurant(name: &quot;Graham Avenue Meats&quot;, type: &quot;Breakfast &amp; Brunch&quot;, location: &quot;New York&quot;, image: &quot;grahamavenuemeats.jpg&quot;, isVisited: false), Restaurant(name: &quot;Waffle &amp; Wolf&quot;, type: &quot;Coffee &amp; Tea&quot;, location: &quot;NewYork&quot;, image: &quot;wafflewolf.jpg&quot;, isVisited: false), Restaurant(name: &quot;Five Leaves&quot;, type: &quot;Coffee &amp; Tea&quot;, location: &quot;New York&quot;,image: &quot;fiveleaves.jpg&quot;, isVisited: false), Restaurant(name: &quot;Cafe Lore&quot;, type: &quot;Latin American&quot;, location: &quot;New York&quot;, image: &quot;cafelore.jpg&quot;, isVisited: false), Restaurant(name: &quot;Confessional&quot;, type: &quot;Spanish&quot;, location: &quot;New York&quot;, image: &quot;confessional.jpg&quot;, isVisited: false), Restaurant(name: &quot;Barrafina&quot;, type: &quot;Spanish&quot;, location: &quot;London&quot;, image: &quot;barrafina.jpg&quot;, isVisited: false), Restaurant(name: &quot;Donostia&quot;, type: &quot;Spanish&quot;, location: &quot;London&quot;, image: &quot;donostia.jpg&quot;, isVisited: false), Restaurant(name: &quot;Royal Oak&quot;, type: &quot;British&quot;, location: &quot;London&quot;, image: &quot;royaloak.jpg&quot;, isVisited: false), Restaurant(name: &quot;CASK Pub and Kitchen&quot;, type: &quot;Thai&quot;, location: &quot;London&quot;, image: &quot;caskpubkitchen.jpg&quot;, isVisited: false) ] æ›´æ–° tableView(_:numberOfRowsInSection:) : 1234override func tableView(_ tableView: UITableView, numberOfRowsInSectionsection: Int) -&gt; Int &#123; return restaurants.count&#125; æ›´æ–° tableView(_:cellForRowAtIndexPath:) ï¼š 12345678910111213141516override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cellIdentifier = &quot;Cell&quot; let cell = tableView.dequeueReusableCell(withIdentifier: cellIdentifier, for: indexPath) as! RestaurantTableViewCell // Configure the cell... cell.nameLabel.text = restaurants[indexPath.row].name cell.thumbnailImageView.image = UIImage(named: restaurants[indexPath.row].image) cell.thumbnailImageView.layer.cornerRadius = 30.0 cell.thumbnailImageView.clipsToBounds = true cell.locationLabel.text = restaurants[indexPath.row].location cell.typeLabel.text = restaurants[indexPath.row].type cell.accessoryType = restaurants[indexPath.row].isVisited ? .checkmark : .none return cell&#125; æ›´æ–°tableView(_:commit:forRowAt:) : 123456override func tableView(_ tableView: UITableView, commit editingStyle: UITableViewCellEditingStyle, forRowAt indexPath: IndexPath) &#123; if editingStyle == .delete &#123; restaurants.remove(at: indexPath.row) &#125; tableView.deleteRows(at: [indexPath], with: .fade)&#125; æ›´æ–° tableView(_:editActionsForRowAt:) ï¼š override func tableView(_ tableView: UITableView, editActionsForRowAt indexPath: IndexPath) -&gt; [UITableViewRowAction]? { let shareAction = UITableViewRowAction(style: .default, title: &quot;Share&quot;, handler: { (action, indexPath) -&gt; Void in let defaultText = &quot;Just checking in at &quot; + self.restaurants[indexPath.row].name if let imageToShare = UIImage(named: self.restaurants[indexPath.row].image) { let activityController = UIActivityViewController(activityItems: [defaultText, imageToShare], applicationActivities: nil) self.present(activityController, animated: true, completion: nil) } }) let deleteAction = UITableViewRowAction(style: .default, title: &quot;Delete&quot;, handler: { (action, indexPath) -&gt; Void in self.restaurants.remove(at: indexPath.row) tableView.deleteRows(at: [indexPath], with: .fade) }) shareAction.backgroundColor = UIColor(red: 48.0/255.0, green: 173.0/255.0, blue: 99.0/255.0, alpha: 1.0) deleteAction.backgroundColor = UIColor(red: 202.0/255.0, green: 202.0/255.0, blue: 203.0/255.0, alpha: 1.0) return [deleteAction,shareAction] } RestaurantDetailViewControllerä¸­çš„å››ä¸ªå˜é‡ï¼š 1234var nameText = &quot;&quot;var locationText = &quot;&quot;var typeText = &quot;&quot;var restaurantImage = &quot;&quot; æ›´æ–°ä¸ºï¼švar restaurant: Restaurant! ä¸Žä¹‹å¯¹åº”çš„viewDidLoad()ä¹Ÿä¿®æ”¹ä¸ºï¼š override func viewDidLoad() { super.viewDidLoad() restaurantImageView.image = UIImage(named: restaurant.image) nameLabel.text = restaurant.name locationLabel.text = restaurant.location typeLabel.text = restaurant.type } æœ€åŽprepare(for:sender:)æ–¹æ³•ä¹Ÿåšå¯¹åº”ä¿®æ”¹ï¼š 12345678override func prepare(for segue: UIStoryboardSegue, sender: Any?) &#123; if segue.identifier == &quot;showRestaurantDetail&quot; &#123; if let indexPath = tableView.indexPathForSelectedRow &#123; let destinationController = segue.destination as! RestaurantDetailViewController destinationController.restaurant = restaurants[indexPath.row] &#125; &#125;&#125; è¿è¡Œæ²¡æœ‰é—®é¢˜ã€‚ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 10 Navigation Controllerçš„ä»‹ç»å’ŒSegue]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-10.html</url>
    <content type="text"><![CDATA[æŽ¥ç€ä¸Šä¸€ç¯‡å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 9 Table Rowçš„åˆ é™¤, UITableViewRowActionå’ŒUIActivityViewControllerçš„ä½¿ç”¨çš„ä»£ç ï¼Œç»§ç»­å­¦ä¹ Navigation Controllerå’ŒSegueã€‚ åˆ›é€ Navigation Controller é€‰ä¸­Restaurant Table View Controllerç„¶åŽç‚¹å‡»èœå•æ ä¸­çš„Editor &gt; Embed in &gt; Navigation Controllerï¼›ç”Ÿæˆäº†æ–°çš„ä¸€Sceneï¼ˆNavigation Controller Sceneï¼‰ã€‚ é€‰ä¸­ä¹‹å‰Sceneä¸­çš„Navigation barï¼Œä¿®æ”¹å…¶titleä¸ºFood Pinã€‚ æ·»åŠ  Detail View Controllerä¹‹å‰æ·»åŠ å¯¼èˆªæ ï¼ŒçŽ°åœ¨æ·»åŠ å¦ä¸€ä¸ªview controllerï¼Œç”¨æ¥æ˜¾restaurantçš„è¯¦ç»†å†…å®¹ã€‚ æ‹–åŠ¨ä¸€ä¸ªæ–°çš„View Controllerã€‚ æ‹–åŠ¨ä¸€ä¸ªimage Viewï¼Œè°ƒæ•´åˆé€‚å¤§å°ï¼Œå¹¶æ·»åŠ ç›¸å…³çº¦æŸã€‚Content Modeå±žæ€§ä¿®æ”¹ä¸º Aspect Fillã€‚ ç”¨segueè¿žæŽ¥prototype cellå’Œdetail sceneã€‚ Ctrl-dragä»Žprototype cellåˆ°detail sceneã€‚å¦‚æžœä¸æ–¹ä¾¿é€‰æ‹©prototype cellï¼Œå¯ä»¥åœ¨document outlineä¸­æ‹–åŠ¨ã€‚é€‰æ‹©Showè¿žæŽ¥é£Žæ ¼ã€‚ iOS 10ä¸­æœ‰å‡ ç§sugueç±»åž‹ï¼š Showï¼šæ–°çš„view controllerå°†è¢«æ·»åŠ view controlleræ ˆçš„é¡¶éƒ¨ã€‚è·³è½¬çš„é¡µé¢æœ‰Navigation barï¼Œå¹¶ä¸”æœ‰è¿”å›žåŽŸæ¥é¡µé¢çš„è¿”å›žæŒ‰é’®ã€‚è¿™æ˜¯éžå¸¸å¸¸ç”¨çš„çš„ç±»åž‹ã€‚ Show detailï¼šåœ¨view controlleræ ˆä¸­ï¼Œæ–°çš„view controllerå°†è¢«æ›¿ä»£åŽŸæ¥çš„view controllerã€‚è·³è½¬çš„é¡µé¢æ²¡æœ‰Navigation barï¼Œä¹Ÿæ²¡æœ‰è¿”å›žåŽŸæ¥é¡µé¢çš„è¿”å›žæŒ‰é’®ã€‚ Present modallyï¼šæ–°é¡µé¢å°†ä»¥åŠ¨ç”»å½¢å¼ä»Žåº•éƒ¨å‡ºçŽ°åˆ°è¦†ç›–æ•´ä¸ªæ‰‹æœºå±å¹•ã€‚è¿™ç§å½¢å¼æœ€å¸¸è§çš„åˆ—å­æ˜¯iOSè‡ªå¸¦çš„æ—¥åŽ†åº”ç”¨ï¼š Present as popoverï¼šä»¥å¸¦æœ‰ç®­å¤´é”šç‚¹çš„å¼¹æ¡†æ˜¾ç¤ºã€‚é€šå¸¸ä½¿ç”¨çš„iPadåº”ç”¨ä¸­ ä¸å†éœ€è¦action sheetï¼ŒåŽ»é™¤tableView(_:didSelectRowAt:)æ–¹æ³• åˆ›å»ºæ–°ç±»æ–‡ä»¶RestaurantDetailViewControllerï¼Œç»§æ‰¿è‡³UIViewControllerã€‚æ˜¯æ–°å»ºsceneä¸ŽRestaurantDetailViewControllerçš„è”ç³»ã€‚ åœ¨RestaurantDetailViewControllerä¸­åŠ å…¥ä¸€ä¸ªoutletå’Œä¸€ä¸ªå˜é‡ï¼Œoutletå…³è”Image Viewï¼ŒrestaurantImageç”¨ä¸ŽæŽ¥å—table viewä¼ æ¥çš„å›¾åƒåç§°æ•°æ®ã€‚ 12345678@IBOutlet var restaurantImageView:UIImageView!var restaurantImage = &quot;&quot;override func viewDidLoad() &#123; super.viewDidLoad() restaurantImageView.image = UIImage(named: restaurantImage)&#125; é€šè¿‡seguesä¼ é€’æ•°æ®segueç®¡ç†view controllerä¹‹é—´çš„è¿‡æ¸¡ã€‚å½“segueè§¦å‘æ—¶ï¼Œstoryboardä¼šé€šçŸ¥æºview controllerï¼ˆå¦‚RestaurantTableViewControllerï¼‰è°ƒç”¨æ–¹æ³•prepare(for:sender:)ï¼Œå¯ä»¥é€šè¿‡æ­¤æ–¹æ³•ä¼ é€’æ•°æ®ã€‚ å½“storyboardä¸­ç»“æž„å¤æ‚æ—¶ï¼Œsegueå¯èƒ½ä¼šæœ‰å¾ˆå¤šï¼ŒåŒä¸€ä¸ªview controllerå¯èƒ½ä¸Žå„çº§view controllerä¹‹é—´æœ‰segueï¼Œè¿™ç§æƒ…å†µæœ€å¥½ç»™segueä¸€ä¸ªå”¯ä¸€identifierã€‚è®¾ç½®segueçš„identifierä¸º showRestaurantDetailã€‚ åœ¨RestaurantTableViewControllerä¸­æ·»åŠ prepareForSegue: 12345678override func prepare(for segue: UIStoryboardSegue, sender: Any?) &#123; if segue.identifier == &quot;showRestaurantDetail&quot; &#123; if let indexPath = tableView.indexPathForSelectedRow &#123; let destinationController = segue.destination as! RestaurantDetailViewController destinationController.restaurantImage = restaurantImages[indexPath.row] &#125; &#125;&#125; ä¸ºè¯¦æƒ…é¡µé¢æ·»åŠ ä¸‰ä¸ªæ ‡ç­¾ æ·»åŠ ä¸‰ä¸ªæ ‡ç­¾ï¼ŒTextåˆ†åˆ«ä¸ºNameï¼ŒLocationï¼ŒTypeï¼ˆæ³¨æ„ï¼šè™½ç„¶Textä¼šè¢«æ›¿ä»£ï¼Œä½†ä¸è¦å¼€å§‹ç•™ç©ºï¼Œå› ä¸ºç•™ç©ºä¼šä½¿ä¹‹åŽç”Ÿæˆstack viewæ—¶ï¼Œå¤§å°ä¸ç¡®å®šï¼‰ï¼›ä¸‰ä¸ªlabelç”Ÿæˆä¸€ä¸ªstack viewï¼Œè°ƒæ•´å­—ä½“å’Œå¤§å°ï¼Œæ·»åŠ é€‚å½“çš„çº¦æŸã€‚ æ·»åŠ ä¸‰ä¸ªoutletï¼Œå’Œä¸‰ä¸ªä¸Žä¹‹å¯¹åº”çš„å˜é‡ã€‚ 12345678910111213141516@IBOutlet var nameLabel: UILabel!@IBOutlet var locationLabel: UILabel!@IBOutlet var typeLabel: UILabel!var nameText = &quot;&quot;var locationText = &quot;&quot;var typeText = &quot;&quot;override func viewDidLoad() &#123; super.viewDidLoad() restaurantImageView.image = UIImage(named: restaurantImage) nameLabel.text = nameText locationLabel.text = locationText typeLabel.text = typeText&#125; ä¿®æ”¹RestaurantTableViewControllerä¸­çš„prepareForSegueæ–¹æ³•ï¼š 1234567891011override func prepare(for segue: UIStoryboardSegue, sender: Any?) &#123; if segue.identifier == &quot;showRestaurantDetail&quot; &#123; if let indexPath = tableView.indexPathForSelectedRow &#123; let destinationController = segue.destination as! RestaurantDetailViewController destinationController.restaurantImage = restaurantImages[indexPath.row] destinationController.nameText = restaurantNames[indexPath.row] destinationController.locationText = restaurantLocations[indexPath.row] destinationController.typeText = restaurantTypes[indexPath.row] &#125; &#125;&#125; ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 4ï¼šCALayerä»‹ç»(swift)]]></title>
    <url>%2F2017%2Fios-tutorial-4-calayer.html</url>
    <content type="text"><![CDATA[Layersæ˜¯Core Animation Frameworkçš„ä¸€éƒ¨åˆ†ã€‚Core Animation Frameworkåœ¨iOSæž¶æž„çš„ä½ç½®ï¼š è®¿é—®CALayerå‡¡æ˜¯ç»§æ‰¿è‡³UIViewçš„éƒ½å°†æœ‰ä¸€ä¸ªå±žæ€§layeræ¥è¡¨ç¤ºCALayerã€‚myView.layer åˆå§‹åŒ–é¡¹ç›® æ–°å»ºCALayerDemoï¼Œsingle View Applicationæ¨¡æ¿ æ–°å»ºä¸€ä¸ªUIViewå’Œä¸€ä¸ªUILabel åœ†è§’CALayerçš„cornerRadiuså±žæ€§å¤§å°è¡¨ç¤ºUIViewåœ†è§’å¤„åœ†çš„åŠå¾„å¤§å°ã€‚ç±»ä¼¼äºŽbox.layer.cornerRadius = 20ï¼Œå°±å½¢æˆäº†åœ†è§’ï¼Œæ•°å­—è¶Šå¤§åœ†è§’æ•ˆæžœè¶Šå¤§ï¼Œå½“cornerRadiusç­‰äºŽboxåŠå¾„æ—¶ï¼Œboxå°±ä¼šå˜æˆä¸€ä¸ªå›­ã€‚ é˜´å½±æ•ˆæžœ1234box.layer.shadowOffset = CGSize(width: 5, height: 5)box.layer.shadowOpacity = 0.7box.layer.shadowRadius = 10box.layer.shadowColor = UIColor.blue.cgColor shadowOffsetè¡¨ç¤ºé˜´å½±åç§»å¤§å°ï¼Œä¹Ÿå°±æ˜¯é˜´å½±å‘boxçš„ä¸‹æ”¾åç§»5å’Œå‘å³æ–¹åç§»5è·ç¦»ã€‚ shadowOpacityæ˜¯é˜´å½±é€æ˜Žåº¦ shadowRadiusæ˜¯é˜´å½±æ¶‰åŠçš„åŠå¾„ï¼Œå¹¶ä¸”è¿™ä¸ªåŠå¾„è¶Šå¤§ï¼Œé˜´å½±çš„é¢œè‰²æ·±æµ…å°±ä¼šè¶Šæ¥è¶Šå°ã€‚shadowRadiusä¸ŽshadowOffsetæ˜¯å…±åŒä½œç”¨çš„ è®¾ç½®è¾¹çš„å®½åº¦å’Œé¢œè‰²12box.layer.borderColor = UIColor.black.cgColorbox.layer.borderWidth = 3 å±•ç¤ºå›¾ç‰‡123box.layer.contents = UIImage(named: &quot;tree.jpg&quot;)?.cgImagebox.layer.contentsGravity = kCAGravityResizebox.layer.masksToBounds = true CALayerçš„contentså±žæ€§æ˜¯open var contents: Any?ï¼Œå¯ä»¥è®¾ç½®ä¸ºå›¾ç‰‡ contentsGravityè®¾ç½®æˆkCAGravityResizeï¼Œè¡¨ç¤ºcontentsçš„å†…å®¹ä¼šè°ƒæ•´å¤§å°ä»¥é€‚åº”layerã€‚å¦‚æžœè®¾ç½®æˆå…¶ä»–å€¼å¯èƒ½å‡ºçŽ°å¤§å°ä¸é€‚çš„å½¢è±¡ï¼Œæ¯”å¦‚kCAGravityBottomRightï¼Œå°†æ˜¯ï¼š masksToBoundsä¸ºtrueè¡¨ç¤ºæŒ‰ç…§layerçš„è¾¹æ¡†èŒƒå›´æ˜¾ç¤ºå†…å®¹ï¼›å¦‚æžœæ˜¯falseï¼Œå°†ä¼šæ˜¯å¦‚ä¸‹ç»“æžœ èƒŒæ™¯é¢œè‰²å’Œé€æ˜Žåº¦12box.layer.backgroundColor = UIColor.green.cgColorbox.layer.opacity = 0.5 ä»£ç CALayerDemo å‚è€ƒ A Beginnerâ€™s Guide to CALayer]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 5ï¼šå…³äºŽåœ°ç†å®šä½å’Œç‰¹å®šåŒºåŸŸ(Swift)]]></title>
    <url>%2F2017%2Fios-tutorial-5.html</url>
    <content type="text"><![CDATA[ç”¨æˆ·å¸¦ç€iPhoneè¿›å…¥æŸä¸ªåŒºåŸŸï¼Œå¹¶åœ¨æŸäº›åŒºåŸŸå¾…å¤šä¹…åœ¨å¼€å‘è‚¯èƒ½ä¼šæœ‰å¾ˆå¤§ç”¨å¤„ã€‚ åˆå§‹åŒ–é¡¹ç›® åˆ›å»ºæ–°çš„é¡¹ç›®GeoTargetingï¼Œä½¿ç”¨Single View Applictionæ¨¡æ¿ æ·»åŠ ä¸€ä¸ªMap Viewï¼Œå¤§å°ä¸ºæ•´ä¸ªé¡µé¢ æ·»åŠ ç›¸å…³outlet å®žçŽ°ä¸¤ä¸ªåè®® 123class ViewController: UIViewController, MKMapViewDelegate, CLLocationManagerDelegate &#123; @IBOutlet weak var mapView: MKMapView! è®¾ç½®CLLocationManagerå’ŒMKMapViewã€‚ 1234567891011121314151617// 1let locationManager = CLLocationManager()override func viewDidLoad() &#123; super.viewDidLoad() // 2 locationManager.delegate = self locationManager.distanceFilter = kCLLocationAccuracyNearestTenMeters locationManager.desiredAccuracy = kCLLocationAccuracyBest // 3 mapView.delegate = self mapView.showsUserLocation = true mapView.userTrackingMode = .follow setupData() &#125; 1 åˆ›å»ºä¸€ä¸ªCLLocationManagerçš„å®žä¾‹ï¼Œç”¨äºŽæ£€æµ‹ç”¨æˆ·çš„ä½ç½®å˜åŒ– 2 è®¾ç½®locationManagerä¸€äº›å‚æ•°ï¼Œç¡®å®šç²¾ç¡®æ€§ åœ¨viewDidAppearä¸­æ ¸æŸ¥ç”¨æˆ·æŽˆæƒçŠ¶æ€1234567891011121314151617override func viewDidAppear(_ animated: Bool) &#123; super.viewDidAppear(animated) let authorizationStatus = CLLocationManager.authorizationStatus() // 1 if authorizationStatus == .notDetermined &#123; locationManager.requestAlwaysAuthorization() &#125; // 2 else if authorizationStatus == .denied &#123; showAlert(&quot;Location services &quot;) &#125; // 3 else if authorizationStatus == .authorizedAlways &#123; locationManager.startUpdatingLocation() &#125;&#125; 1 å¦‚æžœç”¨æˆ·æŽˆæƒçŠ¶æ€æ˜¯ä¸ç¡®å®šï¼Œå°±æ£€æŸ¥æ˜¯å¦æ˜¯ä¸€ç›´çš„çŠ¶æ€ã€‚ 2 å¦‚æžœç”¨æˆ·æŽˆæƒçŠ¶æ€æ˜¯æ‹’ç»ï¼Œå°±ç”¨å¼¹æ¡†æ˜¾ç¤ºä¿¡æ¯ç»™ç”¨æˆ·çœ‹ã€‚showAlert(title:)æ˜¯å¼¹æ¡†å‡½æ•°ï¼š 1234567891011func showAlert(_ title: String) &#123; print(title) let alertController = UIAlertController(title: title, message: nil, preferredStyle: .alert) let action = UIAlertAction(title: &quot;Cancel&quot;, style: .cancel, handler: nil) alertController.addAction(action) present(alertController, animated: true, completion: nil) &#125; 3 å¦‚æžœç”¨æˆ·æŽˆæƒçŠ¶æ€æ˜¯ä¸€ç›´ï¼Œå°±å¼€å§‹æ›´æ–°åœ°ç†ä½ç½®ã€‚ å¦å¤–ï¼Œè¿˜éœ€è¦åœ¨.plistæ–‡ä»¶ä¸­æ·»åŠ keyä¸ºNSLocationAlwaysUsageDescriptionçš„æç¤ºä¿¡æ¯ éœ€è¦ä¸€ç›´èƒ½èŽ·å–ä½ çš„ä½ç½® æ‰å¯ä»¥ã€‚åœ¨è°ƒç”¨requestAlwaysAuthorization()æ—¶è¿™ä¸ªkeyæ˜¯å¿…é¡»çš„ã€‚å…è®¸èŽ·å–å½“å‰ä½ç½®ã€‚ æ·»åŠ å‡½æ•°setupData()1234567891011121314151617181920212223242526272829303132333435func setupData() &#123; // 1 if CLLocationManager.isMonitoringAvailable(for: CLCircularRegion.self) &#123; // 2 let title = &quot;å…¨å­£é…’åº—&quot; let coordinate = CLLocationCoordinate2DMake(31.1849700000,121.6303200000) let regionRadius = 300.0 // 3 let region = CLCircularRegion(center: CLLocationCoordinate2D(latitude: coordinate.latitude, longitude: coordinate.longitude), radius: regionRadius, identifier: title) locationManager.startMonitoring(for: region) // 4 let restaurantAnnotation = MKPointAnnotation() restaurantAnnotation.coordinate = coordinate restaurantAnnotation.title = title mapView.addAnnotation(restaurantAnnotation) // 5 let circle = MKCircle(center: coordinate, radius: regionRadius) mapView.add(circle) &#125; else &#123; print(&quot;ä¸èƒ½è¿½è¸ªåŒºåŸŸ&quot;) &#125;&#125;// 6func mapView(_ mapView: MKMapView, rendererFor overlay: MKOverlay) -&gt; MKOverlayRenderer &#123; let circleRenderer = MKCircleRenderer(overlay: overlay) circleRenderer.strokeColor = UIColor.red circleRenderer.lineWidth = 1.0 return circleRenderer&#125; 1 åˆ¤æ–­æ˜¯å¦ç›‘æŽ§åŒºåŸŸåŠŸèƒ½æ˜¯å¦å¯ç”¨ã€‚å½“ç”¨æˆ·æ‹’ç»çŠ¶æ€ï¼Œæˆ–ç”¨æˆ·ä¸è®©appèƒŒæ™¯ä¸‹åˆ·æ–°ï¼Œæˆ–é£žè¡Œæ¨¡å¼æ—¶è¿™ä¸ªåŠŸèƒ½ä¸å¯ç”¨ 2 éšæ„æž„å»ºä¸€ä¸ªä½ç½®ï¼ˆå¦‚å…¨å­£é…’åº—ï¼‰ï¼Œç»çº¬åº¦å¯é€šè¿‡ç»çº¬åº¦æŸ¥è¯¢æŸ¥è¯¢ï¼Œå¹¶è®¾ç½®åŒºåŸŸåŠå¾„regionRadiusï¼Œå•ä½æ˜¯ç±³ã€‚ 3 åˆå§‹åŒ–CLCircularRegionã€‚ 4 æ·»åŠ ä¸€ä¸ªæ³¨è§£ï¼Œç±»ä¼¼å¤§å¤´é’ˆå½¢çŠ¶ã€‚ 5 æ·»åŠ åŒºåŸŸåœ†åœˆæ ‡å¿—ã€‚ 6 è¿™æ˜¯MKMapViewDelegateçš„æ–¹æ³•ï¼Œç”¨æˆ·ç”»åœ† CLRegionCLRegionå°±æ˜¯ä¸Šé¢æ ‡å®šçš„åœ†å½¢åŒºåŸŸã€‚ä¸‹é¢æ·»åŠ ä¸¤ä¸ªCLLocationManagerDelegateçš„å›žè°ƒæ–¹æ³•ï¼Œåˆ†åˆ«åœ¨æ˜¯è®¾å¤‡çš„å®šä½ä½ç½®è¿›å’Œå‡ºæ ‡å®šçš„åŒºåŸŸæ—¶è°ƒç”¨ã€‚12345678// MARK:- CLLocationManagerDelegatefunc locationManager(_ manager: CLLocationManager, didEnterRegion region: CLRegion) &#123; showAlert(&quot;enter \(region.identifier)&quot;)&#125;func locationManager(_ manager: CLLocationManager, didExitRegion region: CLRegion) &#123; showAlert(&quot;exit \(region.identifier)&quot;)&#125; Xcodeä¸­çš„ä½ç½®è°ƒè¯•ä¸Šé¢è®¾å¤‡çš„ä½ç½®ï¼Œä¸å¯èƒ½æ‹¿ç€æ‰‹æœºåˆ°å¤„è·‘ï¼ŒXcodeæé«˜äº†æ–¹ä¾¿çš„è°ƒå¼æ–¹å¼ã€‚å¯ä»¥å»ºç«‹ä½ç½®æ–‡ä»¶.GPX: xcodeä¹Ÿæä¾›ä¸–ç•Œä¸Šä¸€äº›å¸¸ç”¨çš„ä½ç½®æ–‡ä»¶ï¼šç‚¹å‡»ä¸Šå›¾è°ƒè¯•æ æœ€åŽçš„ä½ç½®æ ‡å¿—å°±å¯ä»¥è°ƒå¼äº†ã€‚ å¤æ‚é€»è¾‘ä¸‹çš„ä½ç½®å¤„ç†å¦‚æžœä½ç½®ä¸åœå˜åŒ–ï¼Œåœ¨ç›‘æŽ§åŒºåŸŸåœç•™æ—¶é—´æ¯”è¾ƒçŸ­ï¼Œæˆ–è€…ç›‘æŽ§åŒºåŸŸæ¯”è¾ƒå¤šæ˜¯ï¼Œå¤„ç†ä½ç½®é—®é¢˜å°±æ¯”è¾ƒå¤æ‚äº†ã€‚æ›´æ–°éƒ¨åˆ†ä»£ç ï¼š123456789101112131415161718// 1var monitoredRegions: Dictionary&lt;String, NSDate&gt; = [:] func locationManager(_ manager: CLLocationManager, didEnterRegion region: CLRegion) &#123; showAlert(&quot;enter \(region.identifier)&quot;) // 2 monitoredRegions[region.identifier] = NSDate()&#125;func locationManager(_ manager: CLLocationManager, didExitRegion region: CLRegion) &#123; showAlert(&quot;exit \(region.identifier)&quot;) // 3 monitoredRegions.removeValue(forKey: region.identifier)&#125;// 4func locationManager(_ manager: CLLocationManager, didUpdateLocations locations: [CLLocation]) &#123; updateRegions()&#125; 1 å®šä¹‰ä»¥å­—å…¸ç”¨äºŽå­˜å‚¨ç”¨æˆ·è¿›å…¥ç›‘æŽ§åŒºçš„æ—¶é—´ã€‚ 2 è®°å½•è¿›å…¥æ—¶é—´ã€‚ 3 åˆ é™¤è¿›å…¥æ—¶é—´ã€‚ 4 ç”¨æˆ·ä½ç½®å˜åŒ–åŽè°ƒç”¨ åŠ å…¥å‡½æ•°updateRegions()ä»£ç ï¼š1234567891011121314151617181920func updateRegions() &#123; // 1 let regionMaxVisiting = 10.0 var regionsToDelete: [String] = [] // 2 for regionIdentifier in monitoredRegions.keys &#123; // 3 if NSDate().timeIntervalSince(monitoredRegions[regionIdentifier]! as Date) &gt; regionMaxVisiting &#123; showAlert(&quot;è°¢è°¢è®¿é—®&quot;) regionsToDelete.append(regionIdentifier) &#125; &#125; // 4 for regionIdentifier in regionsToDelete &#123; monitoredRegions.removeValue(forKey: regionIdentifier) &#125;&#125; 1 åŠ çš„ç”¨æˆ·åˆ°æŸä¸ªåŒºåŸŸ10sï¼Œå°±ç¡®å®šç”¨æˆ·å·²ç»åˆ°è®¿é—®è¿‡è¿™ä¸ªåŒºåŸŸã€‚regionsToDeleteç”¨æ¥å­˜å‚¨å³å°†åˆ é™¤çš„åŒºåŸŸçš„identifierï¼Œä¹Ÿå°±ç”¨æˆ·å¾…è¿‡è¶…è¿‡10sçš„åŒºåŸŸã€‚ 2 éåŽ†æ‰€æœ‰ç›‘æŽ§åŒºåŸŸ 3 timeIntervalSinceç”¨æ¥è®¡ç®—æŸä¸ªæ—¶é—´åˆ°å½“å‰æ—¶é—´çš„å·®å€¼ï¼Œå•ä½ä¸ºç§’ã€‚ 4 åˆ é™¤ç”¨æˆ·å¾…è¿‡è¶…è¿‡regionMaxVisitingçš„åŒºåŸŸã€‚ ä»£ç GeoTargeting å‚è€ƒ Building a Geo Targeting iOS App in Swift]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-24ï¼šAccess Control]]></title>
    <url>%2F2017%2Fswift-24.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081/** Access Control */// å¯ä»¥æ˜Žç¡®åœ°ç»™å•ä¸ªç±»åž‹(ç±»ã€ç»“æž„ä½“ã€æžšä¸¾)è®¾ç½®è®¿é—®çº§åˆ«ï¼Œä¹Ÿå¯ä»¥ç»™è¿™äº›ç±»åž‹çš„å±žæ€§ã€æ–¹æ³•ã€æž„é€ å™¨ã€ä¸‹æ ‡ç­‰è®¾ç½®è®¿é—®çº§åˆ«ã€‚åè®®ä¹Ÿå¯ä»¥è¢«é™å®šåœ¨ä¸€å®šçš„èŒƒå›´å†…ä½¿ç”¨ï¼ŒåŒ…æ‹¬åè®®é‡Œçš„å…¨å±€å¸¸é‡ã€å˜é‡å’Œå‡½æ•°ã€‚// ä¸ºæŸäº›å…¸åž‹åœºæ™¯æä¾›äº†é»˜è®¤çš„è®¿é—®çº§åˆ«// *å®žä½“(entities)* : å¯¹äºŽä»£ç ä¸­å¯ä»¥è®¾ç½®è®¿é—®çº§åˆ«çš„ç‰¹æ€§(å±žæ€§ã€åŸºæœ¬ç±»åž‹ã€å‡½æ•°ç­‰)ä¸€ç§ç»Ÿç§°// 1 æ¨¡å—å’Œæºæ–‡ä»¶// *æ¨¡å—*ï¼šç‹¬ç«‹çš„ä»£ç å•å…ƒ// *æ¡†æž¶æˆ–åº”ç”¨ç¨‹åº*ä¼šä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—æ¥æž„å»ºå’Œå‘å¸ƒ// ä¸€ä¸ªæ¨¡å—å¯ä»¥ä½¿ç”¨importå…³é”®å­—å¯¼å…¥å¦å¤–ä¸€ä¸ªæ¨¡å—// Xcodeçš„æ¯ä¸ªtarget(ä¾‹å¦‚æ¡†æž¶æˆ–åº”ç”¨ç¨‹åº)éƒ½è¢«å½“ä½œç‹¬ç«‹çš„æ¨¡å—å¤„ç†// *æºæ–‡ä»¶*ï¼šSwiftä¸­çš„æºä»£ç æ–‡ä»¶// 2 è®¿é—®çº§åˆ«ï¼ˆä½Žâ†’é«˜ï¼‰// open: ç±»ä¼¼publicã€‚å¯ä»¥è¢«è®¿é—®å’Œè¢«ç»§æ‰¿// public: å¯ä»¥è®¿é—®åŒä¸€æ¨¡å—æºæ–‡ä»¶ä¸­çš„ä»»ä½•å®žä½“ï¼Œåœ¨æ¨¡å—å¤–ä¹Ÿå¯ä»¥é€šè¿‡å¯¼å…¥è¯¥æ¨¡å—æ¥è®¿é—®æºæ–‡ä»¶é‡Œçš„æ‰€æœ‰å®žä½“ã€‚å¯ä»¥è¢«è®¿é—®ä¸å¯ä»¥è¢«ç»§æ‰¿// internal: å¯ä»¥è®¿é—®åŒä¸€æ¨¡å—æºæ–‡ä»¶ä¸­çš„ä»»ä½•å®žä½“ï¼Œä½†æ˜¯ä¸èƒ½ä»Žæ¨¡å—å¤–è®¿é—®è¯¥æ¨¡å—æºæ–‡ä»¶ä¸­çš„å®žä½“ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼ŒæŸä¸ªæŽ¥å£åªåœ¨åº”ç”¨ç¨‹åºæˆ–æ¡†æž¶å†…éƒ¨ä½¿ç”¨æ—¶ï¼Œä½ å¯ä»¥å°†å…¶è®¾ç½®ä¸ºinternalçº§åˆ«ã€‚// fileprivate: é™åˆ¶å®žä½“åªèƒ½åœ¨æ‰€åœ¨çš„æºæ–‡ä»¶å†…éƒ¨ä½¿ç”¨ã€‚// private: åªåœ¨å®šä¹‰çš„å®žä½“ä¸­ä½¿ç”¨// è®¿é—®çº§åˆ«åŸºæœ¬åŽŸåˆ™: ä¸å¯ä»¥åœ¨æŸä¸ªå®žä½“ä¸­å®šä¹‰è®¿é—®çº§åˆ«æ›´é«˜çš„å®žä½“// å‡½æ•°çš„è®¿é—®çº§åˆ«ä¸èƒ½é«˜äºŽå®ƒçš„å‚æ•°ç±»åž‹å’Œè¿”å›žç±»åž‹çš„è®¿é—®çº§åˆ«ã€‚// ä¸€èˆ¬ï¼Œé»˜è®¤ä¸º internal çº§åˆ«// åœ¨å¯¼å…¥åº”ç”¨ç¨‹åºæ¨¡å—çš„è¯­å¥å‰ä½¿ç”¨ @testable ç‰¹æ€§ï¼Œç„¶åŽåœ¨å…è®¸æµ‹è¯•çš„ç¼–è¯‘è®¾ç½®( Build Options -&gt; Enable Testability )ä¸‹ç¼–è¯‘è¿™ä¸ªåº”ç”¨ç¨‹åºæ¨¡å—ï¼Œå•å…ƒæµ‹è¯• target å°±å¯ä»¥è®¿é—®åº”ç”¨ç¨‹åºæ¨¡å—ä¸­æ‰€æœ‰ internal çº§åˆ«çš„å®žä½“ã€‚// 3 è®¿é—®æŽ§åˆ¶è¯­æ³•// 4 è‡ªå®šä¹‰ç±»åž‹// ä¸€ä¸ªç±»åž‹çš„è®¿é—®çº§åˆ«ä¹Ÿä¼šå½±å“åˆ°ç±»åž‹æˆå‘˜(å±žæ€§ã€æ–¹æ³•ã€æž„é€ å™¨ã€ä¸‹æ ‡)çš„é»˜è®¤è®¿é—®çº§åˆ«ã€‚// å…ƒç»„ï¼šå…ƒç»„çš„è®¿é—®çº§åˆ«å°†ç”±å…ƒç»„ä¸­è®¿é—®çº§åˆ«æœ€ä¸¥æ ¼çš„ç±»åž‹æ¥å†³å®šã€‚// å‡½æ•°ï¼šå‡½æ•°çš„è®¿é—®çº§åˆ«æ ¹æ®è®¿é—®çº§åˆ«æœ€ä¸¥æ ¼çš„å‚æ•°ç±»åž‹æˆ–è¿”å›žç±»åž‹çš„è®¿é—®çº§åˆ«æ¥å†³å®šã€‚ä½†æ˜¯ï¼Œå¦‚æžœè¿™ç§è®¿é—®çº§åˆ«ä¸ç¬¦åˆå‡½æ•°å®šä¹‰æ‰€åœ¨çŽ¯å¢ƒçš„é»˜è®¤è®¿é—®çº§åˆ«ï¼Œé‚£ä¹ˆå°±éœ€è¦æ˜Žç¡®åœ°æŒ‡å®šè¯¥å‡½æ•°çš„è®¿é—®çº§åˆ«ã€‚// æžšä¸¾ç±»åž‹ï¼šæžšä¸¾æˆå‘˜çš„è®¿é—®çº§åˆ«å’Œè¯¥æžšä¸¾ç±»åž‹ç›¸åŒï¼Œä½ ä¸èƒ½ä¸ºæžšä¸¾æˆå‘˜å•ç‹¬æŒ‡å®šä¸åŒçš„è®¿é—®çº§åˆ«ã€‚æžšä¸¾å®šä¹‰ä¸­çš„ä»»ä½•åŽŸå§‹å€¼æˆ–å…³è”å€¼çš„ç±»åž‹çš„è®¿é—®çº§åˆ«è‡³å°‘ä¸èƒ½ä½ŽäºŽæžšä¸¾ç±»åž‹çš„è®¿é—®çº§åˆ«ã€‚// 5 å­ç±»// å­ç±»çš„è®¿é—®çº§åˆ«ä¸å¾—é«˜äºŽçˆ¶ç±»çš„è®¿é—®çº§åˆ«ã€‚// å¯ä»¥åœ¨ç¬¦åˆå½“å‰è®¿é—®çº§åˆ«çš„æ¡ä»¶ä¸‹é‡å†™ä»»æ„ç±»æˆå‘˜(æ–¹æ³•ã€å±žæ€§ã€æž„é€ å™¨ã€ä¸‹æ ‡ç­‰)ã€‚public class A &#123; fileprivate func someMethod() &#123;&#125;&#125;internal class B: A &#123; override internal func someMethod() &#123; super.someMethod() &#125;&#125;// 6 å¸¸é‡ã€å˜é‡ã€å±žæ€§ã€ä¸‹æ ‡// å¸¸é‡ã€å˜é‡ã€å±žæ€§è®¿é—®çº§åˆ«ä¸èƒ½é«˜äºŽå®ƒä»¬æ‰€å±žçš„ç±»åž‹ã€‚struct TrackedString &#123; private(set) var numberOfEdits = 0 var value: String = &quot;&quot; &#123; didSet &#123; numberOfEdits += 1 &#125; &#125;&#125;var stringToEdit = TrackedString()stringToEdit.value = &quot;This string will be tracked.&quot;stringToEdit.value += &quot; This edit will increment numberOfEdits.&quot;stringToEdit.value += &quot; So will this one.&quot;print(&quot;The number of edits is \(stringToEdit.numberOfEdits)&quot;) // æ‰“å° â€œThe number of edits is 3â€public struct TrackedString2 &#123; public private(set) var numberOfEdits = 0 // Getterçš„è®¿é—®çº§åˆ«æ˜¯publicï¼ŒSetterçš„è®¿é—®çº§åˆ«æ˜¯privateã€‚ public var value: String = &quot;&quot; &#123; didSet &#123; numberOfEdits += 1 &#125; &#125; public init() &#123;&#125;&#125;// 7 æž„é€ å™¨// *å¿…è¦æž„é€ å™¨* çš„è®¿é—®çº§åˆ«å¿…é¡»å’Œæ‰€å±žç±»åž‹ç›¸åŒã€‚// 8 åè®®// 9 æ‰©å±•// 10 æ³›åž‹// 11 ç±»åž‹åˆ«å// ç±»åž‹åˆ«åçš„è®¿é—®çº§åˆ«ä¸å¯é«˜äºŽå…¶è¡¨ç¤ºçš„ç±»åž‹çš„è®¿é—®çº§åˆ«]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 3ï¼šSpeech Frameworkçš„ç®€å•ä½¿ç”¨]]></title>
    <url>%2F2017%2Fios-tutorial-3-speechframework.html</url>
    <content type="text"><![CDATA[åœ¨WWDC 2016æ—¶ï¼ŒAppleä»‹ç»äº†Speech frameworkï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å£°éŸ³è¯†åˆ«æ¡†æž¶ã€‚å®žé™…ä¸Šè¿™æ˜¯åˆ©ç”¨Siriè¿›è¡Œå£°éŸ³è¯†åˆ«ã€‚ åˆå§‹åŒ–é¡¹ç›® æ–°å»ºSpeechToTextDemoï¼Œæ¨¡æ¿æ˜¯Single View Applicationã€‚ æ·»åŠ ç®€å•çš„UI åˆ†åˆ«å®šä¹‰UITextViewå’ŒUIButtonçš„ä¸¤ä¸ªoutletï¼Œä¸ºtextViewå’ŒmicrophoneButtonã€‚ å†ä¸ºUIButtonæ·»åŠ ä¸€ä¸ªactionï¼š123@IBAction func microphoneTapped(_ sender: AnyObject) &#123;&#125; ä½¿ç”¨Speech Framework import Speech å®žçŽ°SFSpeechRecognizerDelegateåè®® ç”¨æˆ·æŽˆæƒèŽ·å–å£°éŸ³æ•°æ®æ˜¯è¦èŽ·å¾—ç”¨æˆ·çš„æŽˆæƒçš„ã€‚ åœ¨ViewControllerç±»ä¸­å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œä½œä¸ºè¯­éŸ³è¯†åˆ«å™¨ã€‚å‚æ•°identifieræ˜¯è¯†åˆ«çš„è¯­ç§ï¼Œå¯å‚è€ƒè¿™ä¸ªåˆ—è¡¨ï¼Œä¸­æ–‡æ˜¯â€œ zh_Hans_CNâ€ã€‚private let speechRecognizer = SFSpeechRecognizer(locale: Locale.init(identifier: &quot;zh_Hans_CN&quot;)) åœ¨viewDidLoad()ä¸­ï¼š 1234567891011121314151617181920212223242526272829override func viewDidLoad() &#123; super.viewDidLoad() // 1 microphoneButton.isEnabled = false speechRecognizer?.delegate = self // 2 SFSpeechRecognizer.requestAuthorization&#123; (authStatus) in var isButtionEnabled = false switch authStatus &#123; case .authorized: isButtionEnabled = true case .denied: isButtionEnabled = false print(&quot;ç”¨æˆ·æ‹’ç»æŽ¥å—è¯­éŸ³è¯†åˆ«&quot;) case .notDetermined: isButtionEnabled = false print(&quot;è¯­éŸ³è¯†åˆ«åŠŸèƒ½æ²¡æœ‰ç»è¿‡è®¤å¯&quot;) case .restricted: isButtionEnabled = false print(&quot;å½“å‰è®¾å¤‡ä¸èƒ½è¯­éŸ³è¯†åˆ«&quot;) &#125; self.microphoneButton.isEnabled = isButtionEnabled &#125; startRecording()&#125; 1 é»˜è®¤æŒ‰é’®è®¾æˆä¸å¯ç”¨ 2 æŽˆæƒç»“æžœå›žè°ƒ Appleéœ€è¦æ¯ä¸ªappå¦‚è¦ç”¨æˆ·æŽˆæƒæ—¶ï¼Œéƒ½åº”è¯¥å®šåˆ¶ä¸€ä¸ªåé¦ˆä¿¡æ¯ï¼ˆinfo.plistï¼‰ã€‚åœ¨info.plistä¸­æ·»åŠ ä¸¤ä¸ªkeyï¼Œåˆ†åˆ«æ˜¯éº¦å…‹é£Žå’Œè¯­éŸ³è¯†åˆ«çš„æŽˆæƒï¼ŒPrivacy - Microphone Usage Descriptionå’ŒPrivacy - Speech Recognition Usage Descriptionã€‚ å¤„ç†è¯­éŸ³è¯†åˆ« åœ¨ViewControllerç±»ä¸­æ·»åŠ ä¸‰ä¸ªå˜é‡ 123private var recognitionRequest: SFSpeechAudioBufferRecognitionRequest? //è¯†åˆ«è¯·æ±‚private var recognitionTask: SFSpeechRecognitionTask? // æä¾›è¯†åˆ«è¯·æ±‚çš„ç»“æžœprivate let audioEngine = AVAudioEngine() // SFSpeechAudioBufferRecognitionRequestå¯¹è±¡å¤„ç†è¯­éŸ³è¯†åˆ«çš„è¯·æ±‚ï¼Œä»£è¡¨è¯­éŸ³è¿›å…¥è¯­éŸ³è¯†åˆ«å™¨ã€‚ SFSpeechRecognitionTask è¯†åˆ«ä»»åŠ¡ï¼Œç”¨äºŽæ“ä½œè¯†åˆ«å™¨çš„åœæ­¢å’Œå¼€å§‹ AVAudioEngine è¯­éŸ³å¼•æ“Žï¼Œæä¾›è¯­éŸ³è¾“å‡º åˆ›å»ºæ–°å‡½æ•°startRecording()ï¼Œè¿™ä¸ªå‡½æ•°åœ¨ç‚¹å‡»buttonåŽè°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯microphoneTapped(:)ä¸­æœ€åŽè°ƒç”¨ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162func startRecording() &#123; // 1 if recognitionTask != nil &#123; recognitionTask?.cancel() recognitionTask = nil &#125; // 2 let audioSession = AVAudioSession.sharedInstance() do &#123; try audioSession.setCategory(AVAudioSessionCategoryRecord) try audioSession.setMode(AVAudioSessionModeMeasurement) try audioSession.setActive(true, with: .notifyOthersOnDeactivation) &#125; catch &#123; print(&quot;audioSessionçš„å±žæ€§è®¾ç½®å¤±è´¥&quot;) &#125; // 3 recognitionRequest = SFSpeechAudioBufferRecognitionRequest() // 4 guard let inputNode = audioEngine.inputNode else &#123; fatalError(&quot;Audio engine has no input node&quot;) &#125; // 5 guard let recognitionRequest = recognitionRequest else &#123; fatalError(&quot;Unable to create an SFSpeechAudioBufferRecognitionRequest object&quot;) &#125; // 6 recognitionRequest.shouldReportPartialResults = true // 7 recognitionTask = speechRecognizer?.recognitionTask(with: recognitionRequest, resultHandler: &#123; (result, error) in var isFinal = false if result != nil &#123; self.textView.text = result?.bestTranscription.formattedString isFinal = (result?.isFinal)! &#125; if error != nil || isFinal &#123; self.audioEngine.stop() inputNode.removeTap(onBus: 0) self.recognitionRequest = nil self.recognitionTask = nil self.microphoneButton.isEnabled = true &#125; &#125;) let recordingFormat = inputNode.outputFormat(forBus: 0) inputNode.installTap(onBus: 0, bufferSize: 1024, format: recordingFormat) &#123; (buffer, when) in self.recognitionRequest?.append(buffer) &#125; audioEngine.prepare() do &#123; try audioEngine.start() &#125; catch &#123; print(&quot;audioEngine couldn&apos;t start beacause of an error.&quot;) &#125; textView.text = &quot;Say something, I&apos;m listening!&quot;&#125; 1 å¼€å§‹å½•éŸ³æ—¶çš„åˆå§‹åŒ– 2 AVAudioSessionæä¾›è¯­éŸ³å½•éŸ³ï¼Œè®¾ç½®ä¸€äº›å‚æ•° 3 åˆå§‹åŒ–SFSpeechAudioBufferRecognitionRequest 4 æ ¸æŸ¥audioEngineæ˜¯å¦å¯ç”¨ 5 æ ¸æŸ¥recognitionRequest 7 æ£€æµ‹çš„éŸ³é¢‘åŽçš„å›žè°ƒæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯å¼€å§‹å½•éŸ³åŽï¼Œæœ‰éŸ³é¢‘è¿›å…¥åŽéƒ½è°ƒç”¨ è¯­éŸ³è¯†åˆ«çš„å¼€å…³ å®žçŽ°ä»£ç†æ–¹æ³•speechRecognizer(_:availabilityDidChange:)ã€‚è¿™ä¸ªæ–¹æ³•åœ¨è¯­éŸ³è¯†åˆ«å™¨å¯ç”¨æ€§å‘ç”Ÿå˜åŒ–æ—¶è¢«è°ƒç”¨ã€‚ 1234567func speechRecognizer(_ speechRecognizer: SFSpeechRecognizer, availabilityDidChange available: Bool) &#123; if available &#123; microphoneButton.isEnabled = true &#125; else &#123; microphoneButton.isEnabled = false &#125;&#125; ç‚¹å‡»buttonæ—¶çš„æ“ä½œï¼š 1234567891011@IBAction func microphoneTapped(_ sender: AnyObject) &#123; if audioEngine.isRunning &#123; audioEngine.stop() recognitionRequest?.endAudio() microphoneButton.isEnabled = false microphoneButton.setTitle(&quot;Start Recording&quot;, for: .normal) &#125; else &#123; startRecording() microphoneButton.setTitle(&quot;Stop Recording&quot;, for: .normal) &#125; &#125; æ€»ç»“è¯­éŸ³è¯†åˆ«åœ¨iPhoneçš„è‡ªå¸¦é”®ç›˜ä¸­æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œä¸­æ–‡è¯†åˆ«çŽ‡å¾ˆé«˜ï¼Œå¦‚æžœä¸é«˜å…´æˆ–ä¸æ–¹ä¾¿æ‰“å­—ï¼Œå¾ˆæ–¹ä¾¿ä½¿ç”¨ã€‚ ä»£ç SpeechToTextDemo å‚è€ƒï¼š Building a Speech-to-Text App Using Speech Framework in iOS 10]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-23ï¼šGenerics]]></title>
    <url>%2F2017%2Fswift-23.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106/** Generics æ³›åž‹æ˜¯ Swift æœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œè®¸å¤š Swift æ ‡å‡†åº“æ˜¯é€šè¿‡æ³›åž‹ä»£ç æž„å»ºçš„ã€‚ */// 1 æ³›åž‹å‡½æ•°// Tæ˜¯ä¸€ä¸ªå ä½ç±»åž‹ï¼Œå…¶ä»–å­—æ¯ä¹Ÿå¯ä»¥ï¼Œåªè¦åœ¨å°–æ‹¬å·ä¸­å°±è¡Œã€‚// å¯ä»¥ç†è§£ä¸ºï¼šåœ¨å®šä¹‰çš„æ—¶å€™è¿˜ä¸çŸ¥é“æ˜¯å•¥ç±»åž‹ï¼Œé‚£å°±å‡è®¾æ˜¯Tç±»åž‹ï¼Œç­‰åˆ°è°ƒç”¨æ—¶ï¼Œç»™è¿‡æ¥ä»€ä¹ˆç±»åž‹çš„å‚æ•°ï¼Œé‚£Tå°±æ˜¯ä¸Šé¢ç±»åž‹ã€‚func swapValue&lt;T&gt;(_ a: inout T, _ b: inout T) &#123; let tmp = a a = b b = tmp&#125;var a = 1var b = 3swapValue(&amp;a, &amp;b)print(a,b)var s1 = &quot;word&quot;var s2 = &quot;å•è¯&quot;swapValue(&amp;s1, &amp;s2)print(s1, s2)// 2 ç±»åž‹å‚æ•°// Tå°±æ˜¯ç±»åž‹å‚æ•°ã€‚å¯ä»¥å®šä¹‰å¤šä¸ªç±»åž‹å‚æ•°ã€‚// 3 å‘½åç±»åž‹å‚æ•°ï¼šå°±æ˜¯æŠŠç±»åž‹å‚æ•°å‘½åä¸ºä¸€ä¸ªå®¹æ˜“é˜…è¯»çš„åå­—ï¼ˆå¤§å†™å­—æ¯å¼€å¤´çš„é©¼å³°å‘½åæ³•ï¼‰ã€‚// Dictionary&lt;Key, Value&gt;// Array&lt;Element&gt;// 4 æ³›åž‹ç±»åž‹struct Stack&lt;Element&gt; &#123; var items = [Element]() mutating func push(item: Element) &#123; items.append(item) &#125; mutating func pop() -&gt; Element &#123; return items.removeLast() &#125;&#125;var stackOfStrings = Stack&lt;String&gt;()stackOfStrings.push(item: &quot;uno&quot;)stackOfStrings.push(item: &quot;dos&quot;)stackOfStrings.push(item: &quot;tres&quot;)stackOfStrings.push(item: &quot;cuatro&quot;)// 5 æ‰©å±•ä¸€ä¸ªæ³›åž‹ç±»åž‹// ä¸éœ€è¦åœ¨æ‰©å±•çš„å®šä¹‰ä¸­æä¾›ç±»åž‹å‚æ•°åˆ—è¡¨ã€‚åŽŸå§‹ç±»åž‹å®šä¹‰ä¸­å£°æ˜Žçš„ç±»åž‹å‚æ•°åˆ—è¡¨åœ¨æ‰©å±•ä¸­å¯ä»¥ç›´æŽ¥ä½¿ç”¨ï¼Œå¹¶ä¸”è¿™äº›æ¥è‡ªåŽŸå§‹ç±»åž‹ä¸­çš„å‚æ•°åç§°ä¼šè¢«ç”¨ä½œåŽŸå§‹å®šä¹‰ä¸­ç±»åž‹å‚æ•°çš„å¼•ç”¨ã€‚extension Stack &#123; var topItem: Element? &#123; return items.isEmpty ? nil : items[items.count - 1] &#125;&#125;// 6 ç±»åž‹çº¦æŸï¼šæŒ‡å®šä¸€ä¸ªç±»åž‹å‚æ•°å¿…é¡»ç»§æ‰¿è‡ªæŒ‡å®šç±»ï¼Œæˆ–è€…ç¬¦åˆä¸€ä¸ªç‰¹å®šçš„åè®®æˆ–åè®®ç»„åˆã€‚/*func someFunction&lt;T: SomeClass, U: SomeProtocol&gt;(someT: T, someU: U) &#123; // è¿™é‡Œæ˜¯æ³›åž‹å‡½æ•°çš„å‡½æ•°ä½“éƒ¨åˆ†&#125; *//*func findIndex&lt;T&gt;(array: [T], _ valueToFind: T) -&gt; Int? &#123; for (index, value) in array.enumerated() &#123; if value == valueToFind &#123; return index &#125; &#125; return nil&#125; */// ä¸æ˜¯æ‰€æœ‰çš„ Swiftç±»åž‹éƒ½å¯ä»¥ç”¨ç­‰å¼ç¬¦(==)è¿›è¡Œæ¯”è¾ƒã€‚// Swiftæ ‡å‡†åº“ä¸­å®šä¹‰äº†ä¸€ä¸ª Equatable åè®®ï¼Œè¯¥åè®®è¦æ±‚ä»»ä½•éµå¾ªè¯¥åè®®çš„ç±»åž‹å¿…é¡»å®žçŽ°ç­‰å¼ç¬¦( == )åŠä¸ç­‰ç¬¦( != )ã€‚func findIndex&lt;T: Equatable&gt;(array: [T], _ valueToFind: T) -&gt; Int? &#123; for (index, value) in array.enumerated() &#123; if value == valueToFind &#123; return index &#125; &#125; return nil&#125;// 7 å…³è”ç±»åž‹// å…³è”ç±»åž‹ä¸ºåè®®ä¸­çš„ æŸä¸ªç±»åž‹æä¾›äº†ä¸€ä¸ªå ä½å(æˆ–è€…è¯´åˆ«å)ï¼Œå…¶ä»£è¡¨çš„å®žé™…ç±»åž‹åœ¨åè®®è¢«é‡‡çº³æ—¶æ‰ä¼šè¢«æŒ‡å®šã€‚protocol Container &#123; associatedtype ItemType mutating func append(item: ItemType) var count: Int &#123; get &#125; subscript(i: Int) -&gt; ItemType &#123; get &#125;&#125;struct Stack2&lt;Element&gt;: Container &#123; // Stack&lt;Element&gt; çš„åŽŸå§‹å®žçŽ°éƒ¨åˆ† var items = [Element]() mutating func push(item: Element) &#123; items.append(item) &#125; mutating func pop() -&gt; Element &#123; return items.removeLast() &#125; // Container åè®®çš„å®žçŽ°éƒ¨åˆ† mutating func append(item: Element) &#123; self.push(item: item) &#125; var count: Int &#123; return items.count &#125; subscript(i: Int) -&gt; Element &#123; // swift å¯ä»¥æŽ¨æ–­å‡ºItemTypeå°±æ˜¯Element return items[i] &#125;&#125;]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-22ï¼šProtocols]]></title>
    <url>%2F2017%2Fswift-22.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327/** Protocols åè®®å®šä¹‰äº†ä¸€ä¸ªè“å›¾ï¼Œè§„å®šäº†ç”¨æ¥å®žçŽ°æŸä¸€ç‰¹å®šä»»åŠ¡æˆ–è€…åŠŸèƒ½çš„æ–¹æ³•ã€å±žæ€§ï¼Œä»¥åŠå…¶ä»–éœ€è¦çš„ä¸œè¥¿ã€‚ ç±»ã€ç»“æž„ä½“æˆ–æžšä¸¾éƒ½å¯ä»¥é‡‡çº³åè®®ï¼Œå¹¶ä¸ºåè®®å®šä¹‰çš„è¿™äº›è¦æ±‚æä¾›å…·ä½“å®žçŽ°ã€‚ xx conform xxx protocol (xxâ€œç¬¦åˆâ€xxxåè®®) */// 1 å±žæ€§è¦æ±‚// å¯ä»¥è¦æ±‚æä¾›ç‰¹å®šåç§°å’Œç±»åž‹çš„å®žä¾‹å±žæ€§æˆ–ç±»åž‹å±žæ€§protocol SomeProtocol &#123; var mustBeSettable: Int &#123; get set &#125; var doesNotNeedToBeSettable: Int &#123; get &#125;&#125;protocol AnotherProtocol &#123; static var someTypeProperty: Int &#123; get set &#125;&#125;protocol FullyNamed &#123; var fullName: String &#123; get &#125;&#125;struct Person: FullyNamed &#123; var fullName: String&#125;let john = Person(fullName: &quot;John Appleseed&quot;)class Starship: FullyNamed &#123; var prefix: String? var name: String init(name: String, prefix: String? = nil) &#123; self.name = name self.prefix = prefix &#125; var fullName: String &#123; return (prefix != nil ? prefix! + &quot; &quot; : &quot;&quot;) + name &#125;&#125;// 2 æ–¹æ³•è¦æ±‚// ä¸éœ€è¦å¤§æ‹¬å·å’Œæ–¹æ³•ä½“; ä¸æ”¯æŒä¸ºåè®®ä¸­çš„æ–¹æ³•çš„å‚æ•°æä¾›é»˜è®¤å€¼protocol SomeProtocol2 &#123; static func someTypeMethod()&#125;protocol RandomNumberGenerator &#123; func random() -&gt; Double&#125;// çº¿æ€§åŒä½™ç”Ÿæˆå™¨(linear congruential generator)çš„ä¼ªéšæœºæ•°ç®—æ³•ã€‚class LinearCongruentialGenerator: RandomNumberGenerator &#123; var lastRandom = 42.0 let m = 139968.0 let a = 3877.0 let c = 29573.0 func random() -&gt; Double &#123; // a.truncatingRemainder(dividingBy:m) = b ç›¸å½“äºŽ x*m + b = aã€‚ï¼ˆaæ˜¯æµ®ç‚¹æ•°ï¼Œxæ˜¯æ•´æ•°ï¼‰ lastRandom = ((lastRandom * a + c).truncatingRemainder(dividingBy:m)) return lastRandom / m &#125;&#125;// 3 Mutating æ–¹æ³•è¦æ±‚// å®žçŽ°åè®®ä¸­çš„ mutating æ–¹æ³•æ—¶ï¼Œè‹¥æ˜¯ç±»ç±»åž‹ï¼Œåˆ™ä¸ç”¨å†™ mutating å…³é”®å­—ã€‚è€Œå¯¹äºŽç»“æž„ä½“å’Œæžšä¸¾ï¼Œåˆ™å¿…é¡»å†™ mutating å…³é”®å­—ã€‚protocol Togglable &#123; mutating func toggle()&#125;enum OnOffSwitch: Togglable &#123; case Off, On mutating func toggle() &#123; switch self &#123; case .Off: self = .On case .On: self = .Off &#125; &#125;&#125;var lightSwitch = OnOffSwitch.OfflightSwitch.toggle()// 4 æž„é€ å™¨è¦æ±‚protocol SomeProtocol3 &#123; init(someParameter: Int)&#125;class SomeClass: SomeProtocol3 &#123; required init(someParameter: Int) &#123; // å¿…é¡»è¦åŠ required &#125;&#125;// 5 åè®®ä½œä¸ºç±»åž‹// 1 ä½œä¸ºå‡½æ•°ã€æ–¹æ³•æˆ–æž„é€ å™¨ä¸­çš„å‚æ•°ç±»åž‹æˆ–è¿”å›žå€¼ç±»åž‹// 2 ä½œä¸ºå¸¸é‡ã€å˜é‡æˆ–å±žæ€§çš„ç±»åž‹// 3 ä½œä¸ºæ•°ç»„ã€å­—å…¸æˆ–å…¶ä»–å®¹å™¨ä¸­çš„å…ƒç´ ç±»åž‹class Dice &#123; // éª°å­ let sides: Int let generator: RandomNumberGenerator init(sides: Int, generator: RandomNumberGenerator) &#123; self.sides = sides self.generator = generator &#125; func roll() -&gt; Int &#123; return Int(generator.random() * Double(sides)) + 1 &#125;&#125;var d6 = Dice(sides: 6, generator: LinearCongruentialGenerator())for _ in 1...5 &#123; print(&quot;Random dice roll is \(d6.roll())&quot;)&#125;let a = 8.625a.truncatingRemainder(dividingBy: 0.75)let b = 5.5b.truncatingRemainder(dividingBy: 3)// 6 å§”æ‰˜(ä»£ç†)æ¨¡å¼// å§”æ‰˜æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸ç±»æˆ–ç»“æž„ä½“å°†ä¸€äº›éœ€è¦å®ƒä»¬è´Ÿè´£çš„åŠŸèƒ½å§”æ‰˜ç»™å…¶ä»–ç±»åž‹çš„å®žä¾‹ã€‚// å§”æ‰˜æ¨¡å¼çš„å®žçŽ°: å®šä¹‰åè®®æ¥å°è£…é‚£äº›éœ€è¦è¢«å§”æ‰˜çš„åŠŸèƒ½ï¼Œè¿™æ ·å°±èƒ½ç¡®ä¿é‡‡çº³åè®®çš„ç±»åž‹èƒ½æä¾›è¿™äº›åŠŸèƒ½ã€‚protocol DiceGame &#123; var dice: Dice &#123; get &#125; func play()&#125;protocol DiceGameDelegate &#123; func gameDidStart(game: DiceGame) func game(game: DiceGame, didStartNewTurnWithDiceRoll diceRoll:Int) func gameDidEnd(game: DiceGame)&#125;class SnakesAndLadders: DiceGame &#123; let finalSquare = 25 let dice = Dice(sides: 6, generator: LinearCongruentialGenerator()) var square = 0 var board: [Int] init() &#123; board = [Int](repeating: 0, count: finalSquare + 1) board[03] = +08; board[06] = +11; board[09] = +09; board[10] = +02 board[14] = -10; board[19] = -11; board[22] = -02; board[24] = -08 &#125; var delegate: DiceGameDelegate? func play() &#123; square = 0 delegate?.gameDidStart(game: self) gameLoop: while square != finalSquare &#123; let diceRoll = dice.roll() delegate?.game(game: self, didStartNewTurnWithDiceRoll: diceRoll) switch square + diceRoll &#123; case finalSquare: break gameLoop case let newSquare where newSquare &gt; finalSquare: continue gameLoop default: square += diceRoll square += board[square] &#125; &#125; delegate?.gameDidEnd(game: self) &#125;&#125;class DiceGameTracker: DiceGameDelegate &#123; var numberOfTurns = 0 func gameDidStart(game: DiceGame) &#123; numberOfTurns = 0 if game is SnakesAndLadders &#123; print(&quot;Started a new game of Snakes and Ladders&quot;) &#125; print(&quot;The game is using a \(game.dice.sides)-sided dice&quot;) &#125; func game(game: DiceGame, didStartNewTurnWithDiceRoll diceRoll: Int) &#123; numberOfTurns += 1 print(&quot;Rolled a \(diceRoll)&quot;) &#125; func gameDidEnd(game: DiceGame) &#123; print(&quot;The game lasted for \(numberOfTurns) turns&quot;) &#125;&#125;let tracker = DiceGameTracker()let game = SnakesAndLadders()game.delegate = trackergame.play()// 7 é€šè¿‡æ‰©å±•æ·»åŠ åè®®ä¸€è‡´æ€§// é€šè¿‡æ‰©å±•ä»¤å·²æœ‰ç±»åž‹é‡‡çº³å¹¶ç¬¦åˆåè®®æ—¶ï¼Œè¯¥ç±»åž‹çš„æ‰€æœ‰å®žä¾‹ä¹Ÿä¼šéšä¹‹èŽ·å¾—åè®®ä¸­å®šä¹‰çš„å„é¡¹åŠŸèƒ½ã€‚protocol TextRepresentable &#123; var textualDescription: String &#123; get &#125;&#125;extension Dice: TextRepresentable &#123; var textualDescription: String &#123; return &quot;A \(sides)-sided dice&quot; &#125;&#125;let d12 = Dice(sides: 12, generator: LinearCongruentialGenerator())print(d12.textualDescription)// 8 é€šè¿‡æ‰©å±•é‡‡çº³åè®®// å½“ä¸€ä¸ªç±»åž‹å·²ç»ç¬¦åˆäº†æŸä¸ªåè®®ä¸­çš„æ‰€æœ‰è¦æ±‚ï¼Œå´è¿˜æ²¡æœ‰å£°æ˜Žé‡‡çº³è¯¥åè®®æ—¶ï¼Œå¯ä»¥é€šè¿‡ç©ºæ‰©å±•ä½“çš„æ‰©å±•æ¥é‡‡çº³è¯¥åè®®struct Hamster &#123; var name: String var textualDescription: String &#123; return &quot;A hamster named \(name)&quot; &#125;&#125;extension Hamster: TextRepresentable &#123;&#125;let simonTheHamster = Hamster(name: &quot;Simon&quot;)let somethingTextRepresentable: TextRepresentable = simonTheHamster// 9 åè®®ç±»åž‹çš„é›†åˆlet things: [TextRepresentable] = [ d12, simonTheHamster] for thing in things &#123; print(thing.textualDescription)&#125;// 10 åè®®çš„ç»§æ‰¿protocol PrettyTextRepresentable: TextRepresentable &#123; var prettyTextualDescription: String &#123; get &#125;&#125;// 11 ç±»ç±»åž‹ä¸“å±žåè®®protocol SomeClassOnlyProtocol: class &#123; // åªèƒ½ç±»å¯ä»¥å®žçŽ°è¿™ä¸ªåè®® &#125;//struct SomeStruct: SomeClassOnlyProtocol &#123;//&#125;// 12 åè®®åˆæˆprotocol Named &#123; var name: String &#123; get &#125;&#125;protocol Aged &#123; var age: Int &#123; get &#125;&#125;struct Person2: Named, Aged &#123; var name: String var age: Int&#125;// å‚æ•°celebratorçš„ç±»åž‹æ˜¯`Named &amp; Aged`ï¼Œæ„å‘³ç€å®ƒä¸å…³å¿ƒå‚æ•°çš„å…·ä½“ç±»åž‹ï¼Œåªè¦å‚æ•°ç¬¦åˆè¿™ä¸¤ä¸ªåè®®å³å¯func wishHappyBirthday(to celebrator: Named &amp; Aged) &#123; print(&quot;Happy birthday, \(celebrator.name), you&apos;re \(celebrator.age)!&quot;)&#125;let birthdayPerson = Person2(name: &quot;Malcolm&quot;, age: 21)wishHappyBirthday(to: birthdayPerson)// 13 æ£€æŸ¥åè®®ä¸€è‡´æ€§/** æ£€æŸ¥å’Œè½¬æ¢åˆ°æŸä¸ªåè®®ç±»åž‹åœ¨è¯­æ³•ä¸Šå’Œç±»åž‹çš„æ£€æŸ¥å’Œè½¬æ¢å®Œå…¨ç›¸åŒ: â€¢ is ç”¨æ¥æ£€æŸ¥å®žä¾‹æ˜¯å¦ç¬¦åˆæŸä¸ªåè®®ï¼Œè‹¥ç¬¦åˆåˆ™è¿”å›ž true ï¼Œå¦åˆ™è¿”å›ž false ã€‚ â€¢ as? è¿”å›žä¸€ä¸ªå¯é€‰å€¼ï¼Œå½“å®žä¾‹ç¬¦åˆæŸä¸ªåè®®æ—¶ï¼Œè¿”å›žç±»åž‹ä¸ºåè®®ç±»åž‹çš„å¯é€‰å€¼ï¼Œå¦åˆ™è¿”å›ž nil ã€‚ â€¢ as! å°†å®žä¾‹å¼ºåˆ¶å‘ä¸‹è½¬æ¢åˆ°æŸä¸ªåè®®ç±»åž‹ï¼Œå¦‚æžœå¼ºè½¬å¤±è´¥ï¼Œä¼šå¼•å‘è¿è¡Œæ—¶é”™è¯¯ã€‚ */protocol HasArea &#123; var area: Double &#123; get &#125;&#125;class Circle: HasArea &#123; let pi = 3.1415927 var radius: Double var area: Double &#123; return pi * radius * radius &#125; init(radius: Double) &#123; self.radius = radius &#125;&#125;class Country: HasArea &#123; var area: Double init(area: Double) &#123; self.area = area &#125;&#125;class Animal &#123; var legs: Int init(legs: Int) &#123; self.legs = legs &#125;&#125;let objects: [AnyObject] = [ Circle(radius: 2.0), Country(area: 243_610), Animal(legs: 4)]for object in objects &#123; if let objectWithArea = object as? HasArea &#123; print(&quot;Area is \(objectWithArea.area)&quot;) &#125; else &#123; print(&quot;Something that doesn&apos;t have an area&quot;) &#125;&#125;// 14 å¯é€‰çš„åè®®è¦æ±‚import Foundation@objc protocol CounterDataSource &#123; @objc optional func increment(forCount count: Int) -&gt; Int @objc optional var fixedIncrement: Int &#123; get &#125;&#125;class Counter &#123; var count = 0 var dataSource: CounterDataSource? func increment() &#123; if let amount = dataSource?.increment?(forCount: count) &#123; count = count + amount &#125; else if let amount = dataSource?.fixedIncrement &#123; count = count + amount &#125; &#125;&#125;class ThreeSource: NSObject, CounterDataSource &#123; let fixedIncrement = 3&#125;var counter = Counter()counter.dataSource = ThreeSource()for _ in 1...4 &#123; counter.increment() print(counter.count)&#125;// 15 åè®®æ‰©å±•// åè®®å¯ä»¥é€šè¿‡æ‰©å±•æ¥ä¸ºé‡‡çº³åè®®çš„ç±»åž‹æä¾›å±žæ€§ã€æ–¹æ³•ä»¥åŠä¸‹æ ‡çš„å®žçŽ°ã€‚extension RandomNumberGenerator &#123; func randomBool() -&gt; Bool &#123; return random() &gt; 0.5 &#125;&#125;let generator = LinearCongruentialGenerator()print(&quot;Here&apos;s a random number: \(generator.random())&quot;)print(&quot;And here&apos;s a random Boolean: \(generator.randomBool())&quot;)// æä¾›é»˜è®¤å®žçŽ°ã€‚// å¦‚æžœç¬¦åˆPrettyTextRepresentableåè®®æŸä¸ªç±»ã€ç»“æž„ä½“æˆ–æžšä¸¾ï¼Œæœ‰å±žæ€§prettyTextualDescriptionçš„å®žçŽ°ï¼Œé‚£å±žæ€§prettyTextualDescriptionçš„ç»“æžœå°±æ˜¯è¿™ä¸ªå®žçŽ°ï¼Œå¦åˆ™å°±ä¼šä½¿ç”¨æ‰©å±•å½“ä¸­çš„å®žçŽ°ã€‚extension PrettyTextRepresentable &#123; var prettyTextualDescription: String &#123; return textualDescription &#125;&#125;// ä¸ºåè®®æ‰©å±•æ·»åŠ é™åˆ¶æ¡ä»¶extension Collection where Iterator.Element: TextRepresentable &#123; var textualDescription: String &#123; let itemsAsText = self.map &#123; $0.textualDescription &#125; return &quot;[&quot; + itemsAsText.joined(separator: &quot;, &quot;) + &quot;]&quot; &#125;&#125;let murrayTheHamster = Hamster(name: &quot;Murray&quot;)let morganTheHamster = Hamster(name: &quot;Morgan&quot;)let mauriceTheHamster = Hamster(name: &quot;Maurice&quot;)let hamsters = [murrayTheHamster, morganTheHamster, mauriceTheHamster]print(hamsters.textualDescription)]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 2ï¼šç”¨Core Imageè¿›è¡Œé¢éƒ¨è¯†åˆ«(Swift)]]></title>
    <url>%2F2017%2Fios-tutorial-2-facerecognition.html</url>
    <content type="text"><![CDATA[é¢éƒ¨è¯†åˆ«APIä¸ä»…å¯ä»¥æ˜¯è¯†åˆ«é¢éƒ¨ï¼Œä¹Ÿå¯è¯†åˆ«é¢éƒ¨çš„ç‰¹æ®Šç»†èŠ‚ï¼Œä¾‹å¦‚å¾®ç¬‘ç”šè‡³çœ¨çœ¼ç›ã€‚ å»ºç«‹åˆå§‹é¡¹ç›®åŽŸæ–‡å»ºå¥½äº†åˆå§‹é¡¹ç›®ï¼Œæˆ‘è‡ªå·±æ–°å»ºäº†åˆå§‹é¡¹ç›® æ–°å»ºé¡¹ç›®Detector åˆ é™¤IBä¸­åŽŸæœ¬View Controller Sceneã€‚ æ‹–åŠ¨UITabBarControlleråˆ°IBä¸­ï¼Œå¾—åˆ°ä¸‰ä¸ªSceneã€‚é€‰æ‹©UITabBarControllerçš„Is Initial View Controllerï¼Œä½¿å…¶ä½œä¸ºåˆå§‹æŽ§åˆ¶å™¨ã€‚ ä¿®æ”¹Item 1çš„titleå’Œå…¶Bar Iteméƒ½ä¸ºPhotoï¼Œä¿®æ”¹å…¶Classä¸ºViewControllerã€‚ å‘Assetsä¸­æ·»åŠ å‡ å¼ äººç‰©å›¾ç‰‡ æƒ³Photo Sceneä¸­æ·»åŠ ä¸€ä¸ªImage Viewï¼ŒContent Modeæ”¹ä¸ºAspect Fitï¼Œé€‰æ‹©ä¸€ä¸ªå›¾ç‰‡ã€‚åœ¨ViewControlleræ·»åŠ å›¾ç‰‡å¯¹åº”@IBOutletï¼š@IBOutlet var personPic: UIImageView! é€‰ä¸­Item 2ï¼Œç‚¹å‡»èœå•æ EDitor &gt; Embed In &gt; Navigation Controllerï¼Œæ–°ç”Ÿæˆä¸€ä¸ªä¸Žä¹‹å…³è”çš„Sceneã€‚ æ–°å»ºCameraViewControllerç±»ï¼Œç»§æ‰¿è‡³UIViewControllerã€‚ä¿®æ”¹ä¸Šé¢ç”Ÿæˆçš„Sceneçš„Classå±žæ€§ä¸ºCameraViewControllerã€‚ æ‹–åŠ¨ä¸€ä¸ªUIBarButtonItemåˆ°Camera View Controller Sceneçš„UINavigationItemçš„å³è¾¹ï¼Œå¹¶é€‰æ‹©System Itemä¸ºCamera åœ¨CameraViewControllerä¸­å»ºç«‹outletå’ŒAction è¯†åˆ«ç…§ç‰‡çš„é¢éƒ¨ åœ¨ ViewController.swiftä¸­å¼•å…¥CoreImage:import CoreImage åœ¨ ViewController.swiftä¸­æ·»åŠ å‡½æ•°detect(): 12345678910111213141516171819202122232425262728293031func detect() &#123; // 1 guard let personciImage = CIImage(image: personPic.image!) else &#123; return &#125; // 2 let accuracy = [CIDetectorAccuracy: CIDetectorAccuracyHigh] let faceDetector = CIDetector(ofType: CIDetectorTypeFace, context: nil, options: accuracy) let faces = faceDetector?.features(in: personciImage) // 3 for face in faces as! [CIFaceFeature] &#123; print(&quot;Found bounds are \(face.bounds)&quot;) let faceBox = UIView(frame: face.bounds) faceBox.layer.borderWidth = 3 faceBox.layer.borderColor = UIColor.red.cgColor faceBox.backgroundColor = UIColor.clear personPic.addSubview(faceBox) // 4 if face.hasLeftEyePosition &#123; print(&quot;Left eye bounds are \(face.leftEyePosition)&quot;) &#125; if face.hasRightEyePosition &#123; print(&quot;Right eye bounds are \(face.rightEyePosition)&quot;) &#125; &#125;&#125; 1 æ ¹æ®UIImageèŽ·å–CoreImageä¸­å›¾ç‰‡å¯¹è±¡ã€‚guardä¸ŽifåŠŸèƒ½ç±»ä¼¼ï¼ŒåŒºåˆ«å¯æŸ¥çœ‹ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-5ï¼šControl Flowçš„6 guard ä¸Ž ifã€‚ 2 åˆå§‹åŒ–æ£€æµ‹å™¨CIDetectorï¼Œ accurayæ˜¯æ£€æŸ¥å™¨é…ç½®é€‰é¡¹ï¼Œè¡¨ç¤ºç²¾ç¡®åº¦ï¼›å› ä¸ºCIDetectorå¯ä»¥è¿›è¡Œå‡ ç§ç±»åž‹çš„æ£€æµ‹ï¼Œæ‰€ä»¥CIDetectorTypeFaceç”¨æ¥è¡¨ç¤ºé¢éƒ¨æ£€æµ‹ï¼›featuresæ–¹æ³•è¿”å›žå…·ä½“çš„æ£€æµ‹ç»“æžœ 3 ç»™æ¯ä¸ªæ£€æµ‹åˆ°çš„è„¸æ·»åŠ çº¢è‰²æ¡† 4 æ£€æµ‹æ˜¯å¦æœ‰å·¦çœ¼ä½ç½® åœ¨viewDidLoadä¸­æ·»åŠ  detect()ï¼Œè¿è¡Œç»“æžœç±»ä¼¼ï¼š æ‰“å°ç»“æžœï¼Œæ˜¾ç¤ºæ£€æµ‹åˆ°çš„é¢éƒ¨ä½ç½®æ˜¯ä¸å¯¹çš„ï¼šFound bounds are (177.0, 416.0, 380.0, 380.0)è¿™æ˜¯å› ä¸ºUIKitçš„åæ ‡ç³»ç»Ÿä¸ŽCore Imageçš„åæ ‡ç³»ç»Ÿæ˜¯ä¸åŒçš„ï¼š æŠŠCore Imageçš„åæ ‡ç³»ç»Ÿè½¬æ¢ä¸ºUIKitçš„åæ ‡ç³»ç»Ÿï¼Œä¿®æ”¹detect()ä¸ºï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748func detect() &#123; guard let personciImage = CIImage(image: personPic.image!) else &#123; return &#125; let accuracy = [CIDetectorAccuracy: CIDetectorAccuracyHigh] let faceDetector = CIDetector(ofType: CIDetectorTypeFace, context: nil, options: accuracy) let faces = faceDetector?.features(in: personciImage) // let ciImageSize = personciImage.extent.size var transform = CGAffineTransform(scaleX: 1, y: -1) transform = transform.translatedBy(x: 0, y: -ciImageSize.height) for face in faces as! [CIFaceFeature] &#123; print(&quot;Found bounds are \(face.bounds)&quot;) // Apply the transform to convert the coordinates var faceViewBounds = face.bounds.applying(transform) // Calculate the actual position and size of the rectangle in the image view let viewSize = personPic.bounds.size let scale = min(viewSize.width / ciImageSize.width, viewSize.height / ciImageSize.height) let offsetX = (viewSize.width - ciImageSize.width * scale) / 2 let offsetY = (viewSize.height - ciImageSize.height * scale) / 2 faceViewBounds = faceViewBounds.applying(CGAffineTransform(scaleX: scale, y: scale)) faceViewBounds.origin.x += offsetX faceViewBounds.origin.y += offsetY let faceBox = UIView(frame: faceViewBounds) faceBox.layer.borderWidth = 3 faceBox.layer.borderColor = UIColor.red.cgColor faceBox.backgroundColor = UIColor.clear personPic.addSubview(faceBox) if face.hasLeftEyePosition &#123; print(&quot;Left eye bounds are \(face.leftEyePosition)&quot;) &#125; if face.hasRightEyePosition &#123; print(&quot;Right eye bounds are \(face.rightEyePosition)&quot;) &#125; &#125;&#125; è¿è¡Œå¯çœ‹åˆ°æ­£ç¡®è¯†åˆ«ä½ç½®ï¼š ç›¸æœºæ‹ç…§åŽçš„è„¸éƒ¨è¯†åˆ«ä¹‹å‰æ˜¯é¡¹ç›®ä¸­ç…§ç‰‡è¯†åˆ«ï¼ŒçŽ°åœ¨æ˜¯æ‹å®Œç…§å†è¯†åˆ«ï¼ŒåŽŸç†æ˜¯ç›¸åŒçš„ï¼Œå°±æ˜¯å¤šä¸€ä¸ªæ‹å®Œç…§ï¼Œå–ç…§ç‰‡çš„è¿‡ç¨‹ã€‚ æ›´æ–°CameraViewControllerç±»çš„ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738// 1class CameraViewController: UIViewController, UIImagePickerControllerDelegate, UINavigationControllerDelegate &#123; @IBOutlet var imageView: UIImageView! // 2 let imagePicker = UIImagePickerController() override func viewDidLoad() &#123; super.viewDidLoad() imagePicker.delegate = self &#125; @IBAction func takePhoto(_ sender: AnyObject) &#123; // 3 if !UIImagePickerController.isSourceTypeAvailable(.camera) &#123; return &#125; imagePicker.allowsEditing = false imagePicker.sourceType = .camera present(imagePicker, animated: true, completion: nil) &#125; // 4 //MARK: -UIImagePickerControllerDelegate func imagePickerController(_ picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : Any]) &#123; if let pickedImage = info[UIImagePickerControllerOriginalImage] as? UIImage &#123; imageView.contentMode = .scaleAspectFit imageView.image = pickedImage &#125; dismiss(animated: true, completion: nil) self.detect() &#125; // 5 func imagePickerControllerDidCancel(_ picker: UIImagePickerController) &#123; dismiss(animated: true, completion: nil) &#125;&#125; 1 å®žçŽ°UIImagePickerControllerDelegateåè®®ï¼Œç”¨äºŽæ‹ç…§ç›¸å…³ä»£ç†ã€‚ 2 åˆå§‹åŒ–UIImagePickerControllerã€‚UIImagePickerControlleræ˜¯ç…§ç›¸æˆ–æ‘„å½±ç•Œé¢å’ŒåŠŸèƒ½ç®¡ç†çš„ç±»ã€‚ 3 åˆ¤æ–­è®¾å¤‡ç…§ç›¸æœºæ˜¯å¦å¯ç”¨ã€‚ 4 å®žçŽ°ä¸€ä¸ªUIImagePickerControllerDelegateä¸­çš„ä»£ç†æ–¹æ³•ï¼Œå½“æ‹æ‘„å®Œå¤‡ç¡®å®žä½¿ç”¨ç…§ç‰‡æ—¶è°ƒç”¨ã€‚ 5 ä¹Ÿæ˜¯UIImagePickerControllerDelegateä¸­çš„ä»£ç†æ–¹æ³•ï¼Œå–æ¶ˆæ‹æ‘„æ—¶è°ƒç”¨ã€‚ æ·»åŠ detect()ä»£ç ï¼Œä¸ŽViewControllerä¸­ä¸åŒçš„æ˜¯ï¼Œä¸ç”¨çº¢è‰²æ¡†æ¡†å¤„è¯†åˆ«å‡ºçš„é¢éƒ¨ï¼Œè€Œæ˜¯è¯†åˆ«å‡ºé¢éƒ¨çš„ç»†èŠ‚ï¼Œå¹¶ç”¨UIAlertControllerå¼¹å‡ºæ˜¾ç¤ºã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041func detect() &#123; let imageOptions = NSDictionary(object: NSNumber(value: 5) as NSNumber, forKey: CIDetectorImageOrientation as NSString) let personciImage = CIImage(cgImage: imageView.image!.cgImage!) let accuracy = [CIDetectorAccuracy: CIDetectorAccuracyHigh] let faceDetector = CIDetector(ofType: CIDetectorTypeFace, context: nil, options: accuracy) let faces = faceDetector?.features(in: personciImage, options: imageOptions as? [String : AnyObject]) if let face = faces?.first as? CIFaceFeature &#123; print(&quot;found bounds are \(face.bounds)&quot;) var message = &quot;æœ‰ä¸ªè„¸&quot; if face.hasSmile &#123; print(&quot;è„¸æ˜¯ç¬‘çš„&quot;) message += &quot;,è„¸æ˜¯ç¬‘çš„&quot; &#125; if face.hasMouthPosition &#123; print(&quot;æœ‰å˜´å”‡&quot;) message += &quot;,æœ‰å˜´å”‡&quot; &#125; if face.hasLeftEyePosition &#123; print(&quot;å·¦çœ¼é•œçš„ä½ç½®æ˜¯ \(face.leftEyePosition)&quot;) message += &quot;,å·¦çœ¼é•œçš„ä½ç½®æ˜¯ \(face.leftEyePosition)&quot; &#125; if face.hasRightEyePosition &#123; print(&quot;å³çœ¼é•œçš„ä½ç½®æ˜¯ \(face.rightEyePosition)&quot;) message += &quot;,å³çœ¼é•œçš„ä½ç½®æ˜¯ \(face.rightEyePosition)&quot; &#125; let alert = UIAlertController(title: &quot;å˜¿å˜¿&quot;, message: message, preferredStyle: .alert) alert.addAction(UIAlertAction(title: &quot;OK&quot;, style: .default, handler: nil)) self.present(alert, animated: true, completion: nil) &#125; else &#123; let alert = UIAlertController(title: &quot;æ²¡è„¸äº†&quot;, message: &quot;æ²¡æœ‰æ£€æµ‹åˆ°è„¸&quot;, preferredStyle: .alert) alert.addAction(UIAlertAction(title: &quot;OK&quot;, style: .default, handler: nil)) self.present(alert, animated: true, completion: nil) &#125; &#125; è¿è¡Œå°±å¯ä»¥è¯†åˆ«ç…§ç‰‡çš„é¢éƒ¨å…·ä½“ç»†èŠ‚CIFaceFeatureè¿˜æä¾›äº†å…¶ä»–å¾ˆå¤šé¢éƒ¨ç»†èŠ‚ï¼š1234567891011121314151617181920212223242526272829open var hasLeftEyePosition: Bool &#123; get &#125;open var leftEyePosition: CGPoint &#123; get &#125;open var hasRightEyePosition: Bool &#123; get &#125;open var rightEyePosition: CGPoint &#123; get &#125;open var hasMouthPosition: Bool &#123; get &#125;open var mouthPosition: CGPoint &#123; get &#125;open var hasTrackingID: Bool &#123; get &#125;open var trackingID: Int32 &#123; get &#125;open var hasTrackingFrameCount: Bool &#123; get &#125;open var trackingFrameCount: Int32 &#123; get &#125;open var hasFaceAngle: Bool &#123; get &#125;open var faceAngle: Float &#123; get &#125;open var hasSmile: Bool &#123; get &#125;open var leftEyeClosed: Bool &#123; get &#125;open var rightEyeClosed: Bool &#123; get &#125; ä»£ç Detector å‚è€ƒï¼šFace Detection in iOS Using Core Image]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[swiftçš„æ–‡æ¡£æ³¨é‡Š]]></title>
    <url>%2F2017%2Fswift-document.html</url>
    <content type="text"><![CDATA[åœ¨Xcodeä¸­Quick Help ä¸ºå¼€å‘è€…æä¾›æ–¹ä¾¿å¿«æ·çš„ç®€æ´æ–‡æ¡£æŸ¥çœ‹æ–¹å¼ã€‚option+ç‚¹å‡»æŸ¥çœ‹å¼¹æ¡†ï¼Œoption+command+2åœ¨æ£€æŸ¥å™¨ä¸­æŸ¥çœ‹ã€‚swiftçš„ä¸­æœ‰ä¸¤ç§æ³¨é‡Šæ–¹å¼ï¼Œè®©Xcodeåœ¨Quick Helpä¸­æ˜¾ç¤ºã€‚è¿™ç§æ³¨é‡Šå¯ä»¥è®¤ä¸ºæ˜¯å°†æ–‡æ¡£ä»¥æŸç§è§„èŒƒçš„æ ¼å¼åµŒå…¥åœ¨å®žé™…ä»£ç çš„ä¸Šæ–¹ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡æŸäº›å·¥å…·è‡ªåŠ¨ç”Ÿæˆæ¼‚äº®çš„æ–‡æ¡£æ–‡ä»¶ã€‚è¿™ç§å†…åµŒå¼çš„æ–‡æ¡£åœ¨çŽ°ä»£ç¼–ç¨‹ä¸­æ˜¯å¾ˆæ™®éçš„ã€‚åœ¨swiftä¸­ï¼Œè¿™ä¸¤ç§æ³¨é‡Šæ–¹å¼æ˜¯ï¼š /** */ /// è¿™äº›æ³¨é‡Šä¸­è¿˜å¯ä»¥æœ‰å…¶ä»–ä¸€äº›è§„èŒƒ å¯ä»¥æ”¯æŒmarkdown å…³é”®è¯ ä¸‰ä¸ªå…³é”®è¯ï¼šparameterï¼Œ returnsï¼Œ throwsã€‚è¿™ä¸‰ä¸ªå…³é”®è¯ä¼šåœ¨æœ€å·¦è¾¹æ˜¾ç¤ºã€‚ è¿˜æœ‰ä¸€äº›å…³é”®è¯ä¼šè¢«æå–åˆ°descriptionä¸­ä½œä¸ºä¸€äº›ç‰¹æ®Šå­—æ®µæ˜¾ç¤ºï¼Œå…¶ä»–éƒ½ä¼šåœ¨descriptionæ­£å¸¸æ˜¾ç¤ºï¼šauthor, authors, copyright, dateï¼›since, versionï¼›attention, important, note, remark, warningï¼›bug, TODO, experimentï¼› complexityï¼› precondition, postcondition, requires, invariant see* å‚è€ƒhttp://swifter.tips/documentation/http://ericasadun.com/2015/06/14/swift-header-documentation-in-xcode-7/]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-21ï¼šExtensions]]></title>
    <url>%2F2017%2Fswift-21.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114/** Extensions ä¸ºä¸€ä¸ªå·²æœ‰çš„ç±»ã€ç»“æž„ä½“ã€æžšä¸¾ç±»åž‹æˆ–è€…åè®®ç±»åž‹æ·»åŠ æ–°åŠŸèƒ½ã€‚ åŒ…æ‹¬åœ¨æ²¡æœ‰æƒé™èŽ·å–åŽŸå§‹æºä»£ç çš„æƒ…å†µä¸‹æ‰©å±•ç±»åž‹çš„èƒ½åŠ›(å³**é€†å‘å»ºæ¨¡**) */// æ‰©å±•å¯ä»¥ä¸ºä¸€ä¸ªç±»åž‹æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¸èƒ½é‡å†™å·²æœ‰çš„åŠŸèƒ½ã€‚// 1 æ‰©å±•è¯­æ³•(Extension Syntax)/** extension SomeType &#123; // ä¸º SomeType æ·»åŠ çš„æ–°åŠŸèƒ½å†™åˆ°è¿™é‡Œ &#125; // æ‰©å±•ä¸€ä¸ªå·²æœ‰ç±»åž‹ï¼Œä½¿å…¶å®žçŽ°ä¸€äº›åè®®ã€‚ extension SomeType: SomeProtocol, AnotherProctocol &#123; // åè®®å®žçŽ°å†™åˆ°è¿™é‡Œ &#125; */// å¦‚æžœä½ é€šè¿‡æ‰©å±•ä¸ºä¸€ä¸ªå·²æœ‰ç±»åž‹æ·»åŠ æ–°åŠŸèƒ½ï¼Œé‚£ä¹ˆæ–°åŠŸèƒ½å¯¹è¯¥ç±»åž‹çš„æ‰€æœ‰å·²æœ‰å®žä¾‹éƒ½æ˜¯å¯ç”¨çš„ï¼Œå³ä½¿å®ƒä»¬æ˜¯åœ¨è¿™ä¸ªæ‰©å±•å®šä¹‰ä¹‹å‰åˆ›å»ºçš„ã€‚// 2 è®¡ç®—åž‹å±žæ€§(Computed Properties)extension Double &#123; var km: Double &#123; return self * 1_000.0 &#125; var m : Double &#123; return self &#125; var cm: Double &#123; return self / 100.0 &#125; var mm: Double &#123; return self / 1_000.0 &#125; var ft: Double &#123; return self / 3.28084 &#125;&#125;let oneInch = 25.4.mm// æ‰©å±•å¯ä»¥æ·»åŠ æ–°çš„è®¡ç®—åž‹å±žæ€§ï¼Œä½†æ˜¯ä¸å¯ä»¥æ·»åŠ å­˜å‚¨åž‹å±žæ€§ï¼Œä¹Ÿä¸å¯ä»¥ä¸ºå·²æœ‰å±žæ€§æ·»åŠ å±žæ€§è§‚å¯Ÿå™¨ã€‚// 3 æž„é€ å™¨(Initializers)struct Size &#123; var width = 0.0, height = 0.0&#125;struct Point &#123; var x = 0.0, y = 0.0&#125;struct Rect &#123; var origin = Point() var size = Size()&#125;let defaultRect = Rect()let memberwiseRect = Rect(origin: Point(x: 2.0, y: 2.0), size: Size(width: 5.0, height: 5.0))extension Rect &#123; init(center: Point, size: Size) &#123; let originX = center.x - (size.width / 2) let originY = center.y - (size.height / 2) self.init(origin: Point(x: originX, y: originY), size: size) &#125;&#125;let centerRect = Rect(center: Point(x: 4.0, y: 4.0), size: Size(width: 3.0, height: 3.0))// 4 æ–¹æ³•(Methods)extension Int &#123; func repetitions(task: () -&gt; Void) &#123; // å°†é—­åŒ…ä¸­çš„ä»»åŠ¡æ‰§è¡Œæ•´æ•°å¯¹åº”çš„æ¬¡æ•° for _ in 0..&lt;self &#123; task() &#125; &#125;&#125;5.repetitions(task: &#123; print(&quot;Hello!&quot;)&#125;)// å¯å˜å®žä¾‹æ–¹æ³•(Mutating Instance Methods)extension Int &#123; mutating func square() &#123; self = self * self &#125;&#125;var someInt = 3someInt.square() // ä¸èƒ½ç›´æŽ¥ç”¨å­—é¢é‡`3.square()`// 5 ä¸‹æ ‡(Subscripts)extension Int &#123; subscript(digitIndex: Int) -&gt;Int &#123; var decimalBase = 1 for _ in 0..&lt;digitIndex &#123; decimalBase *= 10 &#125; return (self/decimalBase) % 10 &#125;&#125;12345678[2]// 6 åµŒå¥—ç±»åž‹(Nested Types)extension Int &#123; enum Kind &#123; case Negative, Zero, Positive &#125; var kind: Kind &#123; switch self &#123; case 0: return .Zero case let x where x &gt; 0: return .Positive default: return .Negative &#125; &#125;&#125;func printIntegerKinds(numbers: [Int]) &#123; for number in numbers &#123; switch number.kind &#123; case .Negative: print(&quot;- &quot;, terminator: &quot;&quot;) case .Zero: print(&quot;0 &quot;, terminator: &quot;&quot;) case .Positive: print(&quot;+ &quot;, terminator: &quot;&quot;) &#125; &#125; print(&quot;&quot;)&#125;printIntegerKinds(numbers: [3, 19, -27, 0, -6, 0, 7])]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 9 Table Rowçš„åˆ é™¤, UITableViewRowActionå’ŒUIActivityViewControllerçš„ä½¿ç”¨]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-9.html</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 8 Table Viewå’ŒUIAlertControllerçš„äº¤äº’æ˜¯Table Rowé€‰æ‹©çš„æ“ä½œï¼Œè¿™ä¸€ç¯‡ç»§ç»­ä¸Šä¸€ç¯‡çš„ä»£ç å®žçŽ°åˆ é™¤æ“ä½œã€‚ æ»‘åŠ¨åˆ é™¤ å®žçŽ°UITableViewDataSourceä¸­ç›¸åº”æ–¹æ³•ï¼š123override func tableView(_ tableView: UITableView, commit editingStyle: UITableViewCellEditingStyle, forRowAt indexPath: IndexPath) &#123; &#125; æ­¤æ—¶æ»‘åŠ¨æœ‰åˆ é™¤æŒ‰é’®ï¼š åˆ é™¤æ•°æ®123456789override func tableView(_ tableView: UITableView, commit editingStyle: UITableViewCellEditingStyle, forRowAt indexPath: IndexPath) &#123; if editingStyle == .delete &#123; restaurantNames.remove(at: indexPath.row) restaurantLocations.remove(at: indexPath.row) restaurantTypes.remove(at: indexPath.row) restaurantIsVisited.remove(at: indexPath.row) restaurantImages.remove(at: indexPath.row) &#125;&#125; UITableViewCellEditingStyleæœ‰ä¸¤ç§insertå’Œdeleteã€‚è¿è¡ŒåŽå‘çŽ°åˆ é™¤åŠ¨ä½œåŽï¼Œç›¸åº”çš„table view rowè¢«æ²¡æœ‰æ¶ˆå¤±ï¼Œå› ä¸ºä¸Šé¢çš„åˆ é™¤åªæ˜¯åˆ é™¤äº†ç›¸åº”æ•°ç»„ä¸­çš„æ•°æ®ï¼Œå¹¶æ²¡æœ‰åœ¨è§†å›¾ä¸Šæ˜¾ç¤ºï¼Œå¦‚è¦é‡æ–°åŠ è½½æ‰ä¼šåˆ é™¤ã€‚ é‡æ–°åŠ è½½UITableViewåœ¨tableView(_:commit:forRowAt:)åŽæ·»åŠ ï¼štableView.reloadData()å¦å¤–ï¼Œæ›´å¥½çš„åˆ·æ–°table viewçš„æ–¹æ³•æ˜¯ä½¿ç”¨UITableViewçš„deleteRows(at:with:)æ–¹æ³•ï¼Œè¿˜æœ‰åŠ¨ç”»æ•ˆæžœï¼štableView.deleteRows(at: [indexPath], with: .fade) ç”¨UITableViewRowActionä¸ºæ»‘åŠ¨äº§ç”Ÿæ›´å¤šåŠ¨ä½œ1234567891011121314151617181920212223override func tableView(_ tableView: UITableView, editActionsForRowAt indexPath: IndexPath) -&gt; [UITableViewRowAction]? &#123; // 1 let shareAction = UITableViewRowAction(style: .default, title: &quot;Share&quot;, handler: &#123; (action, indexPath) -&gt; Void in // 3 let defaultText = &quot;Just checking in at &quot; + self.restaurantNames[indexPath.row] let activityController = UIActivityViewController(activityItems: [defaultText], applicationActivities: nil) self.present(activityController, animated: true, completion: nil) &#125;) // 1 let deleteAction = UITableViewRowAction(style: .default, title: &quot;Delete&quot;, handler: &#123; (action, indexPath) -&gt; Void in self.restaurantNames.remove(at: indexPath.row) self.restaurantLocations.remove(at: indexPath.row) self.restaurantTypes.remove(at: indexPath.row) self.restaurantIsVisited.remove(at: indexPath.row) self.restaurantImages.remove(at: indexPath.row) &#125;) // 2 return [deleteAction, shareAction] &#125; 1 UITableViewRowActionçš„ç”¨æ³•å’ŒUIAlertActionç±»ä¼¼ã€‚styleç›¸åŒï¼Œå…·ä½“åŠŸèƒ½æ˜¯åœ¨å›žè°ƒé—­åŒ…ä¸­å®žçŽ°çš„ã€‚ UIActivityViewControllerç»§æ‰¿æ˜¯UIViewControllerï¼Œæä¾›ä¸€äº›æœåŠ¡ï¼Œä¾‹å¦‚æ‹·è´åˆ°å‰ªè´´æ¿ï¼Œåˆ†äº«å†…å®¹åˆ°ç¤¾äº¤åª’ä½“ï¼Œé€šè¿‡Messageså‘é€é¡¹ç›®ç­‰ã€‚ ä¸€æ—¦å®žçŽ°äº†tableView(_:editActionsForRowAt:)æ–¹æ³•ï¼ŒtableView(_:commit:forRowAt:)æ–¹æ³•äº§ç”ŸdeleteæŒ‰é’®å°†ä¸å†äº§ç”Ÿï¼Œæ‰€ä»¥è¦åœ¨tableView(_:commit:forRowAt:)ä¸­æ·»åŠ deleteæŒ‰é’®ã€‚ 2 è¿”å›žçš„UITableViewRowActionçš„æ•°ç»„ï¼Œactionçš„æ˜¾ç¤ºé¡ºåºæ˜¯ï¼ŒæŒ‰ç…§æ•°ç»„çš„é¡ºåºåœ¨å±å¹•ä»Žæœ‰åˆ°å·¦æ˜¾ç¤ºã€‚ 3 defaultTextæ˜¯åˆ†äº«çš„å†…å®¹ï¼Œä¸ä»…å¯ä»¥æ˜¯æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥æ·»åŠ å›¾ç‰‡å¯¹è±¡UIImageã€‚æ­¤å¤„ä»£ç ä¿®æ”¹ä¸€ä¸‹ï¼š12345let defaultText = &quot;Just checking in at &quot; + self.restaurantNames[indexPath.row]if let imageToShare = UIImage(named: self.restaurantImages[indexPath.row]) &#123; let activityController = UIActivityViewController(activityItems: [defaultText, imageToShare], applicationActivities: nil) self.present(activityController, animated: true, completion: nil)&#125; å®šåˆ¶UITableViewRowActionå¯ä»¥ä¿®æ”¹èƒŒæ™¯é¢œè‰²ï¼š1234shareAction.backgroundColor = UIColor(red: 48.0/255.0, green: 173.0/255.0, blue: 99.0/255.0, alpha: 1.0) deleteAction.backgroundColor = UIColor(red: 202.0/255.0, green: 202.0/255.0, blue: 203.0/255.0, alpha: 1.0) ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 8 Table Viewå’ŒUIAlertControllerçš„äº¤äº’]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-8.html</url>
    <content type="text"><![CDATA[ç»§ç»­ä¸Šä¸€éƒ¨åˆ†å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 7 å®šåˆ¶Table Viewsé¡¹ç›®FoodPinçš„ä»£ç ï¼Œæ·»åŠ ä¸¤ä¸ªåŠŸèƒ½ï¼š ç‚¹å‡»cellæ—¶ï¼Œäº§ç”Ÿå¼¹æ¡†ï¼Œå¼¹æ¡†ä¸­æœ‰ä¸¤ä¸ªåŠŸèƒ½é€‰é¡¹ Call å’Œ Check-in å½“ç‚¹å‡»Check-iné€‰é¡¹æ—¶ï¼Œä¸ºcellåŠ ä¸Šå¯¹å· ç†è§£UITableViewDelegateåè®®ä»£ç†æ¨¡å¼åœ¨iOSç¼–ç¨‹ä¸­éžå¸¸å¸¸è§çš„ã€‚æ¯ä¸ªä»£ç†è´Ÿè´£ç‰¹å®šçš„è§’è‰²æˆ–ä»»åŠ¡ï¼Œç»´æŒç³»ç»Ÿçš„ç®€å•å’Œå¹²å‡€ã€‚å½“ä¸€ä¸ªå¯¹è±¡éœ€è¦å®Œæˆç‰¹å®šä»»åŠ¡æ—¶ï¼Œå¯ä»¥ä¾é å¦ä¸€ä¸ªå¯¹è±¡å®Œæˆã€‚è¿™åœ¨è½¯ä»¶è®¾è®¡æ¨¡å¼ä¸­é€šå¸¸å«åšâ€œseparation of concernsâ€ã€‚UITableViewControllerå°±åº”ç”¨äº†ä»£ç†æ¨¡å¼ã€‚ä¸¤ä¸ªåè®®å®Œæˆä¸åŒçš„ä»»åŠ¡ã€‚UITableViewDataSourceåè®®è´Ÿè´£æä¾›å’Œç®¡ç†tableçš„æ•°æ®ã€‚UITableViewDelegateåè®®è´Ÿè´£è®¾ç½®tableçš„section headings å’Œ footersï¼Œä»¥åŠæ“ä½œcell selectionså’Œcell recordingã€‚ é˜…è¯»æ–‡æ¡£ æ€Žä¹ˆçŸ¥é“UITableViewDelegateä¸­æœ‰é‚£äº›æ–¹æ³•å‘¢ï¼Ÿ é˜…è¯»Appleçš„å®˜æ–¹iOSå¼€å‘æ–‡æ¡£(https://developer.apple.com/library/ios/))ã€‚ä½œä¸ºiOSå¼€å‘è€…ï¼Œéœ€è¦ç»å¸¸é˜…è¯»API æ–‡æ¡£ã€‚ç›®å‰æ²¡æœ‰å•ä¸ªçš„ä¹¦ç±å¯è¦†ç›–æ‰€æœ‰iOS SDKã€‚ Xcodeä¸­æä¾›æ–¹ä¾¿çš„æŸ¥çœ‹æ–‡æ¡£çš„æ–¹æ³•ï¼Œåœ¨ç›¸å…³ä»£ç å¤„option+ç‚¹å‡»ï¼Œå‡ºçŽ°å¼¹æ¡†å±•ç¤ºæ–‡æ¡£ç®€ä»‹ï¼Œå†åœ¨å¼¹æ¡†ä¸Šç‚¹å‡»ç›¸å…³ä»£ç å°±ç›´æŽ¥è¿›å…¥è¯¦ç»†æ–‡æ¡£å¤„ã€‚æ–‡æ¡£å¯¹ä¸åŒæ–¹æ³•è¿›è¡Œäº†åˆ†ç±»ï¼Œæ¯”å¦‚UITableViewDelegateçš„æ–‡æ¡£å°±æœ‰ä¸Šé¢æåˆ°çš„Managing Selectionsï¼š12func tableView(UITableView, willSelectRowAt: IndexPath)func tableView(UITableView, didSelectRowAt: IndexPath) å®žçŽ°åè®®ä¸­ç®¡ç†åˆ—é€‰é¡¹æ–¹æ³• åœ¨RestaurantTableViewControllerç±»ä¸­å®žçŽ°tableView(_:didSelectRowAt:)æ–¹æ³•ï¼š 123456789101112override func tableView(_ tableView: UITableView, didSelectRowAt indexPath:IndexPath) &#123; // 1 let optionMenu = UIAlertController(title: nil, message: &quot;What do you wantto do?&quot;, preferredStyle: .actionSheet) // 2 let cancelAction = UIAlertAction(title: &quot;Cancel&quot;, style: .cancel, handler:nil) optionMenu.addAction(cancelAction) // 3 present(optionMenu, animated: true, completion: nil)&#125; 1 åˆ›å»ºäº†UIAlertControllerã€‚UIAlertControlleræ˜¯ä»ŽiOS8è¢«å¼•å…¥ï¼Œç”¨æ¥æ›¿ä»£ä»¥å‰çš„UIAlertViewå’ŒUIActionSheetï¼Œå‘ç”¨æˆ·å¼¹å‡ºè­¦ç¤ºä¿¡æ¯ï¼›preferredStyleå‚æ•°æœ‰ä¸¤ä¸ªå€¼ï¼š.actionSheet å’Œ .alertï¼Œè¡¨ç¤ºæ›¿ä»£çš„ä¸¤ç§æ ·å¼ã€‚ 2 åˆ›å»ºä¸€ä¸ªcancelæ ·å¼çš„UIAlertActionã€‚UIAlertControllerçš„è­¦ç¤ºå¼¹å‡ºæ¡†ä¸€èˆ¬æ˜¯ç”±æœ€ä¸Šé¢çš„title+messageï¼ˆéƒ½ä¸æ˜¯éžå¿…é¡»çš„ï¼‰å’Œä¸€äº›Actionç»„æˆï¼Œcancel actionåœ¨æœ€ä¸‹é¢ã€‚ 3 presentæ˜¯UIViewControllerä¸­çš„æ–¹æ³•ï¼Œç”¨äºŽå±•ç¤ºã€‚ æ·»åŠ Actionsåˆ°ALert Controllerä¸­ Call action1234567891011let callActionHandler = &#123; (action:UIAlertAction!) -&gt; Void in let alertMessage = UIAlertController(title: &quot;Service Unavailable&quot;, message:&quot;Sorry, the call feature is not available yet. Please retry later.&quot;,preferredStyle: .alert) alertMessage.addAction(UIAlertAction(title: &quot;OK&quot;, style: .default, handler:nil)) self.present(alertMessage, animated: true, completion: nil)&#125;let callAction = UIAlertAction(title: &quot;Call &quot; + &quot;123-000-\(indexPath.row)&quot;,style: .default, handler: callActionHandler)optionMenu.addAction(callAction) callActionHandleræ˜¯swifté—­åŒ…ç»“æž„çš„ä¸€ç§å†™æ³•ï¼Œå…³äºŽé—­åŒ…å¯æŸ¥çœ‹ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-7ï¼šClosureã€‚è¿™ä¸ªä»£ç å—åœ¨Call actionè¢«ç‚¹å‡»æ˜¯æ‰§è¡Œã€‚ Check-in action12345678// Check-in actionlet checkInAction = UIAlertAction(title: &quot;Check in&quot;, style: .default, handler:&#123; (action:UIAlertAction!) -&gt; Void in let cell = tableView.cellForRow(at: indexPath) cell?.accessoryType = .checkmark&#125;)optionMenu.addAction(checkInAction) å½“ç”¨æˆ·ç‚¹å‡»â€œCheck inâ€actionæ—¶ï¼Œä¸ºé€‰ä¸­çš„cellå¢žåŠ ä¸€ä¸ªå¯¹å·ï¼Œè¡¨æ˜Žæ˜¯ç”¨æˆ·å–œæ¬¢çš„ã€‚accessoryTypeåŒ…æ‹¬disclosureIndicator, detailDisclosureButton, checkmark å’Œ detailButtonã€‚å½“cellè¢«é€‰ä¸­åŽï¼Œè¿™ä¸ªcellä¼šä¸€ç›´ç°è‰²é«˜äº®ã€‚åŽ»æŽ‰ï¼štableView.deselectRow(at: indexPath, animated: false) è§£å†³BugçŽ°åœ¨åº”ç”¨è¿è¡ŒåŽï¼Œcheck-inæŸä¸€cellæ—¶ï¼Œå¯èƒ½ä¼šå‡ºçŽ°å…¶ä»–cellåŒæ—¶ä¹Ÿè¢«check-inã€‚è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºcellé‡å¤ä½¿ç”¨å¯¼è‡´çš„ã€‚å½“ä¸€ä¸ªå±å¹•æ»šåŠ¨æ—¶ï¼Œæ–°è¿›çš„cellå°±ä¼šåˆ©ç”¨æ»šå‡ºçš„å¾—cellï¼Œä»¥æé«˜æ•ˆçŽ‡ã€‚è§£å†³æ–¹æ³•ï¼šä¸ºæ¯ä¸ªcellåˆ›é€ ä¸€ä¸ªæ˜¯å¦è¢«check-inçš„æ ‡å¿—ã€‚ åœ¨RestaurantTableViewControllerä¸­åˆ›å»ºä¸€ä¸ªBooleanç±»åž‹çš„æ•°ç»„ï¼švar restaurantIsVisited = Array(repeating: false, count: 21) check-inåŽå°±æŠŠå¯¹åº”çš„æ ‡å¿—ä¿®æ”¹ä¸ºtrueï¼š 1234567let checkInAction = UIAlertAction(title: &quot;Check in&quot;, style: .default, handler:&#123; (action:UIAlertAction!) -&gt; Void in let cell = tableView.cellForRow(at: indexPath) cell?.accessoryType = .checkmark self.restaurantIsVisited[indexPath.row] = true&#125; åœ¨æ¯ä¸€æ¬¡ç”Ÿæˆcellæ˜¯ä¹Ÿè¦æ£€æŸ¥æ˜¯å¦check-inï¼Œåœ¨tableView(_:cellForRowAt:)æ”¾çš„return cellä¹‹å‰åŠ å…¥ï¼šcell.accessoryType = restaurantIsVisited[indexPath.row] ? .checkmark : .none ç»ƒä¹ å½“é€‰ä¸­ä¹Ÿè¢«check-inçš„cellæ—¶ï¼Œcheck-in Actionçš„æ–‡æœ¬å˜æˆUndo Check inï¼Œç‚¹å‡»åŽå–æ¶ˆå…¶å¯¹å·ã€‚ä¿®ä¸€ä¸‹check-inä»£ç ï¼š123456789101112131415161718let cell = tableView.cellForRow(at: indexPath)if cell?.accessoryType == .checkmark &#123; let checkInAction = UIAlertAction(title: &quot;Undo Check in&quot;, style: .default, handler: &#123; (action:UIAlertAction!) -&gt; Void in cell?.accessoryType = .none self.restaurantIsVisited[indexPath.row] = false &#125;) optionMenu.addAction(checkInAction)&#125; else &#123; let checkInAction = UIAlertAction(title: &quot;Check in&quot;, style: .default, handler: &#123; (action:UIAlertAction!) -&gt; Void in cell?.accessoryType = .checkmark self.restaurantIsVisited[indexPath.row] = true &#125;) optionMenu.addAction(checkInAction)&#125; ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-20ï¼šNested Types(åµŒå¥—ç±»åž‹)]]></title>
    <url>%2F2017%2Fswift-20.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445/** Nested Types åµŒå¥—ç±»åž‹ */// 1 ðŸŒ°struct BlackjackCard &#123; // äºŒåä¸€ç‚¹ // nested Suit enumeration enum Suit: Character &#123; // æè¿°æ‰‘å…‹ç‰Œçš„å››ç§èŠ±è‰² case spades = &quot;â™ &quot;, hearts = &quot;â™¡&quot;, diamonds = &quot;â™¢&quot;, clubs = &quot;â™£&quot; &#125; // nested Rank enumeration enum Rank: Int &#123; case two = 2, three, four, five, six, seven, eight, nine, ten case jack, queen, king, ace struct Values &#123; // ç”¨æ¥åæ˜ Aceçš„ä¸¤ä¸ªæ•°å€¼() let first: Int, second: Int? &#125; var values: Values &#123; switch self &#123; case .ace: return Values(first: 1, second: 11) case .jack, .queen, .king: return Values(first: 10, second: nil) default: return Values(first: self.rawValue, second: nil) &#125; &#125; &#125; // BlackjackCard properties and methods let rank: Rank, suit: Suit var description: String &#123; var output = &quot;suit is \(suit.rawValue),&quot; output += &quot; value is \(rank.values.first)&quot; if let second = rank.values.second &#123; output += &quot; or \(second)&quot; &#125; return output &#125;&#125;let theAceOfSpades = BlackjackCard(rank: .ace, suit: .spades)print(&quot;theAceOfSpades: \(theAceOfSpades.description)&quot;)// 2 å¼•ç”¨åµŒå¥—ç±»åž‹let heartsSymbol = BlackjackCard.Suit.hearts.rawValue]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 7 å®šåˆ¶Table Views]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-7.html</url>
    <content type="text"><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 6 åˆ›å»ºç®€å•çš„Table Based Appæ˜¯basicé£Žæ ¼çš„Tableï¼Œè¿™ä¸€éƒ¨åˆ†å°†ï¼š ä½¿ç”¨UITableViewController ä»£æ›¿ UITableView å±•ç¤ºtable view cellä¸­ä¸åŒçš„å›¾ç‰‡æ˜¾ç¤ºæ–¹å¼ è®¾è®¡å®šåˆ¶çš„table view cellæ¥æ›¿ä»£basicçš„table view cell ä½¿ç”¨UITableViewControlleræ–°å»ºä¸€ä¸ªTable View App æ–°å»ºé¡¹ç›®FoodPinï¼Œæ¨¡æ¿ä¸ºâ€Single View applicationâ€ åˆ é™¤Main.storyboardä¸­çš„ view controllerï¼Œåˆ é™¤ViewController.swift æ‹–åŠ¨ä¸€ä¸ªTable View Controlleråˆ°IBä¸­ï¼Œé€‰ä¸­å…¶Is Initial View Controller æ–°å»ºç±»RestaurantTableViewControllerï¼Œç»§æ‰¿è‡³UITableViewControllerã€‚å°†Table View Controllerçš„Classå±žæ€§è®¾ç½®ä¸ºRestaurantTableViewControllerã€‚ åœ¨simpletable-image1.zipå’Œsimpletable-image2.zipå¤„ä¸‹è½½å›¾ç‰‡ï¼Œæ‹–åˆ°asset catalog åœ¨ç±»RestaurantTableViewControllerä¸­æ·»åŠ ä»¥å˜é‡ 1var restaurantNames = [&quot;Cafe Deadend&quot;, &quot;Homei&quot;, &quot;Teakha&quot;, &quot;Cafe Loisl&quot;, &quot;PetiteOyster&quot;, &quot;For Kee Restaurant&quot;, &quot;Po&apos;s Atelier&quot;, &quot;Bourke Street Bakery&quot;, &quot;Haigh&apos;sChocolate&quot;, &quot;Palomino Espresso&quot;, &quot;Upstate&quot;, &quot;Traif&quot;, &quot;Graham Avenue Meats&quot;,&quot;Waffle &amp; Wolf&quot;, &quot;Five Leaves&quot;, &quot;Cafe Lore&quot;, &quot;Confessional&quot;, &quot;Barrafina&quot;,&quot;Donostia&quot;, &quot;Royal Oak&quot;, &quot;CASK Pub and Kitchen&quot;] åœ¨ç±»RestaurantTableViewControllerä¸­æ·»åŠ ä»£ç ï¼š 123456789override func tableView(_ tableView: UITableView, cellForRowAt indexPath:IndexPath) -&gt; UITableViewCell &#123; let cellIdentifier = &quot;Cell&quot; let cell = tableView.dequeueReusableCell(withIdentifier: cellIdentifier,for: indexPath) // Configure the cell... cell.textLabel?.text = restaurantNames[indexPath.row] cell.imageView?.image = UIImage(named: &quot;restaurant.jpg&quot;)return cell &#125; æ’å…¥ä»£ç  123456789101112131415161718 override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cellIdentifier = &quot;Cell&quot; let cell = tableView.dequeueReusableCell(withIdentifier: cellIdentifier, for: indexPath) // Configure the cell... cell.textLabel?.text = restaurantNames[indexPath.row] cell.imageView?.image = UIImage(named: &quot;restaurant.jpg&quot;) return cell &#125; override func numberOfSections(in tableView: UITableView) -&gt; Int &#123; return 1 &#125; override func tableView(_ tableView: UITableView, numberOfRowsInSectionsection: Int) -&gt; Int &#123; return restaurantNames.count &#125; åœ¨ç±»RestaurantTableViewControllerä¸­åŠ å…¥å›¾ç‰‡åç§°å˜é‡ï¼š 123456var restaurantImages = [&quot;cafedeadend.jpg&quot;, &quot;homei.jpg&quot;, &quot;teakha.jpg&quot;,&quot;cafeloisl.jpg&quot;, &quot;petiteoyster.jpg&quot;, &quot;forkeerestaurant.jpg&quot;, &quot;posatelier.jpg&quot;,&quot;bourkestreetbakery.jpg&quot;, &quot;haighschocolate.jpg&quot;, &quot;palominoespresso.jpg&quot;,&quot;upstate.jpg&quot;, &quot;traif.jpg&quot;, &quot;grahamavenuemeats.jpg&quot;, &quot;wafflewolf.jpg&quot;,&quot;fiveleaves.jpg&quot;, &quot;cafelore.jpg&quot;, &quot;confessional.jpg&quot;, &quot;barrafina.jpg&quot;,&quot;donostia.jpg&quot;, &quot;royaloak.jpg&quot;, &quot;caskpubkitchen.jpg&quot;] å¹¶ä¿®æ”¹å¯¹åº”ä»£ç ï¼šcell.imageView?.image = UIImage(named: restaurantImages[indexPath.row]) å®šåˆ¶Table View Cells ä¿®æ”¹Table View Cellçš„Sytleå˜ä¸ºCustomï¼ŒIdentifierä¸ºCell ä¿®æ”¹Table View çš„Row Heightä¸º80 ç¡®è®¤Table View Cell çš„Customè¢«é€‰æ‹©å’ŒRow Heightä¸º80 æ‹–åŠ¨image viewåˆ°Cellä¸­ æ‹–åŠ¨ä¸‰ä¸ªlabelåˆ°Cellä¸­ï¼Œæ–‡æœ¬åˆ†åˆ«æ˜¯Nameï¼ŒLocationï¼ŒTypeã€‚Name çš„fontä¸ºHeadlineï¼›Locationçš„font styleä¸ºLightï¼Œfont sizeä¸º14ï¼Œfont colorä¸ºDark Grayï¼›Type**font styleä¸ºLightï¼Œfont size**ä¸º13ã€‚ æŠŠä¸‰ä¸ªlabelè®¾ç½®æˆä¸€ä¸ªvertical stack viewï¼Œå…¶spacingä¸º1 æŠŠvertical stack viewå’ŒImage Viewè®¾ç½®æˆä¸€ä¸ªhorizontal stack viewï¼Œå…¶spacingä¸º10 ä¸ºvertical stack viewè®¾ç½®ä¸Šä¸‹å·¦å³è¾¹è·çº¦æŸï¼›ä¸ºå›¾ç‰‡è®¾ç½®å®½å’Œé«˜çš„çº¦æŸ å¤„ç†çº¦æŸé—®é¢˜ ä¸ºCustom Cellåˆ›å»ºç±» åˆ›å»ºç»§æ‰¿è‡³UITableViewCellçš„ç±»RestaurantTableViewCell åœ¨RestaurantTableViewCellä¸­å»ºç«‹å››ä¸ªoutletï¼Œåˆ†åˆ«å¯¹åº”å›¾ç‰‡å’Œä¸‰ä¸ªlabel 1234@IBOutlet var nameLabel: UILabel!@IBOutlet var locationLabel: UILabel!@IBOutlet var typeLabel: UILabel!@IBOutlet var thumbnailImageView: UIImageView! å»ºç«‹ä»£ç ä¸­æŽ¥å£ä¸Žstoryboardä¹‹é—´çš„è”ç³» ä¿®æ”¹Table View Controllerä»£ç  ç”±äºŽå·²ç»ä¸ºCustom Cellåˆ›å»ºäº†ç±»RestaurantTableViewCellï¼Œæ‰€ä»¥Table View Controllerä¸­ç”ŸæˆCellçš„å¾…ä¿®æ”¹ä¸ºï¼š 12let cell = tableView.dequeueReusableCell(withIdentifier: cellIdentifier, for: indexPath) as! RestaurantTableViewCell ç”±äºŽCellçš„é£Žæ ¼ä¸æ˜¯sytleäº†ï¼Œè€Œæ˜¯å®šåˆ¶çš„ï¼Œæ‰€ä»¥æ–‡æœ¬å’Œå›¾ç‰‡ä»£ç è¦åšå‡ºä¿®æ”¹ï¼š 12cell.nameLabel.text = restaurantNames[indexPath.row]cell.thumbnailImageView.image = UIImage(named: restaurantImages[indexPath.row]) å›¾ç‰‡åœ†è§’ å¯é€šè¿‡UIViewçš„layerå±žæ€§ï¼ˆCALayerï¼‰ä¿®æ”¹å›¾ç‰‡åœ†è„šï¼ŒcornerRadiusè¡¨ç¤ºåœ†è§’çš„åŠå¾„ï¼Œç”±äºŽå›¾ç‰‡çš„å°ºå¯¸æ˜¯60*60ï¼Œæ‰€ä»¥åœ†è§’çš„åŠå¾„è®¾ç½®ä¸º30åŽï¼Œå›¾ç‰‡çœ‹ä¸ŠåŽ»æ˜¯ä¸ªåœ†ã€‚12cell.thumbnailImageView.layer.cornerRadius = 30.0cell.thumbnailImageView.clipsToBounds = true ç»ƒä¹  æ·»åŠ â€œTypeâ€å’Œâ€œLocationâ€ã€‚æ·»åŠ å¦‚ä¸‹ä¸¤ä¸ªæ•°ç»„å˜é‡ï¼š1234var restaurantLocations = [&quot;Hong Kong&quot;, &quot;Hong Kong&quot;, &quot;Hong Kong&quot;, &quot;Hong Kong&quot;, &quot;Hong Kong&quot;, &quot;Hong Kong&quot;, &quot;Hong Kong&quot;, &quot;Sydney&quot;, &quot;Sydney&quot;, &quot;Sydney&quot;, &quot;NewYork&quot;, &quot;New York&quot;, &quot;New York&quot;, &quot;New York&quot;, &quot;New York&quot;, &quot;New York&quot;, &quot;New York&quot;, &quot;London&quot;, &quot;London&quot;, &quot;London&quot;, &quot;London&quot;] var restaurantTypes = [&quot;Coffee &amp; Tea Shop&quot;, &quot;Cafe&quot;, &quot;Tea House&quot;, &quot;Austrian Causual Drink&quot;, &quot;French&quot;, &quot;Bakery&quot;, &quot;Bakery&quot;, &quot;Chocolate&quot;, &quot;Cafe&quot;, &quot;American Seafood&quot;, &quot;American&quot;, &quot;American&quot;, &quot;Breakfast &amp; Brunch&quot;, &quot;Coffee &amp; Tea&quot;, &quot;Coffee &amp; Tea&quot;, &quot;Latin American&quot;, &quot;Spanish&quot;, &quot;Spanish&quot;, &quot;Spanish&quot;, &quot;British&quot;, &quot;Thai&quot;] ç„¶åŽå†åœ¨Cellæ—¶èµ‹å€¼å³å¯ï¼š12cell.locationLabel.text = restaurantLocations[indexPath.row] cell.typeLabel.text = restaurantTypes[indexPath.row] é‡æ–°è®¾è®¡ç•Œé¢ï¼š ä¿®æ”¹Table Viewå’ŒTable View Cellçš„Row Heightéƒ½ä¸º300ã€‚ é‡æ–°è®¾è®¡å›¾ç‰‡ä¸Žlabelçš„ä¹‹é—´çš„å±‚æ¬¡ç»“æž„ï¼Œå¹¶ä¿®æ”¹å›¾ç‰‡çš„å¤§å°å’Œå…¶ä»–ä¸€äº›çº¦æŸã€‚ åˆ é™¤å›¾ç‰‡åœ†è§’ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-19ï¼šType Casting(ç±»åž‹è½¬æ¢)]]></title>
    <url>%2F2017%2Fswift-19.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift /** Type Casting(ç±»åž‹è½¬æ¢) `is` `as` */ // 1 å®šä¹‰ä¸€ä¸ªç±»å±‚æ¬¡ä½œä¸ºä¾‹å­ class MediaItem { var name: String init(name: String) { self.name = name } } class Movie: MediaItem { var director: String init(name: String, director: String) { self.director = director super.init(name: name) } } class Song: MediaItem { var artist: String init(name: String, artist: String) { self.artist = artist super.init(name: name) } } let library = [ Movie(name: &quot;Casablanca&quot;, director: &quot;Michael Curtiz&quot;), Song(name: &quot;Blue Suede Shoes&quot;, artist: &quot;Elvis Presley&quot;), Movie(name: &quot;Citizen Kane&quot;, director: &quot;Orson Welles&quot;), Song(name: &quot;The One And Only&quot;, artist: &quot;Chesney Hawkes&quot;), Song(name: &quot;Never Gonna Give You Up&quot;, artist: &quot;Rick Astley&quot;) ] // æ•°ç»„ library çš„ç±»åž‹è¢«æŽ¨æ–­ä¸º [MediaItem] for v in library { // v åœ¨æ­¤å¤„æ˜¯ MediaItem ç±»åž‹ print(v.name) } // 2 æ£€æŸ¥ç±»åž‹(Checking Type) `is` var movieCount = 0 var songCount = 0 for item in library { if (item is Movie) { movieCount += 1 } else if (item is Song) { songCount += 1 } } // 3 å‘ä¸‹è½¬åž‹(Downcasting) `as?` `as!` // æ¡ä»¶å½¢å¼(conditional form) as? è¿”å›žä¸€ä¸ªä½ è¯•å›¾å‘ä¸‹è½¬æˆçš„ç±»åž‹çš„å¯é€‰å€¼(optional value) // å¼ºåˆ¶å½¢å¼ as! æŠŠè¯•å›¾å‘ä¸‹è½¬åž‹å’Œå¼ºåˆ¶è§£åŒ…(force-unwraps)è½¬æ¢ç»“æžœç»“åˆä¸ºä¸€ä¸ªæ“ä½œã€‚ for item in library { if let movie = item as? Movie { print(&quot;Movie: &apos;\(movie.name)&apos;, dir. \(movie.director)&quot;) } else if let song = item as? Song { print(&quot;Song: &apos;\(song.name)&apos;, by \(song.artist)&quot;) } } // 4 Anyå’ŒAnyObjectçš„ç±»åž‹è½¬æ¢ // AnyObjectå¯ä»¥è¡¨ç¤ºä»»ä½•ç±»ç±»åž‹çš„å®žä¾‹ // Anyå¯ä»¥è¡¨ç¤ºä»»ä½•ç±»åž‹ï¼ŒåŒ…æ‹¬å‡½æ•°ç±»åž‹]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Xcodeä¸­Sceneé‡Œçš„åç§°]]></title>
    <url>%2F2017%2Fxcode-scene-name.html</url>
    <content type="text"><![CDATA[é»˜è®¤çš„Sceneåç§° Xcodeä¸­æ–°å»ºä¸€ä¸ªæŽ§åˆ¶å™¨å¯¹è±¡åŽä¼šäº§ç”Ÿä¸€ä¸ªSceneï¼Œè€ŒSceneçš„åç§°å°±ä¸Žå…¶å…³è”çš„æŽ§åˆ¶å™¨åç§°ç›¸å…³ï¼Œæ¯”å¦‚é»˜è®¤çš„View Controllerçš„å¯¹è±¡çš„Sceneçš„åç§°å°±æ˜¯View Controller Sceneã€‚ å¦‚æžœæŠŠæŽ§åˆ¶å™¨æ”¹æˆSFSafariViewControllerï¼Œé‚£ä¹ˆSceneçš„åå­—å°±ä¼šå˜æˆSafari View Sceneã€‚ å¦‚æžœæŠŠæŽ§åˆ¶å™¨æ”¹æˆè‡ªå»ºçš„ï¼ŒSceneåå­—ä¹Ÿä¼šéšç€å˜åŒ–ï¼Œæ¯”å¦‚ASAndyViewControllerå¯¹åº”çš„Sceneåå­—æ˜¯ Andy View Scene æ€»çš„æ¥è¯´ï¼Œappleåœ¨ç¨‹åºä¸­ä»£ç å‘½åè§„èŒƒï¼Œä¸€èˆ¬æ˜¯å‰é¢è¿žç»­å¤§å†™çš„æ˜¯æ¡†æž¶åç§°ï¼Œç„¶åŽåŽé¢ä½¿ç”¨é©¼å³°å‘½åæ³•ã€‚è¦æ˜¾ç¤ºæ—¶å°±æŠŠæ¡†æž¶å‰ç¼€åŽ»æŽ‰ï¼Œç„¶åŽæ ¹æ®é©¼å³°å‘½åè§„åˆ™åˆ†éš”æ˜¾ç¤ºã€‚ è‡ªå®šä¹‰Sceneçš„åç§°Sceneçš„åç§°ä¹Ÿæ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ï¼Œåœ¨å…¶å±žæ€§æ£€æŸ¥å™¨ä¸­ï¼Œä¿®æ”¹titleå³å¯ï¼Œå½“ç„¶è¿™ç§ä¿®æ”¹åªæ˜¯åœç•™åœ¨IBä¸­ï¼Œä¸ºäº†å¼€å‘æ—¶ä¾¿äºŽæŸ¥çœ‹ï¼Œä¸å½±å“ä»£ç ä¸­çš„åç§°ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOS tutorial 1ï¼š è¯†åˆ«äºŒç»´ç ï¼ˆswift3ï¼‰]]></title>
    <url>%2F2017%2Fios-tutorial-1-arcode.html</url>
    <content type="text"><![CDATA[è¿™æ˜¯ä¸€ç¯‡ä½¿ç”¨AVFoundationæ¡†æž¶è¯†åˆ«äºŒç»´ç çš„æ–‡ç« ï¼ŒåŽŸæ–‡æä¾›äº†åˆå§‹åŒ–é¡¹ç›®QRCodeReaderStarterï¼Œæˆ‘é‡æ–°å»ºç«‹é¡¹ç›®ï¼Œå›¾ç‰‡æ˜¯ä»ŽåŽŸæ–‡æä¾›çš„åˆå§‹åŒ–é¡¹ç›®ä¸­copyçš„ã€‚ åˆå§‹åŒ–é¡¹ç›® æ–°å»ºä¸€ä¸ªåä¸ºQRCodeReaderçš„å•é¡µé¡¹ç›® åˆ é™¤ViewController.swiftæ–‡ä»¶ï¼Œåœ¨é¡¹ç›®ç›®å½•å¤„å³å‡»æ–°å»ºæ–‡ä»¶ï¼Œæ–°å»ºä¸€ä¸ªQRCodeViewControllerç±»ç»§æ‰¿è‡ªUIViewControllerã€‚ ç‚¹å‡»Main.storyboardï¼Œé€‰ä¸­View Controllerï¼Œä¿®æ”¹å…¶å±žæ€§Classä¸ºQRCodeViewControllerï¼Œä½¿ä¸¤è€…å…³è”ã€‚ å‘Main.storyboardä¸­æ‹–åŠ¨ä¸€ä¸ªView Controllerå¯¹è±¡ï¼Œä»¥1çš„æ–¹æ³•æ–°å»ºä¸€ä¸ªç»§æ‰¿è‡ªUIViewControllerçš„ç±»QRScannerControllerï¼Œç„¶åŽä¸ŽMain.storyboardä¸­æ–°å»ºçš„View Controllerå…³è”ã€‚ ä¸‹è½½å›¾ç‰‡ã€‚ä»ŽåŽŸæ–‡çš„åˆå§‹åŒ–é¡¹ç›®QRCodeReaderStarterå¤åˆ¶ã€‚ ä¿®æ”¹Code View Controller Sceneçš„viewèƒŒæ™¯é¢œè‰²åšä¿®æ”¹ï¼›æ·»åŠ ä¸€ä¸ªlabelï¼Œåç§°æ”¹ä¸ºQuick Scanï¼Œå­—ä½“ï¼Œå’Œå­—ä½“å¤§å°ä¹Ÿåšä¿®æ”¹ï¼›æ·»åŠ buttonï¼Œåˆ é™¤æ–‡æœ¬ï¼Œå¤§å°ä¸º150150ï¼ŒTypeä¸ºSystemï¼Œimageä¸ºfocus*ï¼ŒTintä¸ºé»„è‰²ï¼›æ·»åŠ ä¸€äº›çº¦æŸã€‚ Scanner Controller Sceneï¼š åœ¨é¡¶éƒ¨æ·»åŠ ä¸€ä¸ªViewï¼Œåœ¨è¿™ä¸ªViewä¸­æ·»åŠ ä»¥labelå’Œbuttonï¼Œbuttonçš„imageä¸ºcrossï¼›åœ¨é¡¶éƒ¨æ·»åŠ ä¸€ä¸ªlabelï¼›æ·»åŠ ä¸€äº›çº¦æŸã€‚ æž„å»º segue ç”¨control-dragä»ŽCode View Controller Sceneä¸­çš„buttonåˆ°Scanner Controller Sceneï¼Œé€‰æ‹©Present Modally åœ¨QRCodeViewControllerä¸­æ·»åŠ ä»£ç ï¼š 1234@IBAction func unwindToHomeScreen(segue: UIStoryboardSegue) &#123; //åŽ»é™¤æ¨¡æ€è§†å›¾ dismiss(animated: true, completion: nil) &#125; åœ¨Scanner Controller Scene ä¸­ï¼Œç”¨control-dragä»Žbuttonåˆ°Exitï¼Œé€‰æ‹©unwindToHomeScreenWithSegue: 6å’Œ7ä¸­æ ·å¼å’Œçº¦æŸï¼Œåˆé€‚å³å¯ã€‚ åŠ è½½ AVFoundation æ¡†æž¶ åœ¨QRScannerController.swiftæ–‡ä»¶ä¸­å¼•å…¥AVFoundation Frameworkï¼šimport AVFoundation QRScannerControllerå®žçŽ°AVCaptureMetadataOutputObjectsDelegateåè®®ï¼šclass QRScannerController: UIViewController, AVCaptureMetadataOutputObjectsDelegate {è¡¨ç¤ºå½“æ•èŽ·çš„å…ƒæ•°æ®äº§ç”Ÿæ—¶ï¼Œéœ€è¦ä¸€äº›å›žè°ƒæ–¹æ³•ã€‚ QRScannerControllerä¸­æ·»åŠ ä¸‰ä¸ªå˜é‡ï¼š123var captureSession: AVCaptureSession?var videoPreviewLayer: AVCaptureVideoPreviewLayer?var qrCodeFrameView: UIView? å®žçŽ°è§†é¢‘æ•èŽ· åœ¨QRScannerControllerçš„viewDidLoadä¸­æ·»åŠ ä»£ç ï¼š 123456789101112131415161718192021222324252627// 1let captureDevice = AVCaptureDevice.defaultDevice(withMediaType: AVMediaTypeVideo)do &#123; // 2 let input = try AVCaptureDeviceInput(device: captureDevice) // 3 captureSession = AVCaptureSession() // 4 captureSession?.addInput(input) // 5 let captureMetadataOutput = AVCaptureMetadataOutput() captureSession?.addOutput(captureMetadataOutput) // 6 captureMetadataOutput.setMetadataObjectsDelegate(self, queue: DispatchQueue.main) captureMetadataOutput.metadataObjectTypes = [AVMetadataObjectTypeQRCode] videoPreviewLayer = AVCaptureVideoPreviewLayer(session: captureSession) videoPreviewLayer?.videoGravity = AVLayerVideoGravityResizeAspectFill videoPreviewLayer?.frame = view.layer.bounds view.layer.addSublayer(videoPreviewLayer!) captureSession?.startRunning()&#125; catch &#123; print(error) return&#125; 1 åˆå§‹åŒ–AVCaptureDeviceï¼Œå®ƒè¡¨ç¤ºç‰©ç†æ•èŽ·è®¾å¤‡ï¼›AVMediaTypeVideoæ˜¯Media typesï¼Œè¡¨ç¤ºè§†é¢‘ç±»åž‹ï¼Œè¿˜æœ‰AVMediaTypeAudioï¼ŒAVMediaTypeTextç­‰å…¶ä»–ç±»åž‹ 2 æ ¹æ®AVCaptureDeviceåˆå§‹åŒ–æ•èŽ·è®¾å¤‡çš„è¾“å…¥æ•°æ®å¯¹è±¡AVCaptureDeviceInputã€‚è¿™è¾¹çš„tryæ˜¯swiftä¸­é”™è¯¯å¤„ç†çš„æ ‡è¯†ï¼Œå¯¹åº”public init(device: AVCaptureDevice!) throwsã€‚ 3 AVCaptureSession ç”¨äºŽåè°ƒè¾“å…¥ä¸Žè¾“å‡ºä¹‹é—´çš„æ•°æ®æµã€‚ 4 ä¸ºAVCaptureSession æ·»åŠ è¾“å…¥æ•°æ® 5 å®šä¹‰è¾“å‡ºæ•°æ®å¯¹è±¡AVCaptureMetaDataOutputï¼Œå¹¶æŠŠå®ƒæ·»åŠ ç»™AVCaptureSession 6 è®¾ç½®selfä¸ºè¾“å‡ºæ•°æ®å¯¹è±¡çš„ä»£ç†ï¼Œè¿™å°±å¯¹åº”äº†QRScannerControllerç±»å®žçŽ°AVCaptureMetadataOutputObjectsDelegateåè®®ã€‚metadataObjectTypesæ˜¯è¯†åˆ«çš„å…ƒæ•°æ®ç±»åž‹ï¼ŒAVMetadataObjectTypeQRCodeè¡¨ç¤ºäºŒç»´ç ç±»åž‹ã€‚ åœ¨Info.plistä¸­æ·»åŠ keyä¸ºNSCameraUsageDescriptionæˆ–â€Privacy â€“ Camera Usage Descriptionâ€ï¼Œå€¼ä¸º ä¸ºäº†æ‰«æäºŒç»´ç ï¼Œéœ€è¦ä½¿ç”¨ä½ çš„ç›¸æœºã€‚ è¿è¡Œåº”ç”¨æ—¶ï¼Œç‚¹å‡»scan buttonåŽï¼Œä½¿ç”¨äº†ç›¸æœºï¼Œä½†messageLabelå’Œtapbaræ²¡æœ‰äº†ï¼Œå› ä¸ºè¢«AVCaptureVideoPreviewLayerè¦†ç›–äº†ï¼ŒåŠ å…¥ä¸¤è¡Œä»£ç å°±å¯ä»¥æ˜¾ç¤ºäº†ï¼š12view.bringSubview(toFront: messageLabel)view.bringSubview(toFront: topbar) å®žçŽ°äºŒç»´ç è¯»å–å½“æ£€æµ‹åˆ°äºŒç»´ç æ—¶ï¼Œç”¨ç»¿è‰²æ¡†é«˜äº®ï¼›ç„¶åŽäºŒç»´ç è¢«è§£ç æˆæ–‡æœ¬ä¿¡æ¯å±•ç¤ºåœ¨messagelabelä¸­ã€‚ åˆå§‹åŒ–ç»¿è‰²æ¡†ã€‚ç»§ç»­åœ¨ä¸Šè¿°ä»£ç åŽæ·»åŠ :12345678qrCodeFrameView = UIView() if let qrCodeFrameView = qrCodeFrameView &#123; qrCodeFrameView.layer.borderColor = UIColor.green.cgColor qrCodeFrameView.layer.borderWidth = 2 view.addSubview(qrCodeFrameView) view.bringSubview(toFront: qrCodeFrameView)&#125; ç”±äºŽqrCodeFrameViewæ²¡æœ‰è®¾ç½®å¤§å°ï¼Œé»˜è®¤æ˜¯0ï¼Œæ‰€ä»¥ä¸ä¼šæ˜¾ç¤ºï¼Œå½“ä¹‹åŽå‘çŽ°äºŒç»´ç æ—¶å†è®©å®ƒæ˜¾ç¤ºã€‚ è§£ç äºŒç»´ç å½“AVCaptureMetadataOutputè¯†åˆ«å‡ºäºŒç»´ç æ—¶ï¼ŒAVCaptureMetadataOutputObjectsDelegateä¸­çš„ä»£ç†æ–¹æ³•å°†è¢«è°ƒç”¨ï¼šoptional public func captureOutput(_ captureOutput: AVCaptureOutput!, didOutputMetadataObjects metadataObjects: [Any]!, from connection: AVCaptureConnection!) å›žè°ƒæ–¹æ³•å®šä¹‰ï¼š func captureOutput(_ captureOutput: AVCaptureOutput!, didOutputMetadataObjects metadataObjects: [Any]!, from connection: AVCaptureConnection!) { if metadataObjects == nil || metadataObjects.count == 0 { qrCodeFrameView?.frame = CGRect.zero messageLabel.text = &quot;æ²¡æœ‰äºŒç»´ç /æ¡å½¢ç &quot; return } let metadataObj = metadataObjects[0] as! AVMetadataMachineReadableCodeObject if metadataObj.type == AVMetadataObjectTypeQRCode { // 1 let barCodeObject = videoPreviewLayer?.transformedMetadataObject(for: metadataObj) qrCodeFrameView?.frame = barCodeObject!.bounds if metadataObj.stringValue != nil { // 2 messageLabel.text = metadataObj.stringValue } } } ç¬¬äºŒä¸ªå‚æ•°metadataObjectsæ˜¯ä¸ªæ•°ç»„ï¼Œå°±æ˜¯æ‰€æœ‰è¢«è¯†åˆ«å‡ºæ¥çš„å…ƒæ•°æ®å¯¹è±¡ã€‚å¦‚æžœè¿™ä¸ªå‚æ•°ä¸ºnilæˆ–æ•°ç»„ä¸ºç©ºæ•°ç»„ï¼Œå°±è¡¨ç¤ºæ²¡æœ‰è¯†åˆ«å‡ºå¯¹è±¡ã€‚ 1 é€šè¿‡transformedMetadataObjectæ–¹æ³•èŽ·å¾—AVMetadataObjectå¯¹è±¡ï¼Œæ›´åŠ è¿™ä¸ªå¯¹è±¡å¯ä»¥èŽ·å¾—äºŒç»´ç çš„ä½ç½®ï¼Œç„¶åŽæ˜¾ç¤ºç»¿æ¡†ã€‚ 2 æŠŠäºŒç»´ç ä¿¡æ¯æ˜¾ç¤ºåœ¨messagelabelä¸Šã€‚ è¯†åˆ«æ¡å½¢ç é™¤äº†è¯†åˆ«äºŒç»´ç ä»¥å¤–ï¼Œè¿˜å¯ä»¥è¯†åˆ«æ¡å½¢ç ã€‚åªè¦åœ¨captureMetadataOutput.metadataObjectTypes = [AVMetadataObjectTypeQRCode]æ·»åŠ æ›´å¤šçš„å…ƒæ•°æ®ç±»åž‹ã€‚ï¼Œç„¶åŽå›žè°ƒæ–¹æ³•ä¸­ä¿®æ”¹æ£€æµ‹ç±»åž‹å°±å¯ä»¥ã€‚ 123456789101112131415161718192021222324let supportedCodeTypes = [AVMetadataObjectTypeUPCECode, AVMetadataObjectTypeCode39Code, AVMetadataObjectTypeCode39Mod43Code, AVMetadataObjectTypeCode93Code, AVMetadataObjectTypeCode128Code, AVMetadataObjectTypeEAN8Code, AVMetadataObjectTypeEAN13Code, AVMetadataObjectTypeAztecCode, AVMetadataObjectTypePDF417Code, AVMetadataObjectTypeQRCode ]captureMetadataOutput.metadataObjectTypes = supportedCodeTypes// ....if supportedCodeTypes.contains(metadataObj.type) &#123; let barCodeObject = videoPreviewLayer?.transformedMetadataObject(for: metadataObj) qrCodeFrameView?.frame = barCodeObject!.bounds if metadataObj.stringValue != nil &#123; messageLabel.text = metadataObj.stringValue &#125;&#125; ä»£ç QRCodeReader]]></content>
      <categories>
        <category>iOS</category>
        <category>iOS tutorial</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[iOSåº”ç”¨ç¨‹åºçš„çŠ¶æ€]]></title>
    <url>%2F2017%2Fios-application-status.html</url>
    <content type="text"><![CDATA[iOSåº”ç”¨ç¨‹åºä¸€å…±æœ‰äº”ç§çŠ¶æ€ï¼š Not Running ç¨‹åºè¿˜æ²¡è¿è¡Œ Inactive ç¨‹åºè¿è¡Œåœ¨foregroundä½†æ²¡æœ‰æŽ¥æ”¶äº‹ä»¶ Active ç¨‹åºè¿è¡Œåœ¨foregroundæŽ¥æ”¶äº‹ä»¶ Background ç¨‹åºè¿è¡Œåœ¨backgroundæ­£åœ¨æ‰§è¡Œä»£ç  Suspended ç¨‹åºè¿è¡Œåœ¨backgroundæ²¡æœ‰æ‰§è¡Œä»£ç  iOSåº”ç”¨ç¨‹åºçŠ¶æ€å˜åŒ–ä¼šå›žè°ƒAPPDelegateä¸­çš„æ–¹æ³•ï¼Œä½†ä¸æ˜¯æ¯ä¸€ç§çŠ¶æ€å˜åŒ–éƒ½ä¼šæœ‰å¯¹åº”çš„æ–¹æ³•(ä¸Šå›¾çš„çº¢æ¡†çš„ä¸¤ä¸ªå˜åŒ–å°±æ²¡æœ‰å¯¹åº”çš„æ–¹æ³•) application:didFinishLaunchingWithOptions: Not Running -&gt; Inactive applicationDidBecomeActive: Inactive -&gt; Active applicationWillResignActive: Active -&gt; Inactive applicationDidEnterBackground: Background -&gt; Suspended applicationWillEnterForeground: Background -&gt; Inactive applicationWillTerminate: Suspended -&gt; Not Running å¸¸è§çš„åº”ç”¨çŠ¶æ€å˜åŒ–åœºæ™¯ ç¨‹åºç¬¬ä¸€æ¬¡å¯åŠ¨ï¼ˆæˆ–è€…è¢«æ€æŽ‰ä»¥åŽå¯åŠ¨ï¼‰ï¼š Not Running -&gt; Inactive -&gt; Active ç‚¹å‡»Homeé”®ï¼ˆæ²¡æœ‰åœ¨Inof.plistä¸­è®¾ç½®Application does not run in backgroundï¼‰ï¼š Active -&gt; Inactive -&gt; Background -&gt; Suspended ç‚¹å‡»Homeé”®ï¼ˆåœ¨Inof.plistä¸­è®¾ç½®Application does not run in backgroundä¸ºYESï¼Œåº”ç”¨ä¸èƒ½è¿è¡Œåœ¨åŽå°ï¼Œè¿›å…¥åŽå°åŽä¼šç«‹å³è¿›å…¥Not Runningï¼‰ï¼š Active -&gt; Inactive -&gt; Background -&gt; Suspended -&gt; Not Running æŒ‚èµ·é‡æ–°è¿è¡Œ Suspended -&gt; Background -&gt; Inactive -&gt; Active å†…å­˜æ¸…é™¤ï¼ˆæ€æŽ‰åº”ç”¨æˆ–åˆ é™¤åº”ç”¨ï¼‰ Suspended -&gt; Not Running åº”ç”¨ä¹‹é—´çš„åˆ‡æ¢ Active -&gt; Inactive Inactive -&gt; Active ç‚¹å‡»Homeé”®ï¼ˆåœ¨Inof.plistä¸­è®¾ç½®Application does not run in backgroundä¸ºYESï¼Œåº”ç”¨ä¸èƒ½è¿è¡Œåœ¨åŽå°ï¼Œè¿›å…¥åŽå°åŽä¼šç«‹å³è¿›å…¥Not Runningï¼‰ï¼š Active -&gt; Inactive -&gt; Background -&gt; Suspended -&gt; Not Running å¯é€šè¿‡åœ¨APPDelegateçš„å›žè°ƒæ–¹æ³•ä¸­æ‰“å°æ•°æ®ï¼Œæ¥æŸ¥çœ‹åº”ç”¨çŠ¶æ€å˜åŒ– 123456789101112131415161718192021222324252627282930func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -&gt; Bool &#123; print(&quot;`application:didFinishLaunchingWithOptions:` Not Running -&gt; Inactive&quot;) return true&#125;func applicationWillResignActive(_ application: UIApplication) &#123; print(&quot;`applicationWillResignActive:` Active -&gt; Inactive&quot;)&#125;func applicationDidEnterBackground(_ application: UIApplication) &#123; print(&quot;`applicationDidEnterBackground:` Background -&gt; Suspended&quot;)&#125;func applicationWillEnterForeground(_ application: UIApplication) &#123; print(&quot;`applicationWillEnterForeground:` Background -&gt; Inactive&quot;)&#125;func applicationDidBecomeActive(_ application: UIApplication) &#123; print(&quot;`applicationDidBecomeActive:` Inactive -&gt; Active&quot;)&#125;func applicationWillTerminate(_ application: UIApplication) &#123; print(&quot;`applicationWillTerminate:` Suspended -&gt; Not Running&quot;)&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 6 åˆ›å»ºç®€å•çš„Table Based App]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-6.html</url>
    <content type="text"><![CDATA[table viewåº”è¯¥æ˜¯iOSåº”ç”¨ä¸­æœ€å¸¸ç”¨çš„UI elementã€‚æœ€å¥½çš„ä¾‹å­å°±æ˜¯iPhoneè‡ªå¸¦çš„ä¸€äº›åº”ç”¨ï¼Œå¦‚ç”µè¯ï¼Œé‚®ä»¶ï¼Œè®¾ç½®ç­‰ã€‚TEDï¼ŒGoogle+ï¼ŒAirbnbï¼Œå¾®ä¿¡ç­‰ç­‰éƒ½æ˜¯å¾ˆå¥½ä¾‹å­ã€‚ åˆ›å»ºä¸€ä¸ªé¡¹ç›® é¡¹ç›®åç§°ä¸ºSimpleTableï¼Œæ¨¡æ¿ä¸ºâ€Single View applicationâ€ è®¾è®¡UI é€‰ä¸­Main.storyboardï¼Œä»ŽObject libraryä¸­æ‹–åŠ¨Table Viewè¿›å…¥è§†å›¾ æ”¹å˜Table Viewçš„å¤§å°è‡³æ•´ä¸ªviewï¼Œä¿®æ”¹å±žæ€§Prototype Cellsä¸º1 é€‰ä¸­Table View Cellï¼Œä¿®æ”¹Styleä¸ºBasicï¼ŒIdentifierä¸ºCellã€‚table view cellçš„æ ‡å‡†ç±»åž‹æœ‰ basicã€right detailã€left detail å’Œ subtitleï¼Œå½“ç„¶è¿˜æœ‰å®šåˆ¶ç±»åž‹customã€‚ é€‰ä¸­Table Viewï¼Œè®¾ç½®å››ä¸ªspacingçº¦æŸï¼Œä¸Šä¸‹å·¦å³çš„è·ç¦»éƒ½è®¾ç½®ä¸º0 ä¸ºUITableViewæ·»åŠ ä¸¤ä¸ªåè®® Object libraryä¸­çš„æ¯ä¸€UI componentéƒ½æ˜¯å¯¹åº”ä¸€ä¸ªclassï¼Œå¦‚ Table Viewå°±æ˜¯å¯¹åº”UITableViewã€‚å¯ä»¥é€šè¿‡ç‚¹å‡»å¹¶æ‚¬åœåœ¨UI componentä¸ŠæŸ¥çœ‹å¯¹åº”çš„classå’Œä»‹ç»ã€‚ åœ¨ViewController.swiftæ–‡ä»¶çš„UIViewControlleråŽï¼Œæ·»åŠ ä»£ç , UITableViewDataSource, UITableViewDelegateï¼Œè¡¨ç¤ºViewControllerç±»å®žçŽ°äº†UITableViewDataSourceï¼ŒUITableViewDelegateä¸¤ä¸ªåè®®ã€‚å‡ºçŽ°çº¢è‰²æ„Ÿå¹å·ï¼Œè¿™æ˜¯xcodeçš„é—®é¢˜æç¤ºï¼Œç‚¹å‡»å‚çœ‹é—®é¢˜æè¿°ï¼š Type â€˜ViewControllerâ€™ does not conform to protocolâ€˜UITableViewDataSourceâ€™ é—®é¢˜æè¿°ä¸ºViewControllerä¸ç¬¦åˆåè®®UITableViewDataSourceã€‚é€šè¿‡command+ç‚¹å‡» ï¼ˆæœ€æ–°çš„xcode9å˜æˆäº†command+option+ç‚¹å‡»ï¼‰åˆ°UITableViewDataSourceä¸­çœ‹çœ‹ä½ ï¼š1234567891011121314151617181920212223242526272829303132public protocol UITableViewDataSource : NSObjectProtocol &#123; @available(iOS 2.0, *) public func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int // Row display. Implementers should *always* try to reuse cells by setting each cell&apos;s reuseIdentifier and querying for available reusable cells with dequeueReusableCellWithIdentifier: // Cell gets various attributes set automatically based on table (separators) and data source (accessory views, editing controls) @available(iOS 2.0, *) public func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell @available(iOS 2.0, *) optional public func numberOfSections(in tableView: UITableView) -&gt; Int // Default is 1 if not implemented @available(iOS 2.0, *) optional public func tableView(_ tableView: UITableView, titleForHeaderInSection section: Int) -&gt; String? // fixed font style. use custom view (UILabel) if you want something different @available(iOS 2.0, *) optional public func tableView(_ tableView: UITableView, titleForFooterInSection section: Int) -&gt; String? // Editing // Individual rows can opt out of having the -editing property set for them. If not implemented, all rows are assumed to be editable. @available(iOS 2.0, *) optional public func tableView(_ tableView: UITableView, canEditRowAt indexPath: IndexPath) -&gt; Bool ... UITableViewDataSourceåè®®ä¸­å®šä¹‰äº†å¾ˆå¤šæ–¹æ³•ï¼Œé™¤äº†å‰ä¸¤ä¸ªæ–¹æ³•æ²¡æœ‰optionalå…¶å®ƒéƒ½æœ‰ï¼Œæœ‰çš„è¡¨ç¤ºè¿™ä¸ªæ–¹æ³•ä¸ä¸€å®šè¦å®žçŽ°ï¼Œæ²¡æœ‰çš„å°±ä¸€å®šè¦å®žçŽ°ï¼ŒæŠŠè¿™ä¸ªä¸¤ä¸ªæ–¹æ³•å®žçŽ°äº†ï¼Œé—®é¢˜æç¤ºå°±ä¼šæ¶ˆå¤±ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•ä»Žåå­—å’Œè¿”å›žå€¼ç±»åž‹ä¹Ÿå¤§æ¦‚èƒ½çŸ¥é“åšäº†ä»€ä¹ˆï¼š public func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int ä¸€ä¸ªsectionæœ‰å‡ è¡Œï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªsectionæœ‰å‡ ä¸ªUITableViewCellï¼Œ sectionå°±æ˜¯ä¸€ç»„UITableViewCellçš„æ„æ€ï¼ŒTable Viewå¯ä»¥å®šä¹‰å¤šä¸ªsectionï¼Œé»˜è®¤æ˜¯ä¸€ä¸ªã€‚ public func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell è¿”å›žæ¯ä¸€è¡Œçš„ UITableViewCell åœ¨ViewController.swiftä¸­å®šä¹‰ä¸€ä¸ªå˜é‡restaurantNamesï¼Œç±»åž‹æ˜¯æ•°ç»„ï¼Œè¡¨ç¤ºä¸€ç³»åˆ—é¤é¦†çš„åå­—ã€‚ 1var restaurantNames = [&quot;Cafe Deadend&quot;, &quot;Homei&quot;, &quot;Teakha&quot;, &quot;Cafe Loisl&quot;, &quot;PetiteOyster&quot;, &quot;For Kee Restaurant&quot;, &quot;Po&apos;s Atelier&quot;, &quot;Bourke Street Bakery&quot;, &quot;Haigh&apos;sChocolate&quot;, &quot;Palomino Espresso&quot;, &quot;Upstate&quot;, &quot;Traif&quot;, &quot;Graham Avenue Meats AndDeli&quot;, &quot;Waffle &amp; Wolf&quot;, &quot;Five Leaves&quot;, &quot;Cafe Lore&quot;, &quot;Confessional&quot;,&quot;Barrafina&quot;, &quot;Donostia&quot;, &quot;Royal Oak&quot;, &quot;CASK Pub and Kitchen&quot;] å®šä¹‰UITableViewDataSourceçš„ä¸¤ä¸ªæ–¹æ³•ï¼š 12345678910111213141516func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123; // 1 return restaurantNames.count &#125; func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; // 2 let cellIdentifier = &quot;Cell&quot; let cell = tableView.dequeueReusableCell(withIdentifier: cellIdentifier, for: indexPath) // 3 cell.textLabel?.text = restaurantNames[indexPath.row] return cell &#125; 1 é¤é¦†çš„æ•°ç›®å°±æ˜¯sectionçš„è¡Œæ•° 2 â€œCellâ€ä¸Žä¹‹å‰å®šä¹‰çš„UITableViewCellçš„Identifierå±žæ€§æ˜¯å¯¹åº”çš„ã€‚dequeueReusableCellæ–¹æ³•æ˜¯äº§ç”Ÿä¸€ä¸ªUITableViewCellã€‚ 3 UITableViewCellä¸­æœ‰å¯ç®—å±žæ€§textLabelï¼Œå…¶å®žå°±æ˜¯ä¸€ä¸ªUILabelï¼Œç”±äºŽæ˜¯å¯é€‰å±žæ€§ï¼Œè°ƒç”¨æ—¶ä¹Ÿç”¨å¯é€‰é“¾å¼è°ƒç”¨cell.textLabel?.text è¿žæŽ¥ DataSource å’Œ Delegateè¿è¡Œappï¼Œæ²¡æœ‰æ•°æ®æ˜¾ç¤ºã€‚å°½ç®¡ä¸Šé¢å·²ç»åœ¨ä»£ç ä¸­è®©ViewControllerç»§æ‰¿äº†UITableViewDataSource, UITableViewDelegateï¼Œä½†storyboardå¹¶ä¸çŸ¥é“ã€‚ åœ¨document outlineä¸­é€‰æ‹©Table Viewï¼Œä½¿ç”¨control-dragåˆ°View Controllerï¼Œåœ¨å¼¹å‡ºæ¡†ä¸­é€‰æ‹©dataSourceã€‚åŒæ ·çš„æ–¹æ³•é€‰æ‹©delegate ç¡®è®¤è¿žæŽ¥æ˜¯å¦æˆåŠŸã€‚é€‰ä¸­Table Viewï¼Œåœ¨connetionæ£€æŸ¥å™¨ä¸­æŸ¥çœ‹ï¼›æˆ–è€…ç›´æŽ¥åœ¨document outlineä¸­å³å‡»Table View è¿è¡Œapp æ·»åŠ å›¾ç‰‡åˆ°Table View ä»Žsimpletable-image1.zipä¸‹è½½å›¾ç‰‡ï¼Œè§£åŽ‹åŽä¸€èµ·æ‹–åˆ°asset catalog åœ¨ViewController.swiftçš„tableView(_:cellForRowAtIndexPath:)æ–¹æ³•çš„return cellå‰æ·»åŠ ä»£ç cell.imageView?.image = UIImage(named: &quot;restaurant&quot;)ã€‚ä½¿æ¯ä¸ªUITableViewCellçš„imageéƒ½æ˜¯ä¸€æ ·çš„ã€‚ éšè—çŠ¶æ€æ é¡¶éƒ¨çŠ¶æ€æ¥å’Œtable view æ•°æ®é‡å äº†ï¼Œåªè¦åœ¨ViewControlleråŠ ä¸€æ®µä»£ç å°±å¯ä»¥ï¼š123override var prefersStatusBarHidden: Bool &#123; return true&#125; prefersStatusBarHiddenæ˜¯çˆ¶ç±»UIViewControllerä¸­çš„å±žæ€§ï¼Œæ‰€ä»¥è¦åŠ  overrideï¼Œè¡¨ç¤ºé‡å†™äº†ã€‚ ä¸åŒçš„Cellå¯¹åº”ä¸åŒçš„å›¾ç‰‡ ä»Žsimpletable-image2.zipä¸‹è½½å›¾ç‰‡ï¼Œè§£åŽ‹åŽä¸€èµ·æ‹–åˆ°asset catalog ä¿®æ”¹ViewController.swiftçš„tableView(_:cellForRowAtIndexPath:)ä¸ºï¼š 12345678910111213141516171819func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123; let cellIdentifier = &quot;Cell&quot; let cell = tableView.dequeueReusableCell(withIdentifier: cellIdentifier, for: indexPath) // Configure the cell... let restaurantName = restaurantNames[indexPath.row] cell.textLabel?.text = restaurantName // 1 let imageName = restaurantName.lowercased().replacingOccurrences(of: &quot; &quot;, with: &quot;&quot;) if let image = UIImage(named: imageName) &#123; cell.imageView?.image = image &#125; else &#123; cell.imageView?.image = UIImage(named: &quot;restaurant&quot;) &#125; return cell &#125; 1 æŠŠèœé¦†åå­—å­—ç¬¦ä¸²å…ˆä¿®æ”¹æˆå°å†™ï¼Œç„¶åŽåŽ»ç©ºæ ¼ æœ€ç»ˆç»“æžœ ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-18ï¼šError Handling]]></title>
    <url>%2F2017%2Fswift-18.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108/** Error Handling é”™è¯¯å¤„ç†(Error handling)æ˜¯å“åº”é”™è¯¯ä»¥åŠä»Žé”™è¯¯ä¸­æ¢å¤çš„è¿‡ç¨‹ã€‚ */// 1 è¡¨ç¤ºå¹¶æŠ›å‡ºé”™è¯¯// `Error`ç©ºåè®®è¡¨æ˜Žè¯¥ç±»åž‹å¯ä»¥ç”¨äºŽé”™è¯¯å¤„ç†enum VendingMachineError: Error &#123; case InvalidSelection //é€‰æ‹©æ— æ•ˆ case InsufficientFunds(coinsNeeded: Int) //é‡‘é¢ä¸è¶³ case OutOfStock //ç¼ºè´§&#125;throw VendingMachineError.InsufficientFunds(coinsNeeded: 5)// 2 å¤„ç†é”™è¯¯// ä¸ºäº†æ ‡è¯†å‡ºä»£ç ä¸­å¯èƒ½ä¼šæŠ›å‡ºé”™è¯¯çš„åœ°æ–¹ï¼Œåœ¨è°ƒç”¨ä¸€ä¸ªèƒ½æŠ›å‡ºé”™è¯¯çš„å‡½æ•°ã€æ–¹æ³•æˆ–è€…æž„é€ å™¨ä¹‹å‰ï¼ŒåŠ ä¸Š try å…³é”®å­—ï¼Œæˆ–è€… try? æˆ– try!è¿™ç§å˜ä½“ã€‚// å››ä¸ªå¤„ç†é”™è¯¯çš„æ–¹å¼:// 1) ç”¨throwingå‡½æ•°ä¼ é€’é”™è¯¯/* **throwingå‡½æ•°**: åœ¨å‡½æ•°å£°æ˜Žçš„å‚æ•°åˆ—è¡¨ä¹‹åŽåŠ ä¸Š throws å…³é”®å­—ï¼Œä¸ºäº†è¡¨ç¤ºä¸€ä¸ªå‡½æ•°ã€æ–¹æ³•æˆ–æž„é€ å™¨å¯ä»¥æŠ›å‡ºé”™è¯¯ã€‚ func canThrowErrors() throws -&gt; String func cannotThrowErrors() -&gt; String ä¸€ä¸ª throwing å‡½æ•°å¯ä»¥åœ¨å…¶å†…éƒ¨æŠ›å‡ºé”™è¯¯ï¼Œå¹¶å°†é”™è¯¯ä¼ é€’åˆ°å‡½æ•°è¢«è°ƒç”¨æ—¶çš„ä½œç”¨åŸŸã€‚ åªæœ‰ throwing å‡½æ•°å¯ä»¥ä¼ é€’é”™è¯¯ã€‚ä»»ä½•åœ¨æŸä¸ªéžthrowingå‡½æ•°å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯åªèƒ½åœ¨å‡½æ•°å†…éƒ¨å¤„ç†ã€‚ */struct Item &#123; var price: Int var count: Int&#125;class VendingMachine &#123; var inventory = [ &quot;Candy Bar&quot;: Item(price: 12, count: 7), &quot;Chips&quot;: Item(price: 10, count: 4), &quot;Pretzels&quot;: Item(price: 7, count: 11) ] var coinsDeposited = 0 func dispenseSnack(snack: String) &#123; print(&quot;Dispensing \(snack)&quot;) &#125; func vend(itemNamed name: String) throws &#123; guard let item = inventory[name] else &#123; throw VendingMachineError.InvalidSelection &#125; guard item.count &gt; 0 else &#123; throw VendingMachineError.OutOfStock &#125; guard item.price &lt;= coinsDeposited else &#123; throw VendingMachineError.InsufficientFunds(coinsNeeded: item.price - coinsDeposited) &#125; coinsDeposited -= item.price var newItem = item newItem.count -= 1 inventory[name] = newItem dispenseSnack(snack: name) &#125;&#125;let favoriteSnacks = [ &quot;Alice&quot;: &quot;Chips&quot;, &quot;Bob&quot;: &quot;Licorice&quot;, &quot;Eve&quot;: &quot;Pretzels&quot;,]func buyFavoriteSnack(person: String, vendingMachine: VendingMachine) throws &#123; let snackName = favoriteSnacks[person] ?? &quot;Candy Bar&quot; try vendingMachine.vend(itemNamed: snackName)&#125;// throwingæž„é€ å™¨èƒ½åƒthrowingå‡½æ•°ä¸€æ ·ä¼ é€’é”™è¯¯ã€‚struct PurchasedSnack &#123; let name: String init(name: String, vendingMachine: VendingMachine) throws &#123; try vendingMachine.vend(itemNamed: name) self.name = name &#125;&#125;// 2) ç”¨ Do-Catch å¤„ç†é”™è¯¯var vendingMachine = VendingMachine()vendingMachine.coinsDeposited = 8do &#123; try buyFavoriteSnack(person: &quot;Alice&quot;, vendingMachine: vendingMachine)&#125; catch VendingMachineError.InvalidSelection &#123; print(&quot;Invalid Selection.&quot;)&#125; catch VendingMachineError.OutOfStock &#123; print(&quot;Out of Stock.&quot;)&#125; catch VendingMachineError.InsufficientFunds(let coinsNeeded) &#123; print(&quot;Insufficient funds. Please insert an additional \(coinsNeeded) coins.&quot;)&#125;// æ‰“å° â€œInsufficient funds. Please insert an additional 2 coins.â€// 3) å°†é”™è¯¯è½¬æ¢æˆå¯é€‰å€¼// å¦‚æžœ someThrowingFunction() æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œ x å’Œ y çš„å€¼æ˜¯ nilï¼Œå¦åˆ™ x å’Œ y çš„å€¼å°±æ˜¯è¯¥å‡½æ•°çš„è¿”å›žå€¼ã€‚// æ— è®º someThrowingFunction() çš„è¿”å›žå€¼ç±»åž‹æ˜¯ä»€ä¹ˆç±»åž‹ï¼Œ x å’Œ y éƒ½æ˜¯è¿™ä¸ªç±»åž‹çš„å¯é€‰ç±»åž‹ã€‚// xï¼Œyçš„ä¸¤ç§å½¢å¼ç±»ä¼¼ï¼Œtry? æ›´ç®€æ´ã€‚func someThrowingFunction() throws -&gt; Int &#123; // ... return 0&#125;let x = try? someThrowingFunction()let y: Int?do &#123; y = try someThrowingFunction()&#125; catch &#123; y = nil&#125;// 4) ç¦ç”¨é”™è¯¯ä¼ é€’// try! ç¦æ­¢é”™è¯¯ä¼ é€’ï¼Œå¦‚çœŸæœ‰é”™è¯¯æŠ›å‡ºï¼Œå°±å‡ºçŽ°è¿è¡Œé”™è¯¯ã€‚//let photo = try! loadImage(&quot;./Resources/John Appleseed.jpg&quot;)// 3 æŒ‡å®šæ¸…ç†æ“ä½œ]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 4 ç”¨Stack Viewè®¾è®¡UI]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-4.html</url>
    <content type="text"><![CDATA[å‰ä¸€ç¯‡å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 3 ä»‹ç»Auto Layoutä¸­æåˆ°Auto Layoutå·¥å…·æ æœ‰ä¸ªstackæŒ‰é’®ï¼Œè¿™æ˜¯Stack ViewåŠŸèƒ½ã€‚ä¸ºäº†è§£å†³å¤æ‚UIæ—¶å¸ƒå±€çº¦æŸå®šä¹‰å›°éš¾ï¼ŒAppleä»ŽiOS 9å¼€å§‹å¼•å…¥Stack Viewã€‚è¿™ç¯‡æ–‡ç« å°†å­¦ä¹ åˆ°ï¼š ç”¨Stack Viewå¸ƒå±€UIã€‚ ç”¨image viewså±•ç¤ºå›¾ç‰‡ã€‚ ç”¨å†…å»ºçš„asset catalogç®¡ç†å›¾ç‰‡ã€‚ ç”¨Size Classesé€‚é…Stack View Stack Viewæ˜¯ä»€ä¹ˆStack Viewä¸ºåœ¨çºµå‘æˆ–æ¨ªå‘å¸ƒç½®ä¸€ä¸ªè§†å›¾çš„é›†åˆï¼Œæä¾›äº†ä¸€ä¸ªæµçº¿åž‹ç•Œé¢ã€‚å¯ä»¥ç”¨stack viewå°†å¾ˆå¤šUIå¯¹è±¡åˆæˆä¸€ä¸ªã€‚è§†å›¾åµŒå…¥ä¸€ä¸ªstack viewé‡Œä»¥åŽ,å°±ä¸å†éœ€è¦å®šä¹‰è‡ªåŠ¨å¸ƒå±€çº¦æŸ. Stack Viewç®¡ç†å®ƒå­è§†å›¾çš„å¸ƒå±€,ç„¶åŽè‡ªåŠ¨æä¾›å¸ƒå±€çº¦æŸã€‚è¿™æ„å‘³ç€å­è§†å›¾å·²ç»å‡†å¤‡å¥½åŽ»é€‚åº”ä¸åŒçš„å±å¹•å°ºå¯¸ã€‚æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥åµŒå…¥ä¸€ä¸ªstack viewåˆ°å¦ä¸€ä¸ªstack viewæ¥æž„å»ºæ›´å¤æ‚çš„ç”¨æˆ·ç•Œé¢ã€‚ä½†æ˜¯ï¼Œè¿™å¹¶ä¸æ„å‘³ç€ä¸éœ€è¦å¤„ç†è‡ªåŠ¨å¸ƒå±€ã€‚ä»ç„¶éœ€è¦å®šä¹‰stack viewçš„å¸ƒå±€ã€‚è¿™æ ·ä¸ä»…èƒ½å¤ŸèŠ‚çº¦åœ¨åˆ›ä½œæ¯ä¸ªUIå…ƒç´ çš„çº¦æŸçš„æ—¶é—´ï¼Œä¹Ÿå¯ä»¥è½»æ¾çš„ä»Žå¸ƒå±€é‡Œæ¥æ·»åŠ /ç§»é™¤è§†å›¾ã€‚ Xcodeæä¾›ä¸¤ç§æ–¹æ³•ä½¿ç”¨Stack Viewï¼š ç›´æŽ¥ä»ŽObject libraryä¸­æ‹–å‡ºstack viewï¼ˆçºµå‘æˆ–æ¨ªå‘ï¼‰ï¼Œç„¶åŽæŠŠå…¶ä»–è§†å›¾æ‹–åŠ¨stack view é€‰ä¸­ä¸€äº›è§†å›¾ï¼Œç„¶åŽç‚¹å‡»Interface Builder editorå³ä¸‹è§’ä¸€ç»„æŒ‰é’®ä¸­çš„stackæŒ‰é’® ä¸€ä¸ªå°ç¨‹åº æ–°å»ºé¡¹ç›® StackViewDemo å‘Xcodeä¸­æ·»åŠ å›¾ç‰‡ ä»Žå›¾ç‰‡ä¸‹è½½æ‰€éœ€å›¾ç‰‡ï¼ŒåŠ åŽ‹åŽæœ‰3ç»„9å¼ å›¾ç‰‡ï¼Œæ¯ç»„æœ‰3å¼ ä¸åŒç±»åž‹çš„å›¾ç‰‡ï¼Œé’ˆå¯¹ä¸åŒç±»åž‹çš„è®¾å¤‡ï¼š user1.png ï¼ˆ non-Retinaçš„ä¸€äº›è€è®¾å¤‡ï¼‰ user1@2x.png ï¼ˆiPhone 4/4s/5/5s/6ï¼‰ user1@3x.png ï¼ˆiPhone 6 Plusç­‰é«˜åˆ†è¾¨çš„ï¼‰ æ‹–åŠ¨å›¾ç‰‡ç«Ÿç„¶xcodeçš„asset catalogä¸­ï¼Œxcodeä¼šè‡ªåŠ¨ç»„ç»‡è¿™äº›æœ‰è§„å¾‹çš„å›¾ç‰‡ï¼Œä½¿ç”¨æ—¶ç›´æŽ¥ç”¨user1,ä¸éœ€è¦é åŽé¢çš„@2æˆ–@3ã€‚ ç”¨Stack Viewå¸ƒå±€titleçš„label é€‰æ‹©Main.storyboardï¼Œä»ŽObject libraryä¸­æ‹–å‡ºVertical Stack Viewåˆ°storyboardä¸­ æ‹–å‡ºä¸€ä¸ªlabelåˆ°stack viewä¸­ã€‚ä¸€æ—¦labelè¿›å…¥stack viewä¸­ï¼Œå®ƒå°±è‡ªåŠ¨è°ƒæ•´å¤§å°ä»¥é€‚åº”label ä¿®æ”¹labelçš„titleä¸ºâ€œInstant Developerâ€ï¼Œå­—ä½“å¤§å°ä¸º40 pointsï¼Œfont styleä¸ºmediumï¼Œå­—ä½“é¢œè‰²ä¸ºçº¢è‰² å¦å¤–æ‹–å‡ºä¸€ä¸ªlabelåˆ°stack viewä¸­ï¼Œä¿®æ”¹labelçš„titleä¸ºâ€œGet help from experts in 15 minutesâ€ é€‰æ‹©stack viewï¼Œåœ¨å±žæ€§æ£€æŸ¥å™¨ä¸­ä¿®æ”¹Alignmentå‚æ•°ä¸ºcenterï¼Œè¿™æ ·ä½¿stack viewä¸­çš„labelæ°´å¹³å±…ä¸­å¯¹é½ã€‚ å¤šä¸ªè§†å›¾åœ¨ä¸€èµ·ä¸æ–¹ä¾¿é€‰æ‹©æ—¶ï¼Œå¯ä»¥ç”¨ shift + å³å‡»ï¼šstack viewçš„å‡ ä¸ªå±žæ€§ï¼š axis stack viewä¸­å¯¹è±¡æ˜¯æ°´å¹³æ”¾ç½®è¿˜æ˜¯åž‚ç›´æ”¾ç½®ï¼Œä¹Ÿå°±æ˜¯Vertical Stack Viewå’ŒHorizontal Stack Viewä¹‹é—´çš„åˆ‡æ¢ alignment stack viewä¸­å¯¹è±¡çš„å¯¹é½æ–¹å¼ distribution ç”¨StackæŒ‰é’®å¸ƒå±€å¤šä¸ªå›¾ç‰‡ æ‹–åŠ¨ä¸€ä¸ªimage viewå¯¹è±¡ï¼Œå¹¶ä¿®æ”¹å…¶imageå±žæ€§ä¸ºuser1 åŒæ ·çš„æ–¹æ³•å†æ·»åŠ ä¸¤ä¸ªimage viewå¯¹è±¡ï¼Œimageå±žæ€§åˆ†åˆ«ä¸ºuser2ï¼Œuser3ã€‚ç²—ç•¥è°ƒæ•´å›¾ç‰‡çš„å¸¦ä¸‹ï¼Œæ”¾åœ¨ä¸€ä¸ªæ°´å¹³ï¼Œå¤§æ¦‚å¦‚ä¸‹ï¼š é€‰ä¸­ä¸‰ä¸ªimage viewï¼Œå‡»Interface Builder editorå³ä¸‹è§’ä¸€ç»„æŒ‰é’®ä¸­çš„stackæŒ‰é’®ï¼Œåˆ™ç”Ÿæˆä¸€ä¸ªæ–°çš„horizontal stack viewã€‚ ä¿®æ”¹æ–°ç”Ÿæˆçš„horizontal stack viewçš„å±žæ€§ï¼Œspacingä¸º 10ï¼Œè¡¨ç¤ºå›¾ç‰‡ä¹‹é—´çš„é—´è·ï¼ŒDistributionä¸ºFill Equally åŒæ—¶é€‰ä¸­ä¸¤ä¸ªstack viewï¼Œç‚¹å‡»stack æŒ‰é’®ï¼Œå†ç”Ÿæˆä¸€ä¸ªæ–°çš„å¤§vertical stack view ä¸ºstack viewæ·»åŠ å¸ƒå±€çº¦æŸ é€‰ä¸­å¤§çš„stack viewï¼Œæ·»åŠ space constraintsï¼Œä¸Šï¼Œå·¦å³ï¼Œåˆ†åˆ«ä¸º70ï¼Œ0ï¼Œ0æ·»åŠ çº¦æŸåŽï¼Œå¦‚æžœå‡ºçŽ°å¸ƒå±€é—®é¢˜ï¼Œå¯é€šè¿‡issue indicatorè§£å†³ï¼Œå¯å‚è€ƒä¸Šä¸€ç¯‡æ–‡ç« ã€‚ çœ‹é¢„è§ˆassistant editorï¼ŒæŸ¥çœ‹å…¶å®ƒè®¾å¤‡ä¼šå‘çŽ°ä¸¤ä¸ªé—®é¢˜ï¼š Instant Developer labelæ–‡æœ¬åœ¨å°å±å¹•è®¾å¤‡è¢«æˆªæ–­ å›¾ç‰‡çš„å®½é«˜æ¯”æ”¹å˜äº† é€‰æ‹©Instant Developer labelï¼Œä¿®æ”¹Autoshrinkå±žæ€§ä¸ºMinimum Font Sizeï¼Œå€¼ä¸º20ï¼Œè¿™æ ·å°±è®¾ç½®äº†labelçš„å­—ä½“å¯ä»¥å˜åŒ–ï¼Œæœ€å°å€¼ä¸º20 ï¼Œå°å±å¹•å°±ä¸ä¼šè¢«æˆªæ–­äº†ã€‚ æ¨ªå‘control-dragå›¾ç‰‡çš„stack viewï¼Œé€‰æ‹©Aspect Ratioï¼Œä½¿å›¾ç‰‡çš„å®½é«˜æ¯”ä¸å˜åŒ–ã€‚ åœ¨å›¾ç‰‡stack viewä¸‹æ·»åŠ ä¸€ä¸ªlabel æ‹–åŠ¨ä¸€ä¸ªlabelåˆ°å›¾ç‰‡ä¸‹ï¼Œçœ‹åˆ°ä¸€ä¸ªè“è‰²çº¿åŽæ¾å¼€ æ”¹å˜labelçš„æ–‡æœ¬ï¼šNeed help with your coding problems? Weâ€™ll find you the right developer who can help you in 15 minutes. labelçš„å±žæ€§linesæ”¹ä¸º0ï¼Œè¡¨ç¤ºä¸é™åˆ¶è¡Œæ•° é€‰æ‹©å¤§stack viewï¼Œä¿®æ”¹é—´è·sapcingä¸º10ï¼Œä¿®æ”¹Alignmentä¸ºå±…ä¸­ ç”¨stack viewå¸ƒå±€Buttons æ·»åŠ ä¸¤ä¸ªButtonï¼šâ€Sign inâ€ å’Œ â€œSign up with Facebookâ€ ä¿®æ”¹ç™½å­—ä½“ï¼Œçº¢èƒŒæ™¯ï¼Œå®½åº¦ä¸º200 é€‰æ‹©ä¸¤ä¸ªButtonç”Ÿæˆvertical stack viewï¼Œspacingä¸º10 ä¸ºvertical stack viewæ·»åŠ ä¸¤ä¸ªçº¦æŸï¼Œæ°´å¹³å±…ä¸­å’Œåº•è¾¹è·20 å½“æŠŠä¸¤ä¸ªbuttonèšåˆæˆstack viewæ—¶ï¼Œbuttonçš„å¤§å°ä¼šè‡ªåŠ¨è°ƒèŠ‚åˆ°é€‚å®œå¤§å°ï¼Œä¹Ÿå°±æ˜¯â€Sign up with Facebookâ€çš„å®½åº¦å˜ä¸º155 ã€‚éœ€è¦å†æ·»åŠ ä¸€ä¸ªå®½åº¦çº¦æŸï¼Œä¿®æ”¹Constantå€¼ä¸º200 ã€‚ ç”¨Size Classesæ¥è°ƒèŠ‚Stack view landscape orientation vs portrait orientationç›´è¯‘å°±æ˜¯é£Žæ™¯ç”»æ–¹å‘å’Œè‚–åƒç”»æ–¹å‘ï¼Œå…¶å®žå°±æ˜¯æŒ‡æ¨ªå±å’Œç«–å± ä¸Šé¢è®¾è®¡çš„UIçœ‹ä¸ŠåŽ»ä»¥ä¸é”™äº†ï¼Œä½†ä¸€ç›´æ²¡æœ‰è€ƒè™‘çš„æ¨ªå±çš„æƒ…å†µã€‚å› ä¸ºæ¨ªå±ä¸Šä¸‹é«˜åº¦å˜å°ï¼ŒåŽŸæœ¬åœ¨ç«–å±ä¸‹é€‚å®œçš„stack viewä¸Šè¾¹è·ï¼Œå°±æœ‰ç‚¹å¤§äº†ï¼Œéœ€è¦å°ä¸€ç‚¹ã€‚è¿™ä¹Ÿå¯¼è‡´äº†ï¼Œä»ŽiOS 8å¼€å§‹å¼•å…¥äº†ä¸€ä¸ªæ–°çš„UIè®¾è®¡æ¦‚å¿µAdaptive Layoutï¼ˆè‡ªé€‚åº”å¸ƒå±€ï¼‰ï¼Œä¸ºæ­¤ï¼ŒAppleå¼•å…¥äº†Size Classesã€‚é€šè¿‡Size Classes å’Œ auto layoutä¸€èµ·è®¾è®¡è‡ªé€‚åº”UIã€‚Size Classesä»…ä»…æ˜¯å¯¹å±å¹•è¿›è¡Œäº†åˆ†ç±», å®žé™…ä¸Šçš„å¸ƒå±€è¿˜æ˜¯äº¤ç»™autolayout Size Classesæœ‰ä¸¤ç§ç±»åž‹ï¼šregular å’Œ compactï¼ˆå¯ä»¥ç†è§£ä¸ºå¤§[R] å’Œ å°[C]ï¼‰ã€‚è€Œè¿™ä¸¤ç§ç±»åž‹åº”ç”¨åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šï¼švertical (height) å’Œ horizontal (width) ï¼Œå°±å¯¹åº”ä¸åŒç±»åž‹çš„è®¾å¤‡ï¼šRegular width-Regular Height, Regular width-Compact Height, Compact width-Regular Height and Compact width-Compact Height æœ€æ–°ç‰ˆæœ¬çš„Xcodeå·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†ä¸åŒè®¾å¤‡å’Œæ–¹å‘çš„Size ClassesæŸ¥çœ‹ï¼š é€‰æ‹©ä¸Šè¾¹è·çº¦æŸã€‚åœ¨å±žæ€§æ£€æŸ¥å™¨ä¸­ï¼Œç‚¹å‡»Constantå‰é¢çš„+å·ï¼Œå¼¹æ¡†ä¸­åˆ†åˆ«é€‰æ‹©ï¼šWidthï¼šAnyï¼ŒHeightï¼šCompactï¼ŒGamuntï¼šAnyï¼ŒåŽé¢çš„å€¼ä¸º0ï¼Œè¡¨ç¤ºåªæœ‰åœ¨Compact heightä¸‹ä¸Šè¾¹è·ä¸º0 ä¸ºäº†æ›´åŠ ç®€æ´ä¹Ÿå¯ä»¥åœ¨æœ‰äº›å±å¹•çŠ¶æ€ä¸‹æŠŠâ€Need help with your â€¦â€ labeléšè—æŽ‰ï¼Œå°±æ˜¯heightä¸º0ã€‚ä¹Ÿå°±æ˜¯ä¸ºlabelæ·»åŠ ä¸€ä¸ªåªæœ‰åœ¨Widthï¼šAnyï¼ŒHeightï¼šCompactï¼ŒGamuntï¼šAnyè¿™ä¸ªSize Classesä¸‹ï¼Œçš„heightçº¦æŸã€‚ç”¨control-dragæ–¹æ³•æ·»åŠ heightçº¦æŸï¼š é€‰æ‹©çŽ°ä»·çš„heightçº¦æŸï¼Œä¿®æ”¹Constantä¸º0ï¼›åŽ»é™¤é€‰ä¸­Installedï¼Œç‚¹å‡»Installedå‰çš„+ï¼Œå¼¹å‡ºæ¡†é€‰æ‹©Widthï¼šAnyï¼ŒHeightï¼šCompactï¼ŒGamuntï¼šAnyï¼Œå¹¶é€‰æ‹©æ–°åŠ çš„Installedï¼ˆheightçº¦æŸé¢œè‰²å˜æµ…äº†ï¼Œè¯´æ˜Žè¿™ä¸ªçº¦æŸä¸æ˜¯åœ¨ä»»ä½•çŠ¶æ€ä¸‹éƒ½æœ‰æ•ˆçš„ï¼‰ï¼š ç»ƒä¹ è¿˜æœ‰è€ƒè™‘ç‰¹æ®Šçš„ä¸€äº›è®¾å¤‡çš„æƒ…å†µï¼Œæ·»åŠ ä¸€äº›ç‰¹æ®Šçš„çº¦æŸï¼š åœ¨wR hRæ—¶ï¼Œä¿®æ”¹ä¸¤ä¸ªæŒ‰é’®çš„å®½åº¦ä¸º300 åœ¨iphone 6/7 å’Œä¸€äº›è€çš„iphoneç­‰è®¾å¤‡ç«–å±æ—¶ï¼Œä¿®æ”¹â€Need help with â€¦â€ label å­—ä½“ä¸º15 åœ¨wR hRæ—¶ï¼Œä¿®æ”¹å›¾åƒstack viewçš„ä¸Šä¸‹ç©ºé—´ä¸º30 ä»£ç Beginning-iOS-Programming-with-Swift è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-17ï¼šOptional Chaining]]></title>
    <url>%2F2017%2Fswift-17.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128/** Optional Chaining å¯é€‰é“¾å¼è°ƒç”¨ ä¸€ç§å¯ä»¥åœ¨å½“å‰å€¼å¯èƒ½ä¸ºnilçš„å¯é€‰å€¼ä¸Šè¯·æ±‚å’Œè°ƒç”¨å±žæ€§ã€æ–¹æ³•åŠä¸‹æ ‡çš„æ–¹æ³• */// 1 ä½¿ç”¨å¯é€‰é“¾å¼è°ƒç”¨ä»£æ›¿å¼ºåˆ¶å±•å¼€// å¯é€‰é“¾å¼è°ƒç”¨çš„è¿”å›žç»“æžœä¸ŽåŽŸæœ¬çš„è¿”å›žç»“æžœå…·æœ‰ç›¸åŒçš„ç±»åž‹ï¼Œä½†æ˜¯è¢«åŒ…è£…æˆäº†ä¸€ä¸ªå¯é€‰å€¼ã€‚class Person &#123; var residence: Residence?&#125;class Residence &#123; var numberOfRooms = 1&#125;let john = Person()if let roomCount = john.residence?.numberOfRooms &#123; print(&quot;John&apos;s residence has \(roomCount) room(s).&quot;)&#125; else &#123; print(&quot;Unable to retrieve the number of rooms.&quot;)&#125;john.residence = Residence()if let roomCount = john.residence?.numberOfRooms &#123; print(&quot;John&apos;s residence has \(roomCount) room(s).&quot;)&#125; else &#123; print(&quot;Unable to retrieve the number of rooms.&quot;)&#125;// 2 ä¸ºå¯é€‰é“¾å¼è°ƒç”¨å®šä¹‰æ¨¡åž‹ç±»class Person2 &#123; var residence: Residence2?&#125;class Residence2 &#123; var rooms = [Room]() var numberOfRooms: Int &#123; return rooms.count &#125; subscript(i: Int) -&gt; Room &#123; get &#123; return rooms[i] &#125; set &#123; rooms[i] = newValue &#125; &#125; func printNumberOfRooms() &#123; print(&quot;The number of rooms is \(numberOfRooms)&quot;) &#125; var address: Address?&#125;class Room &#123; let name: String init(name: String) &#123; self.name = name &#125;&#125;class Address &#123; var buildingName: String? var buildingNumber: String? var street: String? func buildingIdentifier() -&gt; String? &#123; if buildingName != nil &#123; return buildingName &#125; else if buildingNumber != nil &amp;&amp; street != nil &#123; return &quot;\(buildingNumber) \(street)&quot; &#125; else &#123; return nil &#125; &#125;&#125;func createAddress() -&gt; Address &#123; print(&quot;Function was called.&quot;) let someAddress = Address() someAddress.buildingNumber = &quot;29&quot; someAddress.street = &quot;Acacia Road&quot; return someAddress&#125;// 3 é€šè¿‡å¯é€‰é“¾å¼è°ƒç”¨è®¿é—®å±žæ€§let andy = Person2()andy.residence?.address = createAddress() // andy.residenceç»“æžœä¸ºnilï¼Œå¯é€‰é“¾å¼è°ƒç”¨å¤±è´¥æ—¶ï¼Œç­‰å·å³ä¾§çš„ä»£ç ä¸ä¼šè¢«æ‰§è¡Œã€‚// 4 é€šè¿‡å¯é€‰é“¾å¼è°ƒç”¨è°ƒç”¨æ–¹æ³•if let firstRoomName = andy.residence?[0].name &#123; print(&quot;The first room name is \(firstRoomName).&quot;)&#125; else &#123; print(&quot;Unable to retrieve the first room name.&quot;)&#125;let andyHouse = Residence2()andyHouse.rooms.append(Room(name: &quot;Living Room&quot;))andyHouse.rooms.append(Room(name: &quot;Kitchen&quot;))andy.residence = andyHouseif let firstRoomName = andy.residence?[0].name &#123; print(&quot;The first room name is \(firstRoomName).&quot;)&#125; else &#123; print(&quot;Unable to retrieve the first room name.&quot;)&#125;// 5 è®¿é—®å¯é€‰ç±»åž‹çš„ä¸‹æ ‡var testScores = [&quot;Dave&quot;: [86, 82, 84], &quot;Bev&quot;: [79, 94, 81]]testScores[&quot;Dave&quot;]?[0] = 91testScores[&quot;Bev&quot;]?[0] += 1testScores[&quot;Brian&quot;]?[0] = 72// 6 è¿žæŽ¥å¤šå±‚å¯é€‰é“¾å¼è°ƒç”¨if let andyStreet = andy.residence?.address?.street &#123; print(&quot;John&apos;s street name is \(andyStreet).&quot;)&#125; else &#123; print(&quot;Unable to retrieve the address.&quot;)&#125;let andyAddress = Address()andyAddress.buildingName = &quot;ä¸œæ–¹æ˜Žç &quot;andyAddress.street = &quot;å—äº¬ä¸œè·¯100å·&quot;andy.residence?.address = andyAddressif let andyStreet = andy.residence?.address?.street &#123; print(&quot;John&apos;s street name is \(andyStreet).&quot;)&#125; else &#123; print(&quot;Unable to retrieve the address.&quot;)&#125;// 7 åœ¨æ–¹æ³•çš„å¯é€‰è¿”å›žå€¼ä¸Šè¿›è¡Œå¯é€‰é“¾å¼è°ƒç”¨if let buildingIdentifier = andy.residence?.address?.buildingIdentifier() &#123; print(&quot;John&apos;s building identifier is \(buildingIdentifier).&quot;)&#125;if let beginsWithThe = andy.residence?.address?.buildingIdentifier()?.hasPrefix(&quot;ä¸œ&quot;) &#123; if beginsWithThe &#123; print(&quot;John&apos;s building identifier begins with \&quot;ä¸œ\&quot;.&quot;) &#125; else &#123; print(&quot;John&apos;s building identifier does not begin with \&quot;ä¸œ\&quot;.&quot;) &#125;&#125;]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-16ï¼šAutomatic Reference Counting]]></title>
    <url>%2F2017%2Fswift-16.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131/** Automatic Reference Counting(ARC) å¼•ç”¨è®¡æ•°ä»…ä»…åº”ç”¨äºŽç±»çš„å®žä¾‹ */// 1 è‡ªåŠ¨å¼•ç”¨è®¡æ•°çš„å·¥ä½œæœºåˆ¶// æ¯æ¬¡åˆ›å»ºä¸€ä¸ªç±»çš„æ–°çš„å®žä¾‹çš„æ—¶å€™ï¼ŒARCä¼šåˆ†é…ä¸€å—å†…å­˜æ¥å‚¨å­˜è¯¥å®žä¾‹ä¿¡æ¯(åŒ…å«å®žä¾‹çš„ç±»åž‹ä¿¡æ¯ï¼Œä»¥åŠè¿™ä¸ªå®žä¾‹æ‰€æœ‰ç›¸å…³çš„å­˜å‚¨åž‹å±žæ€§çš„å€¼)ã€‚// ARCä¼šè·Ÿè¸ªå’Œè®¡ç®—æ¯ä¸€ä¸ªå®žä¾‹æ­£åœ¨è¢«å¤šå°‘å±žæ€§ï¼Œå¸¸é‡å’Œå˜é‡æ‰€å¼•ç”¨ã€‚// å¼•ç”¨æ•°ä¸º0æ—¶ï¼Œå†…å­˜é‡Šæ”¾ã€‚// 2 ðŸŒ°class Person &#123; let name: String init(name: String) &#123; self.name = name print(&quot;\(name) is being initialized&quot;) &#125; deinit &#123; print(&quot;\(name) is being deinitialized&quot;) &#125;&#125;var reference1: Person?var reference2: Person?var reference3: Person?reference1 = Person(name: &quot;John Appleseed&quot;)reference2 = reference1reference3 = reference1reference1 = nilreference2 = nilreference3 = nil// 3 ç±»å®žä¾‹ä¹‹é—´çš„å¾ªçŽ¯å¼ºå¼•ç”¨class Person2 &#123; let name: String init(name: String) &#123; self.name = name &#125; var apartment: Apartment2? deinit &#123; print(&quot;\(name) is being deinitialized&quot;) &#125;&#125;class Apartment2 &#123; let unit: String init(unit: String) &#123; self.unit = unit &#125; var tenant: Person2? deinit &#123; print(&quot;Apartment \(unit) is being deinitialized&quot;) &#125;&#125;var andy: Person2?var unit4A: Apartment2?andy = Person2(name: &quot;Andy Ron&quot;)unit4A = Apartment2(unit: &quot;4A&quot;)andy!.apartment = unit4Aunit4A!.tenant = andyandy = nilunit4A = nil// johnå’Œunit4Aä¸¤ä¸ªå˜é‡è™½ç„¶å·²ç»è¢«èµ‹å€¼ä¸ºnilï¼Œä½†ä¹‹å‰å®ƒä»¬å¼•ç”¨ä¸¤ä¸ªå®žä¾‹ä¹‹é—´çš„å¼ºå¼•ç”¨å…³ç³»ä¿ç•™äº†ä¸‹æ¥å¹¶ä¸”ä¸ä¼šè¢«æ–­å¼€// 4 è§£å†³å®žä¾‹ä¹‹é—´çš„å¾ªçŽ¯å¼ºå¼•ç”¨// å¼±å¼•ç”¨(weak reference)å’Œæ— ä¸»å¼•ç”¨(unowned reference)å…è®¸å¾ªçŽ¯å¼•ç”¨ä¸­çš„ä¸€ä¸ªå®žä¾‹å¼•ç”¨å¦å¤–ä¸€ä¸ªå®žä¾‹è€Œä¸ä¿æŒå¼ºå¼•ç”¨ã€‚// 4.1 å¼±å¼•ç”¨:å¼±å¼•ç”¨å¿…é¡»è¢«å£°æ˜Žä¸ºå˜é‡ï¼Œè¡¨æ˜Žå…¶å€¼èƒ½åœ¨è¿è¡Œæ—¶è¢«ä¿®æ”¹ã€‚`weak`class Person3 &#123; let name: String init(name: String) &#123; self.name = name &#125; var apartment: Apartment3? deinit &#123; print(&quot;\(name) is being deinitialized&quot;) &#125;&#125;class Apartment3 &#123; let unit: String init(unit: String) &#123; self.unit = unit &#125; weak var tenant: Person3? deinit &#123; print(&quot;Apartment \(unit) is being deinitialized&quot;) &#125;&#125;var andy3: Person3?var unit5A: Apartment3?andy3 = Person3(name: &quot;Andy Ron3&quot;)unit5A = Apartment3(unit: &quot;5A&quot;)andy3!.apartment = unit5Aunit5A!.tenant = andy3andy3 = nil // Person3çš„å®žä¾‹è¢«é”€æ¯ï¼Œè™½ç„¶tenantè¿˜å¼•ç”¨å®ƒï¼Œä½†å› ä¸ºæ—¶å¼±å¼•ç”¨åœ¨ARCè®¡æ•°èŒƒå›´å†…ã€‚unit5A = nil// 4.2 æ— ä¸»å¼•ç”¨ `unowned`// å’Œå¼±å¼•ç”¨ä¸åŒçš„æ˜¯ï¼Œæ— ä¸»å¼•ç”¨æ˜¯æ°¸è¿œæœ‰å€¼çš„ã€‚// Customeræ˜¯å®¢æˆ·ï¼ŒCreditCardæ˜¯ä¿¡ç”¨å¡ã€‚å®¢æˆ·å¯ä»¥æœ‰æˆ–äº”ä¿¡ç”¨å¡ï¼Œä½†ä¿¡ç”¨å¡å¿…é¡»æœ‰å¯¹åº”çš„ç”¨æˆ·ã€‚class Customer &#123; let name: String var card: CreditCard? init(name: String) &#123; self.name = name &#125; deinit &#123; print(&quot;\(name) is being deinitialized&quot;) &#125;&#125;class CreditCard &#123; let number: UInt64 unowned let customer: Customer init(number: UInt64, customer: Customer) &#123; self.number = number self.customer = customer &#125; deinit &#123; print(&quot;Card #\(number) is being deinitialized&quot;) &#125;&#125;var john: Customer?john = Customer(name: &quot;John Appleseed&quot;)john!.card = CreditCard(number: 1234_5678_9012_3456, customer: john!)john = nil // å®¢æˆ·è¢«é”€æ¯ï¼Œå¯¹åº”çš„ä¿¡ç”¨å¡ä¹Ÿè¦è¢«é”€æ¯ã€‚// æ‰“å° â€œJohn Appleseed is being deinitializedâ€// æ‰“å° â€Card #1234567890123456 is being deinitializedâ€// 4.3 æ— ä¸»å¼•ç”¨ä»¥åŠéšå¼è§£æžå¯é€‰å±žæ€§ ï¼Ÿï¼Ÿclass Country &#123; let name: String var capitalCity: City! init(name: String, capitalName: String) &#123; self.name = name self.capitalCity = City(name: capitalName, country: self) &#125;&#125;class City &#123; let name: String unowned let country: Country init(name: String, country: Country) &#123; self.name = name self.country = country &#125;&#125;var country = Country(name: &quot;Canada&quot;, capitalName: &quot;Ottawa&quot;)print(&quot;\(country.name)&apos;s capital city is called \(country.capitalCity.name)&quot;)]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-15ï¼š(ç±»çš„)Deinitialization]]></title>
    <url>%2F2017%2Fswift-15.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 1234567891011121314151617181920212223242526272829303132333435363738394041424344/** (ç±»çš„)Deinitialization */// 1 æžæž„è¿‡ç¨‹åŽŸç†// æ¯ä¸ªç±»æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªæžæž„å™¨ï¼Œè€Œä¸”æžæž„å™¨ä¸å¸¦ä»»ä½•å‚æ•°// æžæž„å™¨æ˜¯åœ¨å®žä¾‹é‡Šæ”¾å‘ç”Ÿå‰è¢«è‡ªåŠ¨è°ƒç”¨ã€‚ä¸èƒ½ä¸»åŠ¨è°ƒç”¨æžæž„å™¨ã€‚// å­ç±»ç»§æ‰¿äº†çˆ¶ç±»çš„æžæž„å™¨ï¼Œå¹¶ä¸”åœ¨å­ç±»æžæž„å™¨å®žçŽ°çš„æœ€åŽï¼Œçˆ¶ç±»çš„æžæž„å™¨ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚// 2 æžæž„å™¨å®žè·µclass Bank &#123; static var coinsInBank = 10_000 static func vendCoins(numberOfCoinsRequested: Int) -&gt; Int &#123; let numberOfCoinsToVend = min(numberOfCoinsRequested, coinsInBank) coinsInBank -= numberOfCoinsToVend return numberOfCoinsToVend &#125; static func receiveCoins(coins: Int) &#123; coinsInBank += coins &#125;&#125;class Player &#123; var coinsInPurse: Int init(coins: Int) &#123; coinsInPurse = Bank.vendCoins(numberOfCoinsRequested: coins) &#125; func winCoins(coins: Int) &#123; coinsInPurse += Bank.vendCoins(numberOfCoinsRequested: coins) &#125; deinit &#123; Bank.receiveCoins(coins: coinsInPurse) &#125;&#125;var playerOne: Player? = Player(coins: 100)print(&quot;A new player has joined the game with \(playerOne!.coinsInPurse) coins&quot;)print(&quot;There are now \(Bank.coinsInBank) coins left in the bank&quot;)playerOne!.winCoins(coins: 2_000)print(&quot;PlayerOne won 2000 coins &amp; now has \(playerOne!.coinsInPurse) coins&quot;)print(&quot;The bank now only has \(Bank.coinsInBank) coins left&quot;)playerOne = nilprint(&quot;PlayerOne has left the game&quot;)print(&quot;The bank now has \(Bank.coinsInBank) coins&quot;)]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-14ï¼šInitialization]]></title>
    <url>%2F2017%2Fswift-14.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283/** Initialization */// æž„é€ è¿‡ç¨‹æ˜¯ä½¿ç”¨ç±»ã€ç»“æž„ä½“æˆ–æžšä¸¾ç±»åž‹çš„å®žä¾‹ä¹‹å‰çš„å‡†å¤‡è¿‡ç¨‹// é€šè¿‡å®šä¹‰æž„é€ å™¨( Initializers )æ¥å®žçŽ°æž„é€ è¿‡ç¨‹// 1 å­˜å‚¨å±žæ€§çš„åˆå§‹èµ‹å€¼// ç±»å’Œç»“æž„ä½“åœ¨åˆ›å»ºå®žä¾‹æ—¶ï¼Œå¿…é¡»ä¸ºæ‰€æœ‰å­˜å‚¨åž‹å±žæ€§è®¾ç½®åˆé€‚çš„åˆå§‹å€¼ã€‚// å½“ä½ ä¸ºå­˜å‚¨åž‹å±žæ€§è®¾ç½®é»˜è®¤å€¼æˆ–è€…åœ¨æž„é€ å™¨ä¸­ä¸ºå…¶èµ‹å€¼æ—¶ï¼Œå®ƒä»¬çš„å€¼æ˜¯è¢«ç›´æŽ¥è®¾ç½®çš„ï¼Œä¸ä¼šè§¦å‘ä»»ä½•å±žæ€§è§‚å¯Ÿè€…ã€‚// 2 è‡ªå®šä¹‰æž„é€ è¿‡ç¨‹struct Celsius &#123; var temperatureInCelsius: Double init(fromFahrenheit fahrenheit: Double) &#123; temperatureInCelsius = (fahrenheit - 32.0) / 1.8 &#125; init(fromKelvin kelvin: Double) &#123; temperatureInCelsius = kelvin - 273.15 &#125;&#125;let boilingPointOfWater = Celsius(fromFahrenheit: 212.0)// boilingPointOfWater.temperatureInCelsius æ˜¯ 100.0let freezingPointOfWater = Celsius(fromKelvin: 273.15)// freezingPointOfWater.temperatureInCelsius æ˜¯ 0.0struct Color &#123; let red, green, blue: Double init(red: Double, green: Double, blue: Double) &#123; self.red = red self.green = green self.blue = blue &#125; init(white: Double) &#123; red = white green = white blue = white &#125;&#125;let magenta = Color(red: 1.0, green: 0.0, blue: 1.0)let halfGray = Color(white: 0.5)// ä¸å¸¦å¤–éƒ¨åçš„æž„é€ å™¨å‚æ•°struct Celsius2 &#123; var temperatureInCelsius: Double init(fromFahrenheit fahrenheit: Double) &#123; temperatureInCelsius = (fahrenheit - 32.0) / 1.8 &#125; init(fromKelvin kelvin: Double) &#123; temperatureInCelsius = kelvin - 273.15 &#125; init(_ celsius: Double)&#123; temperatureInCelsius = celsius &#125;&#125;// å¯é€‰å±žæ€§ç±»åž‹class SurveyQuestion &#123; var text: String var response: String? init(text: String) &#123; self.text = text &#125; func ask() &#123; print(text) &#125;&#125;// å¯¹äºŽç±»çš„å®žä¾‹æ¥è¯´ï¼Œå®ƒçš„å¸¸é‡å±žæ€§åªèƒ½åœ¨å®šä¹‰å®ƒçš„ç±»çš„æž„é€ è¿‡ç¨‹ä¸­ä¿®æ”¹;ä¸èƒ½åœ¨å­ç±»ä¸­ä¿®æ”¹ã€‚class SurveyQuestion2 &#123; let text: String var response: String? init(text: String) &#123; self.text = text &#125; func ask() &#123; print(text) &#125;&#125;// 3 é»˜è®¤æž„é€ å™¨// å¦‚æžœç»“æž„ä½“æˆ–ç±»çš„æ‰€æœ‰å±žæ€§éƒ½æœ‰é»˜è®¤å€¼ï¼Œç›¸å½“äºŽæœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„æž„é€ å™¨class ShoppingListItem &#123; var name: String? var quantity = 1 var purchased = false&#125;var item = ShoppingListItem()// ç»“æž„ä½“çš„é€ä¸€æˆå‘˜æž„é€ å™¨struct Size &#123; var width = 0.0, height = 0.0&#125;let twoByTwo = Size(width: 2.0, height: 2.0)// 4 å€¼ç±»åž‹(ç»“æž„ä½“å’Œæžšä¸¾ç±»åž‹)çš„æž„é€ å™¨ä»£ç†(è°ƒç”¨å…¶å®ƒæž„é€ å™¨æ¥å®Œæˆå®žä¾‹çš„éƒ¨åˆ†æž„é€ è¿‡ç¨‹)struct Point &#123; var x = 0.0, y = 0.0&#125;struct Rect &#123; var origin = Point() var size = Size() init() &#123;&#125; // åŠŸèƒ½ä¸Šä¸Žæ‰€æœ‰å±žæ€§éƒ½æœ‰é»˜è®¤å€¼çš„é»˜è®¤æž„é€ å™¨ç±»ä¼¼ init(origin: Point, size: Size) &#123; // åŠŸèƒ½ä¸Šä¸Žç»“æž„ä½“çš„é€ä¸€æˆå‘˜æž„é€ å™¨ç±»ä¼¼ self.origin = origin self.size = size &#125; init(center: Point, size: Size) &#123; let originX = center.x - (size.width / 2) let originY = center.y - (size.height / 2) self.init(origin: Point(x: originX, y: originY), size: size) &#125;&#125;// 5 ç±»çš„ç»§æ‰¿å’Œæž„é€ è¿‡ç¨‹/* æŒ‡å®šæž„é€ å™¨(designated initializers)ï¼šä¸»è¦ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªã€‚ä¸€ä¸ªæŒ‡å®šæž„é€ å™¨å°†åˆå§‹åŒ–ç±»ä¸­æä¾›çš„æ‰€æœ‰å±žæ€§ï¼Œå¹¶æ ¹æ®çˆ¶ç±»é“¾å¾€ä¸Šè°ƒç”¨çˆ¶ç±»çš„æž„é€ å™¨æ¥å®žçŽ°çˆ¶ç±»çš„åˆå§‹åŒ–ã€‚ init(parameters) &#123; statements &#125; *//* ä¾¿åˆ©æž„é€ å™¨(convenience initializers)ï¼šæ¬¡è¦ï¼Œè¾…åŠ©ã€‚ convenience init(parameters) &#123; statements &#125; */// ç±»çš„æž„é€ å™¨ä»£ç†è§„åˆ™// 1 æŒ‡å®šæž„é€ å™¨å¿…é¡»è°ƒç”¨å…¶ç›´æŽ¥çˆ¶ç±»çš„çš„æŒ‡å®šæž„é€ å™¨ã€‚// 2 ä¾¿åˆ©æž„é€ å™¨å¿…é¡»è°ƒç”¨åŒä¸€ç±»ä¸­å®šä¹‰çš„å…¶å®ƒæž„é€ å™¨ã€‚// 3 ä¾¿åˆ©æž„é€ å™¨å¿…é¡»æœ€ç»ˆå¯¼è‡´ä¸€ä¸ªæŒ‡å®šæž„é€ å™¨è¢«è°ƒç”¨ã€‚// ä¸¤æ®µå¼æž„é€ è¿‡ç¨‹// ç¬¬ä¸€é˜¶æ®µï¼šæ¯ä¸ªå­˜å‚¨åž‹å±žæ€§è¢«å¼•å…¥å®ƒä»¬çš„ç±»æŒ‡å®šä¸€ä¸ªåˆå§‹å€¼// ç¬¬äºŒé˜¶æ®µï¼šç»™æ¯ä¸ªç±»ä¸€æ¬¡æœºä¼šï¼Œåœ¨æ–°å®žä¾‹å‡†å¤‡ä½¿ç”¨ä¹‹å‰è¿›ä¸€æ­¥å®šåˆ¶å®ƒä»¬çš„å­˜å‚¨åž‹å±žæ€§// 4ç§æœ‰æ•ˆçš„å®‰å…¨æ£€æŸ¥(ç¡®ä¿ä¸¤æ®µå¼æž„é€ è¿‡ç¨‹èƒ½ä¸å‡ºé”™åœ°å®Œæˆ)// 1 æŒ‡å®šæž„é€ å™¨å¿…é¡»ä¿è¯å®ƒæ‰€åœ¨ç±»å¼•å…¥çš„æ‰€æœ‰å±žæ€§éƒ½å¿…é¡»å…ˆåˆå§‹åŒ–å®Œæˆï¼Œä¹‹åŽæ‰èƒ½å°†å…¶å®ƒæž„é€ ä»»åŠ¡å‘ä¸Šä»£ç†ç»™çˆ¶ç±»ä¸­çš„æž„é€ å™¨ã€‚(ä¸€ä¸ªå¯¹è±¡çš„å†…å­˜åªæœ‰åœ¨å…¶æ‰€æœ‰å­˜å‚¨åž‹å±žæ€§ç¡®å®šä¹‹åŽæ‰èƒ½å®Œå…¨åˆå§‹åŒ–)// 2 æŒ‡å®šæž„é€ å™¨å¿…é¡»å…ˆå‘ä¸Šä»£ç†è°ƒç”¨çˆ¶ç±»æž„é€ å™¨ï¼Œç„¶åŽå†ä¸ºç»§æ‰¿çš„å±žæ€§è®¾ç½®æ–°å€¼ã€‚å¦‚æžœæ²¡è¿™ä¹ˆåšï¼ŒæŒ‡å®šæž„é€ å™¨èµ‹äºˆçš„æ–°å€¼å°†è¢«çˆ¶ç±»ä¸­çš„æž„é€ å™¨æ‰€è¦†ç›–ã€‚// 3 ä¾¿åˆ©æž„é€ å™¨å¿…é¡»å…ˆä»£ç†è°ƒç”¨åŒä¸€ç±»ä¸­çš„å…¶å®ƒæž„é€ å™¨ï¼Œç„¶åŽå†ä¸ºä»»æ„å±žæ€§èµ‹æ–°å€¼ã€‚å¦‚æžœæ²¡è¿™ä¹ˆåšï¼Œä¾¿åˆ©æž„é€ å™¨èµ‹äºˆçš„æ–°å€¼å°†è¢«åŒä¸€ç±»ä¸­å…¶å®ƒæŒ‡å®šæž„é€ å™¨æ‰€è¦†ç›–ã€‚// 4 æž„é€ å™¨åœ¨ç¬¬ä¸€é˜¶æ®µæž„é€ å®Œæˆä¹‹å‰ï¼Œä¸èƒ½è°ƒç”¨ä»»ä½•å®žä¾‹æ–¹æ³•ï¼Œä¸èƒ½è¯»å–ä»»ä½•å®žä¾‹å±žæ€§çš„å€¼ï¼Œä¸èƒ½å¼•ç”¨selfä½œä¸ºä¸€ä¸ªå€¼ã€‚// æž„é€ å™¨çš„ç»§æ‰¿å’Œé‡å†™class Vehicle &#123; var numberOfWheels = 0 var description: String &#123; return &quot;\(numberOfWheels) wheel(s)&quot; &#125;&#125;class Bicycle: Vehicle &#123; override init() &#123; super.init() // ç¡®ä¿`Bicycle`åœ¨ä¿®æ”¹`Vehicle`çš„å±žæ€§ä¹‹å‰ï¼Œå®ƒæ‰€ç»§æ‰¿çš„å±žæ€§`numberOfWheels`èƒ½è¢«`Vehicle`åˆå§‹åŒ– numberOfWheels = 2 &#125;&#125;let bicycle = Bicycle()bicycle.numberOfWheels// æ³¨ï¼šå­ç±»å¯ä»¥åœ¨åˆå§‹åŒ–æ—¶ä¿®æ”¹ç»§æ‰¿æ¥çš„å˜é‡å±žæ€§ï¼Œä½†æ˜¯ä¸èƒ½ä¿®æ”¹ç»§æ‰¿æ¥çš„å¸¸é‡å±žæ€§ã€‚// æž„é€ å™¨çš„è‡ªåŠ¨ç»§æ‰¿// è§„åˆ™1ï¼šå¦‚æžœå­ç±»æ²¡æœ‰å®šä¹‰ä»»ä½•æŒ‡å®šæž„é€ å™¨ï¼Œå®ƒå°†è‡ªåŠ¨ç»§æ‰¿æ‰€æœ‰çˆ¶ç±»çš„æŒ‡å®šæž„é€ å™¨ã€‚// è§„åˆ™2ï¼šå¦‚æžœå­ç±»æä¾›äº†æ‰€æœ‰çˆ¶ç±»æŒ‡å®šæž„é€ å™¨çš„å®žçŽ°â€”â€”æ— è®ºæ˜¯é€šè¿‡è§„åˆ™1ç»§æ‰¿è¿‡æ¥çš„ï¼Œè¿˜æ˜¯æä¾›äº†è‡ªå®šä¹‰å®žçŽ°â€”â€”å®ƒå°†è‡ªåŠ¨ç»§æ‰¿æ‰€æœ‰çˆ¶ç±»çš„ä¾¿åˆ©æž„é€ å™¨ã€‚// æŒ‡å®šæž„é€ å™¨å’Œä¾¿åˆ©æž„é€ å™¨å®žè·µclass Food &#123; var name: String init(name: String) &#123; self.name = name &#125; convenience init() &#123; self.init(name: &quot;[Unnamed]&quot;) &#125;&#125;let namedMeat = Food(name: &quot;Bacon&quot;)let mysteryMeat = Food()class RecipeIngredient: Food &#123; // é£Ÿè°±ä¸­çš„ä¸€é¡¹åŽŸæ–™ var quantity: Int init(name: String, quantity: Int) &#123; self.quantity = quantity super.init(name: name) &#125; override convenience init(name: String) &#123; self.init(name: name, quantity: 1) &#125;&#125;let oneMysteryItem = RecipeIngredient()oneMysteryItem.quantity// `RecipeIngredient()`ä½¿ç”¨ä»Ž`Food`è‡ªåŠ¨ç»§æ‰¿çš„ä¾¿åˆ©æž„é€ å™¨`convenience init()`ï¼Œå¹¶åœ¨è¿™ä¸ªä¾¿åˆ©æž„é€ å™¨è°ƒç”¨è‡ªèº«çš„`override convenience init(name: String)`let oneBacon = RecipeIngredient(name: &quot;Bacon&quot;)let sixEggs = RecipeIngredient(name: &quot;Eggs&quot;, quantity: 6)class ShoppingListItem2: RecipeIngredient &#123; // è´­ç‰©å•ä¸­å‡ºçŽ°çš„æŸä¸€ç§é£Ÿè°±åŽŸæ–™ var purchased = false var description: String &#123; var output = &quot;\(quantity) x \(name)&quot; output += purchased ? &quot; æœ‰&quot; : &quot; æ— &quot; return output &#125;&#125;var breakfastList = [ ShoppingListItem2(), ShoppingListItem2(name: &quot;Bacon&quot;), ShoppingListItem2(name: &quot;Eggs&quot;, quantity: 6),]breakfastList[0].name = &quot;Orange juice&quot;breakfastList[0].purchased = truefor item in breakfastList &#123; print(item.description)&#125;// 6 å¯å¤±è´¥æž„é€ å™¨ init?struct Animal &#123; let species: String init?(species: String) &#123; if species.isEmpty &#123; return nil &#125; self.species = species &#125;&#125;let someCreature = Animal(species: &quot;Giraffe&quot;) // someCreatureçš„ç±»åž‹æ˜¯å¯é€‰ç±»åž‹Animal?ï¼Œè€Œä¸æ˜¯Animalif let giraffe = someCreature &#123; print(&quot;An animal was initialized with a species of \(giraffe.species)&quot;)&#125;enum TemperatureUnit &#123; case Kelvin, Celsius, Fahrenheit init?(symbol: Character) &#123; switch symbol &#123; case &quot;K&quot;: self = .Kelvin case &quot;C&quot;: self = .Celsius case &quot;F&quot;: self = .Fahrenheit default: return nil &#125; &#125;&#125;// å¸¦åŽŸå§‹å€¼çš„æžšä¸¾ç±»åž‹çš„å¯å¤±è´¥æž„é€ å™¨// å¸¦åŽŸå§‹å€¼çš„æžšä¸¾ç±»åž‹ä¼šè‡ªå¸¦ä¸€ä¸ªå¯å¤±è´¥æž„é€ å™¨ init?(rawValue:)enum TemperatureUnit2: Character &#123; case Kelvin = &quot;K&quot;, Celsius = &quot;C&quot;, Fahrenheit = &quot;F&quot;&#125;let fahrenheitUnit = TemperatureUnit2(rawValue: &quot;X&quot;)// æž„é€ å¤±è´¥çš„ä¼ é€’// ç±»ï¼Œç»“æž„ä½“ï¼Œæžšä¸¾çš„å¯å¤±è´¥æž„é€ å™¨å¯ä»¥æ¨ªå‘ä»£ç†åˆ°ç±»åž‹ä¸­çš„å…¶ä»–å¯å¤±è´¥æž„é€ å™¨ã€‚// ä¼ é€’è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªå¯å¤±è´¥æž„é€ å™¨è§¦å‘æž„é€ å¤±è´¥ï¼Œæ•´ä¸ªæž„é€ è¿‡ç¨‹å°†ç«‹å³ç»ˆæ­¢ã€‚class Product &#123; let name: String init?(name: String) &#123; if name.isEmpty &#123; return nil &#125; self.name = name &#125;&#125;class CartItem: Product &#123; let quantity: Int init?(name: String, quantity: Int) &#123; if quantity &lt; 1 &#123; return nil &#125; self.quantity = quantity super.init(name: name) &#125;&#125;if let zeroShirts = CartItem(name: &quot;shirt&quot;, quantity: 0) &#123; print(&quot;Item: \(zeroShirts.name), quantity: \(zeroShirts.quantity)&quot;)&#125; else &#123; print(&quot;Unable to initialize zero shirts&quot;)&#125;if let oneUnnamed = CartItem(name: &quot;&quot;, quantity: 1) &#123; print(&quot;Item: \(oneUnnamed.name), quantity: \(oneUnnamed.quantity)&quot;)&#125; else &#123; print(&quot;Unable to initialize one unnamed product&quot;)&#125;// å¯ä»¥ç”¨éžå¯å¤±è´¥æž„é€ å™¨é‡å†™å¯å¤±è´¥æž„é€ å™¨ï¼Œä½†ä¸å¯åè¿‡æ¥ã€‚// init!ç±»åž‹çš„å¯å¤±è´¥æž„é€ å™¨æž„é€ å¤±è´¥ï¼Œä¼šè§¦å‘æ–­è¨€ã€‚// 7 å¿…è¦æž„é€ å™¨// åœ¨ç±»çš„æž„é€ å™¨å‰æ·»åŠ `required`ä¿®é¥°ç¬¦è¡¨æ˜Žæ‰€æœ‰è¯¥ç±»çš„å­ç±»éƒ½å¿…é¡»å®žçŽ°è¯¥æž„é€ å™¨// åœ¨é‡å†™çˆ¶ç±»ä¸­å¿…è¦çš„æŒ‡å®šæž„é€ å™¨æ—¶ï¼Œä¸éœ€è¦æ·»åŠ  override ä¿®é¥°ç¬¦// 8 é€šè¿‡é—­åŒ…æˆ–å‡½æ•°è®¾ç½®å±žæ€§çš„é»˜è®¤å€¼// åœ¨é—­åŒ…æ‰§è¡Œæ—¶ï¼Œå®žä¾‹çš„å…¶å®ƒéƒ¨åˆ†éƒ½è¿˜æ²¡æœ‰åˆå§‹åŒ–ã€‚ä¹Ÿå°±è¯´ä¸èƒ½åœ¨é—­åŒ…é‡Œè®¿é—®å…¶å®ƒå±žæ€§ï¼Œå³ä½¿è¿™äº›å±žæ€§æœ‰é»˜è®¤å€¼ã€‚åŒæ ·ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨éšå¼çš„selfå±žæ€§ï¼Œæˆ–è€…è°ƒç”¨ä»»ä½•å®žä¾‹æ–¹æ³•ã€‚struct Checkerboard &#123; // è¥¿æ´‹è·³æ£‹æ£‹ç›˜ï¼ŒboardColorsæ˜¯æ£‹ç›˜é¢œè‰²æ•°ç»„(8*8) let boardColors: [Bool] = &#123; var temporaryBoard = [Bool]() var isBlack = false for i in 1...8 &#123; for j in 1...8 &#123; temporaryBoard.append(isBlack) isBlack = !isBlack &#125; isBlack = !isBlack &#125; return temporaryBoard &#125;() func squareIsBlackAtRow(row: Int, column: Int) -&gt; Bool &#123; return boardColors[(row * 8) + column] &#125;&#125;]]></content>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-13ï¼šInheritance]]></title>
    <url>%2F2017%2Fswift-13.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354/** Inheritance */// ä¸€ä¸ªç±»å¯ä»¥ç»§æ‰¿(inherit)å¦ä¸€ä¸ªç±»çš„æ–¹æ³•(methods)ï¼Œå±žæ€§(properties)å’Œå…¶å®ƒç‰¹æ€§// ç±»å¯ä»¥è°ƒç”¨å’Œè®¿é—®è¶…ç±»çš„æ–¹æ³•ï¼Œå±žæ€§å’Œä¸‹æ ‡(subscripts)ï¼Œå¹¶ä¸”å¯ä»¥é‡å†™(override)è¿™äº›æ–¹ æ³•ï¼Œå±žæ€§å’Œä¸‹æ ‡æ¥ä¼˜åŒ–æˆ–ä¿®æ”¹å®ƒä»¬çš„è¡Œä¸ºã€‚// å¯ä»¥ä¸ºç±»ä¸­ç»§æ‰¿æ¥çš„å±žæ€§æ·»åŠ å±žæ€§è§‚å¯Ÿå™¨(property observers)// 1 åŸºç±»(base class)class Vehicle &#123; var currentSpeed = 0.0 var description: String &#123; return &quot;traveling at \(currentSpeed) miles per hour&quot; &#125; func makeNoise() &#123; // ä»€ä¹ˆä¹Ÿä¸åš-å› ä¸ºè½¦è¾†ä¸ä¸€å®šä¼šæœ‰å™ªéŸ³ &#125;&#125;let someVehicle = Vehicle()// 2 å­ç±»ç”Ÿæˆ(Subclassing)class Bicycle: Vehicle &#123; var hasBasket = false&#125;let bicycle = Bicycle()bicycle.hasBasket = truebicycle.currentSpeed = 15.0print(&quot;Bicycle: \(bicycle.description)&quot;)class Tandem: Bicycle &#123; var currentNumberOfPassengers = 0&#125;// 3 é‡å†™(Overriding)// ä»»ä½•ç¼ºå°‘`override`å…³é”®å­—çš„é‡å†™éƒ½ä¼šåœ¨ç¼–è¯‘æ—¶è¢«è¯Šæ–­ä¸ºé”™è¯¯ã€‚// è®¿é—®è¶…ç±»çš„æ–¹æ³•ï¼Œå±žæ€§åŠä¸‹æ ‡ã€‚ `super`class Train: Vehicle &#123; override func makeNoise() &#123; print(&quot;Choo Choo&quot;) &#125;&#125;let train = Train()train.makeNoise()class Car: Vehicle &#123; var gear = 1 override var description: String &#123; return super.description + &quot; in gear \(gear)&quot; &#125;&#125;class AutomaticCar: Car &#123; override var currentSpeed: Double &#123; didSet &#123; gear = Int(currentSpeed / 10.0) + 1 &#125; &#125;&#125;// 4 é˜²æ­¢é‡å†™ (`final var`, `final func`, `final class func`, `final subscript`)]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-12ï¼šSubscripts]]></title>
    <url>%2F2017%2Fswift-12.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445/** Subscripts */// ä¸‹æ ‡ (subscripts)å¯ä»¥å®šä¹‰åœ¨ç±»(class)ã€ç»“æž„ä½“(structure)å’Œæžšä¸¾(enumeration)ä¸­ï¼Œæ˜¯è®¿é—®é›†åˆ(c ollection)ï¼Œåˆ—è¡¨(list)æˆ–åºåˆ—(sequence)ä¸­å…ƒç´ çš„å¿«æ·æ–¹å¼ã€‚// ä¸€ä¸ªç±»åž‹å¯ä»¥å®šä¹‰å¤šä¸ªä¸‹æ ‡ï¼Œé€šè¿‡ä¸åŒç´¢å¼•ç±»åž‹è¿›è¡Œé‡è½½ã€‚// 1 ä¸‹æ ‡è¯­æ³•struct TimesTable &#123; let multiplier: Int subscript(index: Int) -&gt; Int &#123; return multiplier * index &#125;&#125;let threeTimesTable = TimesTable(multiplier: 3)print(&quot;six times three is \(threeTimesTable[6])&quot;)// 2 ä¸‹æ ‡ç”¨æ³•// å­—å…¸é€šè¿‡ä¸‹æ ‡è¿”å›žæ˜¯å¯é€‰ç±»åž‹var numberOfLegs = [&quot;spider&quot;: 8, &quot;ant&quot;: 6, &quot;cat&quot;: 4]numberOfLegs[&quot;bird&quot;] = 2// 3 ä¸‹æ ‡é€‰é¡¹// ä¸‹æ ‡å¯ä»¥æŽ¥å—ä»»æ„æ•°é‡çš„å…¥å‚ï¼Œå¹¶ä¸”è¿™äº›å…¥å‚å¯ä»¥æ˜¯ä»»æ„ç±»åž‹ã€‚ä¸‹æ ‡çš„è¿”å›žå€¼ä¹Ÿå¯ä»¥æ˜¯ä»»æ„ç±»åž‹ã€‚ä¸‹æ ‡å¯ä»¥ä½¿ç”¨å˜é‡å‚æ•°å’Œå¯å˜å‚æ•°ï¼Œä½†ä¸èƒ½ä½¿ç”¨è¾“å…¥è¾“å‡ºå‚æ•°ï¼Œä¹Ÿä¸èƒ½ç»™å‚æ•°è®¾ç½®é»˜è®¤å€¼ã€‚// ä¸€ä¸ª Double ç±»åž‹çš„äºŒç»´çŸ©é˜µstruct Matrix &#123; let rows: Int, columns: Int var grid: [Double] init(rows: Int, columns: Int) &#123; self.rows = rows self.columns = columns grid = Array(repeating: 0.0, count: rows * columns) &#125; func indexIsValidForRow(row: Int, column: Int) -&gt; Bool &#123; return row &gt;= 0 &amp;&amp; row &lt; rows &amp;&amp; column &gt;= 0 &amp;&amp; column &lt; columns &#125; subscript(row: Int, column: Int) -&gt; Double &#123; get &#123; assert(indexIsValidForRow(row: row, column: column), &quot;Index out of range&quot;) return grid[(row * columns) + column] &#125; set &#123; assert(indexIsValidForRow(row: row, column: column), &quot;Index out of range&quot;) grid[(row * columns) + column] = newValue &#125; &#125;&#125;var matrix = Matrix(rows: 2, columns: 3)matrix[1, 2] = 2]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 2 Hello Worldï¼ç¬¬ä¸€ä¸ªSwift APP]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-2.html</url>
    <content type="text"><![CDATA[â€œHello,Worldâ€å·²ç»æˆä¸ºç¼–ç¨‹ä¸–ç•Œé‡Œå¼€å§‹çš„æƒ¯ä¾‹ã€‚ å¼€å§‹ï¼šå…ˆåŠ¨èµ·æ¥ï¼Œå¿˜è®°ä»£ç  æ‰“å¼€Xcodeï¼Œé€‰æ‹©â€Create a new Xcode projectâ€ é€‰æ‹© iOS &gt; Single View Application and click Next å¡«å†™é¡¹ç›®çš„ä¸€äº›é€‰é¡¹: Product Name: HelloWorld - appçš„åå­— Team - Apple ID Organization Name: andyron - è¿™ä¸€èˆ¬æ˜¯ç»„ç»‡çš„åå­—ï¼Œæˆ–ä¸ªäººç”¨æˆ·çš„åå­—ï¼›å°½é‡ä¿æŒä¸ä¸Žåˆ«äººé‡å¤ Organization Identifier: cn.andyron Bundle Identifier: com.andyron.HelloWorld - æ ¹æ®Organization Identifierå’ŒProduct Nameè‡ªåŠ¨ç»„åˆè€Œæˆ Language: Swift Devices: iPhone Use Core Data: [unchecked] Include Unit Tests: [unchecked] Include UI Tests: [unchecked] é€‰æ‹©ä¸€ä¸ªé¡¹ç›®ä¿æŒä½ç½®ï¼Œç„¶åŽç”Ÿæˆé¡¹ç›® ç†Ÿæ‚‰Xcodeç•Œé¢Xcode Helpä¸­è¯¦ç»†ä»‹ç»äº†Xcodeï¼Œä¸»ç•Œé¢å¦‚ä¸‹ï¼š ä¸»è¦åˆ†å…­ä¸ªåŒºåŸŸï¼š Toolbar(å·¥å…·æ ) Tab bar(ä¾¿ç­¾é¡µæ )ï¼šç±»ä¼¼æµè§ˆå™¨çš„æ ‡ç­¾é¡µï¼Œå¿«æ·é”®ä¹Ÿå’Œå¤§éƒ¨åˆ†è½¯ä»¶çš„ç›¸åŒ(âŒ˜+Tæ–°å»ºï¼ŒâŒ˜+Wå…³é—­)ï¼Œå•ä¸ªæ ‡ç­¾é¡µæ—¶æ˜¯éšè—çš„ Navigator area(å¯¼èˆªåŒºåŸŸ)è¿™ä¸ªåŒºåŸŸæœ€ä¸Šé¢æœ‰å…«ä¸ªå›¾æ ‡ï¼ˆå¿«æ·é”®åˆ†åˆ«å¯¹åº”âŒ˜+1 ~ âŒ˜+8ï¼‰ï¼š project navigator(æºä»£ç æ–‡ä»¶ã€å›¾ç‰‡æ–‡ä»¶ã€æ•°æ®æ¨¡åž‹ã€å±žæ€§åˆ—è¡¨ç­‰) symbol navigator(ç¼–è¯‘å™¨èƒ½è¯†åˆ«çš„ï¼šOCç±»ã€æžšä¸¾ç±»åž‹ã€ç»“æž„ä½“ã€å…¨å±€å˜é‡) find navigator issues navigator test navigator debug navigator breakpoint navigator log navigator Editor areaï¼ˆç¼–è¾‘åŒºï¼‰è¿™ä¸ªåŒºåŸŸæœ€ä¸Šé¢æ˜¯jump bar(è·³è½¬æ ) Debug area Utilities areaï¼ˆå®žç”¨å·¥å…·é¢æ¿ï¼‰åˆ†ä¸Šä¸‹ä¸¤å—ï¼š Inspector pane(æ£€æŸ¥å™¨)ï¼šé€‰æ‹©ä¸åŒæ–‡ä»¶ä¼šæœ‰ä¸åŒä¸ªæ•°çš„æ£€æŸ¥å™¨ï¼Œæœ€å¤šå…­ä¸ª(å¿«æ·é”®åˆ†åˆ«å¯¹åº”âŒ˜+option+1 ~ âŒ˜+option+6)ã€‚ Library pane(åº“é¢ç‰ˆ, å¿«æ·é”®åˆ†åˆ«å¯¹åº”âŒ˜+option+control+1 ~ âŒ˜+option+control+4) æ–‡ä»¶åº“æ¨¡æ¿(File Template Library) : ç®¡ç†æ–‡ä»¶æ¨¡æ¿, å¯ä»¥å¿«é€Ÿåˆ›å»ºæŒ‡å®šç±»åž‹æ–‡ä»¶, å¯ä»¥ç›´æŽ¥æ‹–å…¥é¡¹ç›®ä¸­; ä»£ç ç‰‡æ®µåº“(Code Snippet Library) : ç®¡ç†å„ç§ä»£ç ç‰‡æ®µ, å¯ä»¥ç›´æŽ¥æ‹–å…¥æºä»£ç ä¸­; å¯¹è±¡åº“(Object Library) : ç•Œé¢ç»„ä»¶, å¯ä»¥ç›´æŽ¥æ‹–å…¥ æ•…äº‹æ¿ä¸­; åª’ä½“åº“(Media Library) : ç®¡ç†å„ç§ å›¾ç‰‡, éŸ³é¢‘ ç­‰å¤šåª’ä½“èµ„æº; ç¬¬ä¸€æ¬¡è¿è¡ŒAppRunå’ŒStopåˆ†åˆ«å¯¹åº” âŒ˜+Rå’ŒâŒ˜+.ï¼ŒSimulatorç”¨äºŽé€‰æ‹©æ¨¡æ‹Ÿå™¨æˆ–çœŸå®žè®¾å¤‡ å¿«é€Ÿäº†è§£Interface Builderï¼ˆIBï¼‰åœ¨project navigatorä¸­é€‰æ‹©main.storyboardThe Interface Builder editorä¸ºåˆ›é€ å’Œè®¾è®¡appçš„UIæé«˜äº†ä¸€ä¸ªå¯è§†åŒ–çš„æ–¹æ³•ã€‚åœ¨è¿™é‡Œæ—¢å¯ä»¥è®¾è®¡å•ä¸ªé¡µé¢ï¼Œä¹Ÿå¯ä»¥è®¾è®¡å¤šä¸ªé¡µé¢ã€‚å¯ä»¥ç›´æŽ¥ä»Žå³ä¸‹è§’Object libraryæ‹–åŠ¨å¯ç”¨å¯¹è±¡åˆ°IBä¸­ã€‚å½“å¼€å§‹æ–°å»ºé¡¹ç›®ï¼Œé€‰æ‹©äº†Single View Applicationæ¨¡æ¿æ—¶ï¼ŒXcodeé»˜è®¤åœ¨storyboardä¸­ç”Ÿæˆä¸€ä¸ªview controller sceneï¼Œå¯¹åº”ä¸€ä¸ªview controllerã€‚é€šå¸¸appçš„æ¯ä¸€ä¸ªscreenä»£è¡¨ä¸€ä¸ªview controllerã€‚The Document Outline viewåœ¨é€‰æ‹©storyboardç‰¹å®šå¯¹è±¡æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚ è®¾è®¡UI æ‹–åŠ¨ä¸€ä¸ªButtonåˆ°IBä¸­ åŒå‡»Buttonæˆ–åœ¨å±žæ€§æ£€æŸ¥å™¨ä¸­ä¿®æ”¹nameä¸ºâ€Hello World** æ ¹æ®è“è‰²è™šçº¿è¾…åŠ©çº¿å¯ä»¥æŠŠButtonæ‹–åˆ°ä¸­å¿ƒä½ç½® å†™ä»£ç  é€‰æ‹©main.storyboardï¼Œç‚¹å‡»å·¥å…·æ å³ä¾§çš„Assistant editor(option+âŒ˜+return)ï¼Œç¼–è¾‘åŒºå‡ºçŽ°ä¸¤éƒ¨åˆ†ï¼ŒCtrlæ‹–åŠ¨æŒ‰é’®åˆ°å³ä¾§ViewControllerç±»ä¸­ï¼š ç„¶åŽå†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š1234567@IBAction func showMessage() &#123; let alertController = UIAlertController(title: &quot;Welcome to My First App&quot;,message: &quot;Hello World&quot;, preferredStyle: UIAlertControllerStyle.alert) alertController.addAction(UIAlertAction(title: &quot;OK&quot;, style:UIAlertActionStyle.default, handler: nil)) present(alertController, animated: true, completion: nil)&#125; ä¸Šé¢çš„æ–¹æ³•æ˜¯å…ˆè¿žæŽ¥å…³ç³»ï¼Œç„¶åŽå†™ä»£ç ï¼›ä¹Ÿå¯ä»¥å…ˆå†™å¥½ä»£ç ï¼Œç„¶åŽå»ºç«‹å…³ç³»ï¼š@IBActionè¡¨ç¤ºä¸€ä¸ªActionçš„æ ‡è¯†ç¬¦ï¼Œæ²¡æœ‰ç‰¹æ®Šæ„ä¹‰ï¼Œå½“å»ºç«‹å¥½å…³ç³»åŽï¼Œ@IBActionå³ä¾§ä¼šå‡ºçŽ°ä¸€ä¸ªå®žå¿ƒçš„ç‚¹ï¼Œç‚¹å‡»ä¼šå‡ºçŽ°ä¼šå‡ºçŽ°ä»¥ä¸ªå¼¹æ¡†è¡¨ç¤ºè¿žæŽ¥çš„åœ°æ–¹ï¼š ä¿®æ”¹æŒ‰é’®çš„é¢œè‰²ã€‚é€‰ä¸­æŒ‰é’®ï¼Œåœ¨å±žæ€§æ£€æŸ¥å™¨ä¸­ä¿®æ”¹å¯¹åº”å±žæ€§ æµ‹è¯•åº”ç”¨é€‰æ‹©ç‰¹å®šçš„æ¨¡æ‹Ÿå™¨æˆ–è®¾å¤‡ï¼ŒâŒ˜+R Hello world åº”ç”¨ä¸­äº‹ä»¶æµ æ›´è¿‘ä¸€æ­¥ åŒä¸Šçš„æ–¹æ³•æ·»åŠ å‡ ä¸ªæŒ‰é’®ï¼Œå¹¶ä¿®æ”¹buttonçš„nameä¸ºä¸€äº›emojiè¡¨æƒ…ï¼ˆcontrol+âŒ˜+spaceï¼‰ æ·»åŠ @IBActionæ–¹æ³•ä»£ç  é€šè¿‡å…ˆå†™å¥½ä»£ç ç„¶åŽå»ºç«‹å…³ç³»çš„æ–¹æ³•ï¼ŒæŠŠå‡ ä¸ªbuttonéƒ½ä¸ŽåŒä¸€ä¸ª@IBActionæ–¹æ³•å»ºç«‹å…³ç³» ä»£ç HelloWorldHelloWordExercise è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[å¼€å§‹ç”¨Swiftå¼€å‘iOS 10 - 3 ä»‹ç»Auto Layout]]></title>
    <url>%2F2017%2Fbeginning-ios-swift-3.html</url>
    <content type="text"><![CDATA[Auto layoutæ˜¯ä¸€ç§åŸºäºŽçº¦æŸçš„ï¼Œæè¿°æ€§çš„å¸ƒå±€ç³»ç»Ÿã€‚ iPhoneå°ºå¯¸ ä¸ºä»€ä¹ˆä½¿ç”¨Auto Layoutå‰é¢çš„ä¸€éƒ¨åˆ†çš„é¡¹ç›®HelloWorldé»˜è®¤æ˜¯è¿è¡Œçš„iPhone 7(iPhone 6)çš„ç«–å±ä¸‹çš„ï¼Œbuttonæ˜¯åœ¨å±å¹•ä¸­é—´çš„ï¼Œä½†æ˜¯å¦‚æžœå…¶ä»–å±å¹•å¤§å°æˆ–ä¸åŒæ–¹ä½å°±ä¸ä¸€å®šäº†ã€‚æŒ‰ç…§åœ¨é»˜è®¤iPhone 7çš„æ¡ä»¶ä¸‹ï¼Œbuttonçš„å·¦ä¸Šè§’çš„åæ ‡æ˜¯(147,318)ï¼Œå…¶ä»–å°ºå¯¸çš„è®¾å¤‡å’Œä¸åŒæ–¹ä½æ˜¾ç¤ºæ—¶ä¹Ÿä¼šæŒ‰ç…§è¿™ç§åæ ‡æ˜¾ç¤ºï¼Œå°±ä¸ä¼šåœ¨ä¸­é—´äº†ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨Auto Layoutã€‚ Auto Layoutå°±æ˜¯å…³äºŽæ‰€æœ‰çº¦æŸå…³äºŽâ€œHello Worldâ€æŒ‰é’®çš„ä½ç½®ä¿¡æ¯çš„æè¿°å¯èƒ½æ¯”è¾ƒå¥½çš„æ˜¯ï¼š æ— è®ºå±å¹•çš„åˆ†è¾¨çŽ‡å’Œæ–¹ä½ï¼Œè¿™ä¸ªæŒ‰é’®åœ¨æ°´å¹³å’Œåž‚ç›´æ–¹å‘éƒ½åº”è¯¥æ˜¯å±…ä¸­çš„ è¿™å®žé™…å°±å®šä¹‰äº†ä¸¤ä¸ªçº¦æŸï¼š æ°´å¹³å±…ä¸­ åž‚ç›´å±…ä¸­ åœ¨Auto Layoutä¸­çº¦æŸéƒ½è¢«æè¿°æˆæ•°å­¦è¡¨ç¤ºï¼Œä¾‹å¦‚ä¸Šè¿°ä¸¤ä¸ªé™åˆ¶å°±ä¼šè¢«è¡¨ç¤ºæˆï¼š Hello World.centerX = centerX ï¼Œ Hello World.centerY = centerYã€‚å½“ç„¶æˆ‘ä»¬ä¸éœ€è¦ç›´æŽ¥å¤„ç†è¿™ç§æ•°å­¦å…¬å¼ï¼ŒXcodeä¼šå¸®æˆ‘ä»¬å¤„ç†ã€‚ ä½¿ç”¨Auto Layoutä½¿Buttonåˆ°ä¸­å¤®Xcodeæä¾›äº†ä¸¤ç§æ–¹æ³•å®šä¹‰Auto Layoutçš„çº¦æŸï¼š Auto Layoutå·¥å…·æ  Control-drag Auto Layoutå·¥å…·æ æä¾›äº†å››ä¸ªæŒ‰é’®ï¼š Stack - ç»„åˆviewså˜æˆä¸€ä¸ªstack view Align - æž„å»ºå¯¹é½çº¦æŸ Pin - æž„å»ºç©ºé—´çº¦æŸï¼Œä¾‹å¦‚UIçš„å®½åº¦ï¼Œé«˜åº¦ï¼Œè¾¹è·ç­‰ Issues - è§£å†³å¸ƒå±€é—®é¢˜ ä½¿ç”¨Alignæ¥å®šä¹‰ä¸¤ä¸ªçº¦æŸï¼šæ°´å¹³å±…ä¸­ å’Œ åž‚ç›´å±…ä¸­ã€‚å¼¹çª—ä¸­â€Horizontal in containerâ€åŽçš„æ•°å­—è¡¨ç¤ºbuttonä¸­å¿ƒç‚¹çš„xåæ ‡ä¸Žçˆ¶è§†å›¾ä¸­å¿ƒç‚¹çš„xåæ ‡çš„ç›¸å·®æ•°ï¼Œ â€œVertically in containerâ€åŽçš„æ•°å­—è¡¨ç¤ºbuttonä¸­å¿ƒç‚¹çš„yåæ ‡ä¸Žçˆ¶è§†å›¾ä¸­å¿ƒç‚¹çš„yåæ ‡çš„ç›¸å·®æ•°ã€‚å¦‚æžœéƒ½ä¸ºé›¶å°±è¡¨ç¤ºbuttonçš„ä¸­å¿ƒå’Œçˆ¶è§†å›¾çš„ä¸­å¿ƒæ˜¯ç›¸åŒçš„ï¼Œä¹Ÿå°±æ˜¯è¯´buttonæ°´å¹³å’Œåž‚ç›´æ–¹å‘éƒ½å±…ä¸­ã€‚ ç‚¹å‡» â€œAdd 2 Constraintsâ€ åŽï¼Œä¼šå‡ºçŽ°å¦‚ä¸‹æƒ…å†µã€‚åœ¨document outlineä¸­å‡ºçŽ°ä¸¤ä¸ªçº¦æŸé€‰é¡¹ï¼Œåœ¨è§†å›¾ä¸­å‡ºçŽ°åž‚ç›´ä¸¤æ¡è“è‰²çš„å®žçº¿ï¼Œåœ¨sizeæ£€æŸ¥å™¨ä¸­ä¹Ÿèƒ½çœ‹åˆ°çº¦æŸã€‚ å¦‚æžœç‚¹å‡»æ¯ä¸ªçº¦æŸï¼Œåœ¨sizeæ£€æŸ¥å™¨ä¸­è¿˜èƒ½çœ‹åˆ°æ¯ä¸ªçº¦æŸçš„å…·ä½“ä¿¡æ¯ï¼Œä¹Ÿèƒ½åœ¨æ­¤ä¿®æ”¹çº¦æŸã€‚ è§£å†³å¸ƒå±€çº¦æŸé—®é¢˜Xcodeå¯ä»¥éžå¸¸æ™ºèƒ½çš„æ£€æµ‹çš„å¸ƒå±€çº¦æŸæ–¹é¢çš„é—®é¢˜ã€‚å½“åˆ›å»ºäº†æ¨¡æ£±ä¸¤å¯æˆ–å†²çªçš„çº¦æŸæ—¶å°±ä¼šå‡ºçŽ°å¸ƒå±€é—®é¢˜ã€‚è¯•ç€å°†buttonæ‹–åŠ¨å·¦ä¸‹è§’ï¼Œè§†å›¾ä¸­åŽŸæœ¬çš„è“è‰²å®žçº¿å˜æˆäº†é»„è‰²å®žçº¿ï¼Œå¹¶ä¸”çº¿ä¸Šè¿˜æœ‰æ•°å­—ï¼Œè¿™äº›æ•°å­—è¡¨ç¤ºbuttonçŽ°åœ¨çš„ä½ç½®åç¦»çº¦æŸçš„è·ç¦»ï¼Œdocument outlineå³ä¸Šè§’å‡ºçŽ°ä¸€ä¸ªé»„è‰²ç®­å¤´(disclosure arrow)ã€‚ ç‚¹å‡»disclosure arrowï¼Œå‡ºçŽ°å¸ƒå±€é—®é¢˜åˆ—è¡¨ï¼Œçº¢è‰²æ¡†ä¸­çš„Expectedè¡¨ç¤ºçŽ°åœ¨çº¦æŸæ‰€æœŸæœ›çš„ä½ç½®ä¹Ÿå°±æ˜¯å±…ä¸­ä½ç½®ï¼ŒActualè¡¨ç¤ºçŽ°åœ¨å®žé™…ä½ç½®ã€‚æ¯ä¸ªé—®é¢˜å³ä¾§æœ‰ä¸ªindicator iconï¼Œç‚¹å‡»å®ƒå‡ºçŽ°ä¸€ä¸ªå¼¹æ¡†ï¼Œé€‰æ‹©Update Frameç„¶åŽç‚¹å‡»Fix Misplacementï¼ŒæŒ‰é’®å›žåˆ°åŽŸæ¥ä¸­å¤®ä½ç½®ï¼›é€‰æ‹©Update constraintsè¡¨ç¤ºbuttonçš„ä½ç½®ä¸å˜ï¼Œæ›´æ–°åˆ°æœ€æ–°ä½ç½®çš„çº¦æŸã€‚ å®žé™…ä¸Šï¼Œç‚¹å‡»Auto Layoutå·¥å…·æ æœ€å³ä¾§çš„issueï¼Œä¹Ÿä¼šå‡ºçŽ°ç±»ä¼¼çš„åŠŸèƒ½ï¼š ä¸åŒè®¾å¤‡åŒæ—¶é¢„è§ˆXcodeæä¾›äº†ä¸€ä¸ªåŒæ—¶é¢„è§ˆä¸åŒè®¾å¤‡ä¸‹è§†å›¾çš„ç•Œé¢ã€‚æŒ‰ä½optionï¼Œç„¶åŽæŒ‰menu &gt; Preview(1) &gt; Main.storyboard (Preview)ï¼Œå°±èƒ½æ‰“å¼€ç”¨äºŽé¢„è§ˆçš„assistant editorã€‚ è¿™ä¸ªé¢„è§ˆçª—å£å¯ä»¥é¢„è§ˆç›®å‰æ‰€æœ‰iOSè®¾å¤‡ã€‚ æ·»åŠ ä¸€ä¸ªLabel æ·»åŠ ä¸€ä¸ªâ€Welcome to Auto Layoutâ€çš„æ ‡ç­¾åœ¨å³ä¸‹è§’ï¼Œå¹¶æ‰“å¼€é¢„è§ˆçª—å£æŸ¥çœ‹ï¼Œå‘çŽ°å‡ºæ¥é™¤äº†é»˜è®¤çš„iPhone 7ï¼Œå…¶ä»–è®¾å¤‡è¦ä¸åç¦»äº†ï¼Œè¦ä¸ä¸è§äº†ã€‚ ç”¨control+dragæ–¹æ³•æ¥æ·»åŠ spacing constraintã€‚æŒ‰ä½controlï¼Œä»Žlabelä¸Šå‘å³æ‹–åŠ¨ï¼Œæ‹–å‡ºlabelåˆ°è§†å›¾åŽæ¾å¼€ï¼Œå‡ºçŽ°å¼¹æ¡†ï¼Œé€‰æ‹© â€œTrailing space to container marginâ€ ï¼Œè¡¨ç¤ºè®¾ç½®å³è¾¹è·çš„çº¦æŸã€‚ ç±»ä¼¼2çš„æ–¹æ³•ï¼Œå‘ä¸‹æ‹–åŠ¨æ¾å¼€ï¼Œé€‰æ‹©å¼¹æ¡†ä¸­çš„â€Vertical Spacing to Bottom Layout Guideâ€ï¼Œè¡¨ç¤ºè®¾ç½®äº†ä¸‹è¾¹è·çº¦æŸã€‚æ‰€æœ‰çº¦æŸçº¿å˜æˆäº†è“è‰²å®žçº¿ï¼Œè“è‰²å®žçº¿è¡¨ç¤ºçº¦æŸæ­£å¸¸ã€‚ document outlineä¸Šåˆå‡ºçŽ°ä¸¤ä¸ªçº¦æŸï¼š æ­¤æ—¶å¦‚æžœç”¨é¢„è§ˆçª—å£æŸ¥çœ‹ï¼Œå‘çŽ°labelåœ¨ä¸åŒçš„è®¾å¤‡ä¸Šéƒ½åœ¨å³ä¸‹è§’äº†ï¼š ç¼–è¾‘çº¦æŸå‰é¢ä¹Ÿæåˆ°çº¦æŸæœ¬èº«å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹çš„ï¼Œé€‰æ‹©çº¦æŸï¼Œç„¶åŽåœ¨sizeæ£€æŸ¥å™¨ä¸­ä¿®æ”¹ã€‚é»˜è®¤labelçš„â€trailingMarginâ€çº¦æŸçš„constantå€¼æ˜¯0ï¼Œå¯ä»¥è¯•ç€ä¿®æ”¹ã€‚ ç»ƒä¹  æ·»åŠ æ–°çš„labelï¼Œä¿®æ”¹æ–‡æœ¬ä¸ºLearn Swift æŠŠå­—ä½“å¤§å°æ”¹ä¸º30 pointï¼Œè°ƒæ•´labelä¸ºé€‚å®œå¤§å° æ·»åŠ ä¸¤ä¸ªçº¦æŸ labelçš„ä¸Šè¾¹è·ä¸º40point labelæ°´å¹³å±…ä¸­ ä»£ç HelloWorldAutoLayoutHelloWorldAutoLayoutExercise è¯´æ˜Žæ­¤æ–‡æ˜¯å­¦ä¹ appcodeç½‘ç«™å‡ºçš„ä¸€æœ¬ä¹¦ ã€ŠBeginning iOS 10 Programming with Swiftã€‹ çš„ä¸€ç¯‡è®°å½•]]></content>
      <categories>
        <category>Beginning_iOS_Swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-11ï¼šMethods]]></title>
    <url>%2F2017%2Fswift-11.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102/** Methods æ–¹æ³•æ˜¯ä¸ŽæŸäº›ç‰¹å®šç±»åž‹ç›¸å…³è”çš„å‡½æ•° å®žä¾‹æ–¹æ³•ä¸ºç»™å®šç±»åž‹çš„å®žä¾‹å°è£…äº†å…·ä½“çš„ä»»åŠ¡ä¸ŽåŠŸèƒ½ ç±»ã€ç»“æž„ä½“ã€æžšä¸¾éƒ½å¯ä»¥å®šä¹‰**å®žä¾‹æ–¹æ³•**ï¼Œä¹Ÿéƒ½å¯ä»¥å®šä¹‰**ç±»åž‹æ–¹æ³•** åœ¨OCä¸­ï¼Œç±»æ˜¯å”¯ä¸€èƒ½å®šä¹‰æ–¹æ³•çš„ç±»åž‹ */// 1 å®žä¾‹æ–¹æ³• (Instance Methods)// å®žä¾‹æ–¹æ³•åªèƒ½è¢«å®ƒæ‰€å±žçš„ç±»çš„æŸä¸ªç‰¹å®šå®žä¾‹è°ƒç”¨class Counter &#123; var count = 0 func increment() &#123; count += 1 &#125; func incrementBy(amount: Int) &#123; count += amount &#125; func reset() &#123; count = 0 &#125;&#125;// æ–¹æ³•çš„å±€éƒ¨å‚æ•°åç§°å’Œå¤–éƒ¨å‚æ•°åç§° (Local and External Parameter Names for Methods)class Counter2 &#123; var count: Int = 0 func incrementBy(amount: Int, numberOfTimes: Int) &#123; count += amount * numberOfTimes &#125;&#125;let counter = Counter2()counter.incrementBy(amount: 5, numberOfTimes: 3)// self å±žæ€§(The self Property)ï¼š`self`å®Œå…¨ç­‰åŒäºŽè¯¥å®žä¾‹æœ¬èº«ã€‚// æ¶ˆé™¤æ–¹æ³•å‚æ•° x å’Œå®žä¾‹å±žæ€§ x ä¹‹é—´çš„æ­§ä¹‰:struct Point &#123; var x = 0.0, y = 0.0 func isToTheRightOfX(x: Double) -&gt; Bool &#123; return self.x &gt; x &#125;&#125;// åœ¨å®žä¾‹æ–¹æ³•ä¸­ä¿®æ”¹å€¼ç±»åž‹(Modifying Value Types from Within Instance Methods)// ç»“æž„ä½“å’Œæžšä¸¾çš„å±žæ€§ä¸èƒ½åœ¨å®ƒçš„å®žä¾‹æ–¹æ³•ä¸­è¢«ä¿®æ”¹(å› ä¸ºç»“æž„ä½“å’Œæžšä¸¾æ˜¯å€¼ç±»åž‹)ï¼Œä½†å¯é€šè¿‡`mutating`ï¼ˆå¯å˜æ–¹æ³•ï¼‰ä¿®æ”¹ã€‚struct Point2 &#123; var x = 0.0, y = 0.0 mutating func moveByX(_ deltaX: Double, y deltaY: Double) &#123; x += deltaX y += deltaY &#125;&#125;var somePoint = Point2(x: 1.0, y: 1.0)somePoint.moveByX(2.0, y: 3.0)// åœ¨å¯å˜æ–¹æ³•ä¸­ç»™ self èµ‹å€¼(Assigning to self Within a Mutating Method)struct Point3 &#123; var x = 0.0, y = 0.0 mutating func moveByX(_ deltaX: Double, y deltaY: Double) &#123; self = Point3(x: x + deltaX, y: y + deltaY) &#125;&#125;enum TriStateSwitch &#123; case Off, Low, High mutating func next() &#123; switch self &#123; case .Off: self = .Low case .Low: self = .High case .High: self = .Off &#125; &#125;&#125;// 2 ç±»åž‹æ–¹æ³• (Type Methods)// `static` `class`// åœ¨ç±»åž‹æ–¹æ³•çš„æ–¹æ³•ä½“(body)ä¸­ï¼Œ`self`æŒ‡å‘è¿™ä¸ªç±»åž‹æœ¬èº«ï¼Œè€Œä¸æ˜¯ç±»åž‹çš„æŸä¸ªå®žä¾‹ã€‚struct LevelTracker &#123; static var highestUnlockedLevel = 1 static func unlockLevel(level: Int) &#123; if level &gt; highestUnlockedLevel &#123; highestUnlockedLevel = level &#125; &#125; static func levelIsUnlocked(level: Int) -&gt; Bool &#123; return level &lt;= highestUnlockedLevel &#125; var currentLevel = 1 mutating func advanceToLevel(level: Int) -&gt; Bool &#123; if LevelTracker.levelIsUnlocked(level: level) &#123; currentLevel = level return true &#125; else &#123; return false &#125; &#125;&#125;class Player &#123; var tracker = LevelTracker() let playerName: String func completedLevel(level: Int) &#123; LevelTracker.unlockLevel(level: level + 1) tracker.advanceToLevel(level: level + 1) &#125; init(name: String) &#123; playerName = name &#125;&#125;]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-10ï¼šProperties]]></title>
    <url>%2F2017%2Fswift-10.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146/** Properties */// 1 å­˜å‚¨å±žæ€§ Stored Properties ï¼ˆåªèƒ½ç”¨äºŽç±»å’Œç»“æž„ä½“ï¼‰// æè¿°æ•´æ•°çš„èŒƒå›´ï¼Œä¸”è¿™ä¸ªèŒƒå›´å€¼åœ¨è¢«åˆ›å»ºåŽä¸èƒ½è¢«ä¿®æ”¹.struct FixedLengthRange &#123; var firstValue: Int let length: Int&#125;// è¯¥åŒºé—´è¡¨ç¤ºæ•´æ•°0ï¼Œ1ï¼Œ2var rangeOfThreeItems = FixedLengthRange(firstValue: 0, length: 3)// è¯¥åŒºé—´çŽ°åœ¨è¡¨ç¤ºæ•´æ•°6ï¼Œ7ï¼Œ8rangeOfThreeItems.firstValue = 6// å¸¸é‡ç»“æž„çš„å±žæ€§ä¸èƒ½ä¿®æ”¹let rangeOfFourItems = FixedLengthRange(firstValue: 0, length: 4)// å°½ç®¡ firstValue æ˜¯ä¸ªå˜é‡å±žæ€§ï¼Œè¿™é‡Œè¿˜æ˜¯ä¼šæŠ¥é”™//rangeOfFourItems.firstValue = 6// å»¶è¿Ÿå­˜å‚¨å±žæ€§: ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨çš„æ—¶å€™æ‰ä¼šè®¡ç®—å…¶åˆå§‹å€¼ã€‚ `lazy var` (å¸¸é‡å±žæ€§åœ¨æž„é€ è¿‡ç¨‹å®Œæˆä¹‹å‰å¿…é¡»è¦æœ‰åˆå§‹å€¼ï¼Œå› æ­¤æ— æ³•å£°æ˜Žæˆå»¶è¿Ÿå±žæ€§)class DataImporter &#123; /* DataImporter æ˜¯ä¸€ä¸ªè´Ÿè´£å°†å¤–éƒ¨æ–‡ä»¶ä¸­çš„æ•°æ®å¯¼å…¥çš„ç±»ã€‚ è¿™ä¸ªç±»çš„åˆå§‹åŒ–ä¼šæ¶ˆè€—ä¸å°‘æ—¶é—´ã€‚ */ var fileName = &quot;data.txt&quot; // è¿™é‡Œä¼šæä¾›æ•°æ®å¯¼å…¥åŠŸèƒ½&#125;class DataManager &#123; lazy var importer = DataImporter() var data = [String]() // è¿™é‡Œä¼šæä¾›æ•°æ®ç®¡ç†åŠŸèƒ½&#125;let manager = DataManager() // DataImporter å®žä¾‹çš„ importer å±žæ€§è¿˜æ²¡æœ‰è¢«åˆ›å»ºmanager.data.append(&quot;Some data&quot;)manager.data.append(&quot;Some more data&quot;)manager.importer.fileName// 2 è®¡ç®—å±žæ€§(Computed Properties)// ä¸ç›´æŽ¥å­˜å‚¨å€¼ï¼Œè€Œæ˜¯æä¾›ä¸€ä¸ªgetterå’Œä¸€ä¸ªå¯é€‰çš„setter,æ¥é—´æŽ¥èŽ·å–å’Œè®¾ç½®å…¶ä»–å±žæ€§æˆ–å˜é‡çš„å€¼ã€‚struct Point &#123; var x = 0.0, y = 0.0&#125;struct Size &#123; var width = 0.0, height = 0.0&#125;struct Rect &#123; var origin = Point() var size = Size() var center: Point &#123; get &#123; let centerX = origin.x + (size.width / 2) let centerY = origin.y + (size.height / 2) return Point(x: centerX, y: centerY) &#125; set(newCenter) &#123; origin.x = newCenter.x - (size.width / 2) origin.y = newCenter.y - (size.height / 2) &#125; &#125;&#125;var square = Rect(origin: Point(x: 0.0, y: 0.0), size: Size(width: 10.0, height: 10.0))let initialSquareCenter = square.centersquare.center = Point(x: 15.0, y: 15.0)print(&quot;square.origin is now at (\(square.origin.x), \(square.origin.y))&quot;)// è¾“å‡º &quot;square.origin is now at (10.0, 10.0)â€// åªè¯»è®¡ç®—å±žæ€§struct Cuboid &#123; var width = 0.0, height = 0.0, depth = 0.0 var volume: Double &#123; // åªç”¨getæ—¶å¯ç®€å†™ return width*height*depth &#125;&#125;// 3 å±žæ€§è§‚å¯Ÿå™¨(Property Observers)// è®¾ç½®å±žæ€§æ—¶ï¼ˆå°±ç®—å€¼ä¸å˜ï¼‰ï¼Œå°±ä¼šè°ƒç”¨`willSet`ï¼Œ `didSet`class StepCounter &#123; var totalSteps: Int = 0 &#123; willSet &#123; print(&quot;è®¾ç½®æˆ\(newValue)&quot;) &#125;// willSet(newTotalSteps) &#123;// print(&quot;About to set totalSteps to \(newTotalSteps)&quot;)// &#125; didSet &#123; if totalSteps &gt; oldValue &#123; print(&quot;Added \(totalSteps - oldValue) steps&quot;) &#125; &#125;// didSet(old) &#123;// print(old)// &#125; &#125;&#125;let stepCounter = StepCounter()stepCounter.totalSteps = 1stepCounter.totalSteps = 20// 4 å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡(Global and Local Variables)// è®¡ç®—å±žæ€§å’Œå±žæ€§è§‚å¯Ÿå™¨æ‰€æè¿°çš„åŠŸèƒ½ä¹Ÿå¯ä»¥ç”¨äºŽå…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡// 5 ç±»åž‹å±žæ€§(Type Properties)ï¼šç”¨äºŽæŸä¸ªç±»åž‹æ‰€æœ‰å®žä¾‹å…±äº«çš„æ•°æ®ã€‚(ç±»ä¼¼äºŽå…¶ä»–è¯­è¨€çš„é™æ€å±žæ€§)// å­˜å‚¨åž‹ç±»åž‹å±žæ€§æ˜¯å»¶è¿Ÿåˆå§‹åŒ–çš„struct SomeStructure &#123; static var storedTypeProperty = &quot;Some value.&quot; static var computedTypeProperty: Int &#123; return 1 &#125;&#125;enum SomeEnumeration &#123; static var storedTypeProperty = &quot;Some value.&quot; static var computedTypeProperty: Int &#123; return 6 &#125;&#125;class SomeClass &#123; static var storedTypeProperty = &quot;Some value.&quot; static var computedTypeProperty: Int &#123; return 27 &#125; class var overrideableComputedTypeProperty: Int &#123; return 107 &#125;&#125;SomeStructure.storedTypeProperty// å£°é“æ¨¡åž‹struct AudioChannel &#123; static let thresholdLevel = 10 // éŸ³é‡çš„æœ€å¤§ ä¸Šé™é˜ˆå€¼ static var maxInputLevelForAllChannels = 0 // å®žä¾‹çš„æœ€å¤§ éŸ³é‡ var currentLevel: Int = 0 &#123; didSet &#123; if currentLevel &gt; AudioChannel.thresholdLevel &#123; // å°†å½“å‰éŸ³é‡é™åˆ¶åœ¨é˜€å€¼ä¹‹å†… currentLevel = AudioChannel.thresholdLevel &#125; if currentLevel &gt; AudioChannel.maxInputLevelForAllChannels &#123; // å­˜å‚¨å½“å‰éŸ³é‡ä½œä¸ºæ–°çš„æœ€å¤§è¾“å…¥éŸ³é‡ AudioChannel.maxInputLevelForAllChannels = currentLevel &#125; &#125; &#125;&#125;var leftChannel = AudioChannel()var rightChannel = AudioChannel()leftChannel.currentLevel = 7print(leftChannel.currentLevel)print(AudioChannel.maxInputLevelForAllChannels)]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-9ï¼šClasses and Structures]]></title>
    <url>%2F2017%2Fswift-9.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576/** Classes and Structures */// ä¸€ä¸ªå•ä¸€æ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªç±»æˆ–è€…ç»“æž„ä½“ï¼Œç³»ç»Ÿå°†ä¼šè‡ªåŠ¨ç”Ÿæˆé¢å‘å…¶å®ƒä»£ç çš„å¤–éƒ¨æŽ¥å£ã€‚/** ç±»å’Œç»“æž„ä½“çš„å…±åŒç‚¹ï¼š å®šä¹‰å±žæ€§ç”¨äºŽå­˜å‚¨å€¼ å®šä¹‰æ–¹æ³•ç”¨äºŽæä¾›åŠŸèƒ½ å®šä¹‰ä¸‹æ ‡æ“ä½œä½¿å¾—å¯ä»¥é€šè¿‡ä¸‹æ ‡è¯­æ³•æ¥è®¿é—®å®žä¾‹æ‰€åŒ…å«çš„å€¼ å®šä¹‰æž„é€ å™¨ç”¨äºŽç”Ÿæˆåˆå§‹åŒ–å€¼ é€šè¿‡æ‰©å±•ä»¥å¢žåŠ é»˜è®¤å®žçŽ°çš„åŠŸèƒ½ å®žçŽ°åè®®ä»¥æä¾›æŸç§æ ‡å‡†åŠŸèƒ½ ç±»è¿˜æœ‰å¦‚ä¸‹çš„é™„åŠ åŠŸèƒ½ï¼š ç»§æ‰¿å…è®¸ä¸€ä¸ªç±»ç»§æ‰¿å¦ä¸€ä¸ªç±»çš„ç‰¹å¾ ç±»åž‹è½¬æ¢å…è®¸åœ¨è¿è¡Œæ—¶æ£€æŸ¥å’Œè§£é‡Šä¸€ä¸ªç±»å®žä¾‹çš„ç±»åž‹ æžæž„å™¨å…è®¸ä¸€ä¸ªç±»å®žä¾‹é‡Šæ”¾ä»»ä½•å…¶æ‰€è¢«åˆ†é…çš„èµ„æº å¼•ç”¨è®¡æ•°å…è®¸å¯¹ä¸€ä¸ªç±»çš„å¤šæ¬¡å¼•ç”¨ **ç»“æž„ä½“æ€»æ˜¯é€šè¿‡è¢«å¤åˆ¶çš„æ–¹å¼åœ¨ä»£ç ä¸­ä¼ é€’ï¼Œä¸ä½¿ç”¨å¼•ç”¨è®¡æ•°ã€‚** */// æ–°ç±»æˆ–ç»“æž„ä½“å‘½åç”¨*UpperCamelCase*ï¼ˆSwiftç±»åž‹çš„å‘½åè§„èŒƒï¼‰// å±žæ€§å’Œæ–¹æ³•å‘½åç”¨*lowerCamelCase*struct Resolution &#123; var width = 0 var height = 0&#125;class VideoMode &#123; var resolution = Resolution() var interlaced = false var frameRate = 0.0 var name: String?&#125;// ç±»å’Œç»“æž„ä½“å®žä¾‹// ç»“æž„ä½“å’Œç±»éƒ½ä½¿ç”¨æž„é€ å™¨è¯­æ³•æ¥ç”Ÿæˆæ–°çš„å®žä¾‹ï¼Œ `()`æ˜¯æœ€ç®€å•çš„æž„é€ å™¨è¯­æ³•ã€‚let someResolution = Resolution()let someVideoMode = VideoMode()// ç»“æž„ä½“çš„æˆå‘˜é€ä¸€æž„é€ å™¨let hd = Resolution(width: 1920, height: 1080)// ç»“æž„ä½“å’Œæžšä¸¾æ˜¯å€¼ç±»åž‹ã€‚æ‰€æœ‰çš„åŸºæœ¬ç±»åž‹:æ•´æ•°(Integer)ã€æµ® ç‚¹æ•°(floating-point)ã€å¸ƒå°”å€¼(Boolean)ã€å­—ç¬¦ä¸²(string)ã€æ•°ç»„(array)å’Œå­—å…¸(dictionary)ï¼Œéƒ½æ˜¯ å€¼ç±»åž‹ï¼Œå¹¶ä¸”åœ¨åº•å±‚éƒ½æ˜¯ä»¥ç»“æž„ä½“çš„å½¢å¼æ‰€å®žçŽ°ã€‚var cinema = hdcinema.width = 2048print(&quot;hd is still \(hd.width) pixels wide&quot;)// ç±»æ˜¯å¼•ç”¨ç±»åž‹let tenEighty = VideoMode()tenEighty.resolution = hdtenEighty.interlaced = truetenEighty.name = &quot;1080i&quot;tenEighty.frameRate = 25.0let alsoTenEighty = tenEightyalsoTenEighty.frameRate = 30.0tenEighty.frameRate// æ’ç­‰è¿ç®—ç¬¦:åˆ¤å®šä¸¤ä¸ªå¸¸é‡æˆ–è€…å˜é‡æ˜¯å¦å¼•ç”¨åŒä¸€ä¸ªç±»å®žä¾‹tenEighty === alsoTenEighty/** å»ºè®®é€‰æ‹©ç»“æž„ä½“çš„æƒ…å†µï¼š - è¯¥æ•°æ®ç»“æž„çš„ä¸»è¦ç›®çš„æ˜¯ç”¨æ¥å°è£…å°‘é‡ç›¸å…³ç®€å•æ•°æ®å€¼ã€‚ - æœ‰ç†ç”±é¢„è®¡è¯¥æ•°æ®ç»“æž„çš„å®žä¾‹åœ¨è¢«èµ‹å€¼æˆ–ä¼ é€’æ—¶ï¼Œå°è£…çš„æ•°æ®å°†ä¼šè¢«æ‹·è´è€Œä¸æ˜¯è¢«å¼•ç”¨ã€‚ - è¯¥æ•°æ®ç»“æž„ä¸­å‚¨å­˜çš„å€¼ç±»åž‹å±žæ€§ï¼Œä¹Ÿåº”è¯¥è¢«æ‹·è´ï¼Œè€Œä¸æ˜¯è¢«å¼•ç”¨ã€‚ - è¯¥æ•°æ®ç»“æž„ä¸éœ€è¦åŽ»ç»§æ‰¿å¦ä¸€ä¸ªæ—¢æœ‰ç±»åž‹çš„å±žæ€§æˆ–è€…è¡Œä¸ºã€‚ */struct Shape &#123; var width: Double = 1.0 var height: Double = 1.0&#125;struct Path &#123; var start: Int var length: Int&#125;struct Point &#123; var x: Double var y: Double var z: Double&#125;// Swiftä¸­çš„Stringï¼ŒArrayå’ŒDictionaryæ˜¯å€¼ç±»åž‹ï¼ŒOCä¸­çš„NSStringï¼Œ NSArrayå’ŒNSDictionaryæ˜¯å¼•ç”¨ç±»åž‹]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-8ï¼šEnumerations]]></title>
    <url>%2F2017%2Fswift-8.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647/** Enumerations */// ä¸€ç­‰(first-class)ç±»åž‹// æ¯ä¸ªæžšä¸¾å®šä¹‰äº†ä¸€ä¸ªå…¨æ–°çš„ç±»åž‹ã€‚ä»¥å¤§å†™å­—æ¯å¼€å¤´// æˆå‘˜å€¼(æˆ–æˆå‘˜) åŽŸå§‹å€¼ å…³è”å€¼// ä¸ä¼šè¢«èµ‹äºˆä¸€ä¸ªé»˜è®¤çš„æ•´åž‹å€¼// 1 æžšä¸¾è¯­æ³•enum CompassPoint &#123; case North case South case East case West&#125;enum Planet &#123; case Mercury, Venus, Earth, Mars, Jupiter, Saturn, Uranus, Neptune&#125;var directionToHead = CompassPoint.WestdirectionToHead = .East// 2 Switch è¯­å¥åŒ¹é…æžšä¸¾å€¼switch directionToHead &#123; case .North: print(&quot;Lots of planets have a north&quot;) case .South: print(&quot;Watch out for penguins&quot;) case .East: print(&quot;Where the sun rises&quot;) case .West: print(&quot;Where the skies are blue&quot;)&#125;// 3 å…³è”å€¼(Associated Values) ä»»æ„ç±»åž‹ï¼Œå¯ä»¥å„ä¸ç›¸åŒ// â€œå®šä¹‰ä¸€ä¸ªåä¸º Barcode çš„æžšä¸¾ç±»åž‹ï¼Œå®ƒçš„ä¸€ä¸ªæˆå‘˜å€¼æ˜¯å…·æœ‰ (Intï¼ŒIntï¼ŒIntï¼ŒInt) ç±»åž‹å…³è”å€¼çš„ UPCA ï¼Œå¦ä¸€ä¸ªæˆå‘˜å€¼æ˜¯å…·æœ‰ String ç±»åž‹å…³è”å€¼çš„ QRCode ã€‚â€enum Barcode &#123; case UPCA(Int, Int, Int, Int) case QRCode(String)&#125;var productBarcode = Barcode.UPCA(8, 85909, 51226, 3)productBarcode = .QRCode(&quot;ABCDEFGHIJKLMNOP&quot;)switch productBarcode &#123;case .UPCA(let numberSystem, let manufacturer, let product, let check): print(&quot;UPC-A: \(numberSystem), \(manufacturer), \(product), \(check).&quot;)case .QRCode(let productCode): print(&quot;QR code: \(productCode).&quot;)&#125;]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-7ï¼šClosure]]></title>
    <url>%2F2017%2Fswift-7.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384/** * Closure */// é—­åŒ…æ˜¯è‡ªåŒ…å«çš„å‡½æ•°ä»£ç å—ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­è¢«ä¼ é€’å’Œä½¿ç”¨ã€‚// Swift ä¸­çš„é—­åŒ…ä¸Ž C å’Œ Objective-C ä¸­çš„ä»£ç å—(blocks)ä»¥åŠå…¶ä»–ä¸€äº›ç¼–ç¨‹è¯­è¨€ä¸­çš„åŒ¿åå‡½æ•°æ¯”è¾ƒç›¸ä¼¼ã€‚// é—­åŒ…å¯ä»¥æ•èŽ·å’Œå­˜å‚¨å…¶æ‰€åœ¨ä¸Šä¸‹æ–‡ä¸­ä»»æ„å¸¸é‡å’Œå˜é‡çš„å¼•ç”¨ã€‚// 1 é—­åŒ…è¡¨è¾¾å¼(Closure Expressions)// sorted æ–¹æ³•(The Sorted Method)// åŽŸæ•°ç»„ä¸ä¼šè¢« sorted(by:) æ–¹æ³•ä¿®æ”¹ã€‚let names = [&quot;Chris&quot;, &quot;Alex&quot;, &quot;Ewa&quot;, &quot;Barry&quot;, &quot;Daniella&quot;, &quot;Andy&quot;, &quot;Amni&quot;]func backward(_ s1: String, _ s2: String) -&gt; Bool &#123; return s1 &gt; s2&#125;var reversedNames = names.sorted(by: backward)/** é—­åŒ…è¡¨è¾¾å¼è¯­æ³•: &#123; (parameters) -&gt; returnType in statements &#125; å…³é”®å­—`in`è¡¨ç¤ºé—­åŒ…çš„å‚æ•°å’Œè¿”å›žå€¼ç±»åž‹å®šä¹‰å·²ç»å®Œæˆï¼Œé—­åŒ…å‡½æ•°ä½“å³å°†å¼€å§‹ã€‚ */var reversedNames2 = names.sorted(by: &#123;(s1:String, s2:String) -&gt; Bool in return s1&gt;s2&#125;)// æ ¹æ®ä¸Šä¸‹æ–‡æŽ¨æ–­ç±»åž‹(Inferring Type From Context)var reversedNames3 = names.sorted(by: &#123;(s1, s2)-&gt;Bool in return s1&gt;s2&#125;)// æ ¹æ®ä¸Šä¸‹æ–‡æŽ¨æ–­ç±»åž‹(Inferring Type From Context) çœç•¥ return å’Œ è¿”å›žå€¼var reversedNames4 = names.sorted(by: &#123;(s1, s2) in s1&gt;s2&#125;)// å‚æ•°åç§°ç¼©å†™(Shorthand Argument Names)ï¼šç›´æŽ¥é€šè¿‡ $0 ï¼Œ $1 ï¼Œ $2 æ¥é¡ºåºè°ƒç”¨é—­åŒ…çš„å‚æ•°var reversedNames5 = names.sorted(by: &#123;$0&gt;$1&#125;)// è¿ç®—ç¬¦æ–¹æ³•(Operator Methods)var reversedNames6 = names.sorted(by: &gt;)// 2 å°¾éšé—­åŒ…(Trailing Closures):å°†ä¸€ä¸ªå¾ˆé•¿çš„é—­åŒ…è¡¨è¾¾å¼ä½œä¸ºæœ€åŽä¸€ä¸ªå‚æ•°ä¼ é€’ç»™å‡½æ•°/**// ä»¥ä¸‹æ˜¯ä¸ä½¿ç”¨å°¾éšé—­åŒ…è¿›è¡Œå‡½æ•°è°ƒç”¨ func someFunctionThatTakesAClosure(closure: &#123;// é—­åŒ…ä¸»ä½“éƒ¨åˆ† &#125;)// ä»¥ä¸‹æ˜¯ä½¿ç”¨å°¾éšé—­åŒ…è¿›è¡Œå‡½æ•°è°ƒç”¨ func someFunctionThatTakesAClosure() &#123;// é—­åŒ…ä¸»ä½“éƒ¨åˆ† &#125; */var reversedNames7 = names.sorted()&#123;$0&gt;$1&#125;var reversedNames8 = names.sorted&#123;$0&gt;$1&#125; // å½“é—­åŒ…è¡¨è¾¾å¼æ˜¯å”¯ä¸€å‚æ•°æ—¶ï¼Œ ()å¯çœç•¥let digitNames = [ 0: &quot;Zero&quot;, 1: &quot;One&quot;, 2: &quot;Two&quot;, 3: &quot;Three&quot;, 4: &quot;Four&quot;, 5: &quot;Five&quot;, 6: &quot;Six&quot;, 7: &quot;Seven&quot;, 8: &quot;Eight&quot;, 9: &quot;Nine&quot;]let numbers = [16, 58, 510]let strings = numbers.map &#123; (number) -&gt; String in var number = number var output = &quot;&quot; repeat &#123; output = digitNames[number%10]! + output // å­—å…¸ä¸‹æ ‡è¿”å›žä¸€ä¸ªå¯é€‰å€¼(optional value) number /= 10 &#125; while number &gt; 0 return output&#125;// 3 å€¼æ•èŽ·(Capturing Values)// é—­åŒ…å¯ä»¥åœ¨å…¶è¢«å®šä¹‰çš„ä¸Šä¸‹æ–‡ä¸­æ•èŽ·å¸¸é‡æˆ–å˜é‡ã€‚å³ä½¿å®šä¹‰è¿™äº›å¸¸é‡å’Œå˜é‡çš„åŽŸä½œç”¨åŸŸå·²ç»ä¸å­˜åœ¨ï¼Œé—­åŒ…ä»ç„¶å¯ä»¥åœ¨é—­åŒ…å‡½æ•°ä½“å†…å¼•ç”¨å’Œä¿®æ”¹è¿™äº›å€¼ã€‚// åµŒå¥—å‡½æ•° æ˜¯ æ•èŽ·å€¼çš„é—­åŒ…çš„æœ€ç®€å•å½¢å¼func makeIncrementer(forIncrement amount: Int) -&gt; () -&gt; Int &#123; var runningTotal = 0 func incrementer() -&gt; Int &#123; runningTotal += amount return runningTotal &#125; return incrementer&#125;var funcby10 = makeIncrementer(forIncrement: 10)var funcby50 = makeIncrementer(forIncrement: 50)// æ–°ç”Ÿæˆçš„incrementerå‡½æ•°ï¼Œéƒ½ä¼šå„è‡ªèŽ·å¾—ç±»ä¼¼å…¨å±€å˜é‡çš„ amountå’ŒruningTotalfuncby50()funcby50()funcby10()// 4 é—­åŒ…æ˜¯å¼•ç”¨ç±»åž‹(Closures Are Reference Types)// å‡½æ•°å’Œé—­åŒ…éƒ½æ˜¯å¼•ç”¨ç±»åž‹// æ— è®ºå°†å‡½æ•°æˆ–é—­åŒ…èµ‹å€¼ç»™ä¸€ä¸ªå¸¸é‡è¿˜æ˜¯å˜é‡ï¼Œå®žé™…ä¸Šéƒ½æ˜¯å°†å¸¸é‡æˆ–å˜é‡çš„å€¼è®¾ç½®ä¸ºå¯¹åº”å‡½æ•°æˆ–é—­åŒ…çš„å¼•ç”¨ã€‚let funcbyTen = funcby10funcbyTen()]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-6ï¼šFunctions]]></title>
    <url>%2F2017%2Fswift-6.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125/** Functions */// 1 å‡½æ•°çš„å®šä¹‰ä¸Žè°ƒç”¨ (Defining and Calling Functions)// å‚æ•°ï¼Œparameters// è¿”å›žç±»åž‹ï¼Œreturn type// å®žå‚ï¼Œargumentsfunc greet(person: String) -&gt; String &#123; return &quot;Hello, &quot; + person + &quot;!&quot;&#125;// 2 å‡½æ•°å‚æ•°ä¸Žè¿”å›žå€¼ (Function Parameters and Return Values)// æ— å‚æ•°å‡½æ•° (Functions Without Parameters)func sayHelloWorld() -&gt; String &#123; return &quot;hello, world&quot;&#125;// å¤šå‚æ•°å‡½æ•° (Functions With Multiple Parameters)func greet(person: String, alreadyGreeted: Bool) -&gt; String &#123; if alreadyGreeted &#123; return &quot;Hello, &quot; + person + &quot; again!&quot; &#125; else &#123; return &quot;Hello, &quot; + person + &quot;!&quot; &#125;&#125;// æ— è¿”å›žå€¼å‡½æ•° (Functions Without Return Values)// æ²¡æœ‰å®šä¹‰è¿”å›žç±»åž‹çš„å‡½æ•°ä¼š è¿”å›žä¸€ä¸ªç‰¹æ®Šçš„Voidå€¼ã€‚å®ƒå…¶å®žæ˜¯ä¸€ä¸ªç©ºçš„å…ƒç»„(tuple)ï¼Œæ²¡æœ‰ä»»ä½•å…ƒç´ ï¼Œå¯ä»¥å†™æˆ()ã€‚func greet(person: String) &#123; print(&quot;Hello, \(person)!&quot;)&#125;// å¤šä¸ªè¿”å›žå€¼å‡½æ•° (Functions with Multiple Return Values)func minMax(array: [Int]) -&gt; (min: Int, max: Int) &#123; var currentMin = array[0] var currentMax = array[0] for value in array[1..&lt;array.count] &#123; if value &lt; currentMin &#123; currentMin = value &#125; else if value &gt; currentMax &#123; currentMax = value &#125; &#125; return (currentMin, currentMax)&#125;let bounds = minMax(array: [8, -6, 2, 109, 3, 71])print(&quot;min is \(bounds.min) and max is \(bounds.max)&quot;)// å¯é€‰å…ƒç»„è¿”å›žç±»åž‹ (Optional Tuple Return Types)func minMax2(array: [Int]) -&gt; (min: Int, max: Int)? &#123; if array.isEmpty &#123; return nil &#125; var currentMin = array[0] var currentMax = array[0] for value in array[1..&lt;array.count] &#123; if value &lt; currentMin &#123; currentMin = value &#125; else if value &gt; currentMax &#123; currentMax = value &#125; &#125; return (currentMin, currentMax)&#125;if let bounds = minMax2(array: [8, -6, 2, 109, 3, 71]) &#123; print(&quot;min is \(bounds.min) and max is \(bounds.max)&quot;)&#125;// 3 å‡½æ•°å‚æ•°æ ‡ç­¾å’Œå‚æ•°åç§° (Function Argument Labels and Parameter Names)// æ¯ä¸ªå‡½æ•°å‚æ•°éƒ½æœ‰ä¸€ä¸ªå‚æ•°æ ‡ç­¾( argument label )ä»¥åŠä¸€ä¸ªå‚æ•°åç§°( parameter name )ã€‚å‚æ•°æ ‡ç­¾åœ¨è°ƒç”¨å‡½ æ•°çš„æ—¶å€™ä½¿ç”¨;è°ƒç”¨çš„æ—¶å€™éœ€è¦å°†å‡½æ•°çš„å‚æ•°æ ‡ç­¾å†™åœ¨å¯¹åº”çš„å‚æ•°å‰é¢ã€‚å‚æ•°åç§°åœ¨å‡½æ•°çš„å®žçŽ°ä¸­ä½¿ç”¨ã€‚func someFunction(argumentLabel parameterName: Int) &#123;&#125;// å¿½ç•¥å‚æ•°æ ‡ç­¾(Omitting Argument Labels)// é»˜è®¤å‚æ•°å€¼ (Default Parameter Values)// å¯å˜å‚æ•° (Variadic Parameters) ä¸€ä¸ªå‡½æ•°æœ€å¤šåªèƒ½æ‹¥æœ‰ä¸€ä¸ªå¯å˜å‚æ•°func arithmeticMean(_ numbers: Double...) -&gt; Double &#123; var total: Double = 0 for number in numbers &#123; total += number &#125; return total / Double(numbers.count)&#125;print(arithmeticMean(1,2,3))print(arithmeticMean(1.2,3.45,5,6,3.12))// è¾“å…¥è¾“å‡ºå‚æ•°(In-Out Parameters)// å‡½æ•°å‚æ•°é»˜è®¤æ˜¯å¸¸é‡ã€‚è¾“å…¥è¾“å‡ºå‚æ•°å¯ä»¥åœ¨å‡½æ•°ä¸­ä¿®æ”¹å‚æ•°ï¼Œå¹¶ä¸”åœ¨å‡½æ•°è°ƒç”¨ç»“æŸåŽä»ç„¶å­˜åœ¨ã€‚// åªèƒ½ä¼ é€’å˜é‡ç»™è¾“å…¥è¾“å‡ºå‚æ•°// è¾“å…¥è¾“å‡ºå‚æ•°ä¸èƒ½æœ‰é»˜è®¤å€¼ï¼Œè€Œä¸”å¯å˜å‚æ•°ä¸èƒ½ç”¨inoutæ ‡è®°ã€‚func swapTwoInts(_ a: inout Int, _ b: inout Int) &#123; let temporaryA = a a = b b = temporaryA&#125;var someInt = 3var anotherInt = 107swapTwoInts(&amp;someInt, &amp;anotherInt)print(&quot;someInt is now \(someInt), and anotherInt is now \(anotherInt)&quot;)// 4 å‡½æ•°ç±»åž‹ (Function Types)func addTwoInts(_ a: Int, _ b: Int) -&gt; Int &#123; // `(Int, Int) -&gt; Int` return a + b&#125;func printHelloWorld() &#123; // `() -&gt; Void` print(&quot;hello, world&quot;)&#125;// ä½¿ç”¨å‡½æ•°ç±»åž‹ (Using Function Types)var mathFunction: (Int, Int) -&gt; Int = addTwoIntsprint(&quot;Result: \(mathFunction(2, 3))&quot;)// å‡½æ•°ç±»åž‹ä½œä¸ºå‚æ•°ç±»åž‹ (Function Types as Parameter Types)func printMathResult(_ mathFunction: (Int, Int) -&gt; Int, _ a: Int, _ b: Int) &#123; print(&quot;Result: \(mathFunction(a, b))&quot;)&#125;printMathResult(addTwoInts, 3, 5)// å‡½æ•°ç±»åž‹ä½œä¸ºè¿”å›žç±»åž‹ (Function Types as Return Types)func stepForward(_ input: Int) -&gt; Int &#123; return input + 1&#125;func stepBackward(_ input: Int) -&gt; Int &#123; return input - 1&#125;func chooseStepFunction(backward: Bool) -&gt; (Int) -&gt; Int &#123; return backward ? stepBackward : stepForward&#125;// 5 åµŒå¥—å‡½æ•° (Nested Functions)func chooseStepFunction2(backward: Bool) -&gt; (Int) -&gt; Int &#123; func stepForward(input: Int) -&gt; Int &#123; return input + 1 &#125; func stepBackward(input: Int) -&gt; Int &#123; return input - 1 &#125; return backward ? stepBackward : stepForward&#125;]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-5ï¼šControl Flow]]></title>
    <url>%2F2017%2Fswift-5.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163/** Control Flow */// 1 for in// for in å¯ç”¨æ¥éåŽ† Array Dictionary Set Range Stringfor index in 1...5 &#123;&#125;for _ in 1...5 &#123;&#125;for v in [1,2,3] &#123;&#125;let numberOfLegs = [&quot;spider&quot;: 8, &quot;ant&quot;: 6, &quot;cat&quot;: 4]for (animalName, legCount) in numberOfLegs &#123;&#125;let countrys:Set = [&quot;China&quot;, &quot;USA&quot;, &quot;Japan&quot;]for country in countrys &#123;&#125;for s in &quot;andyron&quot;.characters &#123;&#125;// 2 whilevar i = 1while i &gt; 10 &#123; // ... i += 1&#125;// repeat-while ç±»ä¼¼å…¶ä»–è¯­è¨€çš„ do-while repeat &#123; // ... i += 1&#125; while i &gt; 10// 3 ifvar temperatureInFahrenheit = 30if temperatureInFahrenheit &lt;= 32 &#123; print(&quot;It&apos;s very cold. Consider wearing a scarf.&quot;)&#125; else if temperatureInFahrenheit &gt;= 86 &#123; print(&quot;It&apos;s really warm. Don&apos;t forget to wear sunscreen.&quot;)&#125; else &#123; print(&quot;It&apos;s not that cold. Wear a t-shirt.&quot;)&#125;// 4 switch// ä¸å­˜åœ¨éšå¼çš„è´¯ç©¿(No Implicit Fallthrough)ï¼Œä¸éœ€è¦breaklet anotherCharacter: Character = &quot;a&quot;switch anotherCharacter &#123;case &quot;a&quot;, &quot;A&quot;: print(&quot;The letter A&quot;)default: print(&quot;Not the letter A&quot;)&#125;// åŒºé—´åŒ¹é…let approximateCount = 62let countedThings = &quot;moons orbiting Saturn&quot;var naturalCount: Stringswitch approximateCount &#123;case 0: naturalCount = &quot;no&quot;case 1..&lt;5: naturalCount = &quot;a few&quot;case 5..&lt;12: naturalCount = &quot;several&quot;case 12..&lt;100: naturalCount = &quot;dozens of&quot;case 100..&lt;1000: naturalCount = &quot;hundreds of&quot;default: naturalCount = &quot;many&quot;&#125;// å…ƒç»„åŒ¹é…let somePoint = (1, 1)switch somePoint &#123;case (0, 0): print(&quot;(0, 0) is at the origin&quot;)case (_, 0): print(&quot;(\(somePoint.0), 0) is on the x-axis&quot;)case (0, _): print(&quot;(0, \(somePoint.1)) is on the y-axis&quot;)case (-2...2, -2...2): print(&quot;(\(somePoint.0), \(somePoint.1)) is inside the box&quot;)default: print(&quot;(\(somePoint.0), \(somePoint.1)) is outside of the box&quot;)&#125;// å€¼ç»‘å®š(Value Bindings)let anotherPoint = (2, 0)switch anotherPoint &#123;case (let x, 0): print(&quot;on the x-axis with an x value of \(x)&quot;)case (0, let y): print(&quot;on the y-axis with a y value of \(y)&quot;)case let (x, y): print(&quot;somewhere else at (\(x), \(y))&quot;)&#125;// caseåˆ†å¥ä¸­ä½¿ç”¨wherelet yetAnotherPoint = (1, -1)switch yetAnotherPoint &#123;case let (x, y) where x == y: print(&quot;(\(x), \(y)) is on the line x == y&quot;)case let (x, y) where x == -y: print(&quot;(\(x), \(y)) is on the line x == -y&quot;)case let (x, y): print(&quot;(\(x), \(y)) is just some arbitrary point&quot;)&#125;// å¤åˆåŒ¹é…// å½“å¤šä¸ªæ¡ä»¶å¯ä»¥ä½¿ç”¨åŒä¸€ç§æ–¹æ³•æ¥å¤„ç†æ—¶ï¼Œå¯ä»¥å°†è¿™å‡ ç§å¯èƒ½æ”¾åœ¨åŒä¸€ä¸ªcaseåŽé¢ï¼Œå¹¶ä¸”ç”¨é€—å·éš”å¼€ã€‚let stillAnotherPoint = (9, 0)switch stillAnotherPoint &#123;case (let distance, 0), (0, let distance): print(&quot;On an axis, \(distance) from the origin&quot;)default: print(&quot;Not on an axis&quot;)&#125;// 5 æŽ§åˆ¶è½¬ç§»è¯­å¥(Control Transfer Statements): continue break fallthrough return throw// è´¯ç©¿(Fallthrough) æ‰§è¡Œå®Œä¸€ä¸ªcaseåŽï¼Œç»§ç»­å‘ä¸‹æ‰§è¡Œlet integerToDescribe = 5var description = &quot;The number \(integerToDescribe) is&quot;switch integerToDescribe &#123;case 2, 3, 5, 7, 11, 13, 17, 19: description += &quot; a prime number, and also&quot; fallthroughdefault: description += &quot; an integer.&quot;&#125;// 6 guard ä¸Ž if// åŠŸèƒ½ç±»ä¼¼ã€‚åŒºåˆ«ï¼š1 guardå‡å°‘åµŒå¥—ï¼Œä¼šç®€æ´ 2 è§£åŒ…æ—¶ï¼Œguardçš„ç»“æžœä½œç”¨åŸŸä¸é™äºŽæœ¬èº«ã€‚// greet(person: [&quot;name&quot;: &quot;Jane&quot;, &quot;location&quot;: &quot;Cupertino&quot;])func greet(person: [String: String]) &#123; if let name = person[&quot;name&quot;] &#123; print(&quot;Hello \(name)!&quot;) if let location = person[&quot;location&quot;] &#123; print(&quot;I hope the weather is nice in \(location).&quot;) &#125; else &#123; print(&quot;I hope the weather is nice near you.&quot;) &#125; &#125; else &#123; print(&quot;Hello stranger!&quot;) &#125;// print(name) //nameçš„ä½œç”¨äºŽåªé™äºŽifä¸­&#125;func greet2(person: [String: String]) &#123; guard let name = person[&quot;name&quot;] else &#123; print(&quot;Hello stranger!&quot;) return &#125; print(&quot;Hello \(name)!&quot;) guard let location = person[&quot;location&quot;] else &#123; print(&quot;I hope the weather is nice near you.&quot;) return &#125; print(&quot;I hope the weather is nice in \(location).&quot;)&#125;// 7 æ£€æµ‹ API å¯ç”¨æ€§if #available(iOS 10, macOS 10.12, *) &#123; // åœ¨ iOS ä½¿ç”¨ iOS 10 çš„ API, åœ¨ macOS ä½¿ç”¨ macOS 10.12 çš„ API&#125; else &#123; // ä½¿ç”¨å…ˆå‰ç‰ˆæœ¬çš„ iOS å’Œ macOS çš„ API&#125;]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-4ï¼šCollection Type]]></title>
    <url>%2F2017%2Fswift-4.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104/** Collection Type */// Collection åˆ†ä¸º Arrays, Sets, Dictionaries(Collectionï¼ŒSetsæœ‰æ—¶éƒ½ç¿»è¯‘æˆé›†åˆ)// 1 æ•°ç»„(Arrays)æ˜¯æœ‰åºæ•°æ®çš„é›†ã€‚// ä¸€ä¸ªæ•°ç»„ä¸­åªèƒ½æœ‰ä¸€ç§æ•°æ®ç±»åž‹var someInts = [Int]() // åˆ›å»ºä¸€ä¸ªç”±ç‰¹å®šæ•°æ®ç±»åž‹æž„æˆçš„ç©ºæ•°ç»„someInts = [] // someInts çŽ°åœ¨æ˜¯ç©ºæ•°ç»„ï¼Œä½†æ˜¯ä»ç„¶æ˜¯ [Int] ç±»åž‹çš„ã€‚let unmutableArray = [2, 3, 5] // å®šä¹‰ä¸ºletï¼Œæ•°ç»„å†…å®¹å’Œæ•°é‡å°±ä¸èƒ½å˜åŒ–var threeDoubles = [Double](repeating:0.0, count: 3) // `Array`åˆ›å»ºç‰¹å®šå¤§å°å¹¶ä¸”æ‰€æœ‰æ•°æ®éƒ½æœ‰ç›¸åŒé»˜è®¤å€¼çš„æž„é€ æ–¹æ³•var anotherThreeDoubles = [Double](repeating: 2.5, count: 3)var sixDoubles = threeDoubles + anotherThreeDoubles // æ•°ç»„ç›¸åŠ sixDoubles.countsixDoubles.isEmptysixDoubles.append(2.6)sixDoubles += [3.2, 3.3]sixDoubles[0]sixDoubles[4...6] // é€šè¿‡åŒºé—´èŽ·å–å¤šä¸ªæ•°ç»„é¡¹ç»„æˆçš„æ–°æ•°ç»„ï¼Œæ³¨æ„åŒºé—´å¤§å°ä¸èƒ½è¶…è¿‡æ•°ç»„çš„ä¸‹æ ‡sixDoubles.insert(4.4, at: 2)sixDoubles.remove(at: 0)sixDoubles.removeLast()sixDoubles.removeAll()// æ•°ç»„éåŽ†var shoppingList = [&quot;Eggs&quot;, &quot;Milk&quot;]for item in shoppingList &#123;&#125;for (index, value) in shoppingList.enumerated() &#123; // enumerated()æŠŠæ•°ç»„çš„ç´¢å¼•å’Œå€¼ç”Ÿæˆsequenceç”¨äºŽéåŽ†&#125;// æ•°ç»„ç‰¹æ®Šæ“ä½œ //var a = (1...10)var arr = [1,3,7,11]var arr2 = arr.map&#123;$0 * 2&#125;var sum = arr.reduce(0,+)// éªŒè¯tweetä¸­æ˜¯å¦åŒ…å«é€‰å®šçš„è‹¥å¹²å…³é”®å­—ä¸­çš„ä¸€ä¸ªlet words = [&quot;Swift&quot;,&quot;iOS&quot;,&quot;cocoa&quot;,&quot;OSX&quot;,&quot;tvOS&quot;]let tweet = &quot;This is an example tweet larking about Swift&quot;//words.contains(tweet.containsString)//words.filter(&#123;tweet.containsString($0)&#125;)tweet.characters .split(separator: &quot; &quot;) .lazy .map(String.init) .contains(where: Set(words).contains)let name = &quot;andyron&quot;(1...4).forEach&#123;print(&quot;Happy Birthday &quot; + (($0 == 3) ? &quot;dear \(name)&quot;:&quot;to You&quot;))&#125;// 2 é›†åˆ(Sets)æ˜¯æ— åºæ— é‡å¤æ•°æ®çš„é›†ã€‚// å­˜åœ¨é›†åˆçš„ä¸­æ•°æ®ç±»åž‹å¿…é¡»æ˜¯ å¯å“ˆå¸ŒåŒ–ï¼ˆå¿…é¡»æä¾›ä¸€ä¸ªæ–¹æ³•æ¥è®¡ç®—å®ƒçš„å“ˆå¸Œå€¼ï¼Œ ç›¸ç­‰çš„å¯¹è±¡å“ˆå¸Œå€¼å¿…é¡»ç›¸åŒï¼Œ a.hashValue == b.hashValueï¼‰// Swiftçš„æ‰€æœ‰åŸºæœ¬ç±»åž‹(æ¯”å¦‚ String , Int , Double å’Œ Bool)é»˜è®¤éƒ½æ˜¯å¯å“ˆå¸ŒåŒ–çš„// åœ¨Swiftå†…éƒ¨å¯å“ˆå¸ŒåŒ–çš„ç±»åž‹éƒ½æŽ¥è§¦äº†`Hashable`åè®®ï¼Œå®ƒæé«˜äº†ä¸€ä¸ªå±žæ€§`hashValue`var letters = Set&lt;Character&gt;() // åˆ›å»ºå’Œæž„é€ ä¸€ä¸ªç©ºçš„ç±»åž‹ä¸º`Set&lt;Character&gt;`çš„é›†åˆletters.insert(&quot;a&quot;)letters = []var favoriteGenres: Set&lt;String&gt; = [&quot;Rock&quot;, &quot;Classical&quot;, &quot;Hip hop&quot;]var favoriteGenres2: Set = [&quot;Rock&quot;, &quot;Classical&quot;, &quot;Hip hop&quot;]favoriteGenres.insert(&quot;Jazz&quot;)favoriteGenres.countfavoriteGenres.remove(&quot;Classical&quot;) // æœ‰æˆå‘˜å°±è¿”å›žæ­¤æˆå‘˜ï¼Œå¦åˆ™è¿”å›ž`nil`//favoriteGenres.removeAll()favoriteGenres.contains(&quot;Rock&quot;)// éåŽ†é›†åˆfor genre in favoriteGenres &#123; print(genre)&#125;for genre in favoriteGenres.sorted() &#123; print(genre)&#125;// é›†åˆæ“ä½œfavoriteGenres = [&quot;Rock&quot;, &quot;Classical&quot;, &quot;Hip hop&quot;]favoriteGenres2 = [&quot;Hip hop&quot;, &quot;R&amp;B&quot;, &quot;rap&quot;]favoriteGenres.intersection(favoriteGenres2) // äº¤é›†favoriteGenres.symmetricDifference(favoriteGenres2) // å¯¹ç§°å·®é›†favoriteGenres.union(favoriteGenres2) // å¹¶é›†favoriteGenres.subtracting(favoriteGenres2) // å·®é›†favoriteGenres.subtract(favoriteGenres2) // åŒºåˆ«äºŽsubtractingï¼Œæ²¡æœ‰è¿”å›žå€¼ç›´æŽ¥ä¿®æ”¹favoriteGenresvar fg3: Set = [&quot;rap&quot;]favoriteGenres == favoriteGenres2favoriteGenres2.isSubset(of: fg3) // favoriteGenres2ä¸­æ‰€æœ‰å…ƒç´ æ˜¯å¦åœ¨fg3ä¸­favoriteGenres2.isSuperset(of: fg3) // favoriteGenres2æ˜¯å¦åŒ…æ‹¬fg3ä¸­æ‰€æœ‰å…ƒç´ favoriteGenres2.isStrictSubset(of: fg3) // favoriteGenres2ä¸­æ‰€æœ‰å…ƒç´ æ˜¯å¦åœ¨fg3ä¸­ï¼Œå¹¶ä¸”ä¸¤è€…ä¸ç›¸åŒfavoriteGenres2.isStrictSuperset(of: fg3) // favoriteGenres2æ˜¯å¦åŒ…æ‹¬fg3ä¸­æ‰€æœ‰å…ƒç´ ï¼Œå¹¶ä¸”ä¸¤è€…ä¸ç›¸åŒfavoriteGenres.isDisjoint(with: fg3) // favoriteGenresä¸Žfg3æ˜¯å¦æ²¡æœ‰äº¤é›†// 3 å­—å…¸(Dictionaries)æ˜¯æ— åºçš„é”®å€¼å¯¹çš„é›†ã€‚var namesOfIntegers = [Int: String]()namesOfIntegers[16] = &quot;sixteen&quot;namesOfIntegers = [:]var airports: [String: String] = [&quot;YYZ&quot;: &quot;Toronto Pearson&quot;, &quot;DUB&quot;: &quot;Dublin&quot;]var airports2 = [&quot;YYZ&quot;: &quot;Toronto Pearson&quot;, &quot;DUB&quot;: &quot;Dublin&quot;]airports.countairports.isEmptyairports[&quot;hongqiao&quot;] = &quot;shanghai&quot;airports.updateValue(&quot;nanjing&quot;, forKey: &quot;jichang&quot;)airports[&quot;jichang&quot;] = nil; //airports.remove(at: &quot;jichang&quot;)airports.keysairports.values// éåŽ†for (code, name) in airports &#123;&#125;for code in airports.keys &#123;&#125;]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-3ï¼šStrings and Characters]]></title>
    <url>%2F2017%2Fswift-3.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687/** Strings and Characters */// 1 å­—ç¬¦ä¸²å­—é¢é‡(String Literals)&quot;Some string literal value&quot;// 2 åˆå§‹åŒ–ç©ºå­—ç¬¦ä¸² (Initializing an Empty String)var emptyString = &quot;&quot;var anotherEmptyString = String()if emptyString.isEmpty &#123; print(&quot;Nothing to see here&quot;)&#125;// 3 å­—ç¬¦ä¸²å¯å˜æ€§(String Mutability)var variableString = &quot;Horse&quot;variableString += &quot; and carriage&quot;//let constantString = &quot;Highlander&quot;//constantString += &quot; and another Highlander&quot;// 4 å­—ç¬¦ä¸²æ˜¯å€¼ç±»åž‹(Strings Are Value Types)// åœ¨å®žé™…ç¼–è¯‘æ—¶ï¼ŒSwift ç¼–è¯‘å™¨ä¼šä¼˜åŒ–å­—ç¬¦ä¸²çš„ä½¿ç”¨ï¼Œä½¿å®žé™…çš„å¤åˆ¶åªå‘ç”Ÿåœ¨ç»å¯¹å¿…è¦çš„æƒ…å†µä¸‹ï¼Œè¿™æ„å‘³ç€æ‚¨å°†å­—ç¬¦ä¸²ä½œä¸ºå€¼ç±»åž‹çš„åŒæ—¶å¯ä»¥èŽ·å¾—æžé«˜çš„æ€§èƒ½ã€‚// 5 ä½¿ç”¨å­—ç¬¦(Working with Characters)for character in &quot;Dog!?ðŸ¶&quot;.characters &#123; print(character)&#125;let exclamationMark: Character = &quot;!&quot; // `Character`æ˜¯å­—ç¬¦ï¼ˆæ³¨æ„ä¹Ÿæ˜¯åŒå¼•å·ï¼Œä¸æ˜¯å•å¼•å·ï¼‰let catCharacters: [Character] = [&quot;C&quot;, &quot;a&quot;, &quot;t&quot;, &quot;!&quot;, &quot;?&quot;]let catString = String(catCharacters) // å­—ç¬¦æ•°ç»„ç”Ÿæˆå­—ç¬¦ä¸²// 6 è¿žæŽ¥å­—ç¬¦ä¸²å’Œå­—ç¬¦ (Concatenating Strings and Characters)let string1 = &quot;Hello&quot;let string2 = &quot; there&quot;var welcome0 = string1 + string2welcome0 += string1welcome0.append(exclamationMark)// 7 å­—ç¬¦ä¸²æ’å€¼ (String Interpolation)// æ’å€¼å­—ç¬¦ä¸²ä¸­å†™åœ¨æ‹¬å·ä¸­çš„è¡¨è¾¾å¼ä¸èƒ½åŒ…å«éžè½¬ä¹‰åŒå¼•å· (&quot;) å’Œåæ–œæ  (\)ï¼Œå¹¶ä¸”ä¸èƒ½åŒ…å«å›žè½¦æˆ–æ¢è¡Œç¬¦ã€‚let multiplier = 3let message = &quot;\(multiplier) times 2.5 is \(Double(multiplier) * 2.5)&quot; // message is &quot;3 times 2.5 is 7.5&quot;// 8 Unicode// Swiftçš„Stringå’ŒCharacterç±»åž‹æ˜¯å®Œå…¨å…¼å®¹Unicodeæ ‡å‡†çš„ã€‚let dollarSign = &quot;\u&#123;24&#125;&quot; // Unicode æ ‡é‡ U+0024let blackHeart = &quot;\u&#123;2665&#125;&quot; // Unicode æ ‡é‡ U+2665let sparklingHeart = &quot;\u&#123;1F496&#125;&quot; // Unicode æ ‡é‡ U+1F496// å¯æ‰©å±•çš„å­—å½¢ç¾¤é›†(Extended Grapheme Clusters)// 9 è®¡ç®—å­—ç¬¦æ•°é‡ (Counting Characters)welcome0.characters.count// 10 è®¿é—®å’Œä¿®æ”¹å­—ç¬¦ä¸² (Accessing and Modifying a String)let greeting = &quot;Guten Tag!&quot;greeting[greeting.startIndex] // Ggreeting[greeting.index(before: greeting.endIndex)] // !greeting[greeting.index(after: greeting.startIndex)] // ulet index = greeting.index(greeting.startIndex, offsetBy: 6) // ä»ŽæŸä¸ªç´¢å¼•å¼€å§‹å‘åŽoffsetByçš„ç´¢å¼•greeting[index]for index in greeting.characters.indices &#123; print(&quot;\(greeting[index]) &quot;, terminator: &quot;&quot;)&#125;// Inserting and Removingvar welcome = &quot;hello&quot;welcome.insert(&quot;!&quot;, at: welcome.endIndex) // welcome now equals &quot;hello!&quot;welcome.insert(contentsOf:&quot; there&quot;.characters, at: welcome.index(before: welcome.endIndex)) // welcome now equals &quot;hello there!welcome.remove(at: welcome.index(before: welcome.endIndex)) // welcome now equals &quot;hello there&quot;let range = welcome.index(welcome.endIndex, offsetBy: -6) ..&lt; welcome.endIndexwelcome.removeSubrange(range) // welcome now equals &quot;hello&quot;// 11 æ¯”è¾ƒå­—ç¬¦ä¸² (Comparing Strings)// 12 å­—ç¬¦ä¸²çš„ Unicode è¡¨ç¤ºå½¢å¼(Unicode Representations of Strings)// 13 Stringçš„å¸¸è§æ–¹æ³•å’Œå±žæ€§welcome.characters // `String`æ²¡æœ‰ç»§æ‰¿`Sequence`ï¼Œä¸èƒ½ç›´æŽ¥éåŽ†ï¼Œç”¨ `String.characters`welcome.characters.countfor c in welcome.characters &#123;&#125;welcome.isEmptywelcome.startIndexwelcome.hashValuewelcome.hasPrefix(&quot;he&quot;) // æ˜¯å¦æœ‰å‰ç¼€welcome.hasSuffix(&quot;!&quot;) // æ˜¯å¦æœ‰åŽç¼€welcome.lowercased() // å˜æˆå°å†™welcome.uppercased() // å˜æˆå¤§å†™]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-2ï¼šBasic Operators]]></title>
    <url>%2F2017%2Fswift-2.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566/** Basic Operators */// 1 èµ‹å€¼è¿ç®—ç¬¦(Assignment Operator)// èµ‹å€¼æ“ä½œå¹¶ä¸è¿”å›žä»»ä½•å€¼let b = 10var c = 5let (x, y) = (2, 5)// 2 ç®—æœ¯è¿ç®—ç¬¦(Arithmetic Operators)1 + 25 - 32 * 310.0 / 2.5&quot;hello, &quot; + &quot;world&quot;// æº¢å‡ºè¿ç®—(å¦‚ a &amp;+ b )// æ±‚ä½™è¿ç®—ç¬¦(Remainder Operator)// a % b a = (b Ã— å€æ•°) + ä½™æ•° å€æ•°æ˜¯æ•´æ•°ï¼Œå¯ä»¥æ˜¯è´Ÿæ•°9 % 4 // 1 9 = 4*2 + 1-9 % 4 // -1 -9 = 4*-2 + (-1)// è‡ªå¢žå’Œè‡ªå‡è¿ç®— (æœ€æ–°ç‰ˆçš„swiftå·²ç»åŽ»æŽ‰)// ä¸€å…ƒè´Ÿå·è¿ç®—ç¬¦/ä¸€å…ƒæ­£å·è¿ç®—ç¬¦// 3 å¤åˆèµ‹å€¼(Compound Assignment Operators)// å¤åˆèµ‹å€¼è¿ç®—æ²¡æœ‰è¿”å›žå€¼var a = 1a += 2// 4 æ¯”è¾ƒè¿ç®—ç¬¦(Comparsion Operators)1 == 11 &lt;= 22 &gt;= 11 &lt; 11 &gt; 2class A &#123; &#125;var obja = A()var objb = A()var objc = objaobja === objb // false æ’ç­‰ === å’Œä¸æ’ç­‰ !== åªç”¨æ¥ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡å®žä¾‹obja !== objc // false// 5 ä¸‰ç›®è¿ç®—ç¬¦(Ternary Conditional Operator)true ? &quot;true&quot; : &quot;false&quot;// 6 ç©ºåˆè¿ç®—ç¬¦(Nil Coalescing Operator)var e: String?var f = &quot;æˆ‘æ˜¯fuck&quot;e ?? f // `e != nil ? e! : f` ï¼Œ å¯é€‰ç±»åž‹`e`ä¸æ˜¯`nil`æ—¶ï¼Œå°±`e!`,å¦åˆ™ä¸º`f`ã€‚ï¼ˆæ³¨æ„`??`å‰åŽè¦ç©ºæ ¼ï¼‰// 7 åŒºé—´è¿ç®—ç¬¦(Range Operators)for index in 1...5 &#123; print(&quot;\(index) * 5 = \(index * 5)&quot;)&#125;for index in 1..&lt;5 &#123; print(&quot;\(index) * 5 = \(index * 5)&quot;)&#125;// é€»è¾‘è¿ç®—(Logical Operators) æ“ä½œå¯¹è±¡æ˜¯é€»è¾‘å¸ƒå°”å€¼var mybool = falsevar youbool = true!myboolmybool &amp;&amp; youboolmybool || youbool]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ä»¥æ’¸ä»£ç çš„å½¢å¼å­¦ä¹ Swift-1ï¼šThe Basics]]></title>
    <url>%2F2017%2Fswift-1.html</url>
    <content type="text"><![CDATA[playgroundæ–‡ä»¶åœ¨andyRon/LearnSwift 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158/** The Basics */// 1 å¸¸é‡å’Œå˜é‡(Constants and Variables)// å£°æ˜Žï¼šå¸¸é‡ let å˜é‡ varlet constants = 10var variables = 0// å¤šä¸ªå£°æ˜Žvar x = 0.0, y = 0.0, z = 0.0// ç±»åž‹æ ‡æ³¨(type annotation)var welcomeMessage: String// å¸¸é‡å’Œå˜é‡çš„å‘½å// å¸¸é‡ä¸Žå˜é‡åä¸èƒ½åŒ…å«æ•°å­¦ç¬¦å·ï¼Œç®­å¤´ï¼Œä¿ç•™çš„(æˆ–è€…éžæ³•çš„)Unicode ç ä½ï¼Œè¿žçº¿ä¸Žåˆ¶è¡¨ç¬¦ã€‚ä¹Ÿä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚// å¸¸é‡ä¸Žå˜é‡ä¸èƒ½ä¿®æ”¹ç±»åž‹ä¹Ÿä¸èƒ½äº’æ¢// ä½¿ç”¨åå¼•å·ï¼ˆ`ï¼‰æ¥ä½¿ç”¨ä¿ç•™å…³é”®å­—let Ï€ = 3.14159let ä½ å¥½ = &quot;ä½ å¥½ä¸–ç•Œ&quot;let `let` = &quot;hihi&quot;// è¾“å‡ºå¸¸é‡å’Œå˜é‡ `func print(_ items: Any..., separator: String = default, terminator: String = default)` ä¸‰ç§å‚æ•°ï¼šè¾“å‡ºé¡¹ã€åˆ†éš”ç¬¦ã€ç»“æŸç¬¦print(1,`let`, separator: &quot;,&quot;, terminator: &quot;&lt;br/&gt;&quot;)print(x, y, z, `let`)// å­—ç¬¦ä¸²æ’å€¼(string interpolation)print(&quot;The current value of constants is \(constants)&quot;)// 2 æ³¨é‡Š(Comment)// å•è¡Œæ³¨é‡Š/* /* å¤šè¡Œæ³¨é‡Šå¯ä»¥åµŒå¥—åœ¨å…¶å®ƒçš„å¤šè¡Œæ³¨é‡Šä¹‹ä¸­ */ */// 3 åˆ†å·(Semicolons) å•è¡Œå•æŒ‘è¯­å¥ä¸ä¸€å®šéœ€è¦ï¼Œå•è¡Œå¤šæ¡è¯­å¥å¿…é¡»let cat = &quot;?&quot;; print(cat)// 4 æ•´æ•°(Integers)// Uä»£è¡¨æ— ç¬¦å·// Intç±»åž‹ä¸Žå½“å‰ç³»ç»Ÿçš„ä½æ•°ç›¸åŒUInt8.maxUInt8.minInt8.maxInt32.maxUInt32.maxInt64.maxUInt64.maxInt.max// 5 æµ®ç‚¹æ•°(Floating-Point Numbers)Double(11.1) // 64ä½Float(11.1) // 32ä½// 6 ç±»åž‹å®‰å…¨(type safe)å’Œç±»åž‹æŽ¨æ–­(type inference)let meaningOfLife = 42 // meaningOfLife ä¼šè¢«æŽ¨æµ‹ä¸º Int ç±»åž‹let pi = 3.14159 // pi ä¼šè¢«æŽ¨æµ‹ä¸º Double ç±»åž‹(ä¼˜å…ˆé€‰æ‹© Double è€Œä¸æ˜¯ Float )// 7 æ•°å€¼åž‹å­—é¢é‡(Numeric Literals)// æ•´æ•°å­—é¢é‡150b1111 // äºŒè¿›åˆ¶150o17 // å…«è¿›åˆ¶150xf // åå…­è¿›åˆ¶15// æµ®ç‚¹å­—é¢é‡1.025e2 // 1.025*10^21.025e-2 // 1.025*10^-20xbp3 // 11*2^30xbp-3 // 11*2^-30xC.3p0 // (12+3/16)*2^0100_000 // _å¢žå¼ºå¯è¯»æ€§// 8 æ•°å€¼åž‹ç±»åž‹è½¬æ¢(Numeric Type Conversion)// æ•´æ•°è½¬æ¢let twoThousand: UInt16 = 2_000let one: UInt8 = 1let twoThousandAndOne = twoThousand + UInt16(one) // `UInt16`æœ‰ä¸€ä¸ªæž„é€ å™¨ï¼ŒæŽ¥å—`UInt8`ç±»åž‹çš„å‚æ•°ç”Ÿæˆ`UInt16`// æ•´æ•°å’Œæµ®ç‚¹æ•°è½¬æ¢let three = 3let pointOneFourOneFiveNine = 0.14159let pi2 = Double(three) + pointOneFourOneFiveNinelet integerPi = Int(pi2)let pi3 = 3 + 0.14159 // å­—é¢é‡æ²¡æœ‰ç‰¹å®šçš„ç±»åž‹ï¼Œæ‰€ä»¥å¯ä»¥ç›´æŽ¥ç›¸åŠ // 9 ç±»åž‹åˆ«å(type aliases)typealias AudioSample = UInt16AudioSample.max// 10 å¸ƒå°”å€¼truefalse// 11 å…ƒç»„(tuples) æŠŠå¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªå¤åˆå€¼// å…ƒç»„åœ¨ä¸´æ—¶ç»„ç»‡å€¼çš„æ—¶å€™å¾ˆæœ‰ç”¨ï¼Œä½†æ˜¯å¹¶ä¸é€‚åˆåˆ›å»ºå¤æ‚çš„æ•°æ®ç»“æž„ã€‚let http404Error = (404, &quot;Not Found&quot;) // ä¸€ä¸ªç±»åž‹ä¸º (Int, String) çš„å…ƒç»„ï¼Œ ç”¨äºŽæè¿° HTTP çŠ¶æ€ç let (statusCode, statusMessage) = http404Error // å…ƒç»„çš„å†…å®¹åˆ†è§£(decompose)let (justTheStatusCode, _) = http404Errorhttp404Error.0 // ä¸‹æ ‡è®¿é—®let http200Status = (statusCode: 200, description: &quot;OK&quot;) // ç»™å…ƒç»„å…ƒç´ å‘½åhttp200Status.description// 12 å¯é€‰ç±»åž‹(optionals)// å£°æ˜Žä¸€ä¸ªå¯é€‰å¸¸é‡æˆ–è€…å˜é‡ä½†æ˜¯æ²¡æœ‰èµ‹å€¼ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨è¢«è®¾ç½®ä¸º nilvar optionalString: String? // optionalStringçš„ç±»åž‹è¦ä¹ˆæ˜¯Stringï¼Œè¦ä¹ˆæ˜¯nillet possibleNumber = &quot;123&quot;let convertedNumber = Int(possibleNumber) // convertedNumber è¢«æŽ¨æµ‹ä¸ºå¯é€‰çš„`Int`// if è¯­å¥ä»¥åŠå¼ºåˆ¶è§£æž// ä½¿ç”¨ if è¯­å¥å’Œ nil æ¯”è¾ƒæ¥åˆ¤æ–­ä¸€ä¸ªå¯é€‰å€¼æ˜¯å¦åŒ…å«å€¼if convertedNumber != nil &#123; print(&quot;convertedNumber has an integer value of \(convertedNumber!).&quot;) // `!`ç§°ä¸ºå¯é€‰å€¼çš„å¼ºåˆ¶è§£æž(forced unwrapping)&#125;// optionalString! æŠ¥é”™ï¼Œ ä½¿ç”¨!æ¥å¼ºåˆ¶è§£æžå€¼ä¹‹å‰ï¼Œä¸€å®šè¦ç¡®å®šå¯é€‰åŒ…å«ä¸€ä¸ªéžnil çš„å€¼ã€‚// å¯é€‰ç»‘å®š(optional binding)if let actualNumber = Int(possibleNumber) &#123; // å¦‚æžœ`Int(possibleNumber)`å¼ºåˆ¶è§£æžçš„å€¼ä¸æ˜¯nilï¼Œå°±èµ‹å€¼ç»™actualNumberï¼Œå¹¶ä¸”è¯­å¥ä¸ºture print(&quot;\&apos;\(possibleNumber)\&apos; has an integer value of \(actualNumber)&quot;)&#125; else &#123; print(&quot;\&apos;\(possibleNumber)\&apos; could not be converted to an integer&quot;)&#125;var someOptional: String? = &quot;some&quot;var someOtherOptional: String?if let constantName = someOptional, let anotherConstantName = someOtherOptional&#123; print(&quot;å¤šä¸ªå¯é€‰ç»‘å®šå¯ä»¥ç”¨é€—å·åˆ†éš”, éœ€è¦æ¯ä¸€ä¸ªè¯­å¥éƒ½ä¸ºtrue&quot;)&#125;// éšå¼è§£æžå¯é€‰ç±»åž‹(implicitly unwrapped optionals): ä¸€ä¸ªå¯ä»¥è‡ªåŠ¨è§£æžçš„å¯é€‰ç±»åž‹let possibleString: String? = &quot;An optional string.&quot;let forcedString: String = possibleString! // éœ€è¦æƒŠå¹å·æ¥èŽ·å–å€¼let assumedString: String! = &quot;An implicitly unwrapped optional string.&quot;let implicitString: String = assumedString // ä¸éœ€è¦æ„Ÿå¹å·if assumedString != nil &#123; print(assumedString)&#125;// 13 é”™è¯¯å¤„ç†func canThrowAnErrow() throws &#123; // è¿™ä¸ªå‡½æ•°æœ‰å¯èƒ½æŠ›å‡ºé”™è¯¯&#125;do &#123; try canThrowAnErrow() // æ²¡æœ‰é”™è¯¯æ¶ˆæ¯æŠ›å‡º&#125; catch &#123; // æœ‰ä¸€ä¸ªé”™è¯¯æ¶ˆæ¯æŠ›å‡º&#125;enum myError: Error &#123; case OutOfCleanDishes case MissingIngredients&#125;func makeASandwich() throws &#123; // ... throw myError.OutOfCleanDishes&#125;do &#123; try makeASandwich()&#125; catch myError.OutOfCleanDishes &#123; // washDishes()&#125; catch myError.MissingIngredients&#123; // buyGroceries&#125;// 14 æ–­è¨€(assertion)let age = -3//assert(age &gt;= 0, &quot;A person&apos;s age cannot be less than zero&quot;)]]></content>
      <categories>
        <category>swift</category>
      </categories>
  </entry>
</search>
