<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta name="google-site-verification" content="WbjivD7TTMEtYj5PSWVYMaX2uAfY6lr-R517vwDhLWo" />
<meta name="baidu-site-verification" content="ZmrU9vDYWs" />


  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-big-counter.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="iOS, Swift" />





  <link rel="alternate" href="/atom.xml" title="欣欣向戎" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="一、类型和运算寻求帮助12dir(obj)            # 简单的列出对象obj所包含的方法名称，返回一个字符串列表help(obj.func)      # 查询obj.func的具体介绍和用法 测试类型的三种方法推荐第三种 123456if type(L) == type([]):    print(&quot;L is list&quot;)if type(L) == list:    print(&quot;">
<meta property="og:type" content="article">
<meta property="og:title" content="Python基础总结">
<meta property="og:url" content="http://andyron.com/2019/python-base.html">
<meta property="og:site_name" content="欣欣向戎">
<meta property="og:description" content="一、类型和运算寻求帮助12dir(obj)            # 简单的列出对象obj所包含的方法名称，返回一个字符串列表help(obj.func)      # 查询obj.func的具体介绍和用法 测试类型的三种方法推荐第三种 123456if type(L) == type([]):    print(&quot;L is list&quot;)if type(L) == list:    print(&quot;">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-09-17T03:38:37.857Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Python基础总结">
<meta name="twitter:description" content="一、类型和运算寻求帮助12dir(obj)            # 简单的列出对象obj所包含的方法名称，返回一个字符串列表help(obj.func)      # 查询obj.func的具体介绍和用法 测试类型的三种方法推荐第三种 123456if type(L) == type([]):    print(&quot;L is list&quot;)if type(L) == list:    print(&quot;">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":true},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 'undefined',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://andyron.com/2019/python-base.html"/>








  <title>Python基础总结 | 欣欣向戎</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?e29ae2ff2bac53a3addad74e238d0108";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <a href="https://github.com/andyRon"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">欣欣向戎</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">AndyRon's Blog</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://andyron.com/2019/python-base.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="AndyRon">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="欣欣向戎">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Python基础总结</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-15T20:06:00+08:00">
                2019-09-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/python-base.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2019/python-base.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/python-base.html" class="leancloud_visitors" data-flag-title="Python基础总结">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <span class="post-meta-divider">|</span>
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  : 14,265 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  ≈ 65 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="一、类型和运算"><a href="#一、类型和运算" class="headerlink" title="一、类型和运算"></a>一、类型和运算</h2><h3 id="寻求帮助"><a href="#寻求帮助" class="headerlink" title="寻求帮助"></a>寻求帮助</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dir(obj)            <span class="comment"># 简单的列出对象obj所包含的方法名称，返回一个字符串列表</span></span><br><span class="line">help(obj.func)      <span class="comment"># 查询obj.func的具体介绍和用法</span></span><br></pre></td></tr></table></figure>
<h3 id="测试类型的三种方法"><a href="#测试类型的三种方法" class="headerlink" title="测试类型的三种方法"></a>测试类型的三种方法</h3><p>推荐第三种</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> type(L) == type([]):</span><br><span class="line">    print(<span class="string">"L is list"</span>)</span><br><span class="line"><span class="keyword">if</span> type(L) == list:</span><br><span class="line">    print(<span class="string">"L is list"</span>)</span><br><span class="line"><span class="keyword">if</span> isinstance(L, list):</span><br><span class="line">    print(<span class="string">"L is list"</span>)</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="Python数据类型：哈希类型、不可哈希类型"><a href="#Python数据类型：哈希类型、不可哈希类型" class="headerlink" title="Python数据类型：哈希类型、不可哈希类型"></a>Python数据类型：哈希类型、不可哈希类型</h3><ul>
<li><p>哈希类型，即在原地不能改变的变量类型，不可变类型。可利用hash函数查看其hash值，也可以作为字典的key<br>数字类型：int, float, decimal.Decimal, fractions.Fraction, complex<br>字符串类型：str, bytes<br>元组：tuple<br>冻结集合：frozenset<br>布尔类型：True, False<br>None</p>
</li>
<li><p>不可哈希类型，原地可变类型：list、dict和set。它们不可以作为字典的key。</p>
</li>
</ul>
<h3 id="数字常量"><a href="#数字常量" class="headerlink" title="数字常量"></a>数字常量</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1234</span>, <span class="number">-1234</span>, <span class="number">0</span>, <span class="number">999999999</span>                    <span class="comment"># 整数</span></span><br><span class="line"><span class="number">1.23</span>, <span class="number">1.</span>, <span class="number">3.14e-10</span>, <span class="number">4E210</span>, <span class="number">4.0e+210</span>          <span class="comment"># 浮点数</span></span><br><span class="line"><span class="number">0o177</span>, <span class="number">0x9ff</span>, <span class="number">0X9FF</span>, <span class="number">0b101010</span>                <span class="comment"># 八进制、十六进制、二进制数字</span></span><br><span class="line"><span class="number">3</span>+<span class="number">4j</span>, <span class="number">3.0</span>+<span class="number">4.0j</span>, <span class="number">3J</span>                           <span class="comment"># 复数常量，也可以用complex(real, image)来创建</span></span><br><span class="line">hex(I), oct(I), bin(I)                       <span class="comment"># 将十进制数转化为十六进制、八进制、二进制表示的“字符串”</span></span><br><span class="line">int(string, base)                            <span class="comment"># 将字符串转化为整数，base为进制数</span></span><br><span class="line"><span class="comment"># 2.x中，有两种整数类型：一般整数（32位）和长整数（无穷精度）。可以用l或L结尾，迫使一般整数成为长整数</span></span><br><span class="line">float(<span class="string">'inf'</span>), float(<span class="string">'-inf'</span>), float(<span class="string">'nan'</span>)    <span class="comment"># 无穷大, 无穷小, 非数</span></span><br></pre></td></tr></table></figure>
<h3 id="数字的表达式操作符"><a href="#数字的表达式操作符" class="headerlink" title="数字的表达式操作符"></a>数字的表达式操作符</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">yield</span> x                                      <span class="comment"># 生成器函数发送协议</span></span><br><span class="line"><span class="keyword">lambda</span> args: expression                      <span class="comment"># 生成匿名函数</span></span><br><span class="line">x <span class="keyword">if</span> y <span class="keyword">else</span> z                                <span class="comment"># 三元选择表达式</span></span><br><span class="line">x <span class="keyword">and</span> y, x <span class="keyword">or</span> y, <span class="keyword">not</span> x                       <span class="comment"># 逻辑与、逻辑或、逻辑非</span></span><br><span class="line">x <span class="keyword">in</span> y, x <span class="keyword">not</span> <span class="keyword">in</span> y                           <span class="comment"># 成员对象测试</span></span><br><span class="line">x <span class="keyword">is</span> y, x <span class="keyword">is</span> <span class="keyword">not</span> y                           <span class="comment"># 对象实体测试</span></span><br><span class="line">x&lt;y, x&lt;=y, x&gt;y, x&gt;=y, x==y, x!=y             <span class="comment"># 大小比较，集合子集或超集值相等性操作符</span></span><br><span class="line"><span class="number">1</span> &lt; a &lt; <span class="number">3</span>                                    <span class="comment"># Python中允许连续比较</span></span><br><span class="line">x|y, x&amp;y, x^y                                <span class="comment"># 位或、位与、位异或</span></span><br><span class="line">x&lt;&lt;y, x&gt;&gt;y                                   <span class="comment"># 位操作：x左移、右移y位</span></span><br><span class="line">+, -, *, /, //, %, **                        <span class="comment"># 真除法、floor除法：返回不大于真除法结果的整数值、取余、幂运算</span></span><br><span class="line">-x, +x, ~x                                   <span class="comment"># 一元减法、识别、按位求补（取反）</span></span><br><span class="line">x[i], x[i:j:k]                               <span class="comment"># 索引、分片、调用</span></span><br><span class="line">int(<span class="number">3.14</span>), float(<span class="number">3</span>)                          <span class="comment"># 强制类型转换</span></span><br></pre></td></tr></table></figure>
<h3 id="整数可以利用bit-length函数测试所占的二进制位数"><a href="#整数可以利用bit-length函数测试所占的二进制位数" class="headerlink" title="整数可以利用bit_length函数测试所占的二进制位数"></a>整数可以利用<code>bit_length</code>函数测试所占的二进制位数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span>;       a.bit_length()    <span class="comment"># 1</span></span><br><span class="line">a = <span class="number">1024</span>;    a.bit_length()    <span class="comment"># 11</span></span><br></pre></td></tr></table></figure>
<h3 id="repr和str显示格式的区别"><a href="#repr和str显示格式的区别" class="headerlink" title="repr和str显示格式的区别"></a>repr和str显示格式的区别</h3><p>repr格式：默认的交互模式回显，产生的结果看起来它们就像是代码。<br>str格式：打印语句，转化成一种对用户更加友好的格式。</p>
<h3 id="数字相关的模块"><a href="#数字相关的模块" class="headerlink" title="数字相关的模块"></a>数字相关的模块</h3><ul>
<li>math模块</li>
<li>Decimal模块：小数模块</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> decimal</span><br><span class="line"><span class="keyword">from</span> decimal <span class="keyword">import</span> Decimal</span><br><span class="line">Decimal(<span class="string">"0.01"</span>) + Decimal(<span class="string">"0.02"</span>)        <span class="comment"># 返回Decimal("0.03")</span></span><br><span class="line">decimal.getcontext().prec = <span class="number">4</span>            <span class="comment"># 设置全局精度为4 即小数点后边4位</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Fraction模块：分数模块</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fractions <span class="keyword">import</span> Fraction</span><br><span class="line">x = Fraction(<span class="number">4</span>, <span class="number">6</span>)                       <span class="comment"># 分数类型 4/6</span></span><br><span class="line">x = Fraction(<span class="string">"0.25"</span>)                     <span class="comment"># 分数类型 1/4 接收字符串类型的参数</span></span><br></pre></td></tr></table></figure>
<h3 id="集合set"><a href="#集合set" class="headerlink" title="集合set"></a>集合set</h3><p>set是一个无序不重复元素集, 基本功能包括<strong>关系测试</strong>和<strong>消除重复元素</strong>。<br>set支持union(<strong>联合</strong>), intersection(<strong>交</strong>), difference(差)和symmetric difference(<strong>对称差集</strong>)等数学运算。<br>set支持<code>x in set</code>, <code>len(set)</code>, <code>for x in set</code>。<br>set不记录元素位置或者插入点, 因此不支持<code>indexing</code>, <code>slicing</code>, 或其它类序列的操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">s = set([<span class="number">3</span>,<span class="number">5</span>,<span class="number">9</span>,<span class="number">10</span>])                          <span class="comment"># 创建一个数值集合，返回&#123;3, 5, 9, 10&#125;</span></span><br><span class="line">t = set(<span class="string">"Hello"</span>)                             <span class="comment"># 创建一个唯一字符的集合返回&#123;&#125;</span></span><br><span class="line">a = t | s;    t.union(s)                     <span class="comment"># t 和 s的并集</span></span><br><span class="line">b = t &amp; s;    t.intersection(s)              <span class="comment"># t 和 s的交集</span></span><br><span class="line">c = t – s;    t.difference(s)                <span class="comment"># 求差集（项在t中, 但不在s中）</span></span><br><span class="line">d = t ^ s;    t.symmetric_difference(s)      <span class="comment"># 对称差集（项在t或s中, 但不会同时出现在二者中）</span></span><br><span class="line">t.add(<span class="string">'x'</span>);   t.remove(<span class="string">'H'</span>)                  <span class="comment"># 增加/删除一个item</span></span><br><span class="line">s.update([<span class="number">10</span>,<span class="number">37</span>,<span class="number">42</span>])                         <span class="comment"># 利用[......]更新s集合</span></span><br><span class="line">x <span class="keyword">in</span> s,  x <span class="keyword">not</span> <span class="keyword">in</span> s                          <span class="comment"># 集合中是否存在某个值</span></span><br><span class="line">s.issubset(t);      s &lt;= t                   <span class="comment"># 测试是否 s 中的每一个元素都在 t 中</span></span><br><span class="line">s.issuperset(t);    s &gt;= t                   <span class="comment"># 测试是否 t 中的每一个元素都在 s 中 </span></span><br><span class="line">s.copy(); </span><br><span class="line">s.discard(x);                                <span class="comment"># 删除s中x</span></span><br><span class="line">s.clear()                                    <span class="comment"># 清空s</span></span><br><span class="line">&#123;x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]&#125;                 <span class="comment"># 集合解析，结果：&#123;16, 1, 4, 9&#125;</span></span><br><span class="line">&#123;x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="string">'spam'</span>&#125;                          <span class="comment"># 集合解析，结果：&#123;'a', 'p', 's', 'm'&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="集合frozenset，不可变对象"><a href="#集合frozenset，不可变对象" class="headerlink" title="集合frozenset，不可变对象"></a>集合frozenset，不可变对象</h3><p>set是可变对象，即不存在hash值，不能作为字典的键值。同样的还有list等(tuple是可以作为字典key的)<br>frozenset是不可变对象，即存在hash值，可作为字典的键值<br>frozenset对象没有add、remove等方法，但有union/intersection/difference等方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = set([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">b = set()</span><br><span class="line">b.add(a)                     <span class="comment"># error: set是不可哈希类型</span></span><br><span class="line">b.add(frozenset(a))          <span class="comment"># ok，将set变为frozenset，可哈希</span></span><br></pre></td></tr></table></figure>
<h3 id="布尔类型bool"><a href="#布尔类型bool" class="headerlink" title="布尔类型bool"></a>布尔类型bool</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type(<span class="keyword">True</span>)                   <span class="comment"># 返回&lt;class 'bool'&gt;</span></span><br><span class="line">isinstance(<span class="keyword">False</span>, int)       <span class="comment"># bool类型属于整型，所以返回True</span></span><br><span class="line"><span class="keyword">True</span> == <span class="number">1</span>; <span class="keyword">True</span> <span class="keyword">is</span> <span class="number">1</span>         <span class="comment"># 输出(True, False)</span></span><br></pre></td></tr></table></figure>
<h3 id="动态类型简介"><a href="#动态类型简介" class="headerlink" title="动态类型简介"></a>动态类型简介</h3><p>变量名通过引用，指向对象。<br>Python中的“类型”属于对象，而不是变量，每个对象都包含有头部信息，比如”类型标示符” “引用计数器”等</p>
<p><strong>共享引用</strong>及在原处修改：对于可变对象，要注意尽量不要共享引用！<br>共享引用和相等测试：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">L = [<span class="number">1</span>], M = [<span class="number">1</span>], L <span class="keyword">is</span> M            <span class="comment"># 返回False</span></span><br><span class="line">L = M = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], L <span class="keyword">is</span> M           <span class="comment"># 返回True，共享引用</span></span><br></pre></td></tr></table></figure>
<p>增强赋值和共享引用：普通+号会生成新的对象，而增强赋值+=会在原处修改</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">L = M = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">L = L + [<span class="number">3</span>, <span class="number">4</span>]                      <span class="comment"># L = [1, 2, 3, 4], M = [1, 2]</span></span><br><span class="line">L += [<span class="number">3</span>, <span class="number">4</span>]                         <span class="comment"># L = [1, 2, 3, 4], M = [1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>
<h3 id="常见字符串常量和表达式"><a href="#常见字符串常量和表达式" class="headerlink" title="常见字符串常量和表达式"></a>常见字符串常量和表达式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">S = <span class="string">''</span>                                  <span class="comment"># 空字符串</span></span><br><span class="line">S = <span class="string">"spam’s"</span>                            <span class="comment"># 双引号和单引号相同</span></span><br><span class="line">S = <span class="string">"s\np\ta\x00m"</span>                      <span class="comment"># 转义字符</span></span><br><span class="line">S = <span class="string">"""spam"""</span>                          <span class="comment"># 三重引号字符串，一般用于函数说明</span></span><br><span class="line">S = <span class="string">r'\temp'</span>                            <span class="comment"># Raw字符串，不会进行转义，抑制转义</span></span><br><span class="line">S = <span class="string">b'Spam'</span>                             <span class="comment"># Python3中的字节字符串</span></span><br><span class="line">S = <span class="string">u'spam'</span>                             <span class="comment"># Python2.6中的Unicode字符串</span></span><br><span class="line">s1+s2, s1*<span class="number">3</span>, s[i], s[i:j], len(s)       <span class="comment"># 字符串操作</span></span><br><span class="line"><span class="string">'a %s parrot'</span> % <span class="string">'kind'</span>                  <span class="comment"># 字符串格式化表达式</span></span><br><span class="line"><span class="string">'a &#123;1&#125; &#123;0&#125; parrot'</span>.format(<span class="string">'kind'</span>, <span class="string">'red'</span>)<span class="comment"># 字符串格式化方法</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> s: print(x)                    <span class="comment"># 字符串迭代，成员关系</span></span><br><span class="line">[x*<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> s]                        <span class="comment"># 字符串列表解析</span></span><br><span class="line"><span class="string">','</span>.join([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])               <span class="comment"># 字符串输出，结果：a,b,c</span></span><br></pre></td></tr></table></figure>
<h3 id="内置str处理函数："><a href="#内置str处理函数：" class="headerlink" title="内置str处理函数："></a>内置str处理函数：</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">str1 = <span class="string">"stringobject"</span></span><br><span class="line">str1.upper(); str1.lower(); str1.swapcase(); str1.capitalize(); str1.title()        <span class="comment"># 全部大写，全部小写、大小写转换，首字母大写，每个单词的首字母都大写</span></span><br><span class="line">str1.ljust(width)                       <span class="comment"># 获取固定长度，左对齐，右边不够用空格补齐</span></span><br><span class="line">str1.rjust(width)                       <span class="comment"># 获取固定长度，右对齐，左边不够用空格补齐</span></span><br><span class="line">str1.center(width)                      <span class="comment"># 获取固定长度，中间对齐，两边不够用空格补齐</span></span><br><span class="line">str1.zfill(width)                       <span class="comment"># 获取固定长度，右对齐，左边不足用0补齐</span></span><br><span class="line">str1.find(<span class="string">'t'</span>,start,end)                <span class="comment"># 查找字符串，可以指定起始及结束位置搜索</span></span><br><span class="line">str1.rfind(<span class="string">'t'</span>)                         <span class="comment"># 从右边开始查找字符串</span></span><br><span class="line">str1.count(<span class="string">'t'</span>)                         <span class="comment"># 查找字符串出现的次数</span></span><br><span class="line"><span class="comment">#上面所有方法都可用index代替，不同的是使用index查找不到会抛异常，而find返回-1</span></span><br><span class="line">str1.replace(<span class="string">'old'</span>,<span class="string">'new'</span>)               <span class="comment"># 替换函数，替换old为new，参数中可以指定maxReplaceTimes，即替换指定次数的old为new</span></span><br><span class="line">str1.strip();                           <span class="comment"># 默认删除空白符</span></span><br><span class="line">str1.strip(<span class="string">'d'</span>);                        <span class="comment"># 删除str1字符串中开头、结尾处，位于 d 删除序列的字符</span></span><br><span class="line">str1.lstrip();</span><br><span class="line">str1.lstrip(<span class="string">'d'</span>);                       <span class="comment"># 删除str1字符串中开头处，位于 d 删除序列的字符</span></span><br><span class="line">str1.rstrip();</span><br><span class="line">str1.rstrip(<span class="string">'d'</span>)                        <span class="comment"># 删除str1字符串中结尾处，位于 d 删除序列的字符</span></span><br><span class="line">str1.startswith(<span class="string">'start'</span>)                <span class="comment"># 是否以start开头</span></span><br><span class="line">str1.endswith(<span class="string">'end'</span>)                    <span class="comment"># 是否以end结尾</span></span><br><span class="line">str1.isalnum(); str1.isalpha(); str1.isdigit(); str1.islower(); str1.isupper()      <span class="comment"># 判断字符串是否全为字符、数字、小写、大写</span></span><br></pre></td></tr></table></figure>
<h3 id="三重引号编写多行字符串块，并且在代码折行处嵌入换行字符-n"><a href="#三重引号编写多行字符串块，并且在代码折行处嵌入换行字符-n" class="headerlink" title="三重引号编写多行字符串块，并且在代码折行处嵌入换行字符\n"></a>三重引号编写多行字符串块，并且在代码折行处嵌入换行字符\n</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mantra = <span class="string">"""hello world</span></span><br><span class="line"><span class="string">        hello python</span></span><br><span class="line"><span class="string">        hello my friend"""</span></span><br><span class="line"><span class="comment"># mantra为"""hello world \n hello python \n hello my friend"""</span></span><br></pre></td></tr></table></figure>
<h3 id="索引和分片："><a href="#索引和分片：" class="headerlink" title="索引和分片："></a>索引和分片：</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">S[<span class="number">0</span>], S[len(S)–<span class="number">1</span>], S[<span class="number">-1</span>]                <span class="comment"># 索引</span></span><br><span class="line">S[<span class="number">1</span>:<span class="number">3</span>], S[<span class="number">1</span>:], S[:<span class="number">-1</span>], S[<span class="number">1</span>:<span class="number">10</span>:<span class="number">2</span>]        <span class="comment"># 分片，第三个参数指定步长，如`S[1:10:2]`是从1位到10位没隔2位获取一个字符。</span></span><br></pre></td></tr></table></figure>
<h3 id="字符串转换工具："><a href="#字符串转换工具：" class="headerlink" title="字符串转换工具："></a>字符串转换工具：</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int(<span class="string">'42'</span>), str(<span class="number">42</span>)                      <span class="comment"># 返回(42, '42')</span></span><br><span class="line">float(<span class="string">'4.13'</span>), str(<span class="number">4.13</span>)                <span class="comment"># 返回(4.13, '4.13')</span></span><br><span class="line">ord(<span class="string">'s'</span>), chr(<span class="number">115</span>)                      <span class="comment"># 返回(115, 's')</span></span><br><span class="line">int(<span class="string">'1001'</span>, <span class="number">2</span>)                          <span class="comment"># 将字符串作为二进制数字，转化为数字，返回9</span></span><br><span class="line">bin(<span class="number">13</span>), oct(<span class="number">13</span>), hex(<span class="number">13</span>)               <span class="comment"># 将整数转化为二进制/八进制/十六进制字符串，返回('0b1101', '015', '0xd')</span></span><br></pre></td></tr></table></figure>
<h3 id="另类字符串连接"><a href="#另类字符串连接" class="headerlink" title="另类字符串连接"></a>另类字符串连接</h3><pre><code>name = &quot;Andy&quot; &quot;Ron&quot;                    # 单行，name = &quot;AndyRon&quot;
name = &quot;Andy&quot; \
        &quot;Ron&quot;                          # 多行，name = &quot;AndyRon&quot;
</code></pre><h3 id="Python中的字符串格式化实现1–字符串格式化表达式"><a href="#Python中的字符串格式化实现1–字符串格式化表达式" class="headerlink" title="Python中的字符串格式化实现1–字符串格式化表达式"></a>Python中的字符串格式化实现1–字符串格式化表达式</h3><p>基于C语言<code>print</code>模型，并且在大多数的现有的语言中使用。<br>通用结构：<code>%[(name)][flag][width].[precision]typecode</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"this is %d %s bird"</span> % (<span class="number">1</span>, <span class="string">'dead'</span>)                          <span class="comment"># 一般的格式化表达式</span></span><br><span class="line"><span class="string">"%s---%s---%s"</span> % (<span class="number">42</span>, <span class="number">3.14</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])                      <span class="comment"># 字符串输出：'42---3.14---[1, 2, 3]'</span></span><br><span class="line"><span class="string">"%d...%6d...%-6d...%06d"</span> % (<span class="number">1234</span>, <span class="number">1234</span>, <span class="number">1234</span>, <span class="number">1234</span>)         <span class="comment"># 对齐方式及填充："1234...  1234...1234  ...001234"</span></span><br><span class="line">x = <span class="number">1.23456789</span></span><br><span class="line"><span class="string">"%e | %f | %g"</span> % (x, x, x)                                  <span class="comment"># 对齐方式："1.234568e+00 | 1.234568 | 1.23457"</span></span><br><span class="line"><span class="string">"%6.2f*%-6.2f*%06.2f*%+6.2f"</span> % (x, x, x, x)                 <span class="comment"># 对齐方式：'  1.23*1.23  *001.23* +1.23'</span></span><br><span class="line"><span class="string">"%(name1)d---%(name2)s"</span> % &#123;<span class="string">"name1"</span>:<span class="number">23</span>, <span class="string">"name2"</span>:<span class="string">"value2"</span>&#125;    <span class="comment"># 基于字典的格式化表达式</span></span><br><span class="line"><span class="string">"%(name)s is %(age)d"</span> % vars()                              <span class="comment"># vars()函数调用返回一个字典，包含了所有本函数调用时存在的变量</span></span><br></pre></td></tr></table></figure>
<h3 id="Python中的字符串格式化实现2–字符串格式化调用方法"><a href="#Python中的字符串格式化实现2–字符串格式化调用方法" class="headerlink" title="Python中的字符串格式化实现2–字符串格式化调用方法"></a>Python中的字符串格式化实现2–字符串格式化调用方法</h3><p>普通调用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"&#123;0&#125;, &#123;1&#125; and &#123;2&#125;"</span>.format(<span class="string">'spam'</span>, <span class="string">'ham'</span>, <span class="string">'eggs'</span>)            <span class="comment"># 基于位置的调用</span></span><br><span class="line"><span class="string">"&#123;motto&#125; and &#123;pork&#125;"</span>.format(motto = <span class="string">'spam'</span>, pork = <span class="string">'ham'</span>)   <span class="comment"># 基于Key的调用</span></span><br><span class="line"><span class="string">"&#123;motto&#125; and &#123;0&#125;"</span>.format(<span class="string">'ham'</span>, motto = <span class="string">'spam'</span>)             <span class="comment"># 混合调用</span></span><br></pre></td></tr></table></figure>
<p>添加键 属性 偏移量 (<code>import sys</code>)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"my &#123;1[spam]&#125; runs &#123;0.platform&#125;"</span>.format(sys, &#123;<span class="string">'spam'</span>:<span class="string">'laptop'</span>&#125;)                 <span class="comment"># 基于位置的键和属性</span></span><br><span class="line"><span class="string">"&#123;config[spam]&#125; &#123;sys.platform&#125;"</span>.format(sys = sys, config = &#123;<span class="string">'spam'</span>:<span class="string">'laptop'</span>&#125;)   <span class="comment"># 基于Key的键和属性</span></span><br><span class="line"><span class="string">"first = &#123;0[0]&#125;, second = &#123;0[1]&#125;"</span>.format([<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>])                       <span class="comment"># 基于位置的偏移量</span></span><br></pre></td></tr></table></figure>
<p>具体格式化</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"&#123;0:e&#125;, &#123;1:.3e&#125;, &#123;2:g&#125;"</span>.format(<span class="number">3.14159</span>, <span class="number">3.14159</span>, <span class="number">3.14159</span>)   <span class="comment"># 输出'3.141590e+00, 3.142e+00, 3.14159'</span></span><br><span class="line"><span class="string">"&#123;fieldname:format_spec&#125;"</span>.format(......)</span><br></pre></td></tr></table></figure>
<p>说明:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fieldname是指定参数的一个数字或关键字, 后边可跟可选的<span class="string">".name"</span>或<span class="string">"[index]"</span>成分引用</span><br><span class="line">format_spec ::=  [[fill]align][sign][<span class="comment">#][0][width][,][.precision][type]</span></span><br><span class="line">fill        ::=  &lt;any character&gt;              <span class="comment">#填充字符</span></span><br><span class="line">align       ::=  <span class="string">"&lt;"</span> | <span class="string">"&gt;"</span> | <span class="string">"="</span> | <span class="string">"^"</span>        <span class="comment">#对齐方式</span></span><br><span class="line">sign        ::=  <span class="string">"+"</span> | <span class="string">"-"</span> | <span class="string">" "</span>              <span class="comment">#符号说明</span></span><br><span class="line">width       ::=  integer                      <span class="comment">#字符串宽度</span></span><br><span class="line">precision   ::=  integer                      <span class="comment">#浮点数精度</span></span><br><span class="line">type        ::=  <span class="string">"b"</span> | <span class="string">"c"</span> | <span class="string">"d"</span> | <span class="string">"e"</span> | <span class="string">"E"</span> | <span class="string">"f"</span> | <span class="string">"F"</span> | <span class="string">"g"</span> | <span class="string">"G"</span> | <span class="string">"n"</span> | <span class="string">"o"</span> | <span class="string">"s"</span> | <span class="string">"x"</span> | <span class="string">"X"</span> | <span class="string">"%"</span></span><br></pre></td></tr></table></figure></p>
<p>例子:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'=&#123;0:10&#125; = &#123;1:10&#125;'</span>.format(<span class="string">'spam'</span>, <span class="number">123.456</span>)    <span class="comment"># 输出'=spam       =    123.456'</span></span><br><span class="line"><span class="string">'=&#123;0:&gt;10&#125;='</span>.format(<span class="string">'test'</span>)                    <span class="comment"># 输出'=      test='</span></span><br><span class="line"><span class="string">'=&#123;0:&lt;10&#125;='</span>.format(<span class="string">'test'</span>)                    <span class="comment"># 输出'=test      ='</span></span><br><span class="line"><span class="string">'=&#123;0:^10&#125;='</span>.format(<span class="string">'test'</span>)                    <span class="comment"># 输出'=   test   ='</span></span><br><span class="line"><span class="string">'&#123;0:X&#125;, &#123;1:o&#125;, &#123;2:b&#125;'</span>.format(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>)   <span class="comment"># 输出'FF, 377, 11111111'</span></span><br><span class="line"><span class="string">'My name is &#123;0:&#123;1&#125;&#125;.'</span>.format(<span class="string">'Fred'</span>, <span class="number">8</span>)       <span class="comment"># 输出'My name is Fred    .'  动态指定参数</span></span><br></pre></td></tr></table></figure>
<h3 id="常用列表常量和操作"><a href="#常用列表常量和操作" class="headerlink" title="常用列表常量和操作"></a>常用列表常量和操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">L = [[<span class="number">1</span>, <span class="number">2</span>], <span class="string">'string'</span>, &#123;&#125;]                        <span class="comment"># 嵌套列表</span></span><br><span class="line">L = list(<span class="string">'spam'</span>)                                  <span class="comment"># 列表初始化</span></span><br><span class="line">L = list(range(<span class="number">0</span>, <span class="number">4</span>))                             <span class="comment"># 列表初始化</span></span><br><span class="line">list(map(ord, <span class="string">'spam'</span>))                            <span class="comment"># 列表解析</span></span><br><span class="line">len(L)                                            <span class="comment"># 求列表长度</span></span><br><span class="line">L.count(value)                                    <span class="comment"># 求列表中某个值的个数</span></span><br><span class="line">L.append(obj)                                     <span class="comment"># 向列表的尾部添加数据，比如append(2)，添加元素2</span></span><br><span class="line">L.insert(index, obj)                              <span class="comment"># 向列表的指定index位置添加数据，index及其之后的数据后移</span></span><br><span class="line">L.extend(interable)                               <span class="comment"># 通过添加iterable中的元素来扩展列表，比如extend([2])，添加元素2，注意和append的区别</span></span><br><span class="line">L.index(value, [start, [stop]])                   <span class="comment"># 返回列表中值value的第一个索引</span></span><br><span class="line">L.pop([index])                                    <span class="comment"># 删除并返回index处的元素，默认为删除并返回最后一个元素</span></span><br><span class="line">L.remove(value)                                   <span class="comment"># 删除列表中的value值，只删除第一次出现的value的值</span></span><br><span class="line">L.reverse()                                       <span class="comment"># 反转列表</span></span><br><span class="line">L.sort(cmp=<span class="keyword">None</span>, key=<span class="keyword">None</span>, reverse=<span class="keyword">False</span>)         <span class="comment"># 排序列表</span></span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], b = a[<span class="number">10</span>:]                         <span class="comment"># 注意，这里不会引发IndexError异常，只会返回一个空的列表[]</span></span><br><span class="line">a = [], a += [<span class="number">1</span>]                                  <span class="comment"># 这里实在原有列表的基础上进行操作，即列表的id没有改变</span></span><br><span class="line">a = [], a = a + [<span class="number">1</span>]                               <span class="comment"># 这里最后的a要构建一个新的列表，即a的id发生了变化</span></span><br></pre></td></tr></table></figure>
<h3 id="用切片来删除序列的某一段"><a href="#用切片来删除序列的某一段" class="headerlink" title="用切片来删除序列的某一段"></a>用切片来删除序列的某一段</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line">a[<span class="number">1</span>:<span class="number">4</span>] = []                                       <span class="comment"># a = [1, 5, 6, 7]</span></span><br><span class="line">a = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line"><span class="keyword">del</span> a[::<span class="number">2</span>]                                        <span class="comment"># 去除偶数项(偶数索引的)，a = [1, 3, 5, 7]</span></span><br></pre></td></tr></table></figure>
<h3 id="常用字典常量和操作"><a href="#常用字典常量和操作" class="headerlink" title="常用字典常量和操作"></a>常用字典常量和操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">D = &#123;&#125;</span><br><span class="line">D = &#123;<span class="string">'spam'</span>:<span class="number">2</span>, <span class="string">'tol'</span>:&#123;<span class="string">'ham'</span>:<span class="number">1</span>&#125;&#125;                   <span class="comment"># 嵌套字典</span></span><br><span class="line">D = dict.fromkeys([<span class="string">'s'</span>, <span class="string">'d'</span>], <span class="number">8</span>)                  <span class="comment"># &#123;'s': 8, 'd': 8&#125;</span></span><br><span class="line">D = dict(name = <span class="string">'tom'</span>, age = <span class="number">12</span>)                  <span class="comment"># &#123;'age': 12, 'name': 'tom'&#125;</span></span><br><span class="line">D = dict([(<span class="string">'name'</span>, <span class="string">'tom'</span>), (<span class="string">'age'</span>, <span class="number">12</span>)])          <span class="comment"># &#123;'age': 12, 'name': 'tom'&#125;</span></span><br><span class="line">D = dict(zip([<span class="string">'name'</span>, <span class="string">'age'</span>], [<span class="string">'tom'</span>, <span class="number">12</span>]))       <span class="comment"># &#123;'age': 12, 'name': 'tom'&#125;</span></span><br><span class="line">D.keys(); D.values(); D.items()                   <span class="comment"># 字典键、值以及键值对</span></span><br><span class="line">D.get(key, default)                               <span class="comment"># get函数</span></span><br><span class="line">D.update(D_other)                                 <span class="comment"># 合并字典，如果存在相同的键值，D_other的数据会覆盖掉D的数据</span></span><br><span class="line">D.pop(key, [D])                                   <span class="comment"># 删除字典中键值为key的项，返回键值为key的值，如果不存在，返回默认值D，否则异常</span></span><br><span class="line">D.popitem()                                       <span class="comment"># pop字典中随机的一项（一个键值对）</span></span><br><span class="line">D.setdefault(k[, d])                              <span class="comment"># 设置D中某一项的默认值。如果k存在，则返回D[k]，否则设置D[k]=d，同时返回D[k]。</span></span><br><span class="line"><span class="keyword">del</span> D                                             <span class="comment"># 删除字典</span></span><br><span class="line"><span class="keyword">del</span> D[<span class="string">'key'</span>]                                      <span class="comment"># 删除字典的某一项</span></span><br><span class="line"><span class="keyword">if</span> key <span class="keyword">in</span> D:   <span class="keyword">if</span> key <span class="keyword">not</span> <span class="keyword">in</span> D:                   <span class="comment"># 测试字典键是否存在</span></span><br><span class="line"><span class="comment"># 字典注意事项：（1）对新索引赋值会添加一项（2）字典键不一定非得是字符串，也可以为任何的不可变对象</span></span><br><span class="line"><span class="comment"># 不可变对象：调用对象自身的任意方法，也不会改变该对象自身的内容，这些方法会创建新的对象并返回。</span></span><br><span class="line"><span class="comment"># 字符串、整数、tuple都是不可变对象，dict、set、list都是可变对象</span></span><br><span class="line">D[(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)] = <span class="number">2</span>                                    <span class="comment"># tuple作为字典的key</span></span><br></pre></td></tr></table></figure>
<h3 id="字典解析"><a href="#字典解析" class="headerlink" title="字典解析"></a>字典解析</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">D = &#123;k:<span class="number">8</span> <span class="keyword">for</span> k <span class="keyword">in</span> [<span class="string">'s'</span>, <span class="string">'d'</span>]&#125;                     <span class="comment"># &#123;'s': 8, 'd': 8&#125;</span></span><br><span class="line">D = &#123;k:v <span class="keyword">for</span> (k, v) <span class="keyword">in</span> zip([<span class="string">'name'</span>, <span class="string">'age'</span>], [<span class="string">'tom'</span>, <span class="number">12</span>])&#125;       <span class="comment"># &#123;'age': 12, 'name': tom&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="字典的特殊方法missing：当查找找不到key时，会执行该方法"><a href="#字典的特殊方法missing：当查找找不到key时，会执行该方法" class="headerlink" title="字典的特殊方法missing：当查找找不到key时，会执行该方法"></a>字典的特殊方法<strong>missing</strong>：当查找找不到key时，会执行该方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dict</span><span class="params">(dict)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__missing__</span><span class="params">(self, key)</span>:</span></span><br><span class="line">        self[key] = []</span><br><span class="line">        <span class="keyword">return</span> self[key]</span><br><span class="line">dct = Dict()</span><br><span class="line">dct[<span class="string">"foo"</span>].append(<span class="number">1</span>)    <span class="comment"># 这有点类似于collections.defalutdict</span></span><br><span class="line">dct[<span class="string">"foo"</span>]              <span class="comment"># [1]</span></span><br></pre></td></tr></table></figure>
<h3 id="元组和列表的唯一区别在于元组是不可变对象，列表时可变对象"><a href="#元组和列表的唯一区别在于元组是不可变对象，列表时可变对象" class="headerlink" title="元组和列表的唯一区别在于元组是不可变对象，列表时可变对象"></a>元组和列表的唯一区别在于元组是不可变对象，列表时可变对象</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]           <span class="comment"># a[1] = 0, OK</span></span><br><span class="line">a = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)           <span class="comment"># a[1] = 0, Error</span></span><br><span class="line">a = ([<span class="number">1</span>, <span class="number">2</span>])            <span class="comment"># a[0][1] = 0, OK</span></span><br><span class="line">a = [(<span class="number">1</span>, <span class="number">2</span>)]            <span class="comment"># a[0][1] = 0, Error</span></span><br></pre></td></tr></table></figure>
<h3 id="元组的特殊语法-逗号和圆括号"><a href="#元组的特殊语法-逗号和圆括号" class="headerlink" title="元组的特殊语法: 逗号和圆括号"></a>元组的特殊语法: 逗号和圆括号</h3><pre><code>D = (12)                # 此时D为一个整数 即D = 12
D = (12, )              # 此时D为一个元组 即D = (12, )
</code></pre><h3 id="文件基本操作"><a href="#文件基本操作" class="headerlink" title="文件基本操作"></a>文件基本操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">output = open(<span class="string">r'C:\spam'</span>, <span class="string">'w'</span>)          <span class="comment"># 打开输出文件，用于写</span></span><br><span class="line">input = open(<span class="string">'data'</span>, <span class="string">'r'</span>)               <span class="comment"># 打开输入文件，用于读。打开的方式可以为'w', 'r', 'a', 'wb', 'rb', 'ab'等</span></span><br><span class="line">fp.read([size])                         <span class="comment"># size为读取的长度，以byte为单位</span></span><br><span class="line">fp.readline([size])                     <span class="comment"># 读一行，如果定义了size，有可能返回的只是一行的一部分</span></span><br><span class="line">fp.readlines([size])                    <span class="comment"># 把文件每一行作为一个list的一个成员，并返回这个list。其实它的内部是通过循环调用readline()来实现的。如果提供size参数，size是表示读取内容的总长。</span></span><br><span class="line">fp.readable()                           <span class="comment"># 是否可读</span></span><br><span class="line">fp.write(str)                           <span class="comment"># 把str写到文件中，write()并不会在str后加上一个换行符</span></span><br><span class="line">fp.writelines(seq)                      <span class="comment"># 把seq的内容全部写到文件中(多行一次性写入)</span></span><br><span class="line">fp.writeable()                          <span class="comment"># 是否可写</span></span><br><span class="line">fp.close()                              <span class="comment"># 关闭文件。</span></span><br><span class="line">fp.flush()                              <span class="comment"># 把缓冲区的内容写入硬盘</span></span><br><span class="line">fp.fileno()                             <span class="comment"># 返回一个长整型的”文件标签“</span></span><br><span class="line">fp.isatty()                             <span class="comment"># 文件是否是一个终端设备文件（unix系统中的）</span></span><br><span class="line">fp.tell()                               <span class="comment"># 返回文件操作标记的当前位置，以文件的开头为原点</span></span><br><span class="line">fp.next()                               <span class="comment"># 返回下一行，并将文件操作标记位移到下一行。把一个file用于for … in file这样的语句时，就是调用next()函数来实现遍历的。</span></span><br><span class="line">fp.seek(offset[,whence])                <span class="comment"># 将文件打操作标记移到offset的位置。whence可以为0表示从头开始计算，1表示以当前位置为原点计算。2表示以文件末尾为原点进行计算。</span></span><br><span class="line">fp.seekable()                           <span class="comment"># 是否可以seek</span></span><br><span class="line">fp.truncate([size])                     <span class="comment"># 把文件裁成规定的大小，默认的是裁到当前文件操作标记的位置。</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> open(<span class="string">'data'</span>): </span><br><span class="line">    print(line)                         <span class="comment"># 使用for语句，比较适用于打开比较大的文件</span></span><br><span class="line">open(<span class="string">'f.txt'</span>, encoding = <span class="string">'latin-1'</span>)     <span class="comment"># Python3.x Unicode文本文件</span></span><br><span class="line">open(<span class="string">'f.bin'</span>, <span class="string">'rb'</span>)                     <span class="comment"># Python3.x 二进制bytes文件</span></span><br><span class="line"><span class="comment"># 文件对象还有相应的属性：buffer closed encoding errors line_buffering name newlines等</span></span><br></pre></td></tr></table></figure>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>Python中的真假值含义：1. 数字如果非零，则为真，0为假。 2. 其他对象如果非空，则为真<br>通常意义下的类型分类：1. 数字、序列、映射。 2. 可变类型和不可变类型</p>
<h2 id="二、语法和语句"><a href="#二、语法和语句" class="headerlink" title="二、语法和语句"></a>二、语法和语句</h2><h3 id="赋值语句的形式"><a href="#赋值语句的形式" class="headerlink" title="赋值语句的形式"></a>赋值语句的形式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">spam = <span class="string">'spam'</span>                          <span class="comment"># 基本形式</span></span><br><span class="line">spam, ham = <span class="string">'spam'</span>, <span class="string">'ham'</span>              <span class="comment"># 元组赋值形式</span></span><br><span class="line">[spam, ham] = [<span class="string">'s'</span>, <span class="string">'h'</span>]               <span class="comment"># 列表赋值形式</span></span><br><span class="line">a, b, c, d = <span class="string">'abcd'</span>                    <span class="comment"># 序列赋值形式</span></span><br><span class="line">a, *b, c = <span class="string">'spam'</span>                      <span class="comment"># 序列解包形式（Python3.x中才有）</span></span><br><span class="line">spam = ham = <span class="string">'no'</span>                      <span class="comment"># 多目标赋值运算，涉及到共享引用</span></span><br><span class="line">spam += <span class="number">42</span>                             <span class="comment"># 增强赋值，涉及到共享引用</span></span><br></pre></td></tr></table></figure>
<h3 id="序列赋值-序列解包"><a href="#序列赋值-序列解包" class="headerlink" title="序列赋值 序列解包"></a>序列赋值 序列解包</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[a, b, c] = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)                  <span class="comment"># a = 1, b = 2, c = 3</span></span><br><span class="line">a, b, c, d = <span class="string">"spam"</span>                    <span class="comment"># a = 's', b = 'p', c = 'a', d = 'm'</span></span><br><span class="line">a, b, c = range(<span class="number">3</span>)                     <span class="comment"># a = 0, b = 1, c = 2</span></span><br><span class="line">a, *b = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]                   <span class="comment"># a = 1, b = [2, 3, 4]</span></span><br><span class="line">*a, b = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]                   <span class="comment"># a = [1, 2, 3], b = 4</span></span><br><span class="line">a, *b, c = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]                <span class="comment"># a = 1, b = [2, 3], c = 4</span></span><br></pre></td></tr></table></figure>
<p>带有<code>*</code>时 会优先匹配<code>*</code>之外的变量，如<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a, *b, c = [<span class="number">1</span>, <span class="number">2</span>]                      <span class="comment"># a = 1, c = 2, b = []</span></span><br></pre></td></tr></table></figure></p>
<h3 id="print函数原型"><a href="#print函数原型" class="headerlink" title="print函数原型"></a>print函数原型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">print(value, ..., sep=<span class="string">' '</span>, end=<span class="string">'\n'</span>, file=sys.stdout, flush=<span class="keyword">False</span>)</span><br><span class="line"><span class="comment"># 流的重定向</span></span><br><span class="line">print(<span class="string">'hello world'</span>)                   <span class="comment"># 等于sys.stdout.write('hello world')</span></span><br><span class="line">temp = sys.stdout                      <span class="comment"># 原有流的保存</span></span><br><span class="line">sys.stdout = open(<span class="string">'log.log'</span>, <span class="string">'a'</span>)      <span class="comment"># 流的重定向</span></span><br><span class="line">print(<span class="string">'hello world'</span>)                   <span class="comment"># 写入到文件log.log</span></span><br><span class="line">sys.stdout.close()</span><br><span class="line">sys.stdout = temp                      <span class="comment"># 原有流的复原</span></span><br></pre></td></tr></table></figure>
<h3 id="and，or"><a href="#and，or" class="headerlink" title="and，or"></a>and，or</h3><p>Python中and或or总是返回对象(左边的对象或右边的对象) 且具有短路求值的特性</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="keyword">or</span> <span class="number">2</span> <span class="keyword">or</span> <span class="number">3</span>                            <span class="comment"># 返回 1</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">and</span> <span class="number">2</span> <span class="keyword">and</span> <span class="number">3</span>                          <span class="comment"># 返回 3</span></span><br></pre></td></tr></table></figure>
<h3 id="if-else三元表达符（if语句在行内）"><a href="#if-else三元表达符（if语句在行内）" class="headerlink" title="if/else三元表达符（if语句在行内）"></a>if/else三元表达符（if语句在行内）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A = <span class="number">1</span> <span class="keyword">if</span> X <span class="keyword">else</span> <span class="number">2</span></span><br><span class="line">A = <span class="number">1</span> <span class="keyword">if</span> X <span class="keyword">else</span> (<span class="number">2</span> <span class="keyword">if</span> Y <span class="keyword">else</span> <span class="number">3</span>)</span><br><span class="line"><span class="comment"># 也可以使用and-or语句（一条语句实现多个if-else）</span></span><br><span class="line">result = (a &gt; <span class="number">20</span> <span class="keyword">and</span> <span class="string">"big than 20"</span> <span class="keyword">or</span> a &gt; <span class="number">10</span> <span class="keyword">and</span> <span class="string">"big than 10"</span> <span class="keyword">or</span> a &gt; <span class="number">5</span> <span class="keyword">and</span> <span class="string">"big than 5"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="while，for"><a href="#while，for" class="headerlink" title="while，for"></a>while，for</h3><p>Python的while语句或者for语句可以带else语句 当然也可以带continue/break/pass语句</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> a &gt; <span class="number">1</span>:</span><br><span class="line">    anything</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    anything</span><br><span class="line"><span class="comment"># else语句会在循环结束后执行，除非在循环中执行了break，同样的还有for语句</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">    anything</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    anything</span><br></pre></td></tr></table></figure>
<h3 id="for循环的元组赋值"><a href="#for循环的元组赋值" class="headerlink" title="for循环的元组赋值"></a>for循环的元组赋值</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (a, b) <span class="keyword">in</span> [(<span class="number">1</span>, <span class="number">2</span>), (<span class="number">3</span>, <span class="number">4</span>)]:                   <span class="comment"># 最简单的赋值</span></span><br><span class="line"><span class="keyword">for</span> ((a, b), c) <span class="keyword">in</span> [((<span class="number">1</span>, <span class="number">2</span>), <span class="number">3</span>), ((<span class="number">4</span>, <span class="number">5</span>), <span class="number">6</span>)]:    <span class="comment"># 自动解包赋值</span></span><br><span class="line"><span class="keyword">for</span> ((a, b), c) <span class="keyword">in</span> [((<span class="number">1</span>, <span class="number">2</span>), <span class="number">3</span>), (<span class="string">"XY"</span>, <span class="number">6</span>)]:      <span class="comment"># 自动解包 a = X, b = Y, c = 6</span></span><br><span class="line"><span class="keyword">for</span> (a, *b) <span class="keyword">in</span> [(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), (<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)]:            <span class="comment"># 自动解包赋值</span></span><br></pre></td></tr></table></figure>
<h3 id="列表解析语法"><a href="#列表解析语法" class="headerlink" title="列表解析语法"></a>列表解析语法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">M = [[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>], [<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]]</span><br><span class="line">res = [sum(row) <span class="keyword">for</span> row <span class="keyword">in</span> M]                     <span class="comment"># G = [6, 15, 24] 一般的列表解析 生成一个列表</span></span><br><span class="line">res = [c * <span class="number">2</span> <span class="keyword">for</span> c <span class="keyword">in</span> <span class="string">'spam'</span>]                     <span class="comment"># ['ss', 'pp', 'aa', 'mm']</span></span><br><span class="line">res = [a * b <span class="keyword">for</span> a <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>] <span class="keyword">for</span> b <span class="keyword">in</span> [<span class="number">4</span>, <span class="number">5</span>]]     <span class="comment"># 多解析过程 返回[4, 5, 8, 10]</span></span><br><span class="line">res = [a <span class="keyword">for</span> a <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] <span class="keyword">if</span> a &lt; <span class="number">2</span>]             <span class="comment"># 带判断条件的解析过程</span></span><br><span class="line">res = [a <span class="keyword">if</span> a &gt; <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">for</span> a <span class="keyword">in</span> [<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>]]     <span class="comment"># 带判断条件的高级解析过程</span></span><br></pre></td></tr></table></figure>
<h4 id="两个列表同时解析：使用zip函数"><a href="#两个列表同时解析：使用zip函数" class="headerlink" title="两个列表同时解析：使用zip函数"></a>两个列表同时解析：使用zip函数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> teama, teamb <span class="keyword">in</span> zip([<span class="string">"Packers"</span>, <span class="string">"49ers"</span>], [<span class="string">"Ravens"</span>, <span class="string">"Patriots"</span>]):</span><br><span class="line">    print(teama + <span class="string">" vs. "</span> + teamb)</span><br></pre></td></tr></table></figure>
<p>输出：<br><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Packers <span class="built_in">vs</span>. Ravens</span><br><span class="line"><span class="number">49</span>ers <span class="built_in">vs</span>. Patriots</span><br></pre></td></tr></table></figure></p>
<h4 id="带索引的列表解析：使用enumerate函数"><a href="#带索引的列表解析：使用enumerate函数" class="headerlink" title="带索引的列表解析：使用enumerate函数"></a>带索引的列表解析：使用enumerate函数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> index, team <span class="keyword">in</span> enumerate([<span class="string">"Packers"</span>, <span class="string">"49ers"</span>, <span class="string">"Ravens"</span>, <span class="string">"Patriots"</span>]):</span><br><span class="line">    print(index, team)</span><br></pre></td></tr></table></figure>
<p>输出：</p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">0 </span>Packers</span><br><span class="line"><span class="symbol">1 </span><span class="number">49e</span>rs</span><br><span class="line"><span class="symbol">2 </span>Ravens</span><br><span class="line"><span class="symbol">3 </span>Patriots</span><br></pre></td></tr></table></figure>
<h3 id="生成器表达式"><a href="#生成器表达式" class="headerlink" title="生成器表达式"></a>生成器表达式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">G = (sum(row) <span class="keyword">for</span> row <span class="keyword">in</span> M)                       <span class="comment"># 使用小括号可以创建所需结果的生成器generator object</span></span><br><span class="line">next(G), next(G), next(G)                         <span class="comment"># 输出(6, 15, 24)</span></span><br><span class="line">G = &#123;sum(row) <span class="keyword">for</span> row <span class="keyword">in</span> M&#125;                       <span class="comment"># G = &#123;6, 15, 24&#125; 解析语法还可以生成集合和字典</span></span><br><span class="line">G = &#123;i:sum(M[i]) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>)&#125;               <span class="comment"># G = &#123;0: 6, 1: 15, 2: 24&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="文档字符串"><a href="#文档字符串" class="headerlink" title="文档字符串"></a>文档字符串</h3><p>出现在Module的开端以及其中函数或类的开端 使用三重引号字符串</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">module document</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    function document</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    print()</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    class document</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    print()</span><br><span class="line">print(func.__doc__)                <span class="comment"># 输出函数文档字符串</span></span><br><span class="line">print(Employee.__doc__)            <span class="comment"># 输出类的文档字符串</span></span><br></pre></td></tr></table></figure>
<h3 id="命名惯例"><a href="#命名惯例" class="headerlink" title="命名惯例"></a>命名惯例</h3><p>以单一下划线开头的变量名(<code>_X</code>)不会被<code>from module import*</code>等语句导入</p>
<p>前后有两个下划线的变量名(<code>__X__</code>)是系统定义的变量名，对解释器有特殊意义</p>
<p>以两个下划线开头但不以下划线结尾的变量名(<code>__X</code>)是类的本地(私有)变量</p>
<h3 id="列表解析-in成员关系测试-map-sorted-zip-enumerate内置函数等都使用了迭代协议"><a href="#列表解析-in成员关系测试-map-sorted-zip-enumerate内置函数等都使用了迭代协议" class="headerlink" title="列表解析 in成员关系测试 map sorted zip enumerate内置函数等都使用了迭代协议"></a>列表解析 in成员关系测试 map sorted zip enumerate内置函数等都使用了迭代协议</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'first line'</span> <span class="keyword">in</span> open(<span class="string">'test.txt'</span>)   <span class="comment"># in测试 返回True或False</span></span><br><span class="line">list(map(str.upper, open(<span class="string">'t'</span>)))    <span class="comment"># map内置函数</span></span><br><span class="line">sorted(iter([<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">1</span>]))      <span class="comment"># sorted内置函数</span></span><br><span class="line">list(zip([<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]))          <span class="comment"># zip内置函数 [(1, 3), (2, 4)]</span></span><br></pre></td></tr></table></figure>
<h3 id="del语句-手动删除某个变量"><a href="#del语句-手动删除某个变量" class="headerlink" title="del语句: 手动删除某个变量"></a>del语句: 手动删除某个变量</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">del</span> X</span><br></pre></td></tr></table></figure>
<h3 id="获取列表的子表的方法"><a href="#获取列表的子表的方法" class="headerlink" title="获取列表的子表的方法:"></a>获取列表的子表的方法:</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line">x[:<span class="number">3</span>]                              <span class="comment"># 前3个[1,2,3]</span></span><br><span class="line">x[<span class="number">1</span>:<span class="number">5</span>]                             <span class="comment"># 中间4个[2,3,4,5]</span></span><br><span class="line">x[<span class="number">-3</span>:]                             <span class="comment"># 最后3个[4,5,6]</span></span><br><span class="line">x[::<span class="number">2</span>]                             <span class="comment"># 奇数项[1,3,5]</span></span><br><span class="line">x[<span class="number">1</span>::<span class="number">2</span>]                            <span class="comment"># 偶数项[2,4,6]</span></span><br></pre></td></tr></table></figure>
<h3 id="手动迭代：iter和next"><a href="#手动迭代：iter和next" class="headerlink" title="手动迭代：iter和next"></a>手动迭代：iter和next</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">L = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">I = iter(L)                        <span class="comment"># I为L的迭代器</span></span><br><span class="line">I.next()                           <span class="comment"># 返回1</span></span><br><span class="line">I.next()                           <span class="comment"># 返回2</span></span><br><span class="line">I.next()                           <span class="comment"># Error:StopIteration</span></span><br></pre></td></tr></table></figure>
<h3 id="Python中的可迭代对象"><a href="#Python中的可迭代对象" class="headerlink" title="Python中的可迭代对象"></a>Python中的可迭代对象</h3><pre><code>&quot;&quot;&quot;
1.range迭代器
2.map、zip和filter迭代器
3.字典视图迭代器：D.keys()), D.items()等
4.文件类型
&quot;&quot;&quot;
</code></pre><h2 id="三、函数语法规则"><a href="#三、函数语法规则" class="headerlink" title="三、函数语法规则"></a>三、函数语法规则</h2><h3 id="函数相关的语句和表达式"><a href="#函数相关的语句和表达式" class="headerlink" title="函数相关的语句和表达式"></a>函数相关的语句和表达式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">myfunc(<span class="string">'spam'</span>)                     <span class="comment"># 函数调用</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">myfunc</span><span class="params">()</span>:</span>                      <span class="comment"># 函数定义</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">None</span>                        <span class="comment"># 函数返回值</span></span><br><span class="line"><span class="keyword">global</span> a                           <span class="comment"># 全局变量(在函数内部使用全局变量)</span></span><br><span class="line"><span class="keyword">nonlocal</span> x                         <span class="comment"># 在函数或其他作用域中使用外层（非全局）变量</span></span><br><span class="line"><span class="keyword">yield</span> x                            <span class="comment"># 生成器函数返回</span></span><br><span class="line"><span class="keyword">lambda</span>                             <span class="comment"># 匿名函数</span></span><br></pre></td></tr></table></figure>
<h3 id="Python函数变量名解析-LEGB原则"><a href="#Python函数变量名解析-LEGB原则" class="headerlink" title="Python函数变量名解析:LEGB原则"></a>Python函数变量名解析:LEGB原则</h3><p><code>local(functin) --&gt; encloseing function locals --&gt; global(module) --&gt; build-in(python)</code></p>
<p>说明:以下边的函数maker为例 则相对于action而言 X为Local N为Encloseing</p>
<h3 id="嵌套函数举例-工厂函数"><a href="#嵌套函数举例-工厂函数" class="headerlink" title="嵌套函数举例:工厂函数"></a>嵌套函数举例:工厂函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">maker</span><span class="params">(N)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">action</span><span class="params">(X)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> X ** N</span><br><span class="line">    <span class="keyword">return</span> action</span><br><span class="line">f = maker(<span class="number">2</span>)                       <span class="comment"># pass 2 to N</span></span><br><span class="line">f(<span class="number">3</span>)                               <span class="comment"># 9, pass 3 to X</span></span><br></pre></td></tr></table></figure>
<h3 id="嵌套函数举例-lambda实例"><a href="#嵌套函数举例-lambda实例" class="headerlink" title="嵌套函数举例:lambda实例"></a>嵌套函数举例:lambda实例</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">maker</span><span class="params">(N)</span>:</span></span><br><span class="line">    action = (<span class="keyword">lambda</span> X: X**N)</span><br><span class="line">    <span class="keyword">return</span> action</span><br><span class="line">f = maker(<span class="number">2</span>)                       <span class="comment"># pass 2 to N</span></span><br><span class="line">f(<span class="number">3</span>)                               <span class="comment"># 9, pass 3 to X</span></span><br></pre></td></tr></table></figure>
<h3 id="nonlocal和global语句的区别"><a href="#nonlocal和global语句的区别" class="headerlink" title="nonlocal和global语句的区别"></a>nonlocal和global语句的区别</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># nonlocal应用于一个嵌套的函数的作用域中的一个名称 例如:</span></span><br><span class="line">start = <span class="number">100</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tester</span><span class="params">(start)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">nested</span><span class="params">(label)</span>:</span></span><br><span class="line">        <span class="keyword">nonlocal</span> start             <span class="comment"># 指定start为tester函数内的local变量 而不是global变量start</span></span><br><span class="line">        print(label, start)</span><br><span class="line">        start += <span class="number">3</span></span><br><span class="line">    <span class="keyword">return</span> nested</span><br><span class="line"><span class="comment"># global为全局的变量 即def之外的变量</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tester</span><span class="params">(start)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">nested</span><span class="params">(label)</span>:</span></span><br><span class="line">        <span class="keyword">global</span> start               <span class="comment"># 指定start为global变量start</span></span><br><span class="line">        print(label, start)</span><br><span class="line">        start += <span class="number">3</span></span><br><span class="line">    <span class="keyword">return</span> nested</span><br></pre></td></tr></table></figure>
<h3 id="函数参数：不可变参数通过“值”传递，可变参数通过“引用”传递"><a href="#函数参数：不可变参数通过“值”传递，可变参数通过“引用”传递" class="headerlink" title="函数参数：不可变参数通过“值”传递，可变参数通过“引用”传递"></a>函数参数：不可变参数通过“值”传递，可变参数通过“引用”传递</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(a, b, c)</span>:</span> print(a, b, c)</span><br><span class="line">f(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)                         <span class="comment"># 参数位置匹配</span></span><br><span class="line">f(<span class="number">1</span>, c = <span class="number">3</span>, b = <span class="number">2</span>)                 <span class="comment"># 参数关键字匹配</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(a, b=<span class="number">1</span>, c=<span class="number">2</span>)</span>:</span> print(a, b, c)</span><br><span class="line">f(<span class="number">1</span>)                               <span class="comment"># 默认参数匹配</span></span><br><span class="line">f(<span class="number">1</span>, <span class="number">2</span>)                            <span class="comment"># 默认参数匹配</span></span><br><span class="line">f(a = <span class="number">1</span>, c = <span class="number">3</span>)                    <span class="comment"># 关键字参数和默认参数的混合</span></span><br></pre></td></tr></table></figure>
<p>Keyword-Only参数:出现在<code>*args</code>之后 必须用关键字进行匹配</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">keyOnly</span><span class="params">(a, *b, c)</span>:</span> print(<span class="string">''</span>)   <span class="comment"># c就为keyword-only匹配 必须使用关键字c = value匹配</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">keyOnly</span><span class="params">(a, *, b, c)</span>:</span> ......    <span class="comment"># b c为keyword-only匹配 必须使用关键字匹配</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">keyOnly</span><span class="params">(a, *, b = <span class="number">1</span>)</span>:</span> ......   <span class="comment"># b有默认值 或者省略 或者使用关键字参数b = value</span></span><br></pre></td></tr></table></figure>
<h3 id="可变参数匹配-和"><a href="#可变参数匹配-和" class="headerlink" title="可变参数匹配: * 和 **"></a>可变参数匹配: * 和 **</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(*args)</span>:</span> print(args)          <span class="comment"># 在元组中收集不匹配的位置参数</span></span><br><span class="line">f(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)                         <span class="comment"># 输出(1, 2, 3)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(**args)</span>:</span> print(args)         <span class="comment"># 在字典中收集不匹配的关键字参数</span></span><br><span class="line">f(a = <span class="number">1</span>, b = <span class="number">2</span>)                    <span class="comment"># 输出&#123;'a':1, 'b':2&#125;</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(a, *b, **c)</span>:</span> print(a, b, c)  <span class="comment"># 两者混合使用</span></span><br><span class="line">f(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, x=<span class="number">4</span>, y=<span class="number">5</span>)               <span class="comment"># 输出1, (2, 3), &#123;'x':4, 'y':5&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="函数调用时的参数解包-和-分别解包元组和字典"><a href="#函数调用时的参数解包-和-分别解包元组和字典" class="headerlink" title="函数调用时的参数解包: * 和 ** 分别解包元组和字典"></a>函数调用时的参数解包: * 和 ** 分别解包元组和字典</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">func(1, *(2, 3))  &lt;==&gt;  func(1, 2, 3)</span><br><span class="line">func(1, **&#123;'c':3, 'b':2&#125;)  &lt;==&gt;  func(1, b = 2, c = 3)</span><br><span class="line">func(1, *(2, 3), **&#123;'c':3, 'b':2&#125;)  &lt;==&gt;  func(1, 2, 3, b = 2, c = 3)</span><br></pre></td></tr></table></figure>
<h3 id="函数属性-自己定义的-函数可以添加属性"><a href="#函数属性-自己定义的-函数可以添加属性" class="headerlink" title="函数属性:(自己定义的)函数可以添加属性"></a>函数属性:(自己定义的)函数可以添加属性</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">()</span>:</span>.....</span><br><span class="line">func.count = <span class="number">1</span>                     <span class="comment"># 自定义函数添加属性</span></span><br><span class="line"><span class="keyword">print</span>.count = <span class="number">1</span>                    <span class="comment"># Error 内置函数不可以添加属性</span></span><br></pre></td></tr></table></figure>
<h3 id="函数注解-编写在def头部行-主要用于说明参数范围、参数类型、返回值类型等"><a href="#函数注解-编写在def头部行-主要用于说明参数范围、参数类型、返回值类型等" class="headerlink" title="函数注解: 编写在def头部行 主要用于说明参数范围、参数类型、返回值类型等"></a>函数注解: 编写在def头部行 主要用于说明参数范围、参数类型、返回值类型等</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(a:<span class="string">'spam'</span>, b:<span class="params">(<span class="number">1</span>, <span class="number">10</span>)</span>, c:float)</span> -&gt; int :</span></span><br><span class="line">    print(a, b, c)</span><br><span class="line">func.__annotations__               <span class="comment"># &#123;'c':&lt;class 'float'&gt;, 'b':(1, 10), 'a':'spam', 'return':&lt;class 'int'&gt;&#125;</span></span><br><span class="line"><span class="comment"># 编写注解的同时 还是可以使用函数默认值 并且注解的位置位于=号的前边</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(a:<span class="string">'spam'</span>=<span class="string">'a'</span>, b:<span class="params">(<span class="number">1</span>, <span class="number">10</span>)</span>=<span class="number">2</span>, c:float=<span class="number">3</span>)</span> -&gt; int :</span></span><br><span class="line">    print(a, b, c)</span><br></pre></td></tr></table></figure>
<h3 id="匿名函数-lambda"><a href="#匿名函数-lambda" class="headerlink" title="匿名函数:lambda"></a>匿名函数:lambda</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="keyword">lambda</span> x, y, z : x + y + z     <span class="comment"># 普通匿名函数，使用方法f(1, 2, 3)</span></span><br><span class="line">f = <span class="keyword">lambda</span> x = <span class="number">1</span>, y = <span class="number">1</span>: x + y     <span class="comment"># 带默认参数的lambda函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">action</span><span class="params">(x)</span>:</span>                     <span class="comment"># 嵌套lambda函数</span></span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">lambda</span> y : x + y)</span><br><span class="line">f = <span class="keyword">lambda</span>: a <span class="keyword">if</span> xxx() <span class="keyword">else</span> b      <span class="comment"># 无参数的lambda函数，使用方法f()</span></span><br></pre></td></tr></table></figure>
<h3 id="lambda函数与map-filter-reduce函数的结合"><a href="#lambda函数与map-filter-reduce函数的结合" class="headerlink" title="lambda函数与map filter reduce函数的结合"></a>lambda函数与map filter reduce函数的结合</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">list(map((<span class="keyword">lambda</span> x: x + <span class="number">1</span>), [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]))              <span class="comment"># [2, 3, 4]</span></span><br><span class="line">list(filter((<span class="keyword">lambda</span> x: x &gt; <span class="number">0</span>), range(<span class="number">-4</span>, <span class="number">5</span>)))        <span class="comment"># [1, 2, 3, 4]</span></span><br><span class="line">functools.reduce((<span class="keyword">lambda</span> x, y: x + y), [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])    <span class="comment"># 6</span></span><br><span class="line">functools.reduce((<span class="keyword">lambda</span> x, y: x * y), [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])    <span class="comment"># 24</span></span><br></pre></td></tr></table></figure>
<h3 id="生成器函数-yield-VS-return"><a href="#生成器函数-yield-VS-return" class="headerlink" title="生成器函数:yield VS return"></a>生成器函数:yield VS return</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gensquare</span><span class="params">(N)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">        <span class="keyword">yield</span> i** <span class="number">2</span>                <span class="comment"># 状态挂起 可以恢复到此时的状态</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> gensquare(<span class="number">5</span>):             <span class="comment"># 使用方法</span></span><br><span class="line">    print(i, end = <span class="string">' '</span>)            <span class="comment"># [0, 1, 4, 9, 16]</span></span><br><span class="line">x = gensquare(<span class="number">2</span>)                   <span class="comment"># x是一个生成对象</span></span><br><span class="line">next(x)                            <span class="comment"># 等同于x.__next__() 返回0</span></span><br><span class="line">next(x)                            <span class="comment"># 等同于x.__next__() 返回1</span></span><br><span class="line">next(x)                            <span class="comment"># 等同于x.__next__() 抛出异常StopIteration</span></span><br></pre></td></tr></table></figure>
<h3 id="生成器表达式-小括号进行列表解析"><a href="#生成器表达式-小括号进行列表解析" class="headerlink" title="生成器表达式:小括号进行列表解析"></a>生成器表达式:小括号进行列表解析</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">G = (x ** <span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">3</span>))     <span class="comment"># 使用小括号可以创建所需结果的生成器generator object</span></span><br><span class="line">next(G), next(G), next(G)          <span class="comment"># 和上述中的生成器函数的返回值一致</span></span><br><span class="line"><span class="comment">#（1）生成器(生成器函数/生成器表达式)是单个迭代对象</span></span><br><span class="line">G = (x ** <span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">4</span>))</span><br><span class="line">I1 = iter(G)                       <span class="comment"># 这里实际上iter(G) = G</span></span><br><span class="line">next(I1)                           <span class="comment"># 输出0</span></span><br><span class="line">next(G)                            <span class="comment"># 输出1</span></span><br><span class="line">next(I1)                           <span class="comment"># 输出4</span></span><br><span class="line"><span class="comment">#（2）生成器不保留迭代后的结果</span></span><br><span class="line">gen = (i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>))</span><br><span class="line"><span class="number">2</span> <span class="keyword">in</span> gen                           <span class="comment"># 返回True</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">in</span> gen                           <span class="comment"># 返回True</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">in</span> gen                           <span class="comment"># 返回False，其实检测2的时候，1已经就不在生成器中了，即1已经被迭代过了，同理2、3也不在了</span></span><br></pre></td></tr></table></figure>
<h3 id="本地变量是静态检测的"><a href="#本地变量是静态检测的" class="headerlink" title="本地变量是静态检测的"></a>本地变量是静态检测的</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">X = <span class="number">22</span>                             <span class="comment"># 全局变量X的声明和定义</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    print(X)                       <span class="comment"># 如果没有下一语句 则该句合法 打印全局变量X</span></span><br><span class="line">    X = <span class="number">88</span>                         <span class="comment"># 这一语句使得上一语句非法 因为它使得X变成了本地变量 上一句变成了打印一个未定义的本地变量(局部变量)</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">False</span>:                      <span class="comment"># 即使这样的语句 也会把print语句视为非法语句 因为:</span></span><br><span class="line">        X = <span class="number">88</span>                     <span class="comment"># Python会无视if语句而仍然声明了局部变量X</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span>                        <span class="comment"># 改进</span></span><br><span class="line">    <span class="keyword">global</span> X                       <span class="comment"># 声明变量X为全局变量</span></span><br><span class="line">    print(X)                       <span class="comment"># 打印全局变量X</span></span><br><span class="line">    X = <span class="number">88</span>                         <span class="comment"># 改变全局变量X</span></span><br></pre></td></tr></table></figure>
<h3 id="函数的默认值是在函数定义的时候实例化的-而不是在调用的时候-例子"><a href="#函数的默认值是在函数定义的时候实例化的-而不是在调用的时候-例子" class="headerlink" title="函数的默认值是在函数定义的时候实例化的 而不是在调用的时候 例子:"></a>函数的默认值是在函数定义的时候实例化的 而不是在调用的时候 例子:</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(numbers=[])</span>:</span>               <span class="comment"># 这里的[]是可变的</span></span><br><span class="line">    numbers.append(<span class="number">9</span>)    </span><br><span class="line">    print(numbers)</span><br><span class="line">foo()                              <span class="comment"># first time, like before, [9]</span></span><br><span class="line">foo()                              <span class="comment"># second time, not like before, [9, 9]</span></span><br><span class="line">foo()                              <span class="comment"># third time, not like before too, [9, 9, 9]</span></span><br><span class="line"><span class="comment"># 改进:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(numbers=None)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> numbers <span class="keyword">is</span> <span class="keyword">None</span>: numbers = []</span><br><span class="line">    numbers.append(<span class="number">9</span>)</span><br><span class="line">    print(numbers)</span><br><span class="line"><span class="comment"># 另外一个例子 参数的默认值为不可变的:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(count=<span class="number">0</span>)</span>:</span>                  <span class="comment"># 这里的0是数字, 是不可变的</span></span><br><span class="line">    count += <span class="number">1</span></span><br><span class="line">    print(count)</span><br><span class="line">foo()                              <span class="comment"># 输出1</span></span><br><span class="line">foo()                              <span class="comment"># 还是输出1</span></span><br><span class="line">foo(<span class="number">3</span>)                             <span class="comment"># 输出4</span></span><br><span class="line">foo()                              <span class="comment"># 还是输出1</span></span><br></pre></td></tr></table></figure>
<h2 id="四、函数例子"><a href="#四、函数例子" class="headerlink" title="四、函数例子"></a>四、函数例子</h2><h3 id="数学运算类"><a href="#数学运算类" class="headerlink" title="数学运算类"></a>数学运算类</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">abs(x)                              <span class="comment"># 求绝对值，参数可以是整型，也可以是复数，若参数是复数，则返回复数的模</span></span><br><span class="line">complex([real[, imag]])             <span class="comment"># 创建一个复数</span></span><br><span class="line">divmod(a, b)                        <span class="comment"># 分别取商和余数，注意：整型、浮点型都可以</span></span><br><span class="line">float([x])                          <span class="comment"># 将一个字符串或数转换为浮点数。如果无参数将返回0.0</span></span><br><span class="line">int([x[, base]])                    <span class="comment"># 将一个字符串或浮点数转换为int类型，base表示进制</span></span><br><span class="line">long([x[, base]])                   <span class="comment"># 将一个字符串或浮点数转换为long类型</span></span><br><span class="line">pow(x, y)                           <span class="comment"># 返回x的y次幂</span></span><br><span class="line">range([start], stop[, step])        <span class="comment"># 产生一个序列，默认从0开始</span></span><br><span class="line">round(x[, n])                       <span class="comment"># 四舍五入</span></span><br><span class="line">sum(iterable[, start])              <span class="comment"># 对集合求和</span></span><br><span class="line">oct(x)                              <span class="comment"># 将一个数字转化为8进制字符串</span></span><br><span class="line">hex(x)                              <span class="comment"># 将一个数字转换为16进制字符串</span></span><br><span class="line">chr(i)                              <span class="comment"># 返回给定int类型对应的ASCII字符</span></span><br><span class="line">unichr(i)                           <span class="comment"># 返回给定int类型的unicode</span></span><br><span class="line">ord(c)                              <span class="comment"># 返回ASCII字符对应的整数</span></span><br><span class="line">bin(x)                              <span class="comment"># 将整数x转换为二进制字符串</span></span><br><span class="line">bool([x])                           <span class="comment"># 将x转换为Boolean类型</span></span><br></pre></td></tr></table></figure>
<h3 id="集合类操作"><a href="#集合类操作" class="headerlink" title="集合类操作"></a>集合类操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">basestring()                        <span class="comment"># str和unicode的超类，不能直接调用，可以用作isinstance判断</span></span><br><span class="line">format(value [, format_spec])       <span class="comment"># 格式化输出字符串，格式化的参数顺序从0开始，如“I am &#123;0&#125;,I like &#123;1&#125;”</span></span><br><span class="line">enumerate(sequence[, start=<span class="number">0</span>])      <span class="comment"># 返回一个可枚举的对象，注意它有第二个参数</span></span><br><span class="line">iter(obj[, sentinel])               <span class="comment"># 生成一个对象的迭代器，第二个参数表示分隔符</span></span><br><span class="line">max(iterable[, args...][key])       <span class="comment"># 返回集合中的最大值</span></span><br><span class="line">min(iterable[, args...][key])       <span class="comment"># 返回集合中的最小值</span></span><br><span class="line">dict([arg])                         <span class="comment"># 创建数据字典</span></span><br><span class="line">list([iterable])                    <span class="comment"># 将一个集合类转换为另外一个集合类</span></span><br><span class="line">set()                               <span class="comment"># set对象实例化</span></span><br><span class="line">frozenset([iterable])               <span class="comment"># 产生一个不可变的set</span></span><br><span class="line">tuple([iterable])                   <span class="comment"># 生成一个tuple类型</span></span><br><span class="line">str([object])                       <span class="comment"># 转换为string类型</span></span><br><span class="line">sorted(iterable[, cmp[, key[, reverse]]])             <span class="comment"># 集合排序</span></span><br><span class="line">    L = [(<span class="string">'b'</span>,<span class="number">2</span>),(<span class="string">'a'</span>,<span class="number">1</span>),(<span class="string">'c'</span>,<span class="number">3</span>),(<span class="string">'d'</span>,<span class="number">4</span>)]</span><br><span class="line">    sorted(L, key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>]), reverse=<span class="keyword">True</span>)      <span class="comment"># 使用Key参数和reverse参数</span></span><br><span class="line">    sorted(L, key=<span class="keyword">lambda</span> x: (x[<span class="number">0</span>], x[<span class="number">1</span>]))             <span class="comment"># 使用key参数进行多条件排序，即如果x[0]相同，则比较x[1]</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""逻辑判断"""</span></span><br><span class="line">all(iterable)                       <span class="comment"># 集合中的元素都为真的时候为真，特别的，若为空串返回为True</span></span><br><span class="line">any(iterable)                       <span class="comment"># 集合中的元素有一个为真的时候为真，特别的，若为空串返回为False</span></span><br><span class="line">cmp(x, y)                           <span class="comment"># 如果x &lt; y ,返回负数；x == y, 返回0；x &gt; y,返回正数</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""IO操作"""</span></span><br><span class="line">file(filename [, mode [, bufsize]]) <span class="comment"># file类型的构造函数。</span></span><br><span class="line">input([prompt])                     <span class="comment"># 获取用户输入，推荐使用raw_input，因为该函数将不会捕获用户的错误输入</span></span><br><span class="line">raw_input([prompt])                 <span class="comment"># 设置输入，输入都是作为字符串处理</span></span><br><span class="line">open(name[, mode[, buffering]])     <span class="comment"># 打开文件，与file有什么不同？推荐使用open</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""其他"""</span></span><br><span class="line">callable(object)                    <span class="comment"># 检查对象object是否可调用</span></span><br><span class="line">classmethod(func)                   <span class="comment"># 用来说明这个func是个类方法</span></span><br><span class="line">staticmethod(func)                  <span class="comment"># 用来说明这个func为静态方法</span></span><br><span class="line">dir([object])                       <span class="comment"># 不带参数时，返回当前范围内的变量、方法和定义的类型列表；带参数时，返回参数的属性、方法列表。</span></span><br><span class="line">help(obj)                           <span class="comment"># 返回obj的帮助信息</span></span><br><span class="line">eval(expression)                    <span class="comment"># 计算表达式expression的值，并返回</span></span><br><span class="line">exec(str)                           <span class="comment"># 将str作为Python语句执行</span></span><br><span class="line">execfile(filename)                  <span class="comment"># 用法类似exec()，不同的是execfile的参数filename为文件名，而exec的参数为字符串。</span></span><br><span class="line">filter(function, iterable)          <span class="comment"># 构造一个序列，等价于[item for item in iterable if function(item)]，function返回值为True或False的函数</span></span><br><span class="line">    list(filter(bool, range(<span class="number">-3</span>, <span class="number">4</span>)))<span class="comment"># 返回[-3, -2, -1, 1, 2, 3], 没有0</span></span><br><span class="line">hasattr(object, name)               <span class="comment"># 判断对象object是否包含名为name的特性</span></span><br><span class="line">getattr(object, name [, defalut])   <span class="comment"># 获取一个类的属性</span></span><br><span class="line">setattr(object, name, value)        <span class="comment"># 设置属性值</span></span><br><span class="line">delattr(object, name)               <span class="comment"># 删除object对象名为name的属性</span></span><br><span class="line">globals()                           <span class="comment"># 返回一个描述当前全局符号表的字典</span></span><br><span class="line">hash(object)                        <span class="comment"># 如果对象object为哈希表类型，返回对象object的哈希值</span></span><br><span class="line">id(object)                          <span class="comment"># 返回对象的唯一标识，一串数字</span></span><br><span class="line">isinstance(object, classinfo)       <span class="comment"># 判断object是否是class的实例</span></span><br><span class="line">    isinstance(<span class="number">1</span>, int)              <span class="comment"># 判断是不是int类型</span></span><br><span class="line">    isinstance(<span class="number">1</span>, (int, float))     <span class="comment"># isinstance的第二个参数接受一个元组类型</span></span><br><span class="line">issubclass(class, classinfo)        # 判断class是否为classinfo的子类</span><br><span class="line">locals()                            <span class="comment"># 返回当前的变量列表</span></span><br><span class="line">map(function, iterable, ...)        <span class="comment"># 遍历每个元素，执行function操作</span></span><br><span class="line">    list(map(abs, range(<span class="number">-3</span>, <span class="number">4</span>)))    <span class="comment"># 返回[3, 2, 1, 0, 1, 2, 3]</span></span><br><span class="line">next(iterator[, default])           <span class="comment"># 类似于iterator.next()</span></span><br><span class="line">property([fget[, fset[, fdel[, doc]]]])           <span class="comment"># 属性访问的包装类，设置后可以通过c.x=value等来访问setter和getter</span></span><br><span class="line">reduce(function, iterable[, initializer])         <span class="comment"># 合并操作，从第一个开始是前两个参数，然后是前两个的结果与第三个合并进行处理，以此类推</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x,y)</span>:</span><span class="keyword">return</span> x + y </span><br><span class="line">    reduce(add, range(<span class="number">1</span>, <span class="number">11</span>))                     <span class="comment"># 返回55 (注:1+2+3+4+5+6+7+8+9+10 = 55)</span></span><br><span class="line">    reduce(add, range(<span class="number">1</span>, <span class="number">11</span>), <span class="number">20</span>)                 <span class="comment"># 返回75</span></span><br><span class="line">reload(module)                      <span class="comment"># 重新加载模块</span></span><br><span class="line">repr(object)                        <span class="comment"># 将一个对象变幻为可打印的格式</span></span><br><span class="line">slice(start, stop[, step])          <span class="comment"># 产生分片对象</span></span><br><span class="line">type(object)                        <span class="comment"># 返回该object的类型</span></span><br><span class="line">vars([object])                      <span class="comment"># 返回对象的变量名、变量值得字典</span></span><br><span class="line">    a = Class();                    <span class="comment"># Class为一个空类</span></span><br><span class="line">    a.name = <span class="string">'qi'</span>, a.age = <span class="number">9</span></span><br><span class="line">    vars(a)                         <span class="comment"># &#123;'name':'qi', 'age':9&#125;</span></span><br><span class="line">zip([iterable, ...])                <span class="comment"># 返回对应数组</span></span><br><span class="line">    list(zip([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])) <span class="comment"># [(1, 4), (2, 5), (3, 6)]</span></span><br><span class="line">    a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],  b = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>]</span><br><span class="line">    z = zip(a, b)                   <span class="comment"># 压缩：[(1, "a"), (2, "b"), (3, "c")]</span></span><br><span class="line">    zip(*z)                         <span class="comment"># 解压缩：[(1, 2, 3), ("a", "b", "c")]</span></span><br><span class="line">unicode(string, encoding, errors)   <span class="comment"># 将字符串string转化为unicode形式，string为encoded string。</span></span><br></pre></td></tr></table></figure>
<p>​    </p>
<h2 id="五、模块Moudle"><a href="#五、模块Moudle" class="headerlink" title="五、模块Moudle"></a>五、模块Moudle</h2><h3 id="Python模块搜索路径"><a href="#Python模块搜索路径" class="headerlink" title="Python模块搜索路径:"></a>Python模块搜索路径:</h3><p>(1)程序的主目录 </p>
<p>(2)PYTHONPATH目录 </p>
<p>(3)标准链接库目录 </p>
<p>(4)任何.pth文件的内容</p>
<h3 id="查看全部的模块搜索路径"><a href="#查看全部的模块搜索路径" class="headerlink" title="查看全部的模块搜索路径"></a>查看全部的模块搜索路径</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path</span><br><span class="line">sys.argv                            <span class="comment"># 获得脚本的参数</span></span><br><span class="line">sys.builtin_module_names            <span class="comment"># 查找内建模块</span></span><br><span class="line">sys.platform                        <span class="comment"># 返回当前平台 出现如： "win32" "linux" "darwin"等</span></span><br><span class="line">sys.modules                         <span class="comment"># 查找已导入的模块</span></span><br><span class="line">sys.modules.keys()</span><br><span class="line">sys.stdout                          <span class="comment"># stdout 和 stderr 都是类文件对象，但是它们都是只写的。它们都没有 read 方法，只有 write 方法</span></span><br><span class="line">sys.stdout.write(<span class="string">"hello"</span>)</span><br><span class="line">sys.stderr</span><br><span class="line">sys.stdin</span><br></pre></td></tr></table></figure>
<h3 id="模块的使用代码"><a href="#模块的使用代码" class="headerlink" title="模块的使用代码"></a>模块的使用代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> module1, module2             <span class="comment"># 导入module1 使用module1.printer()</span></span><br><span class="line"><span class="keyword">from</span> module1 <span class="keyword">import</span> printer         <span class="comment"># 导入module1中的printer变量 使用printer()</span></span><br><span class="line"><span class="keyword">from</span> module1 <span class="keyword">import</span> *               <span class="comment"># 导入module1中的全部变量 使用不必添加module1前缀</span></span><br></pre></td></tr></table></figure>
<h3 id="重载模块reload"><a href="#重载模块reload" class="headerlink" title="重载模块reload"></a>重载模块reload</h3><p>这是一个内置函数 而不是一条语句</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> imp <span class="keyword">import</span> reload</span><br><span class="line">reload(module)</span><br></pre></td></tr></table></figure>
<h3 id="模块的包导入"><a href="#模块的包导入" class="headerlink" title="模块的包导入"></a>模块的包导入</h3><p>使用点号(.)而不是路径(dir1\dir2)进行导入</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> dir1.dir2.mod                <span class="comment"># d导入包(目录)dir1中的包dir2中的mod模块 此时dir1必须在Python可搜索路径中</span></span><br><span class="line"><span class="keyword">from</span> dir1.dir2.mod <span class="keyword">import</span> *         <span class="comment"># from语法的包导入</span></span><br></pre></td></tr></table></figure>
<h3 id="init-py包文件"><a href="#init-py包文件" class="headerlink" title="init.py包文件"></a><strong>init</strong>.py包文件</h3><p>每个导入的包中都应该包含这么一个init__.py文件</p>
<ul>
<li><p>该文件可以为空</p>
</li>
<li><p>首次进行包导入时， 该文件会自动执行</p>
</li>
<li><p>高级功能:在该文件中使用<code>__all__</code>列表来定义包(目录)以<code>from*</code>的形式导入时 需要导入什么</p>
</li>
</ul>
<h3 id="包相对导入-使用点号-只能使用from语句"><a href="#包相对导入-使用点号-只能使用from语句" class="headerlink" title="包相对导入:使用点号(.) 只能使用from语句"></a>包相对导入:使用点号(.) 只能使用from语句</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> spam                  <span class="comment"># 导入当前目录下的spam模块（错误: 当前目录下的模块, 直接导入即可）</span></span><br><span class="line"><span class="keyword">from</span> .spam <span class="keyword">import</span> name              <span class="comment"># 导入当前目录下的spam模块的name属性（错误: 当前目录下的模块, 直接导入即可，不用加.）</span></span><br><span class="line"><span class="keyword">from</span> .. <span class="keyword">import</span> spam                 <span class="comment"># 导入当前目录的父目录下的spam模块</span></span><br></pre></td></tr></table></figure>
<h3 id="包相对导入与普通导入的区别"><a href="#包相对导入与普通导入的区别" class="headerlink" title="包相对导入与普通导入的区别"></a>包相对导入与普通导入的区别</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> string <span class="keyword">import</span> *                <span class="comment"># 这里导入的string模块为sys.path路径上的 而不是本目录下的string模块(如果存在也不是)</span></span><br><span class="line"><span class="keyword">from</span> .string <span class="keyword">import</span> *               <span class="comment"># 这里导入的string模块为本目录下的(不存在则导入失败) 而不是sys.path路径上的</span></span><br></pre></td></tr></table></figure>
<h3 id="模块数据隐藏-最小化from-的破坏"><a href="#模块数据隐藏-最小化from-的破坏" class="headerlink" title="模块数据隐藏:最小化from*的破坏"></a>模块数据隐藏:最小化from*的破坏</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_X                                  <span class="comment"># 变量名前加下划线可以防止from*导入时该变量名被复制出去</span></span><br><span class="line">__all__ = [<span class="string">'x'</span>, <span class="string">'x1'</span>, <span class="string">'x2'</span>]         <span class="comment"># 使用__all__列表指定from*时复制出去的变量名(变量名在列表中为字符串形式)</span></span><br></pre></td></tr></table></figure>
<h3 id="模块属性"><a href="#模块属性" class="headerlink" title="模块属性"></a>模块属性</h3><p>可以使用<code>__name__</code>进行模块的单元测试：当模块为顶层执行文件时值为<code>__main__</code>，当模块被导入时为模块名。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">doSomething</span><br></pre></td></tr></table></figure>
<p>模块属性中还有其他属性，例如：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">__doc__                             <span class="comment"># 模块的说明文档</span></span><br><span class="line">__file__                            <span class="comment"># 模块文件的文件名，包括全路径</span></span><br><span class="line">__name__                            <span class="comment"># 主文件或者被导入文件</span></span><br><span class="line">__package__                         <span class="comment"># 模块所在的包</span></span><br></pre></td></tr></table></figure></p>
<h3 id="import语句from语句的as扩展"><a href="#import语句from语句的as扩展" class="headerlink" title="import语句from语句的as扩展"></a>import语句from语句的as扩展</h3><pre><code>import modulename as name
from modulename import attrname as name
</code></pre><h3 id="得到模块属性的几种方法"><a href="#得到模块属性的几种方法" class="headerlink" title="得到模块属性的几种方法"></a>得到模块属性的几种方法</h3><p>假设为了得到<code>__name__</code>属性的值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">M.__name__</span><br><span class="line">M.__dict__[<span class="string">'__name__'</span>]</span><br><span class="line">sys.modules[<span class="string">'M'</span>].__name__</span><br><span class="line">getattr(M, <span class="string">'__name__'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="六、类与面向对象"><a href="#六、类与面向对象" class="headerlink" title="六、类与面向对象"></a>六、类与面向对象</h2><h3 id="最普通的类"><a href="#最普通的类" class="headerlink" title="最普通的类"></a>最普通的类</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C1</span><span class="params">(C2, C3)</span>:</span></span><br><span class="line">    spam = <span class="number">42</span>                       <span class="comment"># 数据属性</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span>       <span class="comment"># 函数属性:构造函数</span></span><br><span class="line">        self.name = name</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span>              <span class="comment"># 函数属性:析构函数</span></span><br><span class="line">        print(<span class="string">"goodbey "</span>, self.name)    </span><br><span class="line">I1 = C1(<span class="string">'bob'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="Python的类没有基于参数的函数重载"><a href="#Python的类没有基于参数的函数重载" class="headerlink" title="Python的类没有基于参数的函数重载"></a>Python的类没有基于参数的函数重载</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FirstClass</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self, string)</span>:</span></span><br><span class="line">        print(string)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span>                 <span class="comment"># 此时类中只有一个test函数 即后者test(self) 它覆盖掉前者带参数的test函数</span></span><br><span class="line">        print(<span class="string">"hello world"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="子类扩展超类-尽量调用超类的方法"><a href="#子类扩展超类-尽量调用超类的方法" class="headerlink" title="子类扩展超类: 尽量调用超类的方法"></a>子类扩展超类: 尽量调用超类的方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Manager</span><span class="params">(Person)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">giveRaise</span><span class="params">(self, percent, bonus = <span class="number">.10</span>)</span>:</span></span><br><span class="line">        self.pay = int(self.pay*(<span class="number">1</span> + percent + bonus))     <span class="comment"># 不好的方式 复制粘贴超类代码</span></span><br><span class="line">        Person.giveRaise(self, percent + bonus)            <span class="comment"># 好的方式 尽量调用超类方法</span></span><br></pre></td></tr></table></figure>
<h3 id="类内省工具"><a href="#类内省工具" class="headerlink" title="类内省工具"></a>类内省工具</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bob = Person(<span class="string">'bob'</span>)</span><br><span class="line">bob.__class__                       <span class="comment"># &lt;class 'Person'&gt;</span></span><br><span class="line">bob.__class__.__name__              <span class="comment"># 'Person'</span></span><br><span class="line">bob.__dict__                        <span class="comment"># &#123;'pay':0, 'name':'bob', 'job':'Manager'&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="返回1中-数据属性spam是属于类-而不是对象"><a href="#返回1中-数据属性spam是属于类-而不是对象" class="headerlink" title="返回1中 数据属性spam是属于类 而不是对象"></a>返回1中 数据属性spam是属于类 而不是对象</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">I1 = C1(<span class="string">'bob'</span>); I2 = C2(<span class="string">'tom'</span>)      <span class="comment"># 此时I1和I2的spam都为42 但是都是返回的C1的spam属性</span></span><br><span class="line">C1.spam = <span class="number">24</span>                        <span class="comment"># 此时I1和I2的spam都为24</span></span><br><span class="line">I1.spam = <span class="number">3</span>                         <span class="comment"># 此时I1新增自有属性spam 值为2 I2和C1的spam还都为24</span></span><br></pre></td></tr></table></figure>
<h3 id="类方法调用的两种方式"><a href="#类方法调用的两种方式" class="headerlink" title="类方法调用的两种方式"></a>类方法调用的两种方式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">instance.method(arg...)</span><br><span class="line"><span class="class"><span class="keyword">class</span>.<span class="title">method</span><span class="params">(instance, arg...)</span></span></span><br></pre></td></tr></table></figure>
<h3 id="抽象超类的实现方法"><a href="#抽象超类的实现方法" class="headerlink" title="抽象超类的实现方法"></a>抽象超类的实现方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (1)某个函数中调用未定义的函数 子类中定义该函数</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delegate</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.action()               <span class="comment"># 本类中不定义action函数 所以使用delegate函数时就会出错</span></span><br><span class="line"><span class="comment"># (2)定义action函数 但是返回异常</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">action</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">raise</span> NotImplementedError(<span class="string">"action must be defined"</span>)</span><br><span class="line"><span class="comment"># (3)上述的两种方法还都可以定义实例对象 实际上可以利用@装饰器语法生成不能定义的抽象超类</span></span><br><span class="line">    <span class="keyword">from</span> abc <span class="keyword">import</span> ABCMeta, abstractmethod</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Super</span><span class="params">(metaclass = ABCMeta)</span>:</span></span><br><span class="line"><span class="meta">        @abstractmethod</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">action</span><span class="params">(self)</span>:</span> <span class="keyword">pass</span></span><br><span class="line">    x = Super()                     <span class="comment"># 返回 TypeError: Can't instantiate abstract class Super with abstract methods action</span></span><br></pre></td></tr></table></figure>
<h3 id="OOP和继承-“is-a”的关系"><a href="#OOP和继承-“is-a”的关系" class="headerlink" title="OOP和继承: “is-a”的关系"></a>OOP和继承: “is-a”的关系</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(B)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">a = A()</span><br><span class="line">isinstance(a, B)                    <span class="comment"># 返回True, A是B的子类 a也是B的一种</span></span><br><span class="line"><span class="comment"># OOP和组合: "has-a"的关系</span></span><br><span class="line"><span class="keyword">pass</span></span><br><span class="line"><span class="comment"># OOP和委托: "包装"对象 在Python中委托通常是以"__getattr__"钩子方法实现的, 这个方法会拦截对不存在属性的读取</span></span><br><span class="line"><span class="comment"># 包装类(或者称为代理类)可以使用__getattr__把任意读取转发给被包装的对象</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">wrapper</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, object)</span>:</span></span><br><span class="line">        self.wrapped = object</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr</span><span class="params">(self, attrname)</span>:</span></span><br><span class="line">        print(<span class="string">'Trace: '</span>, attrname)</span><br><span class="line">        <span class="keyword">return</span> getattr(self.wrapped, attrname)</span><br><span class="line"><span class="comment"># 注:这里使用getattr(X, N)内置函数以变量名字符串N从包装对象X中取出属性 类似于X.__dict__[N]</span></span><br><span class="line">x = wrapper([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">x.append(<span class="number">4</span>)                         <span class="comment"># 返回 "Trace: append" [1, 2, 3, 4]</span></span><br><span class="line">x = wrapper(&#123;<span class="string">'a'</span>:<span class="number">1</span>, <span class="string">'b'</span>:<span class="number">2</span>&#125;)</span><br><span class="line">list(x.keys())                      <span class="comment"># 返回 "Trace: keys" ['a', 'b']</span></span><br></pre></td></tr></table></figure>
<h3 id="类的伪私有属性-使用-attr"><a href="#类的伪私有属性-使用-attr" class="headerlink" title="类的伪私有属性:使用__attr"></a>类的伪私有属性:使用__attr</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C1</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.__name = name          <span class="comment"># 此时类的__name属性为伪私有属性 原理 它会自动变成self._C1__name = name</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'self.name = %s'</span> % self.__name</span><br><span class="line">I = C1(<span class="string">'tom'</span>)</span><br><span class="line">print(I)                            <span class="comment"># 返回 self.name = tom</span></span><br><span class="line">I.__name = <span class="string">'jeey'</span>                   <span class="comment"># 这里无法访问 __name为伪私有属性</span></span><br><span class="line">I._C1__name = <span class="string">'jeey'</span>                <span class="comment"># 这里可以修改成功 self.name = jeey</span></span><br></pre></td></tr></table></figure>
<h3 id="类方法是对象-无绑定类方法对象-绑定实例方法对象"><a href="#类方法是对象-无绑定类方法对象-绑定实例方法对象" class="headerlink" title="类方法是对象:无绑定类方法对象 / 绑定实例方法对象"></a>类方法是对象:无绑定类方法对象 / 绑定实例方法对象</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Spam</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">doit</span><span class="params">(self, message)</span>:</span></span><br><span class="line">        print(message)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">selfless</span><span class="params">(message)</span></span></span><br><span class="line"><span class="function">        <span class="title">print</span><span class="params">(message)</span></span></span><br><span class="line">obj = Spam()</span><br><span class="line">x = obj.doit                        <span class="comment"># 类的绑定方法对象 实例 + 函数</span></span><br><span class="line">x(<span class="string">'hello world'</span>)</span><br><span class="line">x = Spam.doit                       <span class="comment"># 类的无绑定方法对象 类名 + 函数</span></span><br><span class="line">x(obj, <span class="string">'hello world'</span>)</span><br><span class="line">x = Spam.selfless                   <span class="comment"># 类的无绑定方法是函数 在3.0之前无效</span></span><br><span class="line">x(<span class="string">'hello world'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="获取对象信息-属性和方法"><a href="#获取对象信息-属性和方法" class="headerlink" title="获取对象信息: 属性和方法"></a>获取对象信息: 属性和方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a = MyObject()</span><br><span class="line">dir(a)                              <span class="comment"># 使用dir函数</span></span><br><span class="line">hasattr(a, <span class="string">'x'</span>)                     <span class="comment"># 测试是否有x属性或方法 即a.x是否已经存在</span></span><br><span class="line">setattr(a, <span class="string">'y'</span>, <span class="number">19</span>)                 <span class="comment"># 设置属性或方法 等同于a.y = 19</span></span><br><span class="line">getattr(a, <span class="string">'z'</span>, <span class="number">0</span>)                  <span class="comment"># 获取属性或方法 如果属性不存在 则返回默认值0</span></span><br><span class="line"><span class="comment">#这里有个小技巧，setattr可以设置一个不能访问到的属性，即只能用getattr获取</span></span><br><span class="line">setattr(a, <span class="string">"can't touch"</span>, <span class="number">100</span>)      <span class="comment"># 这里的属性名带有空格，不能直接访问</span></span><br><span class="line">getattr(a, <span class="string">"can't touch"</span>, <span class="number">0</span>)        <span class="comment"># 但是可以用getattr获取</span></span><br></pre></td></tr></table></figure>
<h3 id="为类动态绑定属性或方法-MethodType方法"><a href="#为类动态绑定属性或方法-MethodType方法" class="headerlink" title="为类动态绑定属性或方法: MethodType方法"></a>为类动态绑定属性或方法: MethodType方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 一般创建了一个class的实例后, 可以给该实例绑定任何属性和方法, 这就是动态语言的灵活性</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">s = Student()</span><br><span class="line">s.name = <span class="string">'Michael'</span>                  <span class="comment"># 动态给实例绑定一个属性</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_age</span><span class="params">(self, age)</span>:</span>             <span class="comment"># 定义一个函数作为实例方法</span></span><br><span class="line">    self.age = age</span><br><span class="line"><span class="keyword">from</span> types <span class="keyword">import</span> MethodType</span><br><span class="line">s.set_age = MethodType(set_age, s)  <span class="comment"># 给实例绑定一个方法 类的其他实例不受此影响</span></span><br><span class="line">s.set_age(<span class="number">25</span>)                       <span class="comment"># 调用实例方法</span></span><br><span class="line">Student.set_age = MethodType(set_age, Student)    <span class="comment"># 为类绑定一个方法 类的所有实例都拥有该方法</span></span><br></pre></td></tr></table></figure>
<p>​    </p>
<h2 id="七、类的高级话题"><a href="#七、类的高级话题" class="headerlink" title="七、类的高级话题"></a>七、类的高级话题</h2><h3 id="多重继承"><a href="#多重继承" class="headerlink" title="多重继承"></a>多重继承</h3><p>“混合类”, 搜索方式”从下到上 从左到右 广度优先”</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(B, C)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h3 id="类的继承和子类的初始化"><a href="#类的继承和子类的初始化" class="headerlink" title="类的继承和子类的初始化"></a>类的继承和子类的初始化</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.子类定义了__init__方法时，若未显示调用基类__init__方法，python不会帮你调用。</span></span><br><span class="line"><span class="comment"># 2.子类未定义__init__方法时，python会自动帮你调用首个基类的__init__方法，注意是首个。</span></span><br><span class="line"><span class="comment"># 3.子类显示调用基类的初始化函数：</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FooParent</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, a)</span>:</span></span><br><span class="line">        self.parent = <span class="string">'I\'m the Parent.'</span></span><br><span class="line">        print(<span class="string">'Parent:a='</span> + str(a))</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(self, message)</span>:</span></span><br><span class="line">        print(message + <span class="string">' from Parent'</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FooChild</span><span class="params">(FooParent)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, a)</span>:</span></span><br><span class="line">        FooParent.__init__(self, a)</span><br><span class="line">        print(<span class="string">'Child:a='</span> + str(a))</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(self, message)</span>:</span></span><br><span class="line">        FooParent.bar(self, message)</span><br><span class="line">        print(message + <span class="string">' from Child'</span>)</span><br><span class="line">fooChild = FooChild(<span class="number">10</span>)</span><br><span class="line">fooChild.bar(<span class="string">'HelloWorld'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="实例方法-静态方法-类方法"><a href="#实例方法-静态方法-类方法" class="headerlink" title="实例方法 / 静态方法 / 类方法"></a>实例方法 / 静态方法 / 类方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Methods</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">imeth</span><span class="params">(self, x)</span>:</span> print(self, x)      <span class="comment"># 实例方法：传入的是实例和数据，操作的是实例的属性</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">smeth</span><span class="params">(x)</span>:</span> print(x)                  <span class="comment"># 静态方法：只传入数据 不传入实例，操作的是类的属性而不是实例的属性</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">cmeth</span><span class="params">(cls, x)</span>:</span> print(cls, x)        <span class="comment"># 类方法：传入的是类对象和数据</span></span><br><span class="line">    smeth = staticmethod(smeth)             <span class="comment"># 调用内置函数，也可以使用@staticmethod</span></span><br><span class="line">    cmeth = classmethod(cmeth)              <span class="comment"># 调用内置函数，也可以使用@classmethod</span></span><br><span class="line">obj = Methods()</span><br><span class="line">obj.imeth(<span class="number">1</span>)                                <span class="comment"># 实例方法调用 &lt;__main__.Methods object...&gt; 1</span></span><br><span class="line">Methods.imeth(obj, <span class="number">2</span>)                       <span class="comment"># &lt;__main__.Methods object...&gt; 2</span></span><br><span class="line">Methods.smeth(<span class="number">3</span>)                            <span class="comment"># 静态方法调用 3</span></span><br><span class="line">obj.smeth(<span class="number">4</span>)                                <span class="comment"># 这里可以使用实例进行调用</span></span><br><span class="line">Methods.cmeth(<span class="number">5</span>)                            <span class="comment"># 类方法调用 &lt;class '__main__.Methods'&gt; 5</span></span><br><span class="line">obj.cmeth(<span class="number">6</span>)                                <span class="comment"># &lt;class '__main__.Methods'&gt; 6</span></span><br></pre></td></tr></table></figure>
<h3 id="函数装饰器-是它后边的函数的运行时的声明，由-符号以及后边紧跟的”元函数”-metafunction-组成"><a href="#函数装饰器-是它后边的函数的运行时的声明，由-符号以及后边紧跟的”元函数”-metafunction-组成" class="headerlink" title="函数装饰器:是它后边的函数的运行时的声明，由@符号以及后边紧跟的”元函数”(metafunction)组成"></a>函数装饰器:是它后边的函数的运行时的声明，由@符号以及后边紧跟的”元函数”(metafunction)组成</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@staticmethod</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">smeth</span><span class="params">(x)</span>:</span> print(x)</span><br><span class="line"><span class="comment"># 等同于:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">smeth</span><span class="params">(x)</span>:</span> print(x)</span><br><span class="line">smeth = staticmethod(smeth)</span><br><span class="line"><span class="comment"># 同理</span></span><br><span class="line"><span class="meta">@classmethod</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cmeth</span><span class="params">(cls, x)</span>:</span> print(x)</span><br><span class="line"><span class="comment"># 等同于</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cmeth</span><span class="params">(cls, x)</span>:</span> print(x)</span><br><span class="line">cmeth = classmethod(cmeth)</span><br></pre></td></tr></table></figure>
<h3 id="类修饰器-是它后边的类的运行时的声明，由-符号以及后边紧跟的”元函数”-metafunction-组成"><a href="#类修饰器-是它后边的类的运行时的声明，由-符号以及后边紧跟的”元函数”-metafunction-组成" class="headerlink" title="类修饰器:是它后边的类的运行时的声明，由@符号以及后边紧跟的”元函数”(metafunction)组成"></a>类修饰器:是它后边的类的运行时的声明，由@符号以及后边紧跟的”元函数”(metafunction)组成</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decorator</span><span class="params">(aClass)</span>:</span>.....</span><br><span class="line"><span class="meta">@decorator</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span>....</span><br><span class="line"><span class="comment"># 等同于:</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span>....</span><br><span class="line">C = decorator(C)</span><br></pre></td></tr></table></figure>
<h3 id="限制class属性-slots属性"><a href="#限制class属性-slots属性" class="headerlink" title="限制class属性: slots属性"></a>限制class属性: <strong>slots</strong>属性</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line">    __slots__ = (<span class="string">'name'</span>, <span class="string">'age'</span>)             <span class="comment"># 限制Student及其实例只能拥有name和age属性</span></span><br><span class="line"><span class="comment"># __slots__属性只对当前类起作用, 对其子类不起作用</span></span><br><span class="line"><span class="comment"># __slots__属性能够节省内存</span></span><br><span class="line"><span class="comment"># __slots__属性可以为列表list，或者元组tuple</span></span><br></pre></td></tr></table></figure>
<h3 id="类属性高级话题-property"><a href="#类属性高级话题-property" class="headerlink" title="类属性高级话题: @property"></a>类属性高级话题: @property</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 假设定义了一个类:C，该类必须继承自object类，有一私有变量_x</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.__x = <span class="keyword">None</span></span><br><span class="line"><span class="comment"># 第一种使用属性的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getx</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.__x</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setx</span><span class="params">(self, value)</span>:</span></span><br><span class="line">        self.__x = value</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">delx</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">del</span> self.__x</span><br><span class="line">    x = property(getx, setx, delx, <span class="string">''</span>)</span><br><span class="line"><span class="comment"># property函数原型为property(fget=None,fset=None,fdel=None,doc=None)</span></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line">c = C()</span><br><span class="line">c.x = <span class="number">100</span>                         <span class="comment"># 自动调用setx方法</span></span><br><span class="line">y = c.x                           <span class="comment"># 自动调用getx方法</span></span><br><span class="line"><span class="keyword">del</span> c.x                           <span class="comment"># 自动调用delx方法</span></span><br><span class="line"><span class="comment"># 第二种方法使用属性的方法</span></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">x</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.__x</span><br><span class="line"><span class="meta">    @x.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">x</span><span class="params">(self, value)</span>:</span></span><br><span class="line">       self.__x = value</span><br><span class="line"><span class="meta">    @x.deleter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">x</span><span class="params">(self)</span>:</span></span><br><span class="line">       <span class="keyword">del</span> self.__x</span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line">c = C()</span><br><span class="line">c.x = <span class="number">100</span>                         <span class="comment"># 自动调用setter方法</span></span><br><span class="line">y = c.x                           <span class="comment"># 自动调用x方法</span></span><br><span class="line"><span class="keyword">del</span> c.x                           <span class="comment"># 自动调用deleter方法</span></span><br></pre></td></tr></table></figure>
<h3 id="定制类-重写类的方法"><a href="#定制类-重写类的方法" class="headerlink" title="定制类: 重写类的方法"></a>定制类: 重写类的方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># (1)__str__方法、__repr__方法: 定制类的输出字符串</span></span><br><span class="line"><span class="comment"># (2)__iter__方法、next方法: 定制类的可迭代性</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fib</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.a, self.b = <span class="number">0</span>, <span class="number">1</span>     <span class="comment"># 初始化两个计数器a，b</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self               <span class="comment"># 实例本身就是迭代对象，故返回自己</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">next</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.a, self.b = self.b, self.a + self.b</span><br><span class="line">        <span class="keyword">if</span> self.a &gt; <span class="number">100000</span>:       <span class="comment"># 退出循环的条件</span></span><br><span class="line">            <span class="keyword">raise</span> StopIteration()</span><br><span class="line">        <span class="keyword">return</span> self.a             <span class="comment"># 返回下一个值</span></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> Fib():</span><br><span class="line">    print(n)                      <span class="comment"># 使用</span></span><br><span class="line"><span class="comment"># (3)__getitem__方法、__setitem__方法: 定制类的下标操作[] 或者切片操作slice</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Indexer</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.data = &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, n)</span>:</span>             <span class="comment"># 定义getitem方法</span></span><br><span class="line">        print(<span class="string">'getitem:'</span>, n)                </span><br><span class="line">        <span class="keyword">return</span> self.data[n]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self, key, value)</span>:</span>    <span class="comment"># 定义setitem方法</span></span><br><span class="line">        print(<span class="string">'setitem:key = &#123;0&#125;, value = &#123;1&#125;'</span>.format(key, value))</span><br><span class="line">        self.data[key] = value</span><br><span class="line">test = Indexer()</span><br><span class="line">test[<span class="number">0</span>] = <span class="number">1</span>;   test[<span class="number">3</span>] = <span class="string">'3'</span>              <span class="comment"># 调用setitem方法</span></span><br><span class="line">print(test[<span class="number">0</span>])                            <span class="comment"># 调用getitem方法</span></span><br><span class="line"><span class="comment"># (4)__getattr__方法: 定制类的属性操作</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self, attr)</span>:</span>          <span class="comment"># 定义当获取类的属性时的返回值</span></span><br><span class="line">        <span class="keyword">if</span> attr==<span class="string">'age'</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">25</span>                     <span class="comment"># 当获取age属性时返回25</span></span><br><span class="line">    <span class="keyword">raise</span> AttributeError(<span class="string">'object has no attribute: %s'</span> % attr)</span><br><span class="line">    <span class="comment"># 注意: 只有当属性不存在时 才会调用该方法 且该方法默认返回None 需要在函数最后引发异常</span></span><br><span class="line">s = Student()</span><br><span class="line">s.age                                     <span class="comment"># s中age属性不存在 故调用__getattr__方法 返回25</span></span><br><span class="line"><span class="comment"># (5)__call__方法: 定制类的'可调用'性</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self)</span>:</span>                   <span class="comment"># 也可以带参数</span></span><br><span class="line">        print(<span class="string">'Calling......'</span>)</span><br><span class="line">s = Student()</span><br><span class="line">s()                                       <span class="comment"># s变成了可调用的 也可以带参数</span></span><br><span class="line">callable(s)                               <span class="comment"># 测试s的可调用性 返回True</span></span><br><span class="line"><span class="comment">#    (6)__len__方法：求类的长度</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> len(self.data)</span><br></pre></td></tr></table></figure>
<h3 id="动态创建类type"><a href="#动态创建类type" class="headerlink" title="动态创建类type()"></a>动态创建类type()</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 一般创建类 需要在代码中提前定义</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Hello</span><span class="params">(object)</span>:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">(self, name=<span class="string">'world'</span>)</span>:</span></span><br><span class="line">            print(<span class="string">'Hello, %s.'</span> % name)</span><br><span class="line">    h = Hello()</span><br><span class="line">    h.hello()                             <span class="comment"># Hello, world</span></span><br><span class="line">    type(Hello)                           <span class="comment"># Hello是一个type类型 返回&lt;class 'type'&gt;</span></span><br><span class="line">    type(h)                               <span class="comment"># h是一个Hello类型 返回&lt;class 'Hello'&gt;</span></span><br><span class="line"><span class="comment"># 动态类型语言中 类可以动态创建 type函数可用于创建新类型</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fn</span><span class="params">(self, name=<span class="string">'world'</span>)</span>:</span>           <span class="comment"># 先定义函数</span></span><br><span class="line">        print(<span class="string">'Hello, %s.'</span> % name)</span><br><span class="line">    Hello = type(<span class="string">'Hello'</span>, (object,), dict(hello=fn)) </span><br><span class="line">    <span class="comment"># 创建Hello类 type原型: type(name, bases, dict)</span></span><br><span class="line">    h = Hello()                           <span class="comment"># 此时的h和上边的h一致</span></span><br></pre></td></tr></table></figure>
<h2 id="八、异常相关"><a href="#八、异常相关" class="headerlink" title="八、异常相关"></a>八、异常相关</h2><h3 id="捕获异常"><a href="#捕获异常" class="headerlink" title="捕获异常:"></a>捕获异常:</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">except</span>:                               <span class="comment"># 捕获所有的异常 等同于except Exception:</span></span><br><span class="line">    <span class="keyword">except</span> name:                          <span class="comment"># 捕获指定的异常</span></span><br><span class="line">    <span class="keyword">except</span> name, value:                   <span class="comment"># 捕获指定的异常和额外的数据(实例)</span></span><br><span class="line">    <span class="keyword">except</span> (name1, name2):</span><br><span class="line">    <span class="keyword">except</span> (name1, name2), value:</span><br><span class="line">    <span class="keyword">except</span> name4 <span class="keyword">as</span> X:</span><br><span class="line">    <span class="keyword">else</span>:                                 <span class="comment"># 如果没有发生异常</span></span><br><span class="line">    <span class="keyword">finally</span>:                              <span class="comment"># 总会执行的部分</span></span><br><span class="line"><span class="comment"># 引发异常: raise子句(raise IndexError)</span></span><br><span class="line">    <span class="keyword">raise</span> &lt;instance&gt;                      <span class="comment"># raise instance of a class, raise IndexError()</span></span><br><span class="line">    raise &lt;class&gt;                         # make and raise instance of a class, raise IndexError</span><br><span class="line">    <span class="keyword">raise</span>                                 <span class="comment"># reraise the most recent exception</span></span><br></pre></td></tr></table></figure>
<h3 id="Python3-x中的异常链"><a href="#Python3-x中的异常链" class="headerlink" title="Python3.x中的异常链"></a>Python3.x中的异常链</h3><p><code>raise exception from otherException</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> X:</span><br><span class="line">    <span class="keyword">raise</span> IndexError(<span class="string">'Bad'</span>) <span class="keyword">from</span> X</span><br></pre></td></tr></table></figure>
<h3 id="assert子句-assert-lt-test-gt-lt-data-gt"><a href="#assert子句-assert-lt-test-gt-lt-data-gt" class="headerlink" title="assert子句: assert &lt;test&gt;, &lt;data&gt;"></a>assert子句: <code>assert &lt;test&gt;, &lt;data&gt;</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">assert</span> x &lt; <span class="number">0</span>, <span class="string">'x must be negative'</span></span><br></pre></td></tr></table></figure>
<h3 id="with-as环境管理器-作为常见的try-finally用法模式的替代方案"><a href="#with-as环境管理器-作为常见的try-finally用法模式的替代方案" class="headerlink" title="with/as环境管理器:作为常见的try/finally用法模式的替代方案"></a>with/as环境管理器:作为常见的try/finally用法模式的替代方案</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> expression [<span class="keyword">as</span> variable], expression [<span class="keyword">as</span> variable]:</span><br><span class="line"><span class="comment"># 例子:</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'test.txt'</span>) <span class="keyword">as</span> myfile:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> myfile: print(line)</span><br><span class="line"><span class="comment"># 等同于:</span></span><br><span class="line">    myfile = open(<span class="string">'test.txt'</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> myfile: print(line)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        myfile.close()</span><br></pre></td></tr></table></figure>
<h3 id="用户自定义异常-class-Bad-Exception-…"><a href="#用户自定义异常-class-Bad-Exception-…" class="headerlink" title="用户自定义异常: class Bad(Exception):….."></a>用户自定义异常: class Bad(Exception):…..</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">Exception超类 / except基类即可捕获到其所有子类</span></span><br><span class="line"><span class="string">Exception超类有默认的打印消息和状态 当然也可以定制打印显示:</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyBad</span><span class="params">(Exception)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'定制的打印消息'</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    MyBad()</span><br><span class="line"><span class="keyword">except</span> MyBad <span class="keyword">as</span> x:</span><br><span class="line">    print(x)</span><br></pre></td></tr></table></figure>
<h3 id="用户定制异常数据"><a href="#用户定制异常数据" class="headerlink" title="用户定制异常数据"></a>用户定制异常数据</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormatError</span><span class="params">(Exception)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, line ,file)</span>:</span></span><br><span class="line">        self.line = line</span><br><span class="line">        self.file = file</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">raise</span> FormatError(<span class="number">42</span>, <span class="string">'test.py'</span>)</span><br><span class="line"><span class="keyword">except</span> FormatError <span class="keyword">as</span> X:</span><br><span class="line">    print(<span class="string">'Error at '</span>, X.file, X.line)</span><br><span class="line"><span class="comment"># 用户定制异常行为(方法):以记录日志为例</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormatError</span><span class="params">(Exception)</span>:</span></span><br><span class="line">    logfile = <span class="string">'formaterror.txt'</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, line ,file)</span>:</span></span><br><span class="line">        self.line = line</span><br><span class="line">        self.file = file</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">logger</span><span class="params">(self)</span>:</span></span><br><span class="line">        open(self.logfile, <span class="string">'a'</span>).write(<span class="string">'Error at '</span>, self.file, self.line)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">raise</span> FormatError(<span class="number">42</span>, <span class="string">'test.py'</span>)</span><br><span class="line"><span class="keyword">except</span> FormatError <span class="keyword">as</span> X:</span><br><span class="line">    X.logger()</span><br></pre></td></tr></table></figure>
<h3 id="关于sys-exc-info-允许一个异常处理器获取对最近引发的异常的访问"><a href="#关于sys-exc-info-允许一个异常处理器获取对最近引发的异常的访问" class="headerlink" title="关于sys.exc_info:允许一个异常处理器获取对最近引发的异常的访问"></a>关于sys.exc_info:允许一个异常处理器获取对最近引发的异常的访问</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    ......</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="comment"># 此时sys.exc_info()返回一个元组(type, value, traceback)</span></span><br><span class="line">    <span class="comment"># type:正在处理的异常的异常类型</span></span><br><span class="line">    <span class="comment"># value:引发的异常的实例</span></span><br><span class="line">    <span class="comment"># traceback:堆栈信息</span></span><br></pre></td></tr></table></figure>
<h3 id="异常层次"><a href="#异常层次" class="headerlink" title="异常层次"></a>异常层次</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">BaseException</span><br><span class="line">+-- SystemExit</span><br><span class="line">+-- KeyboardInterrupt</span><br><span class="line">+-- GeneratorExit</span><br><span class="line">+-- Exception</span><br><span class="line">    +-- StopIteration</span><br><span class="line">    +-- ArithmeticError</span><br><span class="line">    +-- AssertionError</span><br><span class="line">    +-- AttributeError</span><br><span class="line">    +-- BufferError</span><br><span class="line">    +-- EOFError</span><br><span class="line">    +-- ImportError</span><br><span class="line">    +-- LookupError</span><br><span class="line">    +-- MemoryError</span><br><span class="line">    +-- NameError</span><br><span class="line">    +-- OSError</span><br><span class="line">    +-- ReferenceError</span><br><span class="line">    +-- RuntimeError</span><br><span class="line">    +-- SyntaxError</span><br><span class="line">    +-- SystemError</span><br><span class="line">    +-- TypeError</span><br><span class="line">    +-- ValueError</span><br><span class="line">    +-- Warning</span><br></pre></td></tr></table></figure>
<p>​    </p>
<h2 id="九、Unicode和字节字符串"><a href="#九、Unicode和字节字符串" class="headerlink" title="九、Unicode和字节字符串"></a>九、Unicode和字节字符串</h2><h3 id="Python的字符串类型"><a href="#Python的字符串类型" class="headerlink" title="Python的字符串类型"></a>Python的字符串类型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""Python2.x"""</span></span><br><span class="line"><span class="comment"># 1.str表示8位文本和二进制数据</span></span><br><span class="line"><span class="comment"># 2.unicode表示宽字符Unicode文本</span></span><br><span class="line"><span class="string">"""Python3.x"""</span></span><br><span class="line"><span class="comment"># 1.str表示Unicode文本（8位或者更宽）</span></span><br><span class="line"><span class="comment"># 2.bytes表示不可变的二进制数据</span></span><br><span class="line"><span class="comment"># 3.bytearray是一种可变的bytes类型</span></span><br></pre></td></tr></table></figure>
<h3 id="字符编码方法"><a href="#字符编码方法" class="headerlink" title="字符编码方法"></a>字符编码方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""ASCII"""</span>                   <span class="comment"># 一个字节，只包含英文字符，0到127，共128个字符，利用函数可以进行字符和数字的相互转换</span></span><br><span class="line">ord(<span class="string">'a'</span>)                      <span class="comment"># 字符a的ASCII码为97，所以这里返回97</span></span><br><span class="line">chr(<span class="number">97</span>)                       <span class="comment"># 和上边的过程相反，返回字符'a'</span></span><br><span class="line"><span class="string">"""Latin-1"""</span>                 <span class="comment"># 一个字节，包含特殊字符，0到255，共256个字符，相当于对ASCII码的扩展</span></span><br><span class="line">chr(<span class="number">196</span>)                      <span class="comment"># 返回一个特殊字符：Ä</span></span><br><span class="line"><span class="string">"""Unicode"""</span>                 <span class="comment"># 宽字符，一个字符包含多个字节，一般用于亚洲的字符集，比如中文有好几万字</span></span><br><span class="line"><span class="string">"""UTF-8"""</span>                   <span class="comment"># 可变字节数，小于128的字符表示为单个字节，128到0X7FF之间的代码转换为两个字节，0X7FF以上的代码转换为3或4个字节</span></span><br><span class="line"><span class="comment"># 注意：可以看出来，ASCII码是Latin-1和UTF-8的一个子集</span></span><br><span class="line"><span class="comment"># 注意：utf-8是unicode的一种实现方式，unicode、gbk、gb2312是编码字符集</span></span><br></pre></td></tr></table></figure>
<h3 id="查看Python中的字符串编码名称，查看系统的编码"><a href="#查看Python中的字符串编码名称，查看系统的编码" class="headerlink" title="查看Python中的字符串编码名称，查看系统的编码"></a>查看Python中的字符串编码名称，查看系统的编码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> encodings</span><br><span class="line">help(encoding)</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.platform                  <span class="comment"># 'win64'</span></span><br><span class="line">sys.getdefaultencoding()      <span class="comment"># 'utf-8'</span></span><br><span class="line">sys.getdefaultencoding()      <span class="comment"># 返回当前系统平台的编码类型</span></span><br><span class="line">sys.getsizeof(object)         <span class="comment"># 返回object占有的bytes的大小</span></span><br></pre></td></tr></table></figure>
<h3 id="源文件字符集编码声明-添加注释来指定想要的编码形式-从而改变默认值-注释必须出现在脚本的第一行或者第二行"><a href="#源文件字符集编码声明-添加注释来指定想要的编码形式-从而改变默认值-注释必须出现在脚本的第一行或者第二行" class="headerlink" title="源文件字符集编码声明: 添加注释来指定想要的编码形式 从而改变默认值 注释必须出现在脚本的第一行或者第二行"></a>源文件字符集编码声明: 添加注释来指定想要的编码形式 从而改变默认值 注释必须出现在脚本的第一行或者第二行</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""说明：其实这里只会检查#和coding:utf-8，其余的字符都是为了美观加上的"""</span></span><br><span class="line"><span class="comment"># _*_ coding: utf-8 _*_</span></span><br><span class="line"><span class="comment"># coding = utf-8</span></span><br></pre></td></tr></table></figure>
<h3 id="编码，解码"><a href="#编码，解码" class="headerlink" title="编码，解码"></a>编码，解码</h3><p>编码: 字符串 –&gt; 原始字节       </p>
<p>解码: 原始字节 –&gt; 字符串</p>
<h3 id="Python3-x中的字符串应用"><a href="#Python3-x中的字符串应用" class="headerlink" title="Python3.x中的字符串应用"></a>Python3.x中的字符串应用</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">'...'</span>                     <span class="comment"># 构建一个str对象，不可变对象</span></span><br><span class="line">b = <span class="string">b'...'</span>                    <span class="comment"># 构建一个bytes对象，不可变对象</span></span><br><span class="line">s[<span class="number">0</span>], b[<span class="number">0</span>]                    <span class="comment"># 返回('.', 113)</span></span><br><span class="line">s[<span class="number">1</span>:], b[<span class="number">1</span>:]                  <span class="comment"># 返回('..', b'..')</span></span><br><span class="line">B = B<span class="string">"""</span></span><br><span class="line"><span class="string">    xxxx</span></span><br><span class="line"><span class="string">    yyyy</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line"><span class="comment"># B = b'\nxxxx\nyyyy\n'</span></span><br><span class="line"><span class="comment"># 编码，将str字符串转化为其raw bytes形式：</span></span><br><span class="line">    str.encode(encoding = <span class="string">'utf-8'</span>, errors = <span class="string">'strict'</span>)</span><br><span class="line">    bytes(str, encoding)</span><br><span class="line"><span class="comment"># 编码例子：</span></span><br><span class="line">    S = <span class="string">'egg'</span></span><br><span class="line">    S.encode()                    <span class="comment"># b'egg'</span></span><br><span class="line">    bytes(S, encoding = <span class="string">'ascii'</span>)  <span class="comment"># b'egg'</span></span><br><span class="line"><span class="comment"># 解码，将raw bytes字符串转化为str形式：</span></span><br><span class="line">    bytes.decode(encoding = <span class="string">'utf-8'</span>, errors = <span class="string">'strict'</span>)</span><br><span class="line">    str(bytes_or_buffer[, encoding[, errors]])</span><br><span class="line"><span class="comment"># 解码例子：</span></span><br><span class="line">    B = <span class="string">b'spam'</span></span><br><span class="line">    B.decode()                <span class="comment"># 'spam'</span></span><br><span class="line">    str(B)                    <span class="comment"># "b'spam'"，不带编码的str调用，结果为打印该bytes对象</span></span><br><span class="line">    str(B, encoding = <span class="string">'ascii'</span>)<span class="comment"># 'spam'，带编码的str调用，结果为转化该bytes对象</span></span><br></pre></td></tr></table></figure>
<h3 id="Python2-x的编码问题"><a href="#Python2-x的编码问题" class="headerlink" title="Python2.x的编码问题"></a>Python2.x的编码问题</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">u = <span class="string">u'汉'</span></span><br><span class="line"><span class="keyword">print</span> repr(u)                 <span class="comment"># u'\xba\xba'</span></span><br><span class="line">s = u.encode(<span class="string">'UTF-8'</span>)</span><br><span class="line"><span class="keyword">print</span> repr(s)                 <span class="comment"># '\xc2\xba\xc2\xba'</span></span><br><span class="line">u2 = s.decode(<span class="string">'UTF-8'</span>)</span><br><span class="line"><span class="keyword">print</span> repr(u2)                <span class="comment"># u'\xba\xba'</span></span><br><span class="line"><span class="comment"># 对unicode进行解码是错误的</span></span><br><span class="line">s2 = u.decode(<span class="string">'UTF-8'</span>)        <span class="comment"># UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-1: ordinal not in range(128)</span></span><br><span class="line"><span class="comment"># 同样，对str进行编码也是错误的</span></span><br><span class="line">u2 = s.encode(<span class="string">'UTF-8'</span>)        <span class="comment"># UnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 0: ordinal not in range(128)</span></span><br></pre></td></tr></table></figure>
<h3 id="bytes对象"><a href="#bytes对象" class="headerlink" title="bytes对象"></a>bytes对象</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">B = <span class="string">b'abc'</span></span><br><span class="line">B = bytes(<span class="string">'abc'</span>, <span class="string">'ascii'</span>)</span><br><span class="line">B = bytes([<span class="number">97</span>, <span class="number">98</span>, <span class="number">99</span>])</span><br><span class="line">B = <span class="string">'abc'</span>.encode()</span><br><span class="line"><span class="comment"># bytes对象的方法调用基本和str类型一致 但:B[0]返回的是ASCII码值97, 而不是b'a'</span></span><br></pre></td></tr></table></figure>
<h3 id="文本文件，二进制文件"><a href="#文本文件，二进制文件" class="headerlink" title="文本文件，二进制文件"></a>文本文件，二进制文件</h3><p>文本文件: 根据Unicode编码来解释文件内容，要么是平台的默认编码，要么是指定的编码类型</p>
<p>二进制文件：表示字节值的整数的一个序列 <code>open(&#39;bin.txt&#39;, &#39;rb&#39;)</code></p>
<h3 id="Unicode文件"><a href="#Unicode文件" class="headerlink" title="Unicode文件"></a>Unicode文件</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">'A\xc4B\xe8C'</span>             <span class="comment"># s = 'A?BèC'  len(s) = 5</span></span><br><span class="line"><span class="comment">#手动编码</span></span><br><span class="line">    l = s.encode(<span class="string">'latin-1'</span>)   <span class="comment"># l = b'A\xc4B\xe8C'  len(l) = 5</span></span><br><span class="line">    u = s.encode(<span class="string">'utf-8'</span>)     <span class="comment"># u = b'A\xc3\x84B\xc3\xa8C'  len(u) = 7</span></span><br><span class="line"><span class="comment">#文件输出编码</span></span><br><span class="line">    open(<span class="string">'latindata'</span>, <span class="string">'w'</span>, encoding = <span class="string">'latin-1'</span>).write(s)</span><br><span class="line">    l = open(<span class="string">'latindata'</span>, <span class="string">'rb'</span>).read()                        <span class="comment"># l = b'A\xc4B\xe8C'  len(l) = 5</span></span><br><span class="line">    open(<span class="string">'uft8data'</span>, <span class="string">'w'</span>, encoding = <span class="string">'utf-8'</span>).write(s)</span><br><span class="line">    u = open(<span class="string">'uft8data'</span>, <span class="string">'rb'</span>).read()                         <span class="comment"># u = b'A\xc3\x84B\xc3\xa8C'  len(u) = 7</span></span><br><span class="line"><span class="comment">#文件输入编码</span></span><br><span class="line">    s = open(<span class="string">'latindata'</span>, <span class="string">'r'</span>, encoding = <span class="string">'latin-1'</span>).read()   <span class="comment"># s = 'A?BèC'  len(s) = 5</span></span><br><span class="line">    s = open(<span class="string">'latindata'</span>, <span class="string">'rb'</span>).read().decode(<span class="string">'latin-1'</span>)      <span class="comment"># s = 'A?BèC'  len(s) = 5</span></span><br><span class="line">    s = open(<span class="string">'utf8data'</span>, <span class="string">'r'</span>, encoding = <span class="string">'utf-8'</span>).read()      <span class="comment"># s = 'A?BèC'  len(s) = 5</span></span><br><span class="line">    s = open(<span class="string">'utf8data'</span>, <span class="string">'rb'</span>).read().decode(<span class="string">'utf-8'</span>)         <span class="comment"># s = 'A?BèC'  len(s) = 5</span></span><br></pre></td></tr></table></figure>
<h2 id="十、其他"><a href="#十、其他" class="headerlink" title="十、其他"></a>十、其他</h2><h3 id="Python实现任意深度的赋值"><a href="#Python实现任意深度的赋值" class="headerlink" title="Python实现任意深度的赋值"></a>Python实现任意深度的赋值</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a[<span class="number">0</span>] = <span class="string">'value1'</span></span><br><span class="line">a[<span class="number">1</span>][<span class="number">2</span>] = <span class="string">'value2'</span></span><br><span class="line">a[<span class="number">3</span>][<span class="number">4</span>][<span class="number">5</span>] = <span class="string">'value3'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDict</span><span class="params">(dict)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self, key, value)</span>:</span>                 <span class="comment"># 该函数不做任何改动 这里只是为了输出</span></span><br><span class="line">        print(<span class="string">'setitem:'</span>, key, value, self)</span><br><span class="line">        super().__setitem__(key, value)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, item)</span>:</span>                       <span class="comment"># 主要技巧在该函数</span></span><br><span class="line">        print(<span class="string">'getitem:'</span>, item, self)                  <span class="comment"># 输出信息</span></span><br><span class="line">        <span class="comment"># 基本思路: a[1][2]赋值时 需要先取出a[1] 然后给a[1]的[2]赋值</span></span><br><span class="line">        <span class="keyword">if</span> item <span class="keyword">not</span> <span class="keyword">in</span> self:                           <span class="comment"># 如果a[1]不存在 则需要新建一个dict 并使得a[1] = dict</span></span><br><span class="line">            temp = MyDict()                            <span class="comment"># 新建的dict: temp</span></span><br><span class="line">            super().__setitem__(item, temp)            <span class="comment"># 赋值a[1] = temp</span></span><br><span class="line">            <span class="keyword">return</span> temp                                <span class="comment"># 返回temp 使得temp[2] = value有效</span></span><br><span class="line">        <span class="keyword">return</span> super().__getitem__(item)               <span class="comment"># 如果a[1]存在 则直接返回a[1]</span></span><br><span class="line"><span class="comment"># 例子:</span></span><br><span class="line">    test = MyDict()</span><br><span class="line">    test[<span class="number">0</span>] = <span class="string">'test'</span></span><br><span class="line">    print(test[<span class="number">0</span>])</span><br><span class="line">    test[<span class="number">1</span>][<span class="number">2</span>] = <span class="string">'test1'</span></span><br><span class="line">    print(test[<span class="number">1</span>][<span class="number">2</span>])</span><br><span class="line">    test[<span class="number">1</span>][<span class="number">3</span>] = <span class="string">'test2'</span></span><br><span class="line">    print(test[<span class="number">1</span>][<span class="number">3</span>])</span><br></pre></td></tr></table></figure>
<h3 id="Python中的多维数组"><a href="#Python中的多维数组" class="headerlink" title="Python中的多维数组"></a>Python中的多维数组</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">lists = [<span class="number">0</span>] * <span class="number">3</span>                                        <span class="comment"># 扩展list，结果为[0, 0, 0]</span></span><br><span class="line">lists = [[]] * <span class="number">3</span>                                       <span class="comment"># 多维数组，结果为[[], [], []]，但有问题，往下看</span></span><br><span class="line">lists[<span class="number">0</span>].append(<span class="number">3</span>)                                     <span class="comment"># 期望看到的结果[[3], [], []]，实际结果[[3], [3], [3]]，原因：list*n操作，是浅拷贝，如何避免？往下看</span></span><br><span class="line">lists = [[] <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>)]                         <span class="comment"># 多维数组，结果为[[], [], []]</span></span><br><span class="line">lists[<span class="number">0</span>].append(<span class="number">3</span>)                                     <span class="comment"># 结果为[[3], [], []]</span></span><br><span class="line">lists[<span class="number">1</span>].append(<span class="number">6</span>)                                     <span class="comment"># 结果为[[3], [6], []]</span></span><br><span class="line">lists[<span class="number">2</span>].append(<span class="number">9</span>)                                     <span class="comment"># 结果为[[3], [6], [9]]</span></span><br><span class="line">lists = [[[] <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">4</span>)] <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>)]     <span class="comment"># 3行4列，且每一个元素为[]</span></span><br></pre></td></tr></table></figure>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://github.com/xianhu/LearnPython" target="_blank" rel="noopener">xianhu/LearnPython</a></p>
<p><a href="https://book.douban.com/subject/26829016/" target="_blank" rel="noopener">Python编程 : 从入门到实践</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/images/wechatpay.jpg" alt="AndyRon WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="/images/alipay.jpg" alt="AndyRon Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <div>
      
        <!-- 版权声明 -->


  <ul class="post-copyright">


    <li class="post-copyright-title">
      <strong>本文标题：</strong>
      Python基础总结
    </li>

    <li class="post-copyright-author">
      <strong>本文作者：</strong>
      AndyRon
    </li>

    <li class="post-copyright-date">
      <strong>发布时间：</strong>
      2019年09月15日 - 20:06
    </li>

    <li class="post-copyright-updated">
      <strong>最后更新：</strong>
      2019年09月17日 - 11:38
    </li>


    <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="http://andyron.com/2019/python-base.html" title="Python基础总结">http://andyron.com/2019/python-base.html</a>
    </li>
    <li class="post-copyright-license">
      <strong>版权声明： </strong>
      本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！
    </li>
  </ul>


      
    </div>

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/百年孤独.html" rel="next" title="读《百年孤独》 —— 孤独才是寂寞的唯一出口">
                <i class="fa fa-chevron-left"></i> 读《百年孤独》 —— 孤独才是寂寞的唯一出口
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_tqq"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_douban"></a>
  <a class="jiathis_button_renren"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_kaixin001"></a>
  <a class="jiathis_button_copy"></a>
  <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
  var jiathis_config={
    hideMore:false
  }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="AndyRon" />
          <p class="site-author-name" itemprop="name">AndyRon</p>
           
              <p class="site-description motion-element" itemprop="description">Just for fun.👨‍💻✍️🎨</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">212</span>
                <span class="site-state-item-name">文章</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">19</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">210</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/andyRon" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.jianshu.com/u/efce1a2a95ab" target="_blank" title="简书">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  简书
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/andyronm" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/AndyRon8" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="mailto:rongming.2008@163.com" target="_blank" title="email">
                  
                    <i class="fa fa-fw fa-envelope"></i>
                  
                  email
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              推荐阅读
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.appcoda.com" title="Appcoda" target="_blank">Appcoda</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.ruanyifeng.com/" title="阮一峰的个人网站" target="_blank">阮一峰的个人网站</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.raywenderlich.com" title="Ray Wenderlich" target="_blank">Ray Wenderlich</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#一、类型和运算"><span class="nav-text">一、类型和运算</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#寻求帮助"><span class="nav-text">寻求帮助</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#测试类型的三种方法"><span class="nav-text">测试类型的三种方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Python数据类型：哈希类型、不可哈希类型"><span class="nav-text">Python数据类型：哈希类型、不可哈希类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数字常量"><span class="nav-text">数字常量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数字的表达式操作符"><span class="nav-text">数字的表达式操作符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#整数可以利用bit-length函数测试所占的二进制位数"><span class="nav-text">整数可以利用bit_length函数测试所占的二进制位数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#repr和str显示格式的区别"><span class="nav-text">repr和str显示格式的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数字相关的模块"><span class="nav-text">数字相关的模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#集合set"><span class="nav-text">集合set</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#集合frozenset，不可变对象"><span class="nav-text">集合frozenset，不可变对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#布尔类型bool"><span class="nav-text">布尔类型bool</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#动态类型简介"><span class="nav-text">动态类型简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常见字符串常量和表达式"><span class="nav-text">常见字符串常量和表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#内置str处理函数："><span class="nav-text">内置str处理函数：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#三重引号编写多行字符串块，并且在代码折行处嵌入换行字符-n"><span class="nav-text">三重引号编写多行字符串块，并且在代码折行处嵌入换行字符\n</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#索引和分片："><span class="nav-text">索引和分片：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串转换工具："><span class="nav-text">字符串转换工具：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#另类字符串连接"><span class="nav-text">另类字符串连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Python中的字符串格式化实现1–字符串格式化表达式"><span class="nav-text">Python中的字符串格式化实现1–字符串格式化表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Python中的字符串格式化实现2–字符串格式化调用方法"><span class="nav-text">Python中的字符串格式化实现2–字符串格式化调用方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常用列表常量和操作"><span class="nav-text">常用列表常量和操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用切片来删除序列的某一段"><span class="nav-text">用切片来删除序列的某一段</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常用字典常量和操作"><span class="nav-text">常用字典常量和操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字典解析"><span class="nav-text">字典解析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字典的特殊方法missing：当查找找不到key时，会执行该方法"><span class="nav-text">字典的特殊方法missing：当查找找不到key时，会执行该方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#元组和列表的唯一区别在于元组是不可变对象，列表时可变对象"><span class="nav-text">元组和列表的唯一区别在于元组是不可变对象，列表时可变对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#元组的特殊语法-逗号和圆括号"><span class="nav-text">元组的特殊语法: 逗号和圆括号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件基本操作"><span class="nav-text">文件基本操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他"><span class="nav-text">其他</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二、语法和语句"><span class="nav-text">二、语法和语句</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#赋值语句的形式"><span class="nav-text">赋值语句的形式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#序列赋值-序列解包"><span class="nav-text">序列赋值 序列解包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#print函数原型"><span class="nav-text">print函数原型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#and，or"><span class="nav-text">and，or</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#if-else三元表达符（if语句在行内）"><span class="nav-text">if/else三元表达符（if语句在行内）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#while，for"><span class="nav-text">while，for</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#for循环的元组赋值"><span class="nav-text">for循环的元组赋值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#列表解析语法"><span class="nav-text">列表解析语法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#两个列表同时解析：使用zip函数"><span class="nav-text">两个列表同时解析：使用zip函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#带索引的列表解析：使用enumerate函数"><span class="nav-text">带索引的列表解析：使用enumerate函数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#生成器表达式"><span class="nav-text">生成器表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文档字符串"><span class="nav-text">文档字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#命名惯例"><span class="nav-text">命名惯例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#列表解析-in成员关系测试-map-sorted-zip-enumerate内置函数等都使用了迭代协议"><span class="nav-text">列表解析 in成员关系测试 map sorted zip enumerate内置函数等都使用了迭代协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#del语句-手动删除某个变量"><span class="nav-text">del语句: 手动删除某个变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取列表的子表的方法"><span class="nav-text">获取列表的子表的方法:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#手动迭代：iter和next"><span class="nav-text">手动迭代：iter和next</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Python中的可迭代对象"><span class="nav-text">Python中的可迭代对象</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#三、函数语法规则"><span class="nav-text">三、函数语法规则</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#函数相关的语句和表达式"><span class="nav-text">函数相关的语句和表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Python函数变量名解析-LEGB原则"><span class="nav-text">Python函数变量名解析:LEGB原则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#嵌套函数举例-工厂函数"><span class="nav-text">嵌套函数举例:工厂函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#嵌套函数举例-lambda实例"><span class="nav-text">嵌套函数举例:lambda实例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nonlocal和global语句的区别"><span class="nav-text">nonlocal和global语句的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数参数：不可变参数通过“值”传递，可变参数通过“引用”传递"><span class="nav-text">函数参数：不可变参数通过“值”传递，可变参数通过“引用”传递</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#可变参数匹配-和"><span class="nav-text">可变参数匹配: * 和 **</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数调用时的参数解包-和-分别解包元组和字典"><span class="nav-text">函数调用时的参数解包: * 和 ** 分别解包元组和字典</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数属性-自己定义的-函数可以添加属性"><span class="nav-text">函数属性:(自己定义的)函数可以添加属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数注解-编写在def头部行-主要用于说明参数范围、参数类型、返回值类型等"><span class="nav-text">函数注解: 编写在def头部行 主要用于说明参数范围、参数类型、返回值类型等</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#匿名函数-lambda"><span class="nav-text">匿名函数:lambda</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lambda函数与map-filter-reduce函数的结合"><span class="nav-text">lambda函数与map filter reduce函数的结合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#生成器函数-yield-VS-return"><span class="nav-text">生成器函数:yield VS return</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#生成器表达式-小括号进行列表解析"><span class="nav-text">生成器表达式:小括号进行列表解析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#本地变量是静态检测的"><span class="nav-text">本地变量是静态检测的</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数的默认值是在函数定义的时候实例化的-而不是在调用的时候-例子"><span class="nav-text">函数的默认值是在函数定义的时候实例化的 而不是在调用的时候 例子:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#四、函数例子"><span class="nav-text">四、函数例子</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#数学运算类"><span class="nav-text">数学运算类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#集合类操作"><span class="nav-text">集合类操作</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#五、模块Moudle"><span class="nav-text">五、模块Moudle</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Python模块搜索路径"><span class="nav-text">Python模块搜索路径:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查看全部的模块搜索路径"><span class="nav-text">查看全部的模块搜索路径</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#模块的使用代码"><span class="nav-text">模块的使用代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#重载模块reload"><span class="nav-text">重载模块reload</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#模块的包导入"><span class="nav-text">模块的包导入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#init-py包文件"><span class="nav-text">init.py包文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#包相对导入-使用点号-只能使用from语句"><span class="nav-text">包相对导入:使用点号(.) 只能使用from语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#包相对导入与普通导入的区别"><span class="nav-text">包相对导入与普通导入的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#模块数据隐藏-最小化from-的破坏"><span class="nav-text">模块数据隐藏:最小化from*的破坏</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#模块属性"><span class="nav-text">模块属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#import语句from语句的as扩展"><span class="nav-text">import语句from语句的as扩展</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#得到模块属性的几种方法"><span class="nav-text">得到模块属性的几种方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#六、类与面向对象"><span class="nav-text">六、类与面向对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#最普通的类"><span class="nav-text">最普通的类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Python的类没有基于参数的函数重载"><span class="nav-text">Python的类没有基于参数的函数重载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#子类扩展超类-尽量调用超类的方法"><span class="nav-text">子类扩展超类: 尽量调用超类的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类内省工具"><span class="nav-text">类内省工具</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#返回1中-数据属性spam是属于类-而不是对象"><span class="nav-text">返回1中 数据属性spam是属于类 而不是对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类方法调用的两种方式"><span class="nav-text">类方法调用的两种方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#抽象超类的实现方法"><span class="nav-text">抽象超类的实现方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#OOP和继承-“is-a”的关系"><span class="nav-text">OOP和继承: “is-a”的关系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类的伪私有属性-使用-attr"><span class="nav-text">类的伪私有属性:使用__attr</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类方法是对象-无绑定类方法对象-绑定实例方法对象"><span class="nav-text">类方法是对象:无绑定类方法对象 / 绑定实例方法对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#获取对象信息-属性和方法"><span class="nav-text">获取对象信息: 属性和方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#为类动态绑定属性或方法-MethodType方法"><span class="nav-text">为类动态绑定属性或方法: MethodType方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#七、类的高级话题"><span class="nav-text">七、类的高级话题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#多重继承"><span class="nav-text">多重继承</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类的继承和子类的初始化"><span class="nav-text">类的继承和子类的初始化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实例方法-静态方法-类方法"><span class="nav-text">实例方法 / 静态方法 / 类方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数装饰器-是它后边的函数的运行时的声明，由-符号以及后边紧跟的”元函数”-metafunction-组成"><span class="nav-text">函数装饰器:是它后边的函数的运行时的声明，由@符号以及后边紧跟的”元函数”(metafunction)组成</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类修饰器-是它后边的类的运行时的声明，由-符号以及后边紧跟的”元函数”-metafunction-组成"><span class="nav-text">类修饰器:是它后边的类的运行时的声明，由@符号以及后边紧跟的”元函数”(metafunction)组成</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#限制class属性-slots属性"><span class="nav-text">限制class属性: slots属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类属性高级话题-property"><span class="nav-text">类属性高级话题: @property</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#定制类-重写类的方法"><span class="nav-text">定制类: 重写类的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#动态创建类type"><span class="nav-text">动态创建类type()</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#八、异常相关"><span class="nav-text">八、异常相关</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#捕获异常"><span class="nav-text">捕获异常:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Python3-x中的异常链"><span class="nav-text">Python3.x中的异常链</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#assert子句-assert-lt-test-gt-lt-data-gt"><span class="nav-text">assert子句: assert &lt;test&gt;, &lt;data&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#with-as环境管理器-作为常见的try-finally用法模式的替代方案"><span class="nav-text">with/as环境管理器:作为常见的try/finally用法模式的替代方案</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用户自定义异常-class-Bad-Exception-…"><span class="nav-text">用户自定义异常: class Bad(Exception):…..</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用户定制异常数据"><span class="nav-text">用户定制异常数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关于sys-exc-info-允许一个异常处理器获取对最近引发的异常的访问"><span class="nav-text">关于sys.exc_info:允许一个异常处理器获取对最近引发的异常的访问</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#异常层次"><span class="nav-text">异常层次</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#九、Unicode和字节字符串"><span class="nav-text">九、Unicode和字节字符串</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Python的字符串类型"><span class="nav-text">Python的字符串类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符编码方法"><span class="nav-text">字符编码方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查看Python中的字符串编码名称，查看系统的编码"><span class="nav-text">查看Python中的字符串编码名称，查看系统的编码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#源文件字符集编码声明-添加注释来指定想要的编码形式-从而改变默认值-注释必须出现在脚本的第一行或者第二行"><span class="nav-text">源文件字符集编码声明: 添加注释来指定想要的编码形式 从而改变默认值 注释必须出现在脚本的第一行或者第二行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#编码，解码"><span class="nav-text">编码，解码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Python3-x中的字符串应用"><span class="nav-text">Python3.x中的字符串应用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Python2-x的编码问题"><span class="nav-text">Python2.x的编码问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bytes对象"><span class="nav-text">bytes对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文本文件，二进制文件"><span class="nav-text">文本文件，二进制文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Unicode文件"><span class="nav-text">Unicode文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#十、其他"><span class="nav-text">十、其他</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Python实现任意深度的赋值"><span class="nav-text">Python实现任意深度的赋值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Python中的多维数组"><span class="nav-text">Python中的多维数组</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考"><span class="nav-text">参考</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2017 - 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">AndyRon</span>
  <span class="post-count">  全站共323.5k字</span>

</div>


<!--

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

--!>



        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  

    
      <script id="dsq-count-scr" src="https://http-andyron-com.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://andyron.com/2019/python-base.html';
          this.page.identifier = '2019/python-base.html';
          this.page.title = 'Python基础总结';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://http-andyron-com.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  








  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("rgq6Qsvb0ISrHdgsraNlqt7H-gzGzoHsz", "T35WL0YkQ4GVOUDOkizK5FAd");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>

<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/love.js"></script>

